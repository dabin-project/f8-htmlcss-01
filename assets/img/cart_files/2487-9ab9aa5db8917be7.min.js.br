"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="09c2d581-5d7b-5e80-aee1-1128c2e55dbe")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2487],{813963:(e,t,l)=>{l.d(t,{W:()=>p});var a=l(105652),n=l(20002),i=l(74372),s=l(719749),r=l(493064),o=l(197368),d=l(610604);function p(e=!1){let t=(0,n.wA)(),l=a.useMemo(()=>(0,i.g)(),[]),u=(0,s.bc)((0,d.gvX)({cacheNonce:l}));a.useEffect(()=>{if("loaded"!==u.status)return;let l=(0,r.oA)(u.data.currentUser.notificationExperimentInfo);l&&("exp_notification_catfile"===l.experimentName||"exp_notification_catfic"===l.experimentName)&&("prompt_to_opt_in"===l.type?t((e?o.hU:o.ZI)({userId:l.userId,fileKey:l.fileKey,experimentName:l.experimentName,toastType:"prompt_to_opt_in"})):t(o.EJ({userId:l.userId,fileKey:l.fileKey,preference:l.preference,experimentName:l.experimentName})))},[t,u,e])}},715886:(e,t,l)=>{l.d(t,{_:()=>u});var a=l(239976),n=l(105652),i=l(692376),s=l(259714),r=l(362618),o=l(709003),d=l(1007),p=l(894250);let u=n.memo(function(e){let{nodeId:t}=e,l=n.useRef(null),s=n.useRef(null),r=(0,d._X)({subscribeToUpdates_expensive:!0});return n.useEffect(()=>{let e=(0,o.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){i.glU.removeLoadingEmbed(t);return}s.current=e.position,m(l,r,s)}),a=e.currentNodePosition[t]?.position;return a?(s.current=a,m(l,r,s)):i.glU.removeLoadingEmbed(t),()=>{(0,o.lB)(`loading-embed-${t}`)}},[t,r]),(0,a.jsx)("div",{ref:l,children:(0,a.jsx)(c,{})})});function c(){return(0,a.jsx)("span",{className:"loading_embed_overlay--root--w-aNV",children:(0,a.jsx)(s.B,{svg:p.A,className:"loading_embed_overlay--spinner--K2SZa",autosize:!0})})}function m(e,t,l){if(!e.current||!t||!l.current)return;let a=e.current,n=l.current,i=(0,d.Yb)(t,n),s=28*t.zoomScale;a.style.transform=`translate(${i.x+(i.width-s)/2+t.x}px, ${i.y+(i.height*r.Ao/r.RN-s)/2+t.y}px) rotate(${n.angle}deg) scale(${t.zoomScale})`,a.style.transformOrigin="top left",a.style.position="absolute"}},190661:(e,t,l)=>{l.d(t,{Pm:()=>a,aF:()=>i});var a=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(a||{}),n=(e=>(e.Light="light",e.Dark="dark",e))(n||{});function i(e){let t,l;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}l="LIGHT"===t?"light":"dark";let a="true"===e.hideBackground;return a&&(l=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(l)),{theme:t,preferredTokenTheme:l,transparentMode:a}}},270315:(e,t,l)=>{l.d(t,{DR:()=>U,wL:()=>M,lu:()=>B,E$:()=>L,gD:()=>J,Wd:()=>H});var a=l(239976),n=l(105652),i=l(20002),s=l(943360);let r=(0,n.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M12.774 19.963c.32-.03.63.142.747.441.084.215-.028.476-.257.508a9 9 0 1 1 7.648-7.648c-.032.229-.293.34-.508.256a.72.72 0 0 1-.44-.747Q20 12.39 20 12a8 8 0 1 0-7.226 7.963M18 11.883c.007.342-.343.558-.662.433a.55.55 0 0 1-.34-.5 5 5 0 1 0-5.18 5.18c.218.01.418.138.498.342.125.319-.09.669-.433.662A6 6 0 1 1 18 11.882m-7.17 2.88c.224.095.423-.132.334-.359a3 3 0 0 1-.06-.167 2 2 0 0 0-.51-.814 2 2 0 1 1 2.828-2.829c.227.23.506.414.815.51q.084.026.168.06c.226.088.453-.11.358-.335a3 3 0 1 0-3.934 3.934m5.075 6.226a1.5 1.5 0 0 0 1.376-1.058l.624-2.027 2.026-.623a1.5 1.5 0 0 0 .108-2.83l-6-2.357a1.5 1.5 0 0 0-1.945 1.945l2.358 6a1.5 1.5 0 0 0 1.453.95m4.085-5.123a.5.5 0 0 1-.352.46l-2.533.778-.78 2.533a.5.5 0 0 1-.943.036l-2.357-6a.5.5 0 0 1 .648-.648l6 2.357a.5.5 0 0 1 .317.484",clipRule:"evenodd"})})});var o=l(692376),d=l(854225),p=l(798913),u=l(2227),c=l(466082),m=l(379141),f=l(270450),g=l(224542),h=l.n(g),x=l(279044),_=l(653120),v=l(154963),b=l(888903),y=l(287736),E=l(763561),j=l(818193),N=l(276571),I=l(605985),w=l(157750),P=l(550507),S=l(398266),C=l(342377),T=l(563020);l(445019),l(575015);var O=l(459886);l(839001);var k=(e=>(e[e.LOADING=1]="LOADING",e[e.PRESENTER_VIEW_CAN_DRIVE=2]="PRESENTER_VIEW_CAN_DRIVE",e[e.POPOUT_VIEWER_CAN_DRIVE=3]="POPOUT_VIEWER_CAN_DRIVE",e[e.PRESENTER_VIEW_SPOTLIGHT=4]="PRESENTER_VIEW_SPOTLIGHT",e))(k||{}),F=l(861482),D=l(420658);let A="embed--iframe--LWHMe",R="embed--loaded--6v9Wc";function U(e){let{nodeId:t,setConfigData:l,isReadOnly:s,invalidateThumbnail:r}=e,{isEmbedActive:u,setActiveEmbed:g}=(0,T._)(t),h=!s,x=(0,i.wA)(),_=(0,w.ut)(o.Ez5?.flappData().embeddablePrototypeIdPendingInsertion,""),[v,j]=(0,n.useState)(),N=(0,n.useMemo)(()=>{let t=J(e.configData);if(!t)return;let l=E.hY[t.presetIdentifier],a=t.rotation===d.xOL.CCW_90,{x:n,y:i}=l?.imageSize??{x:0,y:0},[s,r]=a?[i,n]:[n,i];return s/r},[e.configData]);(0,n.useEffect)(()=>{if(!h)return;let e=(0,c.UN)().get(t),l=N??v;e&&l&&p.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,a=Math.floor(t/l);0===e.size.x&&(e.x-=t/2,e.y-=a/2),e.resizeWithConstraints(t,a),e.proportionsConstrained=!0})},[t,N,v,h]),(0,n.useEffect)(()=>{t===_&&(x(b.F.enqueue({type:"slides-embedded-prototype",message:(0,m.t)("slides.inserting_embed.visual_bell"),icon:y.zX.SPINNER,timeoutOverride:1/0})),g(),setTimeout(()=>{t===o.Ez5?.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&o.oHM?.embeddablePrototypeLoadFailed()},3e4))},[t,_,x,g]),(0,n.useEffect)(()=>{let e=e=>{if(e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==S.xu+t)return;let a=e.data;if("EMBED_PROTO_ASPECT_RATIO"===a.type&&a.data.aspectRatio&&(j(a.data.aspectRatio),t===_&&o.oHM?.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===a.type){let e=a.data.device;h&&e?p.l7.system("set-embed-device-frame-config-data",()=>{l("deviceFrameShown",""!==e.presetIdentifier&&"PRESET"===e.type?"true":"false"),l("deviceFramePreset",e.presetIdentifier),l("deviceFrameRotation",e.rotation)}):h&&p.l7.system("set-embed-device-frame-config-data",()=>{l("deviceFrameShown","false"),l("deviceFramePreset",""),l("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===a.type&&h&&p.l7.system("embed-file-metatada",()=>{l("fileName",a.data.fileName),l("pageName",a.data.pageName),a.data.activeStartingPointNodeId&&l("activeStartingPointNodeId",a.data.activeStartingPointNodeId),a.data.startingPointsData&&l("startingPointsData",JSON.stringify(a.data.startingPointsData))}),"EMBED_PROTO_THUMBNAIL"===a.type&&a.data.thumbnail){if(!(0,f.kc)().slides_iframe_embedded_prototypes_thumbnail)return;(0,S.yx)(a.data.thumbnail,a.data.width,a.data.height,t,r)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,l,x,_,h,r]);let I=(0,T.s)(t)||!u;return(0,a.jsx)(V,{...e,isActive:u,setActive:g,disablePointerEvents:!I})}function L(e){let t=(0,N.mr)(),l=(0,_.h)(),i=e.nodeId,[s,r]=(0,n.useState)(l?.isActiveSlidesEmbeddedPrototype(i)||!1);(0,x.O5)(l,"embeddedPrototypeDataChange",n.useCallback(e=>{let t=!1;for(let l of e)if(u.dI(l.nodeId)===i){t=!0;break}r(t)},[i]));let o=(0,n.useCallback)(e=>{t?.isAudienceViewPopout?function(e){if(!window.opener){console.error("No parent window found! Did you open this window manually?");return}O.L2?.addAction("postMessageToPresenterView",{type:e.type}),window.opener.postMessage(e,"*")}({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):l?.setActiveSlidesEmbeddedPrototype(e)},[l,t]);return(0,a.jsx)(V,{...e,isActive:s,setActive:o})}function V({configData:e,nodeId:t,setConfigData:l,isViewer:i,isActive:s,setActive:r,disablePointerEvents:o,invalidateThumbnail:d}){let p=(0,_.h)(),c=J(e),m=n.useCallback(e=>{if((0,f.kc)().slides_embed_prototype_deep_observation){for(let l of e)if(u.dI(l.nodeId)===t){let e=z(t);if(e&&!p?.isPresenterSession()){e.contentWindow?.postMessage({type:"SET_OBSERVING_SESSION_ID",data:{sessionId:null!=l.sessionId?l.sessionId:-1}},"*");break}}}},[t,p]);(0,x.O5)(p,"embeddedPrototypeDataChange",m);let g=n.useCallback(e=>{let l=z(t);l?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,n.useEffect)(()=>{e.activeStartingPointNodeId&&g(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,g]),(0,n.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==S.xu+t||!p||"EMBEDDED_PROTOTYPE_SESSION_ID"!==e.data.type||p.setEmbeddedPrototypeSession(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[p,t,l,i]),(0,a.jsx)(M,{deviceFrame:c,invalidateThumbnail:d,children:(0,a.jsxs)("div",{className:v.s.hFull.wFull.$,style:{pointerEvents:o?"none":"auto"},children:[s&&e.url?(0,a.jsx)($,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!s&&r?(0,a.jsx)(B,{nodeId:t,onClick:()=>r(t)}):null]})})}let B=n.memo(({nodeId:e,onClick:t})=>{let[l,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{let t=!0,l=null;return(async()=>{try{let a=(0,c.UN)().get(e);if(!a||!a.fills||0===a.fills.length)return;let n=a.fills.find(e=>"IMAGE"===e.type&&e.image?.hash);if(!n||!n.image?.hash)return;let s=await (0,P.I)(n);if(!s||!t)return;let r=new Blob([s],{type:"image/png"});l=URL.createObjectURL(r),t&&i(l)}catch(e){console.error("Failed to load thumbnail for embed overlay:",e)}})(),()=>{t=!1,l&&URL.revokeObjectURL(l)}},[e]);let o=(0,f.kc)().slides_iframe_embedded_prototypes_thumbnail?"embed--inactiveOverlayBackdrop--pJQ0o":"embed--inactiveOverlayBackdrop__OLD--4WhyX",d=l&&(0,f.kc)().slides_iframe_embedded_prototypes_thumbnail?{backgroundImage:`url(${l})`}:{};return(0,a.jsx)(s.E,{className:h()(o,v.s.cursorPointer.$),style:d,onClick:t,"aria-label":(0,m.t)("slides.flapp.embed.activate_prototype"),children:(0,a.jsx)(r,{className:"embed--playIcon--zgff2","aria-hidden":!0})})});function M({deviceFrame:e,children:t,invalidateThumbnail:l}){let n=e?.rotation===d.xOL.CCW_90?{x:e?.size.y??K.size.y,y:e?.size.x??K.size.x}:{x:e?.size.x??K.size.x,y:e?.size.y??K.size.y};return(0,a.jsx)("div",{className:"embed--container--uRzmt",children:(0,a.jsx)(C._,{initialViewerSize:n,isDeviceFrameShown:null!=e&&e.type===d.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:l,children:t})})}function $({baseUrl:e,nodeId:t,activeStartingNodeId:l}){let[i,s]=(0,n.useState)(l),r=function(e,t,l){if(!e)return null;let a=(0,D.A)(e);if(!a)return null;let n=a.searchParams;return(0,F.e)(n,"bare-ui","1"),(0,F.e)(n,"scaling","fit-width"),(0,F.e)(n,"content-scaling","fixed"),(0,F.e)(n,"needsAlpha","1"),(0,F.e)(n,"inline-viewer","1"),(0,F.e)(n,"disable-default-keyboard-nav","1"),t&&(0,F.e)(n,"fuid",t),l&&(0,F.e)(n,"starting-point-node-id",l),a}(e,(0,I.TA)(),i),[o,d]=(0,n.useState)(!1);return r?(0,a.jsx)("div",{className:h()(A,{[R]:o}),children:(0,a.jsx)("iframe",{id:`${S.xu}${t}`,className:h()(A,{[R]:o}),onLoad:()=>{d(!0)},loading:"eager",src:r.toString(),title:(0,m.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation",referrerPolicy:"same-origin"})}):null}function z(e){return document.getElementById(S.xu+e)}let W=e=>{switch(e){case"NONE":default:return d.xOL.NONE;case"CCW_90":return d.xOL.CCW_90}};function H(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function J(e){return H(e)?function(e){let t=E.hY[e.deviceFramePreset??""];return t?{type:d.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:W(e.deviceFrameRotation)}:null}(e):null}let Y=j.eo[0],K={type:d.XQq.PRESET,size:Y?.framePresetSize??{x:0,y:0},presetIdentifier:Y?.presetIdentifier??"",rotation:d.xOL.NONE}},861482:(e,t,l)=>{l.d(t,{e:()=>a});function a(e,t,l){""!==l&&(e.delete(t),"starting-point-node-id"===t&&(e.delete("node-id"),e.append("node-id",l)),e.append(t,l))}},420658:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(19047),n=l(453214);function i(e){let t;try{t=new URL(e)}catch(t){return(0,a.x1)("embeddable_prototype_url_validation","Failed to parse embeddable prototype URL",{url:e,error:t},{reportAsSentryError:!0}),null}return"https:"!==t.protocol?((0,a.x1)("embeddable_prototype_url_validation","Embeddable prototype URL must use HTTPS protocol",{url:e,protocol:t.protocol},{reportAsSentryError:!0}),null):("figma.com"===t.hostname||t.hostname.endsWith(".figma.com"))&&(0,n.F4)(t.hostname)?t:((0,a.x1)("embeddable_prototype_url_validation","Embeddable prototype URL must be from figma.com domain",{url:e,hostname:t.hostname},{reportAsSentryError:!0}),null)}},623240:(e,t,l)=>{l.d(t,{Z:()=>e7,v:()=>e9});var a=l(239976),n=l(105652),i=l(466082),s=l(499735),r=l(456556);let o=(0,n.createContext)(null);function d(){let e=(0,n.useContext)(o);if(!e)throw Error("useFlappConfigContext must be used within a FlappConfigProvider");return e}let p=(0,n.createContext)(null);function u(){let e=(0,n.useContext)(p);if(!e)throw Error("useFlappParticipantData must be used within a FlappParticipantDataProvider");return e}function c(e){return function({nodeId:t,isReadOnly:l,invalidateThumbnail:s}){let d=(0,n.useCallback)((e,l)=>{let a=(0,i.UN)().get(t);a&&a.setInteractiveSlideConfigData(e,l)},[t]),u=(0,n.useCallback)(e=>{let l=(0,i.UN)().get(t);l&&l.deleteInteractiveSlideConfigData(e)},[t]),c=(0,n.useCallback)((e,l)=>{let a=(0,i.UN)().get(t);a&&a.setInteractiveSlideParticipantData(e,l)},[t]),m=(0,n.useCallback)(()=>{let e=(0,i.UN)().get(t);e&&e.resetInteractiveSlideParticipantData()},[t]),f=(0,r.Fk)((e,t)=>{let l=e.get(t);return l?l.interactiveSlideConfigData:null},t),g=(0,r.Fk)((e,t)=>{let l=e.get(t);return l?l.interactiveSlideParticipantData:null},t);return f&&g?(0,a.jsx)(o.Provider,{value:{configData:f,isViewer:!1,isPresenter:!1,nodeId:t,isReadOnly:l,invalidateThumbnail:s,setConfigData:d,deleteConfigData:u},children:(0,a.jsx)(p.Provider,{value:{participantData:g,setParticipantData:c,resetParticipantData:m},children:(0,a.jsx)(e,{configData:f,deleteConfigData:u,invalidateThumbnail:s,isPresenter:!1,isReadOnly:l,isViewer:!1,nodeId:t,participantData:g,recordingKey:`flapp.${t}`,resetParticipantData:m,setConfigData:d,setParticipantData:c})})}):null}}function m(e){return function({viewer:t,nodeId:l}){let i=(0,r.x3)((e,t)=>{let l=e.getPrototypeNode(t);return l?e.nodeInteractiveSlideConfigData(l):null},l),s=(0,r.x3)((e,t)=>{let l=e.getPrototypeNode(t);return l?e.nodeInteractiveSlideParticipantData(l):null},l),d=(0,n.useCallback)((e,a)=>{t.setInteractiveSlideConfigData(l,e,a)},[t,l]),u=(0,n.useCallback)((e,a)=>{t.setInteractiveSlideParticipantData(l,e,a)},[t,l]);if(!i||!s)return null;let c=t.isPresenterSession();return(0,a.jsx)(o.Provider,{value:{configData:i,isViewer:!0,isPresenter:c,nodeId:l,isReadOnly:!1,invalidateThumbnail:void 0,setConfigData:d,deleteConfigData:void 0},children:(0,a.jsx)(p.Provider,{value:{participantData:s,setParticipantData:u,resetParticipantData:void 0},children:(0,a.jsx)(e,{configData:i,participantData:s,setConfigData:d,setParticipantData:u,recordingKey:`flapp.${l}`,isViewer:!0,isPresenter:c,nodeId:l,viewer:t})})})}}function f(e,t){return(t?s.Pt("flapp",e,t):s.Pt("flapp",e))||`flapp.${e}`}var g=l(686788),h=l(44149),x=l(943360),_=l(191433),v=l(340383),b=l(454705),y=l(798913),E=l(379141),j=l(270450),N=l(224542),I=l.n(N),w=l(75962),P=l(259714),S=l(154963),C=l(324880),T=l(66366),O=l(605985),k=l(236410),F=l(850882),D=l(897697),A=l(644857),R=l(190661);let U="alignment_scale--prompt--NF4QR text--fontPos20--WslT3 text--_fontBase--VaHfk";var L=l(212233);let V=(0,n.forwardRef)(({nodeId:e,recordingKey:t,prompt:l,setPrompt:n},i)=>{let s=e=>{n(e.clipboardData.getData("text"))};return(0,a.jsx)(g.Y.Root,{className:"alignment_scale--promptContainer--7h9nB",children:(0,a.jsx)(g.Y,{ref:i,id:f(e,"questionInput"),className:I()(U,C.Qx,C.Uu),placeholder:(0,E.t)("slides.flapp.alignment.prompt_placeholder"),value:l,onChange:n,htmlAttributes:{onPaste:e=>s(e)},recordingKey:t})})});function B({prompt:e}){return(0,a.jsx)("p",{className:U,children:e||(0,E.t)("slides.flapp.alignment.prompt_placeholder")})}function M(e){let t=Math.round(4*e)/4;return 0===t?(0,E.t)("slides.flapp.alignment.strongly_disagree_label"):.25===t?(0,E.t)("slides.flapp.alignment.slightly_disagree_label"):.5===t?(0,E.t)("slides.flapp.alignment.neutral_label"):.75===t?(0,E.t)("slides.flapp.alignment.slightly_agree_label"):(0,E.t)("slides.flapp.alignment.strongly_agree_label")}function $({promptElement:e,onVoteRequest:t}){var l;let{configData:i,setConfigData:s,nodeId:r}=d(),{participantData:o}=u(),p=(0,O.iZ)(),c=t&&p?(e,l)=>{t({name:p.name,userId:p.id,thumbnailUrl:p.img_url,alignmentXOffsetPercentage:e,alignmentYOffsetPercentage:l,timestamp:Date.now()})}:void 0,[m,g]=(l=p?.id,(0,n.useMemo)(()=>{let e;return o?[Object.values(o).reduce((t,a)=>{try{let n=JSON.parse(a);n.userId===l&&(e=n),t.push(n)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),e]:[[],void 0]},[o,l])),h="true"===i.resultsShown,x=y.nc.user("slides-toggle-alignment-scale-results-shown",()=>{s("resultsShown",(!h).toString())}),_=(0,R.aF)(i);return(0,a.jsx)(b.J,{mode:_.preferredTokenTheme,children:(0,a.jsxs)("div",{className:I()(S.s.wFull.flex.flexColumn.justifyCenter.itemsCenter.$,"alignment_scale--alignmentScaleThemeWrapper--7z9RU"),"data-transparency-mode":_.transparentMode,children:[(0,a.jsxs)("div",{className:"alignment_scale--mainContainer--LUDgt",children:[(0,a.jsx)(W,{prompt:e,allVoteData:m,currentUserVoteData:g}),(0,a.jsx)(H,{resultsShown:h,alignmentVoteData:m,currentUserVoteData:g,onScaleClick:c}),(0,a.jsx)(J,{})]}),(0,a.jsx)(q,{recordingKey:f(r,"slides-alignment-scale-reveal-results"),resultsShown:h,onToggle:x})]})})}function z({onVoteRequest:e,currentUserVoteData:t}){let[l,i]=n.useState(t?.alignmentXOffsetPercentage??.5);return(n.useEffect(()=>{t?.alignmentXOffsetPercentage!==void 0&&i(t.alignmentXOffsetPercentage)},[t?.alignmentXOffsetPercentage]),e)?(0,a.jsx)("div",{className:"alignment_scale--sliderOverlayContainer--E3fi5",children:(0,a.jsx)(h.bL,{"aria-label":(0,E.t)("slides.flapp.alignment.vote_slider_label"),bigStep:.25,defaultValue:.5,hints:[0,.25,.5,.75,1],max:1,min:0,onChange:(t,{commit:l})=>{i(t),e(t,.5)},step:.01,value:l,valueText:`${Math.round(100*l)}%`,children:(0,a.jsx)(h.zi,{})})}):null}function W({prompt:e,allVoteData:t,currentUserVoteData:l}){return(0,a.jsxs)("div",{className:"alignment_scale--headerContainer--pF-fr",children:[e,(0,a.jsx)(Y,{allVoteData:t,currentUserVoteData:l})]})}function H({resultsShown:e,alignmentVoteData:t,currentUserVoteData:l,onScaleClick:i}){let s=(0,n.useRef)(null),r=i?e=>{let t=e.currentTarget.getBoundingClientRect(),l=e.clientX-t.left,a=e.clientY-t.top;i(l/t.width,a/t.height)}:void 0;return(0,a.jsxs)("div",{className:"alignment_scale--scaleContainerPseudoBorder--PAYrp",children:[(0,a.jsx)("div",{className:"alignment_scale--scaleContainerSolidBackground--rYcGw"}),(0,j.kc)().slides_editor_a11y_2&&(0,a.jsx)(z,{onVoteRequest:i,currentUserVoteData:l}),(0,a.jsxs)(x.E,{"aria-label":(0,E.t)("slides.flapp.alignment.prompt_placeholder"),className:I()("alignment_scale--scaleContainer--wJCNy",i?S.s.cursorPointer.$:""),ref:s,onClick:r,htmlAttributes:{tabIndex:(0,j.kc)().slides_editor_a11y_2?-1:void 0},children:[(0,a.jsx)("div",{className:"alignment_scale--scaleLine--jGheY"}),(0,a.jsxs)("div",{className:"alignment_scale--scaleMarkerContainer--rHJ-L",children:[(0,a.jsx)("div",{className:"alignment_scale--scaleMarker0--NMfR0 alignment_scale--_scaleMarker--x9lJF"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker25--1jDwA alignment_scale--_scaleMarker--x9lJF"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker50--cQL6C alignment_scale--_scaleMarker--x9lJF"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker75--oqs-j alignment_scale--_scaleMarker--x9lJF"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker100--dyFV3 alignment_scale--_scaleMarker--x9lJF"})]}),e&&s.current?t.map(e=>(0,a.jsx)(w.oW,{"aria-label":(0,E.t)("slides.flapp.alignment.vote_label",{name:e.name,label:M(e.alignmentXOffsetPercentage)}),src:(0,T.p)(e.thumbnailUrl),alt:(0,E.t)("slides.flapp.alignment.vote_label",{name:e.name,label:M(e.alignmentXOffsetPercentage)}),className:"alignment_scale--alignmentScaleVote--MLdhK",style:{left:`${Math.floor(100*e.alignmentXOffsetPercentage)}%`,top:`${Math.floor(100*e.alignmentYOffsetPercentage)}%`,transform:"translate(-15px, -15px)"},tabIndex:(0,j.kc)().slides_editor_a11y_2?0:void 0},e.userId)):null]})]})}function J(){return(0,a.jsxs)("div",{className:"alignment_scale--scaleLabelContainer--aPIG6",children:[(0,a.jsx)("div",{className:"alignment_scale--stronglyDisagreeLabel--HKlRy alignment_scale--_labelBase--f0eeY text--fontPos14--QJNQC text--_fontBase--VaHfk",children:(0,E.tx)("slides.flapp.alignment.strongly_disagree_label")}),(0,a.jsx)("div",{className:"alignment_scale--neutralLabel--qO6QF alignment_scale--_labelBase--f0eeY text--fontPos14--QJNQC text--_fontBase--VaHfk",children:(0,E.tx)("slides.flapp.alignment.neutral_label")}),(0,a.jsx)("div",{className:"alignment_scale--stronglyAgreeLabel--2-5Rn alignment_scale--_labelBase--f0eeY text--fontPos14--QJNQC text--_fontBase--VaHfk",children:(0,E.tx)("slides.flapp.alignment.strongly_agree_label")})]})}function Y({allVoteData:e,currentUserVoteData:t}){let l,n=e;return t&&(n=[t,...e.filter(e=>e.userId!==t.userId)]),l=0===n.length?(0,E.t)("slides.flapp.results.no_votes_yet"):1===n.length?t?(0,E.t)("slides.flapp.results.single_self_vote"):(0,E.t)("slides.flapp.results.single_other_vote",{person:n[0].name}):t?(0,E.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:n.length-1}):(0,E.t)("slides.flapp.results.multiple_other_votes",{totalVotes:n.length}),(0,a.jsxs)("div",{className:"alignment_scale--voteDisplayContainer--exuzT text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,a.jsx)("p",{className:"alignment_scale--description--J0GyK",children:l}),(0,a.jsx)(K,{allVoteData:n,maxToShow:2})]})}function K({allVoteData:e,maxToShow:t}){let l=e.length;e.length>t+1&&(l=t);let n=e.slice(0,l),i=e.slice(l),s=i.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsxs)("div",{className:"alignment_scale--voteProfilesContainer----JGW",children:[n.map(e=>(0,a.jsx)("img",{className:"alignment_scale--voteProfile--HNV5J",alt:e.name,src:(0,T.p)(e.thumbnailUrl),"data-tooltip-type":k.Ib.TEXT,"data-tooltip":e.name},e.userId)),i.length>0?(0,a.jsx)("div",{className:"alignment_scale--overflowVote--VljJt text--fontPos11--rO47d text--_fontBase--VaHfk","data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":F.c,"data-tooltip-overflow-user-data":JSON.stringify(s),children:`+${i.length}`}):null]})}function q({recordingKey:e,resultsShown:t,onToggle:l}){return(0,a.jsxs)("div",{className:"alignment_scale--resultToggleContainer--KutJV",children:[(0,a.jsx)(P.B,{className:"alignment_scale--resultToggleContainerSvg--LhYlo",svg:L.A}),(0,a.jsxs)(x.E,{className:"alignment_scale--resultToggle--wUvdg text--fontPos13--5OfL8 text--_fontBase--VaHfk",onClick:l,recordingKey:e,children:[t?(0,a.jsx)(_.l,{}):(0,a.jsx)(v.f,{}),(0,a.jsx)("p",{children:t?(0,E.t)("slides.flapp.results.results_shown"):(0,E.t)("slides.flapp.results.results_hidden")})]})]})}let G={EditorFlapp:c(function(){let{configData:e,setConfigData:t,nodeId:l}=d(),n=(0,D.US)(A.R8,{nodeId:l}),i=(0,a.jsx)(V,{ref:n,nodeId:l,recordingKey:f(l,"slides-alignment-scale-prompt-input"),prompt:e.prompt,setPrompt:e=>{y.l7.user("slides-update-alignment-scale-prompt",()=>{t("prompt",e)})}});return(0,a.jsx)($,{promptElement:i})}),ViewerFlapp:m(function(){let{configData:e}=d(),{setParticipantData:t}=u();return(0,a.jsx)($,{promptElement:(0,a.jsx)(B,{prompt:e.prompt}),onVoteRequest:e=>{y.l7.user("slides-update-alignment-scale-vote",()=>{t(e.userId,JSON.stringify(e))})}})})};var Q=l(270315),X=l(141288),Z=l(29161),ee=l(653120);function et({configData:e,nodeId:t}){let l=(0,ee.h)(),n=(0,Q.gD)(e);return(0,a.jsx)(Q.wL,{deviceFrame:n,children:(0,a.jsx)(Q.lu,{nodeId:t,onClick:()=>{e.url&&l&&X.Ay.redirect(e.url,Z.uG?void 0:"_blank")}})})}let el={EditorFlapp:c(Q.DR),ViewerFlapp:m(Q.E$)},ea={EditorFlapp:c(et),ViewerFlapp:m(et)},en="facepile--facepileStamp--HGZBO facepile--_fixedStampBase---Yjq5 facepile--_stampBase--bUrHA";var ei=l(953529);let es=(0,n.forwardRef)(({prompt:e,setPrompt:t},l)=>{let{nodeId:n}=d();return(0,a.jsx)(g.Y,{ref:l,"aria-label":(0,E.t)("slides.flapp.facepile.input_label"),className:I()(C.Qx,C.Uu),htmlAttributes:{onPaste:e=>{t(e.clipboardData.getData("text"))}},id:f(n,"facepile-prompt-input"),onChange:e=>{t(e)},placeholder:(0,E.t)("slides.flapp.facepile.prompt_placeholder"),recordingKey:f(n,"facepile-prompt-input"),type:"text",value:e})});function er({prompt:e}){return(0,a.jsx)("h1",{children:e||(0,E.t)("slides.flapp.facepile.prompt_placeholder")})}function eo({promptElement:e,onToggleStampRequest:t}){let{configData:l,isViewer:n}=d(),{participantData:i}=u(),s=(0,O.iZ)(),r=function(e,t){if(!e||0===Object.keys(e).length)return{stamps:[],currentUserStamped:!1};let l=!1;return{stamps:Object.values(e).reduce((e,a)=>{try{let n=JSON.parse(a);n.userId===t&&(l=!0),e.push(n)}catch(e){}return e},[]).sort((e,l)=>e.userId===t?-1:l.userId===t?1:e.timestamp-l.timestamp),currentUserStamped:l}}(i,s?.id),o=function(e,t){let{stamps:l,currentUserStamped:a}=e;return 0===l.length?t?(0,E.t)("slides.flapp.facepile.description_click_to_stamp"):(0,E.t)("slides.flapp.results.no_stamps_yet"):1===l.length?a?(0,E.t)("slides.flapp.results.single_self_stamp"):(0,E.t)("slides.flapp.results.single_other_stamp",{person:l[0].name}):a?(0,E.t)("slides.flapp.results.multiple_stamps_including_user",{totalStamps:l.length-1}):(0,E.t)("slides.flapp.results.multiple_other_stamps",{totalStamps:l.length})}(r,n),p=(0,R.aF)(l);return(0,a.jsx)(b.J,{mode:p.preferredTokenTheme,children:(0,a.jsxs)("div",{className:I()("facepile--container--M1yq-","facepile--facepileThemeWrapper--C79XT"),"data-transparent-mode":p.transparentMode,children:[(0,a.jsx)("div",{className:"facepile--prompt--Bb2X- text--fontPos24--VFCur text--_fontBase--VaHfk",children:e}),(0,a.jsx)(ed,{isStampingEnabled:n,stampsWithMetadata:r,maxStampsToShow:3,currentUser:s,onToggleStampRequest:t}),(0,a.jsx)("p",{className:"facepile--description--OmAuP text--fontPos20--WslT3 text--_fontBase--VaHfk",children:o})]})})}function ed({isStampingEnabled:e,stampsWithMetadata:t,maxStampsToShow:l,currentUser:n,onToggleStampRequest:i}){let{stamps:s,currentUserStamped:r}=t,o=s.length;s.length>l+1&&(o=l);let d=s.slice(0,o),p=s.slice(o),u=e&&n&&!r;return(0,a.jsxs)("div",{className:S.s.flex.gap12.pt36.pb24.itemsCenter.alignCenter.$,children:[d.map(e=>{let t=!!(i&&n&&e.userId===n.id),l={text:e.name,subtext:t?(0,E.t)("slides.flapp.facepile.tooltip.click_to_remove"):void 0};return(0,a.jsx)(ep,{stamp:e,tooltipToShow:l,isOwnToggleableStamp:t,onClick:()=>{t&&i(n.id,void 0)}},`${e.userId}-stamp`)}),p.length>0?(0,a.jsx)(eu,{overflowStamps:p}):null,(0,a.jsx)(ec,{previewStamp:u?em(n):void 0,onClick:()=>{u&&i&&i(n.id,em(n))},disabled:!u})]})}function ep({stamp:e,isOwnToggleableStamp:t,tooltipToShow:l,onClick:n}){let i=l?.subtext?(0,E.t)("slides.flapp.facepile.stamp_with_action",{name:e.name,action:l.subtext}):(0,E.t)("slides.flapp.facepile.stamp_by_user",{name:e.name}),s={"data-tooltip-type":k.Ib.TEXT,"data-tooltip":l?.text,"data-tooltip-subtext":l?.subtext,"data-tooltip-offset-y":8},r=(0,a.jsx)(w.oW,{className:en,src:(0,T.p)(e.thumbnailUrl),alt:e.name,draggable:!1});return t?(0,a.jsx)(x.E,{className:"facepile--stampButton--axICj",onClick:n,"aria-label":i,htmlAttributes:s,children:r}):(0,a.jsx)("div",{role:"img","aria-label":i,...s,children:r})}function eu({overflowStamps:e}){let t=e.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:"facepile--overflowStamp--tjYDZ text--fontPos22--csuEx text--_fontBase--VaHfk facepile--_stampBase--bUrHA","data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":F.c,"data-tooltip-overflow-user-data":JSON.stringify(t),"data-tooltip-offset-y":8,children:(0,a.jsx)("p",{children:`+${e.length}`})})}function ec({previewStamp:e,onClick:t,disabled:l}){return(0,a.jsxs)(x.E,{className:I()("facepile--emptyStampContainer--ChH3- facepile--_fixedStampBase---Yjq5 facepile--_stampBase--bUrHA",e?"facepile--displayPreviewOnHover--TRpBj":""),onClick:t,"aria-label":(0,E.t)("slides.flapp.facepile.add_stamp_button"),disabled:l,children:[(0,a.jsx)(P.B,{className:"facepile--emptyStamp--9IhVM",svg:ei.A}),e?(0,a.jsx)("div",{className:"facepile--previewStamp--mVYI-",children:(0,a.jsx)(w.oW,{className:en,src:(0,T.p)(e.thumbnailUrl),alt:e.name,draggable:!1})}):null]})}function em(e){return{name:e.name,userId:e.id,thumbnailUrl:e.img_url,timestamp:Date.now()}}let ef={EditorFlapp:c(function(){let{configData:e,setConfigData:t,nodeId:l}=d(),n=(0,D.US)(A.R8,{nodeId:l}),i=(0,a.jsx)(es,{ref:n,prompt:e.prompt,setPrompt:e=>{y.l7.user("slides-update-facepile-question",()=>{t("prompt",e)})}});return(0,a.jsx)(eo,{promptElement:i})}),ViewerFlapp:m(function(){let{configData:e}=d(),{setParticipantData:t}=u();return(0,a.jsx)(eo,{promptElement:(0,a.jsx)(er,{prompt:e.prompt}),onToggleStampRequest:(e,l)=>{y.l7.user("slides-add-user-facepile-stamp",()=>{t(e,JSON.stringify(l))})}})})};var eg=l(942356),eh=l(3831),ex=l(300284),e_=l(929646),ev=l(563020),eb=l(20002),ey=l(919530),eE=l(255398),ej=l(371971);let eN="slides-update-poll-question",eI="slides-update-poll-option",ew="slides-update-poll-options",eP="poll--questionContainer--kekou",eS="poll--question--svy5s text--fontPos30--WRviK text--_fontBase--VaHfk",eC="poll--optionContainer--Gg-Ro",eT="poll--newOption--Sl7kv",eO="poll--optionInner--ivrQn",ek="poll--optionFill--qbp6C",eF="poll--winning--CarIC",eD="poll--optionContent--HQIdW text--fontPos20--WslT3 text--_fontBase--VaHfk",eA="poll--optionContentText--cFoIp",eR="poll--optionMetadata--FMNpC";function eU({option:e,votes:t,isWinningVote:l,isUserVote:n,percentage:i,resultsShown:s,recordingKey:r,optionIndex:o}){let{setParticipantData:d}=u(),p=(0,eb.wA)(),c=(0,O.iZ)(),m=y.nc.system("slides-update-poll-votes",e=>{if(!c){p(ej.s.error((0,E.t)("slides.flapp.poll.vote_failure")));return}let t={userId:c.id,name:c.name,thumbnailUrl:c.img_url,timestamp:Date.now(),selectedOption:e};d(t.userId,JSON.stringify(t))}),f=t.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:eC,children:(0,a.jsxs)(x.E,{className:I()(eO,"poll--hoverable--WzALA"),recordingKey:r,onClick:()=>{m(o)},"aria-label":(0,E.t)("slides.flapp.poll.vote_for_option",{option:e}),"aria-pressed":n,htmlAttributes:{"data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":s&&f.length>0?F.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(f),"data-tooltip-offset-y":8},children:[s&&(0,a.jsx)("div",{className:I()(ek,l?eF:""),style:{width:`${i}%`}}),(0,a.jsxs)("div",{className:eD,children:[(0,a.jsx)("div",{className:eA,children:e}),(0,a.jsxs)("div",{className:eR,children:[n&&(0,a.jsx)(ey.g,{}),s&&(0,a.jsx)("span",{children:`${i}%`})]})]})]})})}function eL({option:e,votes:t,isWinningVote:l,isUserVote:n,percentage:i,resultsShown:s,recordingKey:r,optionIndex:o,inputRef:p,setPollUpdated:u}){let{configData:c,setConfigData:m,deleteConfigData:f}=d(),h=eB(c),x=e=>`option${e}`,_=y.nc.user(eI,e=>{m(x(o),e)}),v=y.nc.user(eI,e=>{m(x(o),e.clipboardData.getData("text"))}),b=y.nc.user(ew,e=>{o===h.length-1&&("Enter"===e.key&&h.length<6?(m(x(o+1),""),u(!0)):h.length>2&&0===h[o].length&&("Backspace"===e.key||"Delete"===e.key)&&(f&&(f(x(o)),e.preventDefault()),u(!0)))}),j=t.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:eC,children:(0,a.jsxs)("div",{className:eO,"data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":s&&j.length>0?F.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(j),"data-tooltip-offset-y":8,children:[s&&(0,a.jsx)("div",{className:I()(ek,l?eF:""),style:{width:`${i}%`}}),(0,a.jsxs)("div",{className:eD,children:[(0,a.jsx)(g.Y,{id:r,className:I()(eA,C.Qx,C.Uu),value:e,placeholder:(0,E.t)("slides.flapp.poll.option_placeholder"),onChange:_,htmlAttributes:{onPaste:v,onKeyDownCapture:b},ref:p,recordingKey:r}),(0,a.jsxs)("div",{className:eR,children:[n&&(0,a.jsx)(ey.g,{}),s&&(0,a.jsx)("span",{children:`${i}%`})]})]})]})})}function eV({recordingKey:e,onClick:t}){let{isViewer:l}=d();return l||!t?(0,a.jsx)("div",{"aria-hidden":"true",className:I()(eC,eT,"poll--newOptionInvisible--lmAtZ")}):(0,a.jsx)("div",{className:eC,children:(0,a.jsx)(x.E,{className:eT,onClick:t,recordingKey:s.Pt(e,"addOption"),"aria-label":(0,E.t)("slides.flapp.poll.add_option"),children:(0,a.jsx)(eE.$,{})})})}function eB(e){let t=[];for(let l=0;l<6;l++){let a=e[`option${l}`];void 0!==a&&t.push(a)}return t}function eM({resultsShown:e,setResultsShown:t}){let l=(0,j.kc)().slides_editor_a11y_2?(0,E.t)("slides.flapp.results.reveal_results"):e?(0,E.t)("slides.flapp.results.results_shown"):(0,E.t)("slides.flapp.results.results_hidden");return(0,j.kc)().slides_editor_a11y_2?(0,a.jsxs)(x.E,{className:I()("poll_toggle_button--button--i9yt-",{"poll_toggle_button--toggled--KGln3":e}),onClick:()=>t(!e),recordingKey:"resultsButton","aria-pressed":e,"aria-label":l,htmlAttributes:{"data-tooltip":l,"data-tooltip-type":k.Ib.TEXT},children:[e?(0,a.jsx)(eh.T,{}):(0,a.jsx)(ex.A,{})," ",l]}):(0,a.jsx)(eg.WW,{htmlAttributes:{"data-tooltip":l,"data-tooltip-type":k.Ib.TEXT},onClick:()=>t(!e),recordingKey:"resultsButton",variant:"secondary",iconPrefix:e?(0,a.jsx)(eh.T,{}):(0,a.jsx)(ex.A,{}),children:l})}function e$({totalVotes:e,hasUserVote:t,firstVoteByTimestamp:l}){let n;return n=0===e?(0,E.t)("slides.flapp.results.no_votes_yet"):1===e?t?(0,E.t)("slides.flapp.results.single_self_vote"):l?(0,E.t)("slides.flapp.results.single_other_vote",{person:l.name}):(0,E.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}):t?(0,E.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:e-1}):(0,E.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}),(0,a.jsx)("p",{children:n})}function ez({preferredTheme:e,transparencyMode:t}){let{configData:l,isViewer:s,nodeId:r,setConfigData:o}=d(),p=(0,D.US)(A.R8,{nodeId:r}),{participantData:c}=u(),m=(0,O.iZ)(),g=eB(l),h="true"===l.resultsShown,[x,_]=n.useState(!1),v=n.useMemo(()=>[],[]);(0,n.useEffect)(()=>{if(x&&v.length>0){let e=v.slice(-1)[0];e&&e.current&&e.current.focus()}},[g.length,v,x]);let E=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(s)return;let e=E.current,t=new ResizeObserver(e=>{let t=(0,i.UN)().get(r);if(t)for(let l of e)y.l7.system("slides-poll-auto-resize",()=>{let e=getComputedStyle(l.target),a=parseFloat(e.paddingTop),n=a+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),i=l.contentRect.height+n;t&&i>t.size.y&&(t.size={x:t.size.x,y:i})})});return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[r,s]);let N=(0,ev.s)(r);(0,n.useEffect)(()=>{N&&(0,j.kc)().slides_editor_a11y_2&&e_.Lj.announcePollInteractiveControlsAvailable()},[N]);let w=e=>`option${e}`,P=y.nc.user("slides-update-poll-results-visibility",e=>{o("resultsShown",e?"true":"false")}),{groupedVotes:S,totalVotes:C,votePercentages:T,winningVoteIndices:k,userVoteIndex:F,firstVoteByTimestamp:R}=function(e,t,l){let a;let n=eB(t),i=-1,s=Object.values(l).reduce((t,l)=>{try{let n=JSON.parse(l);n.userId===e&&(i=n.selectedOption),a=a&&a.timestamp>n.timestamp||!a?n:a,t.push(n)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),r=0,o=n.map((e,t)=>{let l=s.filter(e=>e.selectedOption===t);return r=l.length>r?l.length:r,l}),d=s.length,p=n.map((e,t)=>Math.round(100*(o[t].length/d||0))),u=o.reduce((e,t,l)=>t.length===r&&0!==t.length?[...e,l]:e,[]);return{groupedVotes:o,votePercentages:p,totalVotes:d,winningVoteIndices:u,userVoteIndex:i,firstVoteByTimestamp:a}}(m?.id,l,c);return(0,a.jsx)(b.J,{mode:e,children:(0,a.jsxs)("div",{className:I()("poll--pollThemeWrapper--BW1xG","poll--container--s7H86"),"data-transparency-mode":t,ref:E,children:[(0,a.jsx)(eW,{ref:p}),g.map((e,t)=>{let l=n.createRef();v.push(l);let i=-1!==k.indexOf(t);return s?(0,a.jsx)(eU,{option:e,votes:S[t]??[],isWinningVote:i,isUserVote:t===F,percentage:T[t]??0,resultsShown:h,recordingKey:f(r,`option${t}`),optionIndex:t},t):(0,a.jsx)(eL,{inputRef:l,isUserVote:t===F,isWinningVote:i,option:e,optionIndex:t,percentage:T[t]??0,recordingKey:f(r,`optionInput${t}`),resultsShown:h,setPollUpdated:_,votes:S[t]??[]},t)}),(0,a.jsx)(eV,{onClick:g.length>=6?void 0:y.nc.user(ew,()=>{o(w(g.length),""),_(!0)}),recordingKey:f(r)}),(0,a.jsxs)("div",{className:"poll--resultContainer--ivblE text--fontPos20--WslT3 text--_fontBase--VaHfk",children:[(0,a.jsx)(e$,{totalVotes:C,hasUserVote:F>=0,firstVoteByTimestamp:R}),(0,a.jsx)(eM,{resultsShown:h,setResultsShown:e=>P(e)})]})]})})}let eW=(0,n.forwardRef)((e,t)=>{let{configData:l,isViewer:n,setConfigData:i,nodeId:s}=d(),r=l.question||"",o=y.nc.user(eN,e=>{i("question",e)}),p=y.nc.user(eN,e=>{i("question",e.clipboardData.getData("text"))});return n?(0,a.jsx)("div",{className:eP,children:(0,a.jsx)("h1",{className:eS,children:r})}):(0,a.jsx)(g.Y.Root,{className:eP,children:(0,a.jsx)(g.Y,{ref:t,id:f(s,"questionInput"),className:I()(eS,C.Qx,C.Uu),value:r,placeholder:(0,E.t)("slides.flapp.poll.question_placeholder"),onChange:o,htmlAttributes:{onPaste:e=>p(e)},recordingKey:f(s,"questionInput")})})});function eH(){let{configData:e}=d(),t=(0,R.aF)(e);return(0,a.jsx)(ez,{preferredTheme:t.preferredTokenTheme,transparencyMode:t.transparentMode})}let eJ={EditorFlapp:c(eH),ViewerFlapp:m(eH)};var eY=l(295870),eK=l(675707),eq=l(19047),eG=l(971340),eQ=l(198639),eX=l(419312),eZ=l(710253);async function e0(e){if(!e)return;let t=(0,eK.KJ)(e.trim());if(t)try{let l=(await eZ.E.getLinkMetadata({text:t.isFromIFrame?e:t.url,useEmbedsAllowList:"true",useLinkPreviewsV2:"true"})).data.meta;if(!l||"embed"!==l.type)return;return{srcUrl:l.srcUrl.replace("&autoplay=1","").replace("&auto_play=1","")+"&enablejsapi=1",url:decodeURIComponent(l.url||""),height:800*(l.height||450)/(l.width||800),width:800,title:decodeURIComponent(l.title||"YouTube"),thumbnailImage:l.thumbnailImage,thumbnailUrl:l.thumbnailUrl}}catch(e){(0,eq.x1)(eY.e.SLIDES,"Failed to get youtube embed",e)}}function e1({disablePointerEvents:e,onIframeLoad:t}){let{configData:l}=d();return(0,a.jsxs)("div",{className:S.s.wFull.hFull.$,children:[l.srcUrl&&l.title?(0,a.jsx)("iframe",{src:l.srcUrl,className:S.s.wFull.hFull.$,onLoad:e=>t?.(e.target),title:l.title,allowFullScreen:!1,allow:"autoplay"}):null,e?(0,a.jsx)("div",{className:S.s.wFull.hFull.absolute.top0.left0.$}):null]})}function e2(){let{configData:e}=d();return e.url&&e.title?(0,a.jsx)("a",{className:S.s.wFull.hFull.cursorPointer.relative.$,style:{pointerEvents:"auto"},href:e.url,target:"_blank",rel:"noopener noreferrer",title:e.title,children:e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.title,className:S.s.wFull.hFull.$,style:{objectFit:"cover"}}):null}):null}let e5={EditorFlapp:c(function(){let{configData:e,nodeId:t,setConfigData:l,isReadOnly:s}=d();return((0,n.useEffect)(()=>{s||e.srcUrl||e0(e.url).then(async e=>{if(!e)return;let a=(0,i.UN)().get(t);if(a&&(y.l7.system("initializing-youtube",()=>{(0,eQ.r)(()=>{a.resizeWithConstraints(e.width,e.height),a.proportionsConstrained=!0;let t=a.relativeTransform;t.m02=a.relativeTransform.m02-e.width/2,t.m12=a.relativeTransform.m12-e.height/2,a.relativeTransform=t,l("srcUrl",e.srcUrl),l("title",e.title),e.url&&l("url",e.url),e.thumbnailUrl&&l("thumbnailUrl",e.thumbnailUrl)})}),e.thumbnailImage))try{let t=new Uint8Array(e.thumbnailImage.data),l=await (0,eX.UD)(t,"image/png",e.title);y.l7.system("initializing-youtube-thumbnail",()=>{(0,eQ.r)(()=>{a.insertImageInFillPaint(l)})})}catch(e){}})},[e.url,e.srcUrl,t,l,s]),e.url&&!e.srcUrl)?(0,a.jsx)("div",{className:S.s.absolute.w48.h48.$,children:(0,a.jsx)(eG.kt,{size:"custom",className:S.s.w48.h48.$})}):(0,a.jsx)(e1,{disablePointerEvents:!0})}),ViewerFlapp:m(function(){let{nodeId:e,viewer:t}=d(),l=(0,n.useCallback)(l=>{t&&t.associateYoutubeWithNode(e,l)},[t,e]);return(0,n.useEffect)(()=>()=>{t&&t.disassociateYoutubeWithNode(e)},[t,e]),(0,a.jsx)(e1,{onIframeLoad:l})})},e3={EditorFlapp:c(e2),ViewerFlapp:m(e2)},e4={EMBED:el,POLL:eJ,FACEPILE:ef,ALIGNMENT:G,YOUTUBE:e5},e6={EMBED:ea,POLL:eJ,FACEPILE:ef,ALIGNMENT:G,YOUTUBE:e3},e8={EditorFlapp:()=>null,ViewerFlapp:()=>null};function e7(e){return null===e?e8:e4[e]||e8}function e9(e){return null===e?e8:e6[e]||e8}},563020:(e,t,l)=>{l.d(t,{_:()=>p,s:()=>o});var a=l(105652),n=l(692376),i=l(445019),s=l(384203);let r=(0,l(322519).bt)(e=>e.mirror.appModel.activeUserAction);function o(e){let t=(0,s.KH)(),l=t&&1===Object.keys(t).length&&t[e],a=(0,i.md)(r);return l&&a===n.QOV.DEFAULT}let d=(0,i.eU)(null);function p(e){let[t,l]=(0,i.fp)(d);return{isEmbedActive:t===e,setActiveEmbed:a.useCallback(()=>{l(e)},[e,l])}}},691222:(e,t,l)=>{l.d(t,{uV:()=>F,Jf:()=>k});var a=l(239976),n=l(105652),i=l(805242),s=l(865702),r=l(295870),o=l(726577),d=l(692376),p=l(798913),u=l(466082),c=l(270450),m=l(677394),f=l(224542),g=l.n(f),h=l(754366),x=l.n(h),_=l(955394),v=l(346063),b=l(19047),y=l(324880),E=l(419312),j=l(709003),N=l(776888),I=l(1007),w=l(384203),P=l(223487),S=l(157750),C=l(581121),T=l(818350),O=l(623240);function k(){let e=document.getElementById("fullscreen-root");if(!e)return null;let t=e.querySelectorAll(".view.container-view");return 0===t.length?null:t[t.length-1]??null}function F(){let e=(0,I._X)({subscribeToUpdates_expensive:!0}),t=(0,w.p8)("isReadOnly"),l=(0,w.p8)("topLevelMode")===d.lyf.HISTORY,n=(0,m.k9)(()=>e,[e]),s=k();return s?(0,i.createPortal)((0,a.jsx)(D,{viewportInfo:n,isReadOnly:t||l}),s):null}function D({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:l}){let i=(0,n.useCallback)(e=>{let t=(0,u.UN)().get(e.nodeId),l=t?.containingSlideId,a=t?.containingCanvas;if(t&&e.position&&l)return{guid:e.nodeId,slideId:l,pageId:a,position:e.position,type:t.interactiveSlideElementType}},[]),s=(0,S.ut)(d.Ez5?.flappData().nodeIds,[]),r=(0,j.tB)("Flapps",s,i,{useFlushSyncExpensive:!0}),o=(0,S.ut)(d.Ez5?.singleSlideView().focusedNodeId,""),p=d.Ez5?.singleSlideView().isFocusedNodeViewFocused()??!1,c=(0,N.dh)(),f=(0,m.k9)(()=>Object.values(r).filter(e=>e.pageId===c&&(!p||p&&e.slideId===o)),[r,p,o,c]);return(0,T.wj)(C.JT.BOARD_TO_DECK).state===T.qy.RUNNING?null:(0,a.jsx)(a.Fragment,{children:f.map(n=>(0,a.jsx)(A,{element:n,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:l},n.guid))})}let A=n.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:l,isReadOnly:i})=>{let s=(0,n.useRef)(null),r=(0,v.I)(s),p=(0,S.ut)(d.Ez5?.flappData().nodeThumbnailEditCount,new Map).get(e.guid)??0,[m,f]=(0,n.useState)(0),h=(0,n.useCallback)(()=>f(e=>e+1),[]),[x,_]=(0,n.useState)(null);if(!e||!e.position||!t)return(0,a.jsx)(a.Fragment,{});let b=(0,u.UN)().get(e.guid);if(!b)return null;let E=(0,I.Yb)(t,e.position),N="ALIGNMENT"===e.type||"POLL"===e.type||"FACEPILE"===e.type||"EMBED"===e.type&&!(0,c.kc)().slides_iframe_embedded_prototypes_thumbnail;return(0,a.jsx)(o.i,{children:(0,a.jsxs)("div",{ref:s,className:g()({[y.Qx]:r}),"data-testid":`flapp-${e.guid}`,title:b.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${E.x}px, ${E.y}px) ${(0,j.aZ)(e.position,t.zoomScale)}`,transformOrigin:"top left",pointerEvents:i?"none":"auto"},children:[(0,a.jsx)("div",{className:"flapp_overlay--elementContainer--J5IcF",ref:_,children:(0,a.jsx)(R,{element:e,shouldRenderMobileFlapp:l,isReadOnly:i,invalidateThumbnail:h})}),x&&N&&(0,a.jsx)(U,{nodeId:e.guid,editCount:p,flappDomElement:x,isReadOnly:i,manualThumbnailInvalidationCount:m})]})})});function R({element:e,shouldRenderMobileFlapp:t,isReadOnly:l,invalidateThumbnail:n}){if(null===e.type)return null;let{EditorFlapp:i}=t?(0,O.v)(e.type):(0,O.Z)(e.type);return(0,a.jsx)(i,{nodeId:e.guid,isReadOnly:l,invalidateThumbnail:n})}function U({nodeId:e,editCount:t,manualThumbnailInvalidationCount:l,flappDomElement:i,isReadOnly:o}){let[d]=(0,_.A)(t,500),[c]=(0,_.A)(l,500),m=(0,P.tS)();return n.useEffect(()=>{var t;if(o)return;let l=(0,u.UN)().get(e);if(!l||"INTERACTIVE_SLIDE_ELEMENT"!==l.type)return;let a=s.lQ;return t=()=>{a=function(e,t,l){let a=t.interactiveSlideElementType,n=t.guid,i=!1;return x().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw new L("Cannot decode empty buffer");return(0,E.UD)(new Uint8Array(e),"image/png",`${n}thumbnail`)}).then(e=>{t.isAlive&&!i&&p.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{e instanceof L||(0,b.x1)(r.e.SLIDES,"Failed to generate thumbnail in editor for slide",{slideId:n,flappType:a,fileKey:l,error:e},{reportAsSentryError:!0})}),()=>{i=!0}}(i,l,m??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),a},[o,e,d,c,i,m]),(0,a.jsx)(a.Fragment,{})}class L extends Error{constructor(e){super(e),this.name="EmptyBufferError"}}}}]);

//# debugId=09c2d581-5d7b-5e80-aee1-1128c2e55dbe

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/5858ad48d46489483f9b6a7d41a05f65bb356abe/2487-9ab9aa5db8917be7.min.js.map