"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="314ea1b9-2387-5fb7-8b89-9e0dc6bd661f")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[3726],{828269:(e,t)=>{var n,i;function r(e){return null!=e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&e.message.includes("IPC")}function a(e){try{return e()}catch(e){if(r(e)){console.warn("suppressingErrorsCausedByWindowClose: ignoring IPC error:",e);return}throw e}}function s(e,t){return a(()=>{let n=e.__figmaFloatingWindow;if(null==n)throw Error("withFloatingWindowAPI: bindings not found");return t(n)})}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{FloatingWindowHorizontalZone:function(){return i},FloatingWindowVerticalZone:function(){return n},isErrorCausedByWindowClose:function(){return r},suppressingErrorsCausedByWindowClose:function(){return a},withFloatingWindowAPI:function(){return s}}),function(e){e[e.NN=0]="NN",e[e.N=1]="N",e[e.S=2]="S",e[e.SS=3]="SS"}(n||(n={})),function(e){e[e.WW=0]="WW",e[e.W=1]="W",e[e.E=2]="E",e[e.EE=3]="EE"}(i||(i={}))},974575:(e,t,n)=>{n.d(t,{A:()=>i});let i=new(n(119301)).b({name:"FigmaScope",dependencies:[],exports:[],routeHints:[],enforce:!1,friendFiles:[],eslint:{rules:{"react/no-array-index-key":"off","@typescript-eslint/no-explicit-any":"off"}}})},158775:(e,t,n)=>{n.d(t,{$x:()=>d,Bq:()=>E,E5:()=>r,I6:()=>m,Ie:()=>c,Kf:()=>k,R:()=>w,T9:()=>p,UD:()=>v,ai:()=>f,bd:()=>y,h:()=>l,hF:()=>h,hf:()=>b,iE:()=>i,jw:()=>o,kL:()=>g,ld:()=>u,r9:()=>a,rA:()=>_,tB:()=>s,uE:()=>C,w$:()=>x});let i="component_browser_input--wrapper--6AJFn",r="component_browser_input--multiChipInput--sjaQm",a="component_browser_input--disabled--c6eU9",s="component_browser_input--readonly--0sBuJ",o="component_browser_input--chip--1iOOd",l="component_browser_input--suggestion--UsIAC",d="component_browser_input--incomplete--BKuH6",c="component_browser_input--empty---Zz0R",u="component_browser_input--items--6f3d9",m="component_browser_input--inputWrapper--b-z-B",p="component_browser_input--max--VQzb9",h="component_browser_input--input--LuTiA",f="component_browser_input--chevron--KriCf",g="component_browser_input--container--Ov7tT",x="component_browser_input--containerWithEditButton--6cAEt",_="component_browser_input--containerEditMode--4kXbq",y="component_browser_input--inputRow--reB6g",b="component_browser_input--editModeButtons--UVe3U",v="component_browser_input--buttonContainer--bO9kw",C="component_browser_input--chipItem--GK7lB",E="component_browser_input--filled--8C-yg",w="component_browser_input--hidden--QYfTF",k="component_browser_input--inputContainer--nrEcS"},397048:(e,t,n)=>{n.d(t,{DD:()=>o,HV:()=>p,KB:()=>s,O:()=>l,Q$:()=>r,QF:()=>u,Vh:()=>h,b:()=>m,g4:()=>d,gn:()=>i,jI:()=>a,mq:()=>c});let i="component_browser_window--titleContainer--5qz5y",r="component_browser_window--titleBarRight--KyV7s",a="component_browser_window--gitHubSettingsButton--R26s2",s="component_browser_window--footerPossibleMatches---mrS-",o="component_browser_window--title--UOA1p",l="component_browser_window--componentsListContainer--P30I-",d="component_browser_window--loadingContainer--QpZni",c="component_browser_window--breadcrumbList--DJaQ1",u="component_browser_window--breadcrumb--9y-Qu",m="component_browser_window--breadcrumbText--HpX9r",p="component_browser_window--last--7Wxr6",h="component_browser_window--breadcrumbSeparator--Lc8RX"},280009:(e,t,n)=>{n.d(t,{$s:()=>l,IP:()=>a,Lx:()=>c,R9:()=>o,RL:()=>s,UD:()=>d,ZS:()=>r,hQ:()=>i,xn:()=>u});let i="figjam_onboarding_make_something--contentContainer--Jny7Z",r="figjam_onboarding_make_something--imageContainer--VeyRy",a="figjam_onboarding_make_something--bodyContainer--4otA7 text--fontPos12Whyte--dR9EX text--_fontBaseWhyte--z-Ypd",s="figjam_onboarding_make_something--tooltipBodyXSmall--XB73A",o="figjam_onboarding_make_something--tooltipBodySmall--7xgsw",l="figjam_onboarding_make_something--tooltipBodyLarge--iJEAI",d="figjam_onboarding_make_something--buttonContainer--M78ZW",c="figjam_onboarding_make_something--skipButtonPosition--AZkOk",u="figjam_onboarding_make_something--standaloneModal--8LOmJ"},36001:(e,t,n)=>{n.d(t,{AX:()=>T,D6:()=>O,Dw:()=>j,Fn:()=>d,G$:()=>a,Gu:()=>I,HR:()=>y,Jo:()=>v,N6:()=>U,Nf:()=>P,PP:()=>o,QF:()=>A,Rt:()=>i,S:()=>W,Sq:()=>c,T:()=>M,V3:()=>f,VQ:()=>N,Vz:()=>B,Wv:()=>l,Xt:()=>_,Z9:()=>u,_E:()=>V,_M:()=>C,_P:()=>b,bB:()=>h,c1:()=>D,du:()=>w,dz:()=>q,eO:()=>K,ei:()=>m,fp:()=>F,fz:()=>R,hY:()=>k,hs:()=>G,kQ:()=>H,of:()=>L,qp:()=>E,r9:()=>x,rB:()=>z,rX:()=>S,sb:()=>p,tI:()=>r,v9:()=>s,wH:()=>g});let i="canvas_search--searchInput--yW4P- canvas_search--input---x8qy",r="canvas_search--searchInputSingleLine--fK6c1",a="canvas_search--searchSidebarContainer--DxgH7",s="canvas_search--icon32--c1Y3J",o="canvas_search--searchBarContainer--2DaH3",l="canvas_search--searchBarRow--3pJCw",d="canvas_search--leftRailSearchBarRow--uOCtc",c="canvas_search--leftRailReplaceRow--J4srJ",u="canvas_search--searchIconAndInput--OP7-5",m="canvas_search--searchIconPlaceholderFill--tmv2C",p="canvas_search--resultsContainer--W-rKE",h="canvas_search--resultsList--aWc67",f="canvas_search--layerIcon---3mzm",g="canvas_search--selected--vzgad",x="canvas_search--disabled--mhe4Q",_="canvas_search--indirectlySelected--snADa",y="canvas_search--symbol---8u4n",b="canvas_search--layerIconContainer--9tHr5",v="canvas_search--resultInfoHeader--0KBMf",C="canvas_search--resultInfo--D2Nqe",E="canvas_search--resultsText--nj19C",w="canvas_search--resultsFooterText--dvsZP",k="canvas_search--dotDivider--5qzIl",T="canvas_search--resultRow--mFua0",j="canvas_search--isHoverSelecting--nOgC1",S="canvas_search--singletonHoverSelected--k0CJv",I="canvas_search--resultSubheading--D2Ke-",A="canvas_search--offlineIconContainer--VACen",N="canvas_search--offlineIcon--Q6vXJ",M="canvas_search--hoverSelectedTop--Fp-hv canvas_search--_hoverSelectedBase--e8MvL",R="canvas_search--hoverSelectedMiddle---yA3N canvas_search--_hoverSelectedBase--e8MvL",P="canvas_search--hoverSelectedBottom--8deYl canvas_search--_hoverSelectedBase--e8MvL",O="canvas_search--resultText--TED-h",D="canvas_search--multiline--ghUwW",L="canvas_search--strikethrough--jicY9",F="canvas_search--otherResults--RxkXK",B="canvas_search--searchScopeButton--0hNNR",U="canvas_search--replaceInput--hYCtc canvas_search--searchBarRow--3pJCw canvas_search--input---x8qy",V="canvas_search--replaceButtons--6cqhZ",H="canvas_search--collapsableHeaderToggle--250-j",z="canvas_search--collapsableHeaderName--QJ-FW",G="canvas_search--collapsableHeaderCount--9sg4M",K="canvas_search--expandIcon--9r2iA",W="canvas_search--loadingSpinner--IBEUn",q="canvas_search--loadingSpinnerDelay--x66N7"},575385:(e,t,n)=>{n.d(t,{H9:()=>r,JE:()=>d,VS:()=>o,WP:()=>c,_0:()=>u,ed:()=>a,oZ:()=>l,t1:()=>s,wV:()=>i});let i="canvas_search_settings--optionRow--DdIxG",r="canvas_search_settings--optionIcon--i5Vek",a="canvas_search_settings--optionLabel--ZIFLs",s="canvas_search_settings--optionCount--Nqtr6",o="canvas_search_settings--filterPills--Do-Rs",l="canvas_search_settings--filterPillsLeftRail--hncIM",d="canvas_search_settings--filterPillsShort--DIj5j",c="canvas_search_settings--filterPillFpl--sWsM- canvas_search_settings--filterPill--mlX7f",u="canvas_search_settings--pillRemoveFpl--WYsDX"},269845:(e,t,n)=>{n.d(t,{Bj:()=>y,DE:()=>b,Dy:()=>o,Lo:()=>h,Lw:()=>r,PT:()=>a,Rt:()=>v,S8:()=>u,VW:()=>c,W7:()=>s,bu:()=>x,hD:()=>C,iU:()=>p,iY:()=>g,or:()=>l,p:()=>_,u0:()=>d,vD:()=>f,z8:()=>m,zr:()=>i});let i="multiplayer_cursors--root--cdJg0",r="multiplayer_cursors--overlay--faG7K",a="multiplayer_cursors--multiplayerCursorsContainer--S0K82",s="multiplayer_cursors--multiplayerCursorsHiddenForVoting--jSugH multiplayer_cursors--multiplayerCursorsContainer--S0K82",o="multiplayer_cursors--cursor--nlHrn",l="multiplayer_cursors--cursorPointer--8vVWo",d="multiplayer_cursors--cursorImage--v-OF6",c="multiplayer_cursors--nameContainer--P44Tc",u="multiplayer_cursors--nameContainerCloserToCursor--bLP40",m="multiplayer_cursors--isPointingRight--1UoRe",p="multiplayer_cursors--message--OTu53 multiplayer_cursors--nameContainer--P44Tc",h="multiplayer_cursors--messageText--wXanx",f="multiplayer_cursors--topMessageLine--V0wE7",g="multiplayer_cursors--cursorName---bbhh",x="multiplayer_cursors--cursorNameSmall--qyNWH",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--5fFvq",y="multiplayer_cursors--multiplayerPointerForHighFive--MzW-t",b="multiplayer_cursors--multiplayerPointerForHighFiveHidden--ApeS4",v="multiplayer_cursors--chatBoxUI3--b7jae",C="multiplayer_cursors--chatBackground--X2l-N"},150605:(e,t,n)=>{n.d(t,{$U:()=>k,Fo:()=>w,K3:()=>d,PE:()=>f,Pq:()=>y,Q:()=>h,Rj:()=>a,T_:()=>i,U2:()=>g,VW:()=>l,WV:()=>p,Zk:()=>u,ed:()=>c,g1:()=>C,hs:()=>b,iM:()=>v,jk:()=>r,oX:()=>s,r2:()=>E,r9:()=>x,rF:()=>T,so:()=>m,uR:()=>_,z$:()=>o});let i="on_canvas_name_editor--containerOnLight--SsrmD",r="on_canvas_name_editor--measurer--LspiT",a="on_canvas_name_editor--frameNameInput--ANXlM sf_pro--uiFontWithSFProFallback--iJ25E",s="on_canvas_name_editor--canvasGridRowNameInput--NwSWB on_canvas_name_editor--frameNameInput--ANXlM sf_pro--uiFontWithSFProFallback--iJ25E",o="on_canvas_name_editor--varWidthSizeInput--0CI0U sf_pro--uiFontWithSFProFallback--iJ25E",l="on_canvas_name_editor--flowStartingPointNameContainer--lfUUl",d="on_canvas_name_editor--flowStartingPointNameInput--KdEh1",c="on_canvas_name_editor--sectionNameContainer--VkV5l",u="on_canvas_name_editor--sectionNameInput--IdJDn",m="on_canvas_name_editor--sectionMeasurer--QzMbd",p="on_canvas_name_editor--varWidthSizeContainer--6ZgQO",h="on_canvas_name_editor--measurementFreeTextInput--txIfy sf_pro--uiFontWithSFProFallback--iJ25E",f="on_canvas_name_editor--gridTrackSizeInput--7kdZc sf_pro--uiFontWithSFProFallback--iJ25E",g="on_canvas_name_editor--gridTrackSizeComboboxInput--hl2hM sf_pro--uiFontWithSFProFallback--iJ25E",x="on_canvas_name_editor--disabled--gj1h3",_="on_canvas_name_editor--gridTrackSizeComboboxTrigger--RrhGj",y="on_canvas_name_editor--gridTrackSizeComboboxTriggerDS--uSOgx",b="on_canvas_name_editor--gridTrackSizeComboboxContainer--Qr4r7",v="on_canvas_name_editor--gridTrackSizeComboboxContainerDS--qw0Ir",C="on_canvas_name_editor--gridTrackSizeComboboxPopupList--43Pcy",E="on_canvas_name_editor--gridTrackSizeComboboxOption--UQRT0",w="on_canvas_name_editor--gridTrackSizeComboboxOptionInner--mEcjJ",k="on_canvas_name_editor--gridTrackSizeComboboxOptionInnerActive--MSPHa",T="on_canvas_name_editor--gridTrackSizeComboboxOptionCheck--NNOkA"},601775:(e,t,n)=>{n.d(t,{As:()=>m,Dq:()=>c,KE:()=>_,Nr:()=>T,Nz:()=>g,Pl:()=>h,R:()=>x,Sp:()=>i,VC:()=>b,VQ:()=>j,YW:()=>y,aY:()=>a,ge:()=>E,hi:()=>v,iB:()=>u,jE:()=>k,jG:()=>C,l$:()=>r,mB:()=>w,n6:()=>s,oG:()=>l,q8:()=>S,sR:()=>f,sl:()=>p,vu:()=>o,wH:()=>d});let i="legacy_pages_panel--pageChangesCount--dAsfv",r="legacy_pages_panel--pagesList--IgtF8",a="legacy_pages_panel--pendingPagesList--Gp2GS legacy_pages_panel--pagesList--IgtF8",s="legacy_pages_panel--pageIcon--X-2IW",o="legacy_pages_panel--active--CXcYB",l="legacy_pages_panel--pageRow--9OnkY legacy_pages_panel--pageRowBase--dQ3Qk",d="legacy_pages_panel--selected--kvB9l",c="legacy_pages_panel--hoverByMouse--g07Bk",u="legacy_pages_panel--hoverState--okCs8",m="legacy_pages_panel--pageRowButton--31SQE",p="legacy_pages_panel--pageRowActive--hZAkg",h="legacy_pages_panel--activePageBrand--Ft5YL",f="legacy_pages_panel--pageRowActiveUI2--4ts5u",g="legacy_pages_panel--renameableNode--wjbFO",x="legacy_pages_panel--renameableNodeWithMoreActions--htWgE legacy_pages_panel--renameableNode--wjbFO",_="legacy_pages_panel--renameableNodeText--vzN2p ellipsis--ellipsis--70pHK",y="legacy_pages_panel--disabledNodeText--KuFI1 legacy_pages_panel--renameableNodeText--vzN2p ellipsis--ellipsis--70pHK",b="legacy_pages_panel--renameableNodeTextEnd--SjMyg legacy_pages_panel--renameableNodeText--vzN2p ellipsis--ellipsis--70pHK",v="legacy_pages_panel--renameableNodeTextEndDisabled--tUTX9 legacy_pages_panel--renameableNodeTextEnd--SjMyg legacy_pages_panel--renameableNodeText--vzN2p ellipsis--ellipsis--70pHK",C="legacy_pages_panel--scrollContainer--D9z-X",E="legacy_pages_panel--leftPanelWidth--r4aBm",w="legacy_pages_panel--pageRowDividerContainer---skAo legacy_pages_panel--pageRowBase--dQ3Qk",k="legacy_pages_panel--pageRowDivider--IJdSL",T="legacy_pages_panel--offlineContainer--Lf5l1",j="legacy_pages_panel--offlineIcon---gFXO",S="legacy_pages_panel--pageRowRight--Qt5pm"},236994:(e,t,n)=>{n.d(t,{Co:()=>o,II:()=>r,Rm:()=>i,W:()=>s,dK:()=>a});let i="ui3_header_row--toggleButton--mmM5R",r="ui3_header_row--pageExpandToggle--hQqpw",a="ui3_header_row--isHidden---pdoU",s="ui3_header_row--pageTitle--sz9QA ellipsis--ellipsis--70pHK",o="ui3_header_row--searchButtonContainer--t7dvr"},603935:(e,t,n)=>{n.d(t,{BK:()=>C,C7:()=>s,EI:()=>a,Ge:()=>m,K$:()=>d,Km:()=>b,MT:()=>k,Vr:()=>v,XE:()=>u,_L:()=>o,ai:()=>E,hg:()=>y,me:()=>g,qb:()=>c,r9:()=>r,rR:()=>i,wH:()=>h,ws:()=>l,yo:()=>f,yx:()=>p,zK:()=>w,zW:()=>x,zk:()=>_});let i="multiplayer_view--onboardingTarget--nnqVO",r="multiplayer_view--disabled--kLBpM",a="multiplayer_view--usersContainer--lI-68",s="multiplayer_view--userIconView--dDvae",o="multiplayer_view--userIconViewHorizontal--C74Om multiplayer_view--userIconView--dDvae",l="multiplayer_view--userIconAvatar--JUHxu",d="multiplayer_view--userIconAvatarLoading--DQoiG",c="multiplayer_view--normal---P25j",u="multiplayer_view--avatarWithCollaborationToolsContainer--2AFdO",m="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--o6yG5",p="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--e5Kwi multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--o6yG5",h="multiplayer_view--selected--8l5qI",f="multiplayer_view--hovered--CcF0B",g="multiplayer_view--separator--g7-F2",x="multiplayer_view--separatorContainer--PF0OW",_="multiplayer_view--multiplayerUserCount--HIor5",y="multiplayer_view--fileSeenStateSubtitle--BWpuA",b="multiplayer_view--avatarWithGroupActionsTightened--YeNDc",v="multiplayer_view--groupActions--8Edoz",C="multiplayer_view--presenterButtonAction--JetU6",E="multiplayer_view--chevron--dnZaH",w="multiplayer_view--ui3SearchContainerNew--rwqnb",k="multiplayer_view--searchContainer---X3pl"},400754:(e,t,n)=>{n.d(t,{H6:()=>o,a0:()=>s,bV:()=>a,jy:()=>r,sk:()=>d,xC:()=>i,xO:()=>l});let i="browse_explore_list--widgetTilesGridContainer--8HFQ9 browse_widgets_view--widgetTilesGridContainer--bJYty",r="browse_explore_list--seeAll--3ijOP text--fontPos13--5OfL8 text--_fontBase--VaHfk",a="browse_explore_list--sectionHeader--0pQN3 text--fontPos13--5OfL8 text--_fontBase--VaHfk",s="browse_explore_list--categorySectionHeaderContainer--L7rR-",o="browse_explore_list--categorySectionHeaderCard--u7y9g browse_explore_list--categorySectionHeaderContainer--L7rR-",l="browse_explore_list--pluginCategorySectionHeaderPadding--L7KNO",d="browse_explore_list--resourcesGrid--2DrUz"},594997:(e,t,n)=>{n.d(t,{$I:()=>f,D5:()=>c,EQ:()=>b,KF:()=>r,MY:()=>_,Mm:()=>y,Mo:()=>o,X6:()=>l,Y:()=>v,hW:()=>i,jE:()=>a,n_:()=>x,pz:()=>s,rb:()=>m,sk:()=>g,vC:()=>d,w0:()=>h,wP:()=>u,xQ:()=>p});let i="browse_templates_modal--figjamModalAnimated--gdNb2",r="browse_templates_modal--searchInputContainer--34XAW",a="browse_templates_modal--modalContent--K4nEw",s="browse_templates_modal--sidebar--F2YFM",o="browse_templates_modal--unselectedSidebarItem--0exyQ browse_templates_modal--sidebarItem--GIGQm browse_templates_modal--sidebarText--0CXLR text--fontPos13--5OfL8 text--_fontBase--VaHfk",l="browse_templates_modal--selectedSidebarItem--pCsxc browse_templates_modal--sidebarItem--GIGQm browse_templates_modal--sidebarText--0CXLR text--fontPos13--5OfL8 text--_fontBase--VaHfk",d="browse_templates_modal--figmaCuratedHeading--vjwyx browse_templates_modal--sidebarItem--GIGQm browse_templates_modal--sidebarText--0CXLR text--fontPos13--5OfL8 text--_fontBase--VaHfk",c="browse_templates_modal--communitySidebarContainer--mrUK4",u="browse_templates_modal--linkIcon--ROczN",m="browse_templates_modal--mainContent--WGikg",p="browse_templates_modal--categoryPreviewRow--VUc24",h="browse_templates_modal--categoryPreviewHeader--XcMXx",f="browse_templates_modal--categoryPreviewTitle--CLoXx text--fontPos13--5OfL8 text--_fontBase--VaHfk",g="browse_templates_modal--resourcesGrid--R3j2q",x="browse_templates_modal--hoverOverlay--w0Qyl",_="browse_templates_modal--teamTemplatesHeaderButton--pF58o",y="browse_templates_modal--bgLoading--MUoAO",b="browse_templates_modal--bgLoadingLight--CfHQm",v="browse_templates_modal--bgLoadingLightest--QNXXu"},841052:(e,t,n)=>{n.d(t,{Cb:()=>r,M4:()=>s,Q$:()=>a,Q0:()=>d,_d:()=>u,iZ:()=>l,k9:()=>o,mT:()=>c,qW:()=>i});let i="inline_preview_device_frames--previewDeviceContainer--tbsbm",r="inline_preview_device_frames--fillGapsBetweenDeviceAndIframe--Fr8y-",a="inline_preview_device_frames--hideCornersForOverlyRoundedDevice--a6ZHL",s="inline_preview_device_frames--previewDeviceImage--xB4cQ",o="inline_preview_device_frames--previewDeviceHeader--y1lv9",l="inline_preview_device_frames--deviceFrameHitTargetSvg--nEimZ",d="inline_preview_device_frames--rotatedHorizontal--yce4f",c="inline_preview_device_frames--positionRotatedHorizontalDeviceFrame--Imfe-",u="inline_preview_device_frames--positionRotatedHorizontalDeviceFrameHitTarget--MCXRi"},976285:(e,t,n)=>{n.d(t,{AL:()=>C,BI:()=>p,Cu:()=>x,DL:()=>d,FH:()=>v,Fp:()=>i,G7:()=>f,Hl:()=>r,L8:()=>w,LH:()=>_,Lk:()=>T,MO:()=>m,Nn:()=>E,TV:()=>c,UD:()=>g,Xg:()=>S,YM:()=>b,e6:()=>u,ev:()=>y,fJ:()=>I,j7:()=>a,ko:()=>o,nP:()=>s,tE:()=>j,vO:()=>l,yH:()=>h,zO:()=>k});let i="voice_users--voiceParticipantAvatar--l5dj0",r="voice_users--overflowRow--8mDFx",a="voice_users--nameAndSuffixContainer--hiIkY",s="voice_users--flexContainer--i2Cbt",o="voice_users--flexLeftContainer--tzkI7",l="voice_users--flexRightContainer--m1CSH",d="voice_users--voiceParticipantName--zItW3 text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",c="voice_users--voiceParticipantNameGreyedOut--yDMxR text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",u="voice_users--participantStatus--9w7OC",m="voice_users--participantRow--Ia5gC",p="voice_users--hoverable--nPs5F",h="voice_users--containsCursor--vYhEi",f="voice_users--secondaryMenuIconButtonContainer--kbaNW",g="voice_users--showSecondaryDropdownOnHover--J7VYf",x="voice_users--currentUserHeaderRow--M8kcq",_="voice_users--multiplayerUserView--rJTWe",y="voice_users--voiceUsersWrapper--txzKs",b="voice_users--voiceUsersOverflowScrollingContainer--ifoUo",v="voice_users--userSuffixNew--OSPDv text--fontPos11--rO47d text--_fontBase--VaHfk",C="voice_users--voiceUserHeadphonesIcon--KxCwD",E="voice_users--mutedContainer--E4COX",w="voice_users--cardButton--w395v",k="voice_users--userSuffixNewShowOnHover--fQrBo",T="voice_users--cardRootWithHover--qQOQN text--fontPos11--rO47d text--_fontBase--VaHfk",j="voice_users--cardRootActive--tu4Oq text--fontPos11--rO47d text--_fontBase--VaHfk",S="voice_users--secondaryActionsMenuButtonNew---Dr7e",I="voice_users--showSecondaryMenuButton--MjTjS"},808877:(e,t,n)=>{n.d(t,{QH:()=>l,R3:()=>s,Te:()=>i,WF:()=>d,Wh:()=>o,XF:()=>p,iG:()=>r,iw:()=>m,sl:()=>c,tL:()=>u,zc:()=>a});let i="voice_toolbar--audioButtonInDropdown--OVxCv",r="voice_toolbar--centeredContainer--KCFnE",a="voice_toolbar--iconContainer--r6QXB voice_toolbar--centeredContainer--KCFnE",s="voice_toolbar--avatarWrapper--M4a68",o="voice_toolbar--volumeIcon--sCKYm",l="voice_toolbar--audioIconNotJoined--Uktqa",d="voice_toolbar--audioIconUnavailableSpan--aTs8G",c="voice_toolbar--audioIconDisabled--Fxk8E",u="voice_toolbar--audioIconMenu--JOPsf",m="voice_toolbar--audioIcon--ZgKXv voice_toolbar--centeredContainer--KCFnE",p="voice_toolbar--avatarObserveClickTarget--3wPY2"},643556:(e,t,n)=>{n.d(t,{EF:()=>o,Rc:()=>s,Vc:()=>l,Wp:()=>i,f1:()=>r,zm:()=>a});let i="styles-module--accessibilityDropdown--JS3XY",r="styles-module--tagInput--TrUd-",a="styles-module--iconVisibleOnHover--W0v80",s="styles-module--sideText--HTR8X",o="styles-module--optionSideText--UffzE styles-module--sideText--HTR8X",l="styles-module--ui3ComboBoxInput--vryIi ellipsis--ellipsis--70pHK"},868646:(e,t,n)=>{n.d(t,{$y:()=>u,C9:()=>a,I8:()=>f,JB:()=>C,S:()=>b,VY:()=>p,XD:()=>h,_P:()=>s,a3:()=>_,cb:()=>l,e4:()=>g,gx:()=>d,iH:()=>v,ln:()=>i,mf:()=>o,n_:()=>y,pz:()=>x,uP:()=>r,y5:()=>c,zs:()=>m});let i="slides_template_tile--tileFocusable--u16a8",r="slides_template_tile--tileImage--udknX",a="slides_template_tile--templateCoverCardMediumSize--7AMdq",s="slides_template_tile--templateCoverCardLargeSize--J0vkZ",o="slides_template_tile--templateCoverCardLargeSizeV2--2hweR",l="slides_template_tile--templateCoverCardExtraLargeSize--kIi0K",d="slides_template_tile--templateCoverBottomRowMedium--os47N",c="slides_template_tile--templateCoverBottomRowLarge--v8Bn8",u="slides_template_tile--templateCoverCardMedium--x7x-u slides_template_tile--_templateCoverCard--CQEOT slides_template_tile--templateCoverCardMediumSize--7AMdq",m="slides_template_tile--templateCoverCardLarge--XAHAX slides_template_tile--_templateCoverCard--CQEOT slides_template_tile--templateCoverCardLargeSize--J0vkZ",p="slides_template_tile--templateCoverCardExtraLarge--XC9NG slides_template_tile--_templateCoverCard--CQEOT slides_template_tile--templateCoverCardExtraLargeSize--kIi0K",h="slides_template_tile--moduleCoverCardPickerSize--sdcPb",f="slides_template_tile--moduleCoverCardModalSize--lx-wo",g="slides_template_tile--moduleCoverCardPicker--HeZ9P slides_template_tile--_moduleCoverCard--vyGqK slides_template_tile--moduleCoverCardPickerSize--sdcPb",x="slides_template_tile--moduleCoverCardModal--F6rH3 slides_template_tile--_moduleCoverCard--vyGqK slides_template_tile--moduleCoverCardModalSize--lx-wo",_="slides_template_tile--gridViewHover--41wVS",y="slides_template_tile--hoverOverlay--JCTwL",b="slides_template_tile--loadingSpinner---EvKC",v="slides_template_tile--selectedTemplateTile--Wsvfr",C="slides_template_tile--hoverableTemplateTile--t-u-3"},680519:(e,t,n)=>{n.d(t,{Fj:()=>d,GM:()=>u,HE:()=>s,ON:()=>r,Tn:()=>c,Vg:()=>l,eg:()=>p,ij:()=>i,m_:()=>m,me:()=>a,qr:()=>o});let i="slides_template_ui--pickerContainer--hqiOD",r="slides_template_ui--searchBar--cWFF8",a="slides_template_ui--separator--fOjob",s="slides_template_ui--headerSeparator--fiOYH",o="slides_template_ui--footer---8049",l="slides_template_ui--grid--sqrt1",d="slides_template_ui--fileTile--Xq0rJ",c="slides_template_ui--titleTextContainer--sEUoZ",u="slides_template_ui--templateTitleText--hq5Sj text--fontPos13--5OfL8 text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",m="slides_template_ui--publisherTitleText--dUkAt text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",p="slides_template_ui--tabButton--do7UQ"},446341:(e,t,n)=>{n.d(t,{BA:()=>s,Do:()=>l,ER:()=>g,FS:()=>m,FW:()=>i,KR:()=>d,PT:()=>r,TK:()=>p,Tt:()=>a,UP:()=>x,fg:()=>u,fh:()=>h,ij:()=>f,pl:()=>c,w0:()=>o});let i="section_preset_picker--headerIconButton--bj8Ei section_preset_picker--iconBase--TF0js",r="section_preset_picker--hover--UpxJ8",a="section_preset_picker--shelfItemIcon--AxNgA section_preset_picker--iconBase--TF0js",s="section_preset_picker--templateItemIcon--0EwW7 section_preset_picker--iconBase--TF0js",o="section_preset_picker--headerItemContainer--Sn0tv dropdown--_optionBase--E8Xq0 text--fontNeg12--HBXnm text--_fontBase--VaHfk text--_negText--7Cnf0",l="section_preset_picker--loadingSpinnerContainer--9REqR",d="section_preset_picker--chevronRight--A3cjg",c="section_preset_picker--shelfItemContainer--j4TPR section_preset_picker--bodyItemContainer--GbxB1 dropdown--option--iBiX0 dropdown--_optionBase--E8Xq0 text--fontNeg12--HBXnm text--_fontBase--VaHfk text--_negText--7Cnf0",u="section_preset_picker--templateItemContainer--GHkgs section_preset_picker--bodyItemContainer--GbxB1 dropdown--option--iBiX0 dropdown--_optionBase--E8Xq0 text--fontNeg12--HBXnm text--_fontBase--VaHfk text--_negText--7Cnf0",m="section_preset_picker--textContainer--Yt17B text--fontNeg11--bghdh text--_fontBase--VaHfk text--_negText--7Cnf0",p="section_preset_picker--headerText---JdJP section_preset_picker--textContainer--Yt17B text--fontNeg11--bghdh text--_fontBase--VaHfk text--_negText--7Cnf0 text--fontNeg12--HBXnm text--_fontBase--VaHfk text--_negText--7Cnf0",h="section_preset_picker--nameText--bVrrH",f="section_preset_picker--descriptionText--oHEQu",g="section_preset_picker--trailingIcon--bhX9i section_preset_picker--iconBase--TF0js",x="section_preset_picker--alertHeader--AN9RI"},176133:(e,t,n)=>{n.d(t,{H:()=>i});let i="0.5s"},295265:(e,t,n)=>{n.d(t,{vb:()=>c,xL:()=>d});var i=n(607696),r=n(270450),a=n(592802),s=n(562418);n(920675);var o=n(581121),l=n(203250);function d(){(0,r.kc)().ai_assistant,(0,s.lg)(),(0,a.BE)();let e=(0,l.Hy)(o.JT.AI_ASSISTANT_CHAT,i.lV.AI_ASSISTANT);return e?.restriction,!1}function c(){let e=d(),t=(0,r.kc)().ai_assistant_canvas_entrypoint||!1;return e&&t}},185044:(e,t,n)=>{n.d(t,{$:()=>o,A:()=>a});var i=n(239976);n(323264);var r=n(463916);function a({paint:e}){let t=(0,r.e)(e);return e?(0,i.jsx)("div",{className:"xlup9mm x1kky2od x78zum5 xl56j7k x6s0dn4 x1n2onr6",children:(0,i.jsx)(r.v,{colors:t,paint:e,showTransparentBorder:!0})}):(0,i.jsx)(s,{})}function s(){return(0,i.jsx)("div",{className:"xlup9mm x1kky2od x78zum5 xl56j7k x6s0dn4 x1n2onr6",children:(0,i.jsx)("img",{src:n(630213),alt:"No fill icon",draggable:!1})})}function o(){return(0,i.jsx)("div",{className:"xlup9mm x1kky2od x78zum5 xl56j7k x6s0dn4 x1n2onr6",children:(0,i.jsx)("div",{className:"x6jxa94 x1v9usgg x9f619 xmkeg23 x1y0btm7 x158wl1f x1cum3z5 x78zum5 xl56j7k x6s0dn4",children:(0,i.jsx)("span",{className:"xjm9jq1 x1fsd2vl xdq5r5b x1158fpu"})})})}},464799:(e,t,n)=>{n.d(t,{W:()=>r});var i=n(239976);function r({maxColumns:e=3,children:t}){return(0,i.jsx)("div",{className:"xrvj5dj x883omv xmwckwh xe8ttls",style:{"--icon-button-grid-max-columns":e},children:t})}n(323264)},323981:(e,t,n)=>{n.d(t,{Em:()=>h,JE:()=>p,ar:()=>u});var i=n(239976),r=n(105652),a=n(943360),s=n(563225),o=n(323264),l=n(224542),d=n.n(l),c=n(236410);let u=r.forwardRef(function({children:e,showCaret:t,caretStyle:n={},isActive:r,tooltip:o,tooltipType:l,tooltipShowAbove:c=!0,...u},m){return(0,i.jsxs)(a.E,{ref:m,...u,className:d()("menu_button--iconButton--J1NC7 menu_button--baseIconButton--NT7ol","menu_button--ghost--4VNut",{"menu_button--wrapCaret--AB4f3":!!t,"menu_button--active--irMO2":r}),"data-tooltip":u["aria-disabled"]||u.disabled?void 0:o,"data-tooltip-type":l,"data-tooltip-show-above":!!c||void 0,"data-tooltip-show-below":!c||void 0,"data-tooltip-offset-y":c?-8:8,children:[(0,i.jsx)("span",{"aria-hidden":!0,className:"menu_button--icon--GZDbx",children:e}),t&&(0,i.jsx)(s.O,{style:n,className:"x11yfylt"})]})}),m=r.forwardRef(function({children:e,iconPrefix:t,iconSuffix:n,styleXStyles:r,...s},l){let{noBorder:d,...c}=s;return(0,i.jsx)(a.E,{ref:l,...c,...o.Ay.props(f.container,g.focusableButton,r,s["aria-expanded"]?f.container_active:null,s.noBorder?f.container_noBorder:null,t?null:f.containerLeftPaddingWithoutIconPrefix,n?null:f.containerRightPaddingWithoutIconSuffix),children:(0,i.jsxs)("div",{className:"xz16r55 x78zum5 x6s0dn4",children:[t,e,n]})})}),p=r.forwardRef(function({tooltip:e,tooltipType:t=c.Ib.TEXT,tooltipShowAbove:n=!1,...r},a){return(0,i.jsx)(m,{ref:a,"data-tooltip":r["aria-disabled"]||r.disabled?void 0:e,"data-tooltip-type":t,"data-tooltip-show-above":!!n||void 0,"data-tooltip-show-below":!n||void 0,...r,styleXStyles:[g.dialogTriggerButton,g.focusableButton]})}),h=r.forwardRef(function(e,t){return(0,i.jsx)(m,{ref:t,...e,styleXStyles:[x.dialogTriggerButton,g.focusableButton]})}),f={container:{kZKoxP:"xxk0z11",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,$$css:!0},container_noBorder:{kMzoRj:"xc342km",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"xng3xce",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,$$css:!0},container_active:{kWkggS:"xu5wzci",kVAM5u:"x1fzvlhx",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,$$css:!0},containerLeftPaddingWithoutIconPrefix:{kE3dHu:"x8rdmch",kZCmMZ:null,kwRFfy:null,$$css:!0},containerRightPaddingWithoutIconSuffix:{kpe85a:"xctkrei",kZCmMZ:null,kwRFfy:null,$$css:!0}},g={dialogTriggerButton:{kVAM5u:"x1co876m",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kWkggS:"xon4yw5 xv2f06h x1m5i512",$$css:!0},focusableButton:{kI3sdo:"x1ea3bqm x5hs570",kjBf7l:null,kInvED:null,k3XXqK:null,kMeerF:null,$$css:!0}},x={dialogTriggerButton:{kVAM5u:"x1fzvlhx",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kWkggS:"xu5wzci xazsp2l x1kqa1b1",$$css:!0}}},691661:(e,t,n)=>{n.d(t,{R:()=>r});var i=n(239976);let r=n(105652).forwardRef(function({margin:e,children:t},n){let r=`${e??4}px`;return(0,i.jsx)("div",{ref:n,className:"menu_control_wrapper--container--ViEzc",style:{marginLeft:r,marginRight:r},children:t})})},230135:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(239976),r=n(432318);function a(){return(0,i.jsx)(r.wv,{margin:4})}},778650:(e,t,n)=>{n.d(t,{rN:()=>U,q_:()=>K,VY:()=>V,$k:()=>H,R8:()=>z});var i=n(105652),r=n(20002),a=n(692376),s=n(466082),o=n(379141),l=n(445019),d=n(312884),c=n(102462),u=n(156555),m=n(506738),p=n(865702),h=n(19047),f=n(888903),g=n(287736),x=n(695821),_=n(452748),y=n(62440),b=n(111273),v=n(405228),C=n(766157);let E=v.z.object({key:v.z.string()}).extend({data:b._$}),w=(0,l.E2)("return-to-file-data",null,E.nullable()),k=(0,l.tx)(null),T=(0,l.eU)(e=>{let t=e(k),n=e(w);return n&&n.key===t?n.data:null},(e,t,n)=>{let i=(0,C.MZ)();return t(w,{data:n,key:i}),i});var j=n(677451),S=n(909194),I=n(526575),A=n(152140),N=n(155862),M=n(223487),R=n(394396),P=n(920675),O=n(898301),D=n(702417),L=n(969574),F=n(493130),B=n(17248);function U(e,t,n){let i=l.zl.get(O.Me),r=c.D.getState(),a=(0,A.Kl)(r);e(y.zE({state:a,from:n,editorType:P._Y.COOPER,team:i??void 0,openNewFileIn:D.ai.NEW_TAB,newFileDataLocalStorageKey:t}))}function V({openFile:e,fileVersion:t,returningToFile:n=!1}){if(null===e||null===t){let n="No openFile or file version";throw(0,h.x1)("storeFigmaContentForCooperCreation",n,{fileKey:e?.key,fileVersion:t},{reportAsSentryError:!0}),Error(n)}let i=(0,s.UN)().getDirectlySelectedNodes().length>0?a.Mpt?.getSelectedNodesToSend()??[]:a.Mpt?.getTopLevelFramesToSend()??[];if(0===i.length){let e="Empty target node ids";throw(0,h.x1)("storeFigmaContentForCooperCreation",e,{},{reportAsSentryError:!0}),Error(e)}return l.zl.set(n?T:b.Uf,{fileKey:e.key,fileVersion:t,sourceNodeIds:i})}function H(){let e=(0,r.wA)(),t=G();(0,m.R)(()=>{t&&l.zl.set(k,t)},[t],()=>!!t);let n=(0,l.Xr)(_.Tw),s=(0,l.md)(T),d=(0,l.md)(b.Uf),c=s??d,h=(0,M.tS)(),y=(0,B.EI)(),v=!!c,C=v&&!!h&&y,E=(0,l.Xr)(b.$K),w=(0,l.Xr)(k),A=(0,j.J3)(),N=(0,S.j)()&&(0,j.JU)(A),{openCooperPublishFlow:R}=(0,L.t)(),P=(0,x.l)(N);(0,i.useEffect)(()=>(N&&P&&e(f.F.dequeue({matchType:"send-to-buzz-from-design-success-maybe-publish"})),()=>{e(f.F.dequeue({matchType:"send-to-buzz-from-design-success-maybe-publish"}))}),[e,P,N]),(0,m.R)(()=>{n(!1),e(f.F.enqueue({message:(0,o.t)("buzz.send_from_design.copying"),type:"send-to-buzz-from-design-loading",icon:g.zX.SPINNER,timeoutOverride:3e5}))},[e],()=>v);let O=(0,u.H)(i.useCallback(t=>{N?e(f.F.enqueue({message:(0,o.t)("buzz.send_from_design.imported_x_assets_and_maybe_publish",{numAssets:t}),timeoutOverride:1/0,type:"send-to-buzz-from-design-success-maybe-publish",button:{text:(0,o.t)("community.publishing.publish"),action:()=>{R("send-to-buzz-from-design-success-bell"),(0,I.Cu)({trackingContext:"SendToBuzzFromDesignSuccessBell",text:(0,o.t)("community.publishing.publish")})}},onDismiss:p.lQ})):e(f.F.enqueue({message:(0,o.t)("buzz.send_from_design.imported_x_assets",{numAssets:t}),type:"send-to-buzz-from-design-success",timeoutOverride:3e3}))},[e,N,R]));(0,m.R)(()=>{(async()=>{a.glU?.applyNodesFromBuffer(await F.R({fileKey:c.fileKey,selectedGuids:c.sourceNodeIds}),c.fileKey,c.sourceNodeIds,!1);let t=c.sourceNodeIds.length;E(l.Ut),w(l.Ut),await W(),a.Ez5?.cooperFocusView().exitFocusedNodeView(),await W(),a.Ez5?.cooperFocusView().zoomToGridAndRecenter(.55),e(f.F.dequeue({matchType:"send-to-buzz-from-design-loading"})),O.current(t)})()},[e,c?.fileKey,c?.sourceNodeIds,O],()=>C)}function z(){let e=G(),t=(0,l.md)(b.Uf),n=(0,l.md)(T);return!!t||!!n||!!e}function G(){return(0,r.d4)(e=>{let t=e.selectedView;return"sendToBuzzLocalStorageKey"in t?t.sendToBuzzLocalStorageKey:void 0})}function K(e){try{let t=V({openFile:e.openFile,fileVersion:e.fileVersion,returningToFile:!0}),n=(0,R.jN)({file:{key:e.previousBuzzFileKey,editorType:P._Y.COOPER},allowDefaulting:!0}),i=(0,d.NQ)(n,"send-to-buzz-local-storage-key",t);return(0,N.nz)(i,e.previousBuzzFileKey,e.selectedView,e.dispatch),!0}catch(e){return!1}}async function W(){await new Promise(e=>requestAnimationFrame(()=>{e(!0)}))}},752746:(e,t,n)=>{n.d(t,{KB:()=>d,Tj:()=>s,W0:()=>o,yq:()=>l});var i=n(74372),r=n(439906),a=n(715365);function s(e,t,n,s,o,l,d){t??=(0,i.g)();let u=n.reduce((e,n)=>(e[n.fieldId]=c(t,n.fieldSchema.databaseId,n.value,n.assetsForPublish,n.jobStatus),e),{});return(0,r.WB)().optimisticallyCreate({CollectionItemV2:{[t]:{stableId:t,collectionId:e.databaseId,position:o,status:"draft",createdAt:new Date,updatedAt:new Date,lastPublishedAt:null,statusUpdatedAt:null,contentUpdatedAt:new Date,contentUpdatedByUserId:d??null,createdByUserId:d??null,allFields:Object.values(u)}},CollectionItemField:u},a.hl.createItem({collection:e,itemId:t,fields:n})).then(e=>(s(e.data.meta.id),e.data.meta),e=>{l(e)}),t}function o({collection:e,item:t,updatedItemAttributes:n}){(0,r.WB)().optimisticallyUpdate({CollectionItemV2:{[t.databaseId]:{collectionId:e.databaseId,position:n.position,status:n.status}}},a.hl.updateItem({collection:e,item:t,updatedItemAttributes:n}))}async function l({collectionId:e,fieldId:t,shouldCreateField:n,fieldSchema:i,item:s,value:o,assetsForPublish:l,jobStatus:d}){return n?await (0,r.WB)().optimisticallyCreate({CollectionItemField:{[t]:c(s.databaseId,i.databaseId,o,l,d)}},a.hl.updateSingleItemData({collectionId:e,fieldId:t,item:s,fieldSchema:i,value:o,assetsForPublish:l,jobStatus:d})):await (0,r.WB)().optimisticallyUpdate({CollectionItemField:{[t]:{value:o}}},a.hl.updateSingleItemData({collectionId:e,fieldId:t,item:s,fieldSchema:i,value:o,assetsForPublish:l,jobStatus:d})).then(e=>e.data.meta)}function d({collection:e,item:t}){(0,r.WB)().optimisticallyDelete({CollectionItemV2:{[t.databaseId]:null}},a.hl.deleteItem({collection:e,item:t})).then(e=>e.data.meta)}function c(e,t,n,i,r){return{itemId:e,fieldSchemaId:t,value:n,jobStatus:r??null,version:"0",createdAt:new Date,updatedAt:new Date,assetsForPublish:i??null,fieldSchema:{stableId:t}}}},515977:(e,t,n)=>{n.d(t,{WS:()=>m,ZX:()=>p,ut:()=>h});var i=n(74372),r=n(865702),a=n(955104),s=n(752746),o=n(390641),l=n(767473),d=n(46295),c=n(223487),u=n(605985);async function m(){let e=await navigator.clipboard.readText(),t=null;try{t=JSON.parse(e)}catch(e){return null}if(!t||!t.fileKey||!t.name||!t.fieldSchemas||!t.items)return null;for(let e of t.fieldSchemas)if(!e.name||!e.fieldType||!e.position)return null;for(let e of t.items)for(let t of e.fields)if(!t.fieldSchemaId)return null;return t}function p(){let e=(0,c.tS)();return async t=>{if(!e)return null;let n=await (0,o.X)({collectionStableId:t});if(null==n)return(0,d.AK)("items is collection",{collectionId:t}),null;let i=n.name,r=n.description,a=n.fieldSchemas.map(e=>({name:e.name,fieldType:e.fieldType,position:e.position,required:e.required,fieldSchemaId:e.id})),s=await (0,l.J)({collectionStableId:t});return null==s?((0,d.AK)("items is null",{collectionId:t}),null):JSON.stringify({name:i,description:r,fileKey:e,fieldSchemas:a,items:s.map(e=>{let t=[];for(let n of e.fields??[])t.push({fieldSchemaId:n.fieldSchemaId,value:n.value});return{position:e.position,fields:t}})})}}function h(){let e=(0,c.tS)(),t=(0,u.TA)();return async n=>{if(!e)return;let l=n.fieldSchemas.map(e=>({id:(0,i.g)(),name:e.name,fieldType:e.fieldType,required:!!e.required,position:e.position,properties:{},action:"create",version:"1"})),c=await (0,a.Qw)({id:null,name:n.name,description:n.description,fileKey:e,fields:l});if(null==c)return;let u=c.id,m=await (0,o.X)({collectionStableId:u});if(null==m){(0,d.AK)("newCollection is null",{newCollectionId:u});return}let p=m.fieldSchemas,h={};for(let e of p){let t=n.fieldSchemas.find(t=>t.name===e.name)?.fieldSchemaId;t&&(h[t]=e.id)}for(let e of n.items)(0,s.Tj)(m,void 0,[],t=>{for(let n of e.fields){let{value:e}=n;if(null==e){(0,d.AK)("Field value is null during import",{fieldSchemaId:n.fieldSchemaId});continue}let r=h[n.fieldSchemaId];if(null==r){(0,d.AK)("Field schema ID mapping not found during import",{fieldSchemaId:n.fieldSchemaId});continue}let a=m.fieldSchemas.find(e=>e.id===r);if(null==a){(0,d.AK)("Field schema not found during import",{newFieldSchemaId:r});continue}let o={databaseId:t};(0,s.yq)({fieldId:(0,i.g)(),shouldCreateField:!0,fieldSchema:a,item:o,value:e})}},e.position,r.lQ,t??void 0)}}},174572:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(105652);function r(e,t,n){i.useEffect(()=>{let i=i=>{let r=i.target;n&&!r.isConnected||e.current?.contains(r)||t()};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}})}},515217:(e,t,n)=>{n.d(t,{A:()=>K});var i=n(239976),r=n(105652),a=n(805242),s=n(20002),o=n(378721),l=n(536493),d=n(249563),c=n(254056),u=n(942356),m=n(177102),p=n(730436),h=n(919530),f=n(379141),g=n(270450),x=n(723850),_=n(393463),y=n(391596),b=n(7857),v=n(75962),C=n(585066),E=n(888903),w=n(176142),k=n(301849),T=n(964622),j=n(319565),S=n(811804),I=n(985791),A=n(865702),N=n(174572),M=n(690418),R=n(993423),P=n(227598);function O({libraryKey:e,items:t,setItems:n}){let[a,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),d=(0,r.useRef)(null),c=(0,r.useRef)(null);(0,N.L)(d,()=>{s(!1),m("")},!0);let[u,m]=(0,r.useState)(""),{result:p,isLoading:h}=(0,P.F)({searchTerm:u,libraryKey:e}),g=r.useMemo(()=>p.filter(e=>!t.some(t=>t.value===e.subtitle)).map(e=>({title:e.subtitle})),[p,t]),x=(e,i)=>{t.find(t=>t.value===e.title)||(n(t=>[...t,{value:e.title}]),l(i),m(""))};return(0,i.jsxs)("div",{ref:d,className:"github_directory_multiselect--container--9wlMK",children:[(0,i.jsx)("div",{className:"github_directory_multiselect--inputContainer--WApWt",children:(0,i.jsx)(M.i6,{items:t,maxItems:99,onAddItem:A.lQ,onClearItems:()=>n([]),onFocus:()=>s(!0),onKeyDown:e=>{if("ArrowDown"===e.key){if(o<g.length-1)return l(o+1),e.preventDefault(),!0}else if("ArrowUp"===e.key){if(o>0)return l(o-1),e.preventDefault(),!0}else if("Enter"===e.key)return x(g[o],o),e.preventDefault(),!0;else if("Escape"===e.key)return s(!1),l(0),e.currentTarget.blur(),e.preventDefault(),e.stopPropagation(),!0;return!1},onRemoveLastItem:e=>{n(t=>t.filter((t,n)=>n!==e))},onRequestPlaceholder:()=>0===t.length?(0,f.t)("dev_handoff.component_browser.github_settings.directory_input_placeholder"):"",onValueChange:e=>m(e),value:u})}),(0,i.jsx)(R.O,{ref:c,shouldBeVisible:a,isLoading:h,items:g,selectedIndex:o,onItemSelect:x})]})}let D="github_settings_modal--header--htUhu",L="github_settings_modal--headerImage--2hYqj",F="github_settings_modal--pageTitle--AAuD3",B="github_settings_modal--label--woiFw",U="github_settings_modal--checkbox--U1s0s",V="github_settings_modal--checkboxContainer--iJBiF",H="github_settings_modal--textContainer--2mNaF",z="github_settings_modal--icon--61YmG",G="github_settings_modal--inputContainer--ksjGb";function K({onClose:e,onBack:t,onSuccess:n,libraryKey:r,isInitialSetup:s=!1,isDirectorySelection:o=!1}){return(0,i.jsx)(b.u9,{label:"GitHubSettingsModalWithPortal",children:(0,a.createPortal)((0,i.jsx)("div",{className:"github_settings_modal--portal--aDXTd",children:(0,i.jsx)(W,{libraryKey:r,onClose:e,onBack:t,onSuccess:n,isInitialSetup:s,isDirectorySelection:o})}),document.body)})}function W({onClose:e,onBack:t,onSuccess:n,libraryKey:a,isInitialSetup:s=!1,isDirectorySelection:c=!1}){let[u,m]=(0,r.useState)(c),h=(0,T.OG)(a),g="dark"===(0,S.DP)(),x=(0,I.B)(a).unwrapOr(null),y=g?(0,_.ck)("b43ae367a8626405bff148b565f27a2c216474d8"):(0,_.ck)("6cf2ccf30dc4e0aa87883c3f3b15eaf223418950"),b=h?.availableRepositories.length??0,v=h?.selectedRepositories.length??!1,C=h&&h.availableRepositories.length>=100,E=r.useCallback(async()=>{await h?.refetch?.(),e?.()},[h,e]),w=(0,r.useMemo)(()=>s?(0,i.jsx)(q,{onClose:E,illustrationUrl:y}):u&&v?(0,i.jsx)(Z,{onClose:()=>{m(!1),n?.()},libraryKey:a}):b>1?(0,i.jsx)(X,{onClose:e,onSelected:()=>{m(!0)},libraryName:x??"",illustrationUrl:y,libraryKey:a,repositories:h}):1===b?(0,i.jsx)(J,{libraryName:x??"",illustrationUrl:y,libraryKey:a,repositories:h,onNext:()=>{m(!0)}}):(0,i.jsx)(Y,{illustrationUrl:y,onClose:e}),[E,y,s,u,h,a,x,e,n,b,v]);return(0,i.jsxs)("div",{className:"github_settings_modal--background--j39s-",children:[(0,i.jsx)("div",{className:"github_settings_modal--closeButton--LYLby",children:(0,i.jsx)(o.K,{"aria-label":(0,f.t)("dev_handoff.component_browser_onboarding.close"),onClick:t,children:(0,i.jsx)(p.X,{})})}),(0,i.jsxs)("div",{className:"github_settings_modal--contentContainer--xND5V",children:[(0,i.jsx)("div",{className:"github_settings_modal--content--8z9B9",children:(0,i.jsx)("div",{className:"github_settings_modal--githubContent--nPjlz",children:w})}),C&&(0,i.jsx)("div",{children:(0,i.jsx)(l.Cs,{variant:"brand",children:(0,i.jsx)(d.Q,{title:(0,f.t)("dev_handoff.component_browser_onboarding.github_repo_limit_banner_title",{repo_max_count:100}),children:(0,f.t)("dev_handoff.component_browser_onboarding.github_repo_limit_banner_body")})})})]})]})}function q({illustrationUrl:e,onClose:t}){let{setupGithub:n,isLoading:r}=(0,w.e)("component_browser",{alreadyConnectedCallback:t});return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)(v.oW,{src:e,alt:(0,f.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:L}),(0,i.jsx)("h1",{className:F,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_setup_title")})]}),(0,i.jsxs)("div",{className:"github_settings_modal--setupContent--pdQ6E",children:[(0,i.jsx)("div",{className:H,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_setup_description")}),(0,i.jsxs)("div",{className:V,children:[(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(h.g,{})}),(0,i.jsx)("span",{className:B,children:(0,f.tx)("dev_handoff.component_browser_onboarding.read_access_description",{read:(0,i.jsx)("strong",{children:(0,f.t)("dev_handoff.component_browser_onboarding.read")})})})]}),(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(h.g,{})}),(0,i.jsx)("span",{className:B,children:(0,f.tx)("dev_handoff.component_browser_onboarding.read_write_access_description",{read:(0,i.jsx)("strong",{children:(0,f.t)("dev_handoff.component_browser_onboarding.read")}),write:(0,i.jsx)("strong",{children:(0,f.t)("dev_handoff.component_browser_onboarding.write")})})})]})]}),(0,i.jsx)("div",{className:H,children:(0,f.tx)("dev_handoff.component_browser_onboarding.github_why",{learn_more_link:(0,i.jsx)(c.N,{href:`${(0,_.TJ)()}/docs/code-connect/code-connect-ui-setup/#connect-your-github-repository-optional`,newTab:!0,children:(0,f.t)("dev_handoff.component_browser_onboarding.learn_more")})})}),(0,i.jsx)("div",{className:H,children:(0,f.t)("dev_handoff.component_browser_onboarding.change_permissions")})]}),(0,i.jsxs)("div",{className:G,children:[(0,i.jsx)(u.Pw,{variant:"primary",onClick:n,disabled:r,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_connect_button")}),(0,i.jsx)(u.$n,{variant:"link",onClick:t,children:(0,f.t)("dev_handoff.component_browser_onboarding.go_back")})]})]})}function X({libraryName:e,illustrationUrl:t,libraryKey:n,repositories:a,onClose:s,onSelected:o}){let l=(0,r.useMemo)(()=>a?.selectedRepositories??[],[a?.selectedRepositories]),[d,c]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{l.length>0&&!d&&c(l[0]?.id)},[l,d]);let p=(0,y.n_)(j.XU),g=(0,r.useMemo)(()=>{let e=a?.availableRepositories.find(e=>e.id===d)?.name,t=l[0]?.name;return e??t??(0,f.t)("dev_handoff.component_browser_onboarding.github_select_repository")},[a?.availableRepositories,d,l]),x=async()=>{await p.mutate({libraryKey:n,repositoryIds:[d]}),o?.()};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)(v.oW,{src:t,alt:(0,f.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:L}),(0,i.jsx)("h1",{className:F,children:(0,f.tx)("dev_handoff.component_browser_onboarding.github_repository_selection",{library_name:e??""})})]}),(0,i.jsxs)("div",{className:V,children:[(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(h.g,{})}),(0,i.jsx)("span",{className:B,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_can_revoke_access")})]}),(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(h.g,{})}),(0,i.jsx)("span",{className:B,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_issues_access")})]})]}),(0,i.jsxs)("div",{className:G,children:[(0,i.jsxs)(m.Root,{onChange:c,value:d,children:[(0,i.jsx)(m.ManuallyLabeledTrigger,{id:"github-repo-select",placeholder:(0,f.t)("dev_handoff.component_browser_onboarding.github_select_repository"),width:"fill",size:"lg",children:(0,i.jsx)("span",{className:"github_settings_modal--select--kU-mW",children:g})}),(0,i.jsx)(m.Container,{children:a?.availableRepositories?.map(e=>i.jsx(m.Option,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(u.Pw,{variant:"primary",disabled:!d||p.isLoading,onClick:x,children:(0,f.t)("dev_handoff.component_browser_onboarding.continue_button")}),(0,i.jsx)(u.$n,{variant:"link",onClick:s,children:(0,f.t)("dev_handoff.component_browser_onboarding.cancel")})]})]})}function Y({illustrationUrl:e,onClose:t}){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)(v.oW,{src:e,alt:(0,f.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:L}),(0,i.jsx)("h1",{className:F,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_connected_no_repos_title")}),(0,i.jsx)("h2",{className:"github_settings_modal--pageSubtitle--lJ6jX",children:(0,f.t)("dev_handoff.component_browser_onboarding.github_connected_no_repos_description")})]}),(0,i.jsx)("div",{className:"github_settings_modal--buttonSection--A9TJp",children:(0,i.jsxs)("div",{className:G,children:[(0,i.jsx)(c.N.Button,{variant:"primary",size:"lg",width:"fill",href:"https://github.com/new",newTab:!0,onClick:t,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_go_to_github")}),(0,i.jsx)(u.$n,{variant:"link",onClick:t,children:(0,f.t)("dev_handoff.component_browser_onboarding.cancel")})]})})]})}function J({libraryName:e,illustrationUrl:t,libraryKey:n,repositories:r,onNext:a}){let s=(0,y.n_)(j.XU),o=r?.availableRepositories[0];return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)(v.oW,{src:t,alt:(0,f.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:L}),(0,i.jsx)("span",{className:F,children:(0,f.tx)("dev_handoff.component_browser_onboarding.github_connection_success",{library_name:e,repository_name:o?.name??"GitHub"})})]}),(0,i.jsxs)("div",{className:V,children:[(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(h.g,{})}),(0,i.jsx)("span",{className:B,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_can_revoke_access")})]}),(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(h.g,{})}),(0,i.jsx)("span",{className:B,children:(0,f.t)("dev_handoff.component_browser_onboarding.github_issues_access")})]})]}),(0,i.jsx)("div",{className:G,children:(0,i.jsx)(u.Pw,{variant:"primary",onClick:()=>{s.mutate({libraryKey:n,repositoryIds:o?[o.id]:[]}),a?.()},children:(0,f.t)("dev_handoff.component_browser_onboarding.continue_button")})})]})}function Z({onClose:e,libraryKey:t}){let[n,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),d=(0,T.OG)(t),c=d?.selectedRepositories[0]?.id,m=(0,x.hC)(),{directories:p,isLoading:h,errors:_}=(0,k.v)({libraryKey:t,repositoryId:c||""},{enabled:!!c}),y=(0,s.wA)(),b=(0,r.useMemo)(()=>JSON.stringify(n)!==JSON.stringify(p.map(e=>({value:e}))),[n,p]);(0,r.useEffect)(()=>{_&&_.length>0&&y(E.F.enqueue({message:(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_error"),error:!0}))},[_,y]);let v=(0,k.L)();(0,r.useEffect)(()=>{p.length>0&&a(p.map(e=>({value:e})))},[p]);let w=async()=>{if(c)try{let i=n.map(e=>e.value);l(!0),await v({libraryKey:t,repositoryId:c,directories:i}),e()}catch(e){y(E.F.enqueue({message:e.message,error:!0}))}finally{l(!1)}};return(0,i.jsxs)("div",{className:"github_settings_modal--directoryContainer--aT2oO",children:[(0,i.jsx)("h2",{className:F,children:(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_title")}),(0,i.jsxs)("div",{className:"github_settings_modal--directoryContent--7HD3k",children:[(0,i.jsx)("p",{className:"github_settings_modal--directoryDescriptionText--ACehd",children:(0,g.kc)().dt_mcp_include_codebase_context?(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_description_with_mcp"):(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_description")}),(0,i.jsx)("div",{className:"github_settings_modal--directoryInputSection--47xyq",children:h?(0,i.jsx)("div",{className:"github_settings_modal--directorySpinnerWrapper--0e8qe",children:(0,i.jsx)(C.k,{})}):(0,i.jsx)(O,{libraryKey:t,items:n,setItems:a})}),(0,i.jsxs)("div",{className:"github_settings_modal--directoryButtonContainer--oDfAu",children:[(0,i.jsx)(u.Pw,{variant:"primary",disabled:h||o||!b,onClick:w,children:p.length>0?(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_update"):(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_connect")}),(0,i.jsx)(u.Pw,{variant:"secondary",onClick:()=>{m("component_browser.directory_picker_skipped"),e()},disabled:o,children:(0,f.t)("dev_handoff.component_browser_onboarding.directory_selection_skip")})]})]})]})}},301849:(e,t,n)=>{n.d(t,{L:()=>s,v:()=>a});var i=n(391596),r=n(587420);function a({libraryKey:e,repositoryId:t},n){let a=!!(e&&t&&""!==t.trim()),s=(n?.enabled??!0)&&a,[o]=(0,i.IT)((0,r.iW)({libraryKey:e,repositoryId:t}),{enabled:s});return{directories:o.data?.directories??[],hasLoaded:"loaded"===o.status,isLoading:"loading"===o.status,errors:o.errors}}function s(){return(0,i.gY)(r.l_)}},366200:(e,t,n)=>{n.d(t,{w:()=>r});var i=n(105652);function r(e){let t=(0,i.useRef)(e);return(0,i.useEffect)(()=>{t.current=e},[e]),t}},587420:(e,t,n)=>{n.d(t,{Mo:()=>h,GD:()=>m,wP:()=>f,t2:()=>u,iW:()=>p,YU:()=>k,BR:()=>w,LO:()=>b,RL:()=>g,_E:()=>v,S6:()=>y,cQ:()=>E,l_:()=>C,K5:()=>x,QA:()=>_}),n(105652),n(207474),n(582300);var i=n(270450);n(391596);var r=n(319565);async function a(e){await new Promise(e=>setTimeout(e,500));let t={};return e.assets.forEach(e=>{t[e.key]=Array.from({length:5}).map((t,n)=>({codebase_component_id:`mock-component-id-${n+1}`,thumbnail_url:`https://example.com/thumbnail${n+1}.png`,name:`MockComponent${n+1}`,src_path:`src/components/MockComponent${n+1}.tsx`,scanned_at:new Date().toISOString(),confidence_level:0===n?"high":"low",score:.95-.1*n,tracking_query_id:`mock-tracking-query-id-${e.key}`}))}),{results:t}}n(420248);var s=n(538349);n(790016),n(421564);var o=n(865420),l=n(729059),d=n(766274);let c=new class{constructor(){this.SearchCodeSuggestionsSchemaValidator=(0,d.vh)(),this.SearchBulkCodeSuggestionsSchemaValidator=(0,d.vh)()}searchCodeSuggestions(e){return this.SearchCodeSuggestionsSchemaValidator.validate(async({xr:t})=>await t.post("/api/search/code_suggestions",d.td.toAPIParameters(e)))}searchBulkCodeSuggestions(e){return this.SearchBulkCodeSuggestionsSchemaValidator.validate(async({xr:t})=>await t.post("/api/search/code_suggestions_bulk",d.td.toAPIParameters(e)))}},u=s.M4.Query({fetch:async e=>(await o.Q.getLibraryPublishedComponentsWithCodeConnect({libraryKey:e})).data.meta,key:"libraryPublishedComponentsCodeConnect"}),m=s.M4.Query({fetch:async e=>(await o.Q.getInContextPublishedComponents(e)).data.meta,key:"inContextPublishedComponentsCodeConnect"}),p=s.M4.Query({fetch:async e=>(await o.Q.getRepositoryDirectories(e)).data.meta,key:"repositoryDirectories"}),h=s.M4.Query({fetch:async e=>({...(0,i.kc)().dt_ccv2_dd?await a(e):(await c.searchBulkCodeSuggestions(e)).data.meta,requestParams:e}),key:"bulkSuggestions"}),f=s.M4.Query({fetch:async e=>(await o.Q.getLibraryIngestionStatus({libraryKey:e})).data.meta,key:"libraryIngestionStatus"}),g=(s.M4.Query({fetch:async e=>(await l.$W.getCodeSuggestions(e)).data.meta.results}),s.M4.Mutation(e=>o.Q.createCodeConnectMap(e))),x=s.M4.Mutation(async e=>{await o.Q.updateCodeConnectMap(e)}),_=s.M4.Mutation(async e=>{await o.Q.updateCodeConnectUserRules(e)}),y=s.M4.Mutation(async e=>{await o.Q.deleteCodeConnectMap(e)}),b=s.M4.Mutation(e=>o.Q.createCodeConnectBulkMap(e)),v=s.M4.Mutation(async e=>{await o.Q.deleteCodeConnectBulkMap(e)}),C=s.M4.Mutation(async({libraryKey:e,repositoryId:t,directories:n},{query:i})=>{let r=await o.Q.setRepositoryDirectories({libraryKey:e,repositoryId:t,directories:n});return i.mutate(p({libraryKey:e,repositoryId:t}),()=>({directories:n})),r.data.meta}),E=s.M4.Mutation(async({libraryKey:e,repositoryId:t},{query:n})=>{n.mutate((0,r.sN)(e),e=>e?{...e,selectedRepositories:e.selectedRepositories.filter(e=>e.id!==t)}:e),n.mutate(p({libraryKey:e,repositoryId:t}),()=>({directories:[]}));let i=await o.Q.deleteLibraryRepository({libraryKey:e,repositoryId:t});return await n.refetch((0,r.sN)(e)),i.data.meta}),w=s.M4.Query({fetch:async e=>(await o.Q.getCodeSnippet(e)).data.meta}),k=s.M4.Query({fetch:async e=>(await o.Q.getBatchLibrariesRepositories(e)).data.meta})},690418:(e,t,n)=>{n.d(t,{i6:()=>f,l6:()=>y,ls:()=>_});var i=n(239976),r=n(105652),a=n(865702),s=n(378721),o=n(943360),l=n(402731),d=n(382367),c=n(379141),u=n(224542),m=n.n(u),p=n(437575),h=n(158775);let f=(0,r.forwardRef)((e,t)=>{let{items:n,readonly:r,disabled:s,onRemoveLastItem:o,isSuggestion:l,...d}=e;return(0,i.jsxs)("div",{className:m()(h.iE,h.E5),children:[n.map((e,t)=>(0,i.jsx)(g,{items:[e],maxItems:1,readonly:r,disabled:s,onClear:()=>o(t),isSuggestion:l},e.value)),!r&&(0,i.jsx)(x,{ref:t,items:[],maxItems:1,onRemoveLastItem:a.lQ,...d})]})});function g({items:e,maxItems:t,readonly:n,disabled:a,onClear:o,isSuggestion:u}){return(0,i.jsxs)("div",{className:m()(h.jw,h.ld,{[h.Ie]:0===e.length,[h.$x]:e.length<t&&!n,[h.r9]:a,[h.tB]:n}),...(0,p.f$)({filepath:e[0]?.value,componentName:e[1]?.value,isSuggestion:u??!1}),children:[e.map((a,s)=>{let o=s<e.length&&s<t-1&&!n||s<e.length-1&&n,d=0===s&&e&&e[0]&&"string"==typeof e[0].value&&e[0].value.length>10?65:0;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("div",{className:h.uE,style:{minWidth:d},children:a.value}),o&&(0,i.jsx)(l.k,{className:h.ai})]},s)}),e.length===t&&!n&&(0,i.jsx)(s.K,{"aria-label":(0,c.t)("dev_handoff.component_browser.clear_input"),onClick:o,children:(0,i.jsx)(d.f,{})})]})}let x=(0,r.forwardRef)(({children:e,maxItems:t=1,disabled:n=!1,onAddItem:r,onRemoveLastItem:a,onClearItems:o,onMaxItemsReached:l,items:u,value:p,onValueChange:f,onRequestPlaceholder:g,onFocus:x,onBlur:_,onKeyDown:y,readonly:b=!1},v)=>{let C=u.length>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:m()(h.jw,h.I6,{[h.Ie]:!C,[h.T9]:u.length>=t,[h.r9]:n}),children:[(0,i.jsx)("input",{ref:v,className:m()(h.hF,{[h.Ie]:!C,[h.T9]:u.length>=t||b}),disabled:n,onBlur:_,onChange:e=>{n||u.length>=t||f(e.target.value)},onFocus:x,onKeyDown:e=>{if(!(n||y(e)))switch(e.key){case"Enter":if(u.length>=t){l?.();return}r({value:p},u.length),e.preventDefault();break;case"Backspace":0===p.length&&u.length>0&&(a(u.length-1),e.preventDefault())}},placeholder:g(u.length),readOnly:b,type:"text",value:p}),C&&u.length<t&&!b&&(0,i.jsx)(s.K,{"aria-label":(0,c.t)("dev_handoff.component_browser.clear_input"),onClick:()=>o(),children:(0,i.jsx)(d.f,{})})]}),(0,i.jsx)("div",{className:m()(h.UD,{[h.Bq]:C}),children:e})]})}),_=(0,r.forwardRef)((e,t)=>{let{maxItems:n=1,disabled:r=!1,onClearItems:a,items:s,readonly:o=!1,isSuggestion:l}=e;return(0,i.jsxs)("div",{className:m()(h.iE,{[h.r9]:r,[h.tB]:o}),children:[s.length>0&&(0,i.jsx)(g,{items:s,maxItems:n,readonly:o,disabled:r,onClear:()=>a(),isSuggestion:l}),!o&&(0,i.jsx)(x,{ref:t,...e})]})});function y({items:e,icon:t,onClick:n,tooltipProps:a,emptyMessage:s,isSuggestion:d}){let c=(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(t,{}),e.length>0?e.map((t,n)=>(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("div",{className:h.uE,children:t}),n!==e.length-1&&(0,i.jsx)("div",{className:h.ai,children:(0,i.jsx)(l.k,{})})]},n)):s?(0,i.jsx)("div",{className:h.uE,children:s}):null]}),u={className:m()(h.jw,h.tB,{[h.h]:d}),...a};return n?(0,i.jsx)(o.E,{...u,onClick:n,children:c}):(0,i.jsx)("div",{...u,children:c})}},993423:(e,t,n)=>{n.d(t,{O:()=>m});var i=n(239976),r=n(105652),a=n(805242),s=n(943360),o=n(224542),l=n.n(o),d=n(585066),c=n(324880);let u="component_browser_input_dropdown--inputText--gXOKv",m=(0,r.forwardRef)(function({shouldBeVisible:e,items:t,onItemSelect:n,selectedIndex:o,isLoading:m,portal:p=!1,inputRef:h},f){let g=(0,r.useRef)(null),[x,_]=(0,r.useState)(null);if((0,r.useEffect)(()=>{if(p&&e&&h){if(h){let e=h.getBoundingClientRect();_({top:e.bottom+window.scrollY+8,left:e.left+window.scrollX-4,width:e.width+8})}}else p||_(null)},[p,e,h]),(0,r.useEffect)(()=>{g.current&&f&&"object"==typeof f&&f.current&&g.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[o,f]),!e||0===t.length&&!m)return null;let y=(0,i.jsx)("div",{className:l()("component_browser_input_dropdown--container--fKV1z",{"component_browser_input_dropdown--portalHidden--Gzqo0":p&&!x,[c.Qx]:p}),style:p&&x?{position:"fixed",top:`${x.top}px`,left:`${x.left}px`,width:`${x.width}px`,zIndex:1e3}:void 0,children:m?(0,i.jsx)("li",{className:"component_browser_input_dropdown--loading--jAbz1",children:(0,i.jsx)(d.k,{})}):(0,i.jsx)("ul",{ref:f,className:"component_browser_input_dropdown--list--v6RPR",children:t.map((e,t)=>(0,i.jsx)("li",{ref:t===o?g:null,children:(0,i.jsx)(s.E,{className:l()("component_browser_input_dropdown--item--RI3WJ",{"component_browser_input_dropdown--selected--dsgX0":t===o}),onClick:()=>n(e,t),children:(0,i.jsxs)("div",{className:"component_browser_input_dropdown--content--UOBnb",children:[(0,i.jsx)("div",{className:l()("component_browser_input_dropdown--title--c0NS6",u),children:e.title}),e.subtitle&&(0,i.jsx)("div",{className:l()("component_browser_input_dropdown--subtitle--8Wf6k",u),children:e.subtitle})]})})},t))})});return p?(0,a.createPortal)(y,document.body):y})},227598:(e,t,n)=>{n.d(t,{F:()=>u,I:()=>c});var i=n(105652),r=n(714315),a=n(391596),s=n(964622),o=n(319565);function l(e,t,n,i){return""===t?e.sort((e,t)=>e.name.localeCompare(t.name)).slice(0,20).map(e=>({title:e.name,subtitle:e.path,metadata:i(e)})):(0,r.$P)(t,e,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:i(e)})).slice(0,20)}function d({searchTerm:e,libraryKey:t,filterToSelectedRepoDirectories:n}){let r=(0,s.OG)(t),l=r?.selectedRepositories?.[0],[d]=(0,a.IT)((0,o.Tp)({libraryKey:t,repository:l?.id??"",filterToSelectedRepoDirectories:n}),{enabled:!!t&&r?.status===s.w6.Connected,key:"repositorySourceFilesQuery"});return{sourceFilesQuery:d,filePathToSearch:(0,i.useMemo)(()=>(function(e){let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e??""}let n=e.replace(/^https?:\/\//,"");return/^[a-zA-Z0-9\-_./\\]+$/.test(n)?n:""})(e),[e]),defaultRepository:l}}function c({searchTerm:e,libraryKey:t,suggestions:n}){let{sourceFilesQuery:r,filePathToSearch:a,defaultRepository:s}=d({searchTerm:e,libraryKey:t,filterToSelectedRepoDirectories:!0});return{result:(0,i.useMemo)(()=>{if(!r.data)return[];let t=l(r.data,a,s,e=>({isCustomLink:!1,repository:{id:s?.id??"",name:s?.name??""},path:e.path,name:e.name,sha:e.sha,type:e.type}));if(e||!n)return t;let i=new Set,o=[];return n.forEach(e=>{i.has(e.src_path)||(i.add(e.src_path),o.push({title:e.src_path.split("/").pop()||"",subtitle:e.src_path,metadata:{isCustomLink:!1,repository:{id:s?.id??"",name:s?.name??""},path:e.src_path}}))}),[...o,...t.filter(e=>!i.has(e.subtitle??""))]},[r.data,a,s,e,n]),isLoading:"loading"===r.status}}function u({searchTerm:e,libraryKey:t}){let{sourceFilesQuery:n,filePathToSearch:r,defaultRepository:a}=d({searchTerm:e,libraryKey:t});return{result:(0,i.useMemo)(()=>n.data?l(function(e){let t=new Set;return e.forEach(e=>{let n=e.path.split("/");for(let e=1;e<n.length;e++){let i=n.slice(0,e).join("/");t.add(i)}}),Array.from(t).map(e=>({path:e,name:e.split("/").pop()||e}))}(n.data),r,a,e=>({isCustomLink:!1,repository:{id:a?.id??"",name:a?.name??""},path:e.path,name:e.name,sha:"",type:"directory"})):[],[n.data,r,a]),isLoading:"loading"===n.status}}},437575:(e,t,n)=>{n.d(t,{kf:()=>c,Av:()=>u,f$:()=>m});var i=n(239976),r=n(379141),a=n(145652);let s="component_browser_component_tooltip--label--syoU8",o=(0,a.ex)("component_browser_component_tooltip",function(e){return(0,i.jsxs)("div",{className:"component_browser_component_tooltip--container--Gwy7T",children:[e.componentName&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:s,children:e.isSuggestion?(0,r.t)("dev_handoff.component_browser.component_name_suggested_tooltip"):(0,r.t)("dev_handoff.component_browser.component_name_tooltip")}),(0,i.jsx)("div",{children:e.componentName})]}),e.filepath&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:s,children:(0,r.t)("dev_handoff.component_browser.component_filepath_tooltip")}),(0,i.jsx)("div",{children:e.filepath})]})]})},e=>({componentName:e.getAttribute("data-tooltip-componentName")||void 0,filepath:e.getAttribute("data-tooltip-filepath")||void 0,isSuggestion:"true"===e.getAttribute("data-tooltip-suggestion")}));var l=n(421564),d=n(236410);function c(e,t){let n=new Set;for(let i of e)t.has(i)&&n.add(i);return Array.from(n)}function u(e){return e.type===l.PW.COMPONENT?e.component_key:e.key}function m({componentName:e,filepath:t,isSuggestion:n}){return t||e?{"data-tooltip-type":d.Ib.SPECIAL,"data-tooltip":o,"data-tooltip-componentName":e,"data-tooltip-filepath":t,"data-tooltip-suggestion":n}:{}}},420248:(e,t,n)=>{n.d(t,{a:()=>r});var i=n(74372);function r(){return(0,i.g)()}},616635:(e,t,n)=>{n.d(t,{o:()=>S});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(379141),l=n(102462),d=n(844268),c=n(204479),u=n(960210),m=n(526575),p=n(776888),h=n(948629),f=n(223487),g=n(656395),x=n(579263),_=n(665933),y=n(906401),b=n(129865),v=n(474538),C=n(311030),E=n(654590),w=n(320681),k=n(359187),T=n(598066),j=n(285972);function S(){let e=(0,T.l7)(),t=(0,d.F)(e),n=(0,_.n0)(),S=(0,E.K)(),I=(0,f.tS)(),{height:A,setHeight:N,isOpen:M,setIsOpen:R,devHandoffShowAllPages:P,setDevHandoffShowAllPages:O}=(0,w.d)({defaultIsOpen:n.length>1}),D=(0,d.F)(M);(0,r.useLayoutEffect)(()=>{e&&R(!0)},[e,R]);let L=(0,a.Pj)(),F=r.useCallback(()=>{if(t.current)return;let e=!D.current;(0,m.ds)("pages_panel_open_toggle",I,L.getState(),{isPagesOpen:e},{forwardToDatadog:!0}),R(e)},[I,D,R,t,L]),{pagesToDisplay:B,showAllButton:U}=function({pagesList:e,showAll:t,setShowAll:n}){let r=(0,u._I)(),a=(0,p.dh)();if(!r)return{pagesToDisplay:e};let l=!1,d=e.filter(e=>{let t=s.glU.nodeStatusesOnPage(e.nodeId).length>0;return t&&(l=!0),t||e.nodeId===a});return l&&d.length!==e.length?t?{pagesToDisplay:e,showAllButton:(0,i.jsx)(c.d,{label:(0,o.t)("dev_handoff.pages.hide_other"),onClick:()=>n(!1)})}:{pagesToDisplay:d,showAllButton:(0,i.jsx)(c.d,{label:(0,o.t)("dev_handoff.pages.show_all"),onClick:()=>n(!0)})}:{pagesToDisplay:e}}({pagesList:n,showAll:P,setShowAll:O}),V=!(0,h.T)(),H=e?y.uF:y.uF+72+32,z=(0,_._4)(),G=(0,a.wA)(),K=(0,r.useCallback)(()=>{(0,k._$)(G,l.D.getState().selectedView,"overview_search_clicked"),z()},[G,z]),W=(0,x.HY)();return(0,i.jsxs)(b.A,{isFullHeight:!1,children:[(0,i.jsx)(j.$,{devFocusedOnboarding:!0}),I&&(0,i.jsx)(g.QU,{fileKey:I}),(0,i.jsx)(C.R,{extraControls:(0,i.jsx)("div",{className:"dev_handoff_page_selector--showMoreContainer--SZHI8",children:U}),filterState:P?v.m.ALL:v.m.FILTERED,height:A,isOpen:M,isReadOnly:!0,onCanvasSearch:W?void 0:K,onHeightChange:N,onPageContextMenu:S,onToggle:F,pages:B,panelHeadersHeight:H,shouldHighlightActivePage:!e,showHeader:V})]})}},214175:(e,t,n)=>{n.d(t,{Xn:()=>v,dU:()=>E,xY:()=>C});var i=n(105652),r=n(20002),a=n(445019),s=n(158053),o=n(522568),l=n(443389),d=n(723850),c=n(187445),u=n(652154),m=n(507323),p=n(536378),h=n(421914),f=n(384203),g=n(223487),x=n(605985),_=n(456556),y=n(940106),b=n(5042);function v(e){let t=(0,u.uQ)(),{backingSymbolGUID:n}=(0,b.$)([e??""]),a=i.useMemo(()=>null===n||(0,h.gl)(n)?null:n,[n]),s=(0,r.wA)();return i.useCallback(()=>{e&&a&&(l.sn.reset("dev_handoff.view_history",e),l.sn.start("dev_handoff.view_history",{key:e}),(0,o.sx)("Diff Modal Compare Changes Clicked",{nodeId:e,mainComponentNodeId:a,origin:"cc_overrides"}),s(p.to({type:y.ku,data:{changeNodeId:e,basisNodeId:a,initialSelectedNodeId:t&&t!==e?t:void 0,isComparingOverrides:!0}})))},[s,t,e,a])}function C(e){let t=(0,c.wS)(),n=(0,u.uQ)(),a=(0,r.wA)(),s=(0,d.U)();return i.useCallback(()=>{n&&"loaded"===t.status&&(s("Diff Modal Compare Changes Clicked",{nodeId:n,origin:"cc_detached_component"}),l.sn.reset("dev_handoff.view_history",n),l.sn.start("dev_handoff.view_history",{key:n}),a(p.to({type:y.jo,data:{nodeId:n,detachedInfoStatus:t,origin:e}})))},[n,t,s,a,e])}function E(e,t){let n=x.iZ()?.id,d=(0,u.uQ)(),c=(0,_.Fk)((e,t)=>e?.get(t??"")?.name.trim(),d),h=(0,g.tS)(),b=(0,r.wA)(),v=(0,a.md)(m.d),C=(0,f.eY)();return i.useCallback(()=>{if(l.sn.reset("dev_handoff.view_history",e||void 0),l.sn.start("dev_handoff.view_history",{key:e||void 0}),(0,o.sx)("Diff Modal Compare Changes Clicked",{userId:n,fileKey:h,frameId:e,entrypoint:"lego_layer",analyticsEventOrigin:t}),e){let t=(0,s.BJ)(C,e,!0);if(t){let n=t.lastEditedAt;v[e]=new Date(n),a.zl.set(m.d,{...v})}}b(p.to({type:y.EH,data:{nodeId:e,layerName:c}}))},[t,b,h,e,c,C,v,n])}},187445:(e,t,n)=>{n.d(t,{Bv:()=>j,g$:()=>A,iX:()=>I,si:()=>k,wS:()=>T,x9:()=>S});var i=n(239976),r=n(105652),a=n(20002),s=n(207474),o=n(692376),l=n(854225),d=n(2227),c=n(466082);n(379141);var u=n(391596),m=n(28083);n(421914);var p=n(384203),h=n(223487),f=n(538349),g=n(456556),x=n(563567),_=n(880197);n(695874);var y=n(910312);n(221274);var b=n(766697);n(792793);var v=n(652154);let C=f.M4.Query({fetch:async({componentKey:e})=>{try{let t=await x.Z.getLibraryComponentV2Destination({componentKey:e});if(!t||!t.data||!t.data.meta)return null;return{nodeId:t.data.meta.node_id,fileKey:t.data.meta.file_key,component:t.data.meta.component,componentSet:t.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),E=f.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let t=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,i=e.dataStorageKey,r=await m.Eo.getCanvas({canvas_url:e.canvasUrl});if(!r)return{};let a=o.glU.loadDetachedComponent(t??"",i,r,n);return a?{result:{...e,dataLocation:"temp-scene",dataComponentId:a}}:{}},enabled:e=>e.enabled}),w=r.createContext({status:"loading"});function k({children:e}){let t=function(e){let t=(0,a.d4)(h.sS),n=(0,h._G)(),i=(0,g.Fk)((e,t)=>{let n=e?.get(t??"");return n?.type==="SYMBOL"||n?.type==="INSTANCE"?void 0:n?.detachedInfo},e),l=!!i,c=!!i?.componentKey,m=c?{componentKey:(0,s.sg)(i.componentKey),enabled:!0}:{componentKey:(0,s.sg)(""),enabled:!1},[p]=(0,u.IT)(C(m)),f=p?.data,x=l&&c&&"loaded"===p.status&&f&&f.component,_=f?.nodeId??d.AD,y=f?.fileKey??"",b=y!==t,v=f?.component,w=f?.componentSet,k=v?.component_key??i?.componentKey??"",T=w?.key??k??"",j=!!i?.isVariant||!!f?.componentSet,S=b?o.w3z.getGuidByComponentKey(T,k):{nodeId:f?.nodeId,parentId:w?w.node_id??d.AD:d.AD,inDetachedComponentsScene:!1},I=x&&b&&S?.nodeId===d.AD,A={nodeId:_,fileKey:y,libraryKey:v?.library_key,componentKey:k,isVariant:j,isExternal:b,thumbnailUrl:v?.thumbnail_url,descriptionComponent:v?.description_rt??v?.description,descriptionStateGroup:w?.description_rt??w?.description,dataLocation:I||S?.inDetachedComponentsScene?"temp-scene":"scene",dataComponentId:I?v?.node_id??"":S.nodeId??"",dataStateGroupId:I?w?.node_id:S.parentId,dataStorageKey:T,canvasUrl:j?w?.canvas_url:v?.canvas_url},N=I&&A&&A.canvasUrl?{statusResult:A,enabled:!0}:{enabled:!1},[M]=(0,u.IT)(E(N));return r.useMemo(()=>l?c?"errors"===p.status||I&&"errors"===M.status?{status:"errors"}:x?{status:I?"downloading":"loaded",result:A}:"loaded"!==p.status||f&&f.component?{status:"loading"}:{status:"disabled"}:{status:"loaded",result:{nodeId:i.symbolId,fileKey:t||"",libraryKey:n,isVariant:j,dataLocation:"scene",dataComponentId:i.symbolId,dataStorageKey:"",isExternal:!1,componentKey:i.componentKey}}:{status:"disabled"},[l,i?.symbolId,i?.componentKey,j,t,c,p.status,I,M.status,f,x])}((0,v.uQ)());return(0,i.jsx)(w.Provider,{value:t,children:e})}function T(){return r.useContext(w)||{status:"errors"}}function j(e,t){let n=T();return function(e,t){if("loaded"===t.status){let n="temp-scene"===t.result.dataLocation,i=t.result.dataComponentId??"",r=n?t.result.dataStateGroupId:(0,_.Yi)([i],e)??(0,y.nM)(e,[i]),a=n?S(i):e.get(i);return t.result.isVariant&&r?{backingSymbol:a,backingStateGroup:n?S(r):e.get(r)}:{backingSymbol:a,backingStateGroup:null}}}((0,p.eY)(),n)||{backingSymbol:e,backingStateGroup:t}}function S(e){return new c.qo(l.juq.DETACHED_COMPONENTS).get(e)}function I(e,t){let n=T();return{backingSymbolDescription:("loaded"===n.status&&n.result.isExternal&&n.result.descriptionComponent?n.result.descriptionComponent:void 0)??e,parentDescription:("loaded"===n.status&&n.result.isExternal&&n.result.descriptionStateGroup?n.result.descriptionStateGroup:void 0)??t}}function A(){let e=(0,p.eY)(),t=T(),[n,i]=(0,b.Bx)();if("loaded"===t.status){let n=t.result.dataComponentId,i=t.result.dataStateGroupId;return"temp-scene"===t.result.dataLocation?[S(n),i?S(i):null]:[e.get(n),i?e.get(i):null]}return[n,i]}},877472:(e,t,n)=>{n.d(t,{p:()=>_});var i=n(239976),r=n(105652),a=n(378721),s=n(942356),o=n(109307),l=n(861266),d=n(543605),c=n(379141),u=n(960210),m=n(628051),p=n(741400),h=n(1007),f=n(605985),g=n(456556),x=n(236410);function _({nodeId:e,sourceForLogging:t,onboardingKey:n,isMinimal:_}){let y=(0,f.TA)(),b=(0,m.D)(),v=(0,u._I)(),C=(0,u.xo)(),E=(0,h.QU)({subscribeToUpdates_expensive:!0}),{hasReadyStatus:w,hasCompletedStatus:k,hasStatus:T,canHaveStatus:j,nestedLayerPreventsStatus:S,lastStatusChangeUserId:I}=(0,g.Fk)((e,t)=>{let n=e?.get(t??""),i=n?.canHaveStatus,r=n?.canHaveStatusBasedOnType;return{hasReadyStatus:n?.hasReadyStatus,hasCompletedStatus:n?.hasCompletedStatus,hasStatus:n?.hasStatus,canHaveStatus:i,nestedLayerPreventsStatus:!i&&r,lastStatusChangeUserId:n?.getStatusInfo()?.userId}},e),A=b&&v&&!C&&j,N=r.useRef(T),[M,R]=r.useState(!1);r.useEffect(()=>{T&&R(!1),N.current&&!T&&I!==y&&R(!0)},[T,I,y]);let P=r.useCallback(()=>{A&&e&&p.z4.setNodesCompleted([e],`${t}-complete-button`)},[A,e,t]),O=r.useCallback(()=>{A&&e&&p.z4.setNodesReady(!0,[e],`${t}-complete-button`,null)},[A,e,t]),D=!k&&!w&&!M,L=r.useMemo(()=>w?P:k||D?O:void 0,[k,w,P,O,D]),F=r.useMemo(()=>k?(0,c.tx)("dev_handoff.status.completed"):D?(0,c.tx)("dev_handoff.status.mark_as_ready_for_first_time"):(0,c.tx)("dev_handoff.status.mark_completed"),[k,D]),B=r.useMemo(()=>k?(0,i.jsx)(o.g,{"data-testid":"filled-icon"}):T?(0,i.jsx)(l.W,{"data-testid":"empty-icon"}):(0,i.jsx)(d.l,{"data-testid":"rfd-icon"}),[k,T]),U=r.useMemo(()=>w?(0,c.t)("dev_handoff.status.mark_as_completed"):k?(0,c.t)("dev_handoff.status.mark_as_ready"):D?(0,c.t)("dev_handoff.status.mark_as_ready_for_first_time"):(0,c.t)("dev_handoff.workflows.focus_view.complete_button.status_removed"),[k,w,D]),V=r.useMemo(()=>S?(0,c.t)("dev_handoff.overview_mode.tooltip.design_structure_prevents_status"):j?w?(0,c.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"):k?(0,c.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_incomplete"):D?(0,c.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_ready"):(0,c.t)("dev_handoff.workflows.focus_view.complete_button.status_removed"):(0,c.t)("dev_handoff.overview_mode.tooltip.layer_cannot_have_status"),[k,w,D,S,j]);if(!e)return null;if(_)return w||k?(0,i.jsx)(a.K,{onClick:L,disabled:!A,"aria-label":U,"data-tooltip-type":x.Ib.TEXT,"data-tooltip":A?U:V,"data-testid":"change-status-icon-button",children:B}):null;let H=!A||M;return E<700?(0,i.jsx)(a.K,{onClick:L,disabled:H,"aria-label":U,"data-tooltip-type":x.Ib.TEXT,"data-tooltip":H?V:U,"data-testid":"change-status-button",children:B}):(0,i.jsx)(s.$n,{"aria-label":U,"data-onboarding-key":n,"data-testid":"change-status-button","data-tooltip":H?V:void 0,"data-tooltip-text-left":!0,"data-tooltip-type":x.Ib.TEXT,disabled:H,iconPrefix:B,onClick:L,variant:"secondary",children:F})}},40705:(e,t,n)=>{n.d(t,{TP:()=>p,TQ:()=>g,VW:()=>h,ZJ:()=>f});var i=n(105652),r=n(20002),a=n(692376),s=n(723850),o=n(450207),l=n(276571),d=n(362844),c=n(665933),u=n(245834),m=n(359187);function p(e,t){let n=(0,l._6)();return"fullscreen"===n.view?{...n,editorType:e??n.editorType,focusViewBackNavigation:void 0,devModeFocusId:void 0,showOverview:!1,overviewBackButtonTargetNodeId:void 0,...t?{nodeId:t}:{}}:n}function h(e,t,n=!0){let i=(0,l._6)();return"fullscreen"===i.view?{...i,editorType:d.nT.DevHandoff,focusViewBackNavigation:{toEditorType:i.editorType,toOverview:n},showOverview:!1,devModeFocusId:e,...t?{nodeId:t}:{}}:i}function f(){let e=(0,r.wA)(),t=(0,l._6)();return(0,i.useCallback)(n=>{(0,m._$)(e,t,n)},[e,t])}function g(e){let t=p(e),n=(0,r.wA)(),i=(0,s.U)(),l=(0,c.n0)(),m=(0,u.VS)({pagesList:l,isComparingChanges:!1});return async(e,r,s)=>{s&&await m(s),n(o.sf(t));let l="unknown";"fullscreen"===t.view&&(a.w3z.addToSelectionNoAnimation([r]),a.glU.panToNode(r,!1),l=t.editorType===d.nT.Design?"design_canvas":"dev_mode_canvas"),i(e,{target:l,nodeId:r})}}},285972:(e,t,n)=>{n.d(t,{s:()=>F,$:()=>B});var i=n(239976),r=n(105652),a=n(20002),s=n(490982),o=n(423407),l=n(225145),d=n(163608),c=n(379141),u=n(445019),m=n(224542),p=n.n(m),h=n(7857),f=n(960210),g=n(384760),x=n(517478),_=n(309742),y=n(842582),b=n(714778),v=n(598066),C=n(639184),E=n(338630),w=n(122970);function k({devFocusedOnboarding:e,manager:t,show:n,complete:r}){let o=(0,v.l7)(),l=(0,a.wA)(),d=(0,u.md)(g.d),m=(0,u.md)(g.cR),p=u.md(g.hv)?.data;return(0,_.h)(()=>{o&&!p&&(0,w.nT)(l),!o&&!p&&(d||m)&&n()}),(0,i.jsx)(s.bL,{manager:t,variant:"primary",children:(0,i.jsx)(E.fu,{name:"Dev Mode Overview Onboarding",children:(0,i.jsxs)(x.vo,{children:[(0,i.jsx)(s.Y9,{children:(0,i.jsx)(x.hE,{autofocus:!0,children:d?(0,c.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.title"):(0,c.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.title")})}),(0,i.jsx)(x.nB,{children:d?(0,c.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.description"):e?(0,c.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.dev_mode.description"):(0,c.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.design.description")}),(0,i.jsx)(s.wi,{children:(0,i.jsxs)(x.jk,{children:[(0,i.jsx)(b.pW,{href:"https://help.figma.com/hc/articles/23918228264855",variant:"secondary",trackingProperties:{trackingDescriptor:C.c.LEARN_MORE},children:(0,c.tx)("dev_handoff.workflows.overview.onboarding.secondary_cta")}),(0,i.jsx)(y.$z,{variant:"primary",onClick:r,trackingProperties:{trackingDescriptor:C.c.GOT_IT},children:(0,c.tx)("dev_handoff.workflows.overview.onboarding.primary_cta")})]})})]})})})}var T=n(450207),j=n(324880),S=n(562418),I=n(859100),A=n(312823),N=n(854122),M=n(215496),R=n(236410),P=n(330116),O=n(309092),D=n(271625);let L="overview_entry--isSelected---A1pE";function F({count:e,isInTab:t,isActive:n}){return(0,i.jsx)("span",{className:p()("overview_entry--badgeWrapper--f0Ih9",t&&"overview_entry--isInTab---Qdem"),children:(0,i.jsx)(o.E,{variant:n?"defaultOutline":"inactiveOutline","aria-label":(0,c.t)("dev_handoff.workflows.overview.tab_count",{count:e}),children:e})})}function B(e){return(0,i.jsx)(h.u9,{label:"OverviewEntry",children:(0,i.jsx)(U,{...e})})}function U({devFocusedOnboarding:e}){let t=(0,v.X0)(),n=!(0,f.U4)(),o=(0,a.wA)(),m=(0,v.U0)(),h=(0,a.d4)(e=>n?void 0:(0,N.Np)(e,m)),x=(0,v.l7)(),_=(0,v.ZI)(),y=u.md(g.hv)?.data,[b,C]=(0,u.fp)(g.cR),E=(0,f.xo)(),B=(0,u.md)(g.d),U=(0,S.ow)(),V=(0,A.n)(),H=(0,v.Xd)(),z=(0,r.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),n)return;let{clientX:t,clientY:i}=e;o((0,T.j7)({type:j.bx,data:{clientX:t,clientY:i}}))},[n,o]),G=!E&&!V,{getTriggerProps:K,...W}=function(){let{show:e,isShowing:t,complete:n}=(0,I.e)({overlay:D.xjb,priority:M.N.DEFAULT_MODAL}),{manager:i,getTriggerProps:r}=s.gR({isOpen:t,onOpenChange:e=>!e&&n(),placement:"right"});return{show:e,complete:n,manager:i,getTriggerProps:r}}();return!t||U?null:0===_?null:(x||y||b||B||C(!0),(0,i.jsxs)(O.y,{autoHeight:!0,withBorder:!0,children:[(0,i.jsx)(l._,{"aria-current":x?"page":void 0,className:p()("overview_entry--entryRow--n-qjG",x&&L,n&&"overview_entry--isDisabled--AN-TA"),"data-onboarding-key":w.o5,"data-tooltip":n?(0,c.t)("dev_handoff.paywall.org_not_member_hint"):void 0,"data-tooltip-text-left":!0,"data-tooltip-type":R.Ib.TEXT,href:h??"#",onClick:function(e){e.preventDefault(),H()},onContextMenu:z,recordingKey:"dev_handoff.workflows.overview_entry",children:(0,i.jsxs)("div",{className:p()("overview_entry--entryRowInner--ZgMoE",x&&L),children:[(0,i.jsxs)("div",{className:"overview_entry--leftSide--gVoBH text--fontPos11--rO47d text--_fontBase--VaHfk",children:[(0,i.jsx)(d.O,{className:"overview_entry--readyIcon--AOGF1"}),(0,c.tx)("dev_handoff.workflows.overview.title")]}),(0,i.jsx)("div",{"data-onboarding-key":w.o5,...G?K():{},children:(0,i.jsx)(F,{count:_})})]})}),G&&(0,i.jsx)(P.p,{children:(0,i.jsx)(k,{devFocusedOnboarding:e,...W})})]}))}},507323:(e,t,n)=>{n.d(t,{d:()=>i});let i=(0,n(445019).eU)({})},785055:(e,t,n)=>{n.d(t,{f:()=>k});var i=n(239976),r=n(105652),a=n(943360),s=n(379141),o=n(259714),l=n(223487),d=n(394396),c=n(235384),u=n(20002),m=n(163608),p=n(7857),h=n(174572),f=n(616635),g=n(236410),x=n(861940);let _="vscode_extension_page_picker--pagePickerButtonContent--STwil";var y=n(79050),b=n(790087);function v(){return(0,i.jsx)("div",{className:"vscode_extension_page_picker--floatingContainer--PzEXr",children:(0,i.jsx)(f.o,{})})}function C(e){return(0,i.jsx)(p.u9,{label:"VscodeExtensionPagePicker",children:(0,i.jsx)(E,{...e})})}function E({additionalPages:e,onClickAdditionalPage:t,selectedAdditionalPageId:n,isOnReadyForDevPage:a}){let[l,d]=r.useState(!1),c=r.useRef(null),p=(0,u.d4)(e=>e.mirror.appModel.pagesList),f=(0,u.d4)(e=>e.mirror.appModel.currentPage),C=p.find(e=>e.nodeId===f);return((0,h.L)(c,()=>{l&&d(!1)}),p)?(0,i.jsxs)("div",{className:"vscode_extension_page_picker--pagePicker--TpSz3",ref:c,children:[(0,i.jsxs)("button",{className:"vscode_extension_page_picker--pagePickerButton--DjB3X",onClick:()=>d(!l),"data-tooltip":(0,s.t)("dev_handoff.pages_list"),"data-tooltip-type":g.Ib.TEXT,children:[a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.O,{className:"vscode_extension_page_picker--readyIcon--60N0N"}),(0,i.jsx)("span",{className:_,children:(0,s.t)("dev_handoff.workflows.overview.title")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.v,{pageGuid:f,margin:"marginRight",fallback:(0,i.jsx)(o.B,{svg:y.A,className:"vscode_extension_page_picker--pagePickerIcon--4WqYW"})}),(0,i.jsx)("span",{className:_,children:C?.name||""})]}),(0,i.jsx)(o.B,{svg:b.A,className:"vscode_extension_page_picker--pagePickerButtonChevron--LdCzH"})]}),l&&(0,i.jsx)(v,{})]}):null}var w=n(367544);function k({children:e,isOnReadyForDevPage:t}){let n=(0,l.tS)(),u=r.useCallback(()=>{let e=(0,d.jN)({file:{key:n},isDevHandoff:!0});(0,c.Qn)(e)},[n]);return(0,i.jsxs)("div",{className:"vscode_extension_header--vscodeExtensionHeader--pp0LB",children:[(0,i.jsx)(C,{isOnReadyForDevPage:t}),(0,i.jsxs)("div",{className:"vscode_extension_header--children--uslNZ",children:[(0,i.jsx)(a.E,{onClick:u,"aria-label":(0,s.t)("dev_handoff.overview_mode.open_in_figma"),className:"vscode_extension_header--focusVisible--xFN-I",children:(0,i.jsxs)("div",{className:"vscode_extension_header--openFigmaText--B7-Uc",children:[(0,s.t)("dev_handoff.overview_mode.open_in_figma"),(0,i.jsx)(o.B,{svg:w.A,className:"vscode_extension_header--openFigmaSVG--zYrrx"})]})}),e]})]})}},762720:(e,t,n)=>{n.d(t,{V:()=>i});let i=(0,n(445019).eU)(!1)},350096:(e,t,n)=>{n.d(t,{IN:()=>eh,xw:()=>ec,ez:()=>ed});var i=n(239976),r=n(105652),a=n(20002),s=n(836848),o=n(295870),l=n(446862),d=n(692376),c=n(854225),u=n(445019),m=n(612069),p=n.n(m),h=n(270351),f=n(723850),g=n(943866),x=n(129416),_=n(875253),y=n(328452),b=n(450207),v=n(907288),C=n(304315),E=n(760367),w=n(90154),k=n(893749),T=n(393822),j=n(126278),S=n(959668),I=n(324880),A=n(249487),N=n(720410),M=n(1007),R=n(941452),P=n(605985),O=n(157750),D=n(895414),L=n(890305),F=n(471500),B=n(822358),U=n(879141),V=n(379141),H=n(847923),z=n(173658),G=n(212198),K=n(341153),W=n(827081),q=n(292339),X=n(816984),Y=n(121894);function J({clusteredThreads:e,hasActivePin:t,pageId:n,setClientMeta:a,isCommentsMode:s,setPinRendererRef:o,onCommentInsertionButtonFocusToggle:l}){let d=r.useCallback(()=>{let t=Y.iZ?.getFocusedClusterId();return t?e.getById(t):null},[e]),c=(0,G.sT)(),u=r.useRef([]),m=function(e,t){let n=Q(),i=(0,q.D)(),a=function(e,t){0===t.current.length&&(t.current=e.all().map(e=>e.id));let n=t.current,i=r.useRef(e),a=i.current,s=e.all().map(e=>e.id),o=Y.iZ?.getFocusedClusterId(),l=r.useRef(!!o),d=l.current;if(l.current=!!o,a===e||d&&(!o||!s.includes(o)))return n;let c=Array.from(e.leafNodes).reduce((t,n)=>{let i=a?.getParentOf(n)?.id,r=e.getParentOf(n)?.id;return r&&t.set(r,i),t},new Map),u=e=>n.indexOf(c.get(e)??""),m=[...s].sort((e,t)=>{let n=u(e),i=u(t),r=-1===n?Number.MAX_SAFE_INTEGER:n,a=-1===i?Number.MAX_SAFE_INTEGER:i;if(r!==a)return r-a;if(o){if(e===o&&t!==o)return -1;if(t===o&&e!==o)return 1}return 0});if(o&&!n.includes(o)){let e=m.indexOf(o);if(e>0){let t=m.splice(0,e);m.push(...t)}}return i.current=e,t.current=m,m}(e,t),s=r.useCallback(e=>{let t=Y.iZ?.getPinElementByClusterId(e);if(!t)return!1;let n=document.querySelector('[data-testid="properties-panel"]');if(!n)return!1;let i=t.getBoundingClientRect(),r=n.getBoundingClientRect();return i.right>r.left},[]);return r.useCallback((t,r=Y.iZ?.getFocusedClusterId())=>{if(!r){let i=1===t?a.length-1:0,r=a[i],o=r?e.getById(r):null;o&&r&&n(o.cluster,s(r))?.then(()=>Y.iZ?.focusPinById(r));return}let o=a.findIndex(e=>e===r)+(1===t?-1:1);if(o>=a.length||o<0){i();return}let l=a[o],d=e.getById(l);d&&n(d.cluster,s(l))?.then(()=>Y.iZ?.focusPinById(l))},[a,e,n,s,i])}(e,u),p=(0,X.vB)(d,n,a),[h,f]=r.useState(!1),g=r.useCallback(e=>"Tab"===e.key&&(m(e.shiftKey?1:0),e.preventDefault(),e.stopPropagation(),!0),[m]);r.useEffect(()=>{if(!h)return;let e=e=>{if(g(e))return;let t=(()=>{switch(e.key){case"ArrowDown":return{x:0,y:1};case"ArrowUp":return{x:0,y:-1};case"ArrowLeft":return{x:-1,y:0};case"ArrowRight":return{x:1,y:0};default:return null}})();t&&p(_.Mi.scale(e.shiftKey?c.bigNudgeAmount:c.smallNudgeAmount,t))&&(e.preventDefault(),e.stopPropagation())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[h,m,t,p,c,g]),r.useEffect(()=>{if(s)return(0,z.lg)(e=>{m(0,e)}),()=>{(0,z.lg)(null)}},[s,m]);let x=r.useCallback(t=>{t&&(u.current=function(e){let t=e.all(),n=t.length;if(n<=1||n>100)return t.map(e=>e.id);let i=(e,n)=>Math.hypot(t[e].x-t[n].x,t[e].y-t[n].y),r=new Set(t.map((e,t)=>t)),a=[...r].reduce((e,n)=>t[n].x+t[n].y<t[e].x+t[e].y?n:e,0),s=[a];for(r.delete(a);r.size;){let e=s[s.length-1],t=[...r].reduce((t,n)=>i(e,n)<i(e,t)?n:t);s.push(t),r.delete(t)}return s.map(e=>t[e].id)}(e)),l?.(t)},[e,l]);return(0,i.jsxs)(W.v,{isAccessible:s,role:"region","aria-label":(0,V.t)("comments.accessibility_pin_region_name"),children:[(0,i.jsx)(q.J,{onNativeEventKeyDown:g,onFocusToggle:x}),(0,i.jsx)("clustered-pins",{"data-fullscreen-intercept":!0,onFocus:()=>f(!0),onBlur:()=>f(!1),ref:o})]})}var Z=(e=>(e[e.Forward=0]="Forward",e[e.Backward=1]="Backward",e))(Z||{});let Q=()=>{let e=(0,K.Z)(),t=r.useContext(D.kw),n=(0,H.R)(e=>e.selectedView);return r.useCallback((i,r=!1)=>{let a=i.threads[0];return e((0,z.E1)(a,t,n,r,!0))},[e,t,n])};var $=n(74828),ee=n(252904),et=n(625902),en=n(381193),ei=n(681717),er=n(151370),ea=(e=>(e[e.Gradual=0]="Gradual",e[e.Jump=1]="Jump",e))(ea||{});let es=ee.XC.getPinSize(3),eo=Math.max($.u5,es.width,es.height),el=e=>10*Math.round(100*e/10);function ed(e,t,n){let i=n,r=t*n,a=eo+(0,S.H)(e,n);return r<3*a&&(i=3*a*n/r),i}function ec({config:e,clusterLocation:t,pins:n,currentViewport:i}){let r=p()(n,e=>Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))),a=Math.abs(r.x-t.x),s=Math.abs(r.y-t.y),o=a>s?"width":"height",l=Math.max(a,s),d=e.clusterClickResultViewportPercentage/100,c=i[o]*d/(2*l),u=ed(e,l,c);return u/i.zoomScale<1.5&&(u*=1.5),Math.min(u,e.minZoomPercentage/100+.5)}let eu=[c.NLJ.COMMENTS,c.NLJ.SELECT,c.NLJ.SCALE,c.NLJ.HAND,c.NLJ.TYPE],em=(e,t,n,i,r,a)=>{let{threads:s}=e,o=s.map(e=>i(e)),l=s.map(e=>{let t=e.comments[0].client_meta;return t?.in_frame?t.node_id:void 0}),d=new Map;for(let e of o)for(let t of e.avatars)d.has(t.avatar_user_id)?(d.get(t.avatar_user_id).num_unread_comments+=t.num_unread_comments,d.get(t.avatar_user_id).num_comments+=t.num_comments):d.set(t.avatar_user_id,t);let c=1===s.length;return{id:c?s[0].id:(0,ei.Ao)(e,s.length),x:e.x,y:e.y,pins:o,isUnread:o.some(e=>e.isUnread),avatarMap:d,onClick:r(e,o),anchoredNode:l.every(e=>e===l[0])?l[0]:void 0,isPinnedToFile:o.some(e=>e.isPinnedToFile),isSinglePin:c,cluster:e,onKeyDown:a(e,o)}};"customElements"in window&&customElements.define(Y.Zb.desiredElementName,Y.Zb);let ep=r.memo(function(e){let t=!!e.activeThread||e.threads.length>0,n=(0,P.iZ)(),m=(0,w.s)(),p=(0,en.Z5)(),V=(0,a.wA)(),H=r.useContext(D.kw),z=r.useRef(null),G=(0,a.d4)(e=>e.mirror.appModel.currentTool),K=(0,O.ut)(d.Ez5?.editorState().handToolTemporarilyEnabled,!1),W=(0,R.BI)(),q=e.activeThread?.id===j.hm,Z=q?null:e.activeThread?.id||null,Q=(0,a.d4)(e=>e.comments.emphasizedPinIds),{zoomScale:$,deltaOffsetX:ea,deltaOffsetY:es,deltaZoomScale:eo}=(0,M.PD)({subscribeToUpdates_expensive:t}),{requestToDeselectCommentPin:ed}=e,[ep,eh]=r.useState(!1),ef=(0,E.qN)(),eg=(0,N.k)(),ex=(0,y.Om)(),[e_,ey]=r.useState(void 0),[eb,ev]=r.useState(!1),eC=(0,u.md)(Y.ux),eE=r.useRef(null),ew=(0,u.md)(k.R),ek=(0,a.d4)(e=>![c.m1T.DESIGN_LAYOUT,c.m1T.WHITEBOARD_LAYOUT,c.m1T.HISTORY,c.m1T.PREVIEW,c.m1T.COMMENTS,c.m1T.DEV_HANDOFF,c.m1T.SLIDE_LAYOUT,c.m1T.SITES_LAYOUT].includes(e.mirror.appModel.activeCanvasEditModeType)||e.mirror.appModel.activeUserAction!==d.QOV.DEFAULT),eT=(0,v.f$)(),ej=ek&&(!W||W?.shouldOptimizeForIpadApp&&W?.shouldFadeCommentsDuringEdit),[eS,eI]=r.useState(!1),eA=ej||G===c.NLJ.MULTISELECT||eS,[eN,eM]=r.useState({viewport:H.getViewportInfo(),hasJumped:!1}),eR=r.useRef(e.threads);r.useEffect(()=>{eR.current=e.threads},[e.threads]);let eP=r.useCallback(e=>eR.current?.find(t=>t.id===e)||null,[eR]),eO=(0,a.d4)(e=>e.mirror.appModel.activeUserAction);r.useEffect(()=>{let e=z.current;e&&(e.shouldDisablePointerEvents=!eg&&m?.disableCommentsWhenHandToolEnabled&&G===c.NLJ.HAND||K||void 0!==eO&&eO!==d.QOV.DEFAULT||G===c.NLJ.MULTISELECT)},[z,G,K,eO,m?.disableCommentsWhenHandToolEnabled,eg]);let eD=e.dragDisabledOverride||!eu.includes(G),eL=(0,X.BK)(eP,e.pageId,e.setClientMeta,eD,e.requestToSelectCommentPin,ew),eF=(0,X.x5)(eD),eB=r.useMemo(()=>new Set(e.threads.filter(e=>eF(e)).map(e=>e.id)),[eF,e.threads]),eU=r.useCallback(e=>{V(C.wg({threadId:e}));let t=eP(e);t&&H.setHovering(t.canvasPosition)},[H,V,eP]),eV=r.useCallback(e=>{V(C.RP({threadId:e})),H.setHovering(null)},[H,V]),eH=(0,v.$m)(),ez=(0,f.am)(),eG=r.useRef(!1);eG.current=eH&&eT;let eK=r.useCallback((e,t)=>eg?()=>Promise.resolve(ex("COMMENT_PIN_CLICK")):async n=>{let i=n||"screen-reader"===l.F.device,r=t.map(e=>e.id);ez("Comment Cluster Clicked",{clusterSize:t.length,commentThreadIds:r});let a=ec({config:p,clusterLocation:e,pins:t,currentViewport:H.getViewportInfo()}),s=H.navigateTo(e,a);ed&&ed(),await s,eG.current&&i&&z.current?.setSelectedFocusThreadIds(new Set(r))},[p,H,ez,ed,eg,ex]),eW=r.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation();let n=eP(e);if(!n)return;let i=H.getViewportInfo(),r=z.current.getPinViewportRect(n.id),a=(0,M.Z0)(i,r),s={x:a.x+r.height/2,y:a.y-r.width/2,height:0,width:0},o=(0,M.HD)(s,i);V(b.j7({type:I.Z7,data:{thread:n,pinClientRect:o}}))},[V,H,eP]),eq=z.current,eX=(0,M.ni)(),eY=r.useCallback(e=>{if(eq){if("function"!=typeof eq.onViewportUpdate){(0,x.$D)(o.e.WAYFINDING,Error("pinRenderer.onViewportUpdate is not a function"),{extra:{pinRendererProperties:Object.getOwnPropertyNames(eq)}});return}eq.onViewportUpdate(e)}},[eq]);r.useEffect(()=>{t&&eY(H.getViewportInfo())},[eY,t,H]),(0,M.D6)({subscribeToUpdates_expensive:t},eY),r.useEffect(()=>{eq&&(eq.bounds={min:{x:eX.x,y:eX.y},max:{x:eX.x+eX.width,y:eX.y+eX.height}},eq.onElementClicked=eL.onPinClicked,eq.onElementDragEnd=eL.onDragEnd,eq.onElementDragMove=eL.onDragUpdate,eq.onElementDragStart=eL.onDragStart,eq.onElementContextMenu=eW)},[eW,eq,eL,eX]);let eJ=r.useCallback(e=>{let t;let i=(0,ei.c4)(e.comments),r=e.comments.slice(1).reduce((e,t)=>t.isUnread?e+1:e,0);if(e.boundingBoxAnchorCanvasPosition)t=e.boundingBoxAnchorCanvasPosition;else if(e.comments[0].client_meta?.selection_box_anchor&&(t=e.comments[0].client_meta.selection_box_anchor,e.comments[0].client_meta?.in_frame)){let n=e.comments[0].client_meta,i=_.Mi.subtract(t,n);t=_.Mi.add(e.canvasPosition,i)}let a=!!e.isPendingFromSinatra,o={id:e.id,x:e.canvasPosition.x,y:e.canvasPosition.y,isOurs:e.comments[0].user_id===n?.id,pending:a,avatars:i,createdAt:new Date(Date.parse(e.comments[0].created_at)),onMouseEnter:()=>eU(e.id),onMouseLeave:()=>eV(e.id),previewMessageMeta:e.comments[0].message_meta,isUnread:e.comments[0].isUnread||r>0,numUnreadReplies:r,isDraggable:eB.has(e.id)&&!e.boundingBoxAnchorCanvasPosition,isResolved:!!e.comments[0].resolved_at,label:e.comments[0].order_id||"",updatedAt:e.comments[e.comments.length-1].created_at,selectionBoxAnchor:t,otherBoundingBoxes:e.otherBoundingBoxes,numAttachments:e.comments.map(e=>e.attachments?.length||0).reduce((e,t)=>e+t,0),isPinnedToFile:(0,A.U6)()?!!e.commentPin:void 0};return e.sidebarItemType===j.kT.COMMENT_THREAD?{...o,type:j.kT.COMMENT_THREAD}:e.sidebarItemType===j.kT.FEED_POST?{...o,type:j.kT.FEED_POST,feedPostTitle:e.feedPostTitle,pinVerticalStagger:e.pinVerticalStagger}:e.sidebarItemType===j.kT.LITMUS_COMMENT_THREAD?{...o,type:j.kT.LITMUS_COMMENT_THREAD}:void(0,s.xb)(e)},[n,eB,eU,eV]),eZ=r.useMemo(()=>e.threads.reduce((e,t)=>{let{canvasPosition:n}=t;return n&&e.push({...t,canvasPosition:n}),e},[]),[e.threads]),[eQ,e$]=r.useState(new Map),e0=r.useCallback((e,t)=>{e$(n=>new Map(n.set(e,t)))},[]),e1=z.current?.getFocusedClusterId()??null;r.useEffect(()=>{eH&&e$(new Map)},[eH,e1]);let e2=(0,g.ZC)(eZ),e5=eZ!==e2&&void 0!==e2;r.useEffect(()=>{e5&&e$(new Map)},[e5,eZ]);let e4=(0,g.ZC)(ef),[e3,e6]=r.useState(()=>{if(ef)return(0,T.Zz)(e.threads)});r.useEffect(()=>{void 0===e3&&!e4&&ef&&(0,T.Zz)(e.threads)&&e6(!0)},[e4,ef,e.threads,e3]),r.useEffect(()=>{e5&&e3&&(e.threads.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))||e6(!1))},[e3,e5,e.threads]);let e7=(()=>{let e=(0,v.$m)();return r.useCallback((t,n)=>i=>{e&&"Enter"===i.key&&eK(t,n)(!0)},[e])})(),e9=r.useCallback((e,t)=>{let n=new Set(e.map(e=>e.id)),i=el(t.zoomScale),r=eQ.get(i);if(r){let e=r.map(e=>em(e,t,m,eJ,eK,e7));return new et.n(e,n,t.zoomScale,e3)}{e0(i,r=(0,S.g)(e,t,p,eH?z.current?.getFocusedClusterId()??null:null));let a=r.map(e=>em(e,t,m,eJ,eK,e7));return new et.n(a,n,t.zoomScale,e3)}},[eH,eQ,e3,m,eJ,eK,e7,p,e0]),e8=r.useCallback(e=>{eM({viewport:H.getViewportInfo(),hasJumped:1===e})},[H]),te=(0,h.A)(e8,p.rebuildClustersZoomDelay),tt=r.useMemo(()=>{let e=e9(eZ,eN.viewport);return e.applyInstant=eN.hasJumped,e},[eZ,eN,e9]);r.useEffect(()=>{let e=eN.viewport.zoomScale;if($===e)return;let t=z.current;e>$&&t&&(t.isZoomingOut=!0);let{width:n,height:i}=H.getViewportInfo();Math.abs(eo)/$>.45||Math.abs(ea)/n>.95||Math.abs(es)/i>.95?e8(1):te(0)},[H,eo,ea,es,p.rebuildClustersZoomDelay,eN.viewport,$,eq,te,e8]);let tn=r.useCallback(e=>{eh(null!=e),z.current=e},[]);r.useEffect(()=>{if(z.current){let e=z.current;if(ep)e.data={clusters:tt,selectedPinId:Z,emphasizedPinIds:Q,dimUnselectedPins:!!eA};else{e.wrapperOffsetFn=e=>H.getCommentsWrapperOffset(e);let t=H.getViewportInfo();e.initialViewport=t,e.data={clusters:tt,selectedPinId:Z,emphasizedPinIds:Q,dimUnselectedPins:!!eA},e.clientConfig=m}}},[H,Z,Q,ep,tt,m,eA]);let ti=!!e.activeThread,tr=e.activeThread?(0,ei.c4)(e.activeThread.comments).length:1,{setActivePinSize:ta}=e;r.useEffect(()=>{if(!ti){ta(null);return}if(q){let e=ee.XC.getPinSize(1);ta({height:e.height,width:e.width});return}ta({width:ee.XC.getPinSize(tr).width,height:0})},[ta,ti,q,tr]);let ts=()=>{let e;if(!z.current)return;let t=z.current.shadowRoot,n=t?.querySelector(`[data-onboarding-key="${B.UU}"]`);if(!n)return;let i=eE?.current?.getBoundingClientRect(),r=i?.height,a=n.getBoundingClientRect(),s=B.V_/2,o=a.top<window.innerHeight/3,l=a.top-10,d=a.top+10;if(r){let t=a.top+10-r;e=o?l:t}else e=d;ey({top:e,left:a.left-B.V_-10,pointerOffset:s,pointerPosition:L.F_.RIGHT_BODY})};r.useEffect(()=>{eC&&ts()},[eC]),r.useEffect(()=>{ts()},[eb]),r.useEffect(()=>{ey(void 0)},[ea,es]);let to=r.useMemo(()=>{if(e_)return{targetLocation:e_,innerRef:eE,setIsShowingOverlay:ev}},[e_,eE,ev]);return(0,i.jsxs)(er.p,{children:[eC&&!!to&&(0,i.jsx)(U.ue,{registrationOrigin:F.iX.NEW_COMMENT,fixedPositionProps:to}),eH?(0,i.jsx)(J,{clusteredThreads:tt,hasActivePin:ti,isCommentsMode:eT,pageId:e.pageId,setClientMeta:e.setClientMeta,setPinRendererRef:tn,onCommentInsertionButtonFocusToggle:eI}):(0,i.jsx)("clustered-pins",{ref:tn})]})}),eh=r.memo(function(e){return(0,i.jsx)(ep,{activeThread:e.activeThread,dragDisabledOverride:e.dragDisabledOverride,isCommunity:e.isCommunity,pageId:e.pageId,requestToDeselectCommentPin:e.requestToDeselectCommentPin,requestToSelectCommentPin:e.requestToSelectCommentPin,setActivePinSize:e.setActivePinSize,setClientMeta:e.setClientMeta,threads:e.threads,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition},e.pageId)})},625902:(e,t,n)=>{n.d(t,{n:()=>i});class i{constructor(e,t,n,i){this._cached_all=null,this.applyInstant=!1,this.minimizeUnpinned=!1,this.clusters=e.reduce((e,t)=>(e[t.id]=t,e),{}),this.order=e.map(e=>e.id),this.leafNodes=t;let r={};i&&(this.minimizeUnpinned=!0),e.forEach(e=>{e.pins.forEach(t=>{r[t.id]=e.id})}),this.hierarchy=r,this.zoomScale=n}get length(){return this.order.length}all(){return this._cached_all||(this._cached_all=this.order.map(e=>this.clusters[e])),this._cached_all}getParentOf(e){let t=this.hierarchy[e];return t&&this.clusters[t]||null}getById(e){return this.clusters[e]||null}}},292339:(e,t,n)=>{n.d(t,{J:()=>p,D:()=>m});var i=n(239976),r=n(105652),a=n(692376),s=n(379141),o=n(323264),l=n(907288),d=n(643444),c=n(1007),u=n(941452);function m(){let e=(0,l.f$)(),t=(0,l.$m)()&&e;return(0,r.useCallback)(()=>{if(!t)return;let e=document.querySelector("button[data-kb-comment-insertion-button]");e instanceof HTMLElement&&e.focus()},[t])}function p({onNativeEventKeyDown:e,onFocusToggle:t}){let n=r.useRef(null),[l,m]=(0,r.useState)(!1),p=(0,c.i$)(),h=r.useCallback(()=>{m(!0),t?.(!0),requestAnimationFrame(()=>{a.Ez5?.invalidateCanvas()});let e=!1,i=()=>{if(!e){e=!0;return}n.current?.blur()};window.addEventListener("mousemove",i),n.current?.addEventListener("blur",()=>{window.removeEventListener("mousemove",i),m(!1),t?.(!1),a.Ez5?.invalidateCanvas()},{once:!0})},[t]),g=(0,r.useCallback)(t=>{e(t.nativeEvent)},[e]),x=(0,u.BI)(),_=x?.requestToAddDraftCommentPin;return(0,i.jsx)("button",{ref:n,"aria-label":(0,s.t)("comments.create-comment"),...o.xk(f.insertionButton,p&&f.insertionButtonPosition(p.x+9,p.y+25)),"data-fullscreen-intercept":!0,"data-kb-comment-insertion-button":!0,onClick:e=>{_&&p?_({x:Math.round(p.x),y:Math.round(p.y),width:36.8,height:36.8}):d.VU.get("create-comment","keyboard")?.(e)},onFocus:h,onKeyDown:g,type:"button",children:l&&(0,i.jsx)("img",{src:"data:image/png;base64,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",alt:"",width:"30",height:"30"})})}let h={kbCHJM:"xgq9j65",kLqNvP:"",kt4wiu:"",k87sOh:"xjbys53",$$css:!0},f={insertionButton:{kWkggS:"xjbqb8w",kVAEAm:"xixxii4",k3aq6I:"x11lhmoz",kY2c9j:"x1vjfegm",$$css:!0},insertionButtonPosition:(e,t)=>[h,{"--x-left":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`),"--x-top":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${t}px`)}]}},381193:(e,t,n)=>{n.d(t,{Z5:()=>l,i$:()=>a,uw:()=>o});var i=n(105652),r=n(270450);let a={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function o(e){if(!(0,r.kc)().internal_only_debug_tools)return;let t="function"==typeof e?e({...a}):e;a={...a,...t},requestAnimationFrame(()=>{s.forEach(e=>e(a))})}function l(){let[e,t]=i.useState(a);return i.useEffect(()=>{let e=e=>{t(e)};return s.add(e),()=>{s.delete(e)}},[t]),e}},816984:(e,t,n)=>{n.d(t,{BK:()=>I,vB:()=>N,x5:()=>T});var i=n(105652),r=n(20002),a=n(875253),s=n(328452),o=n(907288),l=n(304315),d=n(738418),c=n(90154),u=n(950851),m=n(193507),p=n(393822),h=n(763985),f=n(126278),g=n(720410),x=n(929646),_=n(341153),y=n(1007),b=n(223487),v=n(605985),C=n(895414),E=n(252904),w=n(681717),k=n(121894);function T(e){let t=(0,v.TA)(),n=b.q5()?.canEdit;return i.useCallback(i=>!!(!0!==e&&(0,f.b7)(i.sidebarItemType))&&(!!n||i.comments[0].user_id===t),[e,t,n])}function j(e,t){let n=i.useContext(C.kw);return i.useCallback(i=>{let r=e(i.id);if(!r||!r.canvasPosition)return;let s=n.getViewportInfo(),o=(0,y.Z0)(s,r.canvasPosition),l=a.Mi.subtract(o,i.offset);t((0,y.$$)(s,l),r,s)},[e,t,n])}function S(){let e=i.useContext(C.kw);return i.useCallback(t=>{e.setHovering(t)},[e])}function I(e,t,n,a,p,h){let f=i.useContext(C.kw),x=(0,r.wA)(),b=f.getCommentDestinationForCanvasPosition,v=(0,u.fG)(),T=S(),I=j(e,T),N=(0,o.$m)(),M=j(e,i.useCallback((e,n)=>{if(n.comments[0]?.client_meta?.selection_box_anchor){let i=v(e,b(e,t)?.nodeId);if(i){let e=(0,m.pV)(n.comments[0].client_meta.selection_box_anchor,i);if(e.x!==n.comments[0].client_meta.selection_box_anchor.x||e.y!==n.comments[0].client_meta.selection_box_anchor.y){let t={...n.comments[0].client_meta};t.selection_box_anchor=e,x(l.hY({thread:n,clientMeta:t}))}}}T(e)},[t,v,b,x,T])),R=j(e,A(t,n)),P=i.useCallback((...e)=>{R(...e),N&&k.iZ?.blurFocusedPin()},[N,R]),O=function(e,t,n){let a=(0,r.wA)(),o=i.useContext(C.kw),u=(0,d.I_)(),m=(0,c.s)(),p=(0,_.Z)("comments_navigate"),h=(0,g.k)(),f=(0,s.Om)();return i.useCallback(i=>{if(h){f("COMMENT_PIN_CLICK");return}let r=e(i);if(r){if(t){if(!r.isPendingFromSinatra&&r.canvasPosition){let e=(0,y.Z0)(o.getViewportInfo(),r.canvasPosition),n=(0,w.c4)(r.comments).length,i=E.XC.getPinSize(n);t(r.id,{x:e.x,y:e.y,width:1.15*i.width,height:1.15*i.height})}}else a(l.bB({receiptsAPI:u.commentReceipts,viewport:o,thread:r,skipDeactivatingExistingActiveComment:n,config:m,navigate:p}))}},[u,a,e,o,t,n,m,p,h,f])}(e,p,h);return i.useMemo(()=>({onDragEnd:P,onPinClicked:O,onDragUpdate:M,onDragStart:I}),[I,P,O,M])}function A(e,t){let n=i.useContext(C.kw),s=(0,r.wA)(),o=n.getCommentDestinationForCanvasPosition,d=(0,u.fG)(),c=(0,u.pC)(),h=(0,u.gu)(),f=n.getValidCommentsRect,g=S();return i.useCallback((n,i,r)=>{let u;let x=(0,y.Z0)(r,n);if(!(0,p.rN)(x,f()))return;if(c(n)){s(l.UU()),h(),g(null);return}let _=o(n,e,!1),b={x:n.x,y:n.y,node_id:_?.nodeId,node_offset:_?.nodeOffset,viewport:r,page_id:e,in_frame:_?.inFrame,selection_box_anchor:i.comments[0].client_meta?.selection_box_anchor,stable_path:_?.stablePath};if(i.comments[0].client_meta?.selection_box_anchor){if(i.comments[0].client_meta.in_frame){let e=i.comments[0].client_meta,t=i.comments[0].client_meta.selection_box_anchor,r=a.Mi.subtract(t,e),s=i.canvasPosition;if(_?.inFrame){let e=a.Mi.subtract(s,n);u=a.Mi.add(a.Mi.add(n,r),e)}else u=a.Mi.add(r,s)}else u=i.comments[0].client_meta?.selection_box_anchor;let e=d(n,_?.nodeId);e&&(u=(0,m.pV)(u,e))}b.selection_box_anchor=u,t({thread:i,clientMeta:b}),g(null)},[e,t,s,o,d,c,h,f,g])}function N(e,t,n){let r=A(t,n),s=i.useContext(C.kw),o=(0,h.MP)();return i.useCallback(t=>{if(o)return!1;let n=e();if(!n?.isSinglePin)return!1;let i=n.cluster.threads[0];return!!i&&(r(a.Mi.add(n,t),i,s.getViewportInfo()),x.Lj.announceCommentPinMoved(t),!0)},[o,e,r,s])}},151370:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(239976),r=n(875253),a=n(1007);function s(e){let t=(0,a.Cj)(),n=r.Mi.scale(-1,t);return(0,i.jsx)("div",{className:"viewport_overlay--overflowContainer--JinC8",style:{top:t.y,left:t.x,height:t.height,width:t.width},onScroll:e.forceNoScroll?e=>{e.currentTarget.scrollLeft=0,e.currentTarget.scrollTop=0}:void 0,children:(0,i.jsx)("div",{className:"viewport_overlay--innerContainer--9I2w-",style:{top:n.y,left:n.x},children:e.children})})}},629674:(e,t,n)=>{n.d(t,{Xc:()=>S,Yz:()=>I,Z7:()=>T});var i=n(239976),r=n(105652),a=n(692376),s=n(854225),o=n(2227),l=n(466082),d=n(379141),c=n(270450),u=n(445019),m=n(40297),p=n(682641),h=n(760367),f=n(90154),g=n(950851),x=n(342931),_=n(763985),y=n(313616),b=n(750554),v=n(212198),C=n(157750),E=n(273444),w=n(460845),k=n(526865);let T=(0,u.eU)(new Map),j=(0,m.jz)(k.LdP);function S(){let e=(0,h.wq)(),t=(0,u.Xr)(T),[n,i]=r.useState(new Map),[a,s]=r.useState(new Map);return r.useEffect(()=>{let r=new Set,d=new Map;"loaded"===e.status&&e.data.forEach(e=>{let t=e.canvasPosition,n=a.get(e.id),i={commentCount:e.comments.filter(e=>!e.resolved_at).length,threadIds:[],hasUnread:e.comments.some(e=>!e.resolved_at&&e.isUnread)};d.set(e.id,i),t&&(!n||t.x!==n.x&&t.y!==n.y)&&r.add(e)}),r.forEach(e=>{let t=e.comments[0]?.client_meta?.node_id;if(!t||!e.canvasPosition)return;let n=(0,l.UN)().get(t),r=n?n.containingSlideId:o.AD;r!==o.AD&&e.canvasPosition&&(s(t=>new Map(t.set(e.id,e.canvasPosition))),i(t=>new Map(t.set(e.id,r))))});let c=new Map;n.forEach((e,t)=>{let n=d.get(t);if(!n)return;let{commentCount:i,hasUnread:r}=n,a=c.get(e),s={commentCount:(a?.commentCount??0)+i,threadIds:[...a?.threadIds??[],t],hasUnread:a?.hasUnread||r};c.set(e,s)}),t(c)},[t,a,n,e.data,e.status]),n}function I({children:e}){let t=(0,C.ut)(a.Ez5?.singleSlideView().isInFocusedNodeView,!1),n=(0,C.ut)(a.Ez5?.canvasGrid().canvasGridArray,[]),u=(0,C.ut)(a.Ez5?.interopToolMode(),a.nQ7.SELF)===a.nQ7.DESIGN,m=(0,E.rY)(n),h=r.useMemo(()=>m.reduce((e,t,n)=>(e.set(t,n),e),new Map),[m]),k=(0,c.kc)().slides_comment_position,T=(0,b.a)(),{isPropertiesPanelCollapsed:S}=(0,y.iT)(),I=(0,v.qw)();I=S?0:I;let A=r.useCallback(e=>{let t=e.comments[0]?.client_meta?.node_id;if(!t)return o.AD;let n=(0,l.UN)().get(t);return n?n.containingSlideId:o.AD},[]),N=(0,w.R)(),M=r.useMemo(()=>{let e=[x.mW.RESOLVED,x.mW.YOURS];return t&&e.push(x.mW.CURRENT_SLIDE),e},[t]),R=r.useMemo(()=>[x.qN.CREATION_DATE,x.qN.UNREAD,x.qN.SLIDE],[]),P=(0,p.p)(),O=r.useCallback(e=>{let t=A(e),n=h.get(t);return void 0!==n&&t!==o.AD?(0,d.t)("comments.slide_number",{orderNum:n+1}):e.pageName},[A,h]),D=r.useMemo(()=>!!t,[t]),L=r.useCallback(e=>{if(!t)return()=>{};let n=A(e),i=(0,_.FH)(e,"non_slide_anchors");return(0,c.kc)().slides_fix_comment_anchoring&&!u&&a.Ez5?.singleSlideView().isInFocusedNodeView&&i?()=>{a.Ez5?.singleSlideView().exitFocusedNodeView()}:n!==o.AD?()=>{P(n)}:()=>{a.Ez5?.singleSlideView().exitFocusedNodeViewAndLeavePanelsOpen()}},[A,P,t,u]),F=r.useMemo(()=>({slide:(e,t)=>{let n=1/0,i=A(e),r=A(t),a=h.get(i)??n,s=h.get(r)??n;if(a!==s)return a-s;{let n=e.comments[0]?.created_at,i=t.comments[0]?.created_at;return n&&i?Date.parse(i)-Date.parse(n):0}}}),[A,h]),B=(0,C.ut)(a.Ez5?.editorPreferences().speakerNotesHeight,0),U=r.useMemo(()=>{let e=0,n=0;return T&&(e+=j,n+=I),t&&(e+=B+(s.CNR?.dragHandleTotalHeight()??0)+(s.CNR?.speakerNotesDragHandlePadding()??0)),{...g.Ey,maxHeightDelta:-e,minBottomMarginDelta:e,minRightMarginDelta:n}},[t,I,T,B]),V=r.useMemo(()=>t&&k?B+(s.CNR?.dragHandleTotalHeight()??0):0,[t,B,k]),H=r.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,disableZoomViewportOnCommentSelection:D,orphanedBy:"deleted_anchors",filterBy:"slide_filter_rules",sidebarFilters:M,sidebarSorts:R,sidebarModesDisabled:!0,dockPositionAdjustment:N,commentDisabledPositionBellMessage:(0,d.t)("comments.comments_can_only_be_placed_on_slides"),getParentName:O,getOnCommentSelect:L,sortComparatorOverrides:F,draggableModalBoundsAdjustment:U,newCommentAdditionalBottomInset:V,commentDecoratorsAvailableHeight:V}),[D,M,R,N,O,L,F,U,V]);return(0,i.jsx)(f.a.Provider,{value:H,children:e})}},668868:(e,t,n)=>{n.d(t,{B:()=>tS});var i=n(239976),r=n(105652),a=n(20002),s=n(836848),o=n(269751),l=n(250730),d=n(649109),c=n(379141),u=n(916626),m=n(7857),p=n(699165),h=n(154963),f=n(304315),g=n(381193),x=n(950851),_=n(352643),y=n(338630),b=n(462458),v=n(720410),C=n(761312),E=n(384203),w=n(795867),k=n(158910),T=n(202648),j=n(57712),S=n(563188),I=n(933870),A=n(374073),N=n(116695),M=n(239620),R=n(943866),P=n(289555),O=n(99185),D=n(328452),L=n(126278),F=n(223487),B=n(605985),U=n(943360),V=n(735786),H=n(796557),z=n(4245),G=n(109307),K=n(861266),W=n(920380),q=n(224542),X=n.n(q),Y=n(865702),J=n(259714),Z=n(408823),Q=n(118889),$=n(569693),ee=n(926862);let et="comment_avatar_list--avatarListElement--rRhGI",en=r.memo(function(e){let{userId:t,imgUrl:n,handle:a}=e,s=r.useMemo(()=>({id:t,img_url:n,handle:a}),[t,n,a]);return(0,i.jsx)("div",{className:et,children:(0,i.jsx)($.Ro,{size:24,entity:s,className:"comment_avatar_list--commentAvatar--3w7we"})})});function ei(e){let{avatars:t,maxAvatarsShown:n}=e,a=r.useMemo(()=>t.slice(0,n-1),[t,n]),s=t.length===n,o=t.length>e.maxAvatarsShown,l=t[e.maxAvatarsShown-1];return(0,i.jsxs)("div",{className:e.grayscale?"comment_avatar_list--avatarListGrayscale--YgyJW comment_avatar_list--avatarList--sU-yI":"comment_avatar_list--avatarList--sU-yI",children:[a.map(e=>(0,i.jsx)(en,{userId:e.avatar_user_id,imgUrl:e.avatar_url,handle:e.avatar_user_handle},e.avatar_user_id)),s&&l&&(0,i.jsx)(en,{userId:l.avatar_user_id,imgUrl:l.avatar_url,handle:l.avatar_user_handle},l.avatar_user_id),o&&(0,i.jsx)("div",{className:et,children:(0,i.jsx)(ee.f,{size:24,className:"comment_avatar_list--overflowAvatar--C8PR9 comment_avatar_list--commentAvatar--3w7we",text:`${e.avatars.length-e.maxAvatarsShown+1}`})})]})}var er=n(193507),ea=n(236410),es=n(933384),eo=n(297094),el=n(763985);let ed=r.memo(function(e){return(0,i.jsxs)("div",{className:"comment_metadata--commentMetadata--8Ayub",children:[(e.orderId||e.parentName&&!e.hideParentName)&&(0,i.jsx)("span",{className:"comment_metadata--parentName--qeEkU text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,i.jsx)(eu,{parentName:e.parentName||null,orderId:e.orderId,hideParentName:e.hideParentName,thread:e.thread,hideOrphanedState:e.hideOrphanedState})}),(0,i.jsx)(ec,{rootUser:e.rootUser,createdAt:e.createdAt,isPendingFromSinatra:e.isPendingFromSinatra,metaAddon:e.metaAddon})]})});function ec(e){return(0,i.jsxs)("span",{className:"comment_metadata--authorTimeCreated--i-0dp",children:[(0,i.jsx)("div",{className:"comment_metadata--author--7A-4- text--fontPos11--rO47d text--_fontBase--VaHfk",dir:"auto",children:e.rootUser}),"\xa0",(0,i.jsx)("div",{className:"comment_metadata--timeCreated--SlSA- text--fontPos11--rO47d text--_fontBase--VaHfk",children:e.isPendingFromSinatra?(0,c.tx)("comments.in_a_moment"):(0,i.jsx)(eo.h1,{date:e.createdAt,capitalize:!0})}),e.metaAddon]})}function eu(e){let t=(0,el.Kq)(e.thread);if(!e.hideOrphanedState&&t){if(e.orderId){let t=(0,c.tx)("comments.unattached");return(0,c.tx)("comments.parent_name_and_number",{parentName:t,commentNumber:e.orderId})}return null}return e.hideParentName||!e.parentName?e.orderId?(0,c.tx)("comments.number_only",{commentNumber:e.orderId}):null:e.orderId?(0,c.tx)("comments.parent_name_and_number",{parentName:e.parentName,commentNumber:e.orderId}):(0,i.jsx)("span",{children:e.parentName})}var em=n(678286),ep=n(371971),eh=n(152599);let ef=(0,eh.nF)((e,t)=>{let{receiptsAPI:n,comment:i}=t;n.markAsUnread(i.uuid).catch(t=>{let n=(0,c.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_unread");try{t=JSON.parse(t),e.dispatch(ep.s.error((0,em.J)(t,n)))}catch(t){e.dispatch(ep.s.error(n))}})}),eg=(0,eh.nF)((e,t)=>{let{receiptsAPI:n,thread:i}=t,r=i.comments.map(e=>e.uuid).filter(e=>!!e);n.markAsRead(r).catch(t=>{let n=(0,c.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{t=JSON.parse(t),e.dispatch(ep.s.error((0,em.J)(t,n)))}catch(t){e.dispatch(ep.s.error(n))}})});var ex=n(536378),e_=n(393192),ey=n(738418),eb=n(994344);function ev(e){let{thread:t,isUnread:n,copyLink:s,onDeleteThread:o,onDeleteThreadComplete:l,onDeleteThreadCancel:d}=e,{commentReceipts:u}=(0,ey.I_)(),m=(0,e_.fr)(),p=(0,a.wA)(),h=(0,F.tS)(),g=(0,B.TA)(),x=r.useCallback(()=>{u&&(n?p(f.AY({receiptsAPI:u,thread:t})):p(f.QY({receiptsAPI:u,comment:t.comments[0]})))},[u,p,n,t]),_=r.useCallback(()=>{m&&(n?p(eg({receiptsAPI:m,thread:t})):p(ef({receiptsAPI:m,comment:t.comments[0]})))},[m,p,n,t]),y=r.useCallback(()=>{s(t.comments[0])},[s,t]),b=r.useCallback(()=>{p((0,ex.to)({type:eb.E,data:{onConfirm:()=>o(t),onConfirmComplete:l,onCancel:d}}))},[p,o,d,l,t]),v=r.useMemo(()=>{if(g===t.comments[0].user_id&&!t.isCanvasMention&&(0,L.MV)(t.sidebarItemType))return(0,i.jsx)(V.q7,{onClick:b,children:(0,c.tx)("comments.delete_thread")},"deleteThread")},[t,g,b]),C=r.useMemo(()=>{let e=[];return m&&h&&t.isCanvasMention?e.push((0,i.jsx)(V.q7,{onClick:_,children:n?(0,c.tx)("comments.mark_as_read"):(0,c.tx)("comments.mark_as_unread")},"toggleUnreadCanvasMention")):u&&h&&!t.isCanvasMention&&(0,L.m)(t.sidebarItemType)&&e.push((0,i.jsx)(V.q7,{onClick:x,children:n?(0,c.tx)("comments.mark_as_read"):(0,c.tx)("comments.mark_as_unread")},"toggleUnreadComment")),e.push((0,i.jsx)(V.q7,{onClick:y,children:(0,c.tx)("comments.copy_link")},"copyCommentLink")),v&&e.push(v),e},[u,m,h,y,v,t.isCanvasMention,t.sidebarItemType,_,x,n]);return(0,i.jsx)(V.mc,{children:C})}let eC="comments_row_presentation--button--o2aHf",eE="comments_row_presentation--headerElement--PhnW4",ew="comments_row_presentation--countMetadata--6erqr";var ek=n(684081),eT=n(309270),ej=n(723378),eS=n(216057),eI=n(202562),eA=n(598034);let eN={width:72,height:72},eM=r.memo(function(e){return(0,i.jsxs)("div",{className:"comments_row_presentation--replyAndAttachmentCount--ndcj6",children:[0!==e.replyCount&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:ew,children:(0,c.tx)("comments.reply_count",{replyCount:e.replyCount})}),0!==e.attachmentCount&&(0,i.jsx)("div",{className:"comments_row_presentation--dot--ElKvQ comments_row_presentation--countMetadata--6erqr",children:"\xb7"})]}),0!==e.attachmentCount&&(0,i.jsx)("div",{className:ew,children:(0,c.tx)("comments.attachment_count",{attachmentCount:e.attachmentCount})})]})}),eR=r.memo(function(e){return(0,i.jsxs)(i.Fragment,{children:[e.postTitle&&(0,i.jsx)("div",{className:"comments_row_presentation--postTitle--KWr1J",children:e.postTitle}),!(0,er.I)(e.messageMeta)&&(0,i.jsx)(Q.HH,{className:"comments_row_presentation--commentMessage--eN6X- text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsisAfter3Lines--eBD0M ellipsis--_ellipsisAfterNLines--5f-ox comment_message--commentMessage--8DQUq",messageMeta:e.messageMeta,commentId:e.commentId}),(0,i.jsx)(eM,{replyCount:e.replyCount,attachmentCount:e.attachmentCount})]})}),eP=e=>e.stopPropagation(),eO=r.memo(function(e){let{copyLink:t,isPendingFromSinatra:n,optionsMenuRef:r,onDeleteThread:s,onDeleteThreadComplete:o,onDeleteThreadCancel:l,isUnavailable:d,isResolved:u,isUnread:m,onChangeResolveState:p,thread:h,isFocusedThread:f,userCanResolveThread:g,openPostDetailModal:_}=e,y=(0,a.d4)(e=>e.comments.hoveredPinIds),v=e.thread.replyCount||e.thread.comments.length-1,C=e.thread.attachments?.length||e.thread.comments.map(e=>e.attachments?.length||0).reduce((e,t)=>e+t,0)||0,E=(0,x.ID)(),w=function(e){let t=e.comments[0]?.attachments;return t&&t[0]}(h),k=e.avatars[0].avatar_user_handle,T=e.hideResolve||!g||n,j=h.sidebarItemType===L.kT.FEED_POST&&!(0,b.y)(),S=(0,i.jsx)(N.HG,{children:(0,i.jsx)(U.E,{"aria-label":(0,c.t)("comments.unavailable_offline"),"data-tooltip-type":ea.Ib.TEXT,"data-tooltip":(0,c.t)("comments.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline",children:(0,i.jsx)("span",{"aria-hidden":"true",children:(0,i.jsx)(J.B,{svg:ek.A})})})}),I=null!=h.commentPin,{manager:A,getTriggerProps:M}=V.b(),R=(0,i.jsxs)(V.bL,{manager:A,children:[(0,i.jsx)(H.d,{"aria-label":(0,c.t)("comments.more_actions"),...M(),children:(0,i.jsx)(z.J,{className:A.isOpen?void 0:eC})}),(0,i.jsx)(ev,{thread:h,isUnread:e.isUnread,copyLink:t,onDeleteThread:s,onDeleteThreadComplete:o,onDeleteThreadCancel:l})]}),P=(0,i.jsx)(es.K0,{svg:u?eS.A:ej.A,className:X()(u?"comments_row_presentation--resolvedButton--e7aEP comments_row_presentation--button--o2aHf":!I&&eC,e.isUnread?"":"comments_row_presentation--buttonRead--q9RZc"),"data-tooltip-type":ea.Ib.TEXT,"data-tooltip":I?(0,c.t)("comments.pinning.cannot_resolve"):u?(0,c.t)("comments.mark_as_unresolved"):(0,c.t)("comments.mark_as_resolved"),onClick:p,onMouseDown:eP,disabled:I,children:u?(0,i.jsx)(G.g,{}):(0,i.jsx)(K.W,{})}),O=(0,i.jsx)(es.K0,{svg:eA.A,className:eC,"data-tooltip-type":ea.Ib.TEXT,"data-tooltip":(0,c.t)("fig_feed.view_post"),onClick:_,onMouseDown:eP}),D=(0,i.jsxs)(i.Fragment,{children:[!n&&!j&&(0,i.jsx)(N.HG,{className:eE,ref:r,children:R}),e.thread.sidebarItemType===L.kT.FEED_POST&&(0,i.jsx)(N.HG,{className:eE,ref:r,children:O}),!T&&(0,i.jsx)(N.HG,{className:eE,children:P})]}),F=E&&w&&(0,i.jsx)("div",{className:"comments_row_presentation--attachmentThumbnail--Lf799",children:(0,i.jsx)(Z.MH,{dimensions:eN,thumbnailUrl:w.thumbnailUrl,altText:w.altText||(0,c.t)("comments.attachment_thumbnail_alt_text_default"),onClick:Y.lQ,onRightClick:Y.lQ})}),B=e.thread.sidebarItemType===L.kT.FEED_POST&&(0,i.jsxs)("div",{className:"comments_row_presentation--postThumbnailContainer--VKANN",children:[(0,i.jsx)("img",{src:e.thread.feedPostThumbnail,alt:"placeholder",className:"comments_row_presentation--postThumbnail--3LuZB feed_post_popover_modal--postThumbnail--HFWzW",style:{backgroundColor:e.thread.feedPostThumbnailBackground,padding:e.thread.padFeedPostThumbnail?"8px":"0"}}),e.thread.feedPostNumContent>1&&(0,i.jsx)("div",{className:"comments_row_presentation--numContent--mcTdG comments_row_presentation--postThumbnailOverlay--MMFs1 feed_post_popover_modal--postThumbnailOverlay--TWQ8n",children:(0,i.jsx)(J.B,{svg:eT.A,className:"comments_row_presentation--overlayIcon--n16o0"})})]});return(0,i.jsx)("div",{className:X()(h.isActive?"comments_row_presentation--commentSelected--GQbep comments_row_presentation--_comment--Xqq3N text--fontPos11--rO47d text--_fontBase--VaHfk":f||A.isOpen?"comments_row_presentation--commentFocused--7HKOS comments_row_presentation--_comment--Xqq3N text--fontPos11--rO47d text--_fontBase--VaHfk":"comments_row_presentation--comment--CVLzH comments_row_presentation--_comment--Xqq3N text--fontPos11--rO47d text--_fontBase--VaHfk",{"comments_row_presentation--unread--CQRhF":m,"comments_row_presentation--pinHovered--MwaiL":y.includes(h.id)}),children:(0,i.jsxs)("div",{className:"comments_row_presentation--commentInner--p9Anv",children:[(0,i.jsx)("div",{className:"comments_row_presentation--blueDot--bcCO5",children:(0,i.jsx)(W.H,{})}),(0,i.jsxs)("span",{className:"comments_row_presentation--commentHeader--S3gwf",children:[e.thread.sidebarItemType===L.kT.FEED_POST&&(0,i.jsx)(J.B,{svg:eI.A,className:"comments_row_presentation--postIcon--fYtrA"}),(0,i.jsx)(ei,{maxAvatarsShown:4,avatars:e.avatars,grayscale:!e.isUnread&&e.thread.sidebarItemType!==L.kT.LITMUS_COMMENT_THREAD}),(0,i.jsx)("div",{className:A.isOpen?"comments_row_presentation--buttonsVisible--k2WdN comments_row_presentation--buttons--nt9Rn":"comments_row_presentation--buttons--nt9Rn",children:d?S:D})]}),(0,i.jsxs)("div",{className:F?"comments_row_presentation--commentWithAttachmentThumbnail--HkjCU":void 0,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(ed,{rootUser:k,createdAt:e.thread.comments[0].created_at,isPendingFromSinatra:n,orderId:e.orderId,parentName:e.parentName,hideParentName:e.hideParentName,thread:e.thread,hideOrphanedState:e.hideOrphanedState,metaAddon:e.metaAddon?.(e.thread)}),B,(0,i.jsx)(eR,{commentId:e.thread.comments[0].id,messageMeta:e.thread.comments[0].message_meta,replyCount:v,attachmentCount:C,postTitle:e.thread.sidebarItemType===L.kT.FEED_POST?e.thread.feedPostTitle:void 0})]}),F]})]})})});var eD=n(692376),eL=n(2227),eF=n(8542),eB=n(443389),eU=n(875253),eV=n(888903),eH=n(490549),ez=n(450207),eG=n(350096),eK=n(90154),eW=n(772293),eq=n(341153),eX=n(776888),eY=n(323747),eJ=n(394396),eZ=n(920675),eQ=n(895414),e$=n(665933),e0=n(245834),e1=n(27005),e2=n(925387);function e5(e){let t=(0,a.d4)(e=>e.mirror.appModel.pagesList);return null===e.page||(0,eY.Fy)(t,e.page)===eD.xal.LOADED}let e4=r.memo(function(e){let{element:t}=e,{comments:n}=t,{getClosestThread:s,onResolveComment:o}=e.extras,l=r.useMemo(()=>{let e=new Map,t=[];return n.forEach(n=>{if(e.has(n.user.id)){let i=e.get(n.user.id);t[i].num_unread_comments+=n.isUnread?1:0,t[i].num_comments+=1}else t.push({avatar_url:n.user.img_url,avatar_user_id:n.user.id,avatar_user_handle:n.user.handle,num_unread_comments:n.isUnread?1:0,num_comments:1}),e.set(n.user.id,t.length-1)}),t},[n]),d=!!n[0].resolved_at,u=n.some(e=>e.isUnread),m=!!t.isPendingFromSinatra,p=r.useRef(null),h=r.useRef(null),_=(0,R.ZC)(t.isActive),y=r.useRef(!1),b=(0,B.iZ)(),C=(0,F.q5)(),E=(0,P.yZ)(),w=e5(t),k=r.useMemo(()=>!E&&!w,[E,w]),T=(0,x.hB)(),j=r.useMemo(()=>T(t),[T,t]),S=t.id,{isFocusedThread:I,onCanvasMentionSelect:U,onCommentFocus:V,onCommentBlur:H,onCommentMouseEnter:z,onCommentMouseLeave:G,onCommentSelect:K,onChangeResolveState:W,onCanvasMentionCopyLink:q,openPostDetailModal:X}=function(e,t,n,i){let s=(0,a.wA)(),{comments:o}=e,l=!!o[0]?.resolved_at,d=r.useRef(!1),[u,m]=r.useState(!1),p=e.id,h=!F.q5()?.canEdit,_=(0,a.d4)(e=>e.mirror.appModel.showComments),y=(0,P.yZ)(),b=e5(e),v=r.useContext(eQ.kw),C=(0,eK.s)(),E=(0,el.Kq)(e),w=(0,eq.Z)("comments_navigate"),k=!!e.isPendingFromSinatra,T=(0,ey.I_)(),j=(0,e_.fr)(),S=(0,a.Pj)(),I=(0,e$.n0)(),A=(0,e0.VS)({pagesList:I,isComparingChanges:!1,enabled:!!e.isCanvasMention}),N=(0,eX.dh)(!!e.isCanvasMention),M=r.useCallback(()=>{let t=S.getState().openFile;if(t){let n=(0,eJ.jN)({file:t,nodeId:e.nodeId,isFigJam:t.editorType===eZ._Y.WHITEBOARD});s(eH.S({url:n}))}},[s,e.nodeId,S]),R=r.useCallback(()=>y||b?(s(eV.F.dequeue({matchType:"offline-comment-navigation"})),!1):(s(eV.F.enqueue({type:"offline-comment-navigation",message:(0,c.t)("comments.unavailable_offline")})),!0),[y,b,s]),O=r.useCallback(async()=>{if(!R()&&(d.current=!0,s(f.Fm({threadId:p,source:void 0})),e.nodeId||e.stablePath)){let t;let n=S.getState().mirror.sceneGraph;e.isCanvasMention&&j&&s(eg({thread:e,receiptsAPI:j}));let i=eL.x7;e.stablePath?i=`[${e.stablePath.join(",")}]`:e.nodeId&&(i=`[${e.nodeId}]`),e.isCanvasMention&&e.page&&e.page!==N&&(await A(e.page),await (0,eF.yQ)()),eD.glU?.setActiveCommentAnchorData({stablePath:i}),eD.fp8?.markMentionsAsReadFromStablePath(i),e.stablePath?t=n.getFromStablePath(e.stablePath):e.nodeId&&(t=n.get(e.nodeId)),t&&w((0,e2.e)(t,v,"canvas-mentions"),{additionalTrackEventParams:{text_node_id_path:e.nodeId,mention_id:e.uuid}})}},[R,s,p,e,S,j,w,v,A,N]),D=(0,x.Ue)(),B=r.useMemo(()=>{if(D)return D(e)},[D,e]),U=r.useCallback(()=>{if(R())return;d.current=!0,h&&!_&&eW.Y5.triggerAction("toggle-show-comments",{source:"comment_sidebar_list"}),B&&B(),eB.sn.start("view_comment_thread");let n=v.getViewportInfo(),r={thread:e,viewport:v,config:C,navigate:w,isOrphanedComment:E,triggerRef:i};if(s(k?f.l5(r):f.bB({...r,receiptsAPI:T.commentReceipts})),!E&&!C.disableZoomViewportOnCommentSelection){let i=t(e.id);if(i){let t=eU.Mi.distance(e.canvasPosition,i?.canvasPosition),r=(0,eG.ez)(g.i$,t,n.zoomScale);r>n.zoomScale&&(v.setZoomScale(n.zoomScale,r),v.setCanvasSpaceCenter(e.canvasPosition,n,r))}}},[T.commentReceipts,C,_,s,t,E,k,w,B,R,e,i,h,v]),V=r.useCallback(()=>{m(!0),s(f.NJ({threadId:p}))},[s,p]),H=r.useCallback(()=>{requestAnimationFrame(()=>{m(!1)}),s(f.Oo({threadId:p}))},[s,p]),z=r.useCallback(()=>{s(f.NJ({threadId:p}))},[s,p]);return{isFocusedThread:u,onCanvasMentionSelect:O,onCommentFocus:V,onCommentBlur:H,onCommentMouseEnter:z,onCommentMouseLeave:r.useCallback(()=>{d.current=!1,s(f.Oo({threadId:p}))},[s,p]),onCommentSelect:U,onChangeResolveState:r.useCallback(e=>{e.stopPropagation(),s(ez.oB()),n&&n(p,!l)},[p,s,n,l]),onCanvasMentionCopyLink:M,openPostDetailModal:r.useCallback(()=>{e.sidebarItemType===L.kT.FEED_POST&&s((0,ex.to)({type:e1.K,data:{postUuid:e.feedPostPublicUuid,inFileView:!0}}))},[s,e])}}(t,s,o,h),{scrollableRef:Y}=e,{isActive:J}=t;r.useEffect(()=>{y.current||!J||_||Y.current?.scrollToRow(S)},[J,S,_,Y]);let Z=b?.id,Q=r.useMemo(()=>!!(0,L.Vk)(t.sidebarItemType)&&(!(0,L.m)(t.sidebarItemType)||(C&&Z?(0,A.To)(t,C,Z):null)),[C,Z,t]),$=(0,M.rf)(`comment-sidebar-comment-${t.id}`,"click",K),ee=(0,v.k)(),et=(0,D.Om)();ee&&($=()=>et("SELECT_COMMENT_SIDEBAR")),t.isCanvasMention&&($=U);let en=t.comments.length-1,ei=u?(0,c.t)("comments.aria_label_select_comment_descriptive_unread",{authorString:l[0].avatar_user_handle,contentString:(0,O.F)(t.comments[0].message_meta[0]?.t)??"",replyString:(0,c.t)("comments.reply_count",{replyCount:en})}):(0,c.t)("comments.aria_label_select_comment_descriptive",{authorString:l[0].avatar_user_handle,contentString:(0,O.F)(t.comments[0].message_meta[0]?.t)??"",replyString:(0,c.t)("comments.reply_count",{replyCount:en})}),er=t.isCanvasMention?q:e.extras.copyLink,ea=r.useCallback(()=>{requestAnimationFrame(()=>h.current?.focus())},[]),es=(0,i.jsx)(eO,{avatars:l,copyLink:er,hideOrphanedState:e.extras.hideOrphanedState,hideParentName:e.extras.hidePageName,hideResolve:e.extras.hideResolve||!!t.isCanvasMention,isFocusedThread:I,isPendingFromSinatra:m,isResolved:d,isUnavailable:k,isUnread:u,metaAddon:e.extras.metaAddon,onChangeResolveState:W,onDeleteThread:e.extras.onDeleteThread,onDeleteThreadCancel:ea,onDeleteThreadComplete:e.extras.onDeleteThreadComplete,openPostDetailModal:X,optionsMenuRef:p,orderId:t.comments[0].order_id||null,parentName:j,thread:t,userCanResolveThread:Q});return(0,i.jsxs)(N.bL,{className:"comments_row_presentation--cardRoot--9JEi7",children:[(0,i.jsx)(N.O6,{ref:h,onBlur:H,onFocus:V,onMouseEnter:z,onMouseLeave:G,className:"comments_row_presentation--cardButton--e4FKx",onClick:$,"aria-label":ei,"aria-expanded":t.isActive}),es]})}),e3=r.memo(function(e){let{index:t,start:n,measureRef:a}=e.virtualItem,{setSize:s}=e,o=r.useRef(t);r.useEffect(()=>{o.current=t},[t,o]);let l=r.useCallback(e=>{let t=e?.getBoundingClientRect().height;t&&s(o.current,t),a(e)},[o,a,s]);return(0,i.jsx)("div",{ref:l,style:{position:"absolute",top:n,left:0,width:"100%"},children:e.children})});function e6(e){let t=r.useRef(null),{elements:n}=e,a=(0,x.Lc)(),s=r.useRef(n);r.useEffect(()=>{s.current=n},[n]);let o=(0,S.wY)(t),{estimatedSize:l}=e,d=r.useRef(null),c=r.useRef(new Map),u=r.useCallback(e=>0===n.length?0:c.current.get(e)||l,[n,l]),m=r.useCallback((e,t)=>{c.current.set(e,t)},[]),p=(0,j.z)({size:n.length,parentRef:d,estimateSize:u,overscan:10,paddingEnd:a}),h=p.scrollToIndex,f=r.useRef({scrollToRow:t=>{h(n.findIndex(n=>n[e.elementKey]===t))}});return r.useEffect(()=>{f.current={scrollToRow:t=>{h(n.findIndex(n=>n[e.elementKey]===t))}}},[n,h,e.elementKey]),(0,i.jsx)("div",{ref:t,className:"comments_sidebar_list--container--199De",children:(0,i.jsx)(I.P,{className:"comments_sidebar_list--scrollContainer--FEDKD",scrollContainerRef:d,height:o?.height||0,children:(0,i.jsx)("div",{style:{height:`${p.totalSize}px`,width:"100%",position:"relative",marginTop:"var(--spacer-1)"},children:p.virtualItems.map(t=>{let n=e.elements[t.index],r=n[e.elementKey],a=e.row;return(0,i.jsx)(e3,{virtualItem:t,setSize:m,children:(0,i.jsx)(a,{element:n,dataset:s,scrollableRef:f,extras:e.extras})},r)})})})})}let e7=r.memo(function(e){let{onResolveComment:t,hideResolve:n,copyLink:a,hidePageName:s,hideOrphanedState:o,onDeleteThread:l,onDeleteThreadComplete:d,metaAddon:c}=e,u=(0,A.$I)(e.items),m=r.useMemo(()=>({onResolveComment:t,getClosestThread:u,hideResolve:n,copyLink:a,hidePageName:s,hideOrphanedState:o,onDeleteThread:l,onDeleteThreadComplete:d,metaAddon:c}),[t,u,n,a,s,o,l,d,c]);return(0,i.jsx)(e6,{elements:e.items,elementKey:"id",row:e4,estimatedSize:133,extras:m})});var e9=n(342931),e8=n(378721),te=n(730436),tt=n(205073),tn=n(617960);let ti=r.forwardRef((e,t)=>{let{searchInputRef:n,onSearchKeyDown:r}=(0,tn.ne)(e,t);return(0,i.jsx)("div",{className:"sidebar_search--searchContainer--bik8n",children:(0,i.jsx)(tt.D,{ref:n,"aria-description":(0,c.t)("general.search_will_update"),"aria-label":(0,c.t)("comments.search"),disabled:e.disabled,onChange:e.onChange,onKeyDown:r,placeholder:e.placeholder||(0,c.t)("general.search"),recordingKey:e.recordingKey,spellCheck:!1,value:e.query})})});ti.displayName="sidebarSearchBar";var tr=n(415839),ta=n(847923),ts=n(723850),to=n(439906),tl=n(337812);let td=(0,eh.nF)((e,t)=>{let n=tl.Ay.put(`/api/file/${t.key}/file_followers`,{notification_preference:t.notification_preference}).catch(t=>{let n=t.data?.message||"An error occurred while updating notification preference.";e.dispatch(ep.s.flash(n)),console.error(t)}),i=e.getState().user?.id;t.id?to.WB()?.optimisticallyUpdate({FileFollower:{[t.id]:{notificationPreference:t.notification_preference}}},n):i&&to.WB()?.optimisticallyCreate({FileFollower:{[`optimistic-id-${t.key}`]:{key:t.key,userId:i,notificationPreference:t.notification_preference,unreadComments:null,statusChangeNotifs:!1}}},n)});var tc=n(760367),tu=n(562418),tm=(e=>(e.ALL="all",e.PARTICIPATING="participating",e.NONE="none",e))(tm||{}),tp=n(910496),th=n(649560);function tf(){let e=(0,a.d4)(F.sS),t=(0,B.iZ)(),n=(0,tc.jp)(),s=(0,ey.I_)(),o=(0,e_.fr)(),l=(0,tc.n6)(),d=(0,x.p4)(),u=(0,tu.m0)(),m=(0,a.wA)(),p=(0,a.d4)(e=>e.mirror.appModel.showComments),h=r.useCallback(()=>{eW.Y5.triggerAction("toggle-show-comments",{source:"comments_sidebar_setting"})},[]),g=(0,ta.R)(e=>e.mirror.appModel.keyboardShortcuts),_=(0,tp.c1)(g,"toggle-show-comments"),y=(0,ts.am)();if(r.useEffect(()=>{y("Properties Panel Comments Tab Settings Opened")},[y]),!e||!t)return null;if("loaded"!==n.status)return(0,i.jsx)(V.mc,{children:(0,i.jsx)(V.q7,{disabled:!0,onClick:Y.lQ,children:(0,c.tx)("comments.error_loading_notification_preferences")})});let b=n?.data?.notificationPreference||tm.NONE,v=n?.data?.statusChangeNotifs??!1,C=t=>{t!==b&&(m(td({id:n?.data?.id,key:e,notification_preference:t})),y("Comments Notification Preference Changed",{newPreference:t,fileKey:e}))},E=i=>{if(i===v)return;let r=th.sr.updateStatusChangePreferences({fileKey:e,optIn:i}).catch(e=>{let t=e.data?.message||"An error occurred while updating status change preference.";m(ep.s.flash(t)),console.error(e)});n?.data?.id?to.WB()?.optimisticallyUpdate({FileFollower:{[n?.data?.id]:{statusChangeNotifs:i}}},r):t?.id&&to.WB()?.optimisticallyCreate({FileFollower:{[`optimistic-id-${e}`]:{key:e,userId:t.id,notificationPreference:null,unreadComments:null,statusChangeNotifs:i}}},r),y("Dev Mode Notification Preference Changed",{newPreference:i,fileKey:e})};return(0,i.jsxs)(V.mc,{children:[!d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tr.H_,{checked:!p,onChange:h,children:[(0,c.tx)("comments.hide_comments"),_&&(0,i.jsx)(V.Ov,{children:(0,i.jsx)(V.ME,{children:(0,i.jsx)(V.rm,{children:_})})})]},"preference"),(0,i.jsx)(V.wv,{})]}),(0,i.jsxs)(tr.z6,{onChange:e=>C(e),title:(0,i.jsx)(V.hE,{children:(0,c.tx)("comments.comment_notifications")}),value:b,children:[(0,i.jsx)(tr.CU,{value:tm.ALL,children:(0,c.tx)("comments.everything_option")},"notification-all"),(0,i.jsx)(tr.CU,{value:tm.PARTICIPATING,children:(0,c.tx)("comments.just_mentions_and_replies_option")},"notification-participating"),(0,i.jsx)(tr.CU,{value:tm.NONE,children:(0,c.tx)("comments.nothing_option")},"notification-none")]},"comment-notification-title"),u&&(0,i.jsxs)(tr.z6,{title:(0,i.jsx)(V.hE,{children:(0,c.tx)("comments.dev_mode_notifications")}),onChange:e=>E("true"===e),value:v?"true":"false",children:[(0,i.jsx)(tr.CU,{value:"true",children:(0,c.tx)("comments.status_changes")},"notification-dm-status-changes"),(0,i.jsx)(tr.CU,{value:"false",children:(0,c.tx)("comments.nothing_option")},"notification-dm-none")]},"dev-mode-notification-title"),(0,i.jsx)(V.q7,{onClick:()=>{let e=s.commentReceipts;e&&o&&m(f.Tb({commentReceiptsAPI:e,canvasMentionReceiptsAPI:o}))},disabled:0===l,children:(0,c.tx)("comments.mark_all_as_read")},"mark_all_read")]})}var tg=n(843003);let tx="comments_sidebar_header--headerIconButtonSel--kywO1";function t_(e){let t=(0,a.wA)(),{getTriggerProps:n,manager:s}=V.b(),o=(0,v.k)(),l=(0,D.Om)();(0,tg.Z)(s);let d=(0,R.ZC)(s.isOpen);return(r.useEffect(()=>{if(d!==s.isOpen&&o)return l("SELECT_COMMENT_SIDEBAR");d&&!s.isOpen&&t(f.UU())},[t,o,s.isOpen,d,l]),e.hideSettingsDropdown)?null:(0,i.jsxs)(V.bL,{manager:s,children:[(0,i.jsx)(H.d,{...n(),"aria-label":(0,c.t)("comments.settings"),children:(0,i.jsx)(z.J,{className:X()(s.isOpen&&tx)})}),(0,i.jsx)(tf,{})]})}var ty=n(668545),tb=n(660852);function tv({activeFilters:e,...t}){let n=(0,a.wA)(),{getTriggerProps:s,manager:o}=V.b(),l=(0,r.useMemo)(()=>{let t=new Set(e);return e.has(e9.mW.RESOLVED)?t.delete(e9.mW.RESOLVED):t.add(e9.mW.RESOLVED),t},[e]),d=t.filters.some(e=>l.has(e)),u="all"!==t.activeMode,m=(d||u)&&!o.isOpen,p=r.useMemo(()=>{let e=[];return t.sorts.length>0&&e.push((0,i.jsx)(tr.z6,{title:(0,i.jsx)(V.r1,{children:(0,c.t)("comments.sort")}),onChange:t.threadManager.setSort,value:t.activeSort,children:t.sorts.map(e=>(0,i.jsx)(tr.CU,{value:e,children:(0,T.L9)(e)},`sort-option-${e}`))},"sort-group")),t.filters.length>0&&e.push((0,i.jsx)(V.YJ,{title:(0,i.jsx)(V.r1,{children:(0,c.t)("comments.filter")}),children:t.filters.map(e=>(0,i.jsx)(tr.H_,{checked:l.has(e),onChange:()=>t.threadManager.toggleFilter(e),disabled:T.vO[t.activeMode].includes(e),children:(0,T.T4)(e)},`filter-option-${e}`))},"filter-group")),t.modes&&t.modes.length>0&&e.push((0,i.jsx)(tr.z6,{title:(0,i.jsx)(V.r1,{children:(0,c.t)("comments.mode")}),onChange:t.threadManager.setMode,value:t.activeMode,children:t.modes.map(e=>(0,i.jsx)(tr.CU,{value:e,children:(0,T.ek)(e)},`mode-option-${e}`))},"mode-group")),e},[t.sorts,t.filters,t.modes,t.activeSort,t.threadManager,t.activeMode,l]),h=(0,R.ZC)(o.isOpen)??!1;return r.useEffect(()=>{h!==o.isOpen&&n(f.UU())},[n,o.isOpen,h]),(0,i.jsxs)(V.bL,{manager:o,children:[(0,i.jsx)(H.d,{...s(),"aria-label":(0,c.t)("comments.sort_filter"),children:(0,i.jsx)(J.B,{className:X()(m?"comments_sidebar_header--sortButtonActive--2QJIQ":"comments_sidebar_header--headerIconButton--zGa3b",o.isOpen&&tx),svg:m?tb.A:ty.A})}),(0,i.jsx)(V.mc,{children:p})]})}function tC(e){let t=(0,a.wA)(),n=r.useCallback(()=>{t(f.UU()),e.threadManager.setQuery("")},[t,e.threadManager]),s=r.useCallback(n=>{t(f.UU()),e.threadManager.setQuery(n)},[t,e.threadManager]);return(0,i.jsxs)("div",{className:e.stackHeader?"comments_sidebar_header--sidebarHeaderStacked--8C8Ke comments_sidebar_header--sidebarHeader--Wi0Uw text--fontPos11--rO47d text--_fontBase--VaHfk":"comments_sidebar_header--sidebarHeader--Wi0Uw text--fontPos11--rO47d text--_fontBase--VaHfk",children:[(0,i.jsx)(ti,{focusOnMount:!1,query:e.activeQuery||"",clearSearch:n,onChange:s}),(0,i.jsxs)("div",{className:"comments_sidebar_header--sidebarHeaderButtons--nvLLw",children:[(0,i.jsx)(tv,{activeFilters:e.activeFilters,activeMode:e.activeMode,activeSort:e.activeSort,filters:e.filters,modes:e.modes,sorts:e.sorts,threadManager:e.threadManager}),(0,i.jsx)(t_,{hideSettingsDropdown:e.hideSettingsDropdown}),e.onCloseButton&&(0,i.jsx)(e8.K,{"aria-label":(0,c.t)("common.close"),onClick:e.onCloseButton,recordingKey:"threadHeader",children:(0,i.jsx)(te.X,{})})]})]})}var tE=n(254645);function tw(e){return(0,i.jsx)("div",{className:"empty_state_message_view--emptyStateWrapper---mJ2K",children:(0,i.jsxs)("div",{className:"empty_state_message_view--emptyStateInner--F3vdn",children:[(0,i.jsx)(J.B,{className:"empty_state_message_view--commentTool--dGl0M",svg:tE.A}),(0,i.jsx)("div",{className:"empty_state_message_view--emptyStateMessage--T0Joz",children:e.message})]})})}function tk(e){return e.hasActiveQuery?(0,i.jsx)(tw,{message:(0,i.jsx)(o.T,{role:"alert",children:(0,c.tx)("comments.no_comments_matched_your_search")})}):({filters:e.filters}).filters.has("yours")?(0,i.jsx)(tw,{message:(0,c.tx)("comments.when_you_leave_a_comment_or_get_mentioned_in_one_it_ll_show_up_here")}):(0,i.jsx)(tw,{message:(0,c.tx)("comments.give_feedback_ask_a_question_or_just_leave_a_note_of_appreciation_click_anywhere_in_the_file_to_leave_a_comment")})}function tT({loadedSidebarItems:e,...t}){let n=(0,E.dH)(),{activeQuery:a,activeFilters:s}=r.useContext(T.hh),o=!a||a&&!e.length,l=e.length,d=(0,C.q)(),c=(0,v.k)();return(0,y.T8)((0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(k.Mw,{panelName:k.ON.COMMENTS}),o&&!l&&!c&&(0,i.jsx)(tk,{hasActiveQuery:!!a,filters:s,empty:!e.length}),(0,i.jsx)(e7,{items:e,onResolveComment:t.onResolveComment,hideResolve:t.hideResolve,copyLink:t.copyLink,onDeleteThread:t.onDeleteThread,onDeleteThreadComplete:t.onDeleteThreadComplete,hidePageName:t.hidePageName,hideOrphanedState:t.hideOrphanedState})]}),w.e0.COMMENTS_TOOL,{currentTool:n})}let tj=[e9.hJ.COMMENTS_ONLY,e9.hJ.POSTS_ONLY];function tS(e){return(0,i.jsx)(u.k,{id:"CommentsSidebarPanel",children:(0,i.jsx)(m.u9,{label:"CommentsSidebarPanel",children:(0,i.jsx)(tI,{...e})})})}function tI(e){let t=(0,a.wA)(),{activeQuery:n,activeSort:o,activeMode:u,activeFilters:m,filteredSidebarItems:y,threadManager:v}=r.useContext(T.hh),C=(0,x.Qj)(),E=(0,x.Yo)(),w=(0,x.lM)(),k=r.useMemo(()=>e.sorts&&Array.from(e.sorts)||C,[e.sorts,C]),j=r.useMemo(()=>e.filters&&Array.from(e.filters)||E,[e.filters,E]),S=r.useMemo(()=>(0,b.y)()&&!w?tj:void 0,[w]),I=r.useMemo(()=>"loaded"===y.status&&y.data||[],[y]),A=r.useRef(I);r.useEffect(()=>{A.current=I},[I,A]);let N=r.useCallback((e,n)=>{let i=A.current.find(t=>t.id===e);i&&t(f.hx({thread:i,resolved:n}));let r=(0,T.oS)(m,e9.mW.RESOLVED);n&&!r&&P.current?.focus()},[A,t,m]),M=r.useCallback(e=>{(0,s.B1)(e.comments[0],"thread.comments[0] is null"),t(f.Mv({comment:e.comments[0]}))},[t]),R=r.useCallback(()=>{requestAnimationFrame(()=>P.current?.focus())},[]),P=r.useRef(null),O=e.isShown??!0;r.useEffect(()=>{if(!O)return;let e=P.current;if(!e)return;let t=()=>(e?.focus(),document.activeElement===e);requestAnimationFrame(()=>{t()||setTimeout(t,100)})},[O]);let{disableSidebar:D}=(0,g.Z5)(),L=r.useCallback(()=>{(0,g.uw)({disableSidebar:!1})},[]),F=(0,_.v)(),B=e.copyLinkOverride??F,U=(0,l.Mj)(P);return D?(0,i.jsxs)("div",{className:h.s.flex.flexColumn.justifyStart.alignCenter.m8.mt18.$,children:[(0,c.tx)("comments.you_have_disabled_the_comments_sidebar_via_the_debug_menu"),(0,i.jsx)("div",{className:h.s.flex.flexRow.justifyCenter.alignCenter.$,children:(0,i.jsx)("button",{className:h.s.p10.w100.m8.$,style:{backgroundColor:"green",color:"white"},onClick:L,children:(0,c.tx)("comments.re_enable")})})]}):(0,i.jsxs)(d.b,{"aria-label":(0,c.t)("fullscreen.accessibility.comments_sidebar"),className:"comments_sidebar--container--74bAt","data-comments-sidebar":!0,"data-fullscreen-intercept":!0,ref:U,children:[(0,i.jsx)(tC,{activeFilters:m,activeMode:u,activeQuery:n,activeSort:o,filters:j,hideSettingsDropdown:e.hideSettingsDropdown,modes:S,onCloseButton:e.onCloseButton,sorts:k,stackHeader:e.stackHeader,threadManager:v}),(0,i.jsx)(p.x,{className:"comments_sidebar--loading--piCpA",isLoading:"loading"===y.status,children:()=>(0,i.jsx)(tT,{hidePageName:e.hidePageName,hideOrphanedState:e.hideOrphanedState,onResolveComment:N,copyLink:B,onDeleteThread:M,onDeleteThreadComplete:R,hideResolve:e.hideResolve,loadedSidebarItems:I})})]})}},374073:(e,t,n)=>{n.d(t,{$2:()=>io,To:()=>ir,$I:()=>ii});var i=n(239976),r=n(105652),a=n(20002),s=n(295870),o=n(270450),l=n(445019),d=n(723850),c=n(875253),u=n(806130),m=n(543595),p=n(92184),h=n(819316),f=n(27414),g=n(304315),x=n(738418),_=n(760367),y=n(350096),b=n(90154),v=n(202648),C=n(692376),E=n(854225),w=n(270351),k=n(450207),T=n(625902),j=n(381193),S=n(681717),I=n(816984),A=n(151370),N=n(893749),M=n(126278),R=n(959668),P=n(324880),O=n(720410),D=n(1007),L=n(941452),F=n(605985),B=n(157750),U=n(895414),V=n(805242),H=n(224542),z=n.n(H),G=n(943866),K=n(393463),W=n(256801),q=n.n(W);class X{constructor(e,t,n,i){if(e.pins.length>1&&(this.showClusterCount=!0),!n)return;let r=Q(e,n);if(!r){i||1!==e.pins.length||e.pins[0].isOurs||(this.expandPin=!0);return}let a=r.pins.length>1&&e.pins.length>1?Z(r,t):J(r,t);this.initialPosition=a}}class Y{constructor(e,t,n){let i=n.pins.length>1&&e.pins.length>1?Z(n,t):J(n,t);this.finalPosition=i}}let J=(e,t)=>({x:e.x+e.x*(t-1),y:e.y+e.y*(t-1)}),Z=(e,t)=>({x:e.x+e.x*(t-1)-32,y:e.y+e.y*(t-1)-32}),Q=(e,t)=>{if(1===e.pins.length)return t.getParentOf(e.id);let n=t.getParentOf(e.pins[0].id)||null,i=n?new Set(n.pins.map(e=>e.id)):new Set;return e.pins.every(e=>i.has(e.id))||(n=null),n};var $=n(799635),ee=n(454457),et=n(319695),en=n(569693),ei=n(516163),er=n(559717),ea=n(691563);let es=et.ay-1,eo=r.memo(function({avatar:e,isInCluster:t,isGhost:n,initiallyHidden:a}){let{src:s,fallbackStyle:o}=(0,r.useMemo)(()=>{let t=(0,en.Sw)(e.avatar_url);if(t)return{src:t};let n=(0,ei.$L)(e.avatar_user_id,ei.us),i=(0,ei.Xx)(n);return{src:t,fallbackStyle:{backgroundColor:n,color:i}}},[e.avatar_url,e.avatar_user_id]),l=e.avatar_user_handle[0];return(0,i.jsx)("div",{className:z()(ea.H,{[er.my]:t,[er.v2]:n,[ea.K_]:t}),children:s?(0,i.jsx)("img",{src:s,className:z()(ea.my,!1===a?ea.el:null),draggable:!1,alt:l}):(0,i.jsx)("span",{className:z()(ea.e7,!1===a?ea.el:null),style:o,children:l})})}),el=r.memo(function({avatars:e,initiallyHidden:t}){let n=e.slice(0,es),r=e.slice(es+1),a=e[es];return(0,i.jsx)("div",{className:ea.dQ,children:(0,i.jsxs)("div",{className:ea.u_,children:[r.length?(0,i.jsx)("div",{className:ea.Ws,children:r.reverse().map(e=>(0,i.jsx)(eo,{avatar:e,initiallyHidden:t},e.avatar_user_id))}):null,a?(0,i.jsx)("div",{className:ea.OF,children:(0,i.jsx)(eo,{avatar:a,initiallyHidden:t})}):null,n.length?(0,i.jsx)("div",{className:ea.q_,children:n.reverse().map(e=>(0,i.jsx)(eo,{avatar:e,initiallyHidden:t},e.avatar_user_id))}):null]})})});function ed(e,t,n,i=!1){if(!t||!(0,$.x)())return Promise.resolve();let r=`translate3d(${t.x}px, ${t.y}px, 0px) scale(0.2)`;return new Promise((t,a)=>{let s=e.animate([{offset:n,transform:r}],{duration:200});s.onfinish=()=>{i&&(e.style.opacity="0"),t()},s.oncancel=()=>{a()}})}let ec=r.memo(function({cluster:e,selectedState:t,zoomScale:n,animationInfo:a}){let s=(0,r.useMemo)(()=>[...e.avatarMap.values()].sort((e,t)=>e.num_unread_comments>0&&t.num_unread_comments>0?e.num_comments>t.num_comments?-1:1:e.num_unread_comments>0?-1:t.num_unread_comments>0?1:e.num_comments>t.num_comments?-1:1).slice(0,5),[e.avatarMap]),o=1===s.length?s[0]:void 0,l=function(e,t){let n=(t-1)*e.x-32,i=(t-1)*e.y-32;return{x:e.x+n,y:e.y+i}}(e,n),d=(0,r.useRef)(null),c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(d.current){if(a instanceof X){let{initialPosition:t,showClusterCount:n}=a;if(d.current.style.opacity="1.0",n&&c.current){var e;(e=c.current)?(e.style.transition="none",e.style.opacity="1",(0,ee.G)(e,[],{duration:1e3}).then(()=>{e.style.removeProperty("opacity"),e.style.removeProperty("transition")})):Promise.resolve()}t&&ed(d.current,t,0,!1)}else if(a instanceof Y){let{finalPosition:e}=a;ed(d.current,e,1,!0)}}},[a]),(0,i.jsx)("div",{ref:d,"data-testid":"figma-comment-cluster",role:"button",tabIndex:0,className:z()(er.Di,{[er.gy]:e.isUnread,[er.rX]:t===S.LX.DIMMED}),style:{willChange:"transform",transform:`translate3d(${l.x}px, ${l.y}px, 0px) scale(var(--scale))`,opacity:a instanceof X?0:1,zIndex:a instanceof Y?-1:0},onClick:e.onClick,children:(0,i.jsxs)("div",{className:er.IS,"data-testid":"avatar-cluster",children:[(0,i.jsxs)("div",{className:er.u_,children:[o?(0,i.jsx)(eo,{avatar:o,isInCluster:!0,isGhost:!0}):null,s.map(e=>(0,i.jsx)(eo,{avatar:e,isInCluster:!0},e.avatar_user_id))]}),(0,i.jsx)("div",{ref:c,className:er.A3,"display-thread-count":e.pins.length})]})})});var eu=n(379141),em=n(443389),ep=n(499735),eh=n(99185),ef=n(297094),eg=n(193507),ex=n(772293);let e_=r.memo(function({absoluteBounds:e}){let{width:t,height:n,x:r,y:a}=e;return(0,i.jsx)("div",{className:"selection_box--selectionBox--JPpd7","data-testid":"figma-comment-selection-box",style:{width:t,height:n,left:r,top:a}})}),ey=e=>e.ctrlKey||e.altKey||e.shiftKey||e.metaKey;function eb(e,t){let n=(t-1)*e.x,i=(t-1)*e.y;return{x:e.x+n,y:e.y+i}}function ev(e,t,n,i=!1){if(!t||!(0,$.x)())return Promise.resolve();let r=`translate3d(${t.x}px, ${t.y}px, 0px) scale(0.2)`;return new Promise((t,a)=>{let s=e.animate([{offset:n,transform:r}],{duration:200});s.onfinish=()=>{i&&(e.style.opacity="0"),t()},s.oncancel=()=>{a()}})}let eC=r.memo(function({pin:e}){let t=(0,r.useMemo)(()=>(0,eh.p)((0,eg.sP)(e.previewMessageMeta),{ALLOWED_TAGS:["img","span"],ALLOWED_ATTR:["src","class"],ALLOWED_URI_REGEXP:new RegExp((0,K.CZ)("emoji/*"))}),[e.previewMessageMeta]),n=(0,r.useMemo)(()=>{let t=e.avatars.reduce((e,t)=>e+t.num_comments,0)-1,n=e.numAttachments,i=!!e.numUnreadReplies&&e.numUnreadReplies!==t,r=t?(0,eu.t)("comments.preview_reply_count",{replyCount:i?e.numUnreadReplies:t,new:i?"true":"false"}):"",a=n?(0,eu.t)("comments.attachment_count",{attachmentCount:n}):"",s="";return""!==r?s=""!==a?`${r} \xb7 ${a}`:r:""!==a&&(s=a),s},[e.avatars,e.numUnreadReplies,e.numAttachments]),a=(0,r.useMemo)(()=>(0,ef.JD)(e.createdAt,"short"),[e.createdAt]);return(0,i.jsxs)("div",{className:ea.$N,children:[(0,i.jsxs)("div",{className:ea.Ud,children:[(0,i.jsx)("div",{className:ea.T7,dir:"auto",children:e.avatars[0].avatar_user_handle}),(0,i.jsx)("div",{className:ea.Zr,children:a})]}),(0,i.jsx)("div",{className:ea.se,dir:"auto",children:t}),(0,i.jsx)("span",{className:ea.V_,children:n})]})});function eE(){return(0,i.jsx)("div",{className:ea.S})}let ew=r.memo(function({pin:e}){let{selectionBoxAnchor:t}=e,n=(0,D.Pl)({subscribeToUpdates_expensive:!!t});if(!t)return null;let r=eb(e,n),a=function(e,t,n){let i=eb(n,t),r=Math.min(e.x,i.x),a=Math.min(e.y,i.y);return{width:Math.max(e.x-r,i.x-r),height:Math.max(e.y-a,i.y-a),x:r,y:a}}(r,n,t);if(!a)return null;let s={x:a.x-r.x,y:a.y-r.y,width:a.width,height:a.height};return(0,i.jsx)(e_,{absoluteBounds:s})}),ek=r.memo(function({pin:e,selectedState:t,onPinClicked:n,onDragEnd:a,onDragUpdate:s,onDragStart:o,onContextMenu:l,animationInfo:d,recordingKey:u,avatarInitiallyHidden:m}){let p=(0,r.useRef)(null),[h,f]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),_=ep.rf(u,"click",r.useCallback(()=>{em.sn.start("view_comment_thread"),n(e.id)},[n,e.id])),{onPointerDown:y,dragOffset:b}=function({ref:e,canDrag:t,onDragStart:n,onDragEnd:i,onDragUpdate:a,onClick:s}){let[o,l]=(0,r.useState)("idle"),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[h,f]=(0,r.useState)({x:0,y:0}),g=(0,r.useCallback)(t=>{0!==t.button||ey(t)||"idle"!==o||(e.current?.setPointerCapture(t.pointerId),t.stopPropagation(),p({x:t.clientX,y:t.clientY}),l("ready"),u(!1))},[o,e]),x=(0,r.useCallback)(e=>{if(u(!0),"idle"===o||!m||!t)return;let i={x:e.clientX,y:e.clientY},r=c.Mi.subtract(m,i);f(r),"ready"===o?(l("dragging"),n(r)):a(r)},[o,n,a,m,t]),_=(0,r.useCallback)(t=>{"dragging"===o?(e.current?.releasePointerCapture(t.pointerId),t.stopPropagation(),i(h),f({x:0,y:0})):d||s(),l("idle")},[e,o,h,i,s,d]);return(0,r.useEffect)(()=>("idle"!==o&&(document.addEventListener("pointermove",x),document.addEventListener("pointerup",_)),()=>{document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",_)}),[x,_,o]),(0,r.useMemo)(()=>({onPointerDown:g,dragOffset:h}),[g,h])}((0,r.useMemo)(()=>({ref:p,canDrag:e.isDraggable,onDragStart:t=>o({id:e.id,offset:t}),onDragEnd:t=>a({id:e.id,offset:t}),onDragUpdate:t=>s({id:e.id,offset:t}),onClick:_}),[e,o,a,s,_]));(0,r.useEffect)(()=>{let t;return e.pending?t=setTimeout(()=>{x(!0)},500):x(!1),()=>{t&&clearTimeout(t)}},[e.pending]),(0,r.useEffect)(()=>{if(p.current){if(d instanceof X){let{initialPosition:t,expandPin:n}=d;if(t)p.current.style.opacity="1.0",ev(p.current,t,0,!1);else if(n){var e;f(!0),((e=p.current)?(requestAnimationFrame(()=>{e.style.setProperty("--expandAnimationTime","0.4s"),e.classList.add(ea.sz)}),(0,ee.G)(e,[],{duration:400,endDelay:3500}).then(()=>{e.classList.remove(ea.sz),e.style.removeProperty("--expandAnimationTime")})):Promise.resolve()).then(()=>{f(!1)})}}else if(d instanceof Y){let{finalPosition:e}=d;ev(p.current,e,1,!0)}}},[d]);let v=ep.BV(u,"pointerover",()=>{f(!0)});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"data-testid":`figma-comment-pin-${e.id}`,role:"button",tabIndex:0,className:z()(ea.ij,ea.C_,{[ea.wH]:t===S.LX.ACTIVE,[ea.rX]:t===S.LX.DIMMED,[ea.Fm]:e.pending||t===S.LX.ACTIVE,[ea.gy]:e.isUnread}),style:{opacity:d instanceof X&&d.initialPosition?0:1,zIndex:d instanceof Y?-1:void 0,transform:0!==b.x||0!==b.y?`translate3d(${-b.x}px, ${-b.y}px, 0px)`:void 0},onPointerDown:y,onContextMenu:t=>l(e.id,{x:e.x,y:e.y,width:23*Math.min(e.avatars.length,2)+32,height:-32},t.nativeEvent),onPointerOver:v,onPointerOut:()=>{f(!1)},children:(0,i.jsxs)("div",{className:z()(ea.kW,{[ea.tu]:e.avatars.length>1}),children:[g?(0,i.jsx)(eE,{}):(0,i.jsx)(el,{avatars:e.avatars,initiallyHidden:m}),h&&(0,i.jsx)(eC,{pin:e})]})}),e.selectionBoxAnchor&&h&&(0,i.jsx)(ew,{pin:e})]})}),eT=r.memo(function({x:e,y:t,children:n}){let a=(0,r.useRef)(null),s=r.useContext(U.kw),o=r.useCallback(function(n){let i=a.current;if(i){let r=eb({x:e,y:t},n.zoomScale);i.style.transform=`translate3d(${r.x}px, ${r.y}px, 0px)`}},[e,t]);return(0,r.useLayoutEffect)(()=>(o(s.getViewportInfo()),ex.Y5&&ex.Y5.viewport.on("onSetViewport",o),()=>{ex.Y5&&ex.Y5.viewport.removeListener("onSetViewport",o)}),[o,s]),(0,i.jsx)("div",{style:{willChange:"transform"},ref:a,children:n})}),ej=r.memo(function({pin:e,selectedState:t,onPinClicked:n,onDragEnd:r,onDragUpdate:a,onDragStart:s,onContextMenu:o,animationInfo:l,recordingKey:d,avatarInitiallyHidden:c}){return(0,i.jsx)(eT,{x:e.x,y:e.y,children:(0,i.jsx)(ek,{animationInfo:l,avatarInitiallyHidden:c,onContextMenu:o,onDragEnd:r,onDragStart:s,onDragUpdate:a,onPinClicked:n,pin:e,recordingKey:d,selectedState:t})})});function eS(e){let{children:t}=e,n=(0,r.useRef)(null),[a,s]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.nonce=(0,K.Ay)().csp_nonce,t.textContent=["/** @postcss-export-raw */\n.selection_box--selectionBox--JPpd7 {\n  position: absolute;\n  box-sizing: border-box;\n  border: dashed 2px var(--color-border-selected);\n  pointer-events: none;\n}\n","/** @postcss-export-raw */\n",er.Nz,ea.Nz].join("\n"),e.append(t),s(e)}},[]),(0,i.jsx)("div",{ref:n,"data-testid":"pin-renderer-shadow-dom-container",children:a&&(0,V.createPortal)(t,a)})}function eI({selectedPinId:e,dimUnselectedPins:t,emphasizedPinIds:n,clusteredThreads:a,clientConfig:s,shouldDisablePointerEvents:o,haveCommentsToShow:l,onPinClicked:d,onDragEnd:u,onDragUpdate:m,onDragStart:p,onContextMenu:h,disableFilteringPinsOnViewportChanges:f}){let g=(0,r.useContext)(U.kw),x=(0,D._X)({subscribeToUpdates_expensive:l}),_=(0,r.useMemo)(()=>g.getCommentsWrapperOffset(x),[g,x]),[y,b]=(0,r.useState)(x);x===y||f||b(x);let v=(0,G.ZC)(a),C=(0,r.useMemo)(()=>(function(e,t){let n=e.all();if(!t||0===t.all().length)return n.map(n=>n.pins.length>1?{cluster:n,animationInfo:new X(n,e.zoomScale,t,e.applyInstant)}:{cluster:n,animationInfo:{}});let i=n.reduce((e,t)=>(e.set(t.id,t),e),new Map),r=t.all(),a=r.reduce((e,t)=>(e.set(t.id,t),e),new Map),s=n.map(n=>{let i=a.get(n.id);return i?((0,S.xN)(n,i),{cluster:n,animationInfo:{}}):{cluster:n,animationInfo:new X(n,e.zoomScale,t,e.applyInstant)}}),o=r.filter(e=>!i.has(e.id)),l=q()(o,t=>{let n=Q(t,e);return n?[{cluster:t,animationInfo:new Y(t,e.zoomScale,n)}]:[]});return l.length>100?s:l.concat(s)})(a,v),[a,v]),E=(0,r.useMemo)(()=>{let e=function(e,t){let n=(0,D.qc)(t),i=(0,D.kE)(78,t.zoomScale),r=(0,c.UI)(n,i);return e.filter(({cluster:e})=>!(e.x<r.x)&&!(e.x>r.x+r.width)&&!(e.y<r.y)&&!(e.y>r.y+r.height))}(C,y);return e.sort((e,t)=>e.cluster.id<t.cluster.id?-1:1),e},[C,y]),w=(0-x.offsetX)*x.zoomScale+_.x,k=(0-x.offsetY)*x.zoomScale+_.y,T={top:`${x.y+x.height/2}px`,left:`${x.x+x.width/2}px`,transform:`translate(${w}px, ${k}px)`};return(0,i.jsx)("div",{className:z()({"pin_renderer--overlay--3h4w6":!0,"pin_renderer--overlayPassthrough--BGkks":x.isPanning||x.isZooming||o}),style:T,"data-testid":"clustered-comments-wrapper","aria-hidden":"true",children:(0,i.jsx)(eS,{children:(0,i.jsx)(i.Fragment,{children:E.map(({cluster:n,animationInfo:a})=>{let s;return s=e?n.pins.find(t=>t.id===e)?S.LX.ACTIVE:S.LX.DIMMED:n.pins.every(e=>e.isResolved)?S.LX.DIMMED:t?S.LX.DIMMED:S.LX.NORMAL,(0,i.jsx)(r.Fragment,{children:1===n.pins.length?(0,i.jsx)(ej,{pin:n.pins[0],recordingKey:`commentPin.${n.pins[0].id}`,selectedState:s,onPinClicked:d,onDragEnd:u,onDragUpdate:m,onDragStart:p,onContextMenu:h,animationInfo:a}):(0,i.jsx)(ec,{cluster:n,selectedState:s,zoomScale:x.zoomScale,animationInfo:a})},n.id)})})})})}var eA=(e=>(e[e.Gradual=0]="Gradual",e[e.Jump=1]="Jump",e))(eA||{});let eN=[E.NLJ.COMMENTS,E.NLJ.SELECT,E.NLJ.SCALE,E.NLJ.HAND,E.NLJ.TYPE],eM=(e,t,n,i)=>{let{threads:r}=e,a=r.map(e=>n(e)),s=r.map(e=>{let t=e.comments[0].client_meta;return t?.in_frame?t.node_id:void 0}),o=new Map;for(let e of a)for(let t of e.avatars)o.has(t.avatar_user_id)?(o.get(t.avatar_user_id).num_unread_comments+=t.num_unread_comments,o.get(t.avatar_user_id).num_comments+=t.num_comments):o.set(t.avatar_user_id,t);return{id:1===r.length?r[0].id:(0,S.Ao)(e,r.length),x:e.x,y:e.y,pins:a,isUnread:a.some(e=>e.isUnread),avatarMap:o,onClick:i(e,a),anchoredNode:s.every(e=>e===s[0])?s[0]:void 0,isPinnedToFile:a.some(e=>e.isPinnedToFile),isSinglePin:1===r.length,cluster:e,onKeyDown:()=>{}}};function eR(e){return{width:23*Math.min(e-1,2)+32,height:32}}let eP=r.memo(function(e){let t=!!e.activeThread||e.threads.length>0,n=(0,F.iZ)(),s=(0,b.s)(),o=(0,j.Z5)(),u=(0,a.wA)(),m=r.useContext(U.kw),p=(0,a.d4)(e=>e.mirror.appModel.currentTool),h=(0,B.ut)(C.Ez5?.editorState().handToolTemporarilyEnabled,!1),f=(0,l.md)(N.R),x=(0,L.BI)(),_=(0,a.d4)(e=>![E.m1T.DESIGN_LAYOUT,E.m1T.WHITEBOARD_LAYOUT,E.m1T.HISTORY,E.m1T.PREVIEW,E.m1T.COMMENTS,E.m1T.DEV_HANDOFF,E.m1T.SITES_LAYOUT].includes(e.mirror.appModel.activeCanvasEditModeType)||e.mirror.appModel.activeUserAction!==C.QOV.DEFAULT)&&(!x||x?.shouldOptimizeForIpadApp&&x?.shouldFadeCommentsDuringEdit),v=e.activeThread?.id===M.hm,V=v?null:e.activeThread?.id||null,H=(0,a.d4)(e=>e.comments.emphasizedPinIds),{zoomScale:z,deltaOffsetX:G,deltaOffsetY:K,deltaZoomScale:W}=(0,D.PD)({subscribeToUpdates_expensive:t}),{requestToDeselectCommentPin:q}=e,[X,Y]=r.useState({viewport:m.getViewportInfo(),hasJumped:!1}),J=z<X.viewport.zoomScale,Z=r.useRef(e.threads);r.useEffect(()=>{Z.current=e.threads},[e.threads]);let Q=r.useCallback(e=>Z.current?.find(t=>t.id===e)||null,[Z]),$=(0,a.d4)(e=>e.mirror.appModel.activeUserAction),ee=e.dragDisabledOverride||!eN.includes(p),et=(0,I.BK)(Q,e.pageId,e.setClientMeta,ee,e.requestToSelectCommentPin,f),en=(0,I.x5)(ee),ei=r.useMemo(()=>new Set(e.threads.filter(e=>en(e)).map(e=>e.id)),[en,e.threads]),er=r.useCallback(e=>{u(g.wg({threadId:e}));let t=Q(e);t&&m.setHovering(t.canvasPosition)},[m,u,Q]),ea=r.useCallback(e=>{u(g.RP({threadId:e})),m.setHovering(null)},[m,u]),es=(0,d.am)(),eo=r.useCallback((e,t)=>()=>{es("Comment Cluster Clicked",{clusterSize:t.length,commentThreadIds:t.map(e=>e.id)});let n=(0,y.xw)({config:o,clusterLocation:e,pins:t,currentViewport:m.getViewportInfo()});m.navigateTo(e,n),q&&q()},[o,m,es,q]),el=r.useCallback((e,t,n)=>{n.preventDefault(),n.stopPropagation();let i=Q(e);if(!i)return;let r=m.getViewportInfo(),a=(0,D.Z0)(r,t),s={x:a.x+t.height/2,y:a.y-t.width/2,height:0,width:0},o=(0,D.HD)(s,r);u(k.j7({type:P.Z7,data:{thread:i,pinClientRect:o}}))},[u,m,Q]),ed=r.useCallback(e=>{let t=(0,S.c4)(e.comments),i=e.comments.slice(1).reduce((e,t)=>t.isUnread?e+1:e,0),r=e.comments[0].client_meta?.selection_box_anchor;if(r&&e.comments[0].client_meta?.in_frame){let t=e.comments[0].client_meta,n=c.Mi.subtract(r,t);r=c.Mi.add(e.canvasPosition,n)}let a=!!e.isPendingFromSinatra;return{id:e.id,x:e.canvasPosition.x,y:e.canvasPosition.y,isOurs:e.comments[0].user_id===n?.id,pending:a,avatars:t,createdAt:new Date(Date.parse(e.comments[0].created_at)),onMouseEnter:()=>er(e.id),onMouseLeave:()=>ea(e.id),previewMessageMeta:e.comments[0].message_meta,isUnread:e.comments[0].isUnread||i>0,numUnreadReplies:i,isDraggable:ei.has(e.id)&&!a,isResolved:!!e.comments[0].resolved_at,label:e.comments[0].order_id||"",updatedAt:e.comments[e.comments.length-1].created_at,selectionBoxAnchor:r,type:M.kT.COMMENT_THREAD,numAttachments:e.comments.map(e=>e.attachments?.length||0).reduce((e,t)=>e+t,0),isPinnedToFile:!!e.commentPin}},[n,ei,er,ea]),ec=r.useMemo(()=>e.threads.reduce((e,t)=>{let{canvasPosition:n}=t;return n&&e.push({...t,canvasPosition:n}),e},[]),[e.threads]),eu=r.useCallback(e=>{Y({viewport:m.getViewportInfo(),hasJumped:1===e})},[m]),em=(0,w.A)(eu,o.rebuildClustersZoomDelay),ep=r.useMemo(()=>{let e=new Set(ec.map(e=>e.id)),t=X.viewport,n=(0,R.g)(ec,t,o,null).map(e=>eM(e,t,ed,eo)),i=new T.n(n,e,t.zoomScale);return i.applyInstant=X.hasJumped,i},[ec,X.viewport,X.hasJumped,o,ed,eo]);r.useEffect(()=>{if(z===X.viewport.zoomScale)return;let{width:e,height:t}=m.getViewportInfo();Math.abs(W)/z>.45||Math.abs(G)/e>.95||Math.abs(K)/t>.95?eu(1):em(0)},[m,W,G,K,o.rebuildClustersZoomDelay,X.viewport,z,em,eu]);let eh=!!e.activeThread,ef=e.activeThread?(0,S.c4)(e.activeThread.comments).length:1,{setActivePinSize:eg}=e;r.useEffect(()=>{if(!eh){eg(null);return}if(v){let e=eR(1);eg({height:e.height,width:e.width});return}eg({width:eR(ef).width,height:0})},[eg,eh,v,ef]);let ex=(0,O.k)();return(0,i.jsx)(A.p,{children:(0,i.jsx)(eI,{clientConfig:s,clusteredThreads:ep,dimUnselectedPins:!!_,disableFilteringPinsOnViewportChanges:J,emphasizedPinIds:H,haveCommentsToShow:t,onContextMenu:el,onDragEnd:et.onDragEnd,onDragStart:et.onDragStart,onDragUpdate:et.onDragUpdate,onPinClicked:et.onPinClicked,selectedPinId:V,shouldDisablePointerEvents:!ex&&s?.disableCommentsWhenHandToolEnabled&&p===E.NLJ.HAND||h||void 0!==$&&$!==C.QOV.DEFAULT})})}),eO=r.memo(function(e){return(0,i.jsx)(eP,{activeThread:e.activeThread,dragDisabledOverride:e.dragDisabledOverride,isCommunity:e.isCommunity,pageId:e.pageId,requestToDeselectCommentPin:e.requestToDeselectCommentPin,requestToSelectCommentPin:e.requestToSelectCommentPin,setActivePinSize:e.setActivePinSize,setClientMeta:e.setClientMeta,threads:e.threads,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition},e.pageId)});var eD=n(393822),eL=n(384203),eF=n(323747),eB=n(963489),eU=n(223487),eV=n(325252),eH=n(426739),ez=n(330116),eG=n(156928),eK=n(484401),eW=n(719749),eq=n(7857),eX=n(836848),eY=n(424364),eJ=n(446862),eZ=n(497503),eQ=n(74372),e$=n(522568),e0=n(40297),e1=n(309742),e2=n(933870),e5=n(585066),e4=n(536378),e3=n(907288),e6=n(121894),e7=n(950851),e9=n(490225),e8=n(763985),te=n(352643),tt=n(173658),tn=n(201136),ti=n(75292),tr=n(94051),ta=n(74741),ts=n(893154),to=n(756043),tl=n(212198),td=n(276571),tc=n(236410),tu=n(826187),tm=n(639758),tp=n(933384),th=n(994344),tf=n(890305),tg=n(471500),tx=n(822358),t_=n(879141),ty=n(17248),tb=n(971340),tv=n(259714),tC=n(363337),tE=n(582412),tw=n(118889),tk=n(816505),tT=n(362844),tj=n(267224),tS=n(771699),tI=n(27005),tA=n(209579),tN=n(508400),tM=n(55438),tR=n(519763),tP=n(526865),tO=n(441740);let tD="feed_post_popover_modal--overlayIcon--4RaTi";var tL=n(309270),tF=n(598034);let tB=(0,e0.jz)(tP.qoo),tU=(0,e0.jz)(tP.u24),tV=(0,e0.jz)(tP.IuL);function tH(e){let t=(0,a.d4)(e=>e.comments.activeThread?.source),n=(0,a.d4)(e=>e.comments.activeThread?.id),s=(0,a.d4)(e=>e.comments.threads),o=n&&s[n]||null,l=o?.reply.messageMeta||[],d=(0,a.d4)(e=>e.comments.editingComment),c=(0,tk.sZ)(),{dispatch:u}=e,{threadPosition:m,comments:p}=e.feedPost,h=(0,x.GH)(),f=r.useMemo(()=>h&&"loaded"===h.status&&h.data&&h?.feedApi?.reactionsApi?h.feedApi.reactionsApi.getReactionsForPost(e.feedPost.feedPostPublicUuid):{postReactions:[],commentReactions:{}},[h,e.feedPost.feedPostPublicUuid]),[_,...y]=p,b=(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.editorType===tT.nT.Whiteboard),[v,C]=(0,te.R)(),{feedPost:E}=e,w=E.id,k=r.useCallback(e=>{u(g.k7({threadId:w,messageMeta:e}))},[u,w]),T=r.useCallback(e=>{u(g.QD({threadId:w,attachmentId:e.id,attachment:e}))},[u,w]),j=r.useCallback((e,t)=>{u(g.QD({threadId:w,attachmentId:e,attachment:null})),t?t.then(()=>tj.J.delete(e)):tj.J.delete(e)},[u,w]),S=r.useCallback(()=>{o&&(u(tE.gX({postUuid:(0,tS.gk)(w),messageMeta:o.reply.messageMeta,attachmentIds:o.reply.attachments?Object.keys(o.reply.attachments):[]})),C(),k([]),u(g.q4({threadId:w,resetStatusOnly:!1})))},[u,w,o,C,k]),I=r.useRef(null),A=r.useCallback(()=>{I.current?.scrollToBottom(),k([])},[I,k]);r.useEffect(()=>{w&&I.current?.scrollToBottom()},[w,I]);let[N,R]=r.useState(!1),P=(0,eD.t$)(),O=r.useCallback(()=>{u((0,e4.to)({type:tI.K,data:{postUuid:E.feedPostPublicUuid,inFileView:!0}})),u(g.UU({force:!0}))},[u,E.feedPostPublicUuid]),D=r.useRef(null),L=r.useRef(null),F=e.viewportInfo.height-2*tU;b&&(F-=tV);let B=F-tB,U=!t&&!e.mountUnfocused,V=[...new Set(E.comments.map(e=>e.user.handle))];return c?(0,i.jsxs)(e2.P,{ref:I,maxHeight:B,onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),width:P,scrollingDisabled:!!e.hyperlinkLocation,allowScrollAndZoomOver:!0,"data-not-draggable":!0,children:[(0,i.jsx)("div",{className:tO.Q,role:"status","aria-live":"polite","aria-atomic":"true",children:v}),(0,i.jsxs)("div",{className:"feed_post_popover_modal--postColumn--xXX-E",children:[(0,i.jsx)(tN.B,{date:_.created_at,user:_.user,size:tC.Pf.MEDIUM,shortDate:!1}),(0,i.jsxs)("div",{className:"feed_post_popover_modal--postThumbnailContainer--yZb8Y",onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onClick:O,role:"button",tabIndex:0,children:[(0,i.jsx)("img",{src:E.feedPostThumbnail,alt:"placeholder",className:"feed_post_popover_modal--postThumbnail--HFWzW",style:{backgroundColor:E.feedPostThumbnailBackground,padding:E.padFeedPostThumbnail?"8px":"0"}}),E.feedPostNumContent>1&&(0,i.jsx)("div",{className:"feed_post_popover_modal--numContent--StWTZ feed_post_popover_modal--postThumbnailOverlay--TWQ8n",children:(0,i.jsx)(tv.B,{svg:tL.A,className:tD})}),N&&(0,i.jsx)("div",{className:"feed_post_popover_modal--expand--BFTku feed_post_popover_modal--postThumbnailOverlay--TWQ8n",children:(0,i.jsx)(tv.B,{svg:tF.A,className:tD})})]}),(0,i.jsxs)("div",{className:"feed_post_popover_modal--subtitleRow--a6dTY",children:[(0,i.jsx)("div",{className:"feed_post_popover_modal--postedToFeed--zQQwn",children:(0,eu.t)("fig_feed.posted_to_feed")})," "]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"feed_post_popover_modal--postTitle--R30KB",children:E.feedPostTitle}),(0,i.jsx)(tw.HH,{messageMeta:_.message_meta,commentId:e.feedPost.id,className:"feed_post_popover_modal--postDescription--XPM1X"})]}),(0,i.jsx)("div",{className:"feed_post_popover_modal--reactionSection--Plxal",children:(0,i.jsx)(tM.Q$,{type:tM.Us.FULL,source:tM.zY.FILE_POPOVER,feedReactions:f.postReactions,postId:_.feed_id,postUuid:e.feedPost.feedPostPublicUuid})})]}),(0,i.jsx)("div",{className:"feed_post_popover_modal--postCommentlist--07BvC",children:y.map(t=>(0,i.jsx)(tA.i,{attachments:t.attachments,commentId:t.feed_id,commentUser:t.user,commentUuid:t.uuid||"",createdAt:t.created_at,currentOrgId:c.id,mentionables:e.mentionables,messageMeta:t.message_meta,reactions:t.uuid&&f.commentReactions[t.feed_id]||[],user:e.user},t.id))}),e.isLoading&&(0,i.jsx)("div",{className:tR.wG,children:(0,i.jsx)(tb.kt,{size:"small"})}),(0,i.jsx)(ti.K,{allowAttachments:!0,attachments:o?.reply.attachments?Object.values(o.reply.attachments):[],authorNames:V,className:tR.MJ,deleteAttachment:j,dispatch:u,editingExistingComment:!1,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:D,editorType:"comment-editor-reply",fileKey:e.feedPost.key,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:e.hyperlinkLocation,isDisabled:!!d,isEmojiPickerDisabled:!!e.comments.editingComment,mentionables:e.mentionables,messageMeta:l,mountInputFocused:U,onCancel:e.onCloseEsc,onComposeFocus:e.onComposeFocus,onEditStart:A,onSubmit:S,placeholderText:(0,eu.t)("comments.reply"),recordingKey:M.Dw.feedPopover,replyContainerRef:L,setHyperlinkEditorRef:e.setHyperlinkEditorRef,setHyperlinkLocation:e.setHyperlinkLocation,setIsEditorFocused:e.setIsEditorFocused,submitText:(0,eu.t)("comments.reply"),threadId:w,threadPosition:m,typeahead:e.comments.typeahead,updateAttachment:T,updateMessage:k,user:e.user,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})]}):null}var tz=n(762720),tG=n(109307),tK=n(861266),tW=n(585574),tq=n(378721),tX=n(678286),tY=n(888903),tJ=n(136393),tZ=n(11107),tQ=n(249487),t$=n(338630),t0=n(841301),t1=n(303740),t2=n(846920),t5=n(235292);function t4(e){let t=(0,l.md)(t1.p9),n=(0,l.md)(eU.yV),r=(0,tZ.kJ)();return(0,tQ.yo)({user:t,file:n,numPinnedCommentThreads:r})?r>0?(0,i.jsx)(t6,{id:e.id,commentPin:e.commentPin,numPinnedCommentThreads:r}):(0,i.jsx)(t3,{children:(0,i.jsx)(t6,{id:e.id,commentPin:e.commentPin,numPinnedCommentThreads:r})}):null}function t3(e){return(0,tQ.k3)()?e.children:null}function t6(e){let t=!(0,l.md)(t0.wg),{pinApi:n}=(0,x.I_)(),r=(0,a.wA)(),s=!!e.commentPin,o=e.numPinnedCommentThreads>=10;async function d(){try{r(tJ.b({has_toggled_comment_pin:!0})),s?await n?.removePin(e.id,e.commentPin.id):await n?.setPin(e.id)}catch(e){if(!e||e?.data?.status===422)return;e?.data?.i18n?r(tY.F.enqueue({message:(0,tX.J)(e,e.data.message),error:!0})):r(tY.F.enqueue({message:(0,eu.YD)("comments.pinning.err.fallback"),error:!0}))}}return(0,i.jsx)(t$.fu,{name:"Pin comment icon",properties:{isPinned:s},children:(0,i.jsx)(tq.K,{disabled:!s&&o||t,"data-onboarding-key":s?"unpin-comment-icon":"pin-comment-icon","data-testid":"pin-comment-button-thread-header","data-tooltip-type":tc.Ib.TEXT,"data-tooltip":s?(0,eu.t)("comments.pinning.unpin_comment"):(0,eu.t)("comments.pinning.pin_comment"),"aria-label":(0,eu.t)("comments.pinning.pin_comment"),onClick:d,recordingKey:"threadHeader.pinCommentButton",children:(0,i.jsx)(tv.B,{svg:s?t5.A:t2.A})})})}var t7=n(172178);function t9(e){let t=r.useRef(null),n=r.useRef(null),s=(0,a.d4)(e=>e.comments.activeThread?.source);r.useEffect(()=>{if(s&&!e.mountUnfocused)switch(s){case M.Eq.prevButton:t.current?.focus();break;case M.Eq.nextButton:n.current?.focus();break;case M.Eq.accessibilityCommentPin:break;default:(0,eX.xb)(s)}},[e.mountUnfocused,s]);let o=(0,tQ.U6)()&&!!e.thread.commentPin;return(0,i.jsxs)("div",{className:tR.F7,"data-testid":"thread-header-container",children:[(0,i.jsx)("div",{className:tR.xS,"data-onboarding-key":"thread-header-left-section","data-fullscreen-intercept":!0,children:(0,i.jsx)("h2",{children:(0,eu.tx)("comments.comment_n")})}),(0,i.jsxs)("div",{className:tR.eX,children:[e.thread.comments[0]&&(0,i.jsx)(t7.V,{comment:e.thread.comments[0],isUnread:e.thread.comments.some(e=>e.isUnread),label:(0,eu.t)("comments.thread_actions"),recordingKey:"threadHeader.moreActionsButton",thread:e.thread,possibleActions:e.overflowMenuActions,onDelete:e.onDelete,onCopyLink:e.onCopyLink}),(0,i.jsx)(t4,{id:e.thread.id,commentPin:e.thread.commentPin}),!e.hideResolve&&(0,i.jsx)(tp.K0,{disabled:o,"data-fullscreen-intercept":!0,"data-tooltip-type":tc.Ib.TEXT,"data-tooltip":e.resolved?o?(0,eu.t)("comments.pinning.cannot_unresolve"):(0,eu.t)("comments.mark_as_unresolved"):o?(0,eu.t)("comments.pinning.cannot_resolve"):(0,eu.t)("comments.mark_as_resolved"),onClick:()=>{e.setResolved({thread:e.thread,resolved:!e.resolved})},recordingKey:"threadHeader.resolveButton",onMouseDown:e=>e.stopPropagation(),className:z()(e.resolved&&tR.aW,o&&tR.VM),children:e.resolved?(0,i.jsx)(tG.g,{}):(0,i.jsx)(tK.W,{})}),e.customIcon,(0,i.jsx)(tW.Jn,{className:tR.UR,recordingKey:"threadHeader",onClick:e.onClose,innerText:(0,eu.t)("comments.close"),"aria-label":(0,eu.t)("comments.close"),"data-fullscreen-intercept":!0})]})]})}var t8=n(437517);let ne=(0,e0.hG)(tP.qoo),nt=(0,e0.hG)(tP.u24),nn=(0,e0.jz)(tP.M$q),ni=e=>{e.stopPropagation()},nr=[],na=[],ns=r.memo(e=>{let t=r.useContext(U.kw),n=(0,a.d4)(e=>e.comments.threads)[e.threadId],s=n?.discardAttempts||0,[o,l]=r.useState(0),{positionRef:d,disableCentering:c}=e;r.useEffect(()=>{s<=0||(async()=>{let e=d.current,n=t.getViewportInfo();e&&!c&&await t.navigateTo(e,n.zoomScale,{duration:600,ignoreVisibleTargets:!0}),l(s)})()},[l,d,c,s,t]);let{editorRef:u,editingCommentEditorRef:m}=e,p=r.useCallback(()=>{if(m.current){m.current.selectAll();return}u.current?.selectAll()},[u,m]);return(0,i.jsx)(ta.c,{wiggleCount:o,onWiggle:p,children:e.children})});function no(e){return(0,i.jsx)(eq.u9,{label:"ActiveThread",children:(0,i.jsx)(nl,{...e})})}function nl(e){let t=(0,td.z3)(),n=(0,a.d4)(e=>e.comments.activeThread?.source),s=(0,a.d4)(e=>e.comments.activeThread?.triggerRef),o=(0,a.d4)(e=>e.comments.activeThread?.id),d=(0,a.d4)(e=>e.comments.threads),u=(0,a.d4)(e=>e.comments.showResolved),m=(0,e8.Kq)(e.thread),p=o&&d[o]||null,h=p?.discardAttempts||0,f=p?.reply.messageMeta||nr,x=p?.reply.attachments?Object.values(p?.reply.attachments):na,_=(0,a.d4)(e=>e.comments.editingComment),[y,b]=r.useState(!1),v=(0,l.md)(N.R),[E,w]=r.useState((0,eD.t$)()),[k,T]=r.useState(ne),j=function(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e},[t,e]),t}(e.thread.canvasPosition),S=r.useRef(null),I=(0,e7.Wt)(),{legalLeft:A,legalRight:R,legalBottom:P,useLegalBounds:O}=function(){let e=(0,ty.sO)(),t=(0,B.ut)(C.Ez5?.singleSlideView().isInFocusedNodeView,!1),n=(0,tl.dP)(),i=(0,B.ut)(C.Ez5?.editorPreferences().speakerNotesHeight,0),r=C.Ez5?.singleSlideView().bottomToolbeltHeightInViewport()??0;return e&&t?{legalLeft:n+nn,legalRight:nn,legalBottom:i+r,useLegalBounds:!0}:{legalLeft:0,legalRight:0,legalBottom:0,useLegalBounds:!1}}(),D=r.useRef(!1),L=r.useCallback(n=>{let i=I({viewportInfo:e.viewportInfo,triggerRef:s}),{x:r,y:a,width:o,height:l}=e.viewportInfo;if(i){let t=i.x,n=i.y,s=r+o-E-nn,d=(0,eY.qE)(t,nn,s),u=S.current?S.current.getBoundingClientRect().height:k,m=e.viewportInfo.y+4*nn,p=a+l-u-4*nn,h=m>p?m:(0,eY.qE)(n,m,p);return new c.Mi(d,h)}if("fullscreen"===t&&!n.page)return new c.Mi(r,a);if(!n.threadPosition)return;if(e.useAbsolutePositioning)return new c.Mi(n.threadPosition.x,n.threadPosition.y);let d=n.threadPosition.x+r,u=n.threadPosition.y+a;if(O){let t=A+nn,n=r+o-R-E-nn;d=(0,eY.qE)(d,t,n);let i=S.current?S.current.getBoundingClientRect().height:k,s=e.viewportInfo.y+nn,c=a+l-P-i-nn;!D.current&&S.current&&(D.current=!0,H(null)),u=s>c?s:(0,eY.qE)(u,s,c)}return new c.Mi(d,u)},[I,t,e.viewportInfo,e.useAbsolutePositioning,s,O,A,R,P,E,k,nn]),F=(0,e7.Rf)(),U=r.useMemo(()=>{let t=e.viewportInfo.x+nn+F.xDelta,n=e.viewportInfo.y+nn+F.yDelta;return new c.Mi(t,n)},[e.viewportInfo.x,e.viewportInfo.y,F.xDelta,F.yDelta,nn]),[V,H]=r.useState(null),z=r.useMemo(()=>v?U:m?U:L(e.thread)||new c.Mi(0,0),[v,e.thread,m,U,L]),K=(0,G.ZC)(z);(0,r.useLayoutEffect)(()=>{if(V&&!v){let e=K?z.subtract(K):new c.Mi(0,0);e.equals(new c.Mi(0,0))||H(V.add(e))}},[z,V,K,v]);let W=(0,r.useMemo)(()=>V??z,[z,V]),{dispatch:q,setIsPinned:X}=e,{threadPosition:Y,comments:J}=e.thread;(0,e1.h)(()=>{let e=em.sn.tryStop("view_comment_thread");e&&(0,e$.sx)("view_comment_thread",{elapsedMs:e},{forwardToDatadog:!0})});let Z=(0,ts.kc)(),[Q,$]=r.useState(e.thread.comments.length),[ee,et]=r.useState(!1),en="communityHub"===t?Z:e.user,[ei,er]=(0,te.R)(),{submitReply:ea,thread:es}=e,eo=es.id,el=es.uuid,ed=r.useCallback(()=>{let e=(0,eQ.g)();em.sn.start(`comment_reply_creation_${e}`),ea({threadId:eo,threadUuid:el??void 0,uuid:e}),er()},[ea,eo,el,er]);(0,e1.h)(()=>()=>{J.map(e=>{e.uuid&&e.isPendingFromSinatra&&em.sn.tryStop(`comment_reply_creation_${e.uuid}`)})});let ec=r.useCallback(e=>{q(g.k7({threadId:eo,messageMeta:e}))},[q,eo]),ep=r.useRef(null),eh=r.useRef(null),ef=r.useCallback(e=>{q(g.QD({threadId:eo,attachmentId:e.id,attachment:e}))},[q,eo]),ex=r.useCallback((t,n)=>{q(g.QD({threadId:eo,attachmentId:t,attachment:null})),1===x.length&&ep.current?.focus(),n?n.then(()=>tm.l.delete(e.thread.key,t)):tm.l.delete(e.thread.key,t)},[e.thread.key,q,eo,x.length]),e_=r.useRef(null),ey=r.useCallback(()=>{e_.current?.scrollToBottom(),ec([])},[e_,ec]),{updateCommentContent:eb}=e,ev=r.useCallback((e,t,n)=>{eb({comment:e,messageMeta:t,attachmentUpdates:n})},[eb]),eC=(0,e3.$m)(),eE=(0,e3.f$)(),ew=eC&&eE,ek=r.useCallback(()=>{ew?e6.iZ?.focusPinById(eo):document.getElementById(`accessibility-comment-pin-${eo}`)?.focus()},[ew,eo]),{setResolved:eT}=e,ej=r.useCallback(e=>{eT(e),ew&&(u?e6.iZ?.focusPinById(eo):(0,tt.MJ)(eo))},[ew,u,eo,eT]),eS=r.useCallback(e=>{let t="keyboard"===eJ.F.device||"screen-reader"===eJ.F.device,n=null===e.parent_id;q((0,e4.to)({type:th.E,data:{comment:e,onConfirm:()=>{q(g.Mv({comment:e}))},onConfirmComplete:()=>{eC&&t&&requestAnimationFrame(()=>{n&&ew?(0,tt.MJ)(e.id):n||ep.current?.focus()})}}}))},[q,eC,ew]),eI=r.useCallback(()=>{if(X(!1),ek(),!(0,eg.I)(f)){if(h&&ep.current?.isAllSelected()||(0,eg.Kx)(f)&&0===x.length){ec([]),q(g.pD());return}return!1}},[ek,X,f,h,x.length,ec,q]),eA=r.useCallback(()=>{X(!1),q(g.UU({force:!0})),ek()},[q,X,ek]),eN=(0,a.d4)(e=>e.universalInsertModal?.pinned===tu.t.PINNED_AND_DOCKED_LEFT),eM=(0,G.ZC)(U),eR=eM&&eM!==U,eP=eM&&W.equals(eM);r.useEffect(()=>{eR&&eP&&(X(!0),H(U))},[U,eR,eP,X]);let eO=W.equals(U),eL=(0,e7.sj)();r.useEffect(()=>{eL&&eO&&eL()},[eO,eL,q]),r.useEffect(()=>{eo&&e_.current?.scrollToBottom()},[eo,e_]);let[eF,eB]=r.useState(null),[eU,eV]=r.useState(r.useRef(null)),eH=r.useMemo(()=>function(e){return(0,i.jsx)(ns,{editorRef:ep,editingCommentEditorRef:eh,positionRef:j,threadId:eo,disableCentering:"communityHub"===t||"prototype"===t,children:e.children})},[eo,j,ep,t]),[ez,eG]=r.useState(!1),eK=(0,l.Xr)(tz.V),eW=r.useCallback(e=>{e?.stopPropagation(),X(!0),H(U),b(!0)},[X,U]),{modalRef:eq}=e;r.useEffect(()=>{eq&&(eq.current={popout:()=>eW()})},[eq,eW]),(0,to.C_)(S),r.useEffect(()=>{if(n&&!e.mountUnfocused)switch(n){case M.Eq.accessibilityCommentPin:S.current?.focus();break;case M.Eq.prevButton:case M.Eq.nextButton:break;default:(0,eX.xb)(n)}},[S,e.mountUnfocused,n]);let e0=r.useRef(null);(0,e7.UR)(e9.b.DOCK_STYLE);let ta=(0,e7.Y6)(),tb=(0,e7.eW)(),tv=r.useMemo(()=>I({viewportInfo:e.viewportInfo,triggerRef:s}),[I,e.viewportInfo,s]),tC=(0,e7.vn)();return(()=>{if(!W||e.thread.isCanvasMention)return null;let t=(0,eD.vl)(e.viewportInfo,e.thread,!0,tb.paddingRight,tv),a={x:U.x-E,y:0,width:2*E+nn,height:window.innerHeight};eN&&(a.x-=E,a.width+=E);let s=(0,i.jsx)(tp.K0,{svg:t8.A,"data-tooltip-type":tc.Ib.TEXT,"data-tooltip":(0,eu.t)("comments.dock_to_side"),recordingKey:"activeThread.dockToSideButton",onClick:eW,onMouseDown:e=>e.stopPropagation(),"data-fullscreen-intercept":!0}),o=e.viewportInfo.height-2*nt,l=e.viewportInfo.y+nt,d=window.innerHeight-e.viewportInfo.y-e.viewportInfo.height+nt,c=e.viewportInfo.x+nt,u=window.innerWidth-e.viewportInfo.x-e.viewportInfo.width+nt;o+=ta.maxHeightDelta,l+=ta.minTopMarginDelta,d+=ta.minBottomMarginDelta,c+=ta.minLeftMarginDelta,u+=ta.minRightMarginDelta;let m=o-ne,p=e.useAbsolutePositioning?tR.wC:y?tR.xe:tR.wb,h=!n&&!e.mountUnfocused,g=[...new Set(es.comments.map(e=>e.user.handle))];return(0,i.jsxs)(i.Fragment,{children:[ee&&(0,i.jsx)(t_.ue,{registrationOrigin:tg.iX.COMMENT_REPLY}),(0,i.jsxs)(tf.od,{allowWheelPassthrough:!0,alwaysEnsureModalOnScreen:!0,autoflowHeight:!0,bounds:a,container:eH,containerClassName:p,dataOnboardingKey:tx.ym,dataTestId:"comment-thread-draggable-modal",disableDragging:e.disableDragging,frameStyle:{boxShadow:"var(--elevation-400-menu-panel, 0px 2px 14px rgba(0, 0, 0, .15), 0 0 0 0.5px rgba(0, 0, 0, .2))",pointerEvents:"auto"},height:k,maxHeight:o,minBottomMargin:d,minLeftMargin:c,minRightMargin:u,minTopMargin:l,onClose:eA,onDragEnd:e=>{eK(!1),X(!0);let t=tf.rk.CALL_ENSURE_MODAL_ON_SCREEN;return H(e),t},onDragStart:()=>{eK(!0),b(!1)},onEnterBound:()=>eG(!0),onLeaveBound:()=>eG(!1),position:W,recordingKey:"activeThreadDraggableModal",setHeight:T,setPosition:H,setWidth:w,shouldScrollToBottom:()=>{let t=Q<e.thread.comments.length,n=e.thread.comments[e.thread.comments.length-1].user_id===e.user?.id,i=t&&n;return t&&$(e.thread.comments.length),i&&et(!0),i},width:E,children:[eF&&eU&&(0,i.jsx)(tr.Q,{editorRef:eU,container:S,initialLocation:eF,closeEditor:()=>{eB(null)}}),(0,i.jsxs)("div",{ref:S,className:tR.OM,tabIndex:-1,"aria-label":(0,eu.t)("fullscreen.accessibility.comment_thread_label"),role:"region","data-fullscreen-intercept":!0,children:[(0,i.jsx)(t9,{customIcon:!eO&&e.showDockToSideButton?s:void 0,hideResolve:e.hideResolve,mountUnfocused:e.mountUnfocused,nextThread:e.nextThread,onClose:eA,onDelete:eS,prevThread:e.prevThread,resolved:!!J[0].resolved_at,setResolved:ej,thread:t}),(()=>{if(es.sidebarItemType===M.kT.COMMENT_THREAD){let n=tC?eZ.nK:r.Fragment;return(0,i.jsx)(n,{children:(0,i.jsxs)(e2.P,{ref:e_,maxHeight:m,onMouseDown:ni,onPointerDown:ni,width:E,scrollingDisabled:!!eF,allowScrollAndZoomOver:!0,"data-not-draggable":!0,children:[(0,i.jsx)("div",{className:tO.Q,role:"status","aria-live":"polite","aria-atomic":"true",children:ei}),J.map((n,r)=>(0,i.jsx)(tn.I,{allowAttachments:!0,comment:n,dispatch:q,editingComment:e.comments.editingComment,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:eh,editorType:"comment-editor-thread",hideEmojiPicker:e.hideEmojiPicker,hideReactions:e.hideReactions,hideResolve:e.hideResolve,hyperlinkLocation:eF,index:r,mentionables:e.mentionables,mountInputFocused:!0,onDelete:eS,prevAuthor:0===r?null:J[r-1].user_id,setHyperlinkEditorRef:eV,setHyperlinkLocation:eB,setIsEditorFocused:e.setIsEditorFocused,setResolved:ej,showEditedIndicator:!!(e.showEditedIndicators&&n.edited_at),submitEdit:ev,thread:t,threadPosition:t.threadPosition,typeahead:e.comments.typeahead,user:e.user,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition},`thread-comment-${n.id}`)),e.isLoading&&(0,i.jsx)("div",{className:tR.wG,children:(0,i.jsx)(e5.k,{size:"sm"})}),!e.commentCreationDisabled&&(0,i.jsx)(ti.K,{allowAttachments:!0,attachments:x,authorNames:g,className:tR.MJ,deleteAttachment:ex,dispatch:q,editingExistingComment:!1,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:ep,editorType:"comment-editor-reply",fileKey:e.thread.key,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:eF,isDisabled:!!_,isEmojiPickerDisabled:!!e.comments.editingComment,mentionables:e.mentionables,messageMeta:f,mountInputFocused:h,onCancel:eI,onComposeFocus:e.onComposeFocus,onEditStart:ey,onSubmit:ed,placeholderText:(0,eu.t)("comments.reply"),recordingKey:M.Dw.reply,replyContainerRef:e0,setHyperlinkEditorRef:eV,setHyperlinkLocation:eB,setIsEditorFocused:e.setIsEditorFocused,submitText:(0,eu.t)("comments.reply"),threadId:eo,threadPosition:Y,typeahead:e.comments.typeahead,updateAttachment:ef,updateMessage:ec,user:en,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})]})})}return es.sidebarItemType===M.kT.FEED_POST?(0,i.jsx)(tH,{comments:e.comments,dispatch:q,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,feedPost:es,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:eF,isLoading:e.isLoading,mentionables:e.mentionables,mountUnfocused:e.mountUnfocused,onCloseEsc:eI,onComposeFocus:e.onComposeFocus,setHyperlinkEditorRef:eV,setHyperlinkLocation:eB,setIsEditorFocused:e.setIsEditorFocused,showEditedIndicators:e.showEditedIndicators,user:e.user,viewportInfo:e.viewportInfo,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition}):es.sidebarItemType===M.kT.LITMUS_COMMENT_THREAD?null:void(0,eX.xb)(es)})()]})]})]})})()}var nd=n(156555),nc=n(462285);function nu(e){return(0,i.jsxs)("svg",{className:"anchor--anchorIcon--VrEUg",viewBox:"0 0 34 41",fill:"none","data-testid":"svg-comment-pin",children:[(0,i.jsx)("path",{fill:e.bodyColor,d:"M17 1C25.8366 1 33 8.16344 33 17C33 23.6257 27.6611 28.9662 17 39.6274C6.33887 28.9663 1.00001 23.6257 1 17C1 8.16344 8.16344 1 17 1Z"}),(0,i.jsx)("path",{fill:e.outlineColor,opacity:"0.4",d:"M17 40.3345L16.6261 39.9606C11.3156 34.6501 7.29362 30.6281 4.60457 27.1037C1.90336 23.5633 0.500006 20.4662 0.5 17C0.5 7.8873 7.8873 0.5 17 0.5C26.1127 0.5 33.5 7.8873 33.5 17C33.5 20.4662 32.0967 23.5633 29.3954 27.1037C26.7064 30.6281 22.6845 34.65 17.374 39.9605L17 40.3345ZM33 17C33 8.16344 25.8366 1 17 1C8.16344 1 1 8.16344 1 17C1.00001 23.552 6.22083 28.8474 16.6464 39.2738C16.7174 39.3447 16.7885 39.4159 16.8599 39.4873C16.9065 39.5339 16.9532 39.5806 17 39.6274C17.1185 39.5089 17.2364 39.391 17.3536 39.2738C27.7792 28.8474 33 23.552 33 17Z"}),e.isNew&&(0,i.jsx)("circle",{cx:"16.5",cy:"16.5",r:"2.25",fill:e.labelColor})]})}let nm={x:0,y:0};function np(e){let t=(0,a.d4)(e=>e.selectedView),n=(0,F.iZ)(),s=r.useContext(U.kw),o="communityHub"!==t.view||e.thread.comments[0]?.user_id===n?.id,l=(0,a.wA)(),[d,u]=r.useState(null),[m,p]=function(){let e=r.useRef(null),t=r.useCallback(t=>{if(null===t){e.current=null;return}let n=e.current||{};e.current={...n,...t}},[e]);return[e,t]}(),h=r.useRef(e);h.current=e;let{viewportPositionFromClientPosition:f,offset:x}=e,_=r.useCallback(e=>{let t=m.current;if(!t)return;let n=h.current,i=f(new c.Mi(e.clientX,e.clientY)),r=Math.max(t.maxDist,c.Mi.distance(i,t.startPosition));if(p({...t,maxDist:r}),r<eD.wB)return;let a=n.computeDropLocation(i,t.mouseOffset);if(!n.isInViewport(a))return;let s=c.Mi.add(i,t.mouseOffset);if(n.thread.id===M.hm){let e=n.viewport.current;if(!e)return;l(g.vV({anchorPosition:(0,D.$$)(e,s)}))}else o&&(l(g.UU()),u(s))},[m,f,p,l,o]),y=r.useCallback(e=>{let t=m.current;if(!t)return;let n=h.current;u(null);let i=f(new c.Mi(e.clientX,e.clientY)),r=n.viewport.current;if(!r)return;if(!(t.maxDist>eD.wB)||!o)return p(null);let a=n.computeDropLocation(i,t.mouseOffset);if(!n.isInViewport(a))return p(null);let l=s.getCommentDestinationForCanvasPosition(a,n.pageId);return n.thread.id===M.hm||n.setClientMeta({thread:n.thread,clientMeta:{x:a.x,y:a.y,node_id:l?.nodeId,node_offset:l?.nodeOffset||void 0,viewport:r,page_id:n.pageId,in_frame:l?.inFrame,stable_path:l?.stablePath}}),p(null)},[m,f,o,s,p]),b=r.useCallback(e=>{if(0!==e.button)return;e.stopPropagation();let t=f(new c.Mi(e.clientX,e.clientY));p({startPosition:t,mouseOffset:c.Mi.subtract(x||nm,t),maxDist:0})},[f,p,x]);r.useEffect(()=>(document.addEventListener("pointermove",_),document.addEventListener("pointerup",y),()=>{document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",y)}),[_,y]);let{type:v,resolved:C,active:E}=e,w=r.useCallback(()=>{if("face"===v)return{anchorOutlineColor:"",anchorBodyColor:"",anchorLabelColor:"",anchorClass:"anchor--facePinAnchor--dcH0T"};let e="anchor--anchor--Aqw8r";C&&(e="anchor--resolvedAnchor--QDeC5 anchor--anchor--Aqw8r");let t=nc.R3,n=nc.Dr;E&&(n="#0d99ff");let i=nc.QQ;return E&&(i=nc.Vm,e+=" anchor--activeAnchor--sRcGg anchor--anchor--Aqw8r"),{anchorOutlineColor:t,anchorBodyColor:n,anchorLabelColor:i,anchorClass:e}},[v,C,E]),{x:k,y:T}=d||e.offset||nm,j=`translate(${k}px, ${T}px)`,S=w();return(0,i.jsx)("div",{"aria-hidden":!0,style:{transform:j,WebkitTransform:j},className:`${S.anchorClass} ${P.Dm}`,onPointerDown:b,children:"face"===e.type?(0,i.jsx)("div",{className:"anchor--commentPinIcon--lGBl-"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nu,{isNew:e.isNew,bodyColor:S.anchorBodyColor,outlineColor:S.anchorOutlineColor,labelColor:S.anchorLabelColor}),(0,i.jsx)("span",{className:"anchor--anchorLabel--8gKs-",style:{color:S.anchorLabelColor},children:e.label})]})})}function nh(e){let t=(0,nd.H)(e.viewportInfo),n=e.thread,s=r.useContext(U.kw),o=r.useCallback((e,n)=>{let i=c.Mi.add(e,n);return(0,D.$$)(t.current,i)},[t]),l=r.useCallback(e=>{let n=s.getValidCommentsRect(),i=(0,D.Z0)(t.current,e);return(0,eD.rN)(i,n)},[s,t]),d=(0,F.iZ)(),u=(0,ts.kc)(),m="communityHub"===(0,a.d4)(e=>e.selectedView).view?u:d;return(0,i.jsx)(np,{active:!0,computeDropLocation:o,entity:m,isInViewport:l,isNew:!0,offset:e.thread.anchorPosition||void 0,pageId:e.pageId,resolved:!1,setClientMeta:e.setClientMeta,thread:n,type:"face",viewport:t,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})}var nf=n(865702),ng=n(415541),nx=n(726577),n_=n(517478),ny=n(292339),nb=n(732838),nv=n(772244);class nC extends r.PureComponent{constructor(e){super(e),this.onMouseUpPos=e=>{nv.AU("mouseup",this.onMouseUpPos),nv.AU("mousemove",this.onMouseMovePos);let{onDragEnd:t}=this.props,{drag:n}=this.state;if(!n){this.setState({drag:null});return}let i=performance.now()-n.startedAt;t&&t({start:n.start,duration:i,position:e}),this.setState({drag:null})},this.onMouseDownPos=e=>{nv.on("mouseup",this.onMouseUpPos),nv.on("mousemove",this.onMouseMovePos),this.setState({drag:{start:e,startedAt:performance.now()}});let{onDragStart:t}=this.props;t&&t({start:e,position:e,duration:0})},this.onMouseMovePos=e=>{let{onDragUpdate:t}=this.props,{drag:n}=this.state;if(n&&t){let i=performance.now()-n.startedAt;t({start:n.start,duration:i,position:e})}},this.state={drag:null}}componentWillUnmount(){nv.AU("mouseup",this.onMouseUpPos),nv.AU("mousemove",this.onMouseMovePos)}render(){let e=this.state.drag?{pointerEvents:"none"}:void 0;return(0,i.jsx)("div",{role:"button",tabIndex:-1,style:{...e,...this.props.bounds,...this.props.useAbsolute&&{position:"absolute"}},className:"viewport_draggable--container--O4E0m","data-forward-events-to-fullscreen":"true",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onContextMenu:e=>{nb.eD||(e.stopPropagation(),e.preventDefault())},children:this.props.children})}}let nE={onMouseDownPos:()=>{},onMouseMovePos:()=>{},onMouseUpPos:()=>{}};function nw(e){let t=r.useRef(null),n=function(e){let[t,n]=r.useState(nE);return r.useEffect(()=>{e.current&&n({onMouseDownPos:e.current.onMouseDownPos,onMouseMovePos:e.current.onMouseMovePos,onMouseUpPos:e.current.onMouseUpPos})},[e,n]),function(e){let{onMouseDownPos:t,onMouseMovePos:n,onMouseUpPos:i}=e,a=r.useContext(U.kw),s=r.useCallback((e,t)=>{let n=a.getViewportInfo();return c.Mi.subtract({x:e,y:t},new c.Mi(n.x,n.y))},[a]),o=r.useCallback(e=>s(e.clientX,e.clientY),[s]),l=r.useCallback((e,t)=>{let n=o(e);i&&i(n,t)},[i,o]),d=r.useCallback((e,n)=>{if(e.button&&0!==e.button)return;let i=o(e);t&&t(i,n)},[t,o]),u=r.useCallback((e,t)=>{let i=o(e);n&&n(i,t)},[n,o]);return r.useMemo(()=>({onMouseUp:l,onMouseDown:d,onMouseMove:u}),[l,d,u])}(t)}(t),s=(0,a.d4)(e=>e.selectedView);return(0,i.jsx)(nC,{children:e.children,ref:t,bounds:e.bounds,onDragEnd:e.onDragEnd,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onMouseDown:n.onMouseDown,onMouseMove:n.onMouseMove,onMouseUp:n.onMouseUp,useAbsolute:"communityHub"===s.view})}var nk=n(463671),nT=n(28475);let nj=(0,e0.hG)(tP.u24),nS=new nT.Z(nj);function nI(e){return(0,i.jsx)(eq.u9,{label:"NewCommentContainer",children:(0,i.jsx)(nA,{...e})})}function nA(e){let{thread:t,viewportBounds:n,onSubmit:s,discardAttempts:l,allowAttachments:d=!0}=e,u=(0,a.wA)(),m=r.useRef(null),p=r.useRef(!1),h=r.useCallback(()=>{m.current&&m.current.scrollIntoView({block:"end"})},[m]),{anchorPosition:f}=t,[x,_]=r.useState(null),[y,b]=r.useState({x:0,y:0}),v=ng.ox(),C=c.Mi.add(f,y,x),E=(0,a.d4)(e=>e.comments.activeDragTarget),w=(0,nT._)(m,C,n,nS,eD.hx,e.pinOffset);r.useEffect(()=>{h()},[h]);let k=t.id,T=e.thread.comments.length;r.useEffect(()=>{k!==M.hm&&h()},[h,k,T]);let[j,S]=r.useState(null),I=r.useCallback(e=>{u(g.Z5({messageMeta:e}))},[u]),A=r.useCallback(e=>{u(g.nb({attachmentId:e.id,attachment:e}))},[u]),N=(0,eU.tS)(),R=(0,a.Pj)(),O=r.useCallback((t,n)=>{N&&(u(g.nb({attachmentId:t,attachment:null})),0===Object.keys(R.getState().comments.newComment.attachments||{}).length&&e.editorRef.current?.focus(),n?n.then(()=>tm.l.delete(N,t)):tm.l.delete(N,t))},[u,N,R,e.editorRef]),D=(0,ny.D)(),L=r.useCallback(()=>{s(e.thread),p.current&&requestAnimationFrame(()=>{D()})},[s,e.thread,D]),F=r.useCallback(()=>{let t=R.getState().comments.newComment;if((0,eg.I)(t.messageMeta)){p.current&&D();return}(l&&e.editorRef.current?.isAllSelected()||(0,eg.Kx)(t.messageMeta)&&0===Object.keys(t.attachments||{}).length)&&(u(g.Z5({messageMeta:[]})),p.current&&D())},[R,l,e.editorRef,u,D]),B=(0,a.d4)(e=>e.comments.threads),U=B[e.thread.id]?.state===M.EB.BUSY;if(!w)return null;let{x:V,y:H}=w,z=`translate(${V}px, ${H}px)`,G=`calc(${e.viewportBounds.height}px - (2 * ${nj}px))`,K=!0===e.disablePointerEvents?"new_comment_container--translatedThreadContainerNoPointerEvents--dTClh new_comment_container--translatedThreadContainer--cF0Ae":`new_comment_container--translatedThreadContainer--cF0Ae ${P.Dm}`,W=e.thread.id===M.hm?"new_comment_container--newCommentContainerNext--xYXjR new_comment_container--threadContainer--Do8ZO text--fontPos11--rO47d text--_fontBase--VaHfk overflow--overflowYAuto--LbWUF overflow--momentumScroll--EdX9A":"new_comment_container--threadContainer--Do8ZO text--fontPos11--rO47d text--_fontBase--VaHfk overflow--overflowYAuto--LbWUF overflow--momentumScroll--EdX9A",q=(0,eu.t)("comments.add_a_comment"),X=(0,i.jsxs)(i.Fragment,{children:[j&&(0,i.jsx)(tr.Q,{editorRef:e.editorRef,container:m,initialLocation:j,closeEditor:()=>{S(null)}}),(0,i.jsx)("div",{className:`${W} ${E?"new_comment_container--highlighted--X3Azm":""}`,style:{maxHeight:G},ref:m,onFocus:e=>{e.relatedTarget instanceof HTMLElement&&e.relatedTarget.hasAttribute("data-kb-comment-insertion-button")?p.current=!0:p.current=!1},children:(0,i.jsx)(nx.i,{children:(0,i.jsx)(nk.C,{allowAttachments:d,attachments:e.thread.attachments,deleteAttachment:O,dispatch:u,editingExistingComment:!1,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:e.editorRef,editorType:"comment-editor-new",errorFallback:(0,i.jsx)(nk.e,{type:"new"}),fallback:null,fileKey:N,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:j,isDisabled:U,maxCommentLength:e.maxCommentLength,mentionables:e.mentionables,messageMeta:e.thread.messageMeta,mountInputFocused:!e.mountUnfocused,mountWithButtons:!0,onCancel:F,onComposeFocus:e.onComposeFocus,onSubmit:L,placeholderText:q,recordingKey:M.Dw.new,scrollToBottom:h,setHyperlinkEditorRef:nf.lQ,setHyperlinkLocation:S,setIsEditorFocused:e.setIsEditorFocused,submitText:(0,eu.t)("comments.post"),threadId:M.hm,threadPosition:e.thread.threadPosition,typeahead:e.typeahead,updateAttachment:A,updateMessage:I,user:e.user,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})})})]}),Y={x:V+n.x,y:H};return(0,o.kc)().a11y_new_comments_to_fpl?(v.setPosition({x:Y.x,y:Y.y}),(0,i.jsx)(ng.bL,{onClose:nf.lQ,className:K,manager:v,children:(0,i.jsx)(ta.c,{wiggleCount:e.discardAttempts||0,onWiggle:e.onDiscardAttempt,children:(0,i.jsx)(n_.vo,{children:X})})})):(0,i.jsx)(nw,{onDragUpdate:e=>{_(c.Mi.subtract(e.position,e.start))},onDragEnd:e=>{x&&(b(c.Mi.add(x,y)),_(null))},bounds:n,children:(0,i.jsx)("div",{style:{transform:z,WebkitTransform:z},className:K,children:(0,i.jsx)(ta.c,{wiggleCount:e.discardAttempts||0,onWiggle:e.onDiscardAttempt,children:X})})})}function nN(e){return(0,i.jsx)(eq.u9,{label:"NewComment",children:(0,i.jsx)(nM,{...e})})}function nM(e){let t=(0,a.d4)(e=>e.comments.newComment.discardAttempt),n=r.useRef(null),s=r.useCallback(()=>{n.current?.selectAll()},[n]),o=(0,D.th)(e.viewportInfo);return(0,i.jsxs)("div",{children:[(0,i.jsx)(nh,{thread:e.thread,pageId:e.pageId,viewportInfo:e.viewportInfo,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,setClientMeta:e.setClientMeta}),!e.hideComposer&&(0,i.jsx)(nI,{allowAttachments:e.allowAttachments,discardAttempts:t,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:n,hideEmojiPicker:e.hideEmojiPicker,maxCommentLength:e.maxCommentLength,mentionables:e.mentionables,mountUnfocused:e.mountUnfocused,onComposeFocus:e.onComposeFocus,onDiscardAttempt:s,onSubmit:e.onSubmit,pageId:e.pageId,pinOffset:e.pinOffset,setClientMeta:e.setClientMeta,setIsEditorFocused:e.setIsEditorFocused,thread:e.thread,typeahead:e.typeahead,user:e.user,viewportBounds:o,viewportInfo:e.viewportInfo,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})]})}var nR=n(327559),nP=n(562418),nO=n(462458),nD=n(416029),nL=n(566697),nF=n(120928),nB=n(105641),nU=n(610604),nV=n(569313),nH=n(442049),nz=n(183463),nG=n(86742);let nK="comment_selection_box--selectionBox--rkq5J";function nW(e){let t=(0,D.Z0)(e.viewportInfo,e.pinCanvasPosition),n=(0,D.Z0)(e.viewportInfo,e.selectionBoxAnchorCanvasPosition),[a,s]=r.useState(void 0),[o,l]=r.useState(void 0),[d,c]=r.useState(n.x-10),[u,m]=r.useState(n.y-10),[p,h]=r.useState(0),[f,g]=r.useState(0),[x,_]=r.useState(""),y=(0,e7.fG)(),b=r.useCallback(()=>{s({mousePosition:e.selectionBoxAnchorCanvasPosition,startZoomScale:e.viewportInfo.zoomScale}),c(n.x-10-2500),m(n.y-10-2500),h(5e3),g(5e3),_("translate(2500px, 2500px"),l(y(e.pinCanvasPosition,e.nodeId)||void 0)},[e.nodeId,e.pinCanvasPosition,e.selectionBoxAnchorCanvasPosition,e.viewportInfo,n,s,l,c,m,h,g,_,y]),{onSetNewSelectionBoxAnchor:v,viewportPositionFromClientPosition:C}=e,E=r.useCallback(t=>{if(!a)return;let i=nq(t.clientX,t.clientY,C,e.viewportInfo,o);s({mousePosition:i,startZoomScale:a.startZoomScale});let r=(0,D.Z0)(e.viewportInfo,i),l=r.x-n.x+2500,d=r.y-n.y+2500;_(`translate(${l}px, ${d}px)`)},[a,s,_,o,n.x,n.y,C,e.viewportInfo]),w=r.useCallback((e,t)=>{let n=(0,D.Z0)(e,t);s(void 0),l(void 0),c(n.x-10),m(n.y-10),h(0),g(0),_("")},[s,l,c,m,h,g,_]),k=r.useCallback(t=>{if(!a)return;let n=nq(t.clientX,t.clientY,C,e.viewportInfo,o);v(n),w(e.viewportInfo,n)},[a,o,v,C,w,e.viewportInfo]);r.useEffect(()=>{a||(c(n.x-10),m(n.y-10))},[n,a]),r.useEffect(()=>{a&&a.startZoomScale!==e.viewportInfo.zoomScale&&w(e.viewportInfo,e.selectionBoxAnchorCanvasPosition)},[a,e.viewportInfo,e.selectionBoxAnchorCanvasPosition,w]);let T=a?(0,D.Z0)(e.viewportInfo,a.mousePosition):n,j=Math.min(t.x,T.x),S=Math.min(t.y,T.y),I=Math.max(t.x-j,T.x-j),A=Math.max(t.y-S,T.y-S);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:nK,style:{left:j,top:S,width:I,height:A}}),e.canUpdateSelectionBoxAnchor&&(0,i.jsx)(nG.D8,{role:"button",tabIndex:-1,className:"comment_selection_box--selectionBoxAnchor--0zhjh",style:{left:d,top:u,width:p,height:f},onMouseDown:b,onMouseMove:E,onMouseUp:k,dataTestId:"comment-selection-box-anchor",recordingKey:"commentSelectionBox.anchor",children:(0,i.jsx)("div",{className:"comment_selection_box--selectionBoxAnchorIcon--Ke6P4",style:{transform:x}})})]})}function nq(e,t,n,i,r){let a=n(new c.Mi(e,t)),s=(0,D.$$)(i,a);if(!r)return new c.Mi(s.x,s.y);let o=(0,eg.pV)(s,r);return new c.Mi(o.x,o.y)}var nX=n(464077);function nY(e){let t=(0,F.Pc)(),n=(0,a.wA)(),r=(0,a.d4)(e=>e.comments.typeahead);return(0,i.jsx)(nN,{dispatch:n,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,hideComposer:e.hideComposer,hideEmojiPicker:e.hideEmojiPicker,maxCommentLength:e.maxCommentLength,mentionables:e.mentionables,mountUnfocused:e.mountNewCommentUnfocused,onComposeFocus:e.onComposeFocus,onSubmit:e.submitNewComment,pageId:e.pageId,pinOffset:e.pinOffset,setClientMeta:e.setClientMeta,setIsEditorFocused:e.setIsEditorFocused,thread:e.thread,typeahead:r,user:t,viewportInfo:e.viewportInfo,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})}function nJ({viewportBounds:e,isCommunityMentions:t=!1,children:n,activeDragTarget:r}){let a=(0,e7.j0)(),s=r||(0,o.kc)().a11y_new_comments_to_fpl||a?"comments_modal--detailsContainerToFront--xg3Mg comments_modal--detailsContainer--AfBHU":"comments_modal--detailsContainer--AfBHU";return(0,i.jsx)("div",{"data-forward-events-to-fullscreen":!0,className:z()(s,P.Uu),style:{...t&&{position:"absolute"},top:e.y,left:e.x,height:e.height,width:e.width},children:n})}function nZ(e){let t=(0,a.wA)(),n=(0,D._X)({subscribeToUpdates_expensive:!0}),s=(0,nX._B)(),o=(0,nP.HW)(),l=(0,a.d4)(e=>e.comments.activeThread?.triggerRef),d=(0,eU.tS)(),u=(0,nV.Vc)(d).unwrapOr(null),m=(0,nF.g)(u?.planRecordId),p=(0,e7.eW)(),h=(0,e7.Wt)(),f=r.useMemo(()=>h({viewportInfo:n,triggerRef:l}),[h,n,l]),x=r.useMemo(()=>(0,eD.vl)(n,e.thread,!0,p.paddingRight,f),[e.thread,n,p.paddingRight,f]),_=(0,td._6)(),y="communityHub"===_.view,b=(0,eD.eR)(e.thread.id),v=r.useRef(null),C=r.useRef(null),{onClear:E}=s,{submitReply:w,submitNewComment:k}=e,T=r.useCallback(e=>{w(e),E()},[w,E]),j=r.useCallback(()=>{k(),E()},[k,E]),S=(0,a.d4)(e=>e.comments.editingComment),I=(0,a.d4)(e=>e.comments.activeDragTarget),A=(0,nR.i)(),N=r.useCallback(()=>v.current?.visible?(v.current.clearDecorators(),!0):A?((0,nR.Dp)(),!0):!!S||(t(g.UU()),!0),[t,S,A]);(0,nL.O1)(N,nL.KD.MODAL);let{pinOffset:R}=e,P=r.useMemo(()=>{if(!R)return eD.hx;let{width:e,height:t}=R;return{x:e+eD.hx.x,y:eD.hx.y-t}},[R]),O=(0,nO.y)()&&x.sidebarItemType===M.kT.FEED_POST,L=y?nD.j:(0,eH.zW)({feedPostUuid:O?x.feedPostPublicUuid:void 0,checkPermissions:o?nH.m1.VIEW_PROTOTYPE_OR_PENDING:nH.m1.VIEW_OR_PENDING,userGroupAtMentionsEnabled:m}),B=r.useCallback(e=>{let t=e.comments[0].client_meta,n=e.comments[0].client_meta.selection_box_anchor,i=c.Mi.subtract(n,t);return c.Mi.add(e.canvasPosition,i)},[]),U=(0,a.d4)(e=>e.comments.newComment),V=r.useCallback(e=>{if(b)t(g.a$({selectionBoxAnchor:e}));else{if(!x.comments[0].client_meta?.selection_box_anchor)return;let n={...x.comments[0].client_meta};if(x.comments[0].client_meta.in_frame){let t=B(x),i=c.Mi.subtract(e,t);n.selection_box_anchor=c.Mi.add(n.selection_box_anchor,i)}else n.selection_box_anchor=e;t(g.hY({thread:x,clientMeta:n}))}},[t,x,b,B]),H="communityHub"===_.view,z=(0,F.TA)(),G=(0,F.Pc)(),K=(0,a.d4)(e=>e.comments),W="communityHub"===_.view,q=r.useMemo(()=>"communityHub"===_.view&&"hubFile"===_.subView&&(0,nB.t0)(_.fullscreenState),[_]),X=(0,e7.Uv)()||W&&!q,Y=null;b?Y=U.selectionBoxAnchor:x.comments[0].client_meta?.selection_box_anchor&&(x.comments[0].client_meta?.in_frame,Y=x.selectionAnchorCanvasPosition??x.boundingBoxAnchorCanvasPosition??null);let J=!!(0,eW.bc)((0,nU.dDF)(b?null:{key:e.thread.key})).unwrapOr(!1),Z=z===x.comments[0]?.user_id;return null===n?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:`comments_modal--overlay--KxE60 ${I?"comments_modal--dimBackground--oSZ0m":""}`}),(0,i.jsxs)(nJ,{viewportBounds:n,isCommunityMentions:y,activeDragTarget:I,children:[x.canvasPosition&&Y&&(0,i.jsx)(nW,{nodeId:x.comments[0]?.client_meta?.node_id,selectionBoxAnchorCanvasPosition:Y,pinCanvasPosition:x.canvasPosition,viewportInfo:n,onSetNewSelectionBoxAnchor:V,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,canUpdateSelectionBoxAnchor:!x.boundingBoxAnchorCanvasPosition&&(b||Z||J)}),b?(0,i.jsx)(nY,{editorOnClear:s.editorOnClear,editorOnInsert:s.editorOnInsert,hideComposer:e.hideComposer,hideEmojiPicker:H,maxCommentLength:e.maxCommentLength,mentionables:L,mountNewCommentUnfocused:e.mountNewCommentUnfocused,onComposeFocus:e.onComposeFocus,pageId:e.pageId,pinOffset:P,setClientMeta:e.setClientMeta,setIsEditorFocused:s.setIsEditorFocused,submitNewComment:j,thread:x,viewportInfo:n,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition}):x.sidebarItemType===M.kT.COMMENT_THREAD||x.sidebarItemType===M.kT.FEED_POST&&(0,nO.y)()?(0,i.jsx)(no,{commentCreationDisabled:e.commentCreationDisabled,comments:K,disableDragging:X,dispatch:t,editorOnClear:s.editorOnClear,editorOnInsert:s.editorOnInsert,hideEmojiPicker:H,hideReactions:W,hideResolve:e.hideResolve||!(0,M.m)(x.sidebarItemType),ignoreThreadContainerScrollOnLoad:W,isLoading:e.isLoading,mentionables:L,modalRef:C,mountUnfocused:e.mountNewCommentUnfocused,nextThread:e.nextThread,onComposeFocus:e.onComposeFocus,prevThread:e.prevThread,setIsEditorFocused:s.setIsEditorFocused,setIsPinned:e.setIsPinned,setResolved:e.setResolved,showDockToSideButton:!1,showEditedIndicators:W,submitReply:T,thread:x,updateCommentContent:e.updateCommentContent,useAbsolutePositioning:W&&!q,user:G,viewportInfo:n,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition}):void 0,(0,i.jsx)(nz.wV,{decoratorsRef:v,onClear:s.onClear,onInsert:s.onInsert,position:x.threadPosition||void 0,isCommunityMentions:y})]})]})}function nQ(e){return(0,i.jsx)(eq.u9,{label:"CommentsDetailsView",children:(0,i.jsx)(n$,{...e})})}function n$({renderDetailContainerInPortal:e,detailContainerPortal:t,...n}){let r=(0,i.jsx)(nZ,{...n});return e?t?(0,V.createPortal)(r,t):null:r}var n0=n(184743),n1=n(88221),n2=n(508902);class n5{constructor(e,t=15){this.eventProvider=e,this.dragMin=t,this.dragInfo=null,this._dragCallbacks={},this._onMouseDownOverride=null,this.canvasPositionClick=(e,t)=>this._onCanvasPositionClick?.(e,{replace:t}),this.viewportPositionClick=(e,t)=>this._onViewportPositionClick?.(e,{replace:t}),this.onDown=e=>{if(this.dragInfo={id:`drag-at-${performance.now()}`,start:e,position:e},this._onMouseDownOverride){this._onMouseDownOverride(e),this.dragInfo.interrupted=!0;return}this._dragCallbacks.onDragStart?.(this.dragInfo)},this.onUp=(e,t)=>{if(!this.dragInfo){this._onViewportPositionClick?.(e,t);return}if(this.dragInfo.interrupted)return;let n=this.dragInfo;if(this.dragInfo=null,!(c.Mi.distance(e,n.start)>this.dragMin)||this._dragCallbacks.canDrag&&!this._dragCallbacks.canDrag()){this._dragCallbacks.onDragCancel?.(n.id),this._onViewportPositionClick?.(e,t);return}this._dragCallbacks.onDragEnd?.(n)},this.onMove=e=>{this.dragInfo&&!this.dragInfo.interrupted&&(this.dragInfo={...this.dragInfo,position:e},this._dragCallbacks.onDragUpdate?.(this.dragInfo))}}set onCanvasPositionClick(e){this._onCanvasPositionClick=e}set onViewportPositionClick(e){this._onViewportPositionClick=e}set onMouseDown(e){this._onMouseDownOverride=e}set dragCallbacks(e){this._dragCallbacks=e}subscribe(){return this.eventProvider.on("down",this.onDown),this.eventProvider.on("up",this.onUp),this.eventProvider.on("move",this.onMove),()=>{this.eventProvider.off("down",this.onDown),this.eventProvider.off("up",this.onUp),this.eventProvider.off("move",this.onMove)}}cancel(){this.dragInfo&&(this.dragInfo.interrupted=!0,this._dragCallbacks.onDragCancel?.(this.dragInfo.id))}}function n4(e){return{on:(t,n)=>{let i=e[t];i&&nv.on(i,n)},off:(t,n)=>{let i=e[t];i&&nv.AU(i,n)}}}let n3=n4({down:"mousedown",up:"mouseup",move:"mousemove"}),n6=n4({}),n7={subscribe:!0,touchEvents:!1};function n9(e){let t=r.useContext(U.kw),n=(0,e7.pC)(),s=(0,e7.gu)(),o=(0,e7.fG)(),l=(0,a.wA)(),d=(0,a.d4)(e=>e.selectedView.view),{dragEventHandler:c}=e,{canvasPositionClick:u}=c,[m,p]=r.useState(null),[h,f]=r.useState(null),[x,_]=r.useState(null),y=r.useMemo(()=>"communityHub"===d?{}:{canDrag:()=>l(g.UU()),onDragStart:e=>{let n=(0,D.$$)(t.getRawViewportInfo(),e.start);_(n),p((0,D.$$)(t.getRawViewportInfo(),e.position)),f(o(n))},onDragCancel:()=>{_(null),p(null),f(null)},onDragUpdate:e=>{if(!x||!m)return;let n=(0,D.$$)(t.getRawViewportInfo(),e.position);if(h){let e=(0,eg.pV)(n,h);(e.x!==m.x||e.y!==m.y)&&p(e);return}p(n)},onDragEnd:e=>{if(x&&m){if(n((0,D.$$)(t.getRawViewportInfo(),e.start))){s(),_(null),p(null),f(null);return}u(m,!0)&&l(g.a$({selectionBoxAnchor:(0,D.$$)(t.getRawViewportInfo(),e.start)})),_(null),p(null),f(null)}}},[t,n,o,s,l,u,d,m,p,h,f,x,_]);r.useEffect(()=>{c.dragCallbacks=y},[y,c]);let b=m?(0,D.Z0)(t.getRawViewportInfo(),m):null,v=x?(0,D.Z0)(t.getRawViewportInfo(),x):null;if(!b||!v)return null;let C=Math.min(v.x,b.x),E=Math.min(v.y,b.y),w=Math.max(v.x-C,b.x-C),k=Math.max(v.y-E,b.y-E);return(0,i.jsx)("div",{className:nK,style:{left:C,top:E,width:w,height:k}})}let n8={replace:!1};function ie(e){let{requestToDeselectCommentPin:t,requestToAddDraftCommentPin:n}=e,s=(0,D.ni)(),o=(0,a.d4)(e=>e.selectedView.view),d=(0,l.md)(N.R),c=void 0!==e.isActiveCommentPinned?e.isActiveCommentPinned:d,u=(0,a.d4)(e=>e.comments.editingComment),m=(0,a.d4)(e=>e.comments.emojiPicker),p=(0,a.wA)(),{activeId:h,commentCreationDisabled:f}=e,x=(0,a.d4)(e=>e.mirror.appModel.currentTool)===E.NLJ.COMMENTS&&"fullscreen"!==o,_=function(e,t,n,i,s){let{requestToDeselectCommentPin:o,eventPreferences:l,allowCompose:d,requestToAddDraftCommentPin:c}=i||{},u=r.useContext(U.kw),m=(0,e7.pC)(),p=(0,e7.gu)(),h=(0,a.wA)(),f=(0,B.ut)(C.Ez5?.singleSlideView().focusedNodeId,null),x=r.useRef(f);r.useEffect(()=>{f!==x.current&&(x.current=f,h(g.UU()))},[f,h]);let _=r.useCallback((i,r)=>{if(e&&(d||!t))return o?!0!==r&&(o(),!0):(n&&n(!1),!h(g.UU())||!0!==r)},[e,d,t,o,n,h]),{touchEvents:y}=l||{},b=r.useCallback((e,t)=>{let n=(0,D.Z0)(u.getViewportInfo(),e),{replace:i}=t||n8;if(!_(n,i)&&(!y||i)&&(0,eD.rN)(n,u.getValidCommentsRect())){if(m(e)){p();return}return c?c?.({x:n.x,y:n.y,width:32*1.15,height:32*1.15}):(h(g.vV({anchorPosition:e})),h(g.CX())),e}},[_,c,y,u,m,p,h]),v=r.useCallback((e,t)=>b((0,D.$$)(u.getRawViewportInfo(),e),t),[u,b]);return function(e,t,n,i,a,s){let{touchEvents:o,subscribe:l}={...n7,...i||{}},d=r.useCallback(()=>new n5(o?n6:n3),[o]),[c,u]=r.useState(()=>d());return r.useEffect(()=>{u(d())},[d]),r.useEffect(()=>l?c.subscribe():()=>{},[c,l]),r.useEffect(()=>{o&&a&&s?.current?(a.updateTapGestureRecognizer(s.current,e=>{t(e)}),a.updateMultiTouchLongPressGestureRecognizer(s.current,e=>{t(e,{replace:!0})},1)):(c.onCanvasPositionClick=e,c.onViewportPositionClick=t)},[e,t,c,o,a,s]),r.useEffect(()=>{c.onMouseDown=n},[n,c]),c}(b,v,d?null:_,l,r.useContext(n1.W),s)}(h,c,e.setIsPinned,{requestToAddDraftCommentPin:n,eventPreferences:{touchEvents:e.preferTouchOverMouseForComments},allowCompose:!0!==f||x,requestToDeselectCommentPin:t},e.gestureCanvasRef),y=r.createRef(),b=r.useCallback(t=>{if(t.keyCode===n0.Uz.ESCAPE&&(_.cancel(),!u&&e.activeId)){m&&m.visible&&p(g.RI({visible:!1}));return}},[p,u,e.activeId,m,_]),v=ep.v_(e.recordingKey,"keydown",b),w=r.useCallback(e=>{v(e.event)},[v]),k=r.useRef(void 0);if(r.useEffect(()=>{if(k.current&&"details"===e.mode&&!e.activeId){k.current();return}},[e.mode,k,e.activeId]),!s)return null;let{x:T,y:j,width:S,height:I}=s,A={left:e.positionRelativeToCanvas?0:T,top:e.positionRelativeToCanvas?0:j,width:S,height:I};return(0,i.jsx)(n2.vL,{name:"comments-view-canvas",focusOnMount:!1,propagateKeyboardFocus:!0,handleKeyDown:w,ref:y,focusFunctionRef:k,style:{position:"absolute"},children:(0,i.jsx)("div",{"data-forward-events-to-fullscreen":!0,className:"comments_view--viewContainer--5kMZh comments_view--_container--XGEcp",children:(0,i.jsxs)("div",{"data-allow-component-drop":!0,"data-forward-events-to-fullscreen":!0,className:"comments_view--outerAnchorContainer--g8-w6 comments_view--_container--XGEcp",ref:e.forwardedRef,style:A,children:[(0,i.jsx)(n9,{dragEventHandler:_}),e.children]})})})}let it=r.forwardRef((e,t)=>(0,i.jsx)(ie,{...e,forwardedRef:t}));function ii(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e},[e]),r.useCallback(e=>{let n=t.current,i=n.find(t=>t.id===e);if(i)return function(e,t){let n;if(!e.canvasPosition)return;let i=1/0;return t.forEach(t=>{t.id!==e.id&&t.canvasPosition&&t.page===e.page&&c.Mi.distance(e.canvasPosition,t.canvasPosition)<i&&(n=t,i=c.Mi.distance(e.canvasPosition,t.canvasPosition))}),n}(i,n)},[t])}function ir(e,t,n){if(0===e.comments.length)return!1;let i=e.comments[0]?.user_id===n,r=e.comments.some(e=>e.user_id===n||(0,eD.F$)(e).includes(n));return t.canEdit||i||r}let ia=e=>{let t=(0,l.Xr)(N.R),n=(0,d.am)();return r.useCallback(i=>{t(i),i&&n("Comment Pinned",{parentCommentId:e})},[e,n,t])};function is(e){var t;let{activeId:n}=e,s=r.useContext(U.kw),l=(0,a.d4)(e=>"communityHub"===e.selectedView.view),d=(0,F.iZ)(),u=(0,eU.q5)(),m=(0,a.d4)(e=>e.selectedView.commentThreadId),p=(0,a.wA)(),h=r.useContext(v.hh),g=h.filteredThreads,x=(0,nX.WM)(g,e.pageId,n,e.showOnlyParticipatingComments,e.hideInactiveComments);t=g.status,(0,eV.t)(e=>{"loaded"===t&&e("comments_rendered")},[t]);let b=(0,nX.hC)(h.threads,[]),C="loaded"===h.threads.status,E=(0,_.Le)(),w=m&&C&&b.some(e=>e.id===m),k=!!m&&C&&!w&&E,T=(0,nX.nq)(m,C,n,b,s,e.requestToSelectCommentPin);r.useEffect(()=>{(T||k)&&p(f.ST())},[T,k,p]);let j=(0,nX.uB)(n,e.pageId),S=(0,nX.zf)(x,s.getViewportInfo()),[I,A]=r.useMemo(()=>{let e=S.findIndex(e=>e.id===n);return -1===e?[void 0,void 0]:[S[e-1],S[e+1]]},[S,n]),N=d?.id&&j&&u?ir(j,u,d.id):null,R=e.hideResolve||!N,P=r.useRef(null),O=r.useCallback(e=>{if(P.current){let t=P.current.getBoundingClientRect();return e.subtract(new c.Mi(t.left,t.top))}return new c.Mi(0,0)},[]),[D,L]=r.useState(null),B=!(e.requestToSelectCommentPin&&j?.id!==M.hm),V=ia(j?.id);return(0,i.jsxs)(i.Fragment,{children:[(0,o.kc)().comments_react?(0,i.jsx)(eO,{activeThread:j,dragDisabledOverride:e.dragDisabledOverride,isCommunity:l,pageId:e.pageId,requestToDeselectCommentPin:e.requestToDeselectCommentPin,requestToSelectCommentPin:e.requestToSelectCommentPin,setActivePinSize:L,setClientMeta:e.setClientMeta,threads:x,viewportPositionFromClientPosition:O}):(0,i.jsx)(y.IN,{activeThread:j,dragDisabledOverride:e.dragDisabledOverride,isCommunity:l,pageId:e.pageId,requestToDeselectCommentPin:e.requestToDeselectCommentPin,requestToSelectCommentPin:e.requestToSelectCommentPin,setActivePinSize:L,setClientMeta:e.setClientMeta,threads:x,viewportPositionFromClientPosition:O}),(0,i.jsx)(it,{ref:P,activeId:n,commentCreationDisabled:"pins"===e.mode||e.commentCreationDisabled,gestureCanvasRef:e.gestureCanvasRef,mode:e.mode,positionRelativeToCanvas:e.positionRelativeToCanvas,preferTouchOverMouseForComments:e.preferTouchOverMouseForComments,recordingKey:"commentsViewCanvas",requestToAddDraftCommentPin:e.requestToAddDraftCommentPin,requestToDeselectCommentPin:e.requestToDeselectCommentPin,setIsPinned:V,children:(0,i.jsx)(i.Fragment,{children:j&&B&&(0,i.jsx)(nQ,{commentCreationDisabled:e.commentCreationDisabled,detailContainerPortal:e.detailContainerPortal,hideComposer:!!e.requestToAddDraftCommentPin,hideResolve:R,isLoading:e.isLoadingActiveThread,maxCommentLength:e.maxCommentLength,mountNewCommentUnfocused:e.mountNewCommentUnfocused,nextThread:A,onComposeFocus:e.onComposeFocus,pageId:e.pageId,pinOffset:D,prevThread:I,renderDetailContainerInPortal:e.renderDetailContainerInPortal,setClientMeta:e.setClientMeta,setIsPinned:V,setResolved:e.setResolved,submitNewComment:e.submitNewComment,submitReply:e.submitReply,thread:j,updateCommentContent:e.updateCommentContent,viewportPositionFromClientPosition:O})})})]})}function io(e){let t=(0,eH.Qt)(e.activeId);return(0,i.jsxs)(u.tH,{boundaryKey:"FileCommentsOverlay",team:s.e.WAYFINDING,fallback:u.H4.NONE_I_KNOW_WHAT_IM_DOING,children:[(0,i.jsx)(ez.p,{children:(0,i.jsx)(eG.T,{})}),(0,i.jsx)(il,{...e,usersOnFile:t})]})}function il(e){let t=(0,_.wq)(),n=(0,b.s)(),s=(0,a.wA)(),o=function(){let e=(0,eK.Vi)(),t=(0,a.d4)(e=>e.mirror.appModel.showComments);return e?"details":!1===t?null:"pins"}(),{pageId:l,modeOverride:d}=e,c=r.useContext(U.kw),u=(0,nX.H6)(c,l),f=(0,x.I_)().writeAPI,y=r.useCallback(e=>{if(!f){console.error("Calling submitReply with no write API");return}"loaded"===t.status&&t.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(t,i,r,a,o,l)=>g.dB(f,s,t,i,r,a,o,l,e.uuid,n),s(g.lV({...e,commentsWriteApi:f,commentsConfiguration:n})),(0,m.YQ)({id:eG.w}))},[s,t,f,n]),v=r.useCallback(e=>{if(!f){console.error("Calling submitNewComment with no write API");return}e.onCommentValidationFailure=(e,t,n,i,r,a)=>g.C(s,e,t,n,i,r,a),s(g._v(e))},[s,f]),C=(0,a.d4)(e=>e.selectedView),E=(0,L.Yi)(C),w=(0,p.eZ)(),k=(0,a.d4)(e=>"fullscreen"===e.selectedView.view),T=(0,eL.aV)(),{isLoading:j}=(0,eF._Z)(),S=d||o,I=(0,nX.hC)(t,[]);(0,eB.d0)(e.activeId,I,c,k,u),(0,eB.$P)(e.activeId,I,c,d,S);let A=(0,L.sc)(),N=r.useCallback(e=>{s(g.hY(e))},[s]),M=r.useCallback(e=>{s(g.hx(e))},[s]);if((0,h.Kv)()||w||k&&(T||j)||null===S||E)return null;let R=!k&&!!A?.requestToSelectCommentPin&&!!A?.requestToDeselectCommentPin&&!!A?.requestToAddDraftCommentPin;return(0,i.jsx)(is,{activeId:e.activeId,detailContainerPortal:e.detailContainerPortal,dragDisabledOverride:A?.shouldDisableCommentDrag,gestureCanvasRef:e.gestureCanvasRef,hideInactiveComments:!1,mode:S,pageId:e.pageId,positionRelativeToCanvas:!1,preferTouchOverMouseForComments:R,renderDetailContainerInPortal:e.renderDetailContainerInPortal,requestToAddDraftCommentPin:A?.requestToAddDraftCommentPin,requestToDeselectCommentPin:A?.requestToDeselectCommentPin,requestToSelectCommentPin:A?.requestToSelectCommentPin,setClientMeta:N,setResolved:M,showOnlyParticipatingComments:e.showOnlyParticipatingComments,showResolvedComments:e.showResolvedComments,submitNewComment:()=>{u(),(0,m.YQ)({id:eG.w})},submitReply:y,updateCommentContent:v})}is.displayName="CommentsOverlay"},28475:(e,t,n)=>{n.d(t,{Z:()=>s,_:()=>o});var i=n(105652),r=n(875253),a=n(90154);class s{constructor(e,t){this.guide=null;let n=0;"number"==typeof e&&(n=e),this.inset={top:e.top||e.vertical||n,bottom:e.bottom||e.vertical||n,left:e.left||e.horizontal||n,right:e.right||e.horizontal||n},t&&(this.guide=document.createElement("div"),this.guide.id="inset-guide",this.guide.style.position="fixed",this.guide.style.zIndex="10",this.guide.style.display="none",this.guide.style.pointerEvents="none",document.firstElementChild.append(this.guide))}_computePositionWithinInsetBounds(e,t,n,i,r){let a=n.top,s=n.bottom-this.inset.bottom,o={};t.y<a?o.y=a:t.y+e.clientHeight>s&&(o.y=s-e.clientHeight);let l=n.left,d=n.right;if(t.x<l?o.x=l:t.x+e.clientWidth>d&&(o.x=d-e.clientWidth),o.x&&i&&o.x<t.x){let n=Math.min(i.x-(r?.x||0),d)-e.clientWidth;n>l?o.x=n:o.x=t.x}return o}computePositionWithinInsetBounds(e,t,n,i,r,a){let s={top:this.inset.top,left:this.inset.left,right:n.width-this.inset.right,bottom:n.y+n.height-this.inset.bottom-(a??0)},o=this._computePositionWithinInsetBounds(e,t,s,i,r);if(this.guide){let e={top:n.y+this.inset.top,left:n.x+this.inset.left,width:n.width-this.inset.right-this.inset.left,height:n.height-this.inset.bottom-this.inset.top};this.guide.style.top=`${e.top}px`,this.guide.style.left=`${e.left}px`,this.guide.style.height=`${e.height}px`,this.guide.style.width=`${e.width}px`,this.guide.style.display="block",o.y||o.x?this.guide.style.border="1px solid red":this.guide.style.border="1px solid green"}return o}}function o(e,t,n,s,o,l){let{newCommentAdditionalBottomInset:d}=(0,a.s)(),c=e.current,u=i.useMemo(()=>t?r.Mi.add(t,l):null,[l,t]);return i.useMemo(()=>{if(!u)return null;if(!c||!s)return u;let e=s.computePositionWithinInsetBounds(c,u,n,t,o,d);return{...u,...e}},[u,c,s,n,t,o,d])}},94051:(e,t,n)=>{n.d(t,{Q:()=>d});var i=n(239976),r=n(105652),a=n(312884),s=n(875253),o=n(566697),l=n(43862);function d(e){let{editorRef:t,container:n,initialLocation:d,closeEditor:c}=e,[u,m]=r.useState(null),p=r.useCallback(e=>{m(e.target.value.trim())},[]),h=r.useCallback(()=>(c(),!0),[c]);(0,o.O1)(h,o.KD.LINK_TOOLTIP);let f=r.useCallback(e=>{"Enter"===e.key&&(e.preventDefault(),u?t.current?.onSubmitHyperlink(u):t.current?.onRemoveHyperlink(),t.current?.focus(),c())},[c,t,u]),g=r.useCallback(e=>{t.current?.onRemoveHyperlink(),t.current?.focus(),c(),e.stopPropagation()},[c,t]);r.useEffect(()=>{t.current&&m(t.current.getActiveHyperlinkForCurrentSelection())},[t]);let x=r.useMemo(()=>{if(n.current){let e=(0,a.E)(n.current.getBoundingClientRect()),t=d.left-e.left,i=d.top-e.top;return new s.Mi(t+d.width/2,i)}return null},[n,d.left,d.top,d.width]);return x&&null!==u?(0,i.jsx)(l.c,{url:u,location:x,onInputChange:p,onInputKeyDown:f,onBlur:()=>{c()},onClickTrash:g}):null}},959668:(e,t,n)=>{n.d(t,{g:()=>c,H:()=>o});var i=n(74828),r=n(252904),a=n(875253);class s{constructor(e,t,n){this.cellSize=e,this.neighborThreshold=t,this.sizeFn=n,this.grid=new Map,this.NEIGHBORING_CELL_DELTAS=[[0,0],[-1,0],[0,-1],[0,1],[1,0],[1,-1],[1,1],[-1,-1],[-1,1]]}add(e){let{x:t,y:n}=this.getCoords(e),i=this.toCellIndex(n),r=this.toCellIndex(t);this.getCell(i,r).push(e)}findNeighbor(e){let t=this.sizeFn(e),{x:n,y:i}=this.getCoords(e),r=this.toCellIndex(i),s=this.toCellIndex(n);for(let[n,i]of this.NEIGHBORING_CELL_DELTAS)for(let o of this.getCell(r+n,s+i))if(o!==e){let e=this.sizeFn(o);if((0,a.gt)(t,e)<=this.neighborThreshold)return o}return null}getCoords(e){let t=this.sizeFn(e);return{x:t.x+t.width/2,y:t.y+t.height/2}}getCell(e,t){let n=this.grid.get(e);n||(n=new Map,this.grid.set(e,n));let i=n.get(t);return i||(i=[],n.set(t,i)),i}toCellIndex(e){return Math.floor(e/this.cellSize)}}function o(e,t){return Math.max(e.minZoomPercentage/100-t,0)*e.zoomScaleOverlap}let l=(e,t)=>{t.forEach(t=>{let n=e.threads.length,i=t.threads.length,r=n+i,a=e.x*n/r+t.x*i/r,s=e.y*n/r+t.y*i/r;e.x=a,e.y=s,e.threads=e.threads.concat(t.threads)})};class d{constructor(e,t,n){let a=o(t,e.zoomScale),l=r.XC.getPinSize(3),d=Math.ceil(Math.max(i.u5,l.width,l.height)+a);this.distanceGrid=new s(d,a,n)}getNearbyNeighbor(e){return this.distanceGrid.findNeighbor(e)||void 0}onAddToResultCluster(e){this.distanceGrid?.add(e)}}function c(e,t,n,r){let a=[],s=[];for(let t of e)t.isActive||t.id===r?s.push(t):a.push({x:t.canvasPosition.x,y:t.canvasPosition.y,threads:[t]});let o=e=>i.ip.getClusterViewportRect(e,t);if(t.zoomScale<=n.minZoomPercentage/100){let e=new Map;do{e.clear();let i=new d(t,n,o),r=[];for(let t of a){let n=i.getNearbyNeighbor(t);n?e.has(n)?e.get(n).push(t):e.set(n,[t]):(i.onAddToResultCluster(t),r.push(t))}e.forEach((e,t)=>{l(t,e)}),a=r}while(e.size>0)}return s.forEach(e=>{let{canvasPosition:t}=e;t&&a.push({x:t.x,y:t.y,threads:[e]})}),a}},294407:(e,t,n)=>{n.d(t,{FQ:()=>E,LO:()=>C,Oo:()=>v});var i,r=n(105652),a=n(20002),s=n(250730),o=n(14575),l=n(445019),d=n(677394),c=n(40297),u=n(625429),m=n(424364);function p(e,t,n,i){let r=[h(e,t,n),h(e,t,i),h(n,i,e),h(n,i,t)];return r[0]!==r[1]&&r[2]!==r[3]||r.every(e=>"COLLINEAR"===e)&&f(e.x,t.x,n.x,i.x)&&f(e.y,t.y,n.y,i.y)}function h(e,t,n){let i=(t.y-e.y)*(n.x-t.x)-(n.y-t.y)*(t.x-e.x);return 0===i?"COLLINEAR":i>0?"CLOCKWISE":"COUNTERCLOCKWISE"}function f(e,t,n,i){let r=Math.min(e,t),a=Math.max(e,t),s=Math.min(n,i);return r<=Math.max(n,i)&&a>=s}!function(e){e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e.COLLINEAR="COLLINEAR"}(i||(i={}));var g=n(933330),x=(e=>(e.TOP="TOP",e.RIGHT="RIGHT",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.UNKNOWN="UNKNONWN",e))(x||{}),_=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP="TOP",e.TOP_RIGHT="TOP_RIGHT",e.RIGHT="RIGHT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM="BOTTOM",e.BOTTOM_LEFT="BOTTOM_LEFT",e.LEFT="LEFT",e.OVERLAP="OVERLAP",e))(_||{}),y=n(212198);n(157750);var b=n(911470);function v(){return(0,l.md)(u.uc)}function C(){let e=(0,a.d4)(({mirror:{appModel:e}})=>e.showUi),t=0;return(0,y.lK)()&&e&&(t+=(0,c.jz)(b.ui3RulerMargin)),(0,r.useMemo)(()=>({left:t,right:0}),[t,0])}function E(e,t=20){let n=function(e,t){let[n,i]=(0,r.useState)([]),a=(0,s.pv)(),l=(0,d.wm)(()=>t?a.filter(e=>e!==t&&!e.contains(t)&&!t.contains(e)):a,[a,t]),c=(0,r.useCallback)(t=>{i(t.map(t=>{let{x:n,y:i,width:r,height:a}=t.getBoundingClientRect();return 0===r||0===a?o.r.fromOriginAndSize(n,i,r,a):w(n,i,r,a,e)}))},[i,e]);(0,r.useLayoutEffect)(()=>{c(l)},[c,l]),(0,r.useLayoutEffect)(()=>{let e=()=>{c(l)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[c,l]);let u=(0,r.useCallback)(t=>{let n=t.map(t=>{let n=l.findIndex(e=>e===t.target);if(-1!==n){let{x:i,y:r,width:a,height:s}=t.target.getBoundingClientRect();return[n,0===a||0===s?o.r.fromOriginAndSize(i,r,a,s):w(i,r,a,s,e)]}}).filter(e=>!!e);i(e=>{let t=[...e];return n.forEach(([e,n])=>{t[e]=n}),t})},[l,e]);return(0,r.useLayoutEffect)(()=>{let e=new ResizeObserver(u);return l.forEach(t=>{e.observe(t)}),()=>e.disconnect()},[l,u]),(0,r.useLayoutEffect)(()=>{if(!("IntersectionObserver"in window))return()=>{};let e=new IntersectionObserver(e=>{u(e)},{root:null,rootMargin:"0px",threshold:1});return l.forEach(t=>{e.observe(t)}),()=>e.disconnect()},[l,u]),(0,r.useMemo)(()=>n.filter(e=>!e.isEmpty()),[n])}(t,e.current??void 0);return(0,r.useCallback)((e,i,r)=>(function(e,t,n,i){let r=function(e,t){if(t.containsIncludingBoundary(e))return e;let n=e.width()<=t.width()?(0,m.qE)(e.left(),t.left(),t.right()-e.width()):e.left(),i=e.height()<=t.height()?(0,m.qE)(e.top(),t.top(),t.bottom()-e.height()):e.top();return new o.r(new g.Mi(n,i),e.size)}(e,t),a=(()=>{if(i)return i;let n=o.r.fromCenterSize(t.center(),e.size);return[n.left(),n.top()]})();return[...n,...n].reduce((e,t)=>e.hasIntersectionWith(t)?function({target:e,obstacle:t,targetPreviousXY:n}){let[i,r]=n,a=new o.r(new g.Mi(i,r),e.size);switch(function(e,t,n){switch(function(e,t){let n=e.right()<=t.left(),i=e.left()>=t.right(),r=e.bottom()<=t.top(),a=e.top()>=t.bottom();if(n&&r)return"TOP_LEFT";if(i&&r)return"TOP_RIGHT";if(i&&a)return"BOTTOM_RIGHT";if(n&&a)return"BOTTOM_LEFT";if(r)return"TOP";if(i)return"RIGHT";if(a)return"BOTTOM";else if(n)return"LEFT";else return"OVERLAP"}(t,n)){case"TOP":return"TOP";case"RIGHT":return"RIGHT";case"BOTTOM":return"BOTTOM";case"LEFT":return"LEFT";case"TOP_LEFT":return p(t.bottomRight(),e.bottomRight(),n.topLeft(),n.topRight())?"TOP":"LEFT";case"TOP_RIGHT":return p(t.bottomLeft(),e.bottomLeft(),n.topLeft(),n.topRight())?"TOP":"RIGHT";case"BOTTOM_RIGHT":return p(t.topLeft(),e.topLeft(),n.bottomLeft(),n.bottomRight())?"BOTTOM":"RIGHT";case"BOTTOM_LEFT":return p(t.topRight(),e.topRight(),n.bottomLeft(),n.bottomRight())?"BOTTOM":"LEFT";default:return"UNKNONWN"}}(e,a,t)){case"TOP":return new o.r(new g.Mi(e.left(),t.top()-e.height()),e.size);case"BOTTOM":return new o.r(new g.Mi(e.left(),t.bottom()),e.size);case"LEFT":return new o.r(new g.Mi(t.left()-e.width(),e.top()),e.size);case"RIGHT":return new o.r(new g.Mi(t.right(),e.top()),e.size);default:return e}}({target:e,obstacle:t,targetPreviousXY:a}):e,r)})(e,i.expand(-t),n,r),[n,t])}function w(e,t,n,i,r){return o.r.fromOriginAndSize(e-r,t-r,n+2*r,i+2*r)}},704334:(e,t,n)=>{n.d(t,{h:()=>m});var i=n(105652),r=n(20002),a=n(319925),s=n(315230),o=n(192704),l=n(816505),d=n(920675),c=n(790016),u=n(425519);function m(e){let t=(0,l.dq)(),n=(0,c.X$)("useOrgPrivateExtensions").unwrapOr(null),m=n?.key.type===d.OL.ORG,p=(0,o.cW)(),h=(0,o.ZT)(),f="plugin"===e?p:h,g=(0,r.wA)(),x=(0,s.Cb)(),_=(0,u.K$)(),y="plugin"===e?a.Xt:a.gI;return i.useEffect(()=>{m&&!x&&g(y())},[g,m,x,y]),(0,i.useMemo)(()=>{if(!m||x)return[];let e=(0,u.Qt)((0,u.i8)(Object.values(f)),t||"");return _&&(e=(0,u._w)(e,_)),Object.values(e).map(e=>(0,u.uF)(e))},[_,x,m,f,t])}},958344:(e,t,n)=>{n.d(t,{x:()=>d});var i=n(105652),r=n(445019),a=n(257556);let s=(0,r.eU)(null),o=(0,r.eU)(null),l=0;function d({subscribeToUpdates_EXPENSIVE:e}){let t=(0,a.ft)(!0)?"pointermove":"mousemove",n=(0,r.Xr)(s);return(0,r.md)(e?s:o),(0,i.useEffect)(()=>{let e=({clientX:e,clientY:t})=>{n({x:e,y:t})};return 1==++l&&document.addEventListener(t,e),()=>{0==--l&&document.removeEventListener(t,e)}},[t,n]),r.zl.get(s)}},94360:(e,t,n)=>{n.d(t,{K:()=>s});var i=n(105652),r=n(1007),a=n(958344);function s(){let e=(0,a.x)({subscribeToUpdates_EXPENSIVE:!0}),t=(0,r._X)({subscribeToUpdates_expensive:!0});return(0,i.useMemo)(()=>!!(e&&e.y>=t.y&&e.x>=t.x&&e.x<=t.x+t.width),[e,t])}},750554:(e,t,n)=>{n.d(t,{a:()=>a});var i=n(20002),r=n(936199);function a(){let e=(0,i.d4)(e=>e.mirror?.appModel.showUi),t=(0,r.q)();return e&&t}},416029:(e,t,n)=>{n.d(t,{j:()=>i});let i={library:new(n(750514)).MH}},804396:(e,t,n)=>{n.d(t,{f:()=>H});var i=n(814852),r=n(692376),a=n(798913),s=n(582300),o=n(466082),l=n(270450),d=n(687631),c=n(264152),u=n(19047),m=n(295432),p=n(100290),h=n(230925),f=n(708723),g=n(809267),x=n(276159),_=n(771993),y=n(637739),b=n(393012),v=n(522568),C=n(793567),E=n(128261),w=n(402804),k=n(848990),T=n(641126);function j(e,t,n){let i=r.XJn.getCustomizableVariableName(n.guid,e);if(!i)return;let a=(0,T.tm)(i);if(a)return t[a]}let S={bottomLeftRadius:"rectangleBottomLeftCornerRadius",bottomRightRadius:"rectangleBottomRightCornerRadius",topLeftRadius:"rectangleTopLeftCornerRadius",topRightRadius:"rectangleTopRightCornerRadius"};function I(e,t){a.l7.ai("first-draft-override-radius",()=>{e.setBoundVariable(t,null)})}let A={itemSpacing:"stackSpacing",paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"};function N(e,t){a.l7.ai("first-draft-override-spacing",()=>{e.setBoundVariable(t,null)})}function M(e){a.l7.ai("first-draft-set-font-name",()=>{e.setRangeBoundVariable(0,e.characters.length,"fontFamily",null),e.setRangeBoundVariable(0,e.characters.length,"fontStyle",null),e.setRangeBoundVariable(0,e.characters.length,"fontWeight",null)})}async function R(e,t,n){let i=r.XJn.inheritedTextStyleGuid(e.guid);if(null===i){M(e);return}let s=(0,o.UN)().get(i);if(!s||!n||!n.variableMaps?.fontVariableMap){M(e);return}if(!("fontFamily"in s.boundVariablesForStyle))return;let l=s.boundVariablesForStyle.fontFamily,d=function(e,t,n){let i=r.XJn.getCustomizableVariableName(t.guid,e);if(!i)return null;let a=(0,T.tm)(i);return a?n[a]??null:null}(l.id,e,n.variableMaps.fontVariableMap);if(!d){M(e);return}try{await (0,b.uW)(d.fontName),a.l7.ai("first-draft-set-font-name",()=>{e.fontName=d.fontName,d.letterSpacing&&(e.letterSpacing=d.letterSpacing)}),t[l.id]=d.fontName.family}catch(n){M(e);let t=void 0===n?"undefined":n instanceof Error?n.message:JSON.stringify(n);v.az.trackDefinedEvent("ai_generation.first_draft_font_error",{error:t,family:d.fontName.family,style:d.fontName.style,location:"override-variables"})}}async function P(e){await Promise.all(e.node.childrenNodes.map(t=>O({...e,node:t}))),(0,w.V5)(e.node)}async function O(e){var t;let{node:n,variableOverrideMap:i,theme:s,colorOptions:o}=e;!function(e,t){if("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode)for(let[n,i]of Object.entries(A)){let r=e.boundVariables&&e.boundVariables[n];if(!r)continue;if(!t||!t.variableMaps){N(e,n);continue}let s=j(r.id,t.variableMaps.numberVariableMap,e)??void 0;if(void 0===s){N(e,n);continue}a.l7.ai("first-draft-override-spacing",()=>{let t=e[i],n=(0,E.o$)(t);e[i]=(0,E.nV)({value:t,rangeSize:n},s,1)})}}(n,s),function(e,t,n){if(e.boundVariables)for(let[i,r]of Object.entries(S)){let s=e.boundVariables&&e.boundVariables[i];if(!s)continue;if(!n||!n.variableMaps){I(e,i);continue}let o=j(s.id,n.variableMaps.numberVariableMap,e)??void 0;if(void 0===o){I(e,i);continue}a.l7.ai("first-draft-override-radius",()=>{let n=(0,E.UO)(e,e[r],o,1);e[r]=n,t[s.id]=n})}}(n,i,s),"TEXT"===n.type&&await R(n,i,s);let l=n.fills.some(e=>"IMAGE"===e.type),d=!l&&o.modeChanged;if(t={node:n,getNewColor:(e,t)=>{let i=t.varId&&s?function(e,t,n){if(!t.variableMaps)return;let i=r.XJn.getCustomizableVariableName(n.guid,e);if(!i)return;let a=(0,T.tm)(i);if(a)return t.variableMaps.colorVariableMap[a]}(t.varId,s,n):void 0;return(0,y.Jv)(e,{...t,brandColor:i})},variableOverrideMap:i,options:{...o,modeChanged:d,role:(0,_.Dk)(n)}},a.l7.ai("first-draft-override-paints",()=>{(0,y.oR)(t)}),n.childCount){let e=(0,y.gU)(n.fills,l?void 0:o.parentFillColor);await P({node:n,variableOverrideMap:i,theme:s,colorOptions:{...o,modeChanged:d,parentFillColor:e}})}}async function D(e,t,n){await O({node:e,variableOverrideMap:t,theme:n,colorOptions:{mode:n&&n.darkMode?_.lH.DARK:_.lH.LIGHT,modeChanged:!!n?.darkMode}})}async function L(e){for(let t of(0,C._F)(e,["INSTANCE","FRAME"],{sharedPluginData:{namespace:"jsx",keys:["theme"]}})){(0,f.xF)(t.guid);let e=t.getSharedPluginData("jsx","theme");if(e)try{let n=JSON.parse(e),i=(0,k.Vx)(n);await D(t,{},i)}catch(t){(0,u.x1)("First Draft theming","Failed to parse theme",{themeStr:e,e:t})}}}var F=n(883343);async function B(e,t,n){let r=(0,h.D)({enableNativeJsx:!0});r.skipInvisibleInstanceChildren=!0;let a=(0,o.UN)(),s=null;if((0,l.kc)().first_draft_share_jsx){let r=await (0,i._1)(e,n,{showUnhandled:!!(0,l.kc)().first_draft_debug,headless:!1});if(!(s=r.node))throw Error("Could not find new node");t&&(t.trackComponentLookupSuccess(r.stats?.componentLookupSuccesses??0),t.trackComponentLookupFailure(r.stats?.componentLookupFailures??0))}else{let t=await r.createNodeFromJSXAsync(e);s=a.get(t.id)}return s.localOpacity=0,s}async function U(e,t,n){let i=(0,F.uP)(e,{ignoreOpacity:!0}),r=(0,F.rO)(e,i);a.l7.ai("first-draft-override-paints",()=>{let n=t.darkMode?_.lH.DARK:_.lH.LIGHT;n!==(0,x.P)(e)&&(0,x.t)(e,n);let i=(0,d.tK)(t.brandColor);if(i){let t=(0,y.gU)(e.fills);t&&e.childrenNodes.forEach(e=>{(0,g.l9)(e,i,n,{},"",t)})}}),a.l7.ai("first-draft-remove-fill",()=>{e.fills=[]}),await (0,F.jR)(e,(0,F.k5)({fontFamilies:r.fontFamilies},{fontFamilies:t.fontFamilies}),n)}async function V(e,t,n){let i={};for(let r of e){if(a.l7.ai("first-draft-set-plugin-data",()=>{if(n.frameName&&r.name!==n.frameName&&(r.name=n.frameName),t&&r.setSharedPluginData(m.SV,"jsx",t),n.theme&&r.setSharedPluginData(m.SV,"theme",JSON.stringify(n.theme)),n.sharedPluginData)for(let[e,t]of Object.entries(n.sharedPluginData))r.setSharedPluginData(m.SV,e,t)}),n.addWireframeBorder&&a.l7.ai("first-draft-set-wireframe-border",()=>{(0,f._Y)(r)}),(0,f.jZ)(r,n.dsKitKey,n.clientLifecycleId),n.directGeneration&&(0,l.kc)().first_draft_direct_gen_layout_heuristics?(0,f.WY)(r):n.autoFillParent&&r&&(0,f.tG)(r),await D(r,i,n.theme),n.themeProperties){if(!n.deviceType)throw Error("deviceType must be provided if themeProperties is provided");await U(r,n.themeProperties,n.deviceType)}n.isEval&&await L(r),(0,f.Zu)(r)}return{themeOverrideMap:i}}async function H({jsxStr:e,jsxElement:t,prevExpandedJsx:n,customJsxElementRegistry:d,options:m},g){let x=(0,o.UN)(),_=(0,h.D)({enableNativeJsx:!0});if(_.skipInvisibleInstanceChildren=!0,!m.prevNodeId){let n=await B(t,g,d.getShareJsxComponentInfoByJSXName());if(!n)throw Error("Could not find new node");a.l7.ai("first-draft-insert-jsx",()=>{if(m.parentNodeId){let e=x.get(m.parentNodeId);if(!e)throw(0,u.x1)("first-draft","Could not find parent node with parentNodeId",{parentNodeId:m.parentNodeId}),Error("Could not find parent node with parentNodeId");let t=[n];for(let n of(t.reverse(),t))m.insertAtIndex?m.insertAtIndex===e.childCount?e.appendChild(n):e.insertChild(n,m.insertAtIndex):e.appendChild(n)}}),n.fullyUpdateSymbolInstances();let i=await V([n],e,m);return await (0,f.U_)(n,m),n.removeLocalOpacity(),{insertNodeIds:[n.guid],customizationResult:i}}let y=x.get(m.prevNodeId);if(!y)throw(0,u.x1)("first-draft","Could not find node with prevNodeId",{prevNodeId:m.prevNodeId}),Error("Could not find node with prevNodeId");let b=(0,i.JF)(n),v=null;if((0,l.kc)().first_draft_share_jsx){let e=await (0,c.m)({node:y,jsxElement:t,oldJSXElement:b,options:{...i.RP,transformUnhandledNodes:!!(0,l.kc)().first_draft_debug,componentInfoByJSXName:d.getShareJsxComponentInfoByJSXName()}});v=e.node,g&&(g.trackComponentLookupSuccess(e.stats?.componentLookupSuccesses??0),g.trackComponentLookupFailure(e.stats?.componentLookupFailures??0))}else{let e=await _.reconcileNodeFromJSXAsync({id:y.guid},b,t);v=x.get(e.id)}if(!v)throw Error("Could not find updated node");v.fullyUpdateSymbolInstances();let C=await V([v],e,m);return m.shouldAnimateLoading&&m.doneTextLayerIds&&function(e,t,n){let i=[];for(let e of((0,s.hV)(t,e=>{"TEXT"===e.type&&i.push(e)}),i))n.has(e.guid)||((0,f.us)(e)?(r.zuo.cancelAllAnimationsForNode(e.guid),n.add(e.guid)):r.zuo.isAnimating(e.guid)||e.setOpacityWithAnimation(1,p._E.forOpacityOscillation(45,.25,.8,60),"first-draft-text-layer-opacity"))}(0,v,m.doneTextLayerIds),v.guid!==m.prevNodeId&&await (0,f.U_)(v,m),{insertNodeIds:[v.guid],customizationResult:C}}},809267:(e,t,n)=>{n.d(t,{N_:()=>c,l9:()=>u,tb:()=>d});var i=n(424364),r=n(522645),a=n(687631),s=n(771993),o=n(637739);function l(e){let t=new Set,n=new Set;return e.forEach(e=>{7===e.length?t.add(e):n.add(e)}),[Array.from(t),Array.from(n)]}function d(e,t){let{bg:n,content:d}=t,c=(0,a.HD)(e)?s.lH.DARK:s.lH.LIGHT,u=(0,a.F_)(e),m=(0,r.oB)(e),p=n.filter(e=>e!==u),[h,f]=l(p),g=function(e){let t={};return e.forEach(e=>{t[e]=(t[e]||0)+1}),t}(p),x=h.sort((e,t)=>g[t]-g[e]),_=x.find(e=>{let t=(0,a.tK)(e);if(!t)return!1;let n=(0,r.oB)(t);return(0,o.x)(n.l,c)&&!(0,i.xN)(n.l,m.l,.12)});if(_)return _;let[y,b]=l(d),v=y.find(e=>{let t=(0,a.tK)(e);return t&&(0,s.Yx)((0,r.oB)(t).l,s.lg.CONTENT)});if(v)return v;if((0,o.x)(m.l,c)&&!(0,o.c4)(m.l))return u;let C=f.sort((e,t)=>g[t]-g[e]).find(e=>{let t=(0,a.tK)(e);if(!t)return!1;let n=(0,r.oB)(t);return(0,o.x)(n.l,c)});return C?C:b.find(e=>{let t=(0,a.tK)(e);return t&&(0,s.Yx)((0,r.oB)(t).l,s.lg.CONTENT)})||(x.length?x[0]:y.length?y[0]:u)}function c(e){let t={};if(!e)return t;let n=[e];for(;n.length>0;){let e=n.pop();if(e){if(e.fills.length>0){let n=(0,o.gU)(e.fills);if(n){let i=(0,r.oB)(n);t[e.guid]={s:i.s,l:i.l}}}else if(e.strokePaints.data.length>0){let n=(0,o.gU)(e.strokePaints.data);if(n){let i=(0,r.oB)(n);t[e.guid]={s:i.s,l:i.l}}}"childrenNodes"in e&&n.push(...e.childrenNodes)}}return t}function u(e,t,n,i,r,a){e&&function e(t,n,i,r){if(t.name.toLowerCase().includes("swatch"))return;let a=i[t.guid];if((0,o.oR)({node:t,getNewColor:n,options:{...r,modeChanged:!1,role:(0,s.Dk)(t),originalSL:a}}),t.childCount){let a=t.fills.some(e=>"IMAGE"===e.type),s=(0,o.gU)(t.fills,a?void 0:r.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,i,{...r,parentFillColor:s})})}}(e,(e,n)=>(0,o.Jv)(e,{...n,brandColor:t}),i,{mode:n,currentBrandHex:r,parentFillColor:a})}},276159:(e,t,n)=>{n.d(t,{P:()=>s,t:()=>o});var i=n(687631),r=n(771993),a=n(637739);function s(e){let t=(0,a.X6)(e);if(t)return(0,i.HD)(t)?r.lH.DARK:r.lH.LIGHT}function o(e,t,n){e&&function e(t,n,i){let s=t.fills.some(e=>"IMAGE"===e.type),o=!s&&i.modeChanged;if((0,a.oR)({node:t,getNewColor:n,options:{...i,modeChanged:o,role:(0,r.Dk)(t)}}),t.childrenNodes){let r=(0,a.gU)(t.fills,s?void 0:i.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,{...i,modeChanged:o,parentFillColor:r})})}}(e,(e,t)=>(0,a.Jv)(e,{...t,brandColor:void 0}),{mode:t,modeChanged:!0,currentBrandHex:n})}},848990:(e,t,n)=>{n.d(t,{t_:()=>p,Vx:()=>m});var i=n(295870),r=n(687631),a=n(129416),s=n(895019),o=n(539491),l=n(771993),d=n(637739);let c={[s.GS.DEFAULT]:[{"font/title/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Plus Jakarta Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/title/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/title/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/body/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}],[s.GS.SERIF]:[{"font/title/bold":{fontName:{family:"Domine",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Domine",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Roboto Serif",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Roboto Serif",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}]};function u(e){return e[Math.floor(Math.random()*e.length)]}function m(e){let t={numberVariableMap:{},colorVariableMap:{}},n="true"===e[s.u7.DARK_MODE];for(let[i,a]of Object.entries(e||{}))switch(i.split("/")[0]){case s.u7.COLOR:let e=(0,r.tK)(a);if(!e)continue;t.colorVariableMap[i]=(0,d.qO)(e,n?l.lH.DARK:l.lH.LIGHT);break;case s.u7.CORNER_RADIUS:case s.u7.SPACING:let m=parseFloat(a);!isNaN(m)&&m>=o.Xy&&m<=o.Ne&&(t.numberVariableMap[i]=m);break;case s.u7.FONT:switch(a){case s.GS.SERIF:case s.GS.DEFAULT:t.fontVariableMap=u(c[a]);break;default:t.fontVariableMap=u(c[s.GS.DEFAULT])}}return{darkMode:n,variableMaps:t}}function p(e,t){try{return m(e)}catch(n){return n instanceof Error&&(0,a.$D)(i.e.AI_GENERATION,Error(`[First Draft theme] Error parsing theme from output: ${n.message}`),{extra:{...t,theme:JSON.stringify(e),error:n}}),{}}}},782015:(e,t,n)=>{n.d(t,{fv:()=>h,pK:()=>x});var i=n(298670),r=n(510261),a=n(295870),s=n(692376),o=n(466082),l=n(102462),d=n(129416),c=n(337812),u=n(854122),m=n(450255),p=n(295432);function h(e){let t=new Set([]),n=[...e];for(;n.length;){let e=n.pop();if(e){for(let a of(e.type.startsWith(i.COMPONENT_PREFIX)&&t.add(e.type),e.children))(0,r.id)(a)&&n.push(a);for(let t of Object.values(e.props))if("string"!=typeof t){if((0,r.id)(t))n.push(t);else if(Array.isArray(t))for(let e of t)(0,r.id)(e)&&n.push(e)}}}return t}async function f(e,t,n){if(t?.type==="LOCAL")throw Error("Can only insert library components");if(!n)return(0,d.$D)(a.e.AI_GENERATION,Error("[First Draft] Attempted to insert component without kitContents")),{status:"error"};let r=function(e,t){let n=t.toLowerCase();if(e.components[n]){let t=e.components[n];return{assetType:"component",key:t.key,version:t.version}}if(e.state_groups[n]){let t=e.state_groups[n];return{assetType:"state_group",key:t.key,version:t.version}}return null}(n,e);if(!r)return{status:"error"};let{assetType:u,key:m,version:p}=r;if("component"===u){let t=s.XJn.getComponentByKeyAndVersion(m,p);if(t)return{status:"success",key:m,version:p,jsxName:(0,i.getComponentJSXName)(e),guid:t}}if("state_group"===u){let t=s.XJn.getStateGroupByKeyAndVersion(m,p);if(t)return{status:"success",key:m,version:p,jsxName:(0,i.getComponentJSXName)(e),guid:t}}try{let e=l.D?.getState().fileVersion||0,t=await (0,c.GD)(`/api/file_proxy/${u}/${m}/version/${p}/canvas`,{fv:e.toString()},{responseType:"arraybuffer"}),n=new Uint8Array(t.response),r=s.NfO.deserializeProductComponentFromBuffer(m,n),a=(0,o.UN)().get(r);if(!a)throw Error("Deserialized component not found in scene graph");return{status:"success",key:m,version:p,jsxName:(0,i.getComponentJSXName)(a.name),guid:r}}catch(e){if(e instanceof c.Dr&&e.status>=400)return{status:"error"};throw e}}let g=(0,m.nh)(async function(e,t){let n=(0,u.U2)(l.D?.getState().selectedView),i=await c.Ay.post(`/api/first_draft/kit_contents/${e.key}`,{jsx_names:t,file_key:n});return i?.data?.meta??null});async function x({dsKitKey:e,jsxJSON:t,componentNameToInsertResult:n}){if("LOCAL"===e.type)return;let i=h(t),r=new Set;for(let e of i)e in n||r.add(e);if(0===r.size)return;let a=await g(e,Array.from(r)),s=a?.components??{},o=(0,p.Q$)(s),l=a?.state_groups??{},d={components:o,state_groups:(0,p.Q$)(l)};await Promise.all(Array.from(r).map(async t=>{let i=await f(t,e,d);return"success"===i.status&&(n[i.jsxName]=i),i}))}},874134:(e,t,n)=>{n.d(t,{C2:()=>v,Vh:()=>E});var i=n(239976),r=n(105652),a=n(814852),s=n(134670),o=n(295870),l=n(692376),d=n(466082),c=n(270450),u=n(270351),m=n(228703),p=n(7995),h=n(129416),f=n(19047),g=n(804396),x=n(708723),_=n(782015),y=n(295432),b=n(545242);function v(e){return new a.yT({dsKitKey:e.dsKitKey,publishedComponentToInsertResult:e.componentNameToInsertResult??{},componentInfoByName:e.componentNameToInfo??{},options:{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays,shareJSX:!!(0,c.kc)().first_draft_share_jsx,useAllComponents:!!(0,c.kc)().first_draft_publish_all_components,onError:(e,t)=>{(0,h.$D)(o.e.AI_GENERATION,e,t)}}})}async function C(e,t,n={}){let i;let r=(0,a.eb)(e.jsxStr),s=r&&""!==r?r:e.jsxStr;if((n.prevJsxStr??"")===s)return{};if(!n.prevNodeId&&n.prevJsxJSON&&n.prevJsxJSON.length>0)throw Error("prevJsxJSON should be null");let l=await (0,a.Kf)(s);if(!l)return{};await n.onBeforeInsertJSX?.(l);let d={prevNodeId:n.prevNodeId,isIncomplete:!function(e){let t=e.match(/<([^\/\s>]+)[^>]*>/),n=e.match(/<\/([^>]+)>/g)?.pop();return!!t&&!!n&&t[1]===n.replace("</","").replace(">","")}(s),autoFillParent:!0,insertBehavior:"viewport-ease",shouldGenerateImages:!0,...e.options},u=v(d);t.resetComponentStats();let m=await (0,a.BW)(l,u,t,{directGen:!!d.directGeneration,showUnhandled:!!(0,c.kc)().first_draft_debug,useShareJSX:!!(0,c.kc)().first_draft_share_jsx});if(0===m.length)return{};try{i=(0,a.JF)(m)}catch(t){let e={elements:m.length};return(0,h.$D)(o.e.AI_GENERATION,t,e),{}}let{insertNodeIds:p,customizationResult:f}=await (0,g.f)({jsxStr:s,jsxElement:i,prevExpandedJsx:n.prevExpandedJsx??[],customJsxElementRegistry:u,options:d},t);return{insertNodeIds:p,customizationResult:f,jsxStr:s,jsxJSON:l,expandedJsx:m}}function E({onAfterInsertPartialJsx:e,onReset:t,onImageProgress:n,shouldContinueStream:g,clientLifecycleId:v,insertType:E}){let w=(0,r.useRef)({}),k=(0,r.useRef)(null),T=(0,r.useRef)({}),j=(0,r.useRef)({}),S=(0,r.useRef)({}),I=(0,r.useRef)(new a.sw(E||"generate",m.rI)),A=(0,r.useRef)(null);(0,r.useEffect)(()=>{A.current=p.J.startUserFlow({name:"first_draft_generate",team:o.e.AI_GENERATION})},[]);let N=(0,r.useCallback)(async t=>{try{let n=A.current?.startDuration("first_draft_insert_jsx");w.current.isRunning=!0,w.current.donePromise=(async()=>{try{let e={jsxStrLength:t.jsxStr?.length,options:{parentNodeId:t.options.parentNodeId,isIncomplete:t.options.isIncomplete,prevNodeId:t.options.prevNodeId},clientLifecycleId:v},r={...e,jsxStr:t.jsxStr};(0,f.ED)("first-draft","Inserting Streamed JSX Updates",e,{createSentryBreadcrumb:!0,logToConsole:h.NU.NEVER}),(0,f.ED)("first-draft","Inserting Streamed JSX Updates",r,{createSentryBreadcrumb:!1}),w.current.doneTextLayerIds=w.current.doneTextLayerIds||new Set,w.current.componentNameToInfo={...w.current.componentNameToInfo,...t.options.componentNameToInfo},w.current.componentNameToInsertResult=w.current.componentNameToInsertResult||{};let{insertNodeIds:a,customizationResult:s,jsxJSON:o,jsxStr:l,expandedJsx:d}=await C({...t,options:{...t.options,componentNameToInsertResult:w.current.componentNameToInsertResult,componentNameToInfo:w.current.componentNameToInfo,shouldAnimateLoading:(0,c.kc)().first_draft_animations,doneTextLayerIds:w.current.doneTextLayerIds,clientLifecycleId:v}},I.current,{prevNodeId:k.current,prevJsxStr:w.current.jsxStr,prevJsxJSON:w.current.jsxJSON,prevExpandedJsx:w.current.expandedJsx,onBeforeInsertJSX:async e=>{await (0,_.pK)({jsxJSON:e,dsKitKey:t.options.dsKitKey,componentNameToInsertResult:w.current.componentNameToInsertResult??{}})}});if(n?.addContext({hasJson:void 0!==o,insertNodeIdsLength:a?.length}),n?.stop(),!a){if(void 0===o)return;throw Error("Failed to insert any nodes")}if(a.length>1)throw Error("Expected at most one node to be inserted");(0,x.OJ)(a[0]),k.current!==a[0]&&(k.current&&(0,b.ks)(k.current),(0,b.Vm)(a[0],(0,i.jsx)(i.Fragment,{}),{overflowHidden:!0})),k.current=a[0],T.current={...T.current,...s?.themeOverrideMap??{}},w.current.jsxStr=l,w.current.jsxJSON=o,w.current.expandedJsx=d,w.current.queuedEffects=w.current.queuedEffects||{}}catch(e){(0,h.$D)(o.e.AI_GENERATION,e instanceof Error?e:Error(e)),k.current&&!(0,d.UN)().get(k.current)&&(k.current=null,w.current.jsxStr=void 0,w.current.jsxJSON=void 0,w.current.expandedJsx=void 0)}try{if(k.current){if(t.options?.shouldGenerateImages){if(t.options.imageArgs)(0,x.Ms)({containingNodeId:k.current,queuedEffects:w.current.queuedEffects,shouldContinueStream:g,imagesTrace:S.current,jsxJSON:w.current.jsxJSON,initialUserPrompt:t.options.imageArgs?.initialUserPrompt||"",clientLifecycleId:v,instrumentationRef:I});else throw Error("Tried to generate images without image args")}(0,x.D9)(k.current,w.current.queuedEffects,t.options),(0,c.kc)().first_draft_direct_gen||(0,x.fE)({containingNodeId:k.current}),e?.(k.current)}}catch(e){(0,h.$D)(o.e.AI_GENERATION,e instanceof Error?e:Error(e))}})(),await w.current.donePromise,w.current.insertAgainWhenDone&&((0,f.ED)("first-draft","Re-Inserting JSX Updates (Immediate)",{jsxStrLength:w.current.lastArgs?.jsxStr?.length,options:{parentNodeId:w.current.lastArgs?.options.parentNodeId,isIncomplete:w.current.lastArgs?.options.isIncomplete,prevNodeId:w.current.lastArgs?.options.prevNodeId}}),w.current.insertAgainWhenDone=!1,await N(w.current.lastArgs))}finally{w.current.isRunning=!1}},[e,g,v]),M=(0,u.A)(N,500,{leading:!0,maxWait:1e3}),R=(0,r.useCallback)(async()=>{await A.current?.measureDurationAsync("flushPending",async()=>{for(M.isPending()&&await M.flush();w.current.isRunning;)w.current.donePromise&&await w.current.donePromise,await y.Mb(10);let e=w.current.queuedEffects??{};(await Promise.allSettled(Array.from(Object.values(e)))).forEach(e=>{"rejected"!==e.status||e.reason instanceof s.G1&&500>s.Iu(e.reason)||h.$D(o.e.AI_GENERATION,e.reason)})})},[M]),P=(0,r.useCallback)(async()=>{try{await R()}finally{if(t?.(),k.current&&((0,b.ks)(k.current),(0,x.RY)(k.current)),w.current.lastArgs){let e=Object.keys(T.current).length>0;await (0,x.oT)(w.current.lastArgs.options?.dsKitKey,k.current,l.oVz.CURRENT,{detachVariables:e})}k.current=null,w.current={},j.current={},S.current={}}},[R,t]),O=(0,r.useCallback)(e=>(w.current.lastArgs=e,w.current.isRunning)?(w.current.insertAgainWhenDone=!0,Promise.resolve()):M?.(e)||Promise.resolve(),[M]);return(0,r.useEffect)(()=>{let e=I.current;if(!n)return;let t=()=>n(e.instrumentationData.imageSuccesses,e.instrumentationData.numImages);return e.imageProgressEmitter.on("statusChanged",t),()=>{e.imageProgressEmitter.removeListener("statusChanged",t)}},[I,n]),{insertJSX:O,resetAsync:P,flushPending:R,nodeIdRef:k,imagesTraceRef:S,themeOverrideMapRef:T,userFlowRef:A,instrumentationRef:I}}},718923:(e,t,n)=>{n.d(t,{Dp:()=>k,WX:()=>T,TM:()=>j});var i=n(105652),r=n(814852),a=n(449979),s=n(295870),o=n(692376),l=n(798913),d=n(466082),c=n(129416),u=n(19047),m=n(3503),p=n(848990),h=n(13496),f=n(772293),g=n(862390),x=n(223487),_=n(394326),y=n(969382),b=n(363198),v=n(874134),C=n(295432);async function E(e={}){let{sleepTime:t=100}=e;await new Promise(e=>setTimeout(e,t))}async function*w(e,t={}){let{chunksPerYield:n=20,useWords:i=!0}=t;if(i){let i=e.split(" "),r=[];for(let e=0;e<i.length;e+=n)r.push(...i.slice(e,e+n)),await E(t),yield r.join(" ")}else{let i=e.split(""),r=[];for(let e=0;e<i.length;e+=n)r.push(...i.slice(e,e+n)),await E(t),yield r.join("")}}function k(){return{loadingComponentType:"ComponentLoading",shouldGenerateImages:!0}}function T(e){return e?.metadata.direct_generation||e?.dsKitKey?.type==="USER_LIBRARY"||e?.dsKitKey?.type==="LOCAL"}function j({mockStreamOptions:e,onInsertJSXDone:t,onAfterInsertPartialJsx:n,shouldContinueStream:j,clientLifecycleId:I,insertType:A}){let N=(0,x.tS)(),M=(0,b.cJ)(),R=(0,i.useRef)(null),P=(0,i.useRef)(void 0),O=(0,i.useRef)(void 0),D=(0,i.useRef)(null),L=(0,i.useRef)(null),[F,B]=(0,i.useState)({loaded:0,total:0}),{insertJSX:U,resetAsync:V,flushPending:H,nodeIdRef:z,imagesTraceRef:G,instrumentationRef:K,userFlowRef:W,themeOverrideMapRef:q}=(0,v.Vh)({onAfterInsertPartialJsx:e=>{if(M&&e){let t=(0,d.UN)().get(e);t?.isResponsiveSetBreakpoint&&(t?.parentNode?.childrenNodes??[]).length>1&&(l.l7.ai("first-draft-sites-page-remove",()=>{t.parentNode?.childrenNodes.filter(e=>e.guid!==t.guid).forEach(e=>e.removeSelfAndChildren())}),setTimeout(()=>{o.glU.triggerAction("goto-layer",{args:{nodeId:e}})},200))}n?.(e)},onReset:()=>{P.current=void 0,B({loaded:0,total:0})},onImageProgress:(e,t)=>{B({loaded:e,total:t})},shouldContinueStream:j,clientLifecycleId:I,insertType:A}),{isRunning:X,runPrompt:Y,runPromptMocked:J}=function({onPromptOutput:e,onBeforeRunPrompt:t,onRunPromptSuccess:n,onRunPromptError:r,shouldContinueStream:a,mockStreamOptions:s,clientLifecycleId:o}){let[l,d]=(0,i.useState)(!1),c=(0,i.useRef)({}),u=(0,i.useCallback)(async(i,s)=>{if(!l)try{c.current={},d(!0),t?.(s),await i(t=>{e?.(t,s),c.current=t},a),await n?.(c.current,s)}catch(e){throw await r?.(e,c.current,s),e}finally{d(!1)}},[l,t,e,r,n,a]);return{isRunning:l,runPrompt:(0,i.useCallback)(async(e,t)=>await u(async(t,n)=>{await (0,C._J)(e,t,n,o)},t),[o,u]),runPromptMocked:(0,i.useCallback)(async(e,t)=>await u(async t=>{if(await E(s),!e.dsKit)throw Error("dsKit is required in mockedResponse");let n=e.dsKit,i=e.theme??{},r=e.jsx??"";for await(let e of(t({theme:i}),await E(s),w(r,s)))t({dsKit:n,theme:i,jsx:e});t({dsKit:n,theme:i,jsx:r})},t),[u,s])}}({mockStreamOptions:e,shouldContinueStream:j,clientLifecycleId:I,onBeforeRunPrompt:e=>{if(e.analyticsOptions){let{dsKitType:t,isLocal:n,kitKey:i}=S(null,e.insertJSXOptions);K.current.start(),W.current?.addContext({file_key:N,generateId:I,clientLifecycleId:I,dsKitType:t,isLocal:n,kitKey:i,kitIdentifier:L.current?.metadata.identifier??null}),W.current?.trackEvent("First Draft: Layout Generation Started",{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})}},onRunPromptSuccess:async(e,n)=>{if(K.current.trackLastStreamByteReceived(),await H(),e.trace){let t={...R.current,...e.trace,children:[...R.current?.children??[],...e.trace.children,...Object.values(G.current)]};R.current=t}if(j()){let n=(0,r.eb)(e.jsx??"");if(!e.dsKit&&!z.current)throw Error("No dsKit in prompt output");if(n&&!z.current)throw Error("JSX was present in the prompt output but no node was inserted");try{await t?.(z.current,q.current,D.current,O.current??[])}catch(e){(0,c.$D)(s.e.AI_GENERATION,e,{extra:{nodeId:z.current,themeOverrideMap:q.current,dsKitKey:D.current,presets:O.current}})}}if(n.analyticsOptions){let{dsKitType:t,isLocal:i,kitKey:r}=S(e,n.insertJSXOptions);W.current?.addContext({promptOutput:JSON.stringify({dsKit:e.dsKit,theme:e.theme,presets:e.presets}),timeElapsedMs:Date.now()-n.analyticsOptions.startTime,dsKitType:t,isLocal:i,kitKey:r,file_key:N,generateId:I,clientLifecycleId:I,kitIdentifier:L.current?.metadata.identifier??null}),j()?z.current?(K.current.trackFinished("success"),W.current?.addContext({nodeId:z.current,status:"completed",instrumentationData:JSON.stringify(K.current.instrumentationData)})):(K.current.trackFinished("failure"),W.current?.addContext({status:"failed",reason:"empty generation",instrumentationData:JSON.stringify(K.current.instrumentationData)})):(K.current.trackFinished("stopped"),W.current?.addContext({nodeId:z.current,status:"failed",reason:"stopped",instrumentationData:JSON.stringify(K.current.instrumentationData)})),W.current?.end(),W.current?.trackEvent("First Draft: Layout Generation Ended",{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})}},onRunPromptError:(e,t,n)=>{K.current.trackFinished("failure"),t.trace&&(R.current={...R.current,...t.trace});let{dsKitType:i,isLocal:r,kitKey:a}=S(t,n.insertJSXOptions),o={promptOutput:JSON.stringify({dsKit:t.dsKit??{},jsx:t.jsx??"",theme:t.theme??{}}),error:e.toString(),timeElapsedMs:Date.now()-(n.analyticsOptions?.startTime??0),dsKitType:i,isLocal:r,kitKey:a,file_key:N,clientLifecycleId:I,kitIdentifier:L.current?.metadata.identifier??null},l=(0,c.$D)(s.e.AI_GENERATION,e,{extra:o});W.current?.addContext({...o,status:"failed",reason:"error",nodeId:z.current,sentryEventId:l}),W.current?.trackEvent("First Draft: Layout Generation Ended",{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},onPromptOutput:(e,t)=>{if(K.current.trackFirstByteReceived(),e.dsKit){if(e.dsKit.isLocal){let e=t.insertJSXOptions.dsKitKey;D.current={type:"LOCAL",pageId:e.pageId}}else e.dsKit.isDirectGenLibrary?D.current={type:"USER_LIBRARY",key:e.dsKit.kitKey}:D.current={type:"1P_LIBRARY",key:e.dsKit.kitKey};if(!P.current&&e.theme&&(P.current=(0,p.t_)(e.theme,{generateId:I})),!O.current&&e.presets&&(O.current=e.presets),e.jsx)return U({jsxStr:e.jsx,options:{...t.insertJSXOptions,theme:P.current,dsKitKey:D.current}})}}}),Z=(0,h.B)(),Q=(0,i.useCallback)(async e=>{"LOCAL"===e.dsKitKey.type&&N&&await (0,m.p4)(N,e,Z)},[N,Z]),$=(0,i.useCallback)(async(e,t,n)=>{let i;let r=e.prompt;if(X)return{nodeId:null,success:!0};await V();let{designSystem:m}=t;L.current=m;try{m&&await Q(m)}catch(e){return(0,c.$D)(s.e.AI_GENERATION,e),{nodeId:null,success:!1,error:e}}let p=function(e,t){if(!t)return{userPrompt:e};if("LOCAL"!==t.dsKitKey.type)return{userPrompt:e,kitKey:t.dsKitKey.key,isLocal:!1,isDirectGenerationCompatible:t.metadata?.direct_generation};let n=o.XJn.getKitKey(t.dsKitKey.pageId);if(!n)throw Error("Failed to get a kitKey for local kit");return{userPrompt:e,kitKey:n,isLocal:!0,isDirectGenerationCompatible:t.metadata?.direct_generation}}(r,m),h=null;if(t.selectedNodeIds&&t.selectedNodeThumbnailsCache&&t.selectedNodeIds.length>0){let n=t.selectedNodeIds.map(e=>(0,d.UN)().get(e)).filter(a.Vq);n.length!==t.selectedNodeIds.length&&(0,u.xi)("first-draft","Some selected nodes were not found",{selectedNodeIds:t.selectedNodeIds,selectedNodes:n}),h=(0,y.ce)(n),p.extraMessagesFigmateOnly=await (0,y.yh)(n,t.selectedNodeThumbnailsCache,e.attachmentMetadata)}let x={};if(M){let e=(0,d.UN)().getCurrentPage();if(e){let t=1===e.childCount&&e.childrenNodes[0].isResponsiveSet&&1===e.childrenNodes[0].childCount&&e.childrenNodes[0].childrenNodes[0].isResponsiveSetBreakpoint&&0===e.childrenNodes[0].childrenNodes[0].childCount,n=null;t?(g.wr(),(0,_.S)("panel"),g.Dh([e.childrenGuids[0]])):l.l7.ai("first-draft-sites-page-create",()=>{o.glU?.createWebpage(null)}),n=(0,d.UN)().get(o.glU.getFirstSelectedNodeIdForCurrentPage()),x.parentNodeId=n?.guid,x.createNewSitesWebpage=!0,x.frameName="Primary"}}try{K.current.start(),await Y(p,{insertJSXOptions:{frameName:r,imageArgs:{initialUserPrompt:r},...k(),...n,...h?{componentNameToInfo:{...h,...n.componentNameToInfo}}:{},...x,sharedPluginData:{userPrompt:r,...n.sharedPluginData},dsKitKey:m?.dsKitKey,directGeneration:T(m)},analyticsOptions:{startTime:K.current.startTime,clientLifecycleId:I}})}catch(e){i=e}let b=z.current;if(await V(),b&&!(0,d.UN)().get(b))throw Error("Failed to insert node");return f.Y5.commit(),{nodeId:b,success:!i,error:i}},[X,V,Y,z,I,Q,M,K]);return{submitPromptMocked:(0,i.useCallback)(async(e,t)=>{if(X)return{nodeId:null,success:!0};await V(),await J(e,{insertJSXOptions:{...k(),...t,imageArgs:{initialUserPrompt:"website"}},analyticsOptions:null});let n=z.current;return await V(),{nodeId:n,success:!0}},[X,V,J,z]),submitPrompt:$,isRunning:X,executionTrace:R.current,imageProgress:F}}function S(e,t){let n=t.dsKitKey,i=n?.type??"AUTO",r=n?.type==="LOCAL"||e?.dsKit?.isLocal,a=n?"key"in n?n.key:n.pageId:e?.dsKit?.kitKey??null;return{dsKitOption:n,dsKitType:i,isLocal:r,kitKey:a}}},263325:(e,t,n)=>{n.d(t,{iK:()=>y,wP:()=>b});var i=n(105652),r=n(960058),a=n(798913),s=n(466082),o=n(522755),l=n.n(o),d=n(750665),c=n(192438),u=n(940349),m=n(30662),p=n(295432),h=n(793567),f=n(772293);function g(e){return!!("SYMBOL"===e.type||e.isStateGroup||(0,m.Gs)(e))}async function x({components:e,clientLifecycleId:t}){let n=await Promise.all(e.map(async e=>{let t=await (0,p.gC)(e);return{imageB64:t.base64,jsx:t.jsx,isStateGroup:e.isStateGroup}}));return(await d.Ay.design.firstDraftSuggestProps({requests:n},(0,h.sF)({clientLifecycleId:t}))).responses.map((t,n)=>{let i=e[n];return t&&i?{component:i,componentName:t.componentName,componentDescription:t.componentDescription,nodeIdsToPropertyNames:t.nodeIdsToPropertyNames.reduce((e,t)=>(e[t.id]=t.propertyName,e),{})}:null})}function _(e){let t=e.component;if(g(t)){if(t.name=e.componentName,(0,m.Gs)(t)){let n={componentPropertyDefinitions:[],componentPropertyReferences:{}};for(let[t,i]of Object.entries(e.nodeIdsToPropertyNames)){let e=(0,s.UN)().guidFromDeveloperFriendlyId(t),r=(0,s.UN)().get(e);r&&"TEXT"===r.type&&(n.componentPropertyDefinitions.push({name:i,type:"TEXT"}),n.componentPropertyReferences[t]={characters:i})}(0,m.p0)(t,n),(0,m.aj)(t,e.componentDescription)}else for(let n of(t.description||(t.description=e.componentDescription),Object.keys(e.nodeIdsToPropertyNames))){let i=(0,s.UN)().get(n);if(!i||"TEXT"!==i.type||i.isInstanceSublayer)continue;let r=t.componentPropertyDefinitions(),a=i.componentPropertyReferences();if(a?.characters)continue;let o=e.nodeIdsToPropertyNames[n],l=function(e,t){for(let n in e)if("VARIANT"!==e[n].type){let e=n.split("#");if(e.slice(0,e.length-1).join("#")===t)return n}else if(n===t)return n;return null}(r,o);l&&r[l]?.type==="TEXT"||(l=t.addComponentPropertyDefinition({name:o,type:"TEXT",defaultValue:i.characters})),i.setComponentPropertyReferences({...i.componentPropertyReferences(),characters:l})}}}function y(){let[e,t]=i.useState({loaded:0,total:0}),n=i.useContext(u.x),o=n?.getSuggestedProps;return{submit:i.useCallback(async(e,n,i)=>{let d=s.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===c.vh),u=s.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&"Atoms"===e.name);if(0===(i=i??[...d?.childrenNodes??[],...u?.childrenNodes??[]]).length)return;let m=i.filter(g);for(let i of(t({loaded:1,total:m.length}),l()(m,30))){let s=await (0,r.Z)(o?o(i):x({components:i,clientLifecycleId:e}),n);if(n.aborted)return;a.l7.user("apply-suggested-props",()=>{for(let e of s)e&&_(e)}),t(e=>({loaded:Math.min(e.loaded+i.length,e.total),total:e.total}))}f.Y5.commit()},[o]),progress:e}}function b(){return{submit:i.useCallback(x,[]),apply:i.useCallback(e=>{_(e),f.Y5.commit()},[])}}},940349:(e,t,n)=>{n.d(t,{x:()=>i});let i=n(105652).createContext(void 0)},295432:(e,t,n)=>{n.d(t,{Mb:()=>c,Q$:()=>m,SV:()=>d,_J:()=>u,gC:()=>p});var i=n(449109),r=n(750665),a=n(70887),s=n(793567),o=n(166896),l=n(450255);let d="plugin_playground";async function c(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}let u=(0,l.nh)(async function(e,t,n=()=>!0,i){let a=(await r.Ay.design.firstDraftGenerateV2Stream(e,(0,s.sF)({clientLifecycleId:i}))).getReader(),o={};try{for(;;){let e=a.read(),{done:i,value:r}=await e;if(i||(r.theme&&(o.theme=r.theme??{}),r.dsKit&&(o.dsKit=r.dsKit),r.jsx&&(o.jsx+=r.jsx),r.trace&&(o.trace=r.trace),r.presets&&(o.presets=r.presets),!n()))break;t(o)}}finally{a.releaseLock()}});function m(e){return Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}async function p(e){let t=await e.loadImagesAndExport([{imageType:"PNG",constraint:{type:"CONTENT_WIDTH",value:Math.min(e.size.x,function(e,t=1024){return e.size.y>e.size.x?Math.floor(t*e.size.x/e.size.y):t}(e))},contentsOnly:!0,useAbsoluteBounds:!1,colorProfile:"DOCUMENT"}]),n=`data:image/png;base64,${(0,i.lF)(t)}`,r=(0,a.YJ)({nodeIds:[e.guid],options:{skipNodeIds:!1,includeName:!0,detachInstances:!0,componentUsageOrDefinition:"DEFINITION",autoLayoutTagName:"div",frameTagName:"div"}});if(!r.jsxStr)throw Error(`Could not get node JSX for node ID: ${e.guid}`);return{base64:n,jsx:r.jsxStr}}(0,l.nh)(async function(e){return(await o.Gh.postFirstDraftMatchPresetModes({kit_key:e.kitKey,is_local:e.isLocal,user_prompt:e.userPrompt})).data.meta})},964929:(e,t,n)=>{n.d(t,{NE:()=>o});var i=n(692376),r=n(445019),a=n(763561);let s=(0,n(290882).vv)(()=>i.Ez5?.prototypingEditorState()?.activePrototypeDevice,null),o=(0,r.mg)(s,e=>!!e&&(0,a.ln)(e.presetIdentifier))},653656:(e,t,n)=>{n.d(t,{x:()=>r});var i=n(105652);function r(e,t="0px"){let n="IntersectionObserver"in window,[a,s]=(0,i.useState)(!n);return(0,i.useEffect)(()=>{if(!n||!e.current)return;let i=e.current,r=new IntersectionObserver(([e])=>{s(e.isIntersecting)},{rootMargin:t});return r.observe(i),()=>{r.unobserve(i)}},[e,t,n]),a}},404195:(e,t,n)=>{n.d(t,{Bc:()=>c,Hm:()=>m,V6:()=>u,pe:()=>f,rF:()=>h});var i=n(239976),r=n(328414),a=n(236078),s=n(702417),o=n(581121),l=n(445952);let d=(e,t,n)=>({flags:["design","dev_handoff"],callback:(i,r,a)=>{(0,l.C)({type:e,newFileFrom:n,dispatch:a,entryPoint:t})}}),c={action:o.i0,tags:[a.$.AI],iconType:(0,i.jsx)(r.s,{}),searchSynonyms:["send to make","export to make","create make file","figma make","figmake"],...d("send-to-make-from-design","AI Quick Actions V2",s.f6.SEND_TO_MAKE_FROM_DESIGN_QA_V2_MENU)},u={name:"send-to-make-from-design",...d("send-to-make-from-design","SelectionContextMenu",s.f6.SEND_TO_MAKE_FROM_DESIGN_CONTEXT_MENU)},m={name:"send-to-make-from-design",...d("send-to-make-from-devmode","SelectionContextMenu",s.f6.SEND_TO_MAKE_FROM_DEVMODE_CONTEXT_MENU)},p=(e,t)=>({flags:["edit","whiteboard"],callback:(n,i,r)=>{(0,l.C)({type:"send-to-make-from-figjam",newFileFrom:t,dispatch:r,entryPoint:e})}}),h={action:o.Ax,tags:[a.$.AI],iconType:(0,i.jsx)(r.s,{}),searchSynonyms:["send to make","export to make","create make file","figma make","figmake","create a prototype with figma make"],...p("AI Quick Actions V2",s.f6.SEND_TO_MAKE_FROM_FIGJAM_QA_V2_MENU)},f={name:"send-to-make-from-figjam",...p("SelectionContextMenu",s.f6.SEND_TO_MAKE_FROM_FIGJAM_CONTEXT_MENU)}},262891:(e,t,n)=>{n.d(t,{U:()=>c,c:()=>u});var i=n(105652),r=n(562418),a=n(677451),s=n(909194),o=n(920675),l=n(790016),d=n(938241);function c({queryType:e,pageSize:t,revalidateOnMount:n,enabled:i,...c}){let u=(0,l.S2)(),m=u.data?.key.parentId,p=(0,s.j)()&&!!m,h=u.data?.tier===o.Ag.ENTERPRISE,f=p&&"org"===e&&u.data?.type===o.OL.ORG,g=p&&"team"===e,x=(0,r.lg)(),{teamTemplates:_,isLoading:y,requestLoadMoreForOrg:b}=(0,a.e2)({orgId:m??"",areWorkspacesEnabled:h,editorType:x,pageSize:t,revalidateOnMount:n,filterByIds:"filterByIds"in c?c.filterByIds:null,includeMyTeamsOnly:"includeMyTeamsOnly"in c&&c.includeMyTeamsOnly,numTemplatesPerTeam:"numTemplatesPerTeam"in c?c.numTemplatesPerTeam:10,enabled:i&&f}),{templatesByTeam:v,isLoading:C,requestLoadMoreForTeam:E}=(0,a.li)({teamId:"teamId"in c?c.teamId:m??"",editorType:x,pageSize:t,enabled:i&&g});return f?{templatesByTeam:_??[],isLoading:y,requestLoadMoreTemplates:b}:g&&"teamId"in c?{templatesByTeam:[{templates:v?.templates.map(e=>({type:d.n.TeamTemplateLg,template:e}))??[],teamId:c.teamId,teamName:v?.teamName??"",workspaceName:null,workspaceId:null,totalTemplatesByTeam:v?.totalTemplatesByTeam??0}],isLoading:C,requestLoadMoreTemplates:E}:{templatesByTeam:void 0,isLoading:!1,requestLoadMoreTemplates:()=>{}}}function u({templateSize:e,teamSize:t}){let n=(0,l.S2)(),r=n.data?.key.parentId,a=n.data?.type===o.OL.ORG,s=n.data?.type===o.OL.TEAM,[d,u]=(0,i.useState)([]),[m,p]=(0,i.useState)(null),[h,f]=(0,i.useState)([]),[g,x]=(0,i.useState)({}),{templatesByTeam:_,isLoading:y,requestLoadMoreTemplates:b}=c({queryType:"team",teamId:r??"",pageSize:e,enabled:s}),{templatesByTeam:v,isLoading:C,requestLoadMoreTemplates:E}=c({queryType:"org",pageSize:t,numTemplatesPerTeam:e,filterByIds:null,includeMyTeamsOnly:!1,enabled:a}),{templatesByTeam:w,isLoading:k,requestLoadMoreTemplates:T}=c({queryType:"team",teamId:m??"",pageSize:e,enabled:!!m}),j=(0,i.useCallback)(e=>{let t=g[e];if(void 0!==t)return d[t]},[d,g]),S=(0,i.useMemo)(()=>{if(s)return[];let e=new Set,t=[];return d.forEach(({teamId:n,totalTemplatesByTeam:i})=>{if(e.has(n)||h.includes(n))return;let r=j(n);(r?.templates.length??0)<i&&(e.add(n),t.push(n))}),t},[h,j,s,d]);(0,i.useEffect)(()=>{if(v)for(let e of v??[])j(e.teamId)||(u(t=>[...t,e]),x(t=>({...t,[e.teamId]:d.length})))},[j,v,d]),(0,i.useEffect)(()=>{let{teamId:e,templates:t}=w?.[0]??{};if(!e||!t||k)return;let n=j(e);u(e=>n&&t.length>n.templates.length?(n.templates=t,[...e]):e),n&&n.templates.length>=n.totalTemplatesByTeam&&(p(null),f(t=>[...t,e]))},[j,k,v,w,d]);let I=(0,i.useCallback)(()=>{0===S.length?E():m?T():S.length&&p(S[0]??null)},[S,m,E,T]);return s?{templatesByTeam:_,isLoading:y,requestLoadMoreTemplates:b}:{templatesByTeam:d,isLoading:C,requestLoadMoreTemplates:I}}},358109:(e,t,n)=>{n.d(t,{OS:()=>u,_2:()=>d,w$:()=>c});var i=n(239976),r=n(379141),a=n(522568),s=n(896074),o=n(223487),l=n(380799);let d="audio-paywall-key",c=(()=>{let e=!0,t=!1;return n=>{t||setTimeout(()=>{n>0&&e?(e=!1,(0,a.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(t=!0,(0,a.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})();function u(){let e;let t=(0,o.q5)(),{userIdsInCall:n}=(0,l.W5)(t?.key||null),a=(0,l.bF)(n,t?.key||null).map(e=>e.name);e=a.length>3?[...a.slice(0,2),(0,r.t)("collaboration.voice.n_others",{numUsers:a.length-2})]:a;let d=(0,i.jsx)(s.T,{children:e});return(0,r.tx)("collaboration.voice.are_talking_in_this_file",{numVoiceUsers:e.length,voiceUserNames:d,joinText:(0,i.jsx)("b",{children:(0,r.tx)("collaboration.voice.join_lower")})})}},297613:(e,t,n)=>{n.d(t,{Em:()=>a,TI:()=>s,Wl:()=>r,mt:()=>o});var i=n(105652);function r(e,t){let[n,r]=(0,i.useState)(null),[a,s]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(t&&!a){let n=function(t){r(t[e]||null)};return t.volumeLevelsStore.subscribe(n),s(!0),()=>{t.volumeLevelsStore.unsubscribe(n),s(!1)}}},[t]),t)?n:null}function a(e,t,n){let i=t=>{n(t[e]||null)};return t&&t.volumeLevelsStore.subscribe(i),{unsubscribe:()=>t?.volumeLevelsStore.unsubscribe(i)}}function s(e,t){let[n,r]=(0,i.useState)(),[a,s]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(t&&!a){let n=function(t){r(t[e]?.isMuted)};return t.volumeLevelsStore.subscribe(n),s(!0),()=>{t.volumeLevelsStore.unsubscribe(n),s(!1)}}},[t]),t)return n}function o(e){let[t,n]=(0,i.useState)(null),[r,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(e&&!r){let t=function(e){n(e)};return e.recentlySpokeIdStore.subscribe(t),a(!0),()=>{e.recentlySpokeIdStore.unsubscribe(t),a(!1)}}},[e]),t}},715365:(e,t,n)=>{n.d(t,{hl:()=>m});var i=n(363638),r=n(405228),a=n(766274),s=n(46295),o=n(544803);let l=r.z.object({id:r.z.string().uuid(),collectionId:r.z.string().uuid(),position:r.z.string(),status:r.z.string(),createdAt:r.z.string(),updatedAt:r.z.string(),lastPublishedAt:r.z.string().nullable(),statusUpdatedAt:r.z.string().nullable()}),d=r.z.object({id:r.z.string().uuid(),collectionId:r.z.string().uuid().optional(),itemId:r.z.string().uuid(),fieldSchemaId:r.z.string().uuid(),value:r.z.string(),version:r.z.number(),createdAt:r.z.string(),updatedAt:r.z.string(),assetsForPublish:r.z.array(r.z.object({type:r.z.string(),hash:r.z.string(),height:r.z.number(),width:r.z.number()})).nullable().optional().transform(e=>e??[])}),c=r.z.object({valid:r.z.boolean(),failure_info:r.z.object({errors:r.z.array(r.z.string()),i18n_keys:r.z.array(r.z.string())}).optional()}),u=r.z.object({success:r.z.boolean(),error:r.z.string().nullable(),errorType:r.z.string().nullable()}),m=new class{constructor(){this.CollectionItemResponseSchemaValidator=(0,a.YV)("CollectionItemResponseSchemaValidator",(0,o.D)(l),null),this.BulkImportResponseSchemaValidator=(0,a.YV)("BulkImportResponseSchemaValidator",(0,o.D)(r.z.object({count:r.z.number()})),null),this.CollectionFieldResponseSchemaValidator=(0,a.YV)("CollectionFieldResponseSchemaValidator",(0,o.D)(d),null),this.ItemValidateResponseSchemaValidator=(0,a.YV)("ItemValidateResponseSchemaValidator",c,null),this.CsvValidationResponseValidator=(0,a.YV)("CsvValidationResponseValidator",(0,o.D)(u),null)}createItem({collection:e,itemId:t,fields:n}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:i})=>await i.post(`/api/collections/${e.databaseId}/items`,{item_id:t,fields:n?.map(e=>({id:e.fieldId,field_schema_id:e.fieldSchema.databaseId,value:e.value,assets_for_publish:e.assetsForPublish,job_status:e.jobStatus}))}))}importItems({collection:e,items:t}){return this.BulkImportResponseSchemaValidator.validate(async({xr:n})=>await n.post(`/api/collections/${e.databaseId}/items/import`,{items:(t??[]).map(e=>({fields:e.fields.map(e=>({field_schema_id:e.fieldSchemaId,value:e.value}))}))}))}updateItem({collection:e,item:t,updatedItemAttributes:n}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:i})=>await i.put(`/api/collections/${e.databaseId}/items/${t.databaseId}`,{index:n.position,status:n.status}))}updateSingleItemData({collectionId:e,fieldId:t,fieldSchema:n,item:r,value:a,assetsForPublish:o,jobStatus:l}){return this.CollectionFieldResponseSchemaValidator.validate(async({xr:d})=>{let c={value:a,uuid:t};void 0!==o&&(c.assets_for_publish=o),void 0!==l&&(c.job_status=l);let u=i.v.getFeatureGate("cms_require_collection_id_when_editing_fields"),m=`/api/items/${r.databaseId}/fields/${n.databaseId}`;return u&&(e?(m=`/api/collections/${e}/items/${r.databaseId}/fields/${n.databaseId}`,c.collection_id=e,c.field_schema_id=n.databaseId,c.item_id=r.databaseId):(0,s.AK)("Collection ID is required when editing fields",{itemId:r.databaseId,fieldSchemaId:n.databaseId})),await d.put(m,c)})}deleteItem({collection:e,item:t}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:n})=>await n.del(`/api/collections/${e.databaseId}/items/${t.databaseId}`))}validateItemData({fieldSchema:e,item:t,value:n}){return this.ItemValidateResponseSchemaValidator.validate(async({xr:i})=>await i.put(`/api/items/${t.databaseId}/fields/${e.databaseId}/validate`,{value:n}))}validateCsv({fileKey:e,itemsData:t}){return this.CsvValidationResponseValidator.validate(async({xr:n})=>await n.post("/api/collections/validate_cms_csv",{file_key:e,items_data:t.map(e=>({fields:e.fields.map(e=>({field_schema_id:e.fieldSchemaId,value:e.value}))}))}))}}},777276:(e,t,n)=>{n.d(t,{Q:()=>F});var i=n(239976),r=n(20002),a=n(735786),s=n(106435),o=n(116695),l=n(4245),d=n(379141),c=n(270450),u=n(224542),m=n.n(u),p=n(40297),h=n(253983),f=n(297094),g=n(363337),x=n(450207),_=n(551492),y=n(518126),b=n(518075),v=n(223487),C=n(605985),E=n(236410),w=n(690252),k=n(76354),T=n(367458),j=n(569693),S=n(603935),I=n(976285),A=n(808877),N=n(526865);let M=(0,p.jz)(N.m52),R=(0,p.jz)(N.Ko3);function P(e){let t=(0,r.d4)(e=>e.multiplayer);return"sessionID"in e&&t.observingSessionID===e.sessionID}var O=(e=>(e.CURRENT_USER="current_user",e.FILE_CREATOR="file_creator",e))(O||{});function D(e){let{user:t,onClick:n,volumeIcon:u,containsCursor:p,secondaryActions:h,disableSpotlightAnimation:x}=e,_=(0,v.q5)(),y=(0,r.d4)(e=>e.multiplayer),T=(0,C.iZ)(),A=P(t),{getTriggerProps:N,manager:M}=a.b(),R=y.allUsers.length>1,O=T?.id===t.userID,D=(0,i.jsx)(j.Ro,{entity:{...t,id:t.userID},className:I.Fp,size:24},t.userID),L=(0,b.Py)(t);(0,b.AD)(t)?D=(0,i.jsx)("span",{className:I.LH,children:(0,i.jsx)(k.vQ,{sessionID:t.sessionID,observingSessionID:y.observingSessionID,presenterSessionID:y.presenterSessionID??null,nominatedSessionID:y.sessionsNominatingCurrentUser.length>0?y.sessionID:null,user:t,showColorIndicators:R,horizontal:!0,disableSpotlightAnimation:x})}):L&&(D=(0,i.jsx)("span",{className:I.LH,children:(0,i.jsx)("div",{className:S._L,children:(0,i.jsx)(g.H8,{user:{...t,id:t.userID}})})}));let F=m()({[I.MO]:!0,[I.Cu]:e.isCurrentUserHeaderRow,[I.BI]:e.isInListbox&&!L,[I.yH]:p&&!L,[I.UD]:L}),B=()=>O?"current_user":t.userID===_?.creatorId?"file_creator":null,U=()=>{let e=B();return"current_user"===e?(0,i.jsxs)("span",{children:[" ",(0,d.tx)("collaboration.voice.you_lower_cased")]}):"file_creator"===e?(0,i.jsxs)("span",{children:[" ",(0,c.kc)().multiplayer_avatar_show_creator_label?(0,d.tx)("collaboration.voice.creator"):(0,d.tx)("collaboration.voice.owner")]}):""},V=()=>L?(0,i.jsx)("span",{className:I.FH,children:(0,i.jsx)(f.h1,{date:t.viewedAt})}):null,H=()=>{let e=h?.map(e=>i.jsx(a.q7,{onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick(t)},disabled:e.disabled,children:e.text},e.key));return(0,i.jsx)(a.mc,{children:e})},z=()=>(0,i.jsxs)(a.bL,{manager:M,children:[(0,i.jsx)("div",{className:I.G7,children:(0,i.jsx)(s.u,{className:I.Xg,"aria-label":(0,d.t)("fullscreen.toolbar.multiplayer.more_options"),"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.toolbar.multiplayer.more_options"),...N(),children:(0,i.jsx)(l.J,{})})}),H()]}),G=(0,i.jsxs)(w.fI,{className:I.Hl,children:[D,(0,i.jsxs)("span",{className:I.nP,children:[(0,i.jsxs)("span",{className:I.ko,children:[(0,i.jsx)("span",{className:I.j7,children:(0,b.Py)(t)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:I.TV,children:t.name}),V()]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:I.DL,children:[t.name,U()]}),p&&(0,i.jsx)("span",{className:I.FH,children:A?(0,d.tx)("collaboration.voice.click_to_unfollow"):(0,d.tx)("collaboration.voice.click_to_follow")})]})}),u&&(0,i.jsx)("span",{className:I.e6,children:u})]}),(0,i.jsx)("span",{className:I.vO,children:h&&h.length>0&&z()})]})]});return n?(0,i.jsxs)(o.bL,{className:m()(F,{[I.Lk]:!L&&!M.isOpen,[I.tE]:!L&&M.isOpen}),children:[(0,i.jsx)(o.O6,{onClick:n,className:I.L8,"aria-label":A?(0,d.t)("collaboration.voice.click_to_unfollow_user",{username:t.name}):(0,d.t)("collaboration.voice.click_to_follow_user",{username:t.name})},t.userID),(0,i.jsxs)(w.fI,{className:I.Hl,children:[D,(0,i.jsxs)("span",{className:I.nP,children:[(0,i.jsxs)("span",{className:I.ko,children:[(0,i.jsx)("span",{className:I.j7,children:(0,b.Py)(t)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:I.TV,children:t.name}),V()]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:I.DL,children:[t.name,U()]}),(0,i.jsx)("span",{className:I.zO,children:A?(0,d.tx)("collaboration.voice.click_to_unfollow"):(0,d.tx)("collaboration.voice.click_to_follow")})]})}),u&&(0,i.jsx)("span",{className:I.e6,children:u})]}),(0,i.jsx)(o.HG,{className:I.vO,children:h&&h.length>0&&z()})]})]})]}):n?(0,i.jsx)("button",{className:F,onClick:n,children:G},t.userID):(0,i.jsx)("div",{className:m()(F,{[I.fJ]:M.isOpen}),children:G},t.userID)}function L(e){let t=(0,r.d4)(e=>e.multiplayer),n=(0,r.d4)(e=>"prototype"===e.selectedView.view?e.prototype.showProgressBar:(0,y.T)(e?.progressBarState?.mode)),a=t.allUsers.length>1;(0,h.Av)();let{user:s,onClick:o,volumeIcon:l,disableSpotlightAnimation:c}=e,u=P(s),p=n?S.K$:"";if(!(0,b.AD)(s))return(0,i.jsxs)("div",{className:m()(S.C7,p),children:[(0,i.jsx)(g.H8,{user:{...s,id:s.userID}}),l&&(0,i.jsx)("span",{className:A.Wh,children:l})]});{let n=`voice-avatar-session-${s.sessionID}`;return(0,i.jsxs)("span",{"data-onboarding-key":e.onboardingKey,className:m()(A.R3,p),children:[o&&(0,i.jsx)("button",{className:A.XF,onClick:o,"data-tooltip-proxy-element-id":n,"aria-label":u?(0,d.t)("fullscreen.toolbar.multiplayer.unfollow_name",{name:s.name}):(0,d.t)("fullscreen.toolbar.multiplayer.follow_a_name",{name:s.name}),"data-fullscreen-intercept":!0}),(0,i.jsx)(k.vQ,{disableSpotlightAnimation:c,hasBorder:e.hasBorder,nominatedSessionID:t.sessionsNominatingCurrentUser.length>0?t.sessionID:null,observingSessionID:t.observingSessionID,presenterSessionID:t.presenterSessionID??null,sessionID:s.sessionID,showColorIndicators:a,tooltipOffsetY:(R-M)/2,tooltipProxyId:n,user:s}),l&&(0,i.jsx)("span",{className:A.Wh,children:l})]})}}function F(e){let{user:t,onboardingKey:n,callMetadata:a,isOverflow:s,isCurrentUserHeaderRow:o,onUserClick:l,containsCursor:d,secondaryActions:c,disableSpotlightAnimation:u,hasBorder:m,hidePopover:p}=e,h=(0,r.wA)(),f=a&&(0,i.jsx)(T.i,{userId:t.userID,userName:t.name,microphoneStyle:a.microphoneStyle,call:a.call,alwaysShowVoiceBars:s,volumeIconMutedState:s?T.S.DEFAULT:T.S.MINI}),g=l&&(e=>{e.stopPropagation(),e.preventDefault(),(0,b.AD)(t)&&(l(t),s?(h(x.oB()),p&&p()):h(_.jD()))});return s||o?(0,i.jsx)(D,{user:t,volumeIcon:f,onClick:g,containsCursor:d,secondaryActions:c,disableSpotlightAnimation:u,isCurrentUserHeaderRow:o}):(0,i.jsx)(L,{user:t,onboardingKey:n,volumeIcon:f,onClick:g,disableSpotlightAnimation:u,hasBorder:m})}},33687:(e,t,n)=>{n.d(t,{A:()=>lp});var i=n(239976),r=n(105652),a=n(270450),s=n(575015),o=n(29161),l=n(667431),d=n(913601),c=n(960210),u=n(598066),m=n(20002),p=n(136393),h=n(338630),f=n(859100),g=n(215496),x=n(795867),_=n(139850),y=n(271625),b=n(378721),v=n(254056),C=n(942356),E=n(730436);let w=(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.015 3.441 5.7 4.701l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L7.3 6.3l1.26-.315c.505-.126.505-.844 0-.97L7.3 4.7l-.315-1.26c-.126-.505-.844-.505-.97 0m0 12L5.7 16.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L7.3 18.3l1.26-.315c.505-.126.505-.844 0-.97L7.3 16.7l-.315-1.26c-.126-.505-.844-.505-.97 0M5.7 10.7l.315-1.26c.126-.505.844-.505.97 0L7.3 10.7l1.26.315c.505.126.505.844 0 .97L7.3 12.3l-.315 1.26c-.126.505-.844.505-.97 0L5.7 12.3l-1.26-.315c-.505-.126-.505-.844 0-.97zM10.5 5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 6a.5.5 0 1 0 0 1h9a.5.5 0 0 0 0-1zm0 6a.5.5 0 1 0 0 1h9a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var k=n(692376),T=n(14575),j=n(379141),S=n(445019),I=n(154963),A=n(294407),N=n(862390),M=n(1007),R=n(236410),P=n(883706),O=n(276344),D=n(203044),L=n(595964),F=n(428158),B=n(466082),U=n(85531);let V=(e,t)=>e.filter(e=>t.get(e));var H=(e=>(e.DismissImmediately="dismiss-immediately",e.NoAutoDismiss="no-auto-dismiss",e.StartAutoDismissTimer="start-auto-dismiss-timer",e.noop="no-op",e))(H||{}),z=n(330282);function G(e){return r.useMemo(()=>{if(!e)return!0;let{data:t}=(0,z.b7)((0,B.UN)());return JSON.stringify(t.map(e=>({t:e.t,id:e.id,type:e.type,stamps:e.stamps}))).length>12e3},[e])}var K=n(270351);function W(e=2e3){let t=(0,m.d4)(e=>e.mirror.selectionProperties.whiteboardNumSelected),[n,i]=r.useState({hasDebounceSettled:!1,numNodesSelected:void 0}),a=(0,K.A)(e=>{i({hasDebounceSettled:!0,numNodesSelected:e})},e);r.useEffect(()=>{i({hasDebounceSettled:!1,numNodesSelected:t}),a(t??0)},[a,t]);let s=n.numNodesSelected!==t;return n.hasDebounceSettled&&!s}var q=n(924149);function X({onClose:e,onSummarize:t,onAutoDismiss:n}){let a;let s=W(500),o=G(s),{lastSummarizableSelection:l}=function({onAutoDismiss:e,selectionIsStable:t}){let n=(0,U.cF)(),[i,a]=(0,r.useState)(0),s=(0,m.d4)(e=>e.mirror.sceneGraphSelection),o=r.useMemo(()=>Object.entries(s).filter(([e,t])=>t).map(([e,t])=>e),[s]),[l,d]=(0,r.useState)([]),c=(0,B.UN)(),u=0===o.length&&l.length>0&&!V(l,c).length;return(0,r.useEffect)(()=>{switch(function({currentAutoDismissTimeoutId:e,stickySummarizationEnabledForSelection:t,lastSummarizableSelectionHasBeenDeleted:n,selectionSize:i,canRecomputeAutoDismissAction:r}){if(0===i&&n)return"dismiss-immediately";if(r){if(t)return"no-auto-dismiss";if(!e)return"start-auto-dismiss-timer"}return"no-op"}({currentAutoDismissTimeoutId:i,stickySummarizationEnabledForSelection:n,lastSummarizableSelectionHasBeenDeleted:u,selectionSize:o.length,canRecomputeAutoDismissAction:t})){case H.DismissImmediately:window.clearTimeout(i),a(0),e();break;case H.NoAutoDismiss:d(o),window.clearTimeout(i),a(0);break;case H.StartAutoDismissTimer:a(window.setTimeout(()=>{e()},1e4))}},[o.length,o,n,u,i,t,e]),{lastSummarizableSelection:l}}({onAutoDismiss:n,selectionIsStable:s});(0,r.useEffect)(()=>{S.zl.set(q.EH,e=>e+1),S.zl.set(q.ji,()=>new Date().toISOString())},[]);let{summarizeCanvasSelection:d}=(0,O.ss)(k.cfv.ABOVE,!1,"DISCOVERY_NUDGE"),c=(0,F.Cb)(),u=(0,S.Xr)(D.v),p=s&&o;p&&(a=(0,j.t)("whiteboard.ai_summary.nudge.too_many_tokens"));let h=(0,r.useRef)(null),f=(0,M.ni)(),g=(0,A.FQ)(h,8);return(0,r.useLayoutEffect)(()=>{let e=h.current;if(!e)return;let t=f.y-8,n=T.r.fromOriginAndSize(f.x,t,f.width,f.height),i=e.getBoundingClientRect(),r=g(T.r.fromOriginAndSize(n.right()-i.width-12,n.top()+20,i.width,i.height),n);if(i.x<0||i.y<0){let t=new Animation(new KeyframeEffect(e,[{transform:`translateX(${r.left()}px) translateY(-250px)`},{transform:`translateX(${r.left()}px) translateY(${r.top()}px)`}],{duration:600}));t.onfinish=()=>{e.style.transform=`translateX(${r.left()}px) translateY(${r.top()}px)`},t.play()}else e.style.transform=`translateX(${r.left()}px) translateY(${r.top()}px)`},[h,-250,f,g]),(0,i.jsxs)("div",{ref:h,className:"ai_summary_nudge--container---wJt5",children:[(0,i.jsxs)("div",{className:"ai_summary_nudge--topContent--7N3EY",children:[(0,i.jsxs)("div",{className:"ai_summary_nudge--topBar--YNgoH",children:[(0,i.jsx)("span",{className:I.s.textHeadingMedium.$,children:(0,j.tx)("whiteboard.ai_summary.nudge.title")}),(0,i.jsx)("div",{className:"ai_summary_nudge--closeButton--9NwI1",children:(0,i.jsx)(b.K,{onClick:e,"aria-label":(0,j.t)("general.close"),"data-testid":"close-button",children:(0,i.jsx)(E.X,{})})})]}),(0,i.jsx)("div",{className:I.s.textBodyLarge.colorTextSecondary.$,children:(0,j.tx)("whiteboard.ai_summary.nudge.subtitle")}),(0,i.jsxs)("div",{className:"ai_summary_nudge--numberContainer--NTzAu",children:[(0,i.jsx)(J,{num:1}),(0,i.jsx)(J,{num:2})]}),(0,i.jsx)(Y,{disabled:p,disabledTooltip:a,"data-testid":"summarize-button",onClick:()=>{N.wr(),N.Dh(l),d(),t(),c&&u(!0)},trackingProperties:{text:"summarize"}})]}),(0,i.jsx)("div",{className:"ai_summary_nudge--middlePerforation--7Dc1w"}),(0,i.jsx)("div",{className:"ai_summary_nudge--bottomContent--eP36Q",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:I.s.textBodyMedium.colorTextSecondary.mr2.$,children:(0,j.tx)("whiteboard.ai_summary.nudge.disclaimer")}),(0,i.jsx)(v.N,{href:L.nG,newTab:!0,trusted:!0,children:(0,j.t)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta")})]})}),(0,i.jsx)("div",{className:"ai_summary_nudge--bottomPerforation--O1R9z"})]})}let Y=(0,h.tf)(function({onClick:e,disabled:t,disabledTooltip:n}){return(0,i.jsx)(h.fu,{name:"AI Summary Nudge CTA",properties:{disabled:t},children:(0,i.jsx)(C.Pw,{onClick:e,variant:"primary","data-testid":"summarize-button","data-tooltip":t?n:"","data-tooltip-type":R.Ib.TEXT,disabled:t,children:(0,i.jsxs)("div",{className:"ai_summary_nudge--buttonContents--YoNUc",children:[(0,i.jsx)("span",{className:"ai_summary_nudge--buttonIcon--pfXrh",children:(0,i.jsx)(w,{})}),(0,j.tx)("whiteboard.ai_summary.nudge.cta"),(0,i.jsx)("div",{className:"ai_summary_nudge--badgeWrapper--UDBcn",children:(0,i.jsx)(P.v,{location:t?"SUMMARIZE_NUDGE_DISABLED":"SUMMARIZE_NUDGE",overrideText:""})})]})})})});function J({num:e}){let t=184/e;return(0,i.jsxs)("div",{className:"ai_summary_nudge--numberGraphic---jvs6","aria-hidden":"true",children:[(0,i.jsx)("span",{className:"ai_summary_nudge--numberText--I5sbS",children:e}),(0,i.jsx)("div",{className:"ai_summary_nudge--textPlaceholder--0AuAs",style:{width:`${t}px`}})]})}function Z(){let e=(0,m.d4)(e=>e.mirror.selectionProperties.whiteboardSelectionCanShowAiSummaryNudge),t=W(),n=G(t);return t&&e&&!n}var Q=n(493064),$=n(199808);function ee(){let e=(0,m.wA)(),{isShowing:t,complete:n}=function(){let e=function(){let e=function(){let e=(0,S.md)($.Bl),t=(0,S.md)(q.xo),n=(0,S.md)(q.MC),i=(0,S.md)(q.ji),a=(0,S.md)(q.EH);return r.useMemo(()=>{if("loaded"!==t.status||"loaded"!==n.status||"loaded"!==e.status||e.data)return(0,Q.gB)({isEligibleToShowUser:!1});let r=new Date(i).getTime()>Date.now()-864e5;return a>=3||t.data||n.data||r?(0,Q.gB)({isEligibleToShowUser:!1}):(0,Q.gB)({isEligibleToShowUser:!0})},[e,t,n,a,i])}(),t=Z();return(0,Q.gB)({shouldShowNudge:!!(e.data.isEligibleToShowUser&&t)})}(),{show:t,isShowing:n,complete:i}=(0,f.e)({overlay:y.RSb,priority:g.N.SECONDARY_MODAL},[e]),a=Z(),s=(0,m.d4)(e=>e.mirror.selectionProperties.numSelectedByType);return r.useEffect(()=>{t({canShow:e=>e.shouldShowNudge})},[t,e,s,a]),{isShowing:n,complete:i}}();return(0,i.jsx)(_.M,{isShowing:t,children:t&&(0,i.jsx)(h.fu,{name:x.e0.AI_SUMMARY_TOPBAR_NUDGE,children:(0,i.jsx)(X,{onClose:()=>{e(p.b({[q.l0]:!0})),n()},onSummarize:()=>{e(p.b({[q.zp]:!0})),e(p.b({[q.l0]:!0})),n()},onAutoDismiss:()=>{n()}})})})}var et=n(715307),en=n(741400),ei=n(223487),er=n(143334),ea=n(312823),es=n(362844),eo=n(610265),el=n(303740),ed=n(748181);let ec=(0,S.eU)(!1);var eu=n(888903),em=n(526575),ep=n(132216),eh=n(184951),ef=n(367372);let eg="slides_visual_bell_entrypoint_dismissed_user_flag",ex="slide-conversion-visual-bell";function e_(){return!function(){let e=(0,m.wA)(),t=(0,ep.d)(),n=(0,ed.f)(eg),a=(0,eh.$)(),s=(0,eh.N)(),[o,l]=r.useState(!1),[d,c]=r.useState(!1),u=r.useCallback(()=>{e(eu.F.enqueue({type:ex,content:(0,i.jsx)(ef.dB,{}),timeoutOverride:1e4,onDismiss:()=>{l(!0),e(p.b({[eg]:!0})),(0,em.Cu)({trackingContext:"Slides conversion visual bell entrypoint",name:"slides_conversion_visual_bell_entrypoint_dismissed"}),e(eu.F.enqueue({message:(0,j.t)("slides.visual_bell.we_wont_ask_you_again")}))}}))},[e]);r.useEffect(()=>{s.size||e(eu.F.dequeue({matchType:ex}))},[e,s]),r.useEffect(()=>{n?.createdAt||o||!t||d||!(a>=3)||(u(),c(!0))},[u,n,o,d,a,t])}(),null}var ey=n(393463),eb=n(554408),ev=n(536378),eC=n(130763),eE=n(639184),ew=n(826151),ek=n(574220),eT=n(634224),ej=n(550534),eS=n(298415),eI=n(289252),eA=n(390739),eN=n(816379);let eM=(0,eT.r1)(eS.IR);function eR(){let e=(0,S.md)(ek.mp),t=(0,S.md)(ek.t),n=(0,S.md)(eM),r=(0,S.md)(ei.yV),a=(0,m.wA)(),{uniqueId:s,isShowing:o,show:l,complete:d}=(0,f.e)({overlay:y.B14,priority:g.N.SECONDARY_MODAL},[e,t,n]),c=(0,eC.hn)();return(0,ew.E)(s,"properties-panel-select-tab",e=>{e.properties?.tab==="prototype"&&l({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-2592e6})(e)&&t&&c()&&!n})}),(0,i.jsx)(eA.X,{description:(0,j.tx)("upsell.advanced_prototyping.description"),isShowing:o,media:(0,i.jsx)(eI.w,{src:(0,ey.ck)("30507591ad5cd385aaf75d4a16ef140b74ec821b"),aspectRatio:1.75}),onClose:d,position:eN.Q.BOTTOM_RIGHT,primaryCta:{label:(0,j.tx)("upsell.advanced_prototyping.see_plans"),type:"button",onClick:()=>{a(ev.to({type:eb.V,data:{entrypoint:ej.C.ADVANCED_PROTOTYPING_UPSELL,teamId:r?.team?.id,openCheckoutInNewTab:!0}})),d()},ctaTrackingDescriptor:eE.c.SEE_PLANS},secondaryCta:{label:(0,j.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/14506587589399-Use-variables-in-prototypes",ctaTrackingDescriptor:eE.c.LEARN_MORE},title:(0,j.tx)("upsell.advanced_prototyping.title"),trackingContextName:"Advanced Prototype Upsell Popup",userFlagOnShow:eS.IR})}var eP=n(358109),eO=n(527205);let eD="seen_audio_nux",eL=(0,eT.r1)(eD);function eF(){let e=(0,S.md)(eL),t=(0,f.e)({overlay:y.y4J,priority:g.N.SECONDARY_MODAL},[e]);return(0,ew.E)(t.uniqueId,"Context Viewed",e=>{let n=e.properties?.name;"join-call-with-others"===n?t.show({canShow:e=>!e}):"should-close-open-audio-nux"===n&&t.isShowing&&t.complete()}),(0,ew.E)(t.uniqueId,"Lost DOM Target",()=>{t.isShowing&&t.complete()}),(0,i.jsx)(eO.rq,{isShowing:t.isShowing,userFlagOnShow:eD,emphasized:!0,title:(0,j.tx)("collaboration.voice.join_the_conversation"),description:(0,i.jsx)("div",{style:{display:"inline"},children:(0,i.jsx)(eP.OS,{})}),targetKey:"audio-nux-key",onClose:t.complete,trackingContextName:"audio_nux_pointer"})}var eB=n(384203),eU=n(574159),eV=n(990096),eH=n(44362),ez=n(193487),eG=n(993976),eK=n(551821),eW=n(230964),eq=n(519668),eX=n(624631),eY=n(179834),eJ=n(932853),eZ=n(192704),eQ=n(784798),e$=(e=>(e[e.DONT_SHOW=0]="DONT_SHOW",e[e.DEFAULT_TO_SRGB=1]="DEFAULT_TO_SRGB",e[e.DEFAULT_TO_DISPLAY_P3=2]="DEFAULT_TO_DISPLAY_P3",e))(e$||{});let e0={"Export PNG with Color Profile":"867977941678289774"};function e1(){let{plugins:e}=(0,eZ.wH)(),t=Object.fromEntries(Object.entries(e0).filter(([t,n])=>Object.values(e).some(e=>e.manifest.id===n)));return Object.keys(t).length>0?t:null}function e2(){let e=(0,eQ.Av)();return(0,eQ.tK)(e)}let e5=(0,S.eU)(null),e4="color_management_default_to_p3_modal--onboardingFooter--pT1eu",e3="color_management_default_to_p3_modal--content--a7NkB",e6="seen_color_management_default_to_p3_modal",e7=eX.tO,e9=eW.O0,e8="color_management_default_to_p3_modal";function te(){let e=(0,f.e)({overlay:y.t_E,priority:g.N.SURVEY}),{currentStep:t,next:n,back:a}=(0,eU.A)({numSteps:2,onComplete:e.complete}),s=(0,ed.f)(e6),o=e2(),l=e1(),[d,c]=(0,S.fp)(e5),u=(0,eV.jK)(),[m,p]=(0,r.useState)(!1),[h]=(0,S.fp)(eq.n$),x=(0,eV.C$)();return r.useEffect(()=>{s||null!=d||u.colorProfilePreference!==eH.M.DEFAULT||(c(eH.M.DISPLAY_P3),x(eH.M.DISPLAY_P3,{canSeeP3:o,p3Plugins:l}),e.show())},[o,d,s,e,l,c,x,u.colorProfilePreference]),(0,ew.E)(e.uniqueId,eK.kF,()=>{e.isShowing&&0===t&&e.complete()}),(0,ew.E)(e.uniqueId,eW.nu,()=>{e.isShowing&&1===t&&e.complete()}),(0,ew.E)(e.uniqueId,eK.kL,()=>{m||e.isShowing||0!==t||h||(n(),e.show())}),(0,ew.E)(e.uniqueId,eq.E1,()=>{m||e.isShowing||0!==t||(n(),e.show())}),(0,i.jsxs)(ez.U,{currentStep:t,isShowing:e.isShowing,children:[(0,i.jsx)(eG.h,{ctaText:(0,j.tx)("general.next"),element:tt,isShowing:e.isShowing,modalType:eY.q3.ANNOUNCEMENT_POINTER,onClickPrimaryCta:n,onClose:e.complete,onManualDismiss:()=>{e.complete(),p(!0)},onboardingKey:e7,stepCounter:(0,i.jsx)("span",{className:e4,children:(0,j.tx)("fullscreen.color_management.curator.step_1of2")}),title:(0,i.jsx)(i.Fragment,{children:(0,j.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.title")}),trackingContextName:e8,userFlagOnShow:e6,width:300}),(0,i.jsx)(eG.h,{ctaText:(0,j.tx)("general.got_it"),element:tn,isShowing:e.isShowing,modalType:eY.q3.ANNOUNCEMENT_POINTER,onClickPrimaryCta:()=>{e.complete(),p(!0)},onClose:e.complete,onManualDismiss:()=>{e.complete(),p(!0)},onboardingKey:e9,preventDismissOnClickSecondaryCta:!0,secondaryCtaText:(0,i.jsx)("div",{onClick:a,children:(0,j.tx)("general.previous")}),stepCounter:(0,i.jsx)("span",{className:e4,children:(0,j.tx)("fullscreen.color_management.curator.step_2of2")}),title:(0,i.jsx)(i.Fragment,{children:(0,j.tx)("fullscreen.color_management.curator.change_document_color_profile.title")}),trackingContextName:e8,userFlagOnShow:e6,width:300})]})}function tt(){return(0,i.jsxs)("p",{className:e3,children:[(0,j.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.content",{colorProfileSetting:(0,i.jsx)("strong",{children:(0,j.tx)("fullscreen.color_management.curator.color_profile_setting")})})," ",(0,i.jsx)(v.N,{newTab:!0,href:eJ.s,children:(0,j.tx)("rcs.rcs_shared.learn_more")})]})}function tn(){return(0,i.jsxs)("p",{className:e3,children:[(0,j.tx)("fullscreen.color_management.curator.change_document_color_profile.content",{fileColorProfile:(0,i.jsx)("strong",{children:(0,j.tx)("fullscreen.color_management.curator.file_color_profile")})})," ",(0,i.jsx)(v.N,{newTab:!0,href:eJ.s,children:(0,j.tx)("rcs.rcs_shared.learn_more")})]})}function ti(){let e=e2(),t=e1(),[n,i]=(0,S.fp)(e5),a=(0,eV.jK)(),s=(0,eV.C$)();return r.useEffect(()=>{null==n&&a.colorProfilePreference===eH.M.DEFAULT&&(i(eH.M.SRGB),s(eH.M.SRGB,{canSeeP3:e,p3Plugins:t}))},[e,n,t,i,s,a.colorProfilePreference]),null}function tr(){let e=function(){let e=(0,eV.jK)().colorProfilePreference!==eH.M.DEFAULT,t=function(){let e=e2(),t=e1();return e&&t?eH.M.DISPLAY_P3:eH.M.SRGB}(),[n]=(0,S.fp)(e5);return e&&null===n?0:t===eH.M.SRGB?1:t===eH.M.DISPLAY_P3?2:0}();if(!function(e){let t=(0,eB.aV)(),[n,i]=function(e){let[t,n]=r.useState(!1),[i,a]=r.useState(!1);return r.useEffect(()=>{let e;return i&&(e=setTimeout(()=>{n(!t),a(!1)},2e3)),()=>clearTimeout(e)},[i,t,2e3]),[t,r.useCallback(()=>a(!0),[])]}(2e3);return r.useEffect(()=>{t||i()},[t,i]),n}(0))return null;switch(e){case e$.DONT_SHOW:return null;case e$.DEFAULT_TO_SRGB:return(0,i.jsx)(ti,{});case e$.DEFAULT_TO_DISPLAY_P3:return(0,i.jsx)(te,{})}}var ta=n(677451),ts=n(776888),to=n(456556),tl=n(541983),td=n(157933);function tc(){let e=(0,f.e)({overlay:y.qnr,priority:g.N.DEFAULT_MODAL}),t=(0,m.wA)(),n=(0,m.Pj)(),a=(0,to.Fk)((e,t)=>(0,ts.zC)(e,t),n.getState().mirror.appModel.currentPage),s=(0,ta.JU)((0,ta.J3)()),o=!!ei.q5()?.template,l=(0,eB.aV)(),d=!!(0,ed.f)("seen_custom_template_publish_nudge"),c=ed.f("figjam_editor_onboarded")?.updatedAt?.getTime(),u=!!c&&c<Date.now()-12096e5,h=!l&&!d&&s&&!a&&!o&&u;return((0,r.useEffect)(()=>{h&&setTimeout(()=>{e.show(),t(p.b({seen_custom_template_publish_nudge:!0}))},1e3)},[t,e,h]),e.isShowing)?(0,i.jsx)(tl.i,{step:{modalType:eY.q3.DRAGGABLE,element:td.ZH,trackingContextName:"custom_template_publish_nudge",onboardingKey:eX.v4,title:(0,i.jsx)("div",{className:I.s.font13.fontMedium.pl8.pt16.pb16.$,children:(0,j.tx)("whiteboard.inserts.custom_templates_header")}),width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:e.complete,onClose:e.complete,dismissModal:e.complete,dispatch:t}):null}var tu=n(522568),tm=n(732838),tp=n(141288),th=n(309742);let tf=(0,eT.r1)("seen_desktop_download_modal_prompt"),tg=(0,eT.r1)("seen_desktop_download_modal_prompt_v2"),tx=(0,ek.tH)("used_desktop_app");function t_(){let e=(0,S.md)(tf),t=(0,S.md)(tg),n=(0,S.md)(ek.mp),r=(0,S.md)(tx),s=(0,a.kc)().desktop_show_download_prompt,{isShowing:l,show:d,complete:c}=(0,f.e)({overlay:y.kmj,priority:g.N.DEFAULT_MODAL},[t,e,n]);if((0,th.h)(()=>{tm.eD||r||!s||d({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-12096e5})(n)&&!t})}),!l)return null;let u=()=>{c()};return(0,i.jsx)(eA.X,{description:(0,j.tx)("desktop_download_modal_prompt.level_up_your_workflow_with_tabs"),isShowing:l,media:(0,i.jsx)(eI.y,{aspectRatio:1.75,alt:"A graphic showing the desktop app with tabs",src:(0,ey.ck)("cedfb41ea4da3cb80d5d062e5b648aa1d6a5cf1b")}),onClose:u,position:eN.Q.BOTTOM_RIGHT,primaryCta:{label:(0,j.tx)("desktop_download_modal_prompt.get_the_desktop_app"),type:"button",onClick:()=>{(0,tu.sx)("desktop_modal_download_prompt_cta_clicked_v2"),u(),tp.Ay.redirect(`/download/desktop/${o.Ay.mac?"mac":"win"}`,"_blank")},ctaTrackingDescriptor:eE.c.DESKTOP_APP_DOWNLOAD},secondaryCta:{label:(0,j.tx)("desktop_download_modal_prompt.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/5601429983767-Guide-to-the-Figma-desktop-app",ctaTrackingDescriptor:eE.c.LEARN_MORE},title:(0,j.tx)("desktop_download_modal_prompt.download_the_figma_desktop_app"),trackingContextName:"Desktop Download Modal Prompt",userFlagOnShow:"seen_desktop_download_modal_prompt_v2"})}var ty=n(652154),tb=n(562418),tv=n(355441);function tC(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,f.e)({overlay:y.Fwr,priority:g.N.DEFAULT_MODAL}),s=!!(0,u.hA)(),o=(0,tb.m0)(),l=(0,ty.uQ)();return(r.useEffect(()=>{t&&!l&&n()},[t,l,n]),(0,ew.E)(a,"focus_view_entry_point_onboarding_event",()=>{e()}),o&&!s&&l)?(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.LEFT_TITLE,description:(0,j.tx)("dev_handoff.focus_view_entry_point_onboarding.description"),isCanvasNode:!0,isShowing:t,media:(0,i.jsx)(eI.y,{src:(0,ey.ck)("f5d721aeb450c7b47d78312d00881a9ed3044463"),alt:(0,j.t)("dev_handoff.focus_view_entry_point_onboarding.image"),aspectRatio:16/9}),onClose:n,onTargetLost:n,pointToTopEdge:!0,primaryCta:{label:(0,j.tx)("general.got_it"),onClick:n,type:"button",ctaTrackingDescriptor:eE.c.GOT_IT},targetKey:l,title:(0,j.tx)("dev_handoff.focus_view_entry_point_onboarding.title"),trackingContextName:"Focus view entry point onboarding overlay"}):null}var tE=n(164785),tw=n(366712),tk=n(462048),tT=n(841301),tj=n(597345),tS=n(623870),tI=n(605985),tA=n(826187),tN=n(13513),tM=n(791035);function tR(e){let{viewedSidebar:t,setViewedSidebar:n}=e,a=(0,m.wA)(),s=(0,tS.w)({rolesToDefaultToOther:["education"]}),o=(0,tN.j)(s);return r.useMemo(()=>{t||(n(!0),a(tk.En({initialX:0,initialY:0,pinned:tA.t.PINNED_AND_DOCKED_LEFT,initialSelectedCategory:o})))},[a,o,t,n]),(0,i.jsx)(i.Fragment,{})}function tP(){let e=(0,tI.TA)(),t=(0,ei.q5)(),n=(0,m.d4)(e=>e.mirror.appModel.currentPage),a=(0,to.Fk)((e,t)=>(0,ts.zC)(e,t),n),s=(0,m.d4)(e=>!(0,tM.zP)(e.mirror.appModel.currentTool)),o=(0,tM.Uj)(t,e||""),l=(0,eT.Fu)("interacted_figjam_whats_new_v2_cta"),d=(0,S.md)(l),c=(0,S.md)(tT.wg),[u,p]=r.useState(!1),h=(0,f.e)({overlay:y.hsL,priority:g.N.HIGH_PRIORITY_MODAL},[d]);(0,th.h)(()=>{h.show({canShow:e=>(0,tM.SS)(e)&&c&&(0,tM.ZQ)(t)&&a&&!s&&o})});let x=(0,tj.LR)(),_=()=>{x(),h.complete()};return(0,i.jsx)(eG.h,{isShowing:h.isShowing,modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Templates",element:()=>(0,i.jsx)(tR,{viewedSidebar:u,setViewedSidebar:p}),testId:"figjam_templates_whats_new_overlay",onClickPrimaryCta:h.complete,onClose:_,onManualDismiss:_})}var tO=n(786206),tD=n(206955),tL=n(419950),tF=n(322287),tB=n(699165),tU=n(842582),tV=n(102699),tH=n(844012),tz=n(782380);let tG="figjam_try_confirm_save_steps--descriptionBold--Q-F9D";function tK({dismissModal:e}){let t=(0,m.wA)(),n=(0,ei.tS)(),a=(0,eB.aV)(),s=(0,m.d4)(e=>e.user?.email_validated_at),o=(0,tz.E)(n??void 0),[l,d]=r.useState(!1),c=(0,m.d4)(e=>n?e.loadingState[tV.Q.loadingKeyForPayload({file_key:n})]:null),u=(0,m.d4)(e=>n?e.loadingState[tH.D.loadingKeyForPayload({fileKey:n})]:null),p=(0,tO.s)(),h=c===tL.r.LOADING||"loading"===p.status||u===tL.r.LOADING,f=c===tL.r.SUCCESS||u===tL.r.SUCCESS;(0,r.useEffect)(()=>{f&&e()},[f,e]);let g=(0,ey.Ay)().mermaid_content;if((0,r.useEffect)(()=>{n&&(!g||l||a||(d(!0),o.onClaim(),e()))},[n,g,o,e,l,a]),!n||!s||a||g)return null;let x=(0,eo.A)(s).isAfter((0,eo.A)().subtract(5,"minutes"));return(0,i.jsx)("div",{className:"figjam_try_confirm_save_steps--modalContent---h4zp",children:(0,i.jsxs)("div",{className:"figjam_try_confirm_save_steps--textContent--aLzue",children:[(0,i.jsx)("h1",{className:"figjam_try_confirm_save_steps--headline--mVAfJ text--fontPos20--WslT3 text--_fontBase--VaHfk",children:(0,j.tx)("figjam_try.save_modal.headline")}),(0,i.jsx)(tF.k,{multiple:1}),(0,i.jsx)("p",{className:"figjam_try_confirm_save_steps--description--9W4c- text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:x?(0,j.tx)("figjam_try.save_modal.new_team"):(0,j.tx)("figjam_try.save_modal.save_one_team",{share:(0,i.jsx)("p",{className:tG,children:(0,j.tx)("figjam_try.save_modal.share")}),file_duplicate:(0,i.jsx)("p",{className:tG,children:(0,j.tx)("figjam_try.save_modal.file_duplicates")})})}),(0,i.jsx)(tF.k,{multiple:3}),(0,i.jsx)(tU.lR,{onClick:()=>{"loaded"===p.status&&(0,Q.oA)(p.data?.deviceTryFile)?t(tH.D({fileKey:n})):t(tV.Q({file_key:n}))},disabled:h,trackingProperties:{buttonContext:"Let\u2019s jam"},children:(0,i.jsx)(tB.x,{isLoading:h,children:()=>(0,j.tx)("figjam_try.save_modal.cta")})})]})})}function tW(){let{show:e,complete:t,isShowing:n}=(0,f.e)({overlay:y.JGK,priority:g.N.HIGH_PRIORITY_MODAL}),a=(0,S.md)(ei.yV),s=(0,tI.TA)(),o=a?.isTryFile,l=(0,tO.s)(),[d,c]=r.useState(!1);return(0,r.useEffect)(()=>{n&&!o&&t()},[o,n,t]),(0,r.useEffect)(()=>{let t=(0,tD.QL)(eX.ao.key)===eX.ao.value,n="loaded"===l.status&&!!(0,Q.oA)(l.data?.deviceTryFile);(0,ey.Ay)().mermaid_content_claimable&&!d?(e(),c(!0)):t&&n&&!d?(e(),c(!0)):t&&o&&!n&&e()},[e,o,l,d,s]),(0,i.jsx)(eG.h,{isShowing:n,trackingContextName:"Figjam Try Confirm Save Modal",modalType:eY.q3.WELCOME,element:({dismissModal:e})=>(0,i.jsx)(tK,{dismissModal:e}),onClickPrimaryCta:t,onClose:t,onManualDismiss:t})}var tq=n(245814),tX=n(655793),tY=n(517478),tJ=n(711052);let tZ="figjam_try_confirm_save--textContainer--Aq1NM";function tQ(){let[e,t]=r.useState(!1),{show:n,isShowing:a,complete:s}=(0,f.e)({overlay:y.XAb,priority:g.N.HIGH_PRIORITY_MODAL}),o=(0,S.md)(ei.yV),l=o?.isTryFile,d=(0,tO.s)(),c=(0,tD.QL)(eX.ao.key)===eX.ao.value,u=(0,S.md)(tJ.N);return(0,r.useEffect)(()=>{!e&&c&&!l&&"loaded"===d.status&&Q.oA(d.data?.deviceTryFile)?.claimedAt&&Q.oA(d.data?.deviceTryFile)?.claimedByUserId!==u.data&&n()},[e,l,c,d,n,u]),(0,i.jsx)(_.M,{isShowing:a,children:(0,i.jsx)(t$,{onClose:()=>{s(),t(!0)},open:a})})}function t$(e){let t=tq.hS({...e,preventUserClose:!0});return(0,i.jsx)(h.fu,{name:"figjam_try_device_already_claimed_overlay",children:(0,i.jsx)(tX.bL,{manager:t,width:420,height:"fixed",children:(0,i.jsx)(tY.vo,{children:(0,i.jsxs)(tY.nB,{padding:32,children:[(0,i.jsx)("div",{className:tZ,children:(0,i.jsx)("h1",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedHeader--hOpLH text--fontPos20--WslT3 text--_fontBase--VaHfk",children:(0,j.tx)("figjam_try.already_claimed_modal.header")})}),(0,i.jsx)(tF.k,{multiple:1}),(0,i.jsx)("div",{className:tZ,children:(0,i.jsx)("div",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescription--AlZTd text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,j.tx)("figjam_try.already_claimed_modal.description",{file_duplicate:(0,i.jsx)("p",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescriptionBold--snxy7",children:(0,j.tx)("figjam_try.already_claimed_modal.file_duplicate")})})})}),(0,i.jsx)(tF.k,{multiple:3}),(0,i.jsx)(tU.lR,{onClick:e.onClose,children:(0,j.tx)("figjam_try.already_claimed_modal.continue")})]})})})})}var t0=n(920688),t1=n(907490),t2=n(782415),t5=n(661877);let t4=(0,eT.r1)(t0.USER_FLAG_V2),t3=(0,ek.tH)("last_figjam_at"),t6=(0,eT.r1)("dont_show_figjam_updates_in_figma_design");function t7(){let e=(0,S.md)(t6),t=(0,S.md)(tT.wg),n=(0,S.md)(ek.mp),r=(0,S.md)(t3),a=(0,S.md)(t4),s=(0,S.md)(ek.Ot),o=(0,t1.jO)(),l=(0,f.e)({overlay:y.Ttn,priority:g.N.DEFAULT_MODAL},[e,n,a,s]);return(0,th.h)(()=>{l.show({canShow:(e,n,i,a)=>{if(e||a)return!1;let s=(0,t5.f)({userCreatedAt:n,lastUsedFigjamDate:r,hasSeenOverlayV2:i});return(!t||o)&&s}})}),(0,i.jsx)(t2.xZ,{context:"editor",isShowing:l.isShowing,onClose:l.complete})}var t9=n(642003),t8=n(857017),ne=n(348149),nt=n(27414);function nn(){let e=(0,m.wA)(),t=(0,m.d4)(e=>e.currentTeamId),n=(0,m.Pj)(),a=(0,S.md)(ek.t),s=(0,S.md)(tT.NZ),o=(0,t1.jO)(),l=(0,S.md)(tT.wg),{getConfig:d}=(0,ne.I7)("exp_library_upsells_v2"),{isShowing:c,show:u,complete:p,uniqueId:h}=(0,f.e)({overlay:y.BrS,priority:g.N.DEFAULT_MODAL,experiment:{check:()=>d().get("show_library_upsell",!1),predicate:e=>e,postCheck:e=>!0}},[a]);(0,r.useEffect)(()=>{if(!c)return;let t=n.getState().leftPanel.activeTab;return e(nt.FP({tab:k.xae.ASSETS})),()=>{e(nt.FP({tab:t}))}},[e,n,c]);let x=(0,r.useCallback)(e=>{e.properties?.action==="copy_paste_from_different_file"&&l&&u({canShow:e=>e&&s&&o})},[l,u,s,o]),_=(0,r.useCallback)(()=>{c&&p()},[c,p]);return(0,ew.E)(h,"component_instance_inserted",x),(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.LEFT_TITLE,description:(0,j.tx)("rcs.upsell_libraries.quickly_access_components"),emphasized:!0,isShowing:c,onClose:_,onTargetLost:_,primaryCta:{label:(0,j.tx)("rcs.upsell_libraries.see_plans"),type:"button",onClick:()=>{e(ev.to({type:eb.V,data:{teamId:t??void 0,entrypoint:ej.C.UPSELL_LIBRARIES_REUSE_COMPONENTS_OVERLAY,openCheckoutInNewTab:!0}})),_()},ctaTrackingDescriptor:eE.c.GOT_IT},secondaryCta:{label:(0,j.tx)("rcs.upsell_libraries.not_now"),type:"button",onClick:_,ctaTrackingDescriptor:eE.c.GOT_IT},targetKey:g.D,title:(0,j.tx)("rcs.upsell_libraries.reuse_components_across_all_files"),trackingContextName:"Upsell Libraries Reuse Components Overlay"})}var ni=n(490096),nr=n(770785),na=n(689966);let ns="seen_link_shortcut_overlay",no=(0,eT.r1)(ns);function nl(){let e=(0,m.wA)(),t=(0,S.md)(no),{show:n,isShowing:a,complete:s,uniqueId:o}=(0,f.e)({overlay:y.v75,priority:g.N.DEFAULT_MODAL},[t]),l=na.y.isApple(),d=r.useMemo(()=>(0,i.jsx)(ni.S,{shortcut:l?"\u2318K":"Ctrl+K"}),[l]),c=r.useMemo(()=>(0,i.jsx)(ni.S,{shortcut:l?"\u21E7\u2318U":"Shift+Ctrl+U"}),[l]);return(0,ew.E)(o,["show_link_shortcuts_overlay"],()=>{n({canShow:t=>(e(p.b({seen_link_shortcut_overlay:!0})),!t)})}),(0,i.jsx)(eA.X,{description:(0,i.jsxs)("div",{children:[(0,j.tx)("fullscreen.link_shortcuts_onboarding.description"),(0,i.jsxs)("ul",{className:I.s.py8.$,style:nr.sx.add({listStyle:"disc inside"}).$,children:[(0,i.jsx)("li",{children:(0,j.tx)("fullscreen.link_shortcuts_onboarding.show_actions_updated",{actionsKeyCommand:(0,i.jsx)("strong",{children:d})})}),(0,i.jsx)("li",{children:(0,j.tx)("fullscreen.link_shortcuts_onboarding.show_links_updated",{link:(0,i.jsx)("strong",{children:(0,j.tx)("fullscreen.link_shortcuts_onboarding.create_link")}),linkKeyCommand:c})})]})]}),isShowing:a,onClose:s,position:eN.Q.BOTTOM_RIGHT,primaryCta:{label:(0,j.tx)("fullscreen.link_shortcuts_onboarding.got_it"),type:"button",onClick:s,ctaTrackingDescriptor:eE.c.GOT_IT},testId:"linkShortcutOverlay",title:(0,j.tx)("fullscreen.link_shortcuts_onboarding.title"),trackingContextName:"Link Shortcuts Preference Onboarding Modal",userFlagOnShow:ns,width:350})}var nd=n(224542),nc=n.n(nd),nu=n(585574),nm=n(249487),np=n(958461);let nh="dismissed_local_component_asset_panel_pointer",nf=(0,eT.r1)(nh);function ng(){let e=(0,m.wA)(),t=(0,tI.TA)(),n=(0,S.md)(tT.wg),a=(0,S.md)(nf),s=(0,S.md)(tT.NZ),o=(0,S.md)(tT.pQ),l=(0,S.md)(ek.t),d=(0,t1.jO)(),c=ei.q5()?.teamId==null,{isShowing:u,show:h,complete:x,uniqueId:_}=(0,f.e)({overlay:y.Smd,priority:g.N.SECONDARY_MODAL,experiment:{check:()=>(0,nm.Hz)(t??void 0),predicate:e=>e,postCheck:e=>!e}},[a,l,o]),b=(0,r.useCallback)(()=>{n&&h({canShow:(e,t,n)=>d&&t&&(n||s)})},[d,n,s,h]),v=(0,r.useCallback)(()=>{u&&(x(),e(p.b({[nh]:!0})))},[e,x,u]);return(0,ew.E)(_,"action_create_symbol",b),(0,ew.E)(_,"component_instance_inserted",v),(0,i.jsx)(eO.rq,{isShowing:u,targetKey:eX.Qr,description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:I.s.pt6.mr36.$,children:c?(0,j.tx)("design_systems.assets_panel.drag_drop_component_draft"):(0,j.tx)("design_systems.assets_panel.drag_drop_component")}),(0,i.jsx)(nu.Jn,{onClick:v,innerText:(0,j.t)("general.close"),"aria-label":(0,j.t)("general.close"),className:nc()(np.Rf,I.s.absolute.top0.right0.mr8.mt10.$)})]}),primaryCta:{label:(0,j.tx)("design_systems.assets_panel.got_it"),type:"button",onClick:v,ctaTrackingDescriptor:eE.c.GOT_IT},onClose:v,trackingContextName:"Local Component Asset Panel Pointer",arrowPosition:tv.F_.LEFT_TITLE,emphasized:!0,hideCloseButton:!0})}var nx=n(337812),n_=n(156928);let ny=(0,eT.r1)("seen_mobile_comment_download_modal_prompt");function nb(){let e=(0,m.wA)(),t=(0,S.md)(ny),n=(0,m.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),s=(0,m.d4)(e=>e.user?.created_at),o=(0,eo.A)(s).add(14,"day").isSameOrAfter((0,eo.A)()),{isShowing:l,show:d,complete:c,uniqueId:u}=(0,f.e)({overlay:y.H2x,priority:g.N.DEFAULT_MODAL},[t]);if((0,ew.E)(u,n_.w,(0,r.useCallback)(()=>{d({canShow:e=>!!(0,a.kc)().mobile_download_modal_prompts&&!e&&!o&&!n})},[d,n,o])),!l)return null;let p=()=>{nx.Ay.post("/api/send_mobile_download_email",{type:"comment"}),(0,tu.sx)("post_comment_mobile_app_download_prompt_email_me_cta_clicked"),c(),e(eu.F.enqueue({message:(0,j.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return(0,i.jsx)(eA.X,{description:(0,j.tx)("mobile_download_prompts.scan_the_qr_code"),isShowing:l,media:(0,i.jsx)(eI.y,{aspectRatio:1.75,alt:"A graphic show mobile comments with a qr code",src:(0,ey.ck)("6c270bb31fb5af03393425b7f0a6462ec59d04ab")}),onClose:()=>{c()},position:eN.Q.BOTTOM_RIGHT,primaryCta:{label:(0,j.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>p(),ctaTrackingDescriptor:eE.c.MOBILE_APP_DOWNLOAD_COMMENT_PROMPT_CLICKED},secondaryCta:{label:(0,j.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:eE.c.LEARN_MORE},title:(0,j.tx)("mobile_download_prompts.never_miss_a_comment"),trackingContextName:"Mobile Comment Download Modal Prompt",userFlagOnShow:"seen_mobile_comment_download_modal_prompt"})}var nv=n(30790),nC=n(81954);n(323264);var nE=n(322519),nw=n(933302);let nk=(0,nE.bt)(e=>e.multiplayer.allUsers);(0,S.eU)(e=>{let t=e(el.p9),n=e(nk);if(t&&0!==n.length)return n.filter(e=>e.userID!==t.id)});let nT=(0,nE.bt)(e=>e.multiplayer.deviceNameFilter),nj=(0,S.eU)(e=>{let t=e(nk),n=e(nT);return null!=e(ei.yV)&&null!=n&&new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size>1}),nS=(0,eT.r1)("seen_spotlight_hint"),nI=(0,nw.Z1)(nS,(e,t)=>{let n=t(nk),i=t(nT);if(t(nA))return!1;let r=n.filter(e=>e.deviceName===i),a=Math.max(...Object.values(r).map(e=>e.joinedAtS))-300,s=new Set;for(let e of r)e.joinedAtS>=a&&s.add(e.userID);return!(s.size<5)&&!e}),nA=(0,nE.bt)(e=>{let t="fullscreen"===e.selectedView.view&&!e.mirror.appModel.showUi,n="prototype"===e.selectedView.view&&e.selectedView.hideUI;return t||n}),nN=(0,nE.bt)(e=>{let t="fullscreen"===e.selectedView.view&&e.mirror.appModel.showUi,n="prototype"===e.selectedView.view&&!e.selectedView.hideUI;return t||n});var nM=n(702417);let nR={SPOTLIGHT_GUIDE:"https://help.figma.com/hc/articles/5025214483351-Facilitate-meetings-with-spotlight",FOLLOW_GUIDE:"https://help.figma.com/hc/articles/360040322673-Follow-collaborators-in-a-file"},nP="seen_synchronous_collaboration_onboarding",nO=(0,eT.r1)(nP);function nD(){let e=(0,S.md)(nj),t=(0,S.md)(tT.PD),n=(0,S.md)(nN),a=(0,S.md)(nO),s=(0,tI.J$)(),o=(0,eo.A)().subtract(7,"day").isBefore((0,eo.A)(s)),l=(0,f.e)({overlay:y.aI5,priority:g.N.DEFAULT_MODAL},[t,a]),d=(0,f.e)({overlay:y.ar0,priority:g.N.DEFAULT_MODAL}),c=(0,r.useCallback)(()=>{e&&n&&!o&&l.show({canShow:(e,t)=>!e&&!t})},[e,n,o,l]),u=(0,r.useCallback)(()=>{d.show()},[d]),m=(0,r.useCallback)(()=>{l.complete(),u()},[l,u]);return(0,th.h)(c),(0,ew.E)(l.uniqueId,nM.M8,c),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eO.rq,{description:(0,j.tx)("collaboration.spotlight.2_0.onboarding_spotlight.description_with_spotlight_arg",{spotlightMeButtonText:(0,i.jsx)("span",{className:"x117nqv4 xilkfi8",children:(0,j.tx)("collaboration.spotlight.tooltip.spotlight_me")})}),disableHighlight:!0,isShowing:l.isShowing,onClose:()=>l.complete(),primaryCta:{label:(0,j.tx)("collaboration.spotlight.onboarding.next"),type:"button",onClick:m,ctaTrackingDescriptor:eE.c.NEXT},secondaryCta:{label:(0,j.tx)("collaboration.voice.learn_more"),type:"link",href:nR.SPOTLIGHT_GUIDE,ctaTrackingDescriptor:eE.c.LEARN_MORE},targetKey:"multiplayer-spotlight-nux-key",title:(0,j.tx)("collaboration.spotlight.onboarding_spotlight.title"),trackingContextName:"multiplayer_onboarding",userFlagOnShow:nP,width:268}),(0,i.jsx)(eO.rq,{description:(0,j.tx)("collaboration.spotlight.onboarding_observation.description"),disableHighlight:!0,isShowing:d.isShowing,onClose:()=>d.complete(),primaryCta:{label:(0,j.tx)("collaboration.spotlight.onboarding.done"),type:"button",onClick:()=>d.complete(),ctaTrackingDescriptor:eE.c.DONE},secondaryCta:{label:(0,j.tx)("collaboration.voice.learn_more"),type:"link",href:nR.FOLLOW_GUIDE,ctaTrackingDescriptor:eE.c.LEARN_MORE},targetKey:"multiplayer-observation-nux-key",title:(0,j.tx)("collaboration.spotlight.onboarding_observation.title"),trackingContextName:"multiplayer_observation_onboarding",userFlagOnShow:nP,width:268})]})}var nL=n(789146);let nF=()=>(0,j.t)("collaboration.spotlight.nudge_spotlight.title");function nB(){let e=(0,S.md)(tT.PD),t=(0,S.md)(nI),n=(0,tb.m0)(),a=(0,c._I)(),s=n&&!a,o=(0,f.e)({overlay:y.hPP,priority:g.N.SECONDARY_MODAL},[e,t]),l=(0,r.useCallback)(()=>{s||o.show({canShow:(e,t)=>!e&&t})},[s,o]);(0,th.h)(()=>{l()});let d=(0,r.useCallback)(()=>{o.isShowing||l()},[o.isShowing,l]);return(0,ew.E)(o.uniqueId,nM.M8,d),(0,i.jsx)(eG.h,{element:nL._,isShowing:o.isShowing,modalType:eY.q3.ANNOUNCEMENT_POINTER,onClickPrimaryCta:o.complete,onClose:o.complete,onManualDismiss:o.complete,onboardingKey:"multiplayer-spotlight-nux-key",title:nF,trackingContextName:"multiplayer_spotlight_nudge",userFlagOnShow:"seen_spotlight_hint"})}var nU=n(857622),nV=n(588367),nH=n(865702),nz=n(543595);function nG(e){return(0,i.jsx)("div",{className:"connector_modal_wrapper--connectorModalWrapper--A4lhp",children:e.children})}var nK=n(951633),nW=n(967553),nq=n(772293),nX=n(772161),nY=n(620944);let nJ="onboard_figjam_viewer--contentContainer--yd4SI",nZ="onboard_figjam_viewer--imageContainer--ZHsBz",nQ="onboard_figjam_viewer--image--nH1ac",n$="onboard_figjam_viewer--mainContent--Gu7BD text--fontPos12Whyte--dR9EX text--_fontBaseWhyte--z-Ypd",n0="onboard_figjam_viewer--normal--GXjqq",n1="onboard_figjam_viewer--bold--JCPPy";class n2 extends r.PureComponent{render(){let e=(0,i.jsxs)(i.Fragment,{children:[this.props.buttonText,!this.props.buttonText&&this.props.steps&&this.props.steps.current===this.props.steps.total&&(0,j.tx)("rcs.rcs_shared.done"),!this.props.buttonText&&this.props.steps&&this.props.steps.current<this.props.steps.total&&(0,j.tx)("rcs.figjam_onboarding.next")]});return(0,i.jsxs)("div",{className:nJ,children:[(0,i.jsxs)("div",{style:nr.sx.add({width:`${this.props.imgContainerWidth}px`}).$,className:nZ,children:[(0,i.jsx)("span",{className:"onboard_figjam_viewer--imgHelper--2Z5qE","aria-hidden":"true"}),(0,i.jsx)("img",{className:nQ,src:this.props.imgSrc,alt:""})]}),(0,i.jsxs)("div",{className:nc()({[n$]:!0,[n0]:!this.props.isBold,[n1]:!!this.props.isBold}),children:[this.props.titleText&&(0,i.jsx)("div",{className:"onboard_figjam_viewer--title--wvdUQ",children:this.props.titleText}),(0,i.jsx)("div",{className:"onboard_figjam_viewer--text--LoMfL",children:this.props.bodyText}),(0,i.jsxs)("div",{className:"onboard_figjam_viewer--bottomContentRow--6c9wj",children:[(0,i.jsx)("div",{className:nc()({"onboard_figjam_viewer--secondaryText--fEDg4":!0,[n0]:!this.props.isBold,[n1]:!!this.props.isBold}),children:this.props.steps?(0,j.tx)("rcs.rcs_shared.step_counter",{currentStepNum:this.props.steps.current,totalNumSteps:this.props.steps.total}):(0,i.jsx)(i.Fragment,{})}),this.props.isBold?(0,i.jsx)(nY.J,{onClick:this.props.onNext,autoFocus:!0,children:e}):(0,i.jsx)(tU.$z,{onClick:this.props.onNext,children:e})]})]}),(0,i.jsx)("div",{className:"onboard_figjam_viewer--closeButton--BVHt8",children:(0,i.jsx)(b.K,{onClick:this.props.onDismiss,"aria-label":(0,j.t)("modal.close"),children:(0,i.jsx)(E.X,{className:this.props.isBold?n1:void 0})})})]})}}n2.displayName="FigJamOnboardingModal";var n5=n(887617);let n4=(0,ey.ck)("07ff49c75c8933ea70ff2e4776503291c31a35ef");function n3(e){let t=(0,nX.O)();(0,r.useEffect)(()=>(nq.Y5.triggerAction("set-tool-hand",null),()=>nq.Y5.triggerAction("set-tool-default",null)),[]),(0,r.useEffect)(()=>(t({eventName:"hand_tooltip_shown"}),()=>t({eventName:"pan_zoom_completed"})),[t]);let n=(0,nm.Un)();return(0,i.jsx)(nG,{children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:n5.N,topPadding:-6,hasShadow:e.hasShadow,children:(0,i.jsx)(n2,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("rcs.figjam_onboarding.use_the_hand_tool_and_drag_to_move_around_hold_space_to_activate_it_anytime",{spaceKey:(0,i.jsx)("b",{children:(0,j.tx)("rcs.figjam_onboarding.space")})})}),onNext:e.onClickPrimaryCta,steps:{current:2,total:n?2:3},onDismiss:()=>{e.dismissModal(),t({eventName:"hand_tooltip_dismissed"})},imgSrc:n4})})})}var n6=n(729844);let n7=(0,ey.ck)("4e36d3bbbf8633fef1b86238f66bb1bf54f54d2a");function n9(e){let t=o.Ay.mac?(0,j.t)("rcs.figjam_onboarding.cmd"):(0,j.t)("rcs.figjam_onboarding.ctrl"),n=(0,n6.k)()?-10:-3,a=(0,nm.Un)(),s=(0,nX.O)();return(0,r.useEffect)(()=>{s({eventName:"zoom_tooltip_shown"})},[s]),(0,i.jsx)(nG,{children:(0,i.jsx)(nK.Dv,{targetType:"dom",topPadding:n,targetKey:n5.q,hasShadow:e.hasShadow,children:(0,i.jsx)(n2,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("rcs.figjam_onboarding.pinch_to_zoom_on_a_trackpad_hold_command_while_scrolling_or_use",{commandKey:(0,i.jsx)("b",{children:t}),plusOrMinusKeys:(0,i.jsx)("b",{children:(0,j.tx)("rcs.figjam_onboarding.plus_or_minus")})})}),onNext:e.onClickPrimaryCta,steps:{current:1,total:a?2:3},onDismiss:()=>{e.dismissModal(),s({eventName:"zoom_tooltip_dismissed"})},imgSrc:n7})})})}function n8(e){return(0,i.jsx)(eG.h,{testId:e.testId?e.testId:"ZoomConnectorOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Zoom",element:n9,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ie(e){let t=(0,nm.Un)();return(0,i.jsx)(eG.h,{testId:e.testId?e.testId:"HandToolConnectorOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Hand Tool",userFlagOnShow:t?"figjam_editor_onboarded":void 0,element:n3,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let it=(0,ey.ck)("8f3066fc3906f11f2601a390725f2b7af58e01a1"),ii=[n8,ie,function(e){return(0,i.jsx)(eG.h,{testId:e.testId?e.testId:"ShareConnectorOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Share",userFlagOnShow:"figjam_editor_onboarded",element:e=>(0,i.jsx)(nG,{children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:eX.v4,topPadding:-6,children:(0,i.jsx)(n2,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("rcs.figjam_onboarding.invite_others_or_share_this_file_with_a_link_to_jam_with_your_team")}),onNext:e.onClickPrimaryCta,steps:{current:3,total:3},onDismiss:e.dismissModal,imgSrc:it})})}),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}];var ir=n(7857),ia=n(283114),is=n(900470),io=n(536955),il=n(634020),id=n(719749),ic=n(920675),iu=n(610604);function im({skipAccountCreationDateCheck:e=!1}){let t=(0,eB.aV)(),n=(0,tb.lg)(),i=(0,ei.q5)(),a=(0,S.md)(ek.mp),s=(0,id.bc)(iu.KMT,{currentOrgId:i?.parentOrgId||null});return r.useMemo(()=>il.Qw.all([a,s]).transform(i=>{let[r,a]=i,s=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(r),o=!!a.org?.k12GoogleOrg||(0,io.aA)(a.currentUser.profile?.jobTitle||"");return!t&&n===ic._Y.WHITEBOARD&&(e||s)&&o}),[a,s,n,t,e])}let ip=(0,ey.ck)("db6976747d085e1350d443cd04b08e7ba979b86b");function ih({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return(0,i.jsx)(_.M,{isShowing:e,children:(0,i.jsx)(h.fu,{name:"Share to Google Classroom New User Onboarding",children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:"share",isBold:!0,topPadding:-6,autoWidth:!0,children:(0,i.jsx)(n2,{isBold:!0,titleText:(0,j.tx)("whiteboard.google_classroom.onboarding.new_user.header"),bodyText:(0,j.tx)("whiteboard.google_classroom.onboarding.new_user.body"),buttonText:(0,j.tx)("whiteboard.google_classroom.onboarding.show_me"),onNext:t,onDismiss:n,imgSrc:ip,imgContainerWidth:105})})})})}function ig({isShowing:e,onClose:t}){return(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,i.jsx)("div",{children:(0,j.tx)("whiteboard.google_classroom.pointer.body")}),disableHighlight:!0,emphasized:!0,isShowing:e,onClose:t,onTargetLost:t,targetKey:io.pb,trackingContextName:"Share to Google Classroom Share Option Pointer",zIndex:eN.R.MODAL})}let ix="seen_figjam_share_to_google_classroom_existing_user_onboarding",i_=(0,eT.r1)(ix),iy="seen_figjam_share_to_google_classroom_new_user_onboarding",ib=(0,eT.r1)(iy),iv=(0,eT.r1)("has_shared_to_google_classroom"),iC=(0,eT.r1)("figjam_editor_onboarded"),iE="start_share_to_classroom_new_user_onboarding";function iw(){return(0,i.jsx)(ir.u9,{label:"ShareToGoogleClassroomNewUserOnboarding",children:(0,i.jsx)(ik,{})})}function ik(){let e=(0,m.wA)(),t=im({skipAccountCreationDateCheck:!0}),n=(0,S.md)(i_),a=(0,S.md)(ib),s=(0,S.md)(iv),o=(0,S.md)(io.Ij),{show:l,isShowing:d,complete:c,uniqueId:u}=(0,f.e)({overlay:y.DKg,priority:g.N.OVERRIDING_MODAL},[a,n,s,t]);(0,ew.E)(u,iE,()=>{l({onShow:()=>{e(p.b({[iy]:!0}))},canShow:(e,t,n,i)=>!e&&!t&&!n&&i})}),r.useEffect(()=>{n.data&&c()},[n,c]);let{currentStep:h,next:x}=(0,eU.A)({numSteps:2,onComplete:c}),_=function({isShowing:e,next:t,complete:n}){let r=(0,m.wA)(),a=(0,ei.q5)();return[(0,i.jsx)(ih,{isShowing:e,onPrimaryCtaClick:()=>{if(!a){n();return}r((0,ev.to)({type:is.g_,data:{fileKey:a.key,source:ia.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n},"share-to-google-classroom-new-user-callout"),(0,i.jsx)(ig,{isShowing:e,onClose:n},"share-to-google-classroom-share-option-pointer")]}({isShowing:d,next:x,complete:c});return r.useEffect(()=>{o&&d&&0===h&&x()},[h,d,o,x]),(0,i.jsx)(ez.U,{currentStep:h,isShowing:d,children:_})}function iT(e){let t=(0,m.wA)();return()=>{t(p.b({figjam_editor_onboarded:!0})),e()}}function ij({overlayUniqueId:e,afterReset:t}){let n=(0,m.wA)();(0,ew.E)(e,"Reset Onboarding",()=>{n(p.b({figjam_editor_onboarded:!1,figjam_browse_templates_modal_onboarded:!1,figjam_browse_templates_modal_onboarding_item_selected:!1})),t&&t()})}function iS({steps:e,onComplete:t,isShowing:n,overlayUniqueId:a}){let{currentStep:s,next:o,reset:l}=(0,eU.A)({numSteps:e.length,onComplete:t});return ij({overlayUniqueId:a,afterReset:l}),(0,i.jsx)(ez.U,{currentStep:s,isShowing:n,children:r.useMemo(()=>e.map((e,i)=>r.createElement(e,{onClickPrimaryCta:o,onClose:nH.lQ,onManualDismiss:t,isShowing:n,key:i})),[o,t,n,e])})}var iI=n(798302),iA=n(827081),iN=n(295870),iM=n(649109),iR=n(726577),iP=n(425179),iO=n(733200),iD=n(732108),iL=n(943866),iF=n(129416),iB=n(259714),iU=n(287736),iV=n(754273),iH=n(62440),iz=n(641172),iG=n(496849),iK=n(639605),iW=n(105641),iq=n(938241),iX=n(591600),iY=n(994831),iJ=n(395050),iZ=n(302711),iQ=n(846803),i$=n(387870),i0=n(890305),i1=n(450255),i2=n(776492),i5=n(60021),i4=n(388899);function i3({onClickPrimaryCta:e,useCase:t}){let n=(0,ei.q5)(),i=(0,m.wA)(),a=(0,nX.O)();return{onNext:(0,r.useCallback)(()=>{n&&(i((0,ev.to)({type:is.g_,data:{fileKey:n.key,source:ia.nk.expFigJamOnboardingShareVariant}})),(0,nz.YQ)({id:"open share modal"}),a({eventName:"share_board_clicked",useCase:t})),e()},[n,i,e,a,t])}}let i6="make_something_assets--svg---KjK3",i7="make_something_assets--svgHovered--C98FQ",i9="make_something_assets--transformable--6XdUH",i8="make_something_assets--transformLeftBrainstorm--7fHr4",re="make_something_assets--transformRightBrainstorm--US03Y",rt="make_something_assets--transformLeftUpdates--ig-g0",rn="make_something_assets--transformRightUpdates--39xip",ri="make_something_assets--transformLeftPlanning--Q07QD",rr="make_something_assets--transformRightPlanning--tQ3Y1",ra="make_something_assets--transformRightDiagramming--qwYqa";function rs(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",className:nc()(i6,{[i7]:e.hovered}),children:[(0,i.jsx)("rect",{x:"27.1868",y:"27.8497",width:"141.626",height:"142.374",fill:"#E5F4FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsx)("rect",{x:"27.1868",y:"3.18684",width:"141.626",height:"19.8053",fill:"#0D99FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsxs)("g",{filter:"url(#filter0_d_351_43460)",children:[(0,i.jsx)("rect",{x:"37.4653",y:"38.1284",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"37.6522",y:"38.3153",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsxs)("g",{filter:"url(#filter1_d_351_43460)",children:[(0,i.jsx)("rect",{x:"124.157",y:"81",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"124.344",y:"81.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsxs)("g",{filter:"url(#filter2_d_351_43460)",children:[(0,i.jsx)("rect",{x:"81",y:"38",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),(0,i.jsx)("rect",{x:"81.1868",y:"38.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsxs)("g",{filter:"url(#filter3_d_351_43460)",children:[(0,i.jsx)("rect",{x:"80.8096",y:"123.326",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),(0,i.jsx)("rect",{x:"80.9964",y:"123.513",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("rect",{x:"84.9214",y:"128.181",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"40.8262",y:"42.2361",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"129.021",y:"85.1079",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"129.021",y:"100.057",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"40.8262",y:"49.7126",width:"18.3105",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"129.021",y:"92.584",width:"20.9263",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("path",{d:"M87.4033 45.8193C88.2079 46.4289 88.9008 47.0959 89.6122 47.8073",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M97.5591 43.8335V48.0303",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M103.975 49.5765C106.065 48.776 108.231 47.9817 110.38 47.3677",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M103.748 57.5273H109.491",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M98.8926 62.6094V67.4688",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M90.1268 58.5264C89.2081 59.2528 88.1169 59.8811 87.2876 60.7104",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),(0,i.jsxs)("g",{filter:"url(#filter4_d_351_43460)",children:[(0,i.jsx)("rect",{x:"81",y:"80.7251",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"81.1868",y:"80.9119",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("path",{d:"M108.795 102.748L108.954 102.837L109.047 102.681L109.454 101.997C109.755 101.492 110.248 101.121 110.825 100.966C111.402 100.812 112.014 100.886 112.527 101.173C113.039 101.459 113.41 101.933 113.559 102.489C113.708 103.046 113.625 103.642 113.324 104.146L113.324 104.146L112.957 104.763L112.957 104.763L110.552 108.797L105.825 106.155C105.313 105.869 104.942 105.395 104.793 104.839C104.644 104.282 104.728 103.687 105.028 103.183C105.329 102.678 105.821 102.308 106.398 102.153C106.975 101.998 107.587 102.073 108.1 102.36L108.795 102.748Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsx)("path",{d:"M116.865 94.0866L116.958 94.2427L117.116 94.154L117.811 93.7653C118.324 93.4788 118.936 93.4037 119.513 93.5582C120.09 93.7127 120.583 94.0836 120.884 94.5878C121.185 95.0918 121.269 95.6876 121.12 96.2442C120.971 96.8009 120.6 97.2749 120.088 97.5613L120.088 97.5614L119.461 97.9124L119.461 97.9125L115.362 100.203L112.589 95.5518C112.288 95.0478 112.204 94.4522 112.353 93.8958C112.502 93.3393 112.873 92.8655 113.385 92.5793C113.897 92.293 114.51 92.2181 115.087 92.3727C115.664 92.5273 116.156 92.8982 116.457 93.4024L116.865 94.0866Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsxs)("g",{filter:"url(#filter5_d_351_43460)",className:nc()(i9,re),children:[(0,i.jsx)("rect",{x:"124",y:"37.761",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"124.187",y:"37.9478",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("path",{d:"M131.262 57.6483C132.364 58.2951 133.535 59.063 134.814 59.2976C138.578 59.9876 139.728 56.6784 139.99 53.525C140.181 51.2338 140.49 47.2706 137.707 46.3822C135.469 45.668 135.63 48.5222 135.525 50.0614C135.198 54.8126 139.249 59.0839 144.177 57.7244C145.893 57.251 147.804 55.2775 148.694 53.7787C149.217 52.8971 149.432 51.8588 149.988 51.0257",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round",className:nc()(i9,re)}),(0,i.jsx)("circle",{cx:"150.532",cy:"37.7597",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684",className:nc()(i9,re)}),(0,i.jsxs)("g",{filter:"url(#filter6_d_351_43460)",className:nc()(i9,i8),children:[(0,i.jsx)("rect",{x:"37",y:"81.208",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),(0,i.jsx)("rect",{x:"37.1868",y:"81.3948",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})]}),(0,i.jsx)("rect",{className:nc()(i9,i8),x:"41.8633",y:"87.5618",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{className:nc()(i9,i8),cx:"70.6325",cy:"98.0258",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsx)("circle",{className:nc()(i9,i8),cx:"61.2902",cy:"106.617",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_351_43460",x:"37.4653",y:"38.1284",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter1_d_351_43460",x:"124.157",y:"81",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter2_d_351_43460",x:"81",y:"38",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter3_d_351_43460",x:"80.8096",y:"123.326",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter4_d_351_43460",x:"81",y:"80.7251",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter5_d_351_43460",x:"124",y:"37.761",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter6_d_351_43460",x:"37",y:"81.208",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.747368",dy:"0.747368"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})]})]})]})}function ro(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",className:nc()(i6,{[i7]:e.hovered}),children:[(0,i.jsx)("rect",{width:"196",height:"121.761",fill:"white"}),(0,i.jsx)("rect",{x:"27.183",y:"49.6627",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"31.7598",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"58.6556",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"76.5885",y:"49.6627",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"80.7957",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"109.161",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"76.5888",y:"3.18299",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFCD29",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"80.7959",y:"12.8804",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"110.261",cy:"15.2623",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"125.631",y:"130.178",width:"43.0186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"27.183",y:"89.9188",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"33.5896",y:"99.6157",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"60.4899",cy:"101.998",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_351_43276)",children:[(0,i.jsx)("path",{d:"M61.0894 105.123C60.3396 105.1 59.722 104.946 59.1311 104.674C58.9431 104.588 58.7461 104.522 58.5542 104.448C58.3001 104.35 58.0777 104.2 57.9633 103.952C57.7015 103.384 57.427 102.818 57.2237 102.227C57.0344 101.676 57.1513 101.125 57.4918 100.655C57.7562 100.29 57.9163 99.8986 58.0319 99.4665C58.1742 98.9366 58.5669 98.643 59.1006 98.5287C59.3459 98.4766 59.5785 98.4931 59.8123 98.5833C60.0296 98.6672 60.2545 98.6812 60.482 98.6189C60.9039 98.5032 61.2889 98.6227 61.6663 98.8044C61.843 98.8883 62.0234 98.9772 62.2128 99.0192C62.8367 99.1564 63.157 99.5669 63.2421 100.164C63.284 100.46 63.2599 100.769 63.2383 101.07C63.2192 101.333 63.2472 101.582 63.331 101.83C63.5483 102.473 63.5153 103.102 63.2179 103.716C63.0362 104.092 62.7389 104.346 62.378 104.541C62.1251 104.677 61.8735 104.816 61.6282 104.966C61.43 105.087 61.2177 105.129 61.0894 105.123ZM61.083 104.886C61.2787 104.889 61.4274 104.827 61.6269 104.673C61.7616 104.57 61.9218 104.499 62.0704 104.415C62.2458 104.317 62.4517 104.251 62.594 104.118C63.1989 103.548 63.3361 102.819 63.1328 102.055C63.0019 101.562 62.9625 101.089 63.0197 100.591C63.0934 99.9405 62.7376 99.4512 62.1136 99.2784C61.8976 99.2187 61.6905 99.117 61.4872 99.0192C61.2266 98.8946 60.9585 98.7866 60.6713 98.8553C60.2977 98.9442 59.9419 98.9163 59.5835 98.7955C59.4666 98.7561 59.3345 98.7206 59.215 98.7345C58.7347 98.7904 58.3979 99.0738 58.2772 99.5237C58.1463 100.013 57.9264 100.439 57.6545 100.859C57.3724 101.296 57.2974 101.795 57.4982 102.297C57.6964 102.793 57.9125 103.284 58.126 103.774C58.2314 104.018 58.417 104.181 58.6673 104.274C58.9037 104.362 59.1426 104.444 59.3726 104.547C59.8796 104.772 60.4172 104.848 61.083 104.886Z",fill:"black"}),(0,i.jsx)("path",{d:"M60.5404 103.175C60.0016 103.198 59.5072 103.112 59.1222 102.711C59.0561 102.642 58.9938 102.566 58.9544 102.481C58.9354 102.441 58.9189 102.367 58.9926 102.326C59.0383 102.3 59.0968 102.327 59.1336 102.355C59.2264 102.424 59.3039 102.514 59.3979 102.583C59.8402 102.909 60.3294 103.011 60.8593 102.856C61.1275 102.778 61.3143 102.581 61.4795 102.365C61.5405 102.286 61.6078 102.167 61.7184 102.25C61.8289 102.333 61.7298 102.435 61.6726 102.511C61.3842 102.895 61.036 103.177 60.5404 103.175Z",fill:"black"}),(0,i.jsx)("path",{d:"M62.2294 101.088C62.2281 101.243 62.1099 101.367 61.9701 101.365C61.8253 101.362 61.7045 101.234 61.7083 101.088C61.7122 100.928 61.824 100.801 61.96 100.803C62.1124 100.805 62.2319 100.93 62.2294 101.088Z",fill:"black"}),(0,i.jsx)("path",{d:"M58.9061 101.294C58.9048 101.449 58.7867 101.573 58.6469 101.571C58.502 101.568 58.3813 101.44 58.3851 101.294C58.3889 101.134 58.5007 101.007 58.6367 101.009C58.7879 101.01 58.9074 101.136 58.9061 101.294Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M96.5399 30.8149C96.5399 30.6128 96.7037 30.449 96.9058 30.449C97.108 30.449 97.2718 30.6128 97.2718 30.8149H96.5399ZM147.121 45.7131C146.978 45.856 146.747 45.856 146.604 45.7131L144.275 43.384C144.132 43.241 144.132 43.0093 144.275 42.8664C144.418 42.7234 144.649 42.7234 144.792 42.8664L146.863 44.9367L148.933 42.8664C149.076 42.7234 149.308 42.7234 149.45 42.8664C149.593 43.0093 149.593 43.241 149.45 43.384L147.121 45.7131ZM97.2718 30.8149V33.1938H96.5399V30.8149H97.2718ZM101.298 37.2196H142.471V37.9516H101.298V37.2196ZM147.229 41.9774V45.4543H146.497V41.9774H147.229ZM142.471 37.2196C145.098 37.2196 147.229 39.3498 147.229 41.9774H146.497C146.497 39.754 144.694 37.9516 142.471 37.9516V37.2196ZM97.2718 33.1938C97.2718 35.4172 99.0742 37.2196 101.298 37.2196V37.9516C98.67 37.9516 96.5399 35.8215 96.5399 33.1938H97.2718Z",fill:"black"}),(0,i.jsx)("path",{d:"M97.2684 30.8149C97.2684 30.6128 97.1045 30.449 96.9024 30.449C96.7002 30.449 96.5364 30.6128 96.5364 30.8149H97.2684ZM46.5039 45.7131C46.6468 45.856 46.8786 45.856 47.0215 45.7131L49.3506 43.384C49.4935 43.241 49.4935 43.0093 49.3506 42.8664C49.2077 42.7234 48.9759 42.7234 48.833 42.8664L46.7627 44.9367L44.6924 42.8664C44.5495 42.7234 44.3177 42.7234 44.1748 42.8664C44.0319 43.0093 44.0319 43.241 44.1748 43.384L46.5039 45.7131ZM96.5364 30.8149V33.1938H97.2684V30.8149H96.5364ZM92.5106 37.2196H51.1545V37.9516H92.5106V37.2196ZM46.3967 41.9774V45.4543H47.1287V41.9774H46.3967ZM51.1545 37.2196C48.5268 37.2196 46.3967 39.3498 46.3967 41.9774H47.1287C47.1287 39.754 48.9311 37.9516 51.1545 37.9516V37.2196ZM96.5364 33.1938C96.5364 35.4172 94.734 37.2196 92.5106 37.2196V37.9516C95.1382 37.9516 97.2684 35.8215 97.2684 33.1938H96.5364Z",fill:"black"}),(0,i.jsx)("path",{d:"M97.2686 30.6304C97.2686 30.4282 97.1047 30.2644 96.9026 30.2644C96.7005 30.2644 96.5366 30.4282 96.5366 30.6304H97.2686ZM96.6438 46.0775C96.7867 46.2204 97.0185 46.2204 97.1614 46.0775L99.4905 43.7484C99.6334 43.6054 99.6334 43.3737 99.4905 43.2308C99.3476 43.0879 99.1158 43.0879 98.9729 43.2308L96.9026 45.3011L94.8323 43.2308C94.6894 43.0879 94.4576 43.0879 94.3147 43.2308C94.1718 43.3737 94.1718 43.6054 94.3147 43.7484L96.6438 46.0775ZM96.5366 30.6304V45.8187H97.2686V30.6304H96.5366Z",fill:"black"}),(0,i.jsxs)("g",{clipPath:"url(#clip1_351_43276)",children:[(0,i.jsx)("path",{d:"M58.8788 58.1369C59.7645 58.1496 60.4813 58.5105 61.1522 59.0925C62.5348 60.2921 62.6352 63.1971 60.4584 64.5085C58.9563 65.4133 56.9612 64.9838 55.998 63.3356C54.9331 61.5146 55.7781 59.0887 57.7364 58.3465C58.1036 58.2068 58.4836 58.133 58.8788 58.1369ZM61.8321 61.2731C61.8524 60.625 61.5258 59.874 60.9565 59.2831C60.2271 58.527 59.2867 58.2677 58.2511 58.5079C56.3449 58.9476 55.3105 61.1016 56.1263 62.9023C56.7032 64.1756 58.0592 64.8885 59.3554 64.6C60.8155 64.2747 61.8384 62.9874 61.8321 61.2731Z",fill:"black"}),(0,i.jsx)("path",{d:"M61.0418 62.2874C60.6491 63.2747 59.9489 63.8517 58.8903 63.8644C57.983 63.8746 57.3159 63.426 56.9105 62.5885C56.8851 62.6 56.8546 62.6152 56.8253 62.6254C56.7834 62.6406 56.7593 62.6508 56.7211 62.6025C56.7033 62.5796 56.6754 62.539 56.7275 62.497C56.8558 62.3916 56.9943 62.3001 57.1341 62.2124C57.1557 62.1984 57.2066 62.1971 57.2358 62.2416C57.2676 62.2912 57.2472 62.3229 57.2282 62.3484C57.1926 62.3954 57.1418 62.431 57.0909 62.4754C57.5764 63.2188 58.2232 63.6661 59.1483 63.5734C59.9641 63.492 60.5716 62.8872 60.794 62.1743C60.8041 62.1425 60.7685 62.1196 60.7342 62.0777C60.6771 62.0103 60.6377 61.9989 60.7025 61.8909C60.7495 61.8235 60.8219 61.8629 60.8639 61.8845C60.9973 61.9544 61.1294 62.0319 61.2464 62.126C61.2921 62.1628 61.376 62.2175 61.3213 62.3153C61.2705 62.4144 61.2006 62.3496 61.118 62.3255C61.0951 62.3153 61.0723 62.3013 61.0418 62.2874Z",fill:"black"}),(0,i.jsx)("path",{d:"M57.3933 60.2757C57.4657 60.1588 57.5445 60.066 57.6881 60.0953C57.8254 60.1232 57.8813 60.2427 57.8825 60.3532C57.8864 60.5718 57.8825 60.7967 57.8343 61.009C57.7847 61.2275 57.683 61.4359 57.5928 61.6431C57.5293 61.7892 57.4289 61.8184 57.3196 61.7117C56.9689 61.3661 56.7566 60.9518 56.7795 60.446C56.7859 60.3024 56.8634 60.1842 57.007 60.1359C57.162 60.0838 57.2815 60.155 57.3933 60.2757ZM57.6754 60.2999C57.6754 60.2999 57.6475 60.2592 57.6004 60.2732C57.5649 60.2706 57.5255 60.4219 57.5026 60.5019C57.481 60.5769 57.4848 60.6315 57.4314 60.6404C57.3463 60.6481 57.3526 60.5756 57.3171 60.54C57.3005 60.5223 57.2205 60.2961 57.1061 60.338C57.0324 60.3647 57.0286 60.4727 57.0324 60.5375C57.0502 60.8666 57.2001 61.1487 57.378 61.4512C57.5407 61.0611 57.7834 60.5375 57.6754 60.2999Z",fill:"black"}),(0,i.jsx)("path",{d:"M60.2957 60.1701C60.3885 60.118 60.4761 60.0736 60.5626 60.0914C60.6909 60.118 60.7163 60.2527 60.7278 60.3697C60.7646 60.742 60.6032 61.0571 60.4291 61.3672C60.3897 61.4371 60.3338 61.4981 60.297 61.5705C60.1915 61.7764 60.0098 61.7383 59.9094 61.5616C59.6997 61.1893 59.5802 60.7801 59.6184 60.3442C59.6323 60.1778 59.6946 60.0189 59.8789 59.9757C60.0644 59.93 60.2258 60.0469 60.2957 60.1701ZM60.067 61.3837C60.086 61.474 60.1051 61.4041 60.1229 61.3863C60.2499 61.1957 60.3783 61.005 60.4533 60.7954C60.5117 60.6314 60.6655 60.2159 60.5041 60.2578C60.4647 60.2604 60.424 60.3811 60.3897 60.4421C60.3618 60.4904 60.3046 60.5679 60.2804 60.5717C60.1877 60.5742 60.1991 60.4904 60.1813 60.4421C60.1394 60.3328 60.1432 60.1612 59.9869 60.1816C59.8319 60.2019 59.8497 60.3735 59.87 60.4853C59.9234 60.7865 59.9996 61.0851 60.067 61.3837Z",fill:"black"})]}),(0,i.jsxs)("g",{clipPath:"url(#clip2_351_43276)",children:[(0,i.jsx)("path",{d:"M106.15 61.4002C106.19 60.3696 106.623 59.3517 107.641 58.6439C107.894 58.4685 108.194 58.3541 108.485 58.2436C110.078 57.6387 112.02 58.7328 112.438 60.7102C112.736 62.1156 112.387 63.3546 111.281 64.3014C109.773 65.5912 107.534 65.1172 106.591 63.3432C106.3 62.7917 106.153 62.2046 106.15 61.4002ZM109.218 64.6076C109.862 64.6089 110.388 64.4424 110.809 64.1489C112.465 62.9912 112.596 60.3836 111.064 59.062C110.367 58.4596 109.556 58.302 108.681 58.4965C108.409 58.5575 108.146 58.715 107.913 58.879C106.537 59.8511 106.176 61.8602 107.116 63.3127C107.638 64.1209 108.377 64.5784 109.218 64.6076Z",fill:"black"}),(0,i.jsx)("path",{d:"M108.781 63.6393C108.761 63.6736 108.735 63.708 108.716 63.7384C108.668 63.816 108.644 63.8439 108.552 63.8122C108.484 63.7728 108.498 63.6863 108.515 63.6393C108.564 63.5072 108.627 63.3801 108.701 63.2594C108.73 63.2111 108.787 63.1247 108.847 63.1526C108.893 63.1806 108.927 63.1971 108.888 63.3305C108.88 63.3559 108.871 63.3864 108.858 63.4271C109.174 63.586 109.496 63.6037 109.829 63.5237C110.313 63.4068 110.757 63.0421 111.012 62.5935C111.119 62.4054 111.164 62.225 111.222 61.9975C111.235 61.9505 111.269 61.8717 111.247 61.8577C111.218 61.8399 111.183 61.817 111.141 61.7992C111.059 61.7662 111.067 61.7052 111.084 61.6658C111.111 61.5972 111.165 61.5896 111.198 61.5985C111.387 61.6468 111.574 61.7078 111.758 61.7713C111.784 61.7802 111.818 61.8081 111.805 61.8691C111.791 61.9327 111.749 61.9441 111.713 61.9505C111.655 61.9606 111.593 61.9454 111.517 61.939C111.493 62.042 111.471 62.15 111.441 62.2542C111.208 63.0649 110.709 63.6139 109.876 63.8274C109.542 63.9125 109.203 63.8477 108.781 63.6393Z",fill:"black"}),(0,i.jsx)("path",{d:"M110.475 60.4918C110.475 60.3914 110.46 60.2859 110.481 60.1906C110.495 60.1296 110.527 60.0368 110.611 60.0381C110.692 60.0394 110.753 60.0991 110.772 60.1525C110.894 60.4994 110.944 60.859 110.894 61.2237C110.89 61.3216 110.795 61.38 110.752 61.38C110.674 61.38 110.597 61.3279 110.575 61.2377C110.517 60.9937 110.464 60.493 110.475 60.4918Z",fill:"black"}),(0,i.jsx)("path",{d:"M107.785 60.4853C107.791 60.4243 107.829 60.3175 107.921 60.2997C108.017 60.2743 108.052 60.39 108.063 60.4408C108.118 60.6848 108.104 60.639 108.132 60.9809C108.134 61.005 108.143 61.4129 108.133 61.5235C108.123 61.6404 108.059 61.6989 108.002 61.7014C107.894 61.7078 107.86 61.6353 107.836 61.5502C107.761 61.2909 107.725 61.0279 107.785 60.4853Z",fill:"black"})]}),(0,i.jsxs)("g",{clipPath:"url(#clip3_351_43276)",children:[(0,i.jsx)("path",{d:"M111.595 18.3869C110.845 18.364 110.227 18.2102 109.637 17.9383C109.448 17.8519 109.251 17.7858 109.06 17.7121C108.805 17.6142 108.583 17.4643 108.469 17.2165C108.207 16.6485 107.932 16.0817 107.729 15.4908C107.54 14.9405 107.657 14.389 107.997 13.9188C108.262 13.5541 108.422 13.1627 108.537 12.7307C108.68 12.2007 109.072 11.9072 109.606 11.7928C109.851 11.7407 110.084 11.7572 110.318 11.8475C110.535 11.9313 110.76 11.9453 110.987 11.883C111.409 11.7674 111.794 11.8869 112.172 12.0686C112.348 12.1525 112.529 12.2414 112.718 12.2833C113.342 12.4206 113.662 12.831 113.747 13.4283C113.789 13.7244 113.765 14.0332 113.744 14.3344C113.725 14.5974 113.753 14.8465 113.836 15.0943C114.054 15.7373 114.021 16.3663 113.723 16.9801C113.542 17.3563 113.244 17.6104 112.883 17.8049C112.63 17.9408 112.379 18.0806 112.134 18.2306C111.935 18.3513 111.723 18.3932 111.595 18.3869ZM111.588 18.1505C111.784 18.1531 111.933 18.0908 112.132 17.937C112.267 17.8341 112.427 17.7629 112.576 17.6791C112.751 17.5812 112.957 17.5151 113.099 17.3817C113.704 16.8124 113.842 16.083 113.638 15.3192C113.507 14.8262 113.468 14.3534 113.525 13.8553C113.599 13.2047 113.243 12.7154 112.619 12.5426C112.403 12.4829 112.196 12.3812 111.993 12.2833C111.732 12.1588 111.464 12.0508 111.177 12.1194C110.803 12.2084 110.447 12.1804 110.089 12.0597C109.972 12.0203 109.84 11.9847 109.72 11.9987C109.24 12.0546 108.903 12.338 108.783 12.7878C108.652 13.2771 108.432 13.7028 108.16 14.1234C107.878 14.5606 107.803 15.0587 108.004 15.5607C108.202 16.0575 108.418 16.5481 108.631 17.0386C108.737 17.2826 108.922 17.4452 109.173 17.538C109.409 17.6257 109.648 17.7083 109.878 17.8112C110.385 18.0361 110.923 18.1124 111.588 18.1505Z",fill:"black"}),(0,i.jsx)("path",{d:"M111.046 16.4389C110.507 16.4618 110.013 16.3766 109.628 15.975C109.561 15.9064 109.499 15.8302 109.46 15.745C109.441 15.7056 109.424 15.6307 109.498 15.59C109.544 15.5646 109.602 15.5913 109.639 15.6192C109.732 15.6878 109.809 15.7781 109.903 15.8467C110.346 16.1733 110.835 16.2749 111.365 16.1199C111.633 16.0424 111.82 15.8454 111.985 15.6294C112.046 15.5506 112.113 15.4312 112.224 15.5138C112.334 15.5976 112.235 15.6993 112.178 15.7755C111.89 16.1593 111.541 16.4414 111.046 16.4389Z",fill:"black"}),(0,i.jsx)("path",{d:"M112.735 14.3521C112.733 14.5071 112.615 14.6316 112.475 14.6291C112.331 14.6266 112.21 14.4982 112.214 14.3521C112.218 14.192 112.329 14.0649 112.465 14.0674C112.618 14.0687 112.737 14.1945 112.735 14.3521Z",fill:"black"}),(0,i.jsx)("path",{d:"M109.411 14.5579C109.41 14.7129 109.292 14.8375 109.152 14.8349C109.007 14.8324 108.887 14.704 108.89 14.5579C108.894 14.3978 109.006 14.2707 109.142 14.2732C109.293 14.2745 109.413 14.4003 109.411 14.5579Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M48.5913 77.6602C48.5913 77.458 48.4275 77.2942 48.2253 77.2942C48.0232 77.2942 47.8594 77.458 47.8594 77.6602H48.5913ZM47.9666 85.6046C48.1095 85.7475 48.3412 85.7475 48.4841 85.6046L50.8132 83.2755C50.9562 83.1326 50.9562 82.9008 50.8132 82.7579C50.6703 82.615 50.4386 82.615 50.2957 82.7579L48.2253 84.8282L46.155 82.7579C46.0121 82.615 45.7804 82.615 45.6375 82.7579C45.4945 82.9008 45.4945 83.1326 45.6375 83.2755L47.9666 85.6046ZM47.8594 77.6602V85.3458H48.5913V77.6602H47.8594Z",fill:"black"}),(0,i.jsx)("rect",{x:"125.264",y:"50.1747",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983",className:nc()(i9,ra)}),(0,i.jsx)("rect",{x:"131.664",y:"59.8726",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2",className:nc()(i9,ra)}),(0,i.jsx)("circle",{cx:"158.567",cy:"62.2545",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983",className:nc()(i9,ra)}),(0,i.jsxs)("g",{clipPath:"url(#clip4_351_43276)",className:nc()(i9,ra),children:[(0,i.jsx)("path",{d:"M156.152 60.7639C156.525 60.325 156.935 59.9056 157.388 59.5486C157.703 59.3 157.811 59.2875 157.985 59.2403C158.032 59.2278 158.074 59.1986 158.114 59.1695C159.805 57.9764 161.959 58.8222 162.375 60.9278C162.652 62.325 161.939 63.7125 160.714 64.2792C160.695 64.2889 160.666 64.2917 160.656 64.307C160.413 64.6875 159.918 64.8347 159.617 64.9097C159.556 64.932 159.509 64.9958 159.453 65.0375C159.41 65.0695 159.367 65.1042 159.318 65.1264C157.725 65.8653 156.013 64.8764 155.638 63.2403C155.585 63.0097 155.353 61.6181 156.152 60.7639ZM159.47 64.1903C160.038 64.1875 160.409 64.0945 160.741 63.9125C162.338 63.0361 162.577 60.6556 161.171 59.4931C160.366 58.8278 159.335 58.7153 158.43 59.3528C157.353 60.1097 156.963 61.6611 157.566 62.8333C157.999 63.6764 158.686 64.1417 159.47 64.1903ZM160.013 64.55C160.082 64.525 160.092 64.507 160.081 64.4986C160.081 64.4986 160.052 64.4986 160.003 64.5C158.753 64.5945 157.813 64.0972 157.256 62.9764C156.711 61.882 156.843 60.807 157.486 59.7778C157.435 59.8028 157.393 59.8333 157.356 59.8681C156.489 60.6528 156.234 61.982 156.734 63.1181C157.195 64.1667 158.163 64.7889 159.252 64.7111C159.507 64.6931 159.759 64.6056 160.013 64.55ZM156.342 60.9472C156.343 60.907 156.306 60.957 156.3 60.9639C156.281 60.9903 156.261 61.0181 156.245 61.0458C156.016 61.432 155.873 61.85 155.853 62.2986C155.807 63.3208 156.166 64.1681 157.031 64.7458C157.606 65.1306 158.245 65.2097 158.913 65.0014C157.936 64.9028 157.175 64.45 156.661 63.6139C156.148 62.7806 156.066 61.8861 156.342 60.9472Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.525 61.8376C160.717 61.8445 160.78 61.9445 160.717 62.1251C160.561 62.5695 160.124 62.7862 159.678 62.6307C159.414 62.5376 159.207 62.3682 159.064 62.1265C158.955 61.9404 159.003 61.8334 159.218 61.8195C159.443 61.8043 160.316 61.8293 160.525 61.8376ZM160.482 62.0543C160.099 62.0543 159.725 62.0543 159.348 62.0543C159.731 62.5001 160.298 62.5084 160.482 62.0543Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.963 61.0499C158.964 61.2666 158.756 61.4638 158.528 61.4624C158.33 61.461 158.191 61.2819 158.189 61.0916C158.186 60.9013 158.381 60.7138 158.595 60.7082C158.8 60.7013 158.963 60.8513 158.963 61.0499ZM158.546 60.9124C158.443 60.9291 158.411 61.0263 158.42 61.0999C158.431 61.2069 158.511 61.2332 158.561 61.2346C158.609 61.236 158.702 61.1888 158.721 61.0971C158.746 61.0041 158.693 60.8777 158.546 60.9124Z",fill:"black"}),(0,i.jsx)("path",{d:"M161.617 61.1082C161.614 61.318 161.466 61.4721 161.267 61.4707C161.053 61.4694 160.899 61.2957 160.906 61.0638C160.912 60.8624 161.062 60.7069 161.248 60.711C161.441 60.7166 161.62 60.9082 161.617 61.1082ZM161.425 61.1027C161.425 60.9957 161.368 60.9235 161.28 60.9235C161.225 60.9235 161.134 60.9652 161.134 61.0791C161.134 61.2777 161.28 61.2666 161.28 61.2666C161.357 61.2638 161.425 61.2319 161.425 61.1027Z",fill:"black"})]}),(0,i.jsx)("rect",{x:"125.259",y:"90.4347",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsx)("rect",{x:"131.662",y:"100.132",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("circle",{cx:"158.562",cy:"102.514",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),(0,i.jsxs)("g",{clipPath:"url(#clip5_351_43276)",children:[(0,i.jsx)("path",{d:"M155.773 101.196C156.115 100.794 156.49 100.41 156.904 100.084C157.192 99.8563 157.291 99.8449 157.45 99.8017C157.493 99.7903 157.532 99.7636 157.568 99.7369C159.115 98.6453 161.086 99.4192 161.467 101.346C161.72 102.624 161.068 103.894 159.947 104.412C159.93 104.421 159.903 104.424 159.894 104.437C159.672 104.786 159.219 104.92 158.943 104.989C158.887 105.009 158.844 105.068 158.793 105.106C158.754 105.135 158.715 105.167 158.67 105.187C157.213 105.863 155.646 104.958 155.303 103.462C155.254 103.251 155.042 101.977 155.773 101.196ZM158.809 104.331C159.328 104.328 159.668 104.243 159.971 104.077C161.433 103.275 161.651 101.097 160.365 100.033C159.628 99.4243 158.685 99.3213 157.857 99.9046C156.872 100.597 156.515 102.017 157.066 103.089C157.463 103.861 158.092 104.286 158.809 104.331ZM159.306 104.66C159.369 104.637 159.378 104.62 159.368 104.613C159.368 104.613 159.341 104.613 159.297 104.614C158.153 104.701 157.293 104.246 156.783 103.22C156.285 102.219 156.406 101.235 156.994 100.293C156.947 100.316 156.909 100.344 156.875 100.376C156.082 101.094 155.848 102.31 156.305 103.35C156.727 104.309 157.613 104.878 158.609 104.807C158.843 104.791 159.073 104.711 159.306 104.66ZM155.947 101.363C155.948 101.327 155.914 101.372 155.909 101.379C155.891 101.403 155.873 101.428 155.858 101.454C155.648 101.807 155.517 102.189 155.5 102.6C155.458 103.535 155.786 104.31 156.577 104.839C157.103 105.191 157.688 105.263 158.299 105.073C157.406 104.983 156.709 104.568 156.239 103.803C155.769 103.041 155.694 102.223 155.947 101.363Z",fill:"black"}),(0,i.jsx)("path",{d:"M159.774 102.178C159.95 102.185 160.007 102.276 159.95 102.441C159.808 102.848 159.407 103.046 158.999 102.904C158.758 102.819 158.568 102.664 158.438 102.442C158.337 102.272 158.382 102.174 158.579 102.162C158.785 102.148 159.583 102.171 159.774 102.178ZM159.735 102.376C159.384 102.376 159.042 102.376 158.697 102.376C159.048 102.784 159.566 102.792 159.735 102.376Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.345 101.458C158.346 101.656 158.155 101.836 157.947 101.835C157.765 101.834 157.638 101.67 157.637 101.496C157.634 101.322 157.812 101.15 158.008 101.145C158.196 101.139 158.345 101.276 158.345 101.458ZM157.964 101.332C157.87 101.347 157.84 101.436 157.848 101.503C157.858 101.601 157.932 101.625 157.978 101.627C158.021 101.628 158.106 101.585 158.124 101.501C158.147 101.416 158.098 101.3 157.964 101.332Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.773 101.511C160.771 101.703 160.635 101.844 160.453 101.843C160.257 101.841 160.116 101.683 160.123 101.47C160.128 101.286 160.265 101.144 160.435 101.148C160.612 101.153 160.776 101.328 160.773 101.511ZM160.598 101.506C160.598 101.408 160.546 101.342 160.465 101.342C160.415 101.342 160.331 101.38 160.331 101.484C160.331 101.666 160.465 101.656 160.465 101.656C160.536 101.653 160.598 101.624 160.598 101.506Z",fill:"black"})]}),(0,i.jsx)("path",{className:nc()(i9,ra),d:"M147.77 78.1765C147.77 77.9744 147.606 77.8105 147.404 77.8105C147.202 77.8105 147.038 77.9744 147.038 78.1765H147.77ZM147.145 86.1209C147.288 86.2639 147.52 86.2639 147.663 86.1209L149.992 83.7918C150.135 83.6489 150.135 83.4172 149.992 83.2743C149.849 83.1313 149.617 83.1313 149.474 83.2743L147.404 85.3446L145.333 83.2743C145.191 83.1313 144.959 83.1313 144.816 83.2743C144.673 83.4172 144.673 83.6489 144.816 83.7918L147.145 86.1209ZM147.038 78.1765V85.8622H147.77V78.1765H147.038Z",fill:"black"}),(0,i.jsx)("path",{d:"M147.77 118.432C147.77 118.23 147.606 118.066 147.404 118.066C147.202 118.066 147.038 118.23 147.038 118.432H147.77ZM147.145 126.376C147.288 126.519 147.52 126.519 147.663 126.376L149.992 124.047C150.135 123.904 150.135 123.673 149.992 123.53C149.849 123.387 149.617 123.387 149.474 123.53L147.404 125.6L145.333 123.53C145.191 123.387 144.959 123.387 144.816 123.53C144.673 123.673 144.673 123.904 144.816 124.047L147.145 126.376ZM147.038 118.432V126.118H147.77V118.432H147.038Z",fill:"black"}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(56.6428 98.1511)"})}),(0,i.jsx)("clipPath",{id:"clip1_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(55.1821 57.8955)"})}),(0,i.jsx)("clipPath",{id:"clip2_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(105.685 57.8955)"})}),(0,i.jsx)("clipPath",{id:"clip3_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(107.148 11.4153)"})}),(0,i.jsx)("clipPath",{id:"clip4_351_43276",children:(0,i.jsx)("rect",{width:"8",height:"8",fill:"white",transform:"translate(155 58)"})}),(0,i.jsx)("clipPath",{id:"clip5_351_43276",children:(0,i.jsx)("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(154.719 98.6667)"})})]})]})}function rl(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 122",fill:"none",className:nc()(i6,{[i7]:e.hovered}),children:[(0,i.jsx)("rect",{x:"27.1929",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"99.7337",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"99.7337",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"27.1929",y:"43.3228",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"27.1929",y:"103.518",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"76.5833",y:"63.3882",width:"92.2228",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),(0,i.jsx)("rect",{x:"83.3374",y:"68.5977",width:"25.8533",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"32.7886",y:"108.728",width:"32.0272",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"33.561",y:"48.5325",width:"31.2554",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"104.947",y:"28.4675",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("path",{d:"M161.035 74.752C160.165 74.7255 159.449 74.5471 158.764 74.2317C158.546 74.1315 158.317 74.0549 158.095 73.9694C157.8 73.8559 157.542 73.682 157.409 73.3946C157.106 72.7358 156.787 72.0785 156.552 71.3932C156.332 70.755 156.468 70.1154 156.863 69.5701C157.169 69.1471 157.355 68.6932 157.489 68.1921C157.654 67.5775 158.109 67.237 158.728 67.1044C159.013 67.044 159.283 67.0631 159.554 67.1678C159.806 67.2651 160.067 67.2813 160.33 67.209C160.82 67.0749 161.266 67.2135 161.704 67.4242C161.909 67.5215 162.118 67.6247 162.338 67.6733C163.061 67.8325 163.433 68.3085 163.532 69.0012C163.58 69.3446 163.552 69.7027 163.527 70.052C163.505 70.3571 163.537 70.646 163.635 70.9334C163.887 71.6791 163.848 72.4086 163.504 73.1205C163.293 73.5567 162.948 73.8515 162.529 74.077C162.236 74.2347 161.944 74.3968 161.66 74.5707C161.43 74.7107 161.184 74.7594 161.035 74.752ZM161.028 74.4779C161.255 74.4808 161.427 74.4086 161.658 74.2303C161.815 74.1109 162 74.0284 162.173 73.9311C162.376 73.8176 162.615 73.741 162.78 73.5862C163.481 72.9259 163.641 72.08 163.405 71.1942C163.253 70.6224 163.207 70.0741 163.274 69.4964C163.359 68.7418 162.946 68.1744 162.223 67.974C161.972 67.9047 161.732 67.7868 161.496 67.6733C161.194 67.5289 160.883 67.4036 160.55 67.4832C160.117 67.5863 159.704 67.5539 159.288 67.4139C159.153 67.3682 159 67.327 158.861 67.3432C158.304 67.408 157.913 67.7367 157.773 68.2584C157.622 68.8258 157.367 69.3195 157.051 69.8074C156.724 70.3144 156.637 70.8921 156.87 71.4742C157.1 72.0505 157.35 72.6194 157.598 73.1883C157.72 73.4713 157.936 73.6599 158.226 73.7675C158.5 73.8692 158.777 73.965 159.044 74.0844C159.632 74.3452 160.255 74.4337 161.028 74.4779Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.398 72.4923C159.773 72.5188 159.2 72.4201 158.753 71.9543C158.677 71.8747 158.605 71.7863 158.559 71.6876C158.537 71.6419 158.518 71.5549 158.603 71.5078C158.656 71.4783 158.724 71.5092 158.767 71.5417C158.874 71.6212 158.964 71.7259 159.073 71.8055C159.586 72.1842 160.154 72.3021 160.768 72.1223C161.079 72.0324 161.296 71.804 161.487 71.5535C161.558 71.4621 161.636 71.3235 161.764 71.4193C161.893 71.5166 161.778 71.6345 161.711 71.7229C161.377 72.168 160.973 72.4952 160.398 72.4923Z",fill:"black"}),(0,i.jsx)("path",{d:"M162.357 70.0724C162.355 70.2522 162.218 70.3966 162.056 70.3937C161.888 70.3907 161.748 70.2419 161.753 70.0724C161.757 69.8867 161.887 69.7393 162.044 69.7422C162.221 69.7437 162.36 69.8896 162.357 70.0724Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.503 70.3111C158.501 70.4909 158.364 70.6354 158.202 70.6324C158.034 70.6295 157.894 70.4806 157.899 70.3111C157.903 70.1254 158.033 69.9781 158.19 69.981C158.366 69.9825 158.504 70.1284 158.503 70.3111Z",fill:"black"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_351_42930)",children:[(0,i.jsx)("path",{d:"M160.653 34.6219C159.783 34.5953 159.067 34.417 158.381 34.1016C158.163 34.0014 157.935 33.9248 157.712 33.8393C157.418 33.7258 157.16 33.5519 157.027 33.2645C156.723 32.6057 156.405 31.9484 156.169 31.2631C155.95 30.6249 156.085 29.9853 156.48 29.44C156.787 29.017 156.973 28.563 157.107 28.0619C157.272 27.4474 157.727 27.1069 158.346 26.9743C158.631 26.9139 158.9 26.933 159.171 27.0377C159.423 27.1349 159.684 27.1511 159.948 27.0789C160.437 26.9448 160.884 27.0833 161.322 27.2941C161.527 27.3914 161.736 27.4945 161.955 27.5432C162.679 27.7023 163.051 28.1784 163.149 28.8711C163.198 29.2145 163.17 29.5726 163.145 29.9219C163.123 30.227 163.155 30.5158 163.252 30.8032C163.504 31.549 163.466 32.2785 163.121 32.9904C162.91 33.4266 162.566 33.7214 162.147 33.9469C161.854 34.1046 161.562 34.2667 161.278 34.4406C161.048 34.5806 160.801 34.6292 160.653 34.6219ZM160.645 34.3477C160.872 34.3507 161.045 34.2785 161.276 34.1001C161.432 33.9808 161.618 33.8982 161.79 33.801C161.994 33.6875 162.233 33.6108 162.398 33.4561C163.099 32.7958 163.258 31.9499 163.023 31.0641C162.871 30.4923 162.825 29.944 162.891 29.3663C162.977 28.6117 162.564 28.0443 161.841 27.8438C161.59 27.7746 161.35 27.6567 161.114 27.5432C160.812 27.3987 160.501 27.2735 160.168 27.353C159.734 27.4562 159.322 27.4238 158.906 27.2838C158.771 27.2381 158.617 27.1968 158.479 27.213C157.922 27.2779 157.531 27.6065 157.391 28.1283C157.239 28.6957 156.984 29.1894 156.669 29.6772C156.342 30.1842 156.255 30.762 156.488 31.3441C156.718 31.9204 156.968 32.4893 157.216 33.0582C157.338 33.3411 157.553 33.5298 157.844 33.6374C158.118 33.7391 158.395 33.8349 158.662 33.9542C159.25 34.2151 159.873 34.3035 160.645 34.3477Z",fill:"black"}),(0,i.jsx)("path",{d:"M160.016 32.3624C159.391 32.3889 158.818 32.2902 158.371 31.8244C158.294 31.7449 158.222 31.6564 158.177 31.5577C158.154 31.512 158.135 31.425 158.221 31.3779C158.274 31.3484 158.342 31.3794 158.384 31.4118C158.492 31.4914 158.582 31.596 158.691 31.6756C159.204 32.0544 159.771 32.1723 160.386 31.9925C160.697 31.9026 160.913 31.6741 161.105 31.4236C161.176 31.3322 161.254 31.1937 161.382 31.2895C161.51 31.3867 161.395 31.5046 161.329 31.5931C160.994 32.0381 160.591 32.3653 160.016 32.3624Z",fill:"black"}),(0,i.jsx)("path",{d:"M161.974 29.9422C161.973 30.122 161.836 30.2665 161.674 30.2635C161.506 30.2606 161.366 30.1117 161.37 29.9422C161.375 29.7565 161.504 29.6092 161.662 29.6121C161.839 29.6136 161.977 29.7595 161.974 29.9422Z",fill:"black"}),(0,i.jsx)("path",{d:"M158.12 30.181C158.119 30.3608 157.982 30.5052 157.82 30.5023C157.652 30.4993 157.512 30.3505 157.516 30.181C157.521 29.9953 157.65 29.8479 157.808 29.8509C157.983 29.8523 158.122 29.9983 158.12 30.181Z",fill:"black"})]}),(0,i.jsxs)("g",{clipPath:"url(#clip1_351_42930)",children:[(0,i.jsx)("path",{d:"M114.675 114.329C114.278 114.328 114.256 114.309 114.215 113.917C114.185 113.631 114.162 113.343 114.154 113.056C114.112 111.501 114.087 109.946 114.039 108.393C114.025 107.893 114.025 107.893 114.462 107.849C114.934 107.802 115.45 107.815 115.924 107.803C117.613 107.764 119.304 107.73 120.993 107.694C121.058 107.693 121.127 107.697 121.183 107.703C121.305 107.716 121.319 107.809 121.321 107.868C121.332 108.088 121.311 108.309 121.311 108.53C121.308 110.144 121.308 111.758 121.307 113.371C121.307 113.565 121.302 113.759 121.301 113.952C121.298 114.281 121.192 114.39 120.854 114.388C120.221 114.387 119.587 114.381 118.953 114.378C118.542 114.377 115.69 114.332 114.675 114.329ZM120.946 108.032L114.356 108.123C114.336 108.123 114.319 108.141 114.321 108.16C114.384 110.116 114.446 112.049 114.51 114.007C114.51 114.026 114.526 114.042 114.545 114.042H120.952C120.977 114.042 120.996 114.021 120.996 113.998V108.082C120.996 108.054 120.974 108.032 120.946 108.032Z",fill:"black"}),(0,i.jsx)("path",{d:"M117.683 112.39C117.071 112.373 116.501 112.219 116.016 111.83C115.935 111.765 115.826 111.613 115.852 111.563C115.929 111.42 116.057 111.56 116.151 111.608C117.205 112.155 118.252 112.161 119.295 111.585C119.361 111.548 119.432 111.519 119.504 111.499C119.535 111.492 119.577 111.488 119.607 111.536C119.628 111.567 119.616 111.617 119.599 111.645C119.568 111.692 119.522 111.734 119.476 111.769C118.953 112.188 118.358 112.403 117.683 112.39Z",fill:"black"}),(0,i.jsx)("path",{d:"M117.349 109.66C117.133 110.082 116.915 110.502 116.696 110.922C116.68 110.953 116.576 111.096 116.462 111.038C116.421 111.018 116.384 110.978 116.384 110.884C116.384 110.836 116.405 110.78 116.427 110.735C116.627 110.338 116.829 109.942 117.034 109.548C117.063 109.492 117.102 109.433 117.152 109.398C117.193 109.369 117.267 109.354 117.311 109.37C117.469 109.426 117.373 109.615 117.349 109.66Z",fill:"black"}),(0,i.jsx)("path",{d:"M119.47 109.498C119.606 109.477 119.652 109.594 119.618 109.695C119.59 109.784 119.551 109.871 119.507 109.952C119.342 110.248 119.174 110.543 119.003 110.835C118.953 110.922 118.885 111.016 118.766 110.959C118.632 110.894 118.682 110.776 118.73 110.686C118.915 110.341 119.103 109.998 119.299 109.659C119.339 109.589 119.401 109.498 119.47 109.498Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M66.4764 69.1441C66.5074 69.1087 66.5118 69.0557 66.4853 69.0159C66.2111 68.6622 65.9414 68.3306 65.6894 67.9857C65.4064 67.5966 65.4816 67.2959 65.9459 67.2031C67.2679 66.9334 68.5899 66.646 69.9296 66.4912C70.8138 66.394 70.9819 66.4205 70.8802 67.464C70.7608 68.6975 70.6105 69.6924 70.4336 70.9171C70.1727 72.7033 70.1064 72.92 69.7704 72.7431C69.6908 72.6989 69.4653 72.5795 69.3017 72.4381C69.1072 72.27 68.8728 72.1064 68.7623 71.9871C68.0902 72.973 67.5597 73.5478 66.7771 74.2729C65.4241 75.8028 62.873 76.0327 60.9187 74.3393C60.2953 73.7999 59.694 73.2383 59.0838 72.6857C58.1067 71.8014 56.9704 71.6289 55.7987 72.1418C54.9675 72.5044 54.2026 73.0261 53.4332 73.5125C52.0626 74.3791 50.6168 74.8787 48.9809 74.5161C48.6271 74.4365 48.2823 74.2818 47.9507 74.1226C47.4466 73.8794 47.2123 73.4727 47.2079 72.8935C47.2034 71.6289 47.1239 70.36 47.146 69.0955C47.1636 68.1449 47.3847 67.9945 48.3265 68.1625C50.1967 68.4897 51.9565 68.136 53.6631 67.3623C54.8039 66.845 55.9844 66.478 57.2445 66.3365C59.0175 66.2039 61.1486 66.8715 62.5856 68.4499C63.178 69.0999 63.9651 69.5553 64.8361 69.6879C65.4595 69.7719 65.8972 69.7321 66.4764 69.1441ZM66.4013 67.8265C66.64 68.1714 66.9009 68.4853 67.0777 68.839C67.1706 69.0291 67.3209 69.206 67.1131 69.5155C66.5737 70.3114 65.3888 70.8552 64.4381 70.5545C63.912 70.3909 63.4035 70.1124 62.9525 69.794C62.1876 69.2635 61.5112 68.6003 60.7286 68.1095C60.1626 67.7513 59.5038 67.4816 58.8495 67.3446C57.4832 67.0572 56.148 67.3578 54.879 67.8751C52.6993 68.7683 50.5283 69.6437 47.986 68.9142C47.986 70.1124 47.9949 71.2399 47.9816 72.3629C47.9728 73.3666 47.8357 73.2472 48.8349 73.5611C48.9853 73.6097 49.14 73.6495 49.2948 73.6716C50.6831 73.8794 51.8813 73.4019 53.022 72.6635C53.756 72.186 54.4899 71.682 55.2814 71.315C56.9969 70.5192 58.5134 70.8685 59.8443 72.2037C60.4146 72.7741 61.0292 73.3091 61.6836 73.7822C62.8022 74.5913 64.0225 75.1617 65.5037 74.3304C66.7284 73.5169 67.6304 72.6812 68.2317 71.3504C68.4837 70.7933 68.5368 70.8198 68.9613 71.2708C69.0983 71.4167 69.0983 71.4167 69.3592 71.6643C69.5537 71.9031 69.5626 71.6687 69.5758 71.483C69.7925 70.0151 69.9517 68.6489 70.1772 67.1235C68.8773 67.3623 67.6702 67.5878 66.4013 67.8265Z",fill:"black"}),(0,i.jsx)("rect",{x:"27.1929",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587",className:nc()(i9,ri)}),(0,i.jsx)("rect",{x:"33.561",y:"29.2361",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2",className:nc()(i9,ri)}),(0,i.jsxs)("g",{clipPath:"url(#clip2_351_42930)",className:nc()(i9,ri),children:[(0,i.jsx)("path",{d:"M83.8767 30.6015C83.9224 29.4063 84.425 28.2258 85.6055 27.4048C85.8988 27.2015 86.2466 27.0688 86.5841 26.9406C88.4322 26.2391 90.6842 27.508 91.1691 29.8013C91.514 31.4313 91.1102 32.8682 89.8265 33.9662C88.0785 35.4621 85.4817 34.9124 84.3881 32.855C84.0506 32.2153 83.8797 31.5344 83.8767 30.6015ZM87.4345 34.3214C88.1817 34.3229 88.7919 34.1298 89.2797 33.7894C91.2001 32.4467 91.3519 29.4225 89.5759 27.8897C88.7668 27.1911 87.8265 27.0084 86.8111 27.2339C86.4957 27.3046 86.1906 27.4874 85.9209 27.6775C84.3247 28.805 83.9062 31.135 84.9968 32.8196C85.6025 33.7569 86.4588 34.2875 87.4345 34.3214Z",fill:"black"}),(0,i.jsx)("path",{d:"M86.9275 33.1983C86.9039 33.2381 86.8744 33.2779 86.8523 33.3133C86.7963 33.4032 86.7683 33.4356 86.6622 33.3987C86.5826 33.3531 86.5988 33.2528 86.6194 33.1983C86.6754 33.045 86.7491 32.8976 86.8346 32.7576C86.8685 32.7016 86.9348 32.6014 87.0041 32.6338C87.0572 32.6663 87.097 32.6854 87.0513 32.8402C87.0424 32.8696 87.0321 32.905 87.0174 32.9522C87.3829 33.1364 87.7572 33.157 88.1434 33.0642C88.7049 32.9286 89.2192 32.5056 89.5155 31.9854C89.6393 31.7672 89.6909 31.558 89.7586 31.2941C89.7734 31.2396 89.8132 31.1482 89.7881 31.132C89.7542 31.1114 89.713 31.0849 89.6643 31.0642C89.57 31.0259 89.5788 30.9552 89.598 30.9095C89.6304 30.8299 89.6923 30.8211 89.7306 30.8314C89.9502 30.8874 90.1669 30.9581 90.3806 31.0318C90.4101 31.0421 90.4499 31.0745 90.4351 31.1453C90.4189 31.219 90.3703 31.2322 90.3275 31.2396C90.2612 31.2514 90.189 31.2337 90.1006 31.2263C90.0726 31.3457 90.0475 31.471 90.0121 31.5919C89.7424 32.5321 89.1632 33.1688 88.1979 33.4164C87.8103 33.5152 87.4168 33.44 86.9275 33.1983Z",fill:"black"}),(0,i.jsx)("path",{d:"M88.892 29.5476C88.892 29.4312 88.8744 29.3089 88.8994 29.1984C88.9156 29.1276 88.9525 29.02 89.0497 29.0215C89.1441 29.023 89.2148 29.0922 89.2369 29.1541C89.3784 29.5565 89.4359 29.9736 89.3784 30.3966C89.374 30.51 89.2634 30.5778 89.2133 30.5778C89.1234 30.5778 89.0335 30.5174 89.0085 30.4128C88.9407 30.1298 88.8788 29.5491 88.892 29.5476Z",fill:"black"}),(0,i.jsx)("path",{d:"M85.772 29.5404C85.7793 29.4697 85.8235 29.3459 85.9296 29.3252C86.0417 29.2957 86.0815 29.4299 86.0947 29.4888C86.1581 29.7718 86.1419 29.7187 86.1743 30.1152C86.1772 30.1432 86.1876 30.6163 86.1758 30.7445C86.164 30.8801 86.0903 30.9479 86.024 30.9508C85.8987 30.9582 85.8589 30.8742 85.8309 30.7754C85.7439 30.4748 85.7027 30.1697 85.772 29.5404Z",fill:"black"})]}),(0,i.jsx)("rect",{x:"106.08",y:"83.0787",width:"62.5109",height:"15.0489",rx:"2.12228",fill:"#AFF4C6",stroke:"black",strokeWidth:"0.38587",className:nc()(i9,rr)}),(0,i.jsx)("rect",{x:"112.062",y:"88.2883",width:"22.7663",height:"4.63043",fill:"black",fillOpacity:"0.2",className:nc()(i9,rr)}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_351_42930",children:(0,i.jsx)("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(155.496 26.5366)"})}),(0,i.jsx)("clipPath",{id:"clip1_351_42930",children:(0,i.jsx)("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(113.435 106.797)"})}),(0,i.jsx)("clipPath",{id:"clip2_351_42930",children:(0,i.jsx)("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(83.3374 26.5366)"})})]})]})}function rd(e){return(0,i.jsxs)("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",className:nc()(i6,{[i7]:e.hovered}),children:[(0,i.jsx)("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",fill:"#E4CCFF"}),(0,i.jsxs)("g",{filter:"url(#filter0_d_351_120552)",children:[(0,i.jsx)("rect",{x:"63.4768",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"63.6489",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"67.6057",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"67.6057",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter1_d_351_120552)",children:[(0,i.jsx)("rect",{x:"98.2268",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"98.3989",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"102.355",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"102.355",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter2_d_351_120552)",children:[(0,i.jsx)("rect",{x:"132.977",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"133.149",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"137.109",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"137.109",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",fill:"#BDE3FF"}),(0,i.jsxs)("g",{filter:"url(#filter3_d_351_120552)",children:[(0,i.jsx)("rect",{x:"32.5081",y:"60.4646",width:"26.8391",height:"30.6241",fill:"white"}),(0,i.jsx)("rect",{x:"32.6801",y:"60.6366",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"35.4333",y:"63.0461",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsxs)("g",{filter:"url(#filter4_d_351_120552)",children:[(0,i.jsx)("rect",{x:"63.4768",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"63.6489",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"67.6057",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"67.6057",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter5_d_351_120552)",children:[(0,i.jsx)("rect",{x:"98.2268",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"98.3989",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"102.355",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"102.355",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{clipPath:"url(#clip0_351_120552)",children:[(0,i.jsx)("path",{d:"M52.4628 72.139C52.4653 75.5713 50.0667 78.5645 46.8075 79.1817C46.4186 79.2545 45.9344 79.3649 45.4652 79.3423C43.9397 79.2746 42.7856 78.9007 41.6465 77.9398C40.0834 76.6175 39.3433 74.8813 39.3884 72.8616C39.4461 70.2497 40.5727 68.1497 42.8057 66.7597C44.8831 65.4651 47.0785 65.3396 49.2663 66.5113C51.2635 67.5801 52.4603 69.7429 52.4628 72.139ZM51.8631 72.2494C51.8631 72.1992 51.8606 72.149 51.8556 72.0988C51.8105 71.7074 51.7804 71.3135 51.7101 70.9297C51.1732 67.9741 48.4785 65.9945 45.558 66.3959C41.215 66.993 38.6809 72.1214 40.816 75.9527C41.9451 77.9774 44.5018 79.0864 46.4563 78.705C49.5423 78.1029 51.7879 75.3906 51.8631 72.2494Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.6576 74.7006C44.424 75.9777 47.5 76.2537 49.0179 74.3719C49.038 74.3468 49.0581 74.3268 49.0506 74.3217C48.9778 74.1812 48.7495 74.0081 48.9276 73.8551C49.1108 73.697 49.2563 73.8952 49.3767 74.0156C49.5524 74.1913 49.7305 74.3694 49.876 74.5701C49.9362 74.6554 50.0767 74.7934 49.9362 74.9139C49.8158 75.0318 49.7054 74.9716 49.5624 74.8637C49.5047 74.821 49.442 74.7658 49.4018 74.7332C49.2061 74.9139 49.033 75.0895 48.8448 75.2501C47.7384 76.196 46.4387 76.4067 45.0512 76.1884C44.0827 76.0354 43.1895 75.6741 42.4092 75.0594C42.3867 75.0418 42.3089 74.959 42.2738 74.9565C42.2035 74.9515 42.1859 74.9992 42.0931 75.0318C42.0279 75.0544 41.9902 75.1221 41.8598 74.9841C41.7519 74.8737 41.8272 74.7583 41.8773 74.7182C42.1408 74.5074 42.4193 74.3142 42.7053 74.1336C42.758 74.101 42.8784 74.0734 42.9386 74.1787C43.0039 74.2916 42.9437 74.3518 42.9035 74.4146C42.8433 74.5074 42.7505 74.5827 42.6551 74.6755C42.6526 74.6855 42.6526 74.6956 42.6576 74.7006Z",fill:"black"}),(0,i.jsx)("path",{d:"M49.5523 72.5779C49.5824 72.5804 49.6151 72.5729 49.6427 72.5603C49.8384 72.4575 49.8308 72.1639 49.8308 71.9858C49.8283 71.6094 49.7832 71.2958 49.7807 70.9345C49.7807 70.7865 49.7731 70.6284 49.8133 70.4904C49.8384 70.4051 49.9488 70.2972 50.0265 70.2922C50.1043 70.2872 50.2247 70.3223 50.2624 70.4603C50.4054 71.0549 50.4104 71.8403 50.3025 72.3496C50.2122 72.7786 49.8308 72.9894 49.5047 72.9919C49.1509 72.9944 48.762 72.7385 48.6566 72.3044C48.5437 71.8377 48.5362 71.3435 48.486 70.8617C48.4835 70.8341 48.4835 70.7438 48.486 70.7162C48.5061 70.5481 48.5663 70.4528 48.7821 70.4653C48.9401 70.4703 48.9853 70.6962 49.0154 70.8266C49.0681 71.0574 49.0505 71.3033 49.0907 71.5392C49.1534 71.898 49.191 72.5528 49.5523 72.5779Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.7832 70.9848C42.7983 70.8819 42.7807 70.7339 42.989 70.7013C43.1721 70.6737 43.2549 70.8593 43.2625 70.9471C43.3051 71.4414 43.3528 71.9407 43.3126 72.4325C43.275 72.8891 42.866 73.273 42.4972 73.3181C42.0732 73.3708 41.604 73.1124 41.4635 72.6257C41.333 72.1765 41.2778 71.6396 41.2804 71.2206C41.2804 71.1504 41.3029 71.0174 41.4309 70.9973C41.594 70.9622 41.6316 71.1077 41.6542 71.1855C41.7495 71.4991 41.7972 71.8253 41.8951 72.1389C41.9528 72.3246 42.0456 72.5128 42.1685 72.6583C42.3693 72.8941 42.6327 72.849 42.713 72.5529C42.7908 72.2619 42.7506 71.198 42.7832 70.9848Z",fill:"black"})]}),(0,i.jsx)("path",{d:"M97.2147 88.2858L97.2147 88.2858L95.4155 90.1223L95.8404 92.7175C95.8404 92.7175 95.8404 92.7175 95.8404 92.7175C95.9069 93.1235 95.4922 93.4743 95.107 93.2618L92.891 92.0416L90.675 93.2618L90.6749 93.2619L97.2147 88.2858ZM97.2147 88.2858C97.5016 87.9928 97.3551 87.4674 96.9341 87.4033L97.2147 88.2858ZM90.3664 90.1223L89.9415 92.7175L92.4384 84.6696L92.4383 84.6698C92.4383 84.6698 92.4383 84.6698 92.4382 84.6699L91.3279 87.0259L88.8479 87.4033C88.8479 87.4033 88.8479 87.4033 88.8479 87.4033C88.4269 87.4674 88.2803 87.9928 88.5673 88.2858L88.5673 88.2858L90.3664 90.1223Z",fill:"#FFC700",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",fill:"#93E396"}),(0,i.jsxs)("g",{filter:"url(#filter6_d_351_120552)",children:[(0,i.jsx)("rect",{x:"32.5081",y:"108.506",width:"26.8391",height:"30.6241",fill:"white"}),(0,i.jsx)("rect",{x:"32.6801",y:"108.678",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"35.4333",y:"111.088",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsxs)("g",{clipPath:"url(#clip1_351_120552)",children:[(0,i.jsx)("path",{d:"M45.5755 113.495C47.3906 113.521 48.8594 114.261 50.2344 115.453C53.0677 117.912 53.2735 123.865 48.8125 126.552C45.7344 128.406 41.6458 127.526 39.6719 124.149C37.4896 120.417 39.2214 115.445 43.2344 113.925C43.987 113.638 44.7656 113.487 45.5755 113.495ZM51.6276 119.922C51.6693 118.594 51 117.055 49.8333 115.844C48.3386 114.294 46.4115 113.763 44.2891 114.255C40.3828 115.156 38.263 119.57 39.9349 123.261C41.1172 125.87 43.8958 127.331 46.5521 126.74C49.5443 126.073 51.6406 123.435 51.6276 119.922Z",fill:"black"}),(0,i.jsx)("path",{d:"M50.0078 122C49.2031 124.023 47.7682 125.206 45.5989 125.232C43.7396 125.253 42.3724 124.333 41.5417 122.617C41.4896 122.641 41.4271 122.672 41.3672 122.693C41.2812 122.724 41.2318 122.745 41.1536 122.646C41.1172 122.599 41.0599 122.516 41.1667 122.43C41.4297 122.213 41.7135 122.026 42 121.846C42.0443 121.818 42.1484 121.815 42.2083 121.906C42.2734 122.008 42.2318 122.073 42.1927 122.125C42.1198 122.221 42.0156 122.294 41.9114 122.385C42.9062 123.909 44.2318 124.825 46.1276 124.635C47.7995 124.469 49.0443 123.229 49.5 121.768C49.5208 121.703 49.4479 121.656 49.3776 121.57C49.2604 121.432 49.1797 121.409 49.3125 121.187C49.4088 121.049 49.5573 121.13 49.6432 121.174C49.9167 121.318 50.1875 121.476 50.4271 121.669C50.5208 121.745 50.6927 121.857 50.5807 122.057C50.4766 122.26 50.3333 122.128 50.1641 122.078C50.1172 122.057 50.0703 122.029 50.0078 122Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.5313 117.878C42.6797 117.638 42.8412 117.448 43.1354 117.508C43.4167 117.565 43.5313 117.81 43.5339 118.036C43.5417 118.484 43.5339 118.945 43.4349 119.38C43.3334 119.828 43.125 120.255 42.9401 120.68C42.8099 120.979 42.6042 121.039 42.3802 120.82C41.6615 120.112 41.2266 119.263 41.2735 118.226C41.2865 117.932 41.4453 117.69 41.7396 117.591C42.0573 117.484 42.3021 117.63 42.5313 117.878ZM43.1094 117.927C43.1094 117.927 43.0521 117.844 42.9558 117.872C42.8828 117.867 42.8021 118.177 42.7552 118.341C42.711 118.495 42.7188 118.607 42.6094 118.625C42.4349 118.641 42.4479 118.492 42.375 118.419C42.3412 118.383 42.1771 117.919 41.9427 118.005C41.7917 118.06 41.7839 118.281 41.7917 118.414C41.8282 119.088 42.1354 119.667 42.5 120.286C42.8334 119.487 43.3308 118.414 43.1094 117.927Z",fill:"black"}),(0,i.jsx)("path",{d:"M48.4791 117.661C48.6692 117.555 48.8489 117.463 49.026 117.5C49.289 117.555 49.3411 117.831 49.3645 118.07C49.44 118.833 49.1093 119.479 48.7525 120.115C48.6718 120.258 48.5572 120.383 48.4817 120.531C48.2656 120.953 47.8932 120.875 47.6874 120.513C47.2578 119.75 47.013 118.911 47.0911 118.018C47.1197 117.677 47.2473 117.352 47.6249 117.263C48.0052 117.169 48.3359 117.409 48.4791 117.661ZM48.0104 120.148C48.0494 120.333 48.0885 120.19 48.1249 120.154C48.3854 119.763 48.6484 119.372 48.802 118.943C48.9218 118.607 49.2369 117.755 48.9062 117.841C48.8255 117.846 48.7421 118.094 48.6718 118.219C48.6145 118.318 48.4973 118.476 48.4479 118.484C48.2578 118.49 48.2812 118.318 48.2447 118.219C48.1588 117.995 48.1666 117.643 47.8463 117.685C47.5286 117.726 47.565 118.078 47.6067 118.307C47.7161 118.924 47.8723 119.536 48.0104 120.148Z",fill:"black"})]}),(0,i.jsxs)("g",{filter:"url(#filter7_d_351_120552)",children:[(0,i.jsx)("rect",{x:"63.4768",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"63.6489",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"67.6057",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"67.6057",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter8_d_351_120552)",children:[(0,i.jsx)("rect",{x:"98.2268",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"98.3989",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"102.355",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"102.355",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsxs)("g",{filter:"url(#filter9_d_351_120552)",children:[(0,i.jsx)("rect",{x:"134",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"134.172",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"138.129",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"138.129",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),(0,i.jsx)("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsx)("path",{d:"M163.058 5.32444L163.144 5.46819L163.29 5.38648L163.93 5.02854C164.401 4.76472 164.965 4.6956 165.497 4.83787C166.028 4.98013 166.482 5.32166 166.759 5.78594C167.036 6.25002 167.113 6.7986 166.976 7.31116C166.839 7.82371 166.498 8.26021 166.026 8.52392L166.026 8.52399L165.449 8.84723L165.449 8.84732L161.674 10.9565L159.121 6.67356C158.844 6.20954 158.767 5.66108 158.904 5.1487C159.041 4.63631 159.382 4.20002 159.854 3.93649C160.326 3.67286 160.889 3.60389 161.421 3.74625C161.952 3.8886 162.406 4.23014 162.682 4.69436L163.058 5.32444Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.344091"}),(0,i.jsxs)("g",{clipPath:"url(#clip2_351_120552)",children:[(0,i.jsx)("path",{d:"M50.4871 107.641C48.8069 109.488 47.7973 109.61 46.2305 108.164C44.1148 111.157 42.1849 111.774 39.8514 110.153C39.3857 111.079 38.7655 112.239 37.5921 112.305C36.4645 112.372 35.5675 111.561 35.5655 111.477C35.4727 112.106 34.6737 113.559 33.4639 113.686C32.2099 113.819 31.2714 113.252 30.5935 112.255C29.723 110.962 29.5512 109.451 29.3703 107.956C29.191 106.467 29.0468 104.962 28.982 103.463C28.9502 102.678 29.0635 101.875 29.1937 101.087C29.2925 100.431 29.6597 99.9338 30.3896 99.8121C31.1194 99.6905 31.6381 100.065 31.9285 100.641C32.3488 101.47 32.6502 102.369 32.9353 103.077C33.2923 102.692 33.636 101.824 34.3226 101.609C35.0214 101.392 35.4604 101.455 36.3429 102.413C36.466 102.004 36.5602 101.635 36.6897 101.277C36.8358 100.882 36.9849 100.473 37.1984 100.113C37.8619 99.0194 38.6917 99.0087 39.483 100.068C41.3417 97.8755 42.7542 97.6508 45.017 99.1989C45.1976 98.6844 45.3353 98.1548 45.5664 97.6599C45.9532 96.8325 46.466 96.1419 47.5332 96.2202C48.4276 96.284 49.1693 96.9204 49.4516 97.9734C49.6358 98.6678 49.71 99.3903 49.8425 100.137C50.3717 99.6633 50.906 99.2599 51.6015 99.843C51.9154 98.8326 52.1853 97.879 52.518 96.9418C52.6775 96.4977 52.9121 96.067 53.1866 95.691C53.8238 94.8256 54.8328 94.8797 55.2722 95.86C55.5988 96.6025 55.8035 97.4282 55.8874 98.2393C56.1186 100.567 56.1084 102.892 55.4407 105.164C55.1061 106.296 54.4433 107.24 53.5059 107.974C52.1712 109.011 51.4815 108.934 50.4871 107.641ZM39.1546 101.785C39.0891 101.528 38.9628 100.247 38.431 100.253C38.0747 100.207 37.9209 100.878 37.8281 101.226C37.5065 102.512 37.3242 103.834 36.9597 105.104C36.8457 105.497 36.6329 105.708 36.3764 105.748C36.1323 105.836 36.0697 105.286 36.0118 105.034C35.8691 104.375 35.8318 103.695 35.6418 103.054C35.5686 102.793 35.455 102.425 34.9767 102.437C34.7887 102.44 34.5019 102.539 34.3083 102.901C34.0965 103.293 33.9031 103.707 33.7862 104.14C33.5734 104.91 33.4662 105.712 33.2259 106.475C33.1403 106.751 33.0228 107.08 32.747 107.222C32.492 107.268 32.2728 107.149 32.1872 106.305C32.1341 105.818 32.0887 105.335 32.0157 104.847C31.8459 103.7 31.6608 102.544 31.3612 101.424C31.2831 101.119 31.078 100.495 30.4631 100.684C29.8482 100.874 29.9096 101.47 29.9595 101.945C29.9644 101.989 29.9784 102.044 29.9848 102.095C30.134 103.39 30.2893 104.683 30.4324 105.98C30.6126 107.625 30.698 109.282 30.9957 110.903C31.2384 112.233 32.1254 112.904 33.1276 112.829C34.0977 112.757 34.5588 112.118 34.7112 110.629C34.7807 109.935 34.8013 109.227 34.9106 108.536C34.9416 108.326 35.0266 107.947 35.3415 107.957C35.6613 108.012 35.7028 108.352 35.753 108.574C35.8707 109.136 35.8113 109.743 36.0098 110.264C36.1478 110.626 36.541 110.993 36.9117 111.146C37.3912 111.342 37.9451 111.194 38.2282 110.698C38.5189 110.182 38.8062 109.627 38.9192 109.052C39.3781 106.599 39.4945 104.13 39.1546 101.785ZM50.8522 100.321C50.6149 100.258 50.3557 100.923 50.2715 101.178C50.0578 101.792 49.9284 102.43 49.7147 103.044C49.647 103.237 49.5064 103.527 49.2543 103.533C48.9942 103.482 48.9645 103.366 48.8893 103.021C48.8485 102.837 48.8275 102.628 48.8218 102.427C48.7926 101.55 48.8153 100.673 48.7357 99.8021C48.6756 99.1606 48.5757 98.4902 48.3279 97.9031C48.1793 97.5509 47.7245 97.1208 47.3882 97.1028C47.0656 97.0877 46.6017 97.4861 46.4018 97.8234C46.0823 98.38 45.9086 99.0228 45.7102 99.6459C45.6547 99.8358 45.6715 100.105 45.7672 100.275C46.8416 102.238 46.9952 104.339 46.6722 106.483C46.563 107.2 46.9941 107.487 47.413 107.803C47.8581 108.144 48.4053 108.147 48.8005 107.76C49.2155 107.348 49.5459 106.834 49.8595 106.331C50.0246 106.061 50.0502 105.703 50.206 105.423C50.2847 105.273 50.5023 105.107 50.6476 105.115C50.7592 105.119 50.9256 105.362 50.9616 105.529C51.0227 105.793 50.986 106.082 51.0211 106.346C51.1198 107.062 51.2231 107.517 51.6431 107.735C51.8624 107.881 52.5903 107.395 52.9417 107.091C54.0901 106.088 54.7064 104.76 54.7639 103.255C54.8461 101.237 54.8412 99.2094 54.7797 97.1893C54.7667 96.7568 54.7833 95.881 54.1461 95.9074C53.7619 95.8041 53.4068 96.5518 53.3005 96.9498C52.8868 98.4345 52.594 99.9599 52.2232 101.46C52.1499 101.758 52.0432 102.358 51.7501 102.433C51.4493 102.477 51.3007 102.405 51.1703 101.488C51.1212 101.169 51.1439 100.292 50.8522 100.321ZM45.4285 102.079C45.2305 101.635 45.0085 100.996 44.6721 100.419C43.5398 98.484 41.2245 98.5104 40.1057 100.468C39.9544 100.741 39.8878 101.142 39.9537 101.45C40.4517 103.651 40.4271 105.869 40.2406 108.089C40.1474 109.225 40.646 109.852 41.8126 109.938C43.2636 110.041 44.5426 109.168 45.2218 107.602C45.9719 105.856 45.931 103.407 45.4285 102.079Z",fill:"black"}),(0,i.jsx)("path",{d:"M59.6396 92.9477C59.6565 93.5223 59.7124 95.0885 59.7076 96.163C59.6942 97.6363 59.661 99.1083 59.5957 100.582C59.5728 101.154 59.472 101.726 59.3543 102.283C59.2411 102.806 58.8621 103.105 58.3303 103.111C57.7603 103.12 57.3065 102.872 57.0987 102.313C57.001 102.059 56.917 101.781 56.9124 101.509C56.9306 98.9612 57.0382 96.5596 57.0869 94.004C57.0898 93.6845 57.1071 93.2183 57.1818 92.9C57.328 92.2512 57.6344 91.8216 58.4066 91.8907C59.0794 91.9528 59.6227 92.3732 59.6396 92.9477ZM58.2221 102.332C58.2955 102.339 58.3705 102.352 58.4373 102.283C58.5789 102.175 58.5611 102.004 58.5634 101.861C58.6363 98.9672 58.7107 96.0798 58.7514 93.1879C58.7564 92.9785 58.7327 92.5553 58.3965 92.5632C57.9562 92.5458 58.0021 93.3861 57.9966 93.7713C57.9589 96.3956 57.9427 99.0275 57.9433 101.649C57.9446 101.882 57.9833 102.263 58.2221 102.332Z",fill:"black"}),(0,i.jsx)("path",{d:"M59.9054 105.251C60.1529 106.345 59.539 107.276 58.6658 107.474C57.8782 107.649 57.0496 107.055 56.8431 106.171C56.6145 105.176 57.0259 104.394 57.9922 104.179C58.8348 103.99 59.7065 104.372 59.9054 105.251ZM57.6513 105.847C57.8325 106.555 58.3501 106.468 58.4661 106.438C58.8092 106.305 59.0463 106.062 58.7828 105.388C58.71 105.205 58.5347 105.003 58.249 105.031C57.696 105.081 57.5609 105.519 57.6513 105.847Z",fill:"black"}),(0,i.jsx)("path",{d:"M42.9659 102.547C42.9771 102.921 43.0739 105.537 43.0732 107.085C43.0759 107.299 42.9866 107.738 42.5969 107.74C42.2333 107.768 42.0919 107.343 42.0754 107.126C41.9862 105.607 41.9396 104.078 41.9404 102.555C41.9392 102.322 42.0882 101.913 42.4165 101.848C42.8885 101.812 42.9547 102.172 42.9659 102.547Z",fill:"black"})]}),(0,i.jsxs)("g",{filter:"url(#filter10_d_351_120552)",className:nc()(i9,rn),children:[(0,i.jsx)("rect",{x:"132.649",y:"60.1077",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),(0,i.jsx)("rect",{x:"132.821",y:"60.2797",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"136.782",y:"64.2385",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2",className:nc()(i9,rn)}),(0,i.jsx)("rect",{x:"136.782",y:"70.0869",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2",className:nc()(i9,rn)}),(0,i.jsxs)("g",{filter:"url(#filter11_d_351_120552)",className:nc()(i9,rt),children:[(0,i.jsx)("rect",{x:"32.7107",y:"12.5178",width:"26.8391",height:"30.6241",fill:"white"}),(0,i.jsx)("rect",{x:"32.8827",y:"12.6899",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})]}),(0,i.jsx)("rect",{x:"35.6359",y:"15.0993",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091",className:nc()(i9,rt)}),(0,i.jsx)("path",{className:nc()(i9,rt),d:"M40.2485 22.3512C41.0198 21.4451 41.8657 20.5791 42.8005 19.8422C43.4514 19.3289 43.6751 19.3031 44.0335 19.2056C44.131 19.1798 44.217 19.1196 44.3002 19.0594C47.7898 16.5963 52.2372 18.3425 53.0974 22.6896C53.668 25.5742 52.1971 28.4387 49.668 29.6086C49.6278 29.6287 49.5676 29.6345 49.5476 29.666C49.0458 30.4517 48.025 30.7556 47.4027 30.9105C47.2766 30.9563 47.1791 31.0882 47.0644 31.1743C46.9755 31.2402 46.8866 31.3119 46.7862 31.3578C43.4973 32.8832 39.9618 30.8416 39.1876 27.4638C39.0786 26.9878 38.5997 24.1147 40.2485 22.3512ZM47.0988 29.4251C48.2716 29.4194 49.0372 29.2273 49.7225 28.8516C53.02 27.0423 53.5132 22.1275 50.6114 19.7275C48.9483 18.354 46.8206 18.1217 44.9511 19.4379C42.7288 21.0006 41.9231 24.2036 43.1675 26.6237C44.0622 28.3642 45.4816 29.3248 47.0988 29.4251ZM48.2199 30.1678C48.3633 30.1162 48.3834 30.0789 48.3604 30.0617C48.3604 30.0617 48.3002 30.0617 48.1999 30.0646C45.6192 30.2596 43.6779 29.233 42.5281 26.919C41.4041 24.6595 41.6765 22.4401 43.0041 20.3153C42.898 20.3669 42.812 20.43 42.7346 20.5017C40.9453 22.1218 40.4177 24.8659 41.45 27.2115C42.4019 29.3764 44.4005 30.661 46.6486 30.5004C47.1762 30.4631 47.6952 30.2825 48.2199 30.1678ZM40.6413 22.7297C40.6442 22.6465 40.5668 22.7498 40.5553 22.7641C40.5152 22.8186 40.475 22.8759 40.4406 22.9333C39.9675 23.7304 39.6722 24.5935 39.632 25.5197C39.5374 27.6301 40.2772 29.3793 42.0636 30.5721C43.2507 31.3664 44.5697 31.5298 45.9489 31.0997C43.9331 30.8961 42.3618 29.9613 41.3009 28.2352C40.2399 26.5147 40.0707 24.6681 40.6413 22.7297Z",fill:"black"}),(0,i.jsx)("path",{className:nc()(i9,rt),d:"M49.2781 24.5675C49.6738 24.5819 49.8028 24.7883 49.6738 25.1611C49.3526 26.0787 48.4494 26.526 47.529 26.2048C46.9841 26.0127 46.5569 25.6629 46.2616 25.164C46.035 24.7797 46.1354 24.5589 46.5798 24.5303C47.0444 24.4987 48.8451 24.5503 49.2781 24.5675ZM49.1892 25.0149C48.3978 25.0149 47.6265 25.0149 46.8465 25.0149C47.6379 25.9353 48.8078 25.9525 49.1892 25.0149Z",fill:"black"}),(0,i.jsx)("path",{className:nc()(i9,rt),d:"M46.0523 22.9417C46.0552 23.389 45.625 23.7962 45.1548 23.7933C44.7447 23.7905 44.458 23.4206 44.4551 23.0277C44.4494 22.6349 44.8508 22.2478 45.2924 22.2363C45.7168 22.222 46.0523 22.5317 46.0523 22.9417ZM45.1921 22.6578C44.9799 22.6922 44.9139 22.893 44.9311 23.0449C44.9541 23.2657 45.1204 23.3202 45.2236 23.3231C45.3211 23.3259 45.5132 23.2284 45.5534 23.0392C45.605 22.8471 45.496 22.5861 45.1921 22.6578Z",fill:"black"}),(0,i.jsx)("path",{className:nc()(i9,rt),d:"M51.5318 23.0622C51.5261 23.4952 51.2193 23.8135 50.8092 23.8106C50.3676 23.8077 50.0494 23.4493 50.0637 22.9704C50.0752 22.5547 50.3848 22.2335 50.7691 22.2421C51.1677 22.2536 51.5376 22.6493 51.5318 23.0622ZM51.1361 23.0507C51.1361 22.8299 51.0185 22.6808 50.835 22.6808C50.7232 22.6808 50.534 22.7669 50.534 23.002C50.534 23.412 50.835 23.3891 50.835 23.3891C50.9956 23.3833 51.1361 23.3174 51.1361 23.0507Z",fill:"black"}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_351_120552",x:"63.4768",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter1_d_351_120552",x:"98.2268",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter2_d_351_120552",x:"132.977",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter3_d_351_120552",x:"32.5081",y:"60.4646",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter4_d_351_120552",x:"63.4768",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter5_d_351_120552",x:"98.2268",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter6_d_351_120552",x:"32.5081",y:"108.506",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter7_d_351_120552",x:"63.4768",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter8_d_351_120552",x:"98.2268",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter9_d_351_120552",x:"134",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter10_d_351_120552",x:"132.649",y:"60.1077",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter11_d_351_120552",x:"32.7107",y:"12.5178",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dx:"0.688182",dy:"0.688182"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})]}),(0,i.jsx)("clipPath",{id:"clip0_351_120552",children:(0,i.jsx)("rect",{width:"14.4518",height:"14.4518",fill:"white",transform:"translate(38.6985 65.2793)"})}),(0,i.jsx)("clipPath",{id:"clip1_351_120552",children:(0,i.jsx)("rect",{width:"15",height:"15",fill:"white",transform:"translate(38 113)"})}),(0,i.jsx)("clipPath",{id:"clip2_351_120552",children:(0,i.jsx)("rect",{width:"36.296",height:"36.296",fill:"white",transform:"translate(23 89.9951) rotate(-14.3491)"})})]})]})}let rc="Make Something Modal",ru="Make something modal V2 dismissal interacted";var rm=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(rm||{}),rp=n(280009);let rh="browse_templates_make_something_onboarding--faded--aGChV";var rf=n(592581),rg=n(683173),rx=n(967770),r_=n(844160);let ry="loadingMakeSomethingTemplate",rb=e=>{let t=(0,S.Xr)(iI.w),{name:n}=(0,h.j6)(),a=(0,m.wA)(),[s,o]=(0,r.useState)(iY.f.NONE),l=(0,r.useCallback)(e=>{a(iV.Ji({isActive:e}))},[a]);(0,r.useEffect)(()=>(l(!0),()=>{l(!1)}),[l]);let d=(0,iG.g)();(0,r.useEffect)(()=>(d&&k.gw5?.setFigjamStarterKitEnabled(!0),()=>{k.gw5?.setFigjamStarterKitEnabled(!1)}),[d]);let c=(0,S.Xr)(i2.Qs);(0,r.useEffect)(()=>{c({type:"CLOSE"})},[c]);let u=(0,nX.O)(),f=(0,r.useRef)(Date.now()),g=e.onHideModal,x=(0,r.useCallback)(()=>{g(),(0,nz.YQ)({id:ru}),a(p.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),a(ev.Ce()),t(iI.tX.COMPLETED)},[g,a,t]),_=t=>{(!e.shouldAcceptClickUseCaseTile||e.shouldAcceptClickUseCaseTile())&&((0,em.Cu)({trackingContext:n,text:`${t} tile clicked`},"CTA Clicked"),e.onClickUseCaseTile(t))};function y(t,i){(0,em.Cu)({trackingContext:n,text:`${t} tile hovered`},"CTA Hovered"),o(t),e.onUseCasePreview?.(t,i)}let b=[{headerText:(0,j.t)("figjam_onboarding_make_something.templates_modal.button_title.brainstorm"),headerIcon:rf.A,previewSvg:e=>(0,i.jsx)(rs,{hovered:e}),useCase:iY.f.BRAINSTORM,previewType:k.KpW.MAKE_SOMETHING_BRAINSTORM},{headerText:(0,j.t)("figjam_onboarding_make_something.templates_modal.button_title.team_updates"),headerIcon:r_.A,previewSvg:e=>(0,i.jsx)(rd,{hovered:e}),useCase:iY.f.UPDATES,previewType:k.KpW.MAKE_SOMETHING_TEAM_UPDATES},{headerText:(0,j.t)("figjam_onboarding_make_something.templates_modal.button_title.planning_ahead"),headerIcon:rg.A,previewSvg:e=>(0,i.jsx)(rl,{hovered:e}),useCase:iY.f.PLAN,previewType:k.KpW.MAKE_SOMETHING_PLANNING},{headerText:(0,j.t)("figjam_onboarding_make_something.templates_modal.button_title.team_chart"),headerIcon:rx.A,previewSvg:e=>(0,i.jsx)(ro,{hovered:e}),useCase:iY.f.TEAM,previewType:k.KpW.MAKE_SOMETHING_TEAM_CHART}];function v(e,t){let n=b.findIndex(t=>t.useCase===e)+t;return n>b.length-1?n=0:n<0&&(n=b.length-1),n}return{hoveredUseCase:s,setHoveredUseCase:o,onClickCloseButton:()=>{e.onHideModal(),(0,nz.YQ)({id:ru}),t(iI.tX.COMPLETED);let n=Math.round((Date.now()-f.current)/1e3);u({eventName:"msv2_dismissed",style:e.style,secondsAfterShown:n})},onClickMoreTemplatesButton:()=>{a(ev.$O({type:iZ.PH.type,data:{templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:"makeSomething",onTemplateInsertedCurrentFile:x,onTemplateInsertedNewFile:x}})),u({eventName:"more_templates_clicked",style:e.style})},onClickUseCaseTile:_,onUseCasePreview:y,useCaseTiles:b,onRadioGroupKeyDown:function(e){let t;if("Enter"===e.key){s!==iY.f.NONE&&b.find(({useCase:e})=>e===s)&&_(s);return}if("Home"===e.key)t=0;else if("End"===e.key)t=b.length-1;else if(["ArrowUp","ArrowLeft"].includes(e.key))t=v(s,-1);else{if(!["ArrowDown","ArrowRight"].includes(e.key))return;t=v(s,1)}let n=b[t];n&&(o(n.useCase),y(n.useCase,n.previewType))}}},rv={[iY.f.BRAINSTORM]:rm.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,[iY.f.PLAN]:rm.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,[iY.f.UPDATES]:rm.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,[iY.f.TEAM]:rm.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED},rC=(0,i1.nh)(({onSuccess:e}={})=>{let t=(0,S.Xr)(iI.w),n=(0,m.wA)(),i=(0,eB.aV)(),a=(0,iG.g)(),s=(0,m.d4)(e=>e.mirror.appModel.multiplayerSessionState===k.kul.JOINED),{hubFiles:o,templates:l,categoryIds:d,isLoading:c}=(0,i$.bg)({templatesShelfType:iX.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER,source:"make-something-v2",isCmtyShelvesV2Enabled:!0}),{insertTemplate:u}=(0,iz.Fz)(),h=(0,r.useMemo)(()=>{let e={};return Object.keys(o).filter(e=>d.some(t=>l[t]?.includes(e))).reduce((e,t)=>{let n=o[t];return n&&(e[(0,iW.a6)(n).name.toUpperCase()]=n),e},e),e},[o,l,d]),f=a&&!c&&!i&&s;return{insert:(0,r.useCallback)(i=>{if(!f)return;if(i===iY.f.NONE){e?.();return}let r=h[i],a=rv[i];r&&u({template:{template:r,type:iq.n.HubFile},onSuccess:()=>{e?.(),n(eu.F.dequeue({matchType:ry})),(0,nz.YQ)({id:a}),n(p.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),t(iI.tX.USE_CASE_STEPS),i===iY.f.PLAN?k.glU?.setCanvasZoomScale(.8):i===iY.f.TEAM&&k.glU?.setCanvasZoomScale(1.2)},triggeredFrom:"browse-templates-make-something",selectTemplateAfterInsertion:!1}),n(eu.F.enqueue({message:(0,j.t)("figjam_onboarding_make_something.visual_bell.loading_template"),icon:iU.zX.SPINNER,type:ry}))},[n,e,u,t,h,f]),canInsert:f}});function rE(e){let t=(0,m.d4)(e=>{let t=e?.mirror?.appModel?.currentPage,n=e?.mirror?.sceneGraph,i=n?.get(t);return!i||!i.childCount||i.childrenAreAllGhosts}),n=(0,nm.Un)(),a=(0,nX.O)(),s=!n||t,o=s?"banner":"popup",l=()=>{e.hideModal?.()},d=e=>{a({eventName:"use_case_hovered",useCase:e,style:o})},c=e=>{a({eventName:"use_case_clicked",useCase:e,style:o})};function u(e,t){if("Escape"===e.key){t(),e.preventDefault(),e.stopPropagation();return}}return function(e){let t=(0,nX.O)(),n=(0,iL.ZC)(e);(0,r.useEffect)(()=>{if(!n){t({eventName:"msv2_shown",style:e});return}if(n!==e){t({eventName:"msv2_style_changed",style:e,prevStyle:n});return}},[n,e,t])}(o),s?(0,i.jsx)(rw,{onHideModal:l,trackUseCaseHover:d,trackUseCaseClick:c,onEscapeDown:u}):(0,i.jsx)(rk,{onHideModal:l,trackUseCaseHover:d,trackUseCaseClick:c,onEscapeDown:u})}function rw(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,[s,o]=(0,r.useState)(!1),l=(0,r.useRef)(!1),{insert:d,canInsert:c}=rC({onSuccess:()=>{l.current=!1}}),{hoveredUseCase:u,setHoveredUseCase:m,onClickCloseButton:p,onClickMoreTemplatesButton:h,onClickUseCaseTile:f,onUseCasePreview:g,useCaseTiles:x,onRadioGroupKeyDown:_}=rb({templateInsertionLocation:iW.RD.CURRENT_FILE,onHideModal:t,onClickUseCaseTile(e){l.current=!0,d(e),t(),a(e)},onUseCasePreview(e,t){k.gw5?.clearFigjamStarterKitPreview(),k.gw5?.rotateFigjamStarterKitStrings(),k.gw5?.showFigjamStarterKitPreview(t),n(e)},shouldAcceptClickUseCaseTile:()=>!l.current,style:"banner"});function y(){o(!1),k.gw5?.clearFigjamStarterKitPreview(),m(iY.f.NONE)}return c?k.gw5?(0,i.jsx)("div",{className:I.s.flex.justifyCenter.$,children:(0,i.jsx)(iM.b,{className:"browse_templates_make_something_onboarding--modalContainer--qiRHC",htmlAttributes:{onKeyDown(t){e.onEscapeDown(t,p)}},children:(0,i.jsxs)(iR.i,{children:[(0,i.jsx)("div",{className:nc()("browse_templates_make_something_onboarding--closeHeader--Spl2f",{[rh]:s}),children:(0,i.jsx)(tU.Me,{onClick:p,"aria-label":(0,j.t)("general.close"),trackingEventName:"modal closed",htmlAttributes:{"data-testid":"MakeSomethingCloseButton"},children:(0,i.jsx)(E.X,{})})}),(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--makeSomethingContainer--X0Ge8",children:[(0,i.jsxs)("div",{className:nc()("browse_templates_make_something_onboarding--titleContainer--DfoDR",{[rh]:s}),children:[(0,i.jsx)(iM.J,{className:"browse_templates_make_something_onboarding--title--XhEZv text--fontPos20Whyte--vbugh text--_fontBaseWhyte--z-Ypd",children:(0,j.tx)("figjam_onboarding_make_something.templates_modal.main_title")}),(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--subtitle--GTVFJ text--fontPos14Whyte--3uLh- text--_fontBaseWhyte--z-Ypd",children:(0,j.tx)("figjam_onboarding_make_something.templates_modal.main_subtitle")}),(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--templateButtonContainer--w8NCA",children:(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--templateButtonShadow--tXcgT",children:(0,i.jsx)(tU.c,{variant:"secondary",onClick:h,iconPrefix:(0,i.jsx)(iD.X,{}),trackingEventName:"more templates click",htmlAttributes:{onFocus:y},autoFocus:!1,children:(0,j.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button")})})})]}),(0,i.jsx)(iP.bL,{legend:(0,i.jsx)(iO.q,{children:(0,j.t)("figjam_onboarding_make_something.use_case_listbox.aria_label")}),onChange:nH.lQ,htmlAttributes:{onMouseEnter:()=>o(!0),onMouseLeave:y,onKeyDown:_,tabIndex:0},className:"browse_templates_make_something_onboarding--listItems--EFCUg",children:x.map(({headerIcon:e,headerText:t,useCase:n,previewSvg:r,previewType:a})=>(0,i.jsxs)(iP.c$,{value:n,"aria-label":t,className:nc()("browse_templates_make_something_onboarding--useCaseContainer--K-yEY",{[rh]:![iY.f.NONE,n].includes(u)}),htmlAttributes:{onFocus:()=>g(n,a),onMouseEnter:()=>g(n,a),onClick:()=>f(n),tabIndex:-1},children:[(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--useCaseHeader--wtjnP text--fontPos11Whyte--Y-Fpc text--_fontBaseWhyte--z-Ypd","aria-hidden":"true",children:[(0,i.jsx)(iB.B,{svg:e,height:"28px",width:"28px",autosize:!0,className:"browse_templates_make_something_onboarding--useCaseIcon--mNIGx",useOriginalSrcFills_DEPRECATED:!0}),t]}),(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--previewContainer--HuE9p","aria-hidden":"true",children:[(0,i.jsx)("div",{className:"browse_templates_make_something_onboarding--gradientOverlay---2DQ-"}),(0,i.jsx)("div",{children:r(u===n)})]})]},n))})]})]})})}):((0,iF.$D)(iN.e.FIGJAM,Error("Unable to present make something onboarding banner (WhiteboardStartKitCppBindings unavailable)")),null):null}function rk(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,{shiftPopupUp:s,popupRef:o}=function(){let e=i4.C()?.whiteboardToolbeltContainerNode,t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{let n=(0,i5.s)(()=>{let n=t.current?.getBoundingClientRect(),r=e?.getBoundingClientRect();n&&r&&i(r.left-n.right<24)},100);return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),{popupRef:t,shiftPopupUp:n}}(),l=(0,m.wA)(),d=(0,iK.B)(),{hoveredUseCase:c,setHoveredUseCase:u,onClickCloseButton:p,onClickMoreTemplatesButton:h,onClickUseCaseTile:f,onUseCasePreview:g,useCaseTiles:x,onRadioGroupKeyDown:_}=rb({templateInsertionLocation:iW.RD.NEW_FILE,onHideModal:t,onClickUseCaseTile(e){l(iH.zE({state:d,from:nM.f6.FIGJAM_MAKE_SOMETHING_POPUP,editorType:ic._Y.WHITEBOARD,team:void 0,openNewFileIn:nM.ai.NEW_TAB,figjamMakeSomethingUseCase:e})),a(e)},onUseCasePreview(e){n(e)},style:"popup"});return(0,i.jsx)("div",{className:nc()("browse_templates_make_something_onboarding--popupBackground--iuOEV",{"browse_templates_make_something_onboarding--popupBackgroundAboveDlt--67UbK":s}),children:(0,i.jsx)(iM.b,{className:"browse_templates_make_something_onboarding--popupModal--chh0s",ref:o,htmlAttributes:{onKeyDown(t){e.onEscapeDown(t,p)}},children:(0,i.jsxs)(iR.i,{children:[(0,i.jsxs)("div",{className:"browse_templates_make_something_onboarding--popupHeader--pJeq7",children:[(0,i.jsx)("h2",{className:"browse_templates_make_something_onboarding--popupTitle--yjFAH text--fontPos14Whyte--3uLh- text--_fontBaseWhyte--z-Ypd",children:(0,j.tx)("figjam_onboarding_make_something.popup.title")}),(0,i.jsx)(tU.Me,{onClick:p,"aria-label":(0,j.t)("general.close"),trackingEventName:"modal closed",htmlAttributes:{"data-testid":"MakeSomethingCloseButton"},children:(0,i.jsx)(E.X,{})})]}),(0,i.jsxs)("div",{className:I.s.pt8.pr12.pb12.pl12.$,children:[(0,i.jsx)(iP.bL,{legend:(0,i.jsx)(iO.q,{children:(0,j.t)("figjam_onboarding_make_something.use_case_listbox.aria_label")}),onChange:nH.lQ,htmlAttributes:{onKeyDown:_,tabIndex:0},className:"browse_templates_make_something_onboarding--popupUseCasesContainer--F0AVO",children:x.map(({headerIcon:e,headerText:t,useCase:n})=>(0,i.jsxs)(iP.c$,{value:n,"aria-label":t,className:nc()("browse_templates_make_something_onboarding--popupButton--xF8-n text--fontPos12Whyte--dR9EX text--_fontBaseWhyte--z-Ypd",{"browse_templates_make_something_onboarding--popupButtonActive--HDp85":c===n}),htmlAttributes:{onBlur:()=>u(iY.f.NONE),onClick:()=>f(n),onFocus:()=>g(n),onMouseEnter:()=>g(n),onMouseLeave:()=>u(iY.f.NONE),tabIndex:-1},children:[(0,i.jsx)(iB.B,{className:nc()({"browse_templates_make_something_onboarding--brainstormIcon--VRVNt":n===iY.f.BRAINSTORM}),svg:e,height:n===iY.f.BRAINSTORM?"16px":"20px",width:n===iY.f.BRAINSTORM?"16px":"20px",autosize:!0,useOriginalSrcFills_DEPRECATED:!0,ariaHidden:!0}),(0,i.jsx)("span",{"aria-hidden":"true",children:t})]},n))}),(0,i.jsx)(tU.lR,{trackingEventName:"more templates click",onClick:h,variant:"ghost",htmlAttributes:{onFocus:()=>u(iY.f.NONE),onMouseEnter:()=>u(iY.f.NONE)},children:(0,j.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button")})]})]})})})}function rT(){let{insert:e,canInsert:t}=rC(),[n,i]=(0,S.fp)(iI.l5),a=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{t&&n!==iY.f.NONE&&!a.current&&(e(n),a.current=!0)},[n,e,t]),(0,r.useEffect)(()=>()=>i(iY.f.NONE),[i]),null}eY.q3.SELF_CONTAINED,e=>(0,i.jsx)(rE,{hideModal:e.dismissModal});let rj=`${rc} Templates Toolbar Connector Tooltip`,rS=`${rc} Templates Toolbar Onboarding Finished Connector Tooltip`;function rI(e){return(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:iQ.G,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:i0.F_.BOTTOM,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{className:rp.RL,children:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text_bold")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta})})}function rA(e){return(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:iQ.G,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:i0.F_.BOTTOM,children:(0,i.jsx)(iJ.mI,{titleText:(0,i.jsx)("span",{className:"browse_templates_make_something_onboarding--tooltipTitle--spY0D",children:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.title_want_to_try_something_else")}),bodyText:(0,i.jsx)("span",{className:rp.$s,children:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text_bold")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta})})}function rN(e){let t=(0,S.Xr)(iI.w);return(0,th.h)(()=>{t(iI.tX.MODAL_SHOWING)}),(0,i.jsx)(eG.h,{testId:e.testId?e.testId:"MakeSomethingOnboardingOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"Make Something Modal Onboarding",element:r.useCallback(e=>(0,i.jsx)(iA.m,{role:"region","aria-label":(0,j.t)("figjam_onboarding_make_something.accessible_area.aria_label"),children:(0,i.jsx)(rE,{hideModal:e.dismissModal})}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}eY.q3.SELF_CONTAINED,eY.q3.SELF_CONTAINED;let rM="figjam_unified_onboarding_product",rR="figjam_unified_onboarding_pz";function rP(e){(0,nz.YQ)({id:e===nm.jg.PRODUCT_THEN_PZ?rM:rR})}let rO=[n8,ie];function rD(){let e=(0,S.md)(nm.Am),{show:t,uniqueId:n,isShowing:a,complete:s}=(0,f.e)({overlay:y.wRI,priority:g.N.OVERRIDING_MODAL}),o=iT((0,r.useCallback)(()=>{s(),e===nm.jg.PZ_THEN_PRODUCT&&(0,nz.YQ)({id:rM}),e===nm.jg.PRODUCT_THEN_PZ&&(0,nz.YQ)({id:iE})},[s,e]));return(0,ew.E)(n,rR,()=>{t()}),(0,i.jsx)(iS,{steps:rO,onComplete:o,isShowing:a,overlayUniqueId:n})}function rL(){let e=(0,S.md)(nm.Am),t=(0,S.md)(iI.w),{show:n,uniqueId:a,isShowing:s,complete:o}=(0,f.e)({overlay:y.Kze,priority:g.N.OVERRIDING_MODAL}),l=iT(o);return(0,ew.E)(a,rM,()=>{n()}),(0,r.useEffect)(()=>{t===iI.tX.COMPLETED&&e===nm.jg.PRODUCT_THEN_PZ&&(0,nz.YQ)({id:rR}),t===iI.tX.COMPLETED&&e===nm.jg.PZ_THEN_PRODUCT&&(0,nz.YQ)({id:iE})},[t,e]),(0,i.jsx)(rN,{onClickPrimaryCta:l,onClose:nH.lQ,onManualDismiss:l,isShowing:s})}var rF=n(127446),rB=n(366536),rU=n(270550),rV=n(439906),rH=n(73961),rz=n(538349),rG=n(790016),rK=n(397344),rW=n(585066),rq=n(485571);let rX=(0,ey.ck)("964c3ddf18b0f2712b664efde991dfc4f2c58eb8"),rY=(0,i1.Do)((e,t)=>{t(rq.V3({url:e}))});function rJ(e){let t=(0,m.wA)();return(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModalContainer--0wJX3",children:(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModalShadow--7LUms onboard_figjam_viewer--openTutorialModalBase--JaL1-",children:(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModal--8CJSc onboard_figjam_viewer--openTutorialModalBase--JaL1-",children:(0,i.jsxs)("div",{className:nJ,children:[(0,i.jsx)("div",{className:nZ,children:(0,i.jsx)("img",{className:nQ,src:rX,alt:""})}),(0,i.jsxs)("div",{className:nc()(n$,n0),children:[(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialModalText--u1rts onboard_figjam_viewer--text--LoMfL",children:(0,j.tx)("rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial")}),(0,i.jsxs)("div",{className:"onboard_figjam_viewer--openTutorialBottomContentRow--wrmbe onboard_figjam_viewer--bottomContentRow--6c9wj",children:[(0,i.jsx)(C.$n,{variant:"ghost",onClick:e.dismissModal,children:(0,j.tx)("rcs.figjam_onboarding.maybe_later")}),(0,i.jsx)("div",{className:"onboard_figjam_viewer--openTutorialButton--t6Bng",children:(0,i.jsx)(tU.$z,{onClick:()=>{if("loaded"!==e.figJamTemplateFileResult.status||null==e.figJamTemplateFileResult.data||e.figJamTemplateFileResult.data.length<1)return;let n=e.figJamTemplateFileResult.data?.[0]??null;n&&rY(n.url,t),e.dismissModal()},disabled:"loading"===e.figJamTemplateFileResult.status,variant:"primary",children:"loading"===e.figJamTemplateFileResult.status||null==e.figJamTemplateFileResult.data?(0,i.jsx)(rW.k,{"data-testid":"loading-spinner"}):(0,j.tx)("rcs.figjam_onboarding.open_tutorial")})})]})]})]})})})})}async function rZ(e){let t=(await e).data;if(!t)return!1;let n=(0,rH.kd)(t),i=(0,rH.mW)(n,"figjam_editor_onboarded");return!i&&!i&&!(()=>{let e=(0,rF.DN)();try{return!!e.get(rB.Xk)}catch(e){}return!1})()}function rQ({openFile:e}){return!!(e&&e.trackTags?.isTemplate&&e.editorType===ic._Y.WHITEBOARD)}function r$(e,t){(0,iF.kF)("type",e),(0,iF.kF)("source",t),(0,iF.us)("FigJam onboarding - Failed to load starter files; we did not render open tutorial overlay")}function r0(e){return(0,i.jsx)(ir.u9,{label:"OpenFigJamTutorialOverlay",children:(0,i.jsx)(r1,{...e})})}function r1(e){let t=(0,rG.S2)().unwrapOr(null),n=t?.key?.type,a=t?.key?.parentId,[s]=(0,rz.IT)(rU.XZ({currentOrgId:n===ic.OL.ORG?a:void 0,currentTeamId:n===ic.OL.TEAM?a:void 0,fileTags:["figjam_template"],shouldRecreate:!0}),{enabled:e.isShowing&&null!==t});return r.useEffect(()=>{"errors"===s.status&&r$("failure","curator")},[s.status]),r.useEffect(()=>{let e=setTimeout(()=>{"loading"===s.status&&r$("timeout","curator")},5e3);return()=>clearTimeout(e)},[s.status]),(0,i.jsx)(eG.h,{testId:e.testId?e.testId:"OpenFigJamTutorialOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Open Tutorial",userFlagOnShow:"figjam_editor_onboarded",element:e=>(0,i.jsx)(rJ,{...e,figJamTemplateFileResult:s}),isShowing:e.isShowing&&"loaded"===s.status,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function r2(){return(0,i.jsx)(ir.u9,{label:"OnboardFigJamViewerOverlay",children:(0,i.jsx)(r5,{})})}function r5(){let e=(0,m.wA)(),t=(0,ei.MY)(),{show:n,uniqueId:a,complete:s,isShowing:o}=(0,f.e)({overlay:y.MJs,priority:g.N.OVERRIDING_MODAL},[t]),l=function(e,t){let n=(0,r.useRef)(void 0),i=(0,r.useRef)(void 0),a=(0,r.useRef)(void 0);return((0,r.useEffect)(()=>()=>{n.current?.()},[]),i.current)?i.current:null==n.current||null==a.current?(i.current=new Promise(r=>{n.current?.(),n.current=(0,rV.WB)().subscribe(e,t,e=>{("loaded"===e.status||e.errors)&&(a.current=e,r(a.current),i.current=void 0)})}),i.current):Promise.resolve(a.current)}(iu.Tej,{}),d=(0,S.md)(ei.yV),c=(0,rK.Td)(),u=!rQ({openFile:d}),h=(0,r.useRef)(!1);(0,r.useEffect)(()=>{rZ(l).then(e=>{e&&!h.current&&n({canShow:e=>{let t=e?.editorType===ic._Y.WHITEBOARD&&!e?.canEdit;return t&&(h.current=!0),t}})})},[n,l]);let{currentStep:x,next:_,reset:b}=(0,eU.A)({numSteps:u?4:3,onComplete:s});(0,ew.E)(a,"Reset Onboarding",()=>{e(p.b({figjam_editor_onboarded:!1})),c&&(b(),n())});let v=iT(s),C=r.useMemo(()=>{let e=ii.map(e=>(0,i.jsx)(e,{isShowing:o,onClickPrimaryCta:_,onClose:nH.lQ,onManualDismiss:v},e.name));return u&&e.push((0,i.jsx)(r0,{isShowing:o,onClickPrimaryCta:_,onClose:nH.lQ,onManualDismiss:v,testId:"open_figjam_tutorial_overlay"},"OpenFigJamTutorialOverlay")),e},[_,v,o,u]);return(0,i.jsx)(ez.U,{currentStep:x,isShowing:o,children:C})}var r4=n(489445),r3=n(983363);let r6=(0,i1.Do)(()=>{let e=(0,rF.DN)();try{return!!e.get(rB.Xk)}catch(e){}return!1});function r7({isTemplateFile:e,isTryFile:t,canvasEmpty:n,onboardedToFigJam:i,cameFromWhatsNew:r}){if(i||r6())return[];let a=(0,nW.O)()?[]:ii;if(e)return a;let s=[...a,r0];return r||t||!n?s:[rN]}function r9({openFile:e}){let t=(0,S.md)(iI.l5),n=(0,S.md)(tT.zo),r=(0,S.md)(nm.Am);return t!==iY.f.NONE?null:("loaded"!==n.status||n.data)&&!r?(0,i.jsx)(at,{openFile:e}):(0,i.jsx)(ae,{openFile:e})}let r8=(e,t)=>{let n=(0,ei.MY)(),i=(0,S.Xr)(nm.Am),a=(0,S.Xr)(iI.w),s=(0,S.md)(tT.zo),o=(0,eB.aV)(),l=(0,S.md)(r4.dO).status===r3.c.LOADING;ij({overlayUniqueId:e,afterReset:()=>{i(null),a(iI.tX.NOT_STARTED)}});let d=(0,r.useRef)(!1);(0,r.useEffect)(()=>{!d.current&&"loaded"===s.status&&!o&&!l&&n.data?.canEdit&&n.data?.editorType==="whiteboard"&&(d.current=!0,t())},[t,s.status,o,l,n])};function ae({openFile:e}){let t=(0,m.d4)(e=>e.mirror.appModel.currentPage),n=(0,to.Fk)((e,t)=>(0,ts.zC)(e,t),t),a=(0,S.md)(tT.zo),s=(0,eT.Fu)("interacted_figjam_whats_new_v2_cta"),o=(0,S.md)(s),l=(0,S.Xr)(nm.Am),{getConfig:d}=(0,ne.XV)("exposed_exp_figjam_unified_onboarding","figjam_unified_onboarding"),c=(0,r.useCallback)(()=>{let e=d().get("sequence",nm.jg.DEFAULT);return l(e),e},[d,l]),[u,p]=(0,r.useState)(!1),[h,x]=(0,r.useState)([]),{show:_,uniqueId:b,isShowing:v,complete:C,experimentResult:E}=(0,f.e)({overlay:y.zoI,priority:g.N.OVERRIDING_MODAL,experiment:{check:c,predicate:e=>e!==nm.jg.DEFAULT,postCheck:e=>(e||r6()||p(!0),!1)}},[a,o]),w=(0,r.useRef)(n);(0,r.useEffect)(()=>{w.current=n},[n]);let{show:k,isShowing:T,complete:j}=(0,f.e)({overlay:y.lLk,priority:g.N.OVERRIDING_MODAL,experiment:{check:c,predicate:e=>e===nm.jg.DEFAULT,postCheck:(t,n)=>{let i=r7({isTemplateFile:rQ({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:w.current,onboardedToFigJam:t,cameFromWhatsNew:(0,tM.SS)(n)}),r=i.length>0;return r&&x(i),r}}},[a,o]),I=E||nm.jg.DEFAULT,A=I===nm.jg.DEFAULT?T:v,N=I===nm.jg.DEFAULT?j:C,M=(0,r.useMemo)(()=>I===nm.jg.DEFAULT?h:[],[I,h]);r8(b,(0,r.useCallback)(()=>{_(),k()},[_,k]));let R=iT(N),P=(0,r.useCallback)(()=>{I===nm.jg.DEFAULT?R():u&&(N(),rP(I))},[R,N,u,I]);return((0,r.useEffect)(()=>{0===M.length&&u&&I!==nm.jg.DEFAULT&&rP(I)},[u,M,I]),E&&A&&0!==M.length)?(0,i.jsx)(iS,{steps:M,onComplete:P,isShowing:A,overlayUniqueId:b}):null}function at({openFile:e}){let t=(0,m.d4)(e=>e.mirror.appModel.currentPage),n=(0,to.Fk)((e,t)=>(0,ts.zC)(e,t),t),a=(0,S.md)(tT.zo),s=(0,eT.Fu)("interacted_figjam_whats_new_v2_cta"),o=(0,S.md)(s),{show:l,uniqueId:d,isShowing:c,complete:u}=(0,f.e)({overlay:y.lLk,priority:g.N.OVERRIDING_MODAL},[a,o]),[p,h]=(0,r.useState)([]);r8(d,(0,r.useCallback)(()=>{l({canShow:(t,i)=>{let r=r7({isTemplateFile:rQ({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:n,onboardedToFigJam:t,cameFromWhatsNew:(0,tM.SS)(i)}),a=r.length>0;return a&&h(r),a}})},[l,h,n,e]));let x=iT(u);return c&&0!==p.length?(0,i.jsx)(iS,{steps:p,onComplete:x,isShowing:c,overlayUniqueId:d}):null}function an({openFile:e}){return(0,i.jsx)(r9,{openFile:e})}let ai=(0,S.eU)(async()=>{if(document.fonts&&FontFace){let e=new FontFace("Whyte",`url(${(0,ey.CZ)("webfont/1/Whyte-Regular.woff")})`);document.fonts.add(e)}await document.fonts.ready}),ar=(0,S.Rq)(ai);function aa(e){return(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:rj,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:rI,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function as(e){return(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:rS,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:rA,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ao(){let e=(0,eT.r1)("figjam_browse_templates_modal_onboarded"),t=(0,S.md)(e),n=(0,S.md)(ar),[a,s]=(0,r.useState)(!1),o=(0,nm.Un)(),{show:l,isShowing:d,uniqueId:c,complete:u}=(0,f.e)({overlay:y.kp0,priority:g.N.OVERRIDING_MODAL},[t,n]);return(0,ew.E)(c,ru,()=>{s(!0),l({canShow:e=>!e&&!o})}),(0,ew.E)(c,eX.P7,()=>{l({canShow:e=>!e&&!o})}),a?(0,i.jsx)(aa,{isShowing:d,onClickPrimaryCta:u,onClose:u,onManualDismiss:u}):(0,i.jsx)(as,{isShowing:d,onClickPrimaryCta:u,onClose:u,onManualDismiss:u})}var al=n(747530),ad=n(727537),ac=n(249657),au=n(176581);let am={};function ap(e){return am[e]??""}function ah(e){return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.BRAINSTORM,children:(0,i.jsx)(iJ.wV,{bodyText:(0,i.jsx)("span",{className:rp.R9,children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming_prefix")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:rf.A})})}function af(e){let{onClickPrimaryCta:t,dismissModal:n}=e;return r.useEffect(()=>{function e(e){var n;t(),n=e.nodeId,am.createdSticky=n}return nq.Y5.fromFullscreen.on("createdSticky",e),()=>{nq.Y5.fromFullscreen.removeListener("createdSticky",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.BRAINSTORM,children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:au.s2,topPadding:-4,autoWidth:!0,isBold:!0,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above_bold_text")})})})})})})}function ag(e){let[t]=r.useState(()=>ap("createdSticky")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.BRAINSTORM,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.LEFT_TITLE,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function ax(e){let{onClickPrimaryCta:t,dismissModal:n}=e,{handleTargetLost:a}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>{function e(e){var n;t(),n=e.nodeId,am.createdStamp=n}return nq.Y5.fromFullscreen.on("createdStamp",e),()=>{nq.Y5.fromFullscreen.removeListener("createdStamp",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.BRAINSTORM,children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:au.E$,topPadding:-6,isBold:!0,autoWidth:!0,onTargetLost:a,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something_bold_text")})})})})})})}function a_(e){let[t]=r.useState(()=>ap("createdStamp")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.BRAINSTORM,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.TOP,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function ay(e){let t=(0,m.wA)(),n=(0,ac.MR)(),a=(0,ac.qU)(),[s,o]=r.useState("invalid"),{handleTargetLost:l}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>(n({source:ac.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(al.lu({state:"open",userInitiated:!1})),o(ad.Hm),()=>{a({source:ac.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(al.lu({state:"closed",userInitiated:!1}))}),[a,t,n]),(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.BRAINSTORM,children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:s,topPadding:-4,isBold:!0,autoWidth:!0,onTargetLost:l,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function ab(e){let{onNext:t}=i3({...e,useCase:iY.f.BRAINSTORM});return(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:eX.v4,topPadding:-4,isBold:!0,hasShadow:!0,children:(0,i.jsx)(n2,{titleText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.start_a_brainstorm_by_inviting_a_few_people_here_that_s_it"),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iJ.mN,isBold:!0})})}function av(e){return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Intro",stepNum:1}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:ah,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aC(e){return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Sticky Prompt",stepNum:2}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Sticky Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:af,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aE(e){return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Sticky Reaction",stepNum:3}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Sticky Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:ag,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aw(e){return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Stamp Prompt",stepNum:4}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Stamp Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:ax,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ak(e){return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Stamp Reaction",stepNum:5}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Stamp Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:a_,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aT(e){return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Timer",stepNum:6}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Timer`,userFlagOnShow:"figjam_editor_onboarded",element:ay,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aj(e){let t=(0,nX.O)();return(0,iJ.rL)({useCase:iY.f.BRAINSTORM,stepName:"Share",stepNum:7}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Brainstorm - Share`,userFlagOnShow:"figjam_editor_onboarded",element:ab,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iY.f.BRAINSTORM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function aS(e){return r.useEffect(()=>{!function(){let e=(0,B.UN)().getCurrentPage();if(e&&e.childCount>=1){var t,n,i;let r=e.childrenNodes[0];if(r?.type==="SECTION"&&r.childCount>=1){let e=r.childrenNodes[0];e?.type==="SHAPE_WITH_TEXT"&&(t=e.guid,am.planningAheadInitialNode=t)}if(r?.type==="SECTION"&&r.childCount>=9){let e=r.childrenNodes[8];e?.type==="TEXT"&&(n=e.guid,am.planningAheadPerson=n)}if(r?.type==="SECTION"&&r.childCount>=4){let e=r.childrenNodes[3];e?.type==="SHAPE_WITH_TEXT"&&(i=e.guid,am.planningAheadProject=i)}}}()},[]),(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.PLAN,children:(0,i.jsx)(iJ.wV,{bodyText:(0,i.jsx)("span",{className:rp.R9,children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:rg.A})})}function aI(e){let[t]=r.useState(()=>ap("planningAheadInitialNode")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.PLAN,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-7,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.start_with_a_simple_timeline_with_a_row_for_each_member_of_your_team")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aA(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=r.useState(()=>ap("planningAheadPerson")),{handleTargetLost:s}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>{function e(){t()}return nq.Y5.fromFullscreen.on("finishedEditingText",e),()=>{nq.Y5.fromFullscreen.removeListener("finishedEditingText",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.PLAN,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:a,topPadding:2,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.LEFT_TITLE,onTargetLost:s,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top_bold_text")})})})})})})}function aN(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=r.useState(()=>ap("planningAheadProject")),{handleTargetLost:s}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>{function e(){t()}return nq.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{nq.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.PLAN,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:s,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project_bold_text")})})})})})})}function aM(e){let[t]=r.useState(()=>ap("planningAheadProject")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.PLAN,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.LEFT_TITLE,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.you_can_resize_blocks_by_dragging_their_ends"),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aR(e){let{handleTargetLost:t}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.PLAN,children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:au.WB,topPadding:2,isBold:!0,autoWidth:!0,onTargetLost:t,children:(0,i.jsx)(iJ.mI,{bodyText:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.and_grab_more_shapes_as_needed_from_your_toolbar"),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aP(e){let{onNext:t}=i3({...e,useCase:iY.f.PLAN});return(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:eX.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0,children:(0,i.jsx)(n2,{titleText:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.try_it_with_your_team"),bodyText:(0,j.tx)("figjam_onboarding_make_something.planning_ahead.share_this_board_and_your_whole_team_can_contribute"),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iJ.mN,isBold:!0})})}function aO(e){return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Intro",stepNum:1}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:aS,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aD(e){return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Section",stepNum:2}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Section`,userFlagOnShow:"figjam_editor_onboarded",element:aI,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aL(e){return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Person",stepNum:3}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Person`,userFlagOnShow:"figjam_editor_onboarded",element:aA,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aF(e){return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Project Name",stepNum:4}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Project Name`,userFlagOnShow:"figjam_editor_onboarded",element:aN,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aB(e){return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Project Block",stepNum:5}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Project Block`,userFlagOnShow:"figjam_editor_onboarded",element:aM,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aU(e){return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Shape",stepNum:6}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:aR,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aV(e){let t=(0,nX.O)();return(0,iJ.rL)({useCase:iY.f.PLAN,stepName:"Share",stepNum:7}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Planning Ahead - Share`,userFlagOnShow:"figjam_editor_onboarded",element:aP,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iY.f.PLAN}),e.onClose()},onManualDismiss:e.onManualDismiss})}function aH(e){return r.useEffect(()=>{!function(){var e,t,n;let i=(0,B.UN)().getCurrentPage();if(i){if(i.childCount>=1){let t=i.childrenNodes[0];t?.type==="SHAPE_WITH_TEXT"&&(e=t.guid,am.teamChartName=e)}if(i.childCount>=2){let e=i.childrenNodes[1];e?.type==="ROUNDED_RECTANGLE"&&(t=e.guid,am.teamChartImage=t)}if(i.childCount>=5){let e=i.childrenNodes[4];e?.type==="SHAPE_WITH_TEXT"&&(n=e.guid,am.teamChartQuickCreate=n)}}}()},[]),(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.TEAM,children:(0,i.jsx)(iJ.wV,{bodyText:(0,i.jsx)("span",{className:rp.R9,children:(0,j.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:rx.A})})}function az(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=r.useState(()=>ap("teamChartName")),{handleTargetLost:s}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>{function e(){t()}return nq.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{nq.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.TEAM,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:s,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it_bold_text")})})})})})})}function aG(e){let[t]=r.useState(()=>ap("teamChartImage")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.TEAM,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.LEFT_TITLE,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.you_can_add_images_by_simply_dragging_them_into_fig_jam")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aK(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=r.useState(()=>ap("teamChartQuickCreate")),{handleTargetLost:s}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>{function e(){t()}return nq.Y5.fromFullscreen.on("quickCreate",e),()=>{nq.Y5.fromFullscreen.removeListener("quickCreate",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.TEAM,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:a,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.RIGHT_TITLE,onTargetLost:s,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it_bold_text")})})})})})})}function aW(e){let{handleTargetLost:t}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.TEAM,children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:au.WB,topPadding:2,isBold:!0,autoWidth:!0,onTargetLost:t,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.you_can_also_grab_more_shapes_from_here")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aq(e){let{handleTargetLost:t}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.TEAM,children:(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:au.Nr,topPadding:-1,isBold:!0,autoWidth:!0,onTargetLost:t,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.and_use_the_connector_tool_to_connect_any_two_things_together")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function aX(e){let{onNext:t}=i3({...e,useCase:iY.f.TEAM});return(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:eX.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0,children:(0,i.jsx)(n2,{titleText:(0,j.tx)("figjam_onboarding_make_something.team_chart.diagram_together"),bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_chart.share_this_board_and_your_whole_team_can_pitch_in")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iJ.mN,isBold:!0})})}function aY(e){return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Intro",stepNum:1}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:aH,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aJ(e){return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Name",stepNum:2}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Name`,userFlagOnShow:"figjam_editor_onboarded",element:az,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aZ(e){return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Image",stepNum:3}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Image`,userFlagOnShow:"figjam_editor_onboarded",element:aG,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function aQ(e){return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Quick Create",stepNum:4}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Quick Create`,userFlagOnShow:"figjam_editor_onboarded",element:aK,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a$(e){return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Shape",stepNum:5}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:aW,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a0(e){return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Connector",stepNum:6}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Connector`,userFlagOnShow:"figjam_editor_onboarded",element:aq,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function a1(e){let t=(0,nX.O)();return(0,iJ.rL)({useCase:iY.f.TEAM,stepName:"Share",stepNum:7}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Chart - Share`,userFlagOnShow:"figjam_editor_onboarded",element:aX,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iY.f.TEAM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function a2(e){return r.useEffect(()=>{!function(){var e,t,n,i,r;let a=(0,B.UN)().getCurrentPage();if(a){if(a.childCount>=1){let t=a.childrenNodes[0];t?.type==="SECTION"&&(e=t.guid,am.teamUpdatesSection=e)}if(a.childCount>=6){let e=a.childrenNodes[5];e?.type==="WIDGET"&&(t=e.guid,am.teamUpdatesPhotoBooth=t)}if(a.childCount>=4){let e=a.childrenNodes[3];e?.type==="TEXT"&&(n=e.guid,am.teamUpdatesUpdates=n)}if(a.childCount>=5){let e=a.childrenNodes[4];e?.type==="TEXT"&&(i=e.guid,am.teamUpdatesImportantDates=i)}if(a.childCount>=1){let e=a.childrenNodes[0];if(e?.type==="SECTION"&&e.childCount>=2){let t=e.childrenNodes[1];t?.type==="STICKY"&&(r=t.guid,am.teamUpdatesSticky=r)}}}}()},[]),(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.UPDATES,children:(0,i.jsx)(iJ.wV,{bodyText:(0,i.jsx)("span",{className:rp.R9,children:(0,j.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:r_.A})})}function a5(e){let[t]=r.useState(()=>ap("teamUpdatesSection")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.UPDATES,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.each_person_gets_a_row_of_their_own_for_sharing_updates_and_priorities")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function a4(e){let[t]=r.useState(()=>ap("teamUpdatesPhotoBooth")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.UPDATES,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot_bold_text")})})}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function a3(e){let[t]=r.useState(()=>ap("teamUpdatesUpdates")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.UPDATES,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.your_whole_team_can_share_updates_here")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function a6(e){let[t]=r.useState(()=>ap("teamUpdatesImportantDates")),{handleTargetLost:n}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return(0,i.jsx)(iJ.vX,{onSkipClick:e.dismissModal,useCase:iY.f.UPDATES,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.BOTTOM,onTargetLost:n,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.and_can_add_important_dates_to_the_calendar_over_here")}),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})})})}function a7(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=r.useState(()=>ap("teamUpdatesSticky")),{handleTargetLost:s}=(0,nK.Du)({shouldSkipConnectorModalAtom:iI.aG,skipConnectorModal:e.onClickPrimaryCta});return r.useEffect(()=>{function e(){t()}return nq.Y5.fromFullscreen.on("finishedEditingSticky",e),()=>{nq.Y5.fromFullscreen.removeListener("finishedEditingSticky",e)}},[t]),(0,i.jsx)(iJ.vX,{onSkipClick:n,useCase:iY.f.UPDATES,children:(0,i.jsx)(nK.Dv,{targetType:"canvas",targetKey:a,topPadding:-16,isBold:!0,autoWidth:!0,arrowPosition:i0.F_.TOP,onTargetLost:s,children:(0,i.jsx)(iJ.mI,{bodyText:(0,i.jsx)("span",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note",{boldText:(0,i.jsx)("b",{children:(0,j.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note_bold_text")})})})})})})}function a9(e){let{onNext:t}=i3({...e,useCase:iY.f.UPDATES});return(0,i.jsx)(nK.Dv,{targetType:"dom",targetKey:eX.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0,children:(0,i.jsx)(n2,{titleText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,j.tx)("figjam_onboarding_make_something.team_updates.invite_your_teammates_and_run_a_quick_team_check_in"),buttonText:(0,j.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:iJ.mN,isBold:!0})})}function a8(e){return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Intro",stepNum:1}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:a2,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function se(e){return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Section",stepNum:2}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Section`,userFlagOnShow:"figjam_editor_onboarded",element:a5,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function st(e){return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Photo Booth",stepNum:3}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Photo Booth`,userFlagOnShow:"figjam_editor_onboarded",element:a4,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function sn(e){return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Updates",stepNum:4}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Updates`,userFlagOnShow:"figjam_editor_onboarded",element:a3,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function si(e){return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Important Dates",stepNum:5}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Important Dates`,userFlagOnShow:"figjam_editor_onboarded",element:a6,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function sr(e){return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Sticky",stepNum:6}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Sticky`,userFlagOnShow:"figjam_editor_onboarded",element:a7,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function sa(e){let t=(0,nX.O)();return(0,iJ.rL)({useCase:iY.f.UPDATES,stepName:"Share",stepNum:7}),(0,i.jsx)(eG.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${iJ.CM} - Team Updates - Share`,userFlagOnShow:"figjam_editor_onboarded",element:a9,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:iY.f.UPDATES}),e.onClose()},onManualDismiss:e.onManualDismiss})}function ss(e){switch(e){case rm.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED:return[av,aC,aE,aw,ak,aT,aj,so];case rm.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED:return[a8,se,st,sn,si,sr,sa,so];case rm.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED:return[aO,aD,aL,aF,aB,aU,aV,so];case rm.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED:return[aY,aJ,aZ,aQ,a$,a0,a1,so];default:return[]}}function so({onClickPrimaryCta:e}){let t=(0,m.d4)(e=>e.modalShown),n=(0,r.useRef)(t);return(0,r.useEffect)(()=>{!t&&n.current&&(e(),(0,nz.YQ)({id:eX.P7}))},[e,t]),(0,i.jsx)(i.Fragment,{})}function sl(){let[e,t]=r.useState([]),n=(0,S.Xr)(iI.w),{complete:a,uniqueId:s,show:o,isShowing:l}=(0,f.e)({overlay:y.Njd,priority:g.N.OVERRIDING_MODAL}),d=r.useCallback(()=>{a(),n(iI.tX.COMPLETED)},[a,n]);return((0,ew.E)(s,rm.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,()=>{t(ss(rm.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED)),n(iI.tX.USE_CASE_STEPS),o()}),(0,ew.E)(s,rm.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,()=>{t(ss(rm.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED)),n(iI.tX.USE_CASE_STEPS),o()}),(0,ew.E)(s,rm.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,()=>{t(ss(rm.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED)),n(iI.tX.USE_CASE_STEPS),o()}),(0,ew.E)(s,rm.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED,()=>{t(ss(rm.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED)),n(iI.tX.USE_CASE_STEPS),o()}),ij({overlayUniqueId:s,afterReset:a}),0===e.length)?null:(0,i.jsx)(iS,{steps:e,onComplete:d,isShowing:l,overlayUniqueId:s})}var sd=n(462710),sc=n(624245),su=n(154811),sm=n(227517),sp=n(418977),sh=n(28014),sf=n(267745),sg=n(11003),sx=n(747079),s_=n(717096);function sy(){return(0,i.jsxs)("svg",{width:"146",height:"191",viewBox:"0 0 146 191",fill:"none",children:[(0,i.jsx)("path",{d:"M35 153H3C1.34315 153 0 154.343 0 156V188C0 189.657 1.34315 191 3 191H35C36.6569 191 38 189.657 38 188V156C38 154.343 36.6569 153 35 153Z",fill:"#007BE5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.875 166.25C22.4943 166.25 21.375 167.369 21.375 168.75C21.375 170.131 22.4943 171.25 23.875 171.25C25.2557 171.25 26.375 170.131 26.375 168.75C26.375 167.369 25.2557 166.25 23.875 166.25ZM19.875 168.75C19.875 166.541 21.6659 164.75 23.875 164.75C26.0841 164.75 27.875 166.541 27.875 168.75C27.875 170.3 26.9937 171.644 25.7049 172.308C28.337 173.03 30.3125 175.271 30.3125 178.012V179.312V180.062H29.5625H20.5625H19.8125H18.1875H8.4375H7.6875V179.312V178.012C7.6875 175.271 9.663 173.03 12.2951 172.308C11.0063 171.644 10.125 170.3 10.125 168.75C10.125 166.541 11.9159 164.75 14.125 164.75C16.3341 164.75 18.125 166.541 18.125 168.75C18.125 170.3 17.2437 171.644 15.9549 172.308C17.1449 172.634 18.2008 173.271 19.0005 174.125C19.7985 173.271 20.8514 172.633 22.0433 172.307C20.7555 171.642 19.875 170.299 19.875 168.75ZM9.1875 178.012C9.1875 175.617 11.3334 173.562 14.125 173.562C16.9166 173.562 19.0625 175.617 19.0625 178.012V178.562H18.1875H9.1875V178.012ZM20.5625 178.562H28.8125V178.012C28.8125 175.617 26.6666 173.562 23.875 173.562C22.2296 173.562 20.7911 174.286 19.8997 175.374C20.323 176.164 20.5625 177.058 20.5625 178.012V178.562ZM11.625 168.75C11.625 167.369 12.7443 166.25 14.125 166.25C15.5057 166.25 16.625 167.369 16.625 168.75C16.625 170.131 15.5057 171.25 14.125 171.25C12.7443 171.25 11.625 170.131 11.625 168.75Z",fill:"white"}),(0,i.jsx)("path",{d:"M89 153H57C55.3431 153 54 154.343 54 156V188C54 189.657 55.3431 191 57 191H89C90.6569 191 92 189.657 92 188V156C92 154.343 90.6569 153 89 153Z",fill:"#9747FF"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M77.875 166.25C76.4943 166.25 75.375 167.369 75.375 168.75C75.375 170.131 76.4943 171.25 77.875 171.25C79.2557 171.25 80.375 170.131 80.375 168.75C80.375 167.369 79.2557 166.25 77.875 166.25ZM73.875 168.75C73.875 166.541 75.6659 164.75 77.875 164.75C80.0841 164.75 81.875 166.541 81.875 168.75C81.875 170.3 80.9937 171.644 79.7049 172.308C82.337 173.03 84.3125 175.271 84.3125 178.012V179.312V180.062H83.5625H74.5625H73.8125H72.1875H62.4375H61.6875V179.312V178.012C61.6875 175.271 63.663 173.03 66.2951 172.308C65.0063 171.644 64.125 170.3 64.125 168.75C64.125 166.541 65.9159 164.75 68.125 164.75C70.3341 164.75 72.125 166.541 72.125 168.75C72.125 170.3 71.2437 171.644 69.9549 172.308C71.1449 172.634 72.2008 173.271 73.0005 174.125C73.7985 173.271 74.8514 172.633 76.0433 172.307C74.7555 171.642 73.875 170.299 73.875 168.75ZM63.1875 178.012C63.1875 175.617 65.3334 173.562 68.125 173.562C70.9166 173.562 73.0625 175.617 73.0625 178.012V178.562H72.1875H63.1875V178.012ZM74.5625 178.562H82.8125V178.012C82.8125 175.617 80.6666 173.562 77.875 173.562C76.2296 173.562 74.7911 174.286 73.8997 175.374C74.323 176.164 74.5625 177.058 74.5625 178.012V178.562ZM65.625 168.75C65.625 167.369 66.7443 166.25 68.125 166.25C69.5057 166.25 70.625 167.369 70.625 168.75C70.625 170.131 69.5057 171.25 68.125 171.25C66.7443 171.25 65.625 170.131 65.625 168.75Z",fill:"white"}),(0,i.jsx)("path",{d:"M143 153H111C109.343 153 108 154.343 108 156V188C108 189.657 109.343 191 111 191H143C144.657 191 146 189.657 146 188V156C146 154.343 144.657 153 143 153Z",fill:"#FFCD29"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M131.875 166.25C130.494 166.25 129.375 167.369 129.375 168.75C129.375 170.131 130.494 171.25 131.875 171.25C133.256 171.25 134.375 170.131 134.375 168.75C134.375 167.369 133.256 166.25 131.875 166.25ZM127.875 168.75C127.875 166.541 129.666 164.75 131.875 164.75C134.084 164.75 135.875 166.541 135.875 168.75C135.875 170.3 134.994 171.644 133.705 172.308C136.337 173.03 138.312 175.271 138.312 178.012V179.312V180.062H137.562H128.562H127.812H126.188H116.438H115.688V179.312V178.012C115.688 175.271 117.663 173.03 120.295 172.308C119.006 171.644 118.125 170.3 118.125 168.75C118.125 166.541 119.916 164.75 122.125 164.75C124.334 164.75 126.125 166.541 126.125 168.75C126.125 170.3 125.244 171.644 123.955 172.308C125.145 172.634 126.201 173.271 127 174.125C127.799 173.271 128.851 172.633 130.043 172.307C128.755 171.642 127.875 170.299 127.875 168.75ZM117.188 178.012C117.188 175.617 119.333 173.562 122.125 173.562C124.917 173.562 127.062 175.617 127.062 178.012V178.562H126.188H117.188V178.012ZM128.562 178.562H136.812V178.012C136.812 175.617 134.667 173.562 131.875 173.562C130.23 173.562 128.791 174.286 127.9 175.374C128.323 176.164 128.562 177.058 128.562 178.012V178.562ZM119.625 168.75C119.625 167.369 120.744 166.25 122.125 166.25C123.506 166.25 124.625 167.369 124.625 168.75C124.625 170.131 123.506 171.25 122.125 171.25C120.744 171.25 119.625 170.131 119.625 168.75Z",fill:"white"}),(0,i.jsx)("path",{d:"M112.581 1L125 13.7668V113H20V1H112.581Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 0.5H112.792L125.5 13.5637V113.5H19.5V0.5ZM20.5 1.5V112.5H124.5V14.2668H112.081V1.5H20.5ZM113.081 2.23108L123.816 13.2668H113.081V2.23108Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M38 71C41.866 71 45 67.866 45 64C45 60.134 41.866 57 38 57C34.134 57 31 60.134 31 64C31 67.866 34.134 71 38 71Z",fill:"#56CCF2",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M60 71C63.866 71 67 67.866 67 64C67 60.134 63.866 57 60 57C56.134 57 53 60.134 53 64C53 67.866 56.134 71 60 71Z",fill:"#EB5757"}),(0,i.jsx)("path",{d:"M82 71C85.866 71 89 67.866 89 64C89 60.134 85.866 57 82 57C78.134 57 75 60.134 75 64C75 67.866 78.134 71 82 71Z",fill:"#F2994A"}),(0,i.jsx)("path",{d:"M104 71C107.866 71 111 67.866 111 64C111 60.134 107.866 57 104 57C100.134 57 97 60.134 97 64C97 67.866 100.134 71 104 71Z",fill:"#F2C94C"}),(0,i.jsx)("path",{d:"M38 49C41.866 49 45 45.866 45 42C45 38.134 41.866 35 38 35C34.134 35 31 38.134 31 42C31 45.866 34.134 49 38 49Z",fill:"#333333"}),(0,i.jsx)("path",{d:"M60 49C63.866 49 67 45.866 67 42C67 38.134 63.866 35 60 35C56.134 35 53 38.134 53 42C53 45.866 56.134 49 60 49Z",fill:"#4F4F4F"}),(0,i.jsx)("path",{d:"M82 49C85.866 49 89 45.866 89 42C89 38.134 85.866 35 82 35C78.134 35 75 38.134 75 42C75 45.866 78.134 49 82 49Z",fill:"#828282"}),(0,i.jsx)("path",{d:"M104 49C107.866 49 111 45.866 111 42C111 38.134 107.866 35 104 35C100.134 35 97 38.134 97 42C97 45.866 100.134 49 104 49Z",fill:"#E0E0E0"}),(0,i.jsx)("path",{d:"M36.66 20L36.1 18.36H33.26L32.68 20H31.05L33.72 13H35.69L38.34 20H36.66ZM33.7 17.1H35.67L35.15 15.58C34.99 15.11 34.97 14.59 34.96 13.85H34.42C34.41 14.59 34.4 15.11 34.23 15.59L33.7 17.1ZM39.9023 21.95C38.9523 21.95 38.6523 21.49 38.6523 21.01C38.6523 20.61 38.9823 20.32 39.3423 20.21V19.75C39.0223 19.66 38.7723 19.44 38.7723 19.08C38.7723 18.54 39.1623 18.28 39.5923 18.14V17.69C39.2423 17.44 39.0223 17.16 39.0223 16.65C39.0223 15.6 39.9323 14.85 41.1023 14.85C41.9223 14.85 42.6723 15.17 42.9323 15.9H43.3623C43.4423 15.17 43.6723 15 44.1523 15H44.4123V16.08H43.8623C43.5523 16.08 43.4723 16.15 43.4123 16.66L43.4023 16.75C43.2823 17.83 42.4123 18.49 41.2423 18.49C40.8723 18.49 40.5023 18.45 40.2023 18.32C39.9223 18.4 39.8223 18.51 39.8223 18.67C39.8223 18.89 40.0323 18.89 40.3223 18.89H42.4723C43.5423 18.89 44.2123 19.59 44.2123 20.4C44.2123 21.41 43.4523 21.95 42.4723 21.95H39.9023ZM41.2323 17.56C41.7623 17.56 42.1123 17.22 42.1123 16.71C42.1123 16.19 41.7623 15.81 41.2323 15.81C40.7023 15.81 40.3523 16.19 40.3523 16.71C40.3523 17.22 40.7023 17.56 41.2323 17.56ZM40.2423 20.92H42.1923C42.6623 20.92 42.8123 20.73 42.8123 20.45C42.8123 20.22 42.6623 20 42.1923 20H40.0023C39.8823 20.07 39.7423 20.25 39.7423 20.45C39.7423 20.77 39.9723 20.92 40.2423 20.92Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M54.62 20L53.97 18.15H50.89L50.23 20H49.15L51.78 13H53.16L55.74 20H54.62ZM51.22 17.23H53.64L52.97 15.33C52.77 14.75 52.66 14.35 52.65 13.7H52.23C52.21 14.35 52.11 14.76 51.9 15.33L51.22 17.23ZM57.4441 21.95C56.5441 21.95 56.2441 21.45 56.2441 21.05C56.2441 20.6 56.5041 20.27 56.9341 20.08V19.72C56.6641 19.63 56.4441 19.41 56.4441 19.11C56.4441 18.73 56.7041 18.43 57.1841 18.23V17.87C56.8741 17.62 56.6441 17.28 56.6441 16.64C56.6441 15.7 57.4141 14.9 58.5441 14.9C59.5941 14.9 60.0441 15.46 60.2141 15.87H60.5641C60.6041 15.4 60.8441 15.04 61.3241 15.04H61.6641V15.82H61.2541C60.8341 15.82 60.6741 15.92 60.6341 16.49L60.6141 16.73C60.5241 17.85 59.7541 18.57 58.6441 18.57C58.3041 18.57 57.9841 18.53 57.7041 18.38C57.4341 18.49 57.2641 18.67 57.2641 18.85C57.2641 19.02 57.3641 19.17 57.7041 19.17H59.8541C60.8241 19.17 61.4541 19.73 61.4541 20.56C61.4541 21.49 60.7341 21.95 59.8741 21.95H57.4441ZM58.6441 17.83C59.2941 17.83 59.7141 17.4 59.7141 16.74C59.7141 16.09 59.2941 15.64 58.6441 15.64C57.9941 15.64 57.5741 16.09 57.5741 16.74C57.5741 17.4 57.9941 17.83 58.6441 17.83ZM57.8241 21.15H59.7541C60.1541 21.15 60.5041 21.04 60.5041 20.57C60.5041 20.1 60.1541 20 59.7541 20H57.4341C57.2741 20.1 57.0741 20.32 57.0741 20.63C57.0741 21.03 57.3441 21.15 57.8241 21.15Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M67.4862 20H66.2205L68.5249 13.4545H69.9886L72.2962 20H71.0305L69.2823 14.7969H69.2312L67.4862 20ZM67.5277 17.4336H70.9794V18.386H67.5277V17.4336ZM75.1377 21.9432C74.7222 21.9432 74.3653 21.8867 74.067 21.7738C73.7687 21.663 73.529 21.5138 73.3479 21.3263C73.1668 21.1388 73.0411 20.9311 72.9708 20.7031L74.0127 20.4506C74.0596 20.5465 74.1277 20.6413 74.2172 20.7351C74.3067 20.831 74.4271 20.9098 74.5784 20.9716C74.7318 21.0355 74.9246 21.0675 75.1569 21.0675C75.485 21.0675 75.7566 20.9876 75.9718 20.8278C76.187 20.6701 76.2946 20.4102 76.2946 20.0479V19.1179H76.2371C76.1775 19.2372 76.0901 19.3597 75.975 19.4854C75.8621 19.6112 75.7119 19.7166 75.5244 19.8018C75.339 19.8871 75.1057 19.9297 74.8245 19.9297C74.4473 19.9297 74.1054 19.8413 73.7986 19.6644C73.4939 19.4854 73.251 19.2191 73.0699 18.8654C72.8909 18.5096 72.8014 18.0643 72.8014 17.5295C72.8014 16.9904 72.8909 16.5355 73.0699 16.1648C73.251 15.7919 73.4949 15.5096 73.8017 15.3178C74.1086 15.1239 74.4505 15.027 74.8277 15.027C75.1153 15.027 75.3518 15.076 75.5372 15.174C75.7247 15.2699 75.8738 15.386 75.9846 15.5224C76.0954 15.6566 76.1796 15.7834 76.2371 15.9027H76.301V15.0909H77.442V20.0799C77.442 20.4996 77.3419 20.8469 77.1416 21.1218C76.9413 21.3967 76.6675 21.6023 76.3202 21.7386C75.9729 21.875 75.5787 21.9432 75.1377 21.9432ZM75.1473 19.022C75.3923 19.022 75.6011 18.9624 75.7737 18.843C75.9463 18.7237 76.0773 18.5522 76.1668 18.3285C76.2563 18.1048 76.301 17.8363 76.301 17.5231C76.301 17.2141 76.2563 16.9435 76.1668 16.7113C76.0794 16.479 75.9495 16.299 75.7769 16.1712C75.6064 16.0412 75.3966 15.9762 75.1473 15.9762C74.8895 15.9762 74.6743 16.0433 74.5017 16.1776C74.3291 16.3118 74.1991 16.4961 74.1118 16.7305C74.0244 16.9627 73.9807 17.2269 73.9807 17.5231C73.9807 17.8235 74.0244 18.0866 74.1118 18.3125C74.2013 18.5362 74.3323 18.7109 74.5049 18.8366C74.6796 18.9602 74.8937 19.022 75.1473 19.022Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M84.0611 20H83.2301L85.6335 13.4545H86.4517L88.8551 20H88.0241L86.0682 14.4901H86.017L84.0611 20ZM84.3679 17.4432H87.7173V18.1463H84.3679V17.4432ZM91.7989 21.9432C91.4346 21.9432 91.1213 21.8963 90.8593 21.8026C90.5972 21.7109 90.3788 21.5895 90.2041 21.4382C90.0315 21.2891 89.8941 21.1293 89.7918 20.9588L90.3927 20.5369C90.4608 20.6264 90.5471 20.7287 90.6515 20.8438C90.7559 20.9609 90.8987 21.0621 91.0798 21.1474C91.263 21.2347 91.5027 21.2784 91.7989 21.2784C92.1952 21.2784 92.5223 21.1825 92.7801 20.9908C93.0379 20.799 93.1668 20.4986 93.1668 20.0895V19.0923H93.1029C93.0475 19.1818 92.9687 19.2926 92.8664 19.4247C92.7662 19.5547 92.6213 19.6708 92.4317 19.7731C92.2442 19.8732 91.9907 19.9233 91.6711 19.9233C91.2748 19.9233 90.9189 19.8295 90.6036 19.642C90.2904 19.4545 90.0422 19.1818 89.8589 18.8239C89.6778 18.4659 89.5873 18.0312 89.5873 17.5199C89.5873 17.017 89.6757 16.5792 89.8525 16.2063C90.0294 15.8313 90.2755 15.5415 90.5908 15.337C90.9062 15.1303 91.2705 15.027 91.6838 15.027C92.0035 15.027 92.257 15.0803 92.4445 15.1868C92.6341 15.2912 92.779 15.4105 92.8792 15.5447C92.9814 15.6768 93.0603 15.7855 93.1157 15.8707H93.1924V15.0909H93.9211V20.1406C93.9211 20.5625 93.8252 20.9055 93.6334 21.1697C93.4438 21.4361 93.1881 21.631 92.8664 21.7546C92.5468 21.8803 92.191 21.9432 91.7989 21.9432ZM91.7733 19.2457C92.0759 19.2457 92.3316 19.1765 92.5404 19.038C92.7492 18.8995 92.9079 18.7003 93.0166 18.4403C93.1253 18.1804 93.1796 17.8693 93.1796 17.5071C93.1796 17.1534 93.1263 16.8413 93.0198 16.5707C92.9133 16.3001 92.7556 16.0881 92.5468 15.9347C92.338 15.7812 92.0802 15.7045 91.7733 15.7045C91.4537 15.7045 91.1874 15.7855 90.9743 15.9474C90.7634 16.1094 90.6047 16.3267 90.4981 16.5994C90.3937 16.8722 90.3415 17.1747 90.3415 17.5071C90.3415 17.848 90.3948 18.1495 90.5013 18.4116C90.61 18.6715 90.7698 18.8761 90.9807 19.0252C91.1938 19.1722 91.458 19.2457 91.7733 19.2457Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M75.8419 93V88.6364H77.4399C77.7496 88.6364 78.006 88.6875 78.2091 88.7898C78.4122 88.8906 78.5642 89.0277 78.6651 89.201C78.7659 89.3729 78.8163 89.5668 78.8163 89.7827C78.8163 89.9645 78.783 90.1179 78.7162 90.2429C78.6494 90.3665 78.5599 90.4659 78.4477 90.5412C78.3369 90.6151 78.2148 90.669 78.0813 90.7031V90.7457C78.2261 90.7528 78.3675 90.7997 78.5053 90.8864C78.6445 90.9716 78.7595 91.093 78.8504 91.2507C78.9413 91.4084 78.9868 91.6001 78.9868 91.826C78.9868 92.049 78.9342 92.2493 78.8291 92.4268C78.7254 92.603 78.5649 92.7429 78.3476 92.8466C78.1303 92.9489 77.8526 93 77.5145 93H75.8419ZM76.5003 92.4354H77.4506C77.7659 92.4354 77.9918 92.3743 78.1281 92.2521C78.2645 92.13 78.3327 91.9773 78.3327 91.794C78.3327 91.6562 78.2979 91.5298 78.2283 91.4148C78.1587 91.2997 78.0592 91.2081 77.93 91.1399C77.8021 91.0717 77.6501 91.0376 77.474 91.0376H76.5003V92.4354ZM76.5003 90.5241H77.3824C77.5301 90.5241 77.6629 90.4957 77.7808 90.4389C77.9001 90.3821 77.9946 90.3026 78.0642 90.2003C78.1352 90.0966 78.1707 89.9744 78.1707 89.8338C78.1707 89.6534 78.1075 89.5021 77.9811 89.38C77.8547 89.2578 77.6608 89.1967 77.3994 89.1967H76.5003V90.5241ZM81.8197 91.6428V89.7273H82.4589V93H81.8325V92.4332H81.7984C81.7231 92.608 81.6024 92.7536 81.4362 92.87C81.2714 92.9851 81.0662 93.0426 80.8204 93.0426C80.6102 93.0426 80.4241 92.9964 80.2622 92.9041C80.1017 92.8104 79.9752 92.6719 79.8829 92.4886C79.792 92.3054 79.7465 92.0788 79.7465 91.8089V89.7273H80.3836V91.7322C80.3836 91.9553 80.4454 92.1328 80.569 92.2649C80.6926 92.397 80.8531 92.4631 81.0505 92.4631C81.1698 92.4631 81.2885 92.4332 81.4063 92.3736C81.5257 92.3139 81.6244 92.2237 81.7025 92.103C81.7821 91.9822 81.8211 91.8288 81.8197 91.6428ZM84.8726 89.7273V90.2386H83.085V89.7273H84.8726ZM83.5644 88.9432H84.2014V92.0391C84.2014 92.1626 84.2199 92.2557 84.2568 92.3182C84.2938 92.3793 84.3414 92.4212 84.3996 92.4439C84.4593 92.4652 84.5239 92.4759 84.5935 92.4759C84.6446 92.4759 84.6894 92.4723 84.7277 92.4652C84.7661 92.4581 84.7959 92.4524 84.8172 92.4482L84.9323 92.9744C84.8953 92.9886 84.8428 93.0028 84.7746 93.017C84.7064 93.0327 84.6212 93.0412 84.5189 93.0426C84.3513 93.0455 84.195 93.0156 84.0502 92.9531C83.9053 92.8906 83.7881 92.794 83.6986 92.6634C83.6091 92.5327 83.5644 92.3686 83.5644 92.1712V88.9432ZM87.135 89.7273V90.2386H85.3474V89.7273H87.135ZM85.8268 88.9432H86.4639V92.0391C86.4639 92.1626 86.4823 92.2557 86.5193 92.3182C86.5562 92.3793 86.6038 92.4212 86.662 92.4439C86.7217 92.4652 86.7863 92.4759 86.8559 92.4759C86.907 92.4759 86.9518 92.4723 86.9901 92.4652C87.0285 92.4581 87.0583 92.4524 87.0796 92.4482L87.1947 92.9744C87.1578 92.9886 87.1052 93.0028 87.037 93.017C86.9688 93.0327 86.8836 93.0412 86.7813 93.0426C86.6137 93.0455 86.4575 93.0156 86.3126 92.9531C86.1677 92.8906 86.0505 92.794 85.961 92.6634C85.8715 92.5327 85.8268 92.3686 85.8268 92.1712V88.9432ZM89.2131 93.0661C88.9063 93.0661 88.6386 92.9957 88.4099 92.8551C88.1812 92.7145 88.0036 92.5178 87.8772 92.2649C87.7508 92.0121 87.6876 91.7166 87.6876 91.3786C87.6876 91.0391 87.7508 90.7422 87.8772 90.4879C88.0036 90.2337 88.1812 90.0362 88.4099 89.8956C88.6386 89.755 88.9063 89.6847 89.2131 89.6847C89.52 89.6847 89.7877 89.755 90.0164 89.8956C90.2451 90.0362 90.4227 90.2337 90.5491 90.4879C90.6755 90.7422 90.7387 91.0391 90.7387 91.3786C90.7387 91.7166 90.6755 92.0121 90.5491 92.2649C90.4227 92.5178 90.2451 92.7145 90.0164 92.8551C89.7877 92.9957 89.52 93.0661 89.2131 93.0661ZM89.2153 92.5312C89.4141 92.5312 89.5789 92.4787 89.7096 92.3736C89.8403 92.2685 89.9369 92.1286 89.9994 91.9538C90.0633 91.7791 90.0952 91.5866 90.0952 91.3764C90.0952 91.1676 90.0633 90.9759 89.9994 90.8011C89.9369 90.625 89.8403 90.4837 89.7096 90.3771C89.5789 90.2706 89.4141 90.2173 89.2153 90.2173C89.015 90.2173 88.8488 90.2706 88.7167 90.3771C88.586 90.4837 88.4887 90.625 88.4248 90.8011C88.3623 90.9759 88.331 91.1676 88.331 91.3764C88.331 91.5866 88.3623 91.7791 88.4248 91.9538C88.4887 92.1286 88.586 92.2685 88.7167 92.3736C88.8488 92.4787 89.015 92.5312 89.2153 92.5312ZM92.1169 91.0568V93H91.4798V89.7273H92.0913V90.2599H92.1318C92.2071 90.0866 92.325 89.9474 92.4855 89.8423C92.6474 89.7372 92.8513 89.6847 93.097 89.6847C93.32 89.6847 93.5153 89.7315 93.683 89.8253C93.8506 89.9176 93.9805 90.0554 94.0729 90.2386C94.1652 90.4219 94.2114 90.6484 94.2114 90.9183V93H93.5743V90.995C93.5743 90.7578 93.5125 90.5724 93.3889 90.4389C93.2653 90.304 93.0956 90.2365 92.8797 90.2365C92.732 90.2365 92.6006 90.2685 92.4855 90.3324C92.3719 90.3963 92.2817 90.4901 92.2149 90.6136C92.1496 90.7358 92.1169 90.8835 92.1169 91.0568Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 83C71.8954 83 71 83.8954 71 85V97C71 98.1046 71.8954 99 73 99H97C98.1046 99 99 98.1046 99 97V85C99 83.8954 98.1046 83 97 83H73ZM70 85C70 83.3431 71.3431 82 73 82H97C98.6569 82 100 83.3431 100 85V97C100 98.6569 98.6569 100 97 100H73C71.3431 100 70 98.6569 70 97V85Z",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M58 82H34C32.3431 82 31 83.3431 31 85V97C31 98.6569 32.3431 100 34 100H58C59.6569 100 61 98.6569 61 97V85C61 83.3431 59.6569 82 58 82Z",fill:"#56CCF2",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M36.7669 93V88.6364H38.3649C38.6746 88.6364 38.931 88.6875 39.1341 88.7898C39.3372 88.8906 39.4892 89.0277 39.5901 89.201C39.6909 89.3729 39.7413 89.5668 39.7413 89.7827C39.7413 89.9645 39.708 90.1179 39.6412 90.2429C39.5744 90.3665 39.4849 90.4659 39.3727 90.5412C39.2619 90.6151 39.1398 90.669 39.0063 90.7031V90.7457C39.1511 90.7528 39.2925 90.7997 39.4303 90.8864C39.5695 90.9716 39.6845 91.093 39.7754 91.2507C39.8663 91.4084 39.9118 91.6001 39.9118 91.826C39.9118 92.049 39.8592 92.2493 39.7541 92.4268C39.6504 92.603 39.4899 92.7429 39.2726 92.8466C39.0553 92.9489 38.7776 93 38.4395 93H36.7669ZM37.4253 92.4354H38.3756C38.6909 92.4354 38.9168 92.3743 39.0531 92.2521C39.1895 92.13 39.2577 91.9773 39.2577 91.794C39.2577 91.6562 39.2229 91.5298 39.1533 91.4148C39.0837 91.2997 38.9842 91.2081 38.855 91.1399C38.7271 91.0717 38.5751 91.0376 38.399 91.0376H37.4253V92.4354ZM37.4253 90.5241H38.3074C38.4551 90.5241 38.5879 90.4957 38.7058 90.4389C38.8251 90.3821 38.9196 90.3026 38.9892 90.2003C39.0602 90.0966 39.0957 89.9744 39.0957 89.8338C39.0957 89.6534 39.0325 89.5021 38.9061 89.38C38.7797 89.2578 38.5858 89.1967 38.3244 89.1967H37.4253V90.5241ZM42.7747 91.6428V89.7273H43.4139V93H42.7875V92.4332H42.7534C42.6781 92.608 42.5574 92.7536 42.3912 92.87C42.2264 92.9851 42.0212 93.0426 41.7754 93.0426C41.5652 93.0426 41.3791 92.9964 41.2172 92.9041C41.0567 92.8104 40.9302 92.6719 40.8379 92.4886C40.747 92.3054 40.7015 92.0788 40.7015 91.8089V89.7273H41.3386V91.7322C41.3386 91.9553 41.4004 92.1328 41.524 92.2649C41.6476 92.397 41.8081 92.4631 42.0055 92.4631C42.1248 92.4631 42.2435 92.4332 42.3613 92.3736C42.4807 92.3139 42.5794 92.2237 42.6575 92.103C42.7371 91.9822 42.7761 91.8288 42.7747 91.6428ZM45.8576 89.7273V90.2386H44.07V89.7273H45.8576ZM44.5494 88.9432H45.1864V92.0391C45.1864 92.1626 45.2049 92.2557 45.2418 92.3182C45.2788 92.3793 45.3264 92.4212 45.3846 92.4439C45.4443 92.4652 45.5089 92.4759 45.5785 92.4759C45.6296 92.4759 45.6744 92.4723 45.7127 92.4652C45.7511 92.4581 45.7809 92.4524 45.8022 92.4482L45.9173 92.9744C45.8803 92.9886 45.8278 93.0028 45.7596 93.017C45.6914 93.0327 45.6062 93.0412 45.5039 93.0426C45.3363 93.0455 45.18 93.0156 45.0352 92.9531C44.8903 92.8906 44.7731 92.794 44.6836 92.6634C44.5941 92.5327 44.5494 92.3686 44.5494 92.1712V88.9432ZM48.15 89.7273V90.2386H46.3624V89.7273H48.15ZM46.8418 88.9432H47.4789V92.0391C47.4789 92.1626 47.4973 92.2557 47.5343 92.3182C47.5712 92.3793 47.6188 92.4212 47.677 92.4439C47.7367 92.4652 47.8013 92.4759 47.8709 92.4759C47.922 92.4759 47.9668 92.4723 48.0051 92.4652C48.0435 92.4581 48.0733 92.4524 48.0946 92.4482L48.2097 92.9744C48.1728 92.9886 48.1202 93.0028 48.052 93.017C47.9838 93.0327 47.8986 93.0412 47.7963 93.0426C47.6287 93.0455 47.4725 93.0156 47.3276 92.9531C47.1827 92.8906 47.0655 92.794 46.976 92.6634C46.8865 92.5327 46.8418 92.3686 46.8418 92.1712V88.9432ZM50.2581 93.0661C49.9513 93.0661 49.6836 92.9957 49.4549 92.8551C49.2262 92.7145 49.0486 92.5178 48.9222 92.2649C48.7958 92.0121 48.7326 91.7166 48.7326 91.3786C48.7326 91.0391 48.7958 90.7422 48.9222 90.4879C49.0486 90.2337 49.2262 90.0362 49.4549 89.8956C49.6836 89.755 49.9513 89.6847 50.2581 89.6847C50.565 89.6847 50.8327 89.755 51.0614 89.8956C51.2901 90.0362 51.4677 90.2337 51.5941 90.4879C51.7205 90.7422 51.7837 91.0391 51.7837 91.3786C51.7837 91.7166 51.7205 92.0121 51.5941 92.2649C51.4677 92.5178 51.2901 92.7145 51.0614 92.8551C50.8327 92.9957 50.565 93.0661 50.2581 93.0661ZM50.2603 92.5312C50.4591 92.5312 50.6239 92.4787 50.7546 92.3736C50.8853 92.2685 50.9819 92.1286 51.0444 91.9538C51.1083 91.7791 51.1402 91.5866 51.1402 91.3764C51.1402 91.1676 51.1083 90.9759 51.0444 90.8011C50.9819 90.625 50.8853 90.4837 50.7546 90.3771C50.6239 90.2706 50.4591 90.2173 50.2603 90.2173C50.06 90.2173 49.8938 90.2706 49.7617 90.3771C49.631 90.4837 49.5337 90.625 49.4698 90.8011C49.4073 90.9759 49.376 91.1676 49.376 91.3764C49.376 91.5866 49.4073 91.7791 49.4698 91.9538C49.5337 92.1286 49.631 92.2685 49.7617 92.3736C49.8938 92.4787 50.06 92.5312 50.2603 92.5312ZM53.1919 91.0568V93H52.5548V89.7273H53.1663V90.2599H53.2068C53.2821 90.0866 53.4 89.9474 53.5605 89.8423C53.7224 89.7372 53.9263 89.6847 54.172 89.6847C54.395 89.6847 54.5903 89.7315 54.758 89.8253C54.9256 89.9176 55.0555 90.0554 55.1479 90.2386C55.2402 90.4219 55.2864 90.6484 55.2864 90.9183V93H54.6493V90.995C54.6493 90.7578 54.5875 90.5724 54.4639 90.4389C54.3403 90.304 54.1706 90.2365 53.9547 90.2365C53.807 90.2365 53.6756 90.2685 53.5605 90.3324C53.4469 90.3963 53.3567 90.4901 53.2899 90.6136C53.2246 90.7358 53.1919 90.8835 53.1919 91.0568Z",fill:"white"}),(0,i.jsx)("mask",{id:"mask0_1_30",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"20",y:"121",width:"107",height:"22",children:(0,i.jsx)("path",{d:"M126.001 121H20.5566V143H126.001V121Z",fill:"white"})}),(0,i.jsxs)("g",{mask:"url(#mask0_1_30)",className:"oss_sales_upsell_modal--graphicLine--PuHaV",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 143V121H74V143H73Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.5566 121.477L20.5566 143L19.8759 142.267L39.8759 120.745L40.5566 121.477Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126 142.523L106 121L106.681 120.267L126.681 141.79L126 142.523Z"})]})]})}let sb=[{key:1,elem:(0,j.tx)("oss_sales_upsell_overlay.feature1")},{key:2,elem:(0,j.tx)("oss_sales_upsell_overlay.feature2")},{key:3,elem:(0,j.tx)("oss_sales_upsell_overlay.feature3")}],sv=(0,sx.Ju)(function({onDismiss:e}){let t=(0,S.md)(ei.yV),n=(0,m.wA)();return(0,i.jsxs)(s_.yX,{autoFocusCta:!1,cancelText:(0,j.tx)("oss_sales_upsell_overlay.secondary_cta"),className:"oss_sales_upsell_modal--modal--e0-Kq",confirmText:(0,j.tx)("oss_sales_upsell_overlay.primary_cta"),confirmationTitle:(0,j.tx)("oss_sales_upsell_overlay.title"),hideOnCancel:!1,hideOnConfirm:!1,isLoading:!t?.teamId,onCancel:()=>{n((0,ev.to)({type:sp.lk,data:{source:sh.B.LIBRARY_DUPLICATE_OSS_SALES_UPSELL,overridePlaceholderText:(0,j.t)("oss_sales_upsell_overlay.contact_sales_form.text_placeholder")}}))},onCloseButtonClick:e,onConfirm:()=>{t?.teamId&&n(sf.Bq({openInNewTab:!0,entryPoint:(0,sg.cH)(ej.C.OSS_SALES_UPSELL_MODAL)}))},overrideOnHide:e,titleClass:"oss_sales_upsell_modal--title--Kz0j2",children:[(0,i.jsx)("div",{className:I.s.lh24.font13.pt24.pr0.pb32.pl0.$,children:(0,i.jsxs)(sm.Y,{spacing:"40px",children:[(0,i.jsxs)(sm.Y,{direction:"vertical",spacing:"12px",children:[(0,i.jsx)("p",{children:(0,j.tx)("oss_sales_upsell_overlay.body1")}),(0,i.jsxs)(sm.Y,{direction:"vertical",spacing:8,children:[(0,i.jsx)("p",{className:I.s.fontSemiBold.$,children:(0,j.tx)("oss_sales_upsell_overlay.body2")}),(0,i.jsx)(sm.Y,{direction:"vertical",spacing:8,children:sb.map(e=>(0,i.jsxs)(sm.Y,{spacing:8,horizontalAlignItems:"start",children:[(0,i.jsx)("p",{children:"\u2713"}),(0,i.jsx)("p",{children:e.elem})]},e.key))})]}),(0,i.jsx)("p",{className:I.s.pt4.$,children:(0,j.tx)("oss_sales_upsell_overlay.body3")})]}),(0,i.jsx)("div",{className:I.s.mr16.$,children:(0,i.jsx)(sy,{})})]})}),(0,i.jsx)("div",{className:I.s.bt1.colorBorder.bSolid.$})]})},"OssSalesUpsellModal");function sC(){return(0,i.jsx)(ir.u9,{label:"OssSalesUpsellOverlay",children:(0,i.jsx)(sE,{})})}function sE(){let e=(0,S.md)(ei.As),t=(0,S.md)(ei.ze);return e&&t?(0,i.jsx)(sw,{teamId:e,fileKey:t}):null}function sw({teamId:e,fileKey:t}){let n=(0,m.wA)(),a=(0,S.md)(ek.M$),s=(0,id.bc)(iu.TNJ,{id:e}),o=(0,f.e)({overlay:y.jRE,priority:g.N.DEFAULT_MODAL},[a,s]),l=ey.tl().user_data,d=l?.email,c=(0,sc.HS)(d);return(0,th.h)(()=>{o.show({canShow:(e,n)=>!!(c&&(0,su.nN)(t)&&!e&&n.team?.hasPermission)})}),(0,r.useEffect)(()=>{o.isShowing&&(0,su.wj)()},[c,o.isShowing]),(0,i.jsx)(eG.h,{isShowing:o.isShowing,modalType:eY.q3.FEATURE_UPDATE,element:function(e){return(0,th.h)(()=>{n((0,ev.to)({type:sv,data:{onDismiss:e.dismissModal}}))}),(0,i.jsx)("div",{})},trackingContextName:"oss_sales_upsell_overlay",onClickPrimaryCta:nH.lQ,onClose:o.complete,onManualDismiss:o.complete,testId:"oss_sales_upsell_overlay_test_id"})}let sk="seen_plugin_publish_invite_publishers_onboarding",sT=(0,eT.r1)(sk),sj=()=>(0,j.t)("rcs.plugin_publish.work_with_other_developers");function sS(){return(0,i.jsx)("p",{children:(0,j.tx)("rcs.plugin_publish.if_anyone_helped")})}function sI(){let e=(0,S.md)(sT),t=(0,f.e)({overlay:y.qw_,priority:g.N.SECONDARY_MODAL},[e]);return(0,ew.E)(t.uniqueId,"plugin-publish-invite-publishers-onboarding-event",()=>{t.show({canShow:e=>!e})}),(0,ew.E)(t.uniqueId,["plugin-publish-invite-publishers-click-event","Lost DOM Target"],()=>{t.complete()}),(0,i.jsx)(eG.h,{element:sS,isShowing:t.isShowing,modalType:eY.q3.ANNOUNCEMENT_POINTER,onClickPrimaryCta:t.complete,onClose:t.complete,onManualDismiss:t.complete,onboardingKey:"plugin-publish-invite-publishers",title:sj,trackingContextName:"Plugin Publish Invite Publishers Onboarding Modal",userFlagOnShow:sk,width:300})}var sA=n(58369),sN=n(19047),sM=n(761312),sR=n(938283),sP=n(776844),sO=n(207268),sD=n(988799);let sL="seen_figjam_section_preset_picker_callout",sF=(0,eT.Fu)(sL),sB=e=>(0,m.d4)(t=>{if(!e)return!1;let n=Object.keys(t.mirror.sceneGraphSelection);return 1===n.length&&n[0]===e});function sU({sectionNodeId:e,isShowing:t,complete:n}){let r=(0,M._X)({subscribeToUpdates_expensive:!0}),a=(0,B.UN)().get(e);if(!a)return null;let s=a.sectionPresetPickerCalloutPosition;if(isNaN(s.x)||isNaN(s.y))return null;let o=(0,M.Z0)(r,s,!0),l=parseFloat(sD._1),d={top:o.y+r.y+l+2,left:o.x+r.x-150,pointerOffset:150-l,pointerPosition:tv.F_.TOP};return(0,i.jsx)(eO.rq,{clickOutsideToHide:!0,description:(0,j.tx)("whiteboard.section_presets_onboarding.picker_callout.description"),fixedPosition:!0,isShowing:t,location:d,onClose:n,primaryCta:{label:(0,j.tx)("rcs.got_it"),type:"button",onClick:n,ctaTrackingDescriptor:eE.c.GOT_IT},title:(0,j.tx)("whiteboard.section_presets_onboarding.picker_callout.title"),trackingContextName:"section_preset_picker_callout",userFlagOnShow:sL,width:300})}function sV(){let e=(0,sM.q)(),t=(0,S.md)(sP.w),n=(0,S.md)(sO.m5),a=(0,S.md)(sF),s=(0,r.useRef)({numShown:0,hasLoggedToSentry:!1}),[o,l]=(0,r.useState)(null),d=sB(o),{show:c,isShowing:u,complete:m}=(0,f.e)({overlay:y.Byv,priority:g.N.DEFAULT_MODAL},[n,a]);return((0,r.useEffect)(()=>{t&&o&&d&&e&&c({canShow:(e,t)=>!!e&&!t})},[c,e,t,o,d]),(0,r.useEffect)(()=>{if("loaded"===a.status&&!a.data&&"loaded"===n.status&&n.data)return(0,sR.H)(function(e){l(e)})},[a,n]),(0,r.useEffect)(()=>{u&&s.current.numShown++,s.current.numShown>1&&!s.current.hasLoggedToSentry&&(s.current.hasLoggedToSentry=!0,(0,sN.x1)("SectionPresetPickerCallout","Callout shown more than once, this should not happen. Please investigate.",void 0,{reportAsSentryError:!0}))},[u]),u&&o)?(0,i.jsx)(sU,{sectionNodeId:o,isShowing:u,complete:m}):null}let sH=(0,ey.ck)("90c10991400b728428a200de3b347bba3f6d1d1e");function sz({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return(0,i.jsx)(eO.rq,{testId:"share-to-google-classroom-onboarding",isShowing:e,trackingContextName:"Share to Google Classroom Onboarding",targetKey:"share",title:(0,j.tx)("whiteboard.google_classroom.onboarding.header"),description:(0,j.tx)("whiteboard.google_classroom.onboarding.body"),media:(0,i.jsx)(eI.y,{src:sH,alt:(0,j.t)("whiteboard.google_classroom.onboarding.image_alt"),aspectRatio:300/169}),primaryCta:{label:(0,j.tx)("whiteboard.google_classroom.onboarding.show_me"),type:"button",onClick:t,ctaTrackingDescriptor:eE.c.SHOW_ME},onClose:n})}function sG(){return(0,i.jsx)(ir.u9,{label:"ShareToGoogleClassroomExistingUserOnboarding",children:(0,i.jsx)(sK,{})})}function sK(){let e=(0,m.wA)(),t=im({}),n=(0,S.md)(i_),a=(0,S.md)(ib),s=(0,S.md)(iv),o=(0,S.md)(iC),l=(0,S.md)(io.Ij),{show:d,isShowing:c,complete:u}=(0,f.e)({overlay:y.Y2_,priority:g.N.DEFAULT_MODAL},[a,n,s,o,t]);r.useEffect(()=>{d({onShow:()=>{e(p.b({[ix]:!0}))},canShow:(e,t,n,i,r)=>!e&&!t&&!n&&i&&r})},[t,e,d]),r.useEffect(()=>{a.data&&u()},[a,u]);let{currentStep:h,next:x}=(0,eU.A)({numSteps:2,onComplete:u}),_=function({isShowing:e,next:t,complete:n}){let r=(0,m.wA)(),a=(0,ei.q5)();return[(0,i.jsx)(sz,{onPrimaryCtaClick:()=>{if(!a){n();return}r((0,ev.to)({type:is.g_,data:{fileKey:a.key,source:ia.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n,isShowing:e},"share-to-google-classroom-existing-user-callout"),(0,i.jsx)(ig,{isShowing:e,onClose:n},"share-to-google-classroom-share-option-pointer")]}({isShowing:c,next:x,complete:u});return r.useEffect(()=>{l&&c&&0===h&&x()},[h,c,l,x]),(0,i.jsx)(ez.U,{currentStep:h,isShowing:c,children:_})}var sW=n(592802),sq=n(62023),sX=n(186129),sY=n(190531),sJ=n(362563),sZ=n(122970),sQ=n(316157),s$=n(582389);let s0="has_onboarded_ai",s1=(0,S.eU)(!1);var s2=n(322691),s5=n(410274);let s4=g.N.HIGH_PRIORITY_MODAL+3;function s3(e,t){(0,th.h)(()=>{e(p.b({[t]:!0}))})}let s6=(0,i.jsx)(s2.Jm,{src:(0,ey.ck)("b89b812ff4935b239f91bd78df370ad6dd947e0b"),aspectRatio:240/135,width:240});function s7({onClose:e,isShowing:t,onTargetLost:n}){let r=(0,m.wA)();return s3(r,sZ.jx),s3(r,s0),(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.BOTTOM,description:(0,j.tx)("ui3_and_ai_tour.ai_callout.description"),highlightBlue:!0,isShowing:t,media:s6,onClose:e,onTargetLost:n,primaryCta:{type:"button",label:(0,j.tx)("ui3_and_ai_tour.ai_callout.show_me"),onClick:()=>{(0,s5.$I)({trackingData:{source:"onboarding_ai_callout_component"}}),e()},ctaTrackingDescriptor:eE.c.SHOW_ME},secondaryCta:{type:"link",label:(0,j.tx)("ui3_and_ai_tour.ai_callout.playground_link"),href:"https://www.figma.com/community/file/1375505114072192161",ctaTrackingDescriptor:eE.c.AI_PLAYGROUND},targetKey:sZ.Ij,testId:sZ.T4,title:(0,j.tx)("ui3_and_ai_tour.ai_callout.title"),trackingContextName:"UI3/AI Onboarding > AI"})}var s9=n(588526);function s8({onClose:e,isShowing:t,onTargetLost:n}){return s3((0,m.wA)(),sZ.af),(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.BOTTOM,description:(0,a.kc)().hub_file_fragments?(0,j.tx)("ui3_and_ai_callouts.community_fragment_search.description"):(0,j.tx)("ui3_and_ai_callouts.fragment_search.description"),highlightBlue:!0,isShowing:t,onClose:()=>e(),onTargetLost:n,primaryCta:{type:"button",label:(0,j.tx)("ui3_and_ai_callouts.fragment_search.cta"),onClick:()=>{(0,s9.Bd)(),e()},ctaTrackingDescriptor:eE.c.TRY_IT_OUT},targetKey:sZ.Ij,testId:"fragmentSearchCallout",title:(0,j.tx)("ui3_and_ai_callouts.fragment_search.title"),trackingContextName:"Fragment Search Callout"})}function oe(){return(0,i.jsx)(ir.u9,{label:"AIOnboardingTour",children:(0,i.jsx)(ot,{})})}function ot(){let e=function(){let e=(0,ed.f)(sZ.$9),t=(0,ed.f)(sZ.af),n=(0,eB.p8)("showUi"),i=(0,r.useMemo)(()=>e,[n]),a=(0,r.useMemo)(()=>t,[n]),s=(0,tb.m0)(),o=(0,tb.Em)(),l=(0,sW.PE)(),d=function(){let e=(0,sQ.LC)();return(0,s$.C7)()&&e}(),c=[];return!s&&o&&l&&!i&&c.push(s7),0===c.length&&!s&&o&&d&&!a&&c.push(s8),c}(),t=(0,eT.r1)(s0),n=(0,S.md)(t),a=(0,eT.r1)("did_sign_up_as_ui3_user"),s=(0,S.md)(a),o=(0,eT.r1)(sZ.$9),l=(0,S.md)(o),d=(0,eT.r1)(sZ.af),c=(0,S.md)(d),m=(0,tb.Em)(),p=(0,u.l7)(),h=(0,u.hA)(),g=(0,sq.e)(),x=(0,sY.bE)(),_=(0,eB.aV)(),b=(0,S.md)(sJ.Bu),v=(0,S.md)(ek.Fy),{uniqueId:C,show:E,isShowing:w,complete:k}=(0,f.e)({overlay:y.KTt,priority:s4},[n,l,s,c]),[T,I]=(0,S.fp)(s1),A=(0,r.useCallback)(()=>{e.length>0&&I(!0),k()},[I,k,e.length]),{currentStep:N,next:M}=(0,eU.A)({numSteps:0===e.length?1:e.length,onComplete:()=>A});(0,ew.E)(C,[(0,sX.wX)("dev"),(0,sX.wX)("design")],()=>{R()});let R=(0,r.useCallback)(()=>{m&&!_&&0!==e.length&&v?.data&&!T&&E()},[m,_,e.length,v,E,T]);(0,r.useEffect)(()=>{_||b||R()},[_,R,b]);let P=(0,r.useCallback)(()=>{A()},[A]);(0,r.useEffect)(()=>{w&&b&&P()},[w,b,P]);let O=r.useMemo(()=>{let t={type:"button",label:(0,j.tx)("general.next"),onClick:M,ctaTrackingDescriptor:eE.c.NEXT},n={type:"button",label:(0,j.tx)("general.done"),onClick:A,ctaTrackingDescriptor:eE.c.DONE};return e.map((i,a)=>r.createElement(i,{primaryCta:a===e.length-1?n:t,onClose:A,stepNum:a+1,totalNumSteps:e.length,isShowing:w,onTargetLost:a===e.length-1?A:M}))},[M,A,e,w]);return((0,r.useEffect)(()=>{(!O||0===e.length||p||h||g||x)&&A()},[O,e.length,p,h,g,x,A]),w)?(0,i.jsx)(ez.U,{currentStep:N,isShowing:w,children:O}):null}var on=n(276364);let oi="UI3 Reactivation Overlay";function or(){let e=(0,eB.aV)(),t=(0,S.md)(on.jH),{isShowing:n,complete:a}=(0,f.e)({overlay:y.HU3,priority:g.N.SECONDARY_MODAL}),{currentStep:s,next:o}=(0,eU.A)({numSteps:2,onComplete:a});return r.useEffect(()=>{n&&0===s&&!e&&o()},[n,s,e,o]),r.useEffect(()=>{n&&t&&a()},[n,t,a]),(0,i.jsxs)(ez.U,{currentStep:s,isShowing:n,children:[(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.RIGHT_BODY,description:(0,j.tx)("ui3_reactivation_overlay.ui2_description"),disableHighlight:!0,isShowing:n,media:(0,i.jsx)(eI.w,{src:(0,ey.ck)("c24e9a3e1bb4e0babe4ebc86f9d58b79e44a1992"),aspectRatio:16/9}),onClose:e=>{"close_button_clicked"!==e&&(0,em.Cu)({eventName:"Overlay Closed",trackingContext:`Onboarding Sequence > ${oi} Step 1`,overlayStep:1,closeReason:e}),a()},primaryCta:{type:"button",label:(0,j.tx)("ui3_reactivation_overlay.ui2_primary_cta"),onClick:o,ctaTrackingDescriptor:eE.c.SWITCH_TO_UI3},secondaryCta:{type:"link",label:(0,j.tx)("ui3_reactivation_overlay.secondary_cta"),href:"https://www.figma.com/blog/making-the-move-to-ui3-a-guide-to-figmas-next-chapter/",ctaTrackingDescriptor:eE.c.LEARN_MORE},targetKey:eX.J_,title:(0,j.tx)("ui3_reactivation_overlay.ui2_title"),trackingContextName:`${oi} Step 1`}),(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.RIGHT_BODY,description:(0,j.tx)("ui3_reactivation_overlay.ui3_description"),disableHighlight:!0,isShowing:n,media:(0,i.jsx)(eI.y,{src:(0,ey.ck)("94d7810cc12859da29e6f4e32a5ffe858ce5445e"),alt:(0,j.t)("ui3_reactivation_overlay.ui3_media_alt"),aspectRatio:16/9}),onClose:e=>{"close_button_clicked"!==e&&(0,em.Cu)({eventName:"Overlay Closed",trackingContext:`Onboarding Sequence > ${oi} Step 2`,overlayStep:2,closeReason:e}),a()},primaryCta:{type:"button",label:(0,j.tx)("ui3_reactivation_overlay.ui3_primary_cta"),onClick:o,ctaTrackingDescriptor:eE.c.GOT_IT},secondaryCta:{type:"link",label:(0,j.tx)("ui3_reactivation_overlay.secondary_cta"),href:"https://www.figma.com/blog/making-the-move-to-ui3-a-guide-to-figmas-next-chapter/",ctaTrackingDescriptor:eE.c.LEARN_MORE},targetKey:eX.J_,title:(0,j.tx)("ui3_reactivation_overlay.ui3_title"),trackingContextName:`${oi} Step 2`})]})}var oa=n(536746),os=n(971142),oo=n(346942),ol=n(455271),od=n(427122);function oc({trackingContextName:e,getTitle:t,getBody:n,width:r=268}){return{modalType:eY.q3.POINTER,trackingContextName:e,width:r,onboardingKey:au.yl,shouldCenterArrow:i0.EL.FALLBACK,element:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ol.x,{target:au.yl}),(0,i.jsx)("div",{className:od.Hj,children:t()}),n()]}),userFlag:"seen_figjam_widget_nudge_flag"}}function ou(e){let[t,n]=r.useState(!0),a=(0,m.wA)(),s=(0,S.md)(ei.yV);r.useEffect(()=>{setTimeout(()=>n(!1),1e3)});let o=()=>{a(p.b({explicitly_dismissed_create_component_pointer:!0})),e.dismissModal()};return t?null:(0,i.jsxs)(h.fu,{name:"library upsell create component pointer",properties:{fileKey:s?.key,teamId:s?.teamId},children:[(0,i.jsx)(ol.x,{target:"create-symbol"}),(0,i.jsxs)(nK.NJ,{dismissModal:o,width:244,targetKey:"create-symbol",shouldNotWrapInParagraphTag:!0,shouldCenterArrow:i0.EL.FALLBACK,children:[(0,i.jsx)("p",{children:(0,j.tx)("rcs.upsell_libraries.click_here_to_turn_into_component")}),(0,i.jsx)(oo.Kz,{multiple:2}),(0,i.jsx)("div",{className:sD.kP,children:(0,i.jsx)(tU.$z,{onClick:o,variant:"primary",children:(0,j.tx)("rcs.upsell_libraries.visual_bell.got_it")})})]})]})}eY.q3.SELF_CONTAINED,oc({trackingContextName:"FigJam Widget Nudge Generic",getTitle:()=>(0,j.t)("rcs.figjam_widget_nudge.generic_title"),getBody:()=>(0,j.t)("rcs.figjam_widget_nudge.generic_body")}),oc({trackingContextName:"FigJam Widget Nudge Project Management",getTitle:()=>(0,j.t)("rcs.figjam_widget_nudge.pm_title"),getBody:()=>(0,j.t)("rcs.figjam_widget_nudge.pm_body"),width:240}),oc({trackingContextName:"FigJam Widget Nudge Alignment",getTitle:()=>(0,j.t)("rcs.figjam_widget_nudge.align_title"),getBody:()=>(0,j.t)("rcs.figjam_widget_nudge.align_body")}),oc({trackingContextName:"FigJam Widget Nudge Fun",getTitle:()=>(0,j.t)("rcs.figjam_widget_nudge.fun_title"),getBody:()=>(0,j.t)("rcs.figjam_widget_nudge.fun_body")});var om=n(102654),op=n(525058),oh=n(725492),of=(e=>(e.AwaitIsShowing="AwaitIsShowing",e.AwaitPastedElementsSelected="AwaitPastedElementsSelected",e.AwaitOtherElementsSelected="AwaitOtherElementsSelected",e.Completed="Completed",e))(of||{}),og=(e=>(e.OnShow="OnShowUpsellLibariesConsecutivePaste",e.SelectionChanged="Selection Changed",e))(og||{});oh.R;let ox=(0,om.Op)({initial:"AwaitIsShowing",states:[{id:"AwaitIsShowing",transitions:[(0,om.nr)("OnShowUpsellLibariesConsecutivePaste","AwaitPastedElementsSelected")]},{id:"AwaitPastedElementsSelected",transitions:[(0,om.nr)("Selection Changed","AwaitOtherElementsSelected",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"AwaitOtherElementsSelected",transitions:[(0,om.nr)("Selection Changed","Completed",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"Completed",terminal:!0}]}),o_=(0,op.rn)("paste_deselected_machine",ox),oy=(0,eT.r1)("explicitly_dismissed_create_component_pointer"),ob=(0,ek.tH)("first_component_created_date");function ov(){let e=(0,m.wA)(),t=(0,S.md)(ek.t),n=(0,S.md)(tT.NZ),r=(0,S.md)(tT.pQ),a=(0,t1.jO)(),s=(0,S.md)(ob),o=(0,S.md)(oy),l=(0,oa.zl)(o_),d=(0,f.e)({overlay:y.g4U,priority:g.N.SECONDARY_MODAL},[t,r,o]);return(0,ew.E)(d.uniqueId,os.zb,()=>{null===s&&d.show({canShow:(e,t,i)=>e&&(t||n)&&a&&!i,onShow:()=>{(0,nz.YQ)({id:og.OnShow})}})}),(0,ew.E)(d.uniqueId,"action_create_symbol",()=>{d.isShowing&&(e(p.b({explicitly_dismissed_create_component_pointer:!0})),d.complete())}),(0,oa.ST)(l,({to:e})=>{e===of.Completed&&(d.complete(),l.reset())}),(0,i.jsx)(oC,{isShowing:d.isShowing,onAbort:d.complete,children:(0,i.jsx)(eG.h,{isShowing:d.isShowing,modalType:eY.q3.SELF_CONTAINED,trackingContextName:"Consecutive Paste Create Component Pointer",element:ou,onClickPrimaryCta:d.complete,onClose:d.complete,onManualDismiss:d.complete,testId:"upsell_libraries_consecutive_paste_overlay"})})}function oC(e){let[t,n]=r.useState(!1),i=ey.Ay().user_data?.id,{isShowing:a,onAbort:s}=e;return r.useEffect(()=>{!t&&a&&((0,nm.Hz)(i)?n(!0):s())},[n,t,a,s,i]),t?e.children:null}var oE=n(987732),ow=n(17453),ok=n(815543),oT=n(783844);let oj="seen_workflow_interop_diagram_onboarding",oS=(0,eT.r1)(oj),oI="FigJam Diagram Onboarding (Workflow Interop Experiment)",oA={connectors:`${oI} - Connectors`,shapes:`${oI} - Shapes`,templates:`${oI} - Templates`},oN=(0,ey.ck)("2655e9f0e4247dff3d5a46cf59f788473bffe0c6"),oM=(0,ey.ck)("0c9201d8164c2390cdcf3fb8d316b6bacdddb438"),oR=(0,ey.ck)("b8b42ba263794abd20364c3da0f3f4993fd4ed86");function oP(){!function(){let e=(0,eB.p8)("pagesList");(0,r.useMemo)(()=>{let t=(0,tD.QL)("preservePageIndex");if(t&&e.length>0){(0,tD.EM)("preservePageIndex");let n=parseInt(t);if(isNaN(n)||n<0||n>=e.length)return;e.forEach((e,t)=>{t!==n&&nq.Y5.triggerAction("page-delete",{args:{nodeId:e.nodeId,skipVisualBell:!0}})})}},[e])}(),function(){let{insertTemplate:e}=(0,iz.Fz)(),t=(0,m.wA)();(0,th.h)(()=>{let n=(0,tD.QL)("templateId");null!=n&&((0,tD.EM)("templateId"),t(oE.ts({hubFileId:n,callback:t=>{e({template:{template:t,type:iq.n.HubFile},userTriggered:!1,templateInsertionDirection:k.hKj.ABOVE,triggeredFrom:"workflow-interop"})}})))})}();let e=(0,S.md)(oS),t=(0,f.e)({overlay:y.uPw,priority:g.N.OVERRIDING_MODAL},[e]),n=function(e){let t=(0,m.wA)();return r.useMemo(()=>[{title:(0,j.tx)("rcs.figjam_diagram_onboarding.connectors_title"),trackingContextName:oA.connectors,arrowPosition:tv.F_.BOTTOM,media:(0,i.jsx)(eI.y,{src:oN,aspectRatio:900/508,alt:(0,j.t)("rcs.figjam_diagram_onboarding.connectors_title")}),description:(0,j.tx)("rcs.figjam_diagram_onboarding.connectors"),targetKey:au.BC,onClose:nH.lQ},{title:(0,j.tx)("rcs.figjam_diagram_onboarding.shapes_title"),trackingContextName:oA.shapes,arrowPosition:tv.F_.BOTTOM,media:(0,i.jsx)(eI.y,{aspectRatio:900/507,src:oM,alt:(0,j.t)("rcs.figjam_diagram_onboarding.shapes_title")}),description:(0,j.tx)("rcs.figjam_diagram_onboarding.shapes"),targetKey:au.BC,onClose:nH.lQ},{title:(0,j.tx)("rcs.figjam_diagram_onboarding.templates_title"),trackingContextName:oA.templates,arrowPosition:tv.F_.BOTTOM,media:(0,i.jsx)(eI.y,{aspectRatio:900/505,src:oR,alt:(0,j.t)("rcs.figjam_diagram_onboarding.templates_title")}),description:(0,j.tx)("rcs.figjam_diagram_onboarding.templates"),targetKey:au.yl,secondaryCta:{type:"button",label:(0,j.tx)("rcs.figjam_diagram_onboarding.see_templates"),onClick:()=>{t(tk.En({initialX:0,initialY:0,initialTab:ok.pL.TEMPLATES})),e.complete()}},onClose:nH.lQ}],[t,e])}(t);return(0,th.h)(()=>{(0,tD.QL)(ow.tX.key)===ow.tX.value&&t.show({canShow:e=>!e})}),(0,i.jsx)(oT.WZ,{testId:"workflow-interop-machine-overlay",userFlagOnShow:oj,isShowing:t.isShowing,onComplete:t.complete,steps:n})}var oO=n(469983);let oD="seen_figjam_workshop_onboarding",oL=(0,eT.r1)(oD);function oF(e){let t=(0,S.md)(tT.J1),n=(0,S.md)(oL),r=(0,S.md)(tT.zo),a=(0,S.md)(tT.PD),s=(0,f.e)({overlay:y.Fq3,priority:g.N.SECONDARY_MODAL},[t,n,r,a]);return(0,th.h)(()=>{s.show({canShow:(e,t,n,i)=>e&&!t&&n&&!i})}),(0,i.jsx)(eG.h,{currentStepIndex:0,disableFooter:!0,element:oB,isShowing:s.isShowing,modalType:eY.q3.DRAGGABLE,onClickPrimaryCta:s.complete,onClose:s.complete,onManualDismiss:s.complete,onboardingKey:eX.v4,title:()=>(0,j.t)("rcs.figjam_workshop.invite_the_world_to_your_workshop"),totalNumSteps:1,trackingContextName:"Fig Jam Workshop Onboarding",userFlagOnShow:oD,width:301})}function oB(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(oO.Gv,{width:301,src:(0,ey.ck)("a97e76df2b43ae8b408127c1c63ea0b8485ba8ac")}),(0,i.jsx)(oO.ak,{children:(0,j.tx)("rcs.figjam_workshop.open_sessions_let_you_jam_with_anyone_even_people_who_don_t_have_a_figma_account")})]})}var oU=n(488790),oV=n(716890);function oH(e,t,n,i){let a=(0,m.wA)(),s=(0,ed.f)(n),o=r.useRef(!!s);(0,ew.E)(e,t,r.useCallback(()=>{!(i?.current||o?.current)&&(s||(o.current=!0,a(p.b({[n]:!0}))))},[i,a,s,n]))}var oz=n(544249),oG=n(641653),oK=n(117932);function oW(){let e=(0,f.e)({overlay:y.CVA,priority:g.N.OVERRIDING_MODAL}),t=(0,ed.f)("no_figma_basics_tooltips_design_panel_step"),n=(0,ed.f)("design_panel_step_shown"),a=(0,ed.f)("started_figma_basics_onboarding"),s=(0,m.wA)(),o=t&&!n&&!a;if((0,ew.E)(e.uniqueId,"create_frame",r.useCallback(()=>{o&&!e.isShowing&&e.show()},[e,o])),!e.isShowing)return null;let l=()=>{e.complete(),s(p.b({design_panel_step_shown:!0}))};return(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.RIGHT_BODY,description:(0,j.tx)("tooltips_plus_onboarding.design_panel.description"),disableHighlight:!0,emphasized:!0,isShowing:e.isShowing,onClose:l,onTargetLost:l,targetKey:oG.W,title:(0,j.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Frame Formatting"})}function oq(){let e=(0,f.e)({overlay:y.IQ,priority:g.N.OVERRIDING_MODAL}),t=(0,ed.f)("no_figma_basics_tooltips_format_text_step"),n=(0,ed.f)("format_text_step_shown"),a=(0,ed.f)("started_figma_basics_onboarding"),s=(0,m.wA)(),o=!n&&t&&!a;if((0,ew.E)(e.uniqueId,"create_text",r.useCallback(()=>{o&&!e.isShowing&&e.show()},[e,o])),!e.isShowing)return null;let l=()=>{e.complete(),s(p.b({format_text_step_shown:!0}))};return(0,i.jsx)(eO.rq,{arrowPosition:tv.F_.RIGHT_BODY,description:(0,j.tx)("tooltips_plus_onboarding.text_formatting.description"),disableHighlight:!0,emphasized:!0,isShowing:e.isShowing,onClose:l,onTargetLost:l,targetKey:oK.B,title:(0,j.tx)("tooltips_plus_onboarding.text_formatting.title"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Text Formatting"})}var oX=n(618284),oY=n(117298),oJ=n.n(oY),oZ=n(501604),oQ=n(816505),o$=n(679801),o0=n(847828),o1=n(599531);function o2(e){let t;let{file:n,org:a,overlay:s}=e,o=(0,oZ.B)(n,a.id),l=(0,r.useRef)(void 0),d=s.complete;if((0,r.useEffect)(()=>{o&&l.current&&!oJ()(o.filePermissionsData,l.current?.filePermissionsData)&&d(),l.current=o},[o,d]),!o)return null;let c=o.isBranch,u=o.branchMatchesRepo,m=o.linkExpiresAt,p=(0,ia.Ch)(o.filePermissionsData,e.org),h=(0,o1.M3)((0,eo.A)(m)),f=!u&&c?(0,j.tx)("link_expired_overlay.different_branch_permissions_header"):(0,j.tx)("link_expired_overlay.header");return t=u?(0,j.tx)("link_expired_overlay.same_branch_permissions_body",{formattedTimestamp:h,audience:p}):c?(0,j.tx)("link_expired_overlay.different_branch_permissions_body",{formattedTimestamp:h,audience:p}):(0,j.tx)("link_expired_overlay.body",{formattedTimestamp:h,audience:p}),(0,i.jsx)(eO.rq,{isShowing:s.isShowing,trackingContextName:"Link Expired Overlay",title:f,description:t,targetKey:eX.v4,onClose:s.complete})}let o5=(0,nE.bt)(e=>e.modalShown);function o4(e){return(0,i.jsx)(ir.u9,{label:"LinkExpiredOverlay",children:(0,i.jsx)(o3,{...e})})}function o3(e){let t=(0,r.useRef)(null),n=(0,f.e)({overlay:y.K_h,priority:g.N.SECONDARY_MODAL}),a=(0,oQ.sZ)(),s=(0,S.md)(ei.yV),o=S.md(o5)?.type===o0.j;return((0,ew.E)(n.uniqueId,[o$.q2],()=>{a&&s&&!n.isShowing&&!o&&n.show()}),(0,r.useEffect)(()=>(n.isShowing?t.current=setTimeout(()=>{t.current=null,n.complete()},45e3):t.current&&clearTimeout(t.current),()=>{t.current&&clearTimeout(t.current)}),[n]),a&&s)?(0,i.jsx)(o2,{overlay:n,org:a,file:s}):null}var o6=n(768512),o7=n(743212),o9=n(329983),o8=n(17248),le=n(73975),lt=n(252891);function ln(){return(0,i.jsx)(ir.u9,{label:"SlidesAiWelcome",children:(0,i.jsx)(li,{})})}function li(){let e=(0,m.wA)(),t=(0,sW.PE)(),n=(0,eT.r1)(lt.Kt),i=(0,S.md)(n),a=(0,eT.r1)(lt.wl),s=(0,S.md)(a),o=(0,o8.sO)(),l=(0,eB.aV)(),{show:d,isShowing:c,complete:u}=(0,f.e)({overlay:y.Fff,priority:s4},[i,s]),h=(0,r.useCallback)(()=>{o&&t&&(l||d({canShow:(e,t)=>e&&!t}))},[t,l,o,d]);return(0,r.useEffect)(()=>h(),[h]),(0,le.i)({onClickPrimaryCta:u,onClickSecondaryCta:()=>{e(p.b({agreed_to_slides_ai_terms:!1}))},isShowing:c,isOnboarding:!1,totalSteps:1})}var lr=n(450207),la=n(989611),ls=n(879497),lo=n(273444);function ll({openFile:e}){let t=(0,ta.Gi)(),n=(0,ta.J3)(),r=(0,ta.JU)(n);return e&&e.teamId&&t?.type==="team"&&r?(0,i.jsx)(ld,{teamId:e.teamId}):null}function ld({teamId:e}){let t=(0,m.wA)(),n=(0,eT.r1)(lt.Kt),a=(0,S.md)(n),s=(0,eT.r1)(lt.uM),o=(0,S.md)(s),l=(0,la.hX)(`[data-onboarding-key="${eW.O0}"]`),d=(0,ei.q5)(),c=(0,S.md)(ek.Fy),u=(0,eB.aV)(),p=(0,S.md)((0,ls.U)({teamId:e,editorType:ic._Y.SLIDES})),{numSkippedSlides:h,numTotalSlides:x}=(0,lo.Nr)(),_=x-h,{show:b,isShowing:v,complete:C}=(0,f.e)({overlay:y.uTW,priority:g.N.SECONDARY_MODAL},[a,o,c,p]),E=(0,r.useCallback)(()=>{!u&&l&&d&&b({canShow:(e,t,n,i)=>_>1&&e&&!t&&0===i&&n})},[u,l,d,b,_]);return(0,r.useEffect)(()=>E(),[E]),(0,r.useEffect)(()=>{v&&t(lr.j7({type:eW.eg,data:{targetRect:l,activePathOnMount:[(0,j.t)("tile.dropdown.publish_as_template")]}}))},[t,l,v]),(0,i.jsx)(eO.rq,{arrowPadding:4,arrowPosition:tv.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,j.tx)("slides.templates.pro_templates_announcement.description"),disableHighlight:!0,isShowing:v,onClose:C,onTargetLost:C,primaryCta:{label:(0,j.tx)("slides.templates.pro_templates_announcement.button.done"),type:"button",onClick:C,ctaTrackingDescriptor:eE.c.DONE},targetKey:lt.w1,title:(0,j.tx)("slides.templates.pro_templates_announcement.header"),trackingContextName:"Slides Pro Templates Announcement",userFlagOnShow:"seen_slides_pro_templates_announcement",zIndex:eN.R.MODAL})}var lc=n(855638),lu=n(330116);function lm(e){return{isDesignEditor:e===es.nT.Design,isFigjamEditor:e===es.nT.Whiteboard,isSlidesEditor:e===es.nT.Slides,isDevModeEditor:e===es.nT.DevHandoff,isCooperEditor:e===es.nT.Cooper,isSitesEditor:e===es.nT.Sites,isFigmakeEditor:e===es.nT.Figmake,isIllustrationEditor:e===es.nT.Illustration}}let lp=r.memo(function({editorType:e,openFile:t}){let{isDesignEditor:n,isDevModeEditor:a}=lm(e),s=r.useRef(!n);r.useEffect(()=>{s.current=!n},[n]),function(e){let t=(0,m.d4)(e=>e.user?.created_at),n=!!t&&(0,eo.A)("2023-05-01").isBefore(t);r.useEffect(()=>{if(!n){e.current=!0;return}},[e,n]),(0,oz.yE)("x",e),(0,oz.yE)("y",e),(0,oz.yE)("width",e),(0,oz.yE)("height",e),(0,oz.yE)("angle",e),(0,oz.yE)("cornerRadius",e),(0,oz.yE)("strokePaints",e),(0,oz.yE)("fillPaints",e),(0,oz.yE)("effects",e),(0,oz.yE)("fontSize",e),(0,oz.yE)("fontFamily",e),(0,oz.yE)("fontStyle",e),(0,oV.g)("has_zoomed_in_design_file",e),(0,oU.U)("has_panned_in_design_file",e);let i=(0,f.e)({overlay:y._5$,priority:0});oH(i.uniqueId,"action_set_tool_frame","has_selected_frame_tool",e),oH(i.uniqueId,"create_frame","has_created_frame",e),oH(i.uniqueId,"create_text","has_created_text",e),e.current}(s),function(e){let t=(0,m.wA)(),n=(0,S.md)(el.mp),i=null!=n&&(0,eo.A)("2023-10-31").isBefore(n),a=!!(0,ed.f)("has_opened_design_editor"),[s,o]=(0,S.fp)(ec);(0,r.useEffect)(()=>{i&&!a&&e&&(o(!0),t(p.b({has_opened_design_editor:!0})))},[t,a,e,o,i]),(0,r.useEffect)(()=>{s&&!e&&o(!1)},[s,e,o])}(n);let l=(0,ei.MY)(),d=(0,ea.n)(),c=(0,er.I)();return en.z4.getIsExtension()||"loaded"!==l.status||et.pb.isGoogleClassroomIntegration()||d||a&&c?null:(0,i.jsxs)(r.Suspense,{fallback:null,children:[(0,i.jsx)(lh,{openFile:t,editorType:e}),!o.Ay.isIpadNative&&(0,i.jsx)(lf,{openFile:t,editorType:e})]})});function lh({editorType:e}){let{isFigjamEditor:t}=lm(e);return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsxs)(lu.p,{children:[(0,i.jsx)(tW,{}),(0,i.jsx)(tQ,{})]})})}function lf({editorType:e,openFile:t}){let{isFigjamEditor:n,isDesignEditor:r,isSlidesEditor:m,isDevModeEditor:p}=lm(e),h=(0,l.y)(),f=(0,c.xo)(),g=(0,o9.Oc)(),x=(0,u.hA)(),_=function(e){switch(e){case es.nT.Design:return o6.C5.Design;case es.nT.Whiteboard:return o6.C5.FigJam;case es.nT.Slides:return o6.C5.Slides;case es.nT.DevHandoff:return o6.C5.DevMode;case es.nT.Cooper:return o6.C5.Cooper;case es.nT.Sites:return o6.C5.Sites;case es.nT.Figmake:return o6.C5.FigMake;case es.nT.Illustration:return o6.C5.Illustration;default:return o6.C5.Unknown}}(e);return f?(0,i.jsx)(lu.p,{children:(0,i.jsx)(nV.j,{entryPoint:_})}):(0,i.jsxs)(i.Fragment,{children:[r&&!(0,s.nl)()&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(tr,{})}),n&&!r&&(0,i.jsx)(oX.Q,{children:(0,i.jsx)(lu.p,{children:(0,i.jsx)(tc,{})})}),r&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(ng,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(nv.A,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(nC.F,{})}),!g&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(nD,{})}),!o.Xb&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lu.p,{children:(0,i.jsx)(t9.P,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(tE.A,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(tw.Ay,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(sA.A,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(t8.A,{})}),(0,i.jsx)(lu.p,{children:r&&(0,i.jsx)(o7.$,{})})]}),t?.canEditCanvas&&n&&!r&&(0,i.jsxs)(lu.p,{children:[(0,i.jsx)(an,{openFile:t}),(0,i.jsx)(sl,{}),(0,i.jsx)(rT,{}),(0,i.jsx)(ao,{}),(0,i.jsx)(rD,{}),(0,i.jsx)(rL,{})]}),!r&&!m&&!g&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(nV.j,{entryPoint:_})}),n&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(r2,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(sd.KX,{})}),n&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(oF,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(sI,{})}),n&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(oP,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(o4,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(eF,{})}),n&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(tP,{})}),r&&t?.canEdit&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(ov,{})}),r&&t?.canEdit&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(nn,{})}),r&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(t7,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(t_,{})}),!o.Xb&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(nb,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(nB,{})}),r&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(sC,{})}),r&&(0,i.jsxs)(lu.p,{children:[(0,i.jsx)(oW,{}),(0,i.jsx)(oq,{})]}),n&&!h&&!(0,a.kc)().figjam_synthesize_handbrake&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(ee,{})}),n&&!h&&!(0,a.kc)().figjam_synthesize_handbrake&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(D.Cw,{})}),r&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(eR,{})}),n&&(0,i.jsxs)(lu.p,{children:[(0,i.jsx)(sO.rj,{}),(0,i.jsx)(sV,{})]}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(nl,{})}),n&&(0,i.jsxs)(lu.p,{children:[(0,i.jsx)(sG,{}),(0,i.jsx)(iw,{})]}),t&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(oe,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(d.QI,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(ln,{})}),t?.canEditCanvas&&m&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(ll,{openFile:t})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(e_,{})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(nU.C,{source:"editor"})}),(0,i.jsx)(lu.p,{children:(0,i.jsx)(or,{})}),t?.canEditCanvas&&p?(0,i.jsxs)(lu.p,{featureFlag:"cheddar",children:[(0,i.jsx)(lc.oI,{}),(0,i.jsx)(lc.Te,{}),(0,i.jsx)(lc.Ug,{})]}):null,p&&!x&&(0,i.jsx)(lu.p,{children:(0,i.jsx)(tC,{})})]})}},157933:(e,t,n)=>{n.d(t,{ZH:()=>E,$z:()=>C,IX:()=>v});var i=n(239976),r=n(20002),a=n(379141),s=n(224542),o=n.n(s),l=n(393463),d=n(713903),c=n(154963),u=n(714778),m=n(363337),p=n(503530),h=n(83792),f=n(223487),g=n(816505);let x="custom_template_publish_nudge_content--thumbnailInnerContainerMd---C8Qt",_="custom_template_publish_nudge_content--currFileThumbnail--xhl-O",y=(0,l.ck)("b13789723ab5e9138ab263193f7d82aff4c47674"),b=(0,l.ck)("f290b00b2b225be3eb5056cb4473d87953764837");var v=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(v||{});function C({size:e=1,useCurrentFileAsThumbnail:t=!1}){let n=(0,g.dq)(),a=(0,r.d4)(e=>e.user),s=(0,f.tS)(),l=(0,h.ud)(),c={2:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicSm---ej5z custom_template_publish_nudge_content--modalGraphic--IaPCM",orgAvatar:"custom_template_publish_nudge_content--orgAvatarSm--8cWBU custom_template_publish_nudge_content--orgAvatar--zLxEO custom_template_publish_nudge_content--avatarSm--5zvys custom_template_publish_nudge_content--avatar--0SO5t",userAvatar:"custom_template_publish_nudge_content--userAvatarSm--jNWeE",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailSm--hzzdb custom_template_publish_nudge_content--exampleFileThumbnail--zTYFB",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerSm--pR56o custom_template_publish_nudge_content--thumbnailContainer--f3QVK",avatar:"custom_template_publish_nudge_content--avatarSm--5zvys custom_template_publish_nudge_content--avatar--0SO5t",thumbnailInnerContainer:x},1:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicMd--ICFWP custom_template_publish_nudge_content--modalGraphic--IaPCM",orgAvatar:"custom_template_publish_nudge_content--orgAvatarMd--D-ghb custom_template_publish_nudge_content--orgAvatar--zLxEO",userAvatar:"custom_template_publish_nudge_content--userAvatarMd--Sdej1",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailMd--mXmPt custom_template_publish_nudge_content--exampleFileThumbnail--zTYFB",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerMd--Duh62 custom_template_publish_nudge_content--thumbnailContainer--f3QVK",avatar:"custom_template_publish_nudge_content--avatarMd--60j-n custom_template_publish_nudge_content--avatar--0SO5t",thumbnailInnerContainer:x},0:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicLg--2TG8Y custom_template_publish_nudge_content--modalGraphic--IaPCM",orgAvatar:"custom_template_publish_nudge_content--orgAvatarLg--k3O2U custom_template_publish_nudge_content--orgAvatar--zLxEO",userAvatar:"custom_template_publish_nudge_content--userAvatarLg--q1M-2",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailLg--lXz83 custom_template_publish_nudge_content--exampleFileThumbnail--zTYFB",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerLg--847cI custom_template_publish_nudge_content--thumbnailContainer--f3QVK",avatar:"custom_template_publish_nudge_content--avatarLg--ylkvw custom_template_publish_nudge_content--avatar--0SO5t",thumbnailInnerContainer:"custom_template_publish_nudge_content--thumbnailInnerContainer--vmcek"}}[e],u=(0,i.jsx)("img",{src:y,alt:"",className:_});if(null!=s&&t){let e=l[s]?.thumbnail_url;e&&(u=(0,i.jsx)("img",{src:e,alt:"",className:_}))}return(0,i.jsxs)("div",{className:c.modalGraphic,children:[(0,i.jsx)("img",{src:b,alt:"",className:c.exampleFileThumbnail}),a&&(0,i.jsx)(d.n,{className:o()(c.avatar,c.orgAvatar),userId:a.id,orgId:n,size:2===e?16:1===e?24:32}),a&&(0,i.jsx)("div",{className:o()(c.avatar,c.userAvatar),children:(0,i.jsx)(m.H8,{user:a,size:2===e?m.Pf.SMALL16:1===e?m.Pf.MEDIUM:m.Pf.LARGE})}),(0,i.jsx)("div",{className:c.thumbnailContainer,children:(0,i.jsx)("div",{className:c.thumbnailInnerContainer,children:u})})]})}function E(){return(0,i.jsxs)("div",{children:[(0,i.jsx)(C,{size:0,useCurrentFileAsThumbnail:!0}),(0,i.jsx)("div",{className:c.s.p16.font11.$,children:(0,a.tx)("whiteboard.inserts.custom_templates_description")}),(0,i.jsx)("div",{className:c.s.flex.justifyEnd.mx16.mb16.$,children:(0,i.jsx)(u.pW,{newTab:!0,href:p.A,children:(0,a.tx)("whiteboard.inserts.learn_more")})})]})}},620944:(e,t,n)=>{n.d(t,{J:()=>l});var i=n(239976),r=n(224542),a=n.n(r),s=n(842582),o=n(933544);function l({onClick:e,autoFocus:t,children:n,trackingEventName:r,trackingProperties:l,large:d}){return(0,i.jsx)(s.e6,{className:a()({[o.HM]:!0,"connector_modal_cta_button--button--vp-80 text--fontPos12Whyte--dR9EX text--_fontBaseWhyte--z-Ypd":!0,"connector_modal_cta_button--buttonLarge--xpBCn text--fontPos14Whyte--3uLh- text--_fontBaseWhyte--z-Ypd":d}),onClick:e,autoFocus:t,trackingEventName:r,trackingProperties:l,children:n})}},772161:(e,t,n)=>{n.d(t,{O:()=>a});var i=n(105652),r=n(723850);function a(){let e=(0,r.U)();return(0,i.useCallback)(t=>{e("figjam_onboarding_event",t,{batchRequest:!1})},[e])}},395050:(e,t,n)=>{n.d(t,{CM:()=>g,mI:()=>x,mN:()=>_,rL:()=>v,vX:()=>y,wV:()=>b});var i=n(239976),r=n(105652),a=n(649109),s=n(379141),o=n(393463),l=n(259714),d=n(543595),c=n(465612),u=n(620944),m=n(772161),p=n(624631),h=n(280009),f=n(858192);let g="FigJam Editor Onboarding";function x(e){return(0,i.jsxs)("div",{className:h.hQ,children:[e.svg&&(0,i.jsx)("div",{className:h.ZS,children:(0,i.jsx)(l.B,{svg:e.svg,useOriginalSrcFills_DEPRECATED:!0})}),(0,i.jsxs)("div",{className:h.IP,children:[e.titleText?e.titleText:"",e.bodyText]}),e.buttonText&&e.onButtonClick&&(0,i.jsx)("div",{className:h.UD,children:(0,i.jsx)(u.J,{onClick:e.onButtonClick,children:e.buttonText})})]})}let _=(0,o.ck)("8f3066fc3906f11f2601a390725f2b7af58e01a1");function y(e){let t=(0,m.O)(),n=()=>{e.onSkipClick(),(0,d.YQ)({id:p.P7}),t({eventName:"msv2_skipped",useCase:e.useCase})},r=(0,c.D)();return(0,i.jsxs)(a.b,{onKeyDown:e=>{if("Escape"===e.key){n(),e.preventDefault(),e.stopPropagation();return}},children:[e.children,(0,i.jsx)("div",{className:h.Lx,style:{marginBottom:r+32},children:(0,i.jsxs)(u.J,{onClick:n,trackingProperties:{text:"Skip intro"},children:[(0,s.tx)("figjam_onboarding_make_something.all.skip_intro"),(0,i.jsx)(l.B,{svg:f.A})]})})]})}function b(e){return(0,i.jsx)("div",{className:h.xn,children:(0,i.jsx)(x,{bodyText:e.bodyText,buttonText:e.buttonText,onButtonClick:e.onButtonClick,svg:e.svg})})}function v(e){let{useCase:t,stepName:n,stepNum:i}=e,a=(0,m.O)();(0,r.useEffect)(()=>{a({eventName:"msv2_step_shown",useCase:t,stepName:n,stepNum:i})},[n,i,a,t])}},207268:(e,t,n)=>{n.d(t,{m5:()=>R,pN:()=>N,rj:()=>P});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(379141),l=n(445019),d=n(393463),c=n(639184),u=n(859100),m=n(841301),p=n(574220),h=n(634224),f=n(761312),g=n(776888),x=n(456556),_=n(215496),y=n(289252),b=n(527205),v=n(397344),C=n(355441),E=n(271625),w=n(489445),k=n(983363),T=n(776844),j=n(907023),S=n(525256),I=n(522838),A=n(176133);let N="section_presets_announcement_key",M="seen_figjam_section_presets_announcement",R=(0,h.Fu)(M);function P(){let e=(0,l.md)(S.P)===I.iH.TRUE,t=(0,a.d4)(e=>e.mirror.appModel.currentPage),n=(0,x.Fk)((t,n)=>(0,g.zC)(t,n)||e&&(0,g.re)(t,n),t),h=(0,f.q)(),P=(0,l.md)((0,l.Rq)(m.Sb)),O=(0,l.md)(R),D=(0,l.md)(T.w),L=(0,j._)(),F=(0,v.Td)(),B=function(){let[e,t]=(0,r.useState)(!1),n=(0,a.d4)(e=>e.isMakeSomethingV2Active),i=(0,l.md)(w.rM);return(0,r.useEffect)(()=>{(n||i)&&t(!0)},[i,n]),e}(),U=(0,l.md)(w.dO),V=(0,l.md)(p.mp),H=U.status!==k.c.NONE,[z,G]=(0,r.useState)(!1),{show:K,isShowing:W,complete:q}=(0,u.e)({overlay:E.pjo,priority:_.N.SECONDARY_MODAL},[O,P,V]),X=1e3*parseFloat(A.H)+1e3;return(0,r.useEffect)(()=>{let e=setTimeout(()=>{G(!0)},X);return()=>{clearTimeout(e)}},[X]),(0,r.useEffect)(()=>{D&&!B&&!H&&n&&h&&L&&z&&!F&&K({canShow:(e,t,n)=>{let i=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n);return!e&&!t&&i}})},[K,n,h,D,L,z,H,B,F]),(0,i.jsx)(b.rq,{arrowPosition:C.F_.BOTTOM,description:(0,o.tx)("whiteboard.section_presets_onboarding.feature_announcement.description"),isShowing:W,media:(0,i.jsx)(y.w,{src:(0,d.ck)("0ccb9b0b677f719939bd9bacd937201dfea4e8c9"),aspectRatio:4/3}),onClose:q,primaryCta:{label:(0,o.tx)("rcs.got_it"),type:"button",onClick:q,ctaTrackingDescriptor:c.c.GOT_IT},secondaryCta:{label:(0,o.tx)("whiteboard.section_presets_onboarding.feature_announcement.secondary"),type:"button",onClick:()=>{e&&s.gw5.setFigjamStarterKitEnabled(!1),s.T4N.createSectionForOnboarding(),q()},ctaTrackingDescriptor:c.c.SECTION_PRESET_PICKER_SHOW_ME},targetKey:N,title:(0,o.tx)("whiteboard.section_presets_onboarding.feature_announcement.title"),trackingContextName:"section_preset_picker_dlt_announcement",userFlagOnShow:M})}},482621:(e,t,n)=>{n.d(t,{Bs:()=>a,a5:()=>r,bo:()=>d,fc:()=>o,fg:()=>i,io:()=>l,ko:()=>s});let i=-32,r="visual_asset_packs_tooltip",a="visual_assets_tooltip_onboarding_key",s="visual_assets_panel_tooltip_onboarding_key",o="visual_assets_panel_tooltip",l="visual_assets_tooltip_reset",d="visual_assets_intro_tooltip"},914909:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(239976),r=n(105652),a=n(20002),s=n(454705),o=n(379141),l=n(445019),d=n(184743),c=n(346942),u=n(842582),m=n(620573);let p=(0,l.eU)("");function h({onResult:e,useDarkMode:t}){let[n,h]=(0,l.fp)(p),[f,g]=(0,r.useState)(!1),x=r.useRef(null),_=(0,r.useCallback)(e=>{h(e.target.value)},[h]),y=(0,a.d4)(e=>(0,m.$A)(e.selectedView)),b=(0,r.useCallback)(()=>{e(n),h("")},[n,e,h]),v=r.useCallback(e=>{switch(e.keyCode){case d.Uz.SPACE:case d.Uz.ENTER:b(),e.stopPropagation();return}},[b]);return(0,r.useEffect)(()=>{let e=x.current;if(e)return e.addEventListener("keydown",v),()=>{e.removeEventListener("keydown",v)}},[v]),(0,i.jsx)(s.J,{brand:y?"dev-handoff":"design",mode:t?"dark":void 0,children:(0,i.jsxs)("div",{className:"ready_status_menu_item--menuItemContainer--W5ve7",children:[(0,i.jsx)(c.ks,{autoFocus:!0,className:"ready_status_menu_item--textInput--dPr2I",maxLength:1e3,onChange:_,onCompositionEnd:()=>g(!1),onCompositionStart:()=>g(!0),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||e.shiftKey||f||b()},placeholder:(0,o.t)("dev_handoff.status.menu_note_placeholder"),type:"textarea",value:n}),(0,i.jsx)(u.Ih,{ref:x,variant:"primary",onClick:b,recordingKey:"markReady",children:(0,o.tx)("dev_handoff.status.menu_note_button")})]})})}},82468:(e,t,n)=>{n.d(t,{P:()=>d,X:()=>l});var i=n(239976),r=n(105652),a=n(7857),s=n(223487),o=n(312258);let l=(0,r.createContext)(null);function d(e){return(0,i.jsx)(a.u9,{label:"BranchCountProvider",children:(0,i.jsx)(c,{...e})})}function c({children:e}){let t=(0,s.q5)(),n=t?.fileRepoId,a=(0,o.Yj)(n??null),d=(0,r.useMemo)(()=>a&&"loaded"===a.status?a.data.activeBranches.length:null,[a]);return(0,i.jsx)(l.Provider,{value:d,children:e})}},479690:(e,t,n)=>{n.d(t,{A5:()=>z,CT:()=>G,EA:()=>V,H1:()=>et,II:()=>Z,L4:()=>K,SK:()=>J,SQ:()=>W,VK:()=>en,WB:()=>Y,aH:()=>ee,bL:()=>$,ih:()=>H,wd:()=>q});var i=n(239976),r=n(105652),a=n(20002),s=n(291061),o=n(692376),l=n(854225),d=n(2227),c=n(466082),u=n(379141),m=n(445019),p=n(270351),h=n(443389),f=n(460743),g=n(723850),x=n(184743),_=n(7995),y=n(289555),b=n(17147),v=n(684170),C=n(540098),E=n(562418),w=n(557909),k=n(577355),T=n(18976),j=n(341153),S=n(862390),I=n(707470),A=n(384203),N=n(323747),M=n(920675),R=n(442623),P=n(14681),O=n(142037),D=n(363198),L=n(544392),F=n(366898),B=n(599249),U=(e=>(e.SEARCH="canvas_search",e.SEARCH_WITH_MULTIPAGE_LOAD="canvas_search_with_multipage_load",e))(U||{});let V=r.createContext(!1);function H({id:e,ariaActiveDescendant:t,onChange:n,query:r,focusedByButtons:a,innerRef:s,onKeyDown:o,onKeyUp:l,onPasteCapture:d,onFocus:c,editorType:m}){return(0,i.jsx)(F.H,{ariaActiveDescendant:t,ariaDescription:(0,u.t)("canvas_search.results_will_update_as_you_type"),dataTestId:"canvas-search-input",id:e,innerRef:s,onChange:n,onFocus:e=>{c&&c(e),!a.current&&e.target&&e.target.select(),a.current=!1},onKeyDown:e=>{e.keyCode===x.Uz.F?(0,x.Te)(e)?(e.currentTarget.select(),e.preventDefault()):(0,k.jr)(e,k.W0.NO,k.VA.NO)&&e.stopPropagation():o(e)},onKeyUp:l,onPasteCapture:d,placeholder:(0,u.t)("canvas_search.search_placeholder"),recordingKey:`${m}.canvas_search.search`,value:r})}function z(e,t,n){let i=(0,r.useCallback)(({direction:i,shouldSelectInput:r})=>{if(e&&!e.current?.matches(":focus")){let t=new IntersectionObserver(i=>{let[a]=i;r?e.current?.select():(n.current=!0,e.current?.focus()),a.isIntersecting&&t.disconnect()});return e.current&&t.observe(e.current),()=>t.disconnect()}i&&t(i,"keyboard")},[n,e,t]);(0,f.p)(w.r.FocusEvent,i)}function G(){let e=(0,r.useRef)(!1),[t,n]=(0,r.useState)(!0),{query:i}=(0,a.d4)(e=>e.canvasSearch),{total:s}=(0,m.md)(v.Fk);return{focusedByButtons:e,hidden:t,setHidden:n,inputRef:r.useRef(null),navDisabled:!i||s<=1,showUi:(0,A.p8)("showUi")}}function K(){let e=(0,j.Z)("canvas_search_navigate"),t=(0,a.d4)(e=>e.canvasSearch.scope);return(0,r.useCallback)((n,i)=>{e(o.YEY.setActiveResultAndGetViewportSettings(n,i),{additionalTrackEventParams:{searchScope:o.Lov[t]}})},[e,t])}function W(){let e=(0,j.Z)("canvas_search_navigate"),{query:t,scope:n,filters:i,mode:l}=(0,a.d4)(e=>e.canvasSearch),c=(0,a.wA)(),u=(0,r.useRef)(!1),m=(0,r.useRef)(null),f=(0,A.p8)("currentPage"),x=(0,I.L3)(),v=(0,A.p8)("pagesList"),[E,w]=(0,r.useState)(!1),[k,M]=(0,r.useState)(o.Ez5.uiState().isRecovery.getCopy()),[R,P]=(0,r.useState)(!1),O=X(),D=(0,g.am)(),L=(0,y.yZ)(),F=(0,r.useMemo)(()=>L&&(0,N.lH)(v),[L,v])||L&&o.h3O?.isValidatingIncremental(),B=(0,r.useMemo)(()=>!L&&(0,N.lH)(v),[L,v]);(0,r.useLayoutEffect)(()=>{n!==o.Lov.ALL_PAGES||R||!F&&k?o.YEY?.setSearchScope(n):(P(!0),scheduler.postTask(async()=>{F&&(m.current||(m.current="canvas_search_with_multipage_load",_.J.startVital("canvas_search_with_multipage_load",{level:s.$b.INFO,context:{description:"load all pages before search"}})),await (0,T.q)(o._em.FIND_AND_REPLACE)),o.YEY?.setSearchScope(n),M(!0)},{priority:"user-blocking"}))},[k,v,n,R,F]);let U=(0,r.useCallback)(async(t,i=!0)=>{h.sn.start("canvas_search_time_to_results"),m.current||(m.current="canvas_search",_.J.startVital("canvas_search",{level:s.$b.INFO,context:{description:"run search"}})),P(!0);let{nav:r,resultsByPage:a}=await O(t,i);Object.keys(a).filter(e=>e!==f&&e!==d.Xy).length?w(!0):w(!1),P(!1),i&&e(r,{additionalTrackEventParams:{searchScope:o.Lov[n]}});let l=h.sn.tryStop("canvas_search_time_to_results");l&&D("canvas_search_time_to_results",{timeElapsedMs:l,searchScope:o.Lov[n],resultCount:Object.values(a).reduce((e,t)=>e+=t.length,0)}),m.current&&(_.J.stopVital(m.current),m.current=null)},[f,e,n,O,D]),V=(0,p.A)(U,300),H=(0,r.useCallback)((e,t=!0)=>{c(C.NY(e)),P(!!e&&!(0,b.jN)(e)),V(e,t)},[c,V]);return(0,r.useEffect)(()=>{x&&t&&(n!==o.Lov.ALL_PAGES||!F&&k)&&U(t,!1)},[i,l,n,x,v,k,F]),{query:t,showSearch:x,resultsOnOtherPages:E,search:H,next:(0,r.useCallback)((t,n)=>{(0,S.Uc)(""),o.YEY.setHoveredResult(d.AD,-1);let i=!u.current;u.current=!1,e(o.YEY.setNextSearchResultAndGetViewportSettings(t,i),{additionalTrackEventParams:{source:n}})},[e]),exit:q(),setNavigateNearestOnce:function(){u.current=!0},mode:l,isLoading:R,allInstancesExpanded:k,missingResultsOnSomePages:B}}function q(){let e=(0,m.Xr)(L.lx),t=(0,D.cJ)();return(0,r.useCallback)(()=>{t?e(l.Nfd.FILE):o.YEY?.exitSearchMode(o.dNx.NONE)},[t,e])}function X(){let{scope:e,filters:t,mode:n}=(0,a.d4)(e=>e.canvasSearch),i=(0,A.p8)("currentPage"),s=(0,g.am)(),l=(0,E.lg)(),c=(0,a.d4)(e=>e.mirror.appModel.pagesList),u=(0,O.iW)();return(0,r.useCallback)(async(r,a=!0,m)=>{let p=m??i;if(!r||(0,b.jN)(r)){let{nav:e}=o.YEY.setSearchResultsAndGetViewportSettings([],p,"",{categories:[],mode:n});return{nav:e,resultsByPage:{}}}let h=!!t[P.kM.MatchCase],f=!!t[P.kM.WholeWords],{resultsByPage:g,metrics:x}=await R.H1.search(r,{searchLayerNames:[M._Y.DESIGN,M._Y.SLIDES,M._Y.SITES].includes(l),searchAnnotationTextContent:u,matchCase:h,wholeWords:f}),_=(0,B.kH)(t),y=e===o.Lov.ACTIVE_PAGE?g[p]?[{pageId:p,results:g[p]}]:[]:Object.keys(g).map(e=>({pageId:e,results:g[e]}));if(e===o.Lov.ACTIVE_PAGE&&g[d.Xy]){let e=g[d.Xy];e.length&&y.push({pageId:d.Xy,results:e})}if(1===r.length){let e=0,t=[],n=y.findIndex(e=>e.pageId===d.Xy);for(let i of(n>-1&&t.push(y[n]),c)){let n=y.findIndex(e=>e.pageId===i.nodeId);if(-1===n)continue;let r=y[n];if(r.results.length>1e3-e){t.push({results:r.results.slice(0,1e3-e),pageId:r.pageId});break}e+=r.results.length,t.push(r)}y=t}let{nav:v,...C}=o.YEY.setSearchResultsAndGetViewportSettings(y,p,r,{categories:_,mode:n}),E=_.map(e=>P.kM[e]);return s("canvas_search_results",{...x,...C,nodeTypes:E,searchScope:o.Lov[e],matchCase:h,wholeWords:f}),{nav:v,resultsByPage:g}},[i,l,t,n,c,e,u,s])}function Y(){let e=(0,I.L3)(),t=o.YEY.hasDirtyPrimaryInstances(),n=(0,m.md)(v.Fk),i=(0,r.useRef)([]),a=t&&i.current.length,s=(0,r.useMemo)(()=>{if(!e||!n.total||a)return[];let t=o.YEY.getSearchResults(),r=[];return t.forEach(e=>{let t=e.results.map(e=>{let t=(0,c.UN)().get(e.guid);return t?{...e,textContent:t.textContent,name:t.name}:e});r.push({results:t,pageId:e.pageId})}),i.current=r,r},[n,e,a]);return a?i.current:s}function J(e){return!e.clientX&&!e.clientY||1===e.buttons}function Z(){let{query:e,scope:t}=(0,a.d4)(e=>e.canvasSearch),n=X();return(0,r.useCallback)(i=>{let r=o.YEY.getActiveResult(),a=r.type===l.Z6A.CANVAS,s=i||a&&r.guid;return!!s&&((0,c.UN)().setCurrentPageAsync(s).then(()=>{t===o.Lov.ACTIVE_PAGE?n(e,!1,s):o.YEY.setActiveResultAndGetViewportSettings(s,0)}),!0)},[e,t,n])}let Q=(0,m.eU)(null);function $(){return(0,m.fp)(Q)}function ee(){let e=(0,m.Xr)(Q);return(0,r.useCallback)(t=>{J(t)||e(null)},[e])}function et(){let e=(0,m.Xr)(Q);return(0,r.useCallback)(t=>{J(t)&&e(t.currentTarget)},[e])}function en(){let[e,t]=$();return(0,r.useCallback)(n=>{n&&e&&n?.id===e?.id&&(t(null),n?.focus())},[e,t])}},471380:(e,t,n)=>{n.d(t,{_:()=>c});var i=n(239976),r=n(105652),a=n(378721),s=n(321204),o=n(379141),l=n(236410),d=n(479690);function c({onClick:e}){let t=(0,d.H1)(),n=(0,d.VK)(),c=r.useCallback(n=>{t(n),e(n)},[e,t]);return(0,i.jsx)(a.K,{ref:n,onClick:c,recordingKey:"canvas_search.search_icon_button","aria-label":(0,o.t)("fullscreen_actions.find"),id:"canvas-search-icon-button","data-onboarding-key":"canvas-search","data-tooltip":"canvas-search","data-tooltip-type":l.Ib.LOOKUP,children:(0,i.jsx)(s.W,{})})}},366898:(e,t,n)=>{n.d(t,{H:()=>m});var i=n(239976),r=n(105652),a=n(865702),s=n(224542),o=n.n(s),l=n(184743),d=n(29161),c=n(196792),u=n(36001);function m({id:e,ariaDescription:t,ariaActiveDescendant:n,innerRef:s,value:m,placeholder:p,onChange:h,onFocus:f,onKeyDown:g,onKeyUp:x,shiftEnterInsertsNewline:_,dataTestId:y,recordingKey:b,onPasteCapture:v}){let C=(0,r.useCallback)(e=>{s&&(s.current=e?.textarea??null)},[s]),E=m.includes("\n");return(0,i.jsx)(c.v,{ref:C,ariaActiveDescendant:n,ariaDescription:t,className:o()(u.Rt,{[u.tI]:!E}),dataTestId:y,disableBorderStyles:!0,focusOnMount:!0,id:e,onChange:e=>h(e.currentTarget.value),onEscape:a.lQ,onFocus:f,onKeyDown:e=>{switch(e.keyCode){case l.Uz.ENTER:if(e.preventDefault(),_&&(e.shiftKey||d.Ay.mac&&e.ctrlKey)){let{selectionStart:t,selectionEnd:n}=e.currentTarget;e.currentTarget.setRangeText("\n",t,n,"end"),e.currentTarget.scrollLeft=0,e.stopPropagation(),h(e.currentTarget.value);return}break;case l.Uz.UP_ARROW:case l.Uz.DOWN_ARROW:if(E)return}g(e)},onKeyUp:x,onPasteCapture:v,placeholder:p,recordingKey:b,role:"combobox",spellCheck:!1,value:m})}},99932:(e,t,n)=>{n.d(t,{a:()=>I});var i=n(239976),r=n(105652),a=n(20002),s=n(942356),o=n(474164),l=n(692376),d=n(798913),c=n(379141),u=n(445019),m=n(224542),p=n.n(m),h=n(443389),f=n(723850),g=n(184743),x=n(499735),_=n(684170),y=n(282746),b=n(888903),v=n(562418),C=n(577355),E=n(341153),w=n(963245),k=n(236410),T=n(579263),j=n(366898),S=n(36001);function I({query:e,value:t,onChange:n,onFocus:m,recordingKey:I,hasMultipleSelections:A}){let N=(0,a.wA)(),M=(0,w.aq)(),R=(0,E.Z)("canvas_search_navigate"),P=(0,a.d4)(e=>e.canvasSearch.scope),{total:O}=(0,u.md)(_.Fk),D="whiteboard"===(0,v.lg)(),[L,F]=(0,r.useState)(!1),B=(0,T.HY)(),U=(0,y.b)()||B,V=e.toLocaleLowerCase()!==t.toLocaleLowerCase(),H=(0,f.am)(),z=!e||!O,G=d.nc.user("canvas-search-replace",n=>{if(!l.YEY)return;if(A){let{numReplaced:i,timeMs:r}=l.YEY.replaceInMultipleResults(t,{preserveCase:V},l.rpt.ONLY_ACTIVE);H("canvas_search_multi_replace",{source:n,timeMs:r,numReplaced:i,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),F(!0);return}let i=l.YEY.replaceInActiveResult(t,{preserveCase:V});i.wasSuccessful&&(F(!0),H("canvas_search_replace",{source:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),N(b.F.enqueue({type:"canvas-search-replace-once",message:(0,c.t)(D?"canvas_search.replace_all_message_figjam":P===l.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:1})})),i.nav&&R(i.nav,{delay:300,additionalTrackEventParams:{searchScope:l.Lov[P]}}))}),K=d.nc.user("canvas-search-replace-all",()=>{h.sn.start("canvas_search_replace_all");let{numReplaced:n,timeMs:i}=l.YEY.replaceInMultipleResults(t,{preserveCase:V},l.rpt.ALL);n>0&&(F(!0),N(b.F.enqueue({type:"canvas-search-replace-all",message:(0,c.t)(D?"canvas_search.replace_all_message_figjam":P===l.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:n})}))),H("canvas_search_replace_all",{source:"button",timeMs:i,numReplaced:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),h.sn.tryStop("canvas_search_replace_all")}),W=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:p()(S.v9,{[S.ei]:""===t}),"aria-hidden":"true",children:(0,i.jsx)(o.H,{})}),(0,i.jsx)(j.H,{value:t,placeholder:(0,c.t)("canvas_search.replace_placeholder"),recordingKey:x.Pt(I,"replace_input"),onChange:n,onFocus:e=>{m?.(e,!M())},onKeyDown:e=>{e.keyCode===g.Uz.ENTER?(G("enter"),e.stopPropagation()):L&&(0,g.Fo)(e)&&(0,C.jr)(e,C.W0.YES)&&e.stopPropagation()},shiftEnterInsertsNewline:!0})]});return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:p()(S.N6,U&&S.Sq),children:D?W:(0,i.jsx)("div",{className:S.Z9,children:W})}),(0,i.jsxs)("div",{className:S._E,children:[(0,i.jsx)(s.$n,{variant:"secondary",disabled:z,"data-tooltip":(0,c.t)("canvas_search.replace_one"),"data-tooltip-type":k.Ib.TEXT,onClick:()=>G("button"),recordingKey:x.Pt(I,"replace_one"),children:(0,c.tx)("canvas_search.replace_one")}),(0,i.jsx)(s.$n,{disabled:z,variant:"secondary",onClick:K,recordingKey:x.Pt(I,"replace_all"),children:(0,c.tx)("canvas_search.replace_all")})]})]})}},473583:(e,t,n)=>{n.d(t,{I_:()=>R,Od:()=>P});var i=n(239976),r=n(105652),a=n(805242),s=n(20002),o=n(429921),l=n(796557),d=n(735786),c=n(415839),u=n(751543),m=n(692376),p=n(379141),h=n(270450),f=n(445019),g=n(29161),x=n(499735),_=n(684170),y=n(620030),b=n(259714),v=n(39171),C=n(540098),E=n(562418),w=n(964731),k=n(384203),T=n(14681),j=n(236410),S=n(617654),I=n(363198),A=n(599249),N=n(575385),M=n(144122),R=(e=>(e.LEFT="left",e.RIGHT="right",e.CENTER="center",e))(R||{});function P({lean:e,minWidth:t,shouldShowSearchCategories:n,recordingKey:r}){if(!(0,h.kc)().eu_fpl_migration_search_settings_menu)return(0,i.jsx)(O,{lean:e,minWidth:t,recordingKey:r});{let a=(e=>{switch(e){case"left":return"bottom-end";case"right":default:return"bottom-start";case"center":return"bottom"}})(e);return(0,i.jsx)(F,{minWidth:t,placement:a,shouldShowSearchCategories:n,recordingKey:r})}}function O({lean:e,minWidth:t,recordingKey:n}){let d=(0,s.wA)(),c=(0,w.BK)("CANVAS_SEARCH_FILTER_DROPDOWN"),h=r.useRef(null),b=(0,k.p8)("isReadOnly"),A=(0,f.md)(_.yo),N=(0,s.d4)(e=>e.canvasSearch.filters),R=(0,s.d4)(e=>e.canvasSearch.mode),P="whiteboard"===(0,E.lg)(),O=(0,I.cJ)(),F=(0,v.to)(),B=r.useMemo(()=>{let e=b?[]:[(0,i.jsx)(y.y0,{primaryText:(0,p.t)("canvas_search.search"),checked:R===m.EW4.FIND,onClick:()=>{d(C.sV(m.EW4.FIND)),c.hide()},recordingKey:x.Pt(n,"settings.find")},"find"),(0,i.jsx)(y.y0,{primaryText:(0,p.t)("canvas_search.replace"),checked:R===m.EW4.REPLACE,onClick:()=>{d(C.sV(m.EW4.REPLACE)),c.hide()},recordingKey:x.Pt(n,"settings","replace")},"replace"),(0,i.jsx)(y.wv,{},"sep1")],t=(t,r=!1)=>{let a=!!N[t];e.push((0,i.jsx)(D,{option:t,checked:a,counts:A,onClick:e=>{r||e.ctrlKey||g.Ay.mac&&e.metaKey?(d(C.DI(t)),r&&c.hide()):(d(C.zx(t)),c.hide())},recordingKey:n},t))};if(R===m.EW4.FIND&&!P&&!F){let r=!T.b4.some(e=>!!N[e]),a=Object.values(A).reduce((e,t)=>e+t,0);e.push((0,i.jsx)(L,{checked:r,icon:M.A,label:(0,p.t)("canvas_search.filter.all"),count:a,onClick:()=>{d(C.dY()),c.hide()},recordingKey:x.Pt(n,"settings","All")})),T.b4.forEach(e=>t(e)),e.push((0,i.jsx)(y.wv,{},"sep2"))}return T._V.forEach(e=>t(e,!0)),e},[d,c,N,P,F,b,R,A,n]);(0,r.useEffect)(()=>{b&&R===m.EW4.REPLACE&&d(C.sV(m.EW4.FIND))},[d,b,R]);let U=h.current&&(0,i.jsx)(S.Jz,{autofocusPrevElementOnEsc:!0,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnTab:!1,hideDropdown:c.hide,lean:e,minWidth:t,options:B,propagateCloseClick:!0,recordingKey:x.Pt(n,"settings"),showPoint:!0,targetRect:h.current.getBoundingClientRect()});return(0,i.jsxs)(o.o,{eventListeners:["onClick","onMouseUp"],children:[(0,i.jsx)("div",{ref:h,children:(0,i.jsx)(l.d,{"aria-expanded":c.showing,onClick:()=>c.toggle(),actionOnPointerDown:!0,"aria-label":(0,p.t)("canvas_search.settings"),recordingKey:x.Pt(n,"settings"),"data-tooltip-type":j.Ib.TEXT,"data-tooltip":(0,p.t)("canvas_search.settings"),children:(0,i.jsx)(u.P,{})})}),c.showing&&(O||F?a.createPortal(U,document.body):U)]})}function D(e){let t=e.counts[e.option],n=(0,A.sW)(e.option),r=(0,A.p9)(e.option);return(0,i.jsx)(L,{checked:e.checked,icon:n,label:r,count:t,onClick:e.onClick,buttonRef:e.buttonRef,recordingKey:x.Pt(e,"settings",T.kM[e.option])})}function L({checked:e,icon:t,label:n,count:r,onClick:a,buttonRef:s,recordingKey:o}){return(0,i.jsx)(y.MM,{checked:e,onClick:a,recordingKey:o,buttonRef:s,children:(0,i.jsxs)("div",{className:N.wV,children:[t&&(0,i.jsx)(b.B,{className:N.H9,svg:t}),(0,i.jsx)("span",{className:N.ed,children:n}),!!r&&(0,i.jsx)("span",{className:N.t1,children:r})]})})}function F({minWidth:e,placement:t,shouldShowSearchCategories:n,recordingKey:a}){let h=(0,s.wA)(),g=(0,k.p8)("isReadOnly"),y=(0,f.md)(_.yo),b=(0,s.d4)(e=>e.canvasSearch.filters),v=(0,s.d4)(e=>e.canvasSearch.mode),{manager:E,getTriggerProps:w}=d.b({initialPosition:t}),S=e=>{h(C.sV(e)),E.setOpen(!1)},I=(e,t)=>{e?.ctrlKey||e?.metaKey?h(C.DI(t)):h(C.zx(t))},N=e=>{h(C.DI(e))},R=v===m.EW4.FIND&&n;return(0,r.useEffect)(()=>{g&&v===m.EW4.REPLACE&&h(C.sV(m.EW4.FIND))},[h,g,v]),(0,i.jsx)(o.o,{eventListeners:["onClick","onMouseUp"],children:(0,i.jsxs)(d.bL,{manager:E,children:[(0,i.jsx)(l.d,{"aria-label":(0,p.t)("canvas_search.settings"),recordingKey:x.Pt(a,"settings"),"data-tooltip-type":j.Ib.TEXT,"data-tooltip":(0,p.t)("canvas_search.settings"),...w(),children:(0,i.jsx)(u.P,{})}),(0,i.jsxs)(d.mc,{children:[!g&&(0,i.jsxs)(c.z6,{value:v.toString(),onChange:e=>S(parseInt(e)),title:null,recordingKey:x.Pt(a,"mode_change"),children:[(0,i.jsx)(c.CU,{value:m.EW4.FIND.toString(),children:(0,i.jsx)("span",{style:{display:"flex",alignItems:"center",width:"100%",...e?{minWidth:`${e}px`}:{}},children:(0,p.t)("canvas_search.search")})},"find"),(0,i.jsx)(c.CU,{value:m.EW4.REPLACE.toString(),children:(0,i.jsx)("span",{style:{display:"flex",alignItems:"center",width:"100%",...e?{minWidth:`${e}px`}:{}},children:(0,p.t)("canvas_search.replace")})},"replace")]}),R&&(0,i.jsxs)(d.YJ,{children:[(0,i.jsx)(B,{recordingKey:x.Pt(a,"settings","All"),checked:!T.b4.some(e=>!!b[e]),onChange:()=>{h(C.dY())},icon:M.A,label:(0,p.t)("canvas_search.filter.all"),count:Object.values(y).reduce((e,t)=>e+t,0),minWidth:e}),T.b4.map(t=>(0,i.jsx)(B,{recordingKey:x.Pt(a,"settings",T.kM[t]),checked:!!b[t],onChange:e=>I(e,t),icon:(0,A.sW)(t),label:(0,A.p9)(t),count:y[t],minWidth:e},t))]}),(0,i.jsx)(d.YJ,{children:T._V.map(e=>(0,i.jsx)(B,{recordingKey:x.Pt(a,"settings",T.kM[e]),checked:!!b[e],onChange:()=>N(e),icon:(0,A.sW)(e),label:(0,A.p9)(e)},e))})]})]})})}function B({checked:e,onChange:t,icon:n,label:r,count:a,recordingKey:s,minWidth:o}){return(0,i.jsx)(c.H_,{recordingKey:s,checked:e,onChange:(e,n)=>{t(n?.event)},children:(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center",width:"100%",...o?{minWidth:`${o}px`}:{}},children:[n&&(0,i.jsx)(d.Q$,{children:(0,i.jsx)(b.B,{className:N.H9,svg:n})}),r,!!a&&(0,i.jsx)(d.Ov,{children:(0,i.jsx)(d.ME,{"data-testid":x.Pt(s,"count"),children:a})})]})})}},416854:(e,t,n)=>{n.d(t,{W:()=>S,l:()=>j});var i=n(239976),r=n(105652),a=n(20002),s=n(787049),o=n(379141),l=n(445019),d=n(536378),c=n(960068),u=n(324880),m=n(852553),p=n(550534),h=n(776888),f=n(384203),g=n(223487),x=n(920675),_=n(329076),y=n(935467),b=n(21612),v=n(397043),C=n(430169),E=n(665933),w=n(222041),k=n(597048),T=n(700954);let j=(0,l.eU)(!1);function S({clientX:e,clientY:t,pageIds:n,selectedView:S,shouldShowDuplicateOption:I}){let A=(0,a.wA)(),N=(0,a.d4)(e=>e.mirror.appModel),M=(0,g.q5)(),R=(0,f.p8)("pagesList"),P=(0,h.HZ)(),O=m.F.useShouldHideStarterCtaForOpenFile(),D=(0,E.cT)(),L=(0,C.hZ)(),F=1===n.length&&void 0!==n[0]?function({pageId:e,openFile:t,pagesList:n,team:i,shouldShowDuplicateOption:r,shouldPaywallForDraftsPageLimitV1:a,dispatch:s,hideUpsellPlanCta:l,isFileReadOnly:u,isK12OrgStudent:h}){var f;let g=n.length,v=n.filter(e=>!e.isDivider).length,C=n.find(t=>t.nodeId===e),E=!!C&&C.isDivider,j=n=>(0,T.HZ)()&&C&&t&&t.editorType===x._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,T.$t)({pageGuids:[e],dispatch:n,source:k.E.FJ_PAGE_MENU})}]:[];if(u||h)return[{action:"page-copy-link",args:{nodeId:e}},...j(s)];let S=r?(f=E?(0,o.t)("fullscreen_actions.divider-duplicate"):(0,o.t)("fullscreen_actions.page-duplicate"),t&&((0,_.J9)({openFile:t,pageCount:g})||a({openFile:t,pageCount:g}))?{name:"page-duplicate",callback:()=>{s((0,d.to)({type:w.DV,data:{team:i,resource:y.vL.PAGE,action:b.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:m.F.Plan.STARTER,upsellPlan:m.F.Plan.PRO,hideUpsellPlanCta:l,entryPoint:p.C.CREATE_NEW_PAGE}}))},displayText:f}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:f}):null;return E?[S,{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,o.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,o.t)("fullscreen_actions.pages-rename",{pageCount:1})},S,{separator:!0},{action:"page-delete",callback:()=>s(c.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===v,displayText:(0,o.t)("fullscreen_actions.pages-delete",{pageCount:1})},...j(s)]}({pageId:n[0],team:M?M.team:null,shouldShowDuplicateOption:I,openFile:M,pagesList:R,shouldPaywallForDraftsPageLimitV1:P,dispatch:A,hideUpsellPlanCta:O,isFileReadOnly:D,isK12OrgStudent:L}):function({pageIds:e,pagesList:t,dispatch:n,isFileReadOnly:i,isK12OrgStudent:r}){if(i||r)return[];let a=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),s=e.filter(e=>a.has(e)),d=s.length;return 0===d?[]:[{action:"batch-page-rename",args:{nodeIds:s},displayText:(0,o.t)("fullscreen_actions.pages-rename",{pageCount:d})},{separator:!0},{action:"page-delete",callback:()=>n(c.PK({})),args:{nodeIds:s},loadingIndicatorString:"Deleting",displayText:(0,o.t)("fullscreen_actions.pages-delete",{pageCount:d}),disabled:a.size<=d},...(t=>{if(!(0,T.HZ)())return[];let n=l.zl.get(g.yV);return n&&n.editorType===x._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,T.$t)({pageGuids:Array.from(e),dispatch:t,source:k.E.FJ_PAGE_MENU})}]:[]})(n)]}({pageIds:n,pagesList:R,dispatch:A,isFileReadOnly:D,isK12OrgStudent:L});return(0,r.useEffect)(()=>(l.zl.set(j,!0),()=>{l.zl.set(j,!1)}),[]),(0,i.jsx)("div",{className:`${u.Dm}`,children:(0,i.jsx)(v.Q,{appModel:N,menuItems:(0,s.WI)(F),dispatch:A,selectedView:S,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"})})}},107434:(e,t,n)=>{n.d(t,{Dt:()=>h,bV:()=>g,sf:()=>x,td:()=>f});var i=n(105652),r=n(466082),a=n(445019),s=n(74372),o=n(133963),l=n.n(o),d=n(125802),c=n(99488),u=n(715588),m=n(903312);function p(e,t){let n=new Map,i=null,r=null;for(let a of e)"LIST_SECTION_HEADER"===a.type?(i=a,r=null):"LIST_HIERARCHY_PATH"===a.type?r=a:"variable"===t&&"LIST"===a.type&&a.variable?n.set(a.variable.node_id,{sectionHeader:i,hierarchyPath:r}):"style"===t&&"TEXT_STYLE_LIST"===a.type&&a.style&&n.set(a.style.key.toString(),{sectionHeader:i,hierarchyPath:r});return n}function h({selectedFixes:e,cachedFixes:t,violatingDevId:n,type:o,scopes:l}){let m;let{localVariableSets:h,libraryVariableSets:f}=(0,a.md)(d.mn),{allVariableListItems:g,variableMap:x,localVariables:_,libraryVariables:y}=(0,a.md)((0,u.rb)({type:o,scopes:l})),b=(0,i.useMemo)(()=>n?(0,r.UN)().getFromDeveloperFriendlyId(n):null,[n]);if(b)try{m=(0,c.TW)({node:b,resolvedType:o,localVariables:_,libraryVariableSetIdToSet:f,libraryVariables:y})}catch(e){console.error("Failed to get resolved variables for node:",e),m={localVariables:{},libraryVariables:{}}}else m={localVariables:{},libraryVariables:{}};let v=(0,i.useMemo)(()=>(function({cachedFixes:e,variableMap:t,localVariableSetIdToSet:n,libraryVariableSetIdToSet:i,allVariableListItems:r,allResolvedVariables:a}){if(0===e.length)return[];let o=p(r,"variable"),l=null,d=null,c=[];for(let{variableId:r,resolvedValue:s}of e){let e=t[r];if(!e)continue;let u=e.variableSetId&&(n[e.variableSetId]??i[e.variableSetId]);if(!u)continue;let{hierarchyPath:m,sectionHeader:p}=o.get(r)??{};p&&l!==p&&(c.push(p),l=p),m&&d!==m&&(c.push(m),d=m);let h=s??a.libraryVariables[r]?.resolvedValue??a.localVariables[r]?.resolvedValue;c.push({id:r,variable:e,type:"LIST",variableSet:u,isSuggestion:!0,resolvedValue:h})}return c.length>0?[{id:(0,s.g)(),type:"SUGGESTED_HEADER"},...c,{id:(0,s.g)(),type:"LIST_SEPARATOR"}]:c})({cachedFixes:t,variableMap:x,localVariableSetIdToSet:h,libraryVariableSetIdToSet:f,allVariableListItems:g,allResolvedVariables:m}),[g,t,x,h,f,m]);return(0,i.useMemo)(()=>{if(!b)return{fixes:e,listItems:v,allResolvedVariables:m,variableMap:x};let{fixes:t,listItemsWithResolvedValues:n}=function({allVariableListItems:e,allResolvedVariables:t}){let n=[],i=[];for(let r of e){if("LIST"!==r.type){i.push(r);continue}let{node_id:e}=r.variable,a=t.libraryVariables[e]?.resolvedValue??t.localVariables[e]?.resolvedValue;a&&(i.push({...r,resolvedValue:a}),n.push({variableId:e,resolvedValue:a}))}return{fixes:n,listItemsWithResolvedValues:i}}({allVariableListItems:g,allResolvedVariables:m});return{fixes:0===e.length?t:[...e,...t],listItems:0===v.length?n:[...v,...n],allResolvedVariables:m,variableMap:x}},[e,v,m,x,b,g])}function f({selectedStyles:e,cachedStyles:t}){let{listItems:n,allStyles:r}=(0,a.md)(u.Ov),o=(0,i.useMemo)(()=>{let e={};for(let t of r)e[t.key.toString()]=t;return{styleKeyToStyle:e}},[r]);return(0,i.useMemo)(()=>{let{styleKeyToStyle:i}=o;if(0===t.length)return{listItems:n,allStyles:[...e,...r],styleKeyToStyle:i};let a=[],l=p(n,"style"),d=null,c=null;for(let e of t){let{hierarchyPath:t,sectionHeader:n}=l.get(e.key.toString())??{};n&&d!==n&&(a.push(n),d=n),t&&c!==t&&(a.push(t),c=t),a.push({id:e.key.toString(),type:"TEXT_STYLE_LIST",style:e,isSuggestion:!0}),i[e.key.toString()]=e}return{listItems:[{id:(0,s.g)(),type:"SUGGESTED_HEADER"},...a,{id:(0,s.g)(),type:"LIST_SEPARATOR"},...n],allStyles:0===e.length?r:[...e,...r],styleKeyToStyle:i}},[e,t,n,r,o])}function g(e,t){return(0,i.useMemo)(()=>{if(""===t)return e;let n=t.toLowerCase(),i=[],r=null,a=null;return e.forEach(e=>{"LIST_SECTION_HEADER"===e.type?(r=e,a=null):"LIST_HIERARCHY_PATH"===e.type?a=e:("LIST"===e.type||"TEXT_STYLE_LIST"===e.type)&&("LIST"===e.type&&!e.isSuggestion&&e.variable.name.toLowerCase().includes(n)||"TEXT_STYLE_LIST"===e.type&&!e.isSuggestion&&(e.style.name.toLowerCase().includes(n)||e.style.description?.toLowerCase().includes(n)))&&(r&&(i.push(r),r=null),a&&(i.push(a),a=null),i.push(e))}),i},[e,t])}function x(){let e=(0,a.Xr)(u.uw),t=(0,a.Xr)(u.aW),n=(0,a.Xr)(u.iO),r=(0,a.Xr)(u.rg),s=(0,a.Xr)(u.jV),o=(0,a.Xr)(u.Ue);return(0,i.useMemo)(()=>l()(()=>{(0,m.jD)(),e(null),t(!1),n(null),r(null),s(null),o(null)},100),[e,t,n,r,s,o])}},88634:(e,t,n)=>{n.d(t,{Ci:()=>B,Hl:()=>A,OI:()=>D,PM:()=>T,RD:()=>F,SN:()=>M,Vz:()=>L,Wo:()=>O,Y0:()=>I,_i:()=>S,bk:()=>R,l2:()=>N,mr:()=>E,rL:()=>P,sH:()=>j,vP:()=>k,xg:()=>w});var i=n(105652),r=n(805242),a=n(270450),s=n(445019),o=n(575015),l=n(982059),d=n(851393),c=n(351341),u=n(125802),m=n(172461),p=n(556875),h=n(348149),f=n(730903),g=n(192704),x=n(434183),_=n(5618),y=n(107434),b=n(903312),v=n(622059),C=n(697421);function E(){let e=(0,s.Xr)(u.v4),t=(0,x.pN)(),n=t.data?.libraryVariables,r=t.data?.libraryVariableSets,a=(0,s.md)(u.Ut),l=(0,s.md)(u.ri);(0,i.useEffect)(()=>{if(!a){(0,o.PN)()&&e(e=>({...e,status:"loaded"}));return}if("errors"===t.status){e(e=>({...e,status:"error"}));return}if("loaded"!==t.status)return;let i=new AbortController,s=i.signal;return async function(){if(!r||!n)return;e(e=>({...e,status:"loading"}));let t=new Set,i=[];r.forEach(e=>{a?.has(e.library_key)&&(i.push(e),t.add(e.library_key))});for(let e=0;e<i.length;e+=2){if(s.aborted)return;let t=i.slice(e,e+2).map(e=>(0,f.RI)(e));await Promise.allSettled(t)}let o=i.reduce((e,t)=>(t.node_id&&(e[t.node_id]=t),e),{});Array.from(a??[]).filter(e=>{let t=l.keyToPublishedLibraryMap?.get?.(e);return t?.num_variables&&t.num_variables>0}).every(e=>t.has(e))&&e({libraryVariables:n,libraryVariableSetIdToSet:o,status:"loaded",libraryKeys:t})}(),()=>{i.abort()}},[t.status,r,n,l.keyToPublishedLibraryMap,a,e])}function w(){let e=(0,g.$1)(),t=(0,g.j8)(),n=(0,s.Xr)(u.Z4),r=(0,s.Xr)(u.d$),o=(0,i.useMemo)(()=>{if(!(0,a.kc)().aip_flower_garden_ext_rule)return new Map;let n=new Map;return Object.values(e).forEach(e=>{if(!e.manifest.lintRules?.length)return;let t=new Set;e.manifest.lintRules.forEach(e=>{t.add(e.key)});let i=e.localFileId?.toString()??e.plugin_id;n.set(i,t)}),Object.values(t).forEach(e=>{if(!e.manifest.lintRules?.length)return;let t=new Set;e.manifest.lintRules.forEach(e=>{t.add(e.key)}),n.set(e.plugin_id,t)}),n},[e,t]),l=(0,i.useMemo)(()=>{if(!(0,a.kc)().aip_flower_garden_ext_rule)return new Map;let n=new Map;return Object.entries(e).filter(([e,t])=>(t.manifest.lintRules?.length??0)>0).forEach(([e,t])=>{n.set(e,t)}),Object.entries(t).filter(([e,t])=>(t.manifest.lintRules?.length??0)>0).forEach(([e,t])=>{n.set(t.plugin_id,t)}),n},[e,t]);(0,i.useEffect)(()=>{r(l),n(o)},[o,n,r,l])}function k(){let e=(0,s.md)(u.Ut);(0,i.useEffect)(()=>{let t=[...e??new Set].map(e=>e.toString()),n={library_keys:t,entity_type:"STYLE",entity_value_type:"TEXT",max_results_per_library:d.w$},i={library_keys:t,entity_type:"VARIABLE",entity_value_type:"FLOAT",max_results_per_library:d.P2};(0,_.kA)(n),(0,_.kA)(i),(0,h.w0)(m.yA).then(e=>{let n=e.get(m.tS,m.Iv);(0,_.kA)({library_keys:t,entity_type:"VARIABLE",entity_value_type:"COLOR",max_results_per_library:n})})},[e])}function T(){return(0,s.md)(v._M)!==p.FR.SELECTED_VISUAL_GROUP_VIEW}function j(){let e=(0,s.md)(u.u2);return e===p.td.GROUPING_COMPLETE||e===p.td.RESPONDING_TO_CANVAS_CHANGE}function S(){return!j()}function I(){let e=(0,s.md)(u.u2),t=(0,s.md)(v.NM),n=(0,s.md)(v.Bd),r=O(),a=L(),o=(0,s.Xr)(v.nr);(0,i.useEffect)(()=>{if(e===p.td.GROUPING_COMPLETE&&!t&&n&&n.length>0){let e=n[0];e&&((0,b.JT)(e,"AUTO"),r(e.id),a(),o(e.id))}},[e,t,n,r,a,o])}function A(){let e=(0,y.sf)(),t=function(){let e=(0,s.Xr)(v.NM),t=(0,s.Xr)(v.JQ),n=L(),r=(0,s.Xr)(C.q6),a=(0,s.Xr)(v.xi),o=(0,s.Xr)(v.ik);return(0,i.useCallback)(()=>{o(),e(null),t(new Set),n(),r((0,C.J)()),a(null)},[o,n,r,a,e,t])}(),n=(0,l.am)();return(0,i.useCallback)(()=>{e(),n?.teardownLinter(),t()},[e,n,t])}function N(){return 0===(0,s.md)(u.Kk)}function M(){return(0,s.md)(u.ju).size}function R(){let e=(0,l.am)();return(0,i.useCallback)(async()=>{if(!e)throw Error("Linter is not initialized");try{await e.requestDetection()}catch(e){if(e instanceof c.yU){s.zl.set(v.LB,p.FR.LANDING_PAGE_LIMIT_EXCEEDED);return}if(e instanceof c.F7){s.zl.set(v.LB,p.FR.LANDING_PAGE_NO_SELECTION);return}if(e instanceof c.It){s.zl.set(v.LB,p.FR.LOADING_ERROR_VIEW);return}console.error("Unexpected error when running linter detection:",e)}},[e])}function P(e){let t=(0,y.sf)(),n=(0,l.am)();return(0,i.useCallback)(()=>{t();let i=s.zl.get(v.IZ).map(e=>e.violationId);n?.ignoreAllViolationIds(i),e?.(!0),(0,b.eT)()},[t,e,n])}function O(){let e=(0,s.Xr)(v.NM),t=(0,s.Xr)(v.JQ);return(0,i.useCallback)(n=>{e(n),t(e=>new Set(e).add(n))},[e,t])}function D(){let e=(0,s.Xr)(v.xo);return(0,i.useCallback)(t=>{e(t)},[e])}function L(){let e=(0,s.Xr)(v.xo);return(0,i.useCallback)(()=>{e(null)},[e])}function F(){let e=(0,s.Xr)(v.nr);return(0,i.useCallback)(t=>{s.zl.get(v.nr)!==t&&((0,r.flushSync)(()=>{e(null)}),e(t))},[e])}function B(){let e=(0,s.Xr)(v.nr);return(0,i.useCallback)(t=>{e(e=>e===t?null:t)},[e])}},317496:(e,t,n)=>{n.d(t,{Dm:()=>h,KV:()=>p,_9:()=>m,fR:()=>c,p6:()=>u});var i=n(105652),r=n(445019),a=n(74372),s=n(88634),o=n(903312),l=n(655112),d=n(622059);function c(){let e=(0,r.md)(d.NM),t=(0,r.md)(d.xo),n=(0,r.md)(d.$C),{isReady:a,numSuccessfulFixes:s}=(0,i.useMemo)(()=>{let e=Array.from(n.values()),t=e.every(e=>e?.status!=="loading"),i=e.filter(e=>e?.status==="loaded").length;return{selectedFixes:e,isReady:t,numSuccessfulFixes:i}},[n]),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{e&&(l.current=performance.now())},[e,t]),(0,i.useEffect)(()=>{if(a&&e&&l.current){let n=performance.now()-l.current;(0,o.OW)(e,t,s,n),l.current=null}},[e,t,a,s])}function u(){let e=(0,l.F)(),t=(0,r.md)(d.NM),n=(0,r.md)(d.xo),a=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!e&&t){a.current=performance.now();return}if(t&&a.current){let e=performance.now()-a.current;(0,o.sc)(t,n,e),a.current=null}},[e,t,n,a])}function m(){let e=(0,s._i)(),t=(0,s.l2)()&&!e,n=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e||null!==n.current||(n.current=performance.now()),t&&null!==n.current){let e=performance.now()-n.current;(0,o.A9)(e),n.current=null}},[e,t])}function p(e,t){(0,i.useEffect)(()=>{if(t){let t=(0,a.g)();(0,o.OX)({impressionId:t,source:e})}},[t,e])}function h({blockId:e,suggestionId:t,checkIsSelected:n,filteredItems:r,searchQuery:a}){let s=(0,i.useMemo)(()=>({selectedNodeIndex:n?r.findIndex(e=>n(e))??-1:-1,numberOfItems:r.filter(e=>"LIST"===e.type||"TEXT_STYLE_LIST"===e.type).length}),[n,r]);(0,i.useEffect)(()=>{e&&(0,o.A5)({blockId:e,suggestionId:t,searchQuery:a,hasOptionSelected:s.selectedNodeIndex>-1,numSuggestionsShown:s.numberOfItems})},[a,e,s,t])}},655112:(e,t,n)=>{n.d(t,{F:()=>h,K:()=>p});var i=n(105652),r=n(295870),a=n(445019),s=n(982059),o=n(351341),l=n(556875),d=n(129416),c=n(903312),u=n(622059),m=n(80169);function p(){let e=(0,a.Xr)(u.LB),t=(0,s.am)();return(0,i.useCallback)(async()=>{try{(0,c.il)(),e(l.FR.SELECTED_VISUAL_GROUP_VIEW),await t?.refreshDetection()}catch(t){(0,d.$D)(r.e.DS_ENABLEMENT,t),t instanceof o.yU?e(l.FR.LANDING_PAGE_LIMIT_EXCEEDED):t instanceof o.F7?e(l.FR.LANDING_PAGE_NO_SELECTION):t instanceof o.It&&e(l.FR.LOADING_ERROR_VIEW)}},[e,t])}function h(){return 0===(0,a.md)(m.QU).violationCount}},697421:(e,t,n)=>{n.d(t,{J:()=>b,Mr:()=>C,Uq:()=>_,Vr:()=>y,q6:()=>v});var i=n(105652),r=n(295870),a=n(692376),s=n(854225),o=n(466082),l=n(445019),d=n(158053),c=n(125802),u=n(172461),m=n(129416),p=n(875253),h=n(314265),f=n(457479),g=n(651517),x=n(273811),_=(e=>(e.SIDEBAR="sidebar",e.PREVIEW="preview",e))(_||{}),y=(e=>(e.COLOR="color",e.IMAGE="image",e))(y||{});function b(){return{bg:"var(--color-loadingsecondary)",type:"color"}}let v=(0,l.eU)(b());function C(e,t){let n=(0,d.ei)(e),r=(0,x.wg)(n),[s,c]=(0,i.useState)(l.zl.get(v));return(0,i.useEffect)(()=>{let n=(0,o.UN)().get(e);if(!n)return;let i=n.parentNode;for(;i;){let e=i.guid,n=(0,u.kl)(i.fills).paint;if(n){let i=n.type;if("SOLID"===i){c(function(e){let t=e.color;if(!t)return b();let n=e.opacity??1,{hex:i}=(0,h.XF)(t),r=Math.floor(255*n).toString(16);return{bg:`#${i}${r}`,type:"color"}}(n));return}if("IMAGE"===i){c(E(e,"preview"===t?8:2,r));return}if("VIDEO"!==i&&"EMOJI"!==i){c(E(e,2,r));return}c(b());return}i=i.parentNode}let s=a.Egt?.getNodePageBackgroundColor(e);c(s?{bg:s,type:"color"}:b())},[r,e,t]),s}function E(e,t,n){let i=`${e}-${t}`,d=l.zl.get(c.g7),u=d.get(i),h=u?.lastEditedAtTime!==n;if(u&&!h)return{bg:u.src,type:"image"};let x=null;try{x=function(e,t){let n=a.mHF?.copyNodeToLinterScene(e);if(!n)return null;let i=new o.qo(s.juq.LINTER).get(n);if(!i)return null;for(let e of i.childrenNodes)e.visible=!1;i.cornerRadius=0,i.effects=[];let r=(0,g.L6)(n,t,!1,!0);return r?(0,f.Pv)(r.image,new p.Mi(r.width,r.height)):null}(e,t)}catch(e){(0,m.$D)(r.e.DS_ENABLEMENT,e)}if(!x)return b();if(n>0){let e={src:x,lastEditedAtTime:n},t=new Map(d);t.set(i,e),l.zl.set(c.g7,t)}return{bg:x,type:"image"}}},731374:(e,t,n)=>{n.d(t,{G:()=>iX});var i=n(239976),r=n(105652),a=n(20002),s=n(270307),o=n(295870),l=n(692376),d=n(379141),c=n(270450),u=n(732838),m=n(943866),p=n(806130),h=n(415541),f=n(371591),g=n(779267),x=n(892925),_=n(450207),y=n(338630),b=n(223487),v=n(276571),C=n(985791),E=n(319349),w=n(515217),k=n(888903),T=n(517478),j=n(931547),S=n(585066),I=n(384203),A=n(397048);let N=(0,r.lazy)(()=>Promise.all([n.e(8e3),n.e(1864),n.e(4391),n.e(7019)]).then(n.bind(n,781691)));function M(){return(0,i.jsx)(T.vo,{children:(0,i.jsx)(T.nB,{padding:0,className:A.g4,children:(0,i.jsx)(S.k,{})})})}function R({onClose:e,defaultPosition:t,windowDefaultWidth:n,windowDefaultHeight:a,manager:s,entrypoint:o,children:l,scope:d}){return(0,I.aV)()?null:(0,i.jsx)(j._L,{constraints:{minWidth:n,minHeight:a},manager:s,defaultWidth:n,defaultHeight:a,onClose:({source:t})=>{"outside"!==t&&e()},defaultPosition:t,draggable:"header",children:(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(M,{}),children:l||(0,i.jsx)(N,{scope:d,entrypoint:o})})})}function P(){let e=h.ox(),t=(0,v._6)(),{windowInnerWidth:n,windowInnerHeight:s}=(0,f.l)(),o=r.useMemo(()=>({x:Math.max(0,(n-896)/2),y:Math.max(0,(s-600)/2)}),[n,s]),l=(0,b.q5)(),c=(0,x.IQ)(),u=(0,x.hm)(l)&&!c,m=(0,b._G)(),p="fullscreen"===t.view&&t.githubSettingsLibraryKey?t.githubSettingsLibraryKey:m,T=(0,g.RT)(),j=(0,a.wA)(),S=(0,C.B)(p??"",{enabled:!!p}).unwrapOr(null),I="fullscreen"===t.view&&t.githubRepositorySelectorMode===E.e6.INITIAL_SETUP,A="fullscreen"===t.view&&t.githubRepositorySelectorMode===E.e6.DIRECTORY_SELECTOR,N=()=>{"fullscreen"===t.view&&j((0,_.sf)({...t,showDevModeComponentBrowser:!0,showComponentBrowserGitHubSettings:!1,githubSettingsLibraryKey:void 0}))},M=function(e,t){let n=(0,a.wA)();return()=>{t(),setTimeout(()=>{let t=e?(0,d.t)("dev_handoff.component_browser_onboarding.github_connection_success_toast",{library_name:e}):(0,d.t)("dev_handoff.component_browser_onboarding.github_connection_success_toast_no_library_name");n(k.F.enqueue({message:t,type:"GitHub connected"}))},300)}}(S,N),P=(0,g.yq)(),O=(0,g.bh)();return u?(0,i.jsxs)(i.Fragment,{children:[P&&(0,i.jsx)(y.fu,{name:"Component Browser",children:(0,i.jsx)(R,{onClose:O,defaultPosition:o,windowDefaultWidth:896,windowDefaultHeight:600,manager:e,entrypoint:t.componentBrowserEntrypoint||"filename_menu",scope:t.componentBrowserScope||"file"})}),T&&p&&(0,i.jsx)(y.fu,{name:"Component Browser GitHub Settings",children:(0,i.jsx)(w.A,{libraryKey:p,onClose:N,onBack:N,onSuccess:M,isInitialSetup:I,isDirectorySelection:A})})]}):null}var O=n(960210),D=n(628051),L=n(948629),F=n(937182),B=n(598066),U=n(888830),V=n(245814),H=n(254056),z=n(943360),G=n(378721),K=n(735786),W=n(225145),q=n(177102),X=n(288350),Y=n(64939),J=n(163608),Z=n(424868),Q=n(321204),$=n(270166),ee=n(5240),et=n(427250),en=n(4245),ei=n(382708),er=n(454705),ea=n(854225),es=n(445019),eo=n(405228),el=n(224542),ed=n.n(el),ec=n(158053),eu=n(522568),em=n(40297),ep=n(723850),eh=n(309742),ef=n(865702),eg=n(7857),ex=n(499735),e_=n(86742),ey=n(577225),eb=n(297094),ev=n(565699),eC=n(784395),eE=n(933870),ew=n(259714),ek=n(154963),eT=n(384760),ej=n(877472),eS=n(359187),eI=n(785055),eA=n(212198),eN=n(927450),eM=n(862390),eR=n(597298),eP=n(605985),eO=n(653656),eD=n(640753),eL=n(157750),eF=n(456556),eB=n(854122),eU=n(236410),eV=n(819215),eH=n(579263),ez=n(665933),eG=n(245834),eK=n(279758),eW=n(84454),eq=n(40705),eX=n(536493),eY=n(249563),eJ=n(44618),eZ=n(136393),eQ=n(748181),e$=n(416489);function e0(){let e=(0,a.wA)();return(0,eQ.f)("dismissed_dev_mode_overview_banner")||(0,L.T)()?null:(0,i.jsx)(y.fu,{name:"Dev Mode Overview Banner",properties:{severity:e$.c.EVENT},children:(0,i.jsxs)(eX.Yy,{variant:"brand",onDismiss:()=>{e(eZ.b({dismissed_dev_mode_overview_banner:!0}))},children:[(0,i.jsx)(eY.Q,{title:(0,d.t)("dev_handoff.workflows.overview.banner.title"),children:(0,d.tx)("dev_handoff.workflows.overview.banner.subtitle")}),(0,i.jsx)(eJ.N,{href:"https://help.figma.com/hc/articles/23918228264855",newTab:!0,children:(0,d.tx)("dev_handoff.workflows.overview.banner.learn_more")})]})})}var e1=n(942356),e2=n(245312),e5=n(833915),e4=n(947856),e3=n(129416),e6=n(985836),e7=n(363337),e9=n(920675),e8=n(610604),te=n(940106),tt=n(457441),tn=n(288413);let ti="overview--background--wlSAS",tr="overview--overviewBase--hmfIX",ta="overview--withInsetEditorEnabled--twl5t",ts="overview--focusViewLink--MSFRZ",to="overview--overviewRecentActivityRow--bNJR6",tl="overview--overviewRecentActivity--vSxt-",td="overview--editInfo--zuEXA",tc="overview--timestamp--m1jCf",tu="overview--avatarIcon--eMsa0",tm="overview--editedIcon---Ib-q";function tp({showDescription:e,previewUrl:t,onClick:n}){return(0,i.jsxs)(W._,{className:ed()(tl,ts),href:t,onClick:n,children:[(0,i.jsxs)("div",{className:td,children:[(0,i.jsx)(e6.Qp,{className:"overview--avatarLoading--2xqpW",animationType:e6.JR.NO_SHIMMER}),(0,i.jsx)(e6.Qp,{className:"overview--editInfoRecentActivityLoading--bI1g7 overview--editInfoRecentActivity--EzNT5",animationType:e6.JR.NO_SHIMMER})]}),e&&(0,i.jsx)(e6.Qp,{className:"overview--editDescriptionLoading--R4Xel",animationType:e6.JR.NO_SHIMMER})]})}function th({user:e,icon:t,editedString:n}){return(0,i.jsxs)("div",{className:td,children:[(0,i.jsxs)("div",{className:"overview--avatarContainer--R-1GU",children:[(0,i.jsx)(e7.H8,{user:e,size:24}),t]}),(0,i.jsx)("div",{className:"overview--editInfoRecentActivity--EzNT5",children:(0,i.jsx)("span",{className:"overview--editInfoUser--me77e",children:n})})]})}function tf(e,t,n){if(!e||n)return null;switch(e.status){case ea.zIx.BUILD:return(0,i.jsx)(e2.k,{className:ed()(t?tm:"overview--readyIcon--jZsJl",tu)});case ea.zIx.COMPLETED:return(0,i.jsx)(e5.l,{className:ed()(t?tm:"overview--completedIcon--ELzWN",tu)})}return null}function tg({nodeId:e,user:t,previewUrl:n,isFallbackForLegacyStatus:r,onClick:a}){let s=(0,eF.Fk)(t=>t.get(e)?.getStatusInfo(),e),o=(0,ec.ei)(e),l=(0,eb.Ak)(o?.lastEditedAt),c=(0,b.q5)(),u=(0,O._I)();if(!t)return(0,i.jsx)(tp,{previewUrl:n,onClick:a});let m=s&&c&&(0,tn.y)(s,c);return(0,i.jsxs)("div",{className:to,children:[(0,i.jsx)(W._,{className:ed()(tl,ts),href:n,onClick:a,children:(0,i.jsx)(th,{user:t,icon:tf(s,!0,r),editedString:(0,d.tx)("dev_handoff.workflows.edit_info.edited",{user:t.handle,dateFromNow:(0,i.jsx)("span",{className:tc,children:l})})})}),m&&u&&(0,i.jsx)(t_,{nodeId:e,isEdited:!0})]})}function tx({nodeId:e,user:t,description:n,previewUrl:r,isFallbackForLegacyStatus:a,onClick:s}){let o=(0,eF.Fk)(t=>t.get(e)?.getStatusInfo(),e),l=o?.lastUpdateUnixTimestamp?1e3*o.lastUpdateUnixTimestamp:null,c=(0,eb.Ak)(l),u=(0,b.q5)();if(!l)return(0,i.jsx)(tg,{nodeId:e,user:t,previewUrl:r,isFallbackForLegacyStatus:a,onClick:s});if(!o||!t)return(0,i.jsx)(tp,{showDescription:!!n,previewUrl:r,onClick:s});let m=tt.TR(o.status,o.prevStatus)?.toLowerCase();if(!m)return(0,i.jsx)(tg,{nodeId:e,user:t,previewUrl:r,isFallbackForLegacyStatus:a,onClick:s});let p=o.status===ea.zIx.BUILD&&(o.status===o.prevStatus||!!o.description),h=u&&(0,tn.y)(o,u),f=p?(0,d.tx)("dev_handoff.workflows.edit_info.updated_design",{user:t.handle,dateFromNow:(0,i.jsx)("span",{className:tc,children:c})}):(0,d.tx)("dev_handoff.workflows.edit_info.marked",{user:t.handle,status:m,dateFromNow:(0,i.jsx)("span",{className:tc,children:c})});return(0,i.jsxs)("div",{className:to,children:[(0,i.jsxs)(W._,{className:ed()(tl,ts),href:r,onClick:s,children:[(0,i.jsx)(th,{user:t,icon:tf(o,!1,a),editedString:f}),!!n&&(0,i.jsx)("div",{className:"overview--editDescription--6vMMy",children:n})]}),p&&h&&(0,i.jsx)(t_,{nodeId:e,isEdited:!1})]})}function t_({nodeId:e,isEdited:t}){let n=(0,a.wA)(),r=b.q5()?.key,s=(0,ep.U)(),l=async()=>{let i,a=null;if(r&&(s("Dev Mode Activity Compare Changes",{source:"compare_previous_overview"}),"loaded"===(a=await (0,e4.Ek)(e8.WND,{fileKey:r,nodeId:e})).file.status&&a.file.data)){let r=a.file.data.devModeActivity.filter(e=>e.activityType===e9.o6.STATUS_CHANGE).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime());if(i=t||1===r.length?r[0]:r[1],i?.version?.id){(0,te.L$)(i.version?.id,n,!0,e);return}}n(k.F.enqueue({message:(0,d.t)("dev_handoff.compare_changes.button.failed"),error:!0})),(0,e3.$D)(o.e.DEV_MODE,Error("Open compare changes button failed"),{extra:{fileKey:r,activityInfoStatus:a?.file.status,activityInfoStatusError:a?.file.status==="error"?a?.file.error:void 0,activitiesLength:a?.file.status==="loaded"&&a.file.data?.devModeActivity.length,prevActivityId:i?.id,prevActivityVersionId:i?.version?.id}})};return(0,i.jsx)(e1.$n,{variant:"secondary",onClick:l,children:(0,d.tx)("inspect_panel.history.compare_changes")})}var ty=n(285972),tb=n(270351),tv=n(644912);let tC=(0,eD.Wh)(()=>(0,es.eU)(""),{preserveValue:!1});var tE=n(3219);let tw="performance.dev_mode.workflows.overview.time_to_first_thumbnail",tk=new tE.jk(tw,{}),tT=(0,eD.rt)(void 0),tj=(0,eD.rt)(!1);var tS=n(998146),tI=n(526865),tA=n(311257),tN=n(448633);let tM=2*(0,em.jz)(tI.Evg),tR=tM/tI.RtY,tP=tM/8,tO=tR/8;function tD(e){let t=r.useMemo(()=>e.tabs.reduce((e,t)=>(e[t.key]=!0,e),{[tS.oz.ALL]:!1,[tS.oz.BUILD]:!1,[tS.oz.COMPLETED]:!1}),[e.tabs]),[n,a,s]=U.t.useManagedTabs(t,e.selected,e.onTabSelected);return(0,i.jsx)(U.t.TabStrip,{manager:s,children:e.tabs.map(t=>{let r=t.key===e.selected;return(0,i.jsxs)(U.t.Tab,{...n[t.key],children:[t.label,void 0!==t.count&&(0,i.jsx)(ty.s,{count:t.count,isInTab:!0,isActive:r})]},t.key)})})}let tL=(0,eD.Wh)(()=>(0,es.eU)(!1),{preserveValue:!1});function tF(){let e=(0,b.q5)(),t=(0,eP.iZ)();return(0,i.jsx)("div",{className:"overview--toolbarRightItems--jFnDJ",children:e&&(0,i.jsx)(eW.ShareButton,{user:t,editingFile:e,isFileInWorkshop:!1,appendedClassname:"overview--shareButton---JqS4"})})}let tB=(0,es.E2)("workflows_summary_tab",tS.oz.ALL,eo.z.nativeEnum(tS.oz)),tU=(0,eD.Wh)(()=>(0,es.eU)({}),{preserveValue:!0}),tV=(0,es.E2)("workflows_overview_sorted_by",tS._6.RECENT,eo.z.nativeEnum(tS._6));function tH(){let e=(0,a.d4)(e=>e.selectedView.overviewBackButtonTargetNodeId),t=(0,a.d4)(e=>e.mirror.appModel.pagesList[0]),n=function(){let e=(0,a.d4)(e=>e.mirror.appModel.pagesList),t=(0,eL.J2)(l.Ez5.currentSceneState().numReadyNodesByPage),n=(0,eL.J2)(l.Ez5.currentSceneState().numCompletedNodesByPage);return r.useMemo(()=>e.filter(e=>{let i=e.nodeId,r=t.has(i)?t.get(i)>0:l.glU.nodeStatusesOnPage(i).includes(ea.zIx.BUILD),a=n.has(i)?n.get(i)>0:l.glU.nodeStatusesOnPage(i).includes(ea.zIx.COMPLETED);return r||a}),[e,t,n])}()[0],s=e||n?.nodeId||t?.nodeId,o=(0,eq.ZJ)(),c=(0,eq.TP)(void 0,s),u=(0,a.d4)(e=>(0,eB.Np)(e,c)),m=(0,ez.n0)(),p=(0,eG.VS)({pagesList:m,isComparingChanges:!1});return s?(0,i.jsx)(e_.lt,{className:"overview--backLink--ggLvE",onClick:function(e){e.preventDefault(),s?p(s).then(()=>{o("overview_back_clicked")}):o("overview_back_clicked")},href:u,"data-testid":"dev_handoff.workflows.overview.back_button",recordingKey:"dev_handoff.workflows.overview.back_button","aria-label":(0,d.t)("dev_handoff.workflows.overview.back_to_page_tooltip"),"data-tooltip":(0,d.t)("dev_handoff.workflows.overview.back_to_page_tooltip"),"data-tooltip-type":eU.Ib.TEXT,children:(0,i.jsx)(Y.C,{})}):null}function tz(){return(0,i.jsx)(eg.u9,{label:"DevModeOverview",children:(0,i.jsx)(tG,{})})}function tG(){let{Sprig:e}=(0,ey.A)(),t=(0,O._I)(),n=(0,eA.dP)(),s=(0,eH.HY)(),o=(0,eC.B)();(0,L.T)()&&(0,c.kc)().dt_vscode_ready_for_dev?n=0:s&&(n+=o);let u=(0,ep.U)(),m=function(){let[e,t]=(0,es.fp)(tT);return r.useCallback(n=>{e||(t({source:n}),tk.start())},[e,t])}(),p=(0,v._6)(),h=(0,a.wA)();(0,eV.O)();let f=(0,eL.J2)(l.Ez5.currentSceneState().nodesWithStatusForFile),g=(0,r.useRef)(null),[x,_]=(0,es.fp)(eT.gk),[y,b]=(0,es.fp)(tV),C=r.useCallback(e=>{u("Dev Mode Overview Sort Changed",{sort:e}),b(e)},[b,u]),E=t?y:tS._6.PAGE,[w,k]=(0,es.fp)(tB),{setSearchString:j,searchString:A,searchFilter:N,searchActive:M}=function(){let[e,t]=(0,es.fp)(tC),n=(0,ep.U)(),i=(0,r.useMemo)(()=>(function(e){let t=e?new tv.Ax(e.toLowerCase()):null;return{filter:e=>{let n=t?t.matchAgainst(e):null;return!n||!!n.find(e=>e.score>0)}}})(e),[e]),a=(0,r.useCallback)(e=>i.filter([e.nodeName,e.pageName,e.description]),[i]),s=(0,tb.A)(()=>{n("Dev Mode Overview Search",{})},1e3);return{setSearchString:(0,r.useCallback)(e=>{t(e),s()},[t,s]),searchString:e,searchFilter:a,searchActive:e.length>0}}(),R=r.useMemo(()=>f.filter(e=>e.status===ea.zIx.BUILD&&N(e)),[f,N]),P=r.useMemo(()=>f.filter(e=>e.status===ea.zIx.COMPLETED&&N(e)),[f,N]),D=r.useMemo(()=>{switch(w){case tS.oz.ALL:return f.filter(N);case tS.oz.BUILD:return R;case tS.oz.COMPLETED:return P}},[f,w,N,R,P]),F=r.useMemo(()=>[{key:tS.oz.ALL,label:(0,d.t)("dev_handoff.workflows.overview.tab_all")},{key:tS.oz.BUILD,count:R.length,label:(0,d.t)("dev_handoff.workflows.overview.tab_ready")},{key:tS.oz.COMPLETED,count:P.length,label:(0,d.t)("dev_handoff.workflows.overview.tab_completed")}],[R.length,P.length]),U=r.useMemo(()=>{if(0===D.length)return[];switch(E){case tS._6.PAGE:let e={};return D.slice().sort((e,t)=>e.visualOrder-t.visualOrder).forEach(t=>{e[t.pageId]||(e[t.pageId]={key:t.pageId,pageId:t.pageId,pageName:t.pageName,sortedNodesWithStatusForFile:[]}),e[t.pageId].sortedNodesWithStatusForFile.push(t)}),Object.values(e);case tS._6.RECENT:return[{key:"recent",sortedNodesWithStatusForFile:D.slice().sort((e,t)=>t.updatedAt-e.updatedAt)}];case tS._6.ALPHABETICAL:return[{key:"alphabetical",sortedNodesWithStatusForFile:D.slice().sort((e,t)=>e.nodeName.localeCompare(t.nodeName))}]}},[D,E]),[z,G]=(0,es.fp)(tU);r.useEffect(()=>{G(e=>{let t={...e};return U.forEach(({pageId:e})=>{e&&void 0===t[e]&&(t[e]=!0)}),t})},[G,U]);let K=r.useCallback(e=>{G(t=>{let n={...t};return n[e]=!n[e],n})},[G]),{numSections:W,numFrames:q,numPages:X}=r.useMemo(()=>({numSections:f.filter(e=>e.isSection).length,numFrames:f.filter(e=>!e.isSection).length,numPages:new Set(f.map(e=>e.pageId)).size}),[f]),Y=(0,B.US)();!function({nodesWithStatusForFile:e,enabled:t}){let[n,i]=(0,es.fp)(tL),a=r.useRef(void 0),s=(0,I.eY)();r.useEffect(()=>{if(!t)return;let r=0,o=0,l=performance.now();if(void 0===a.current&&(a.current=new Set),e.forEach(e=>{if(!a.current.has(e.nodeId)){r++;let t=performance.now();s.get(e.nodeId)?.fullyUpdateSymbolInstances();let n=performance.now()-t;n>o&&(o=n),a.current.add(e.nodeId)}}),!n){let e=performance.now()-l;(0,eu.sx)("performance.dev_mode.workflows.overview.materialize_nodes",{nodeCount:r,worstNodeMs:o,elapsedMs:e},{forwardToDatadog:!0}),i(!0)}},[e,a,s,n,i,t])}({enabled:Y,nodesWithStatusForFile:f});let[Z,Q]=r.useState(!1),$=r.useCallback(()=>{Q(!0),_(g.current?.scrollTop)},[_]),[ee]=(0,es.fp)(tS._o);(0,eh.h)(()=>{let n=ee||"init";u("Dev Mode Overview Shown",{type:t?"full":"lite",source:n},{forwardToDatadog:!0}),e("track","enter_ready_for_dev_view"),m(n),eM.wr()});let et=[...new Set(D.map(e=>e.userId).filter(e=>e))],en=(0,eR.zy)(et);(0,tS.c7)(D,w,E),(0,tS.zz)(et,en,D);let ei=r.useCallback(e=>{u("Dev Mode Overview Tab Clicked",{tab:e}),k(e)},[k,u]);r.useEffect(()=>{"fullscreen"===p.view&&p.commentThreadId&&(0,eS._$)(h,p,"overview_open_notification")},[h,p]);let er=V.hS({open:!0,onClose:ef.lQ});if(!Y||Z)return(0,i.jsx)("div",{className:ti,children:(0,i.jsx)("div",{className:ed()(tr,"overview--overviewSpinner--ByPFO",ta),style:{left:n},children:(0,i.jsx)(S.k,{size:"lg"})})});let eo="";W>0&&(eo+=(0,d.t)("dev_handoff.workflows.overview.sections_count",{count:W})),q>0&&(W>0&&(eo+=", "),eo+=(0,d.t)("dev_handoff.workflows.overview.frames_count",{count:q})),W+q>0&&(eo+=" "+(0,d.t)("dev_handoff.workflows.overview.pages_count",{count:X}));let el=0===U.length,ec={left:n};return(0,L.T)()&&(0,c.kc)().dt_vscode_ready_for_dev&&(ec.margin="0px"),(0,i.jsx)(V.bL,{theme:{root:ti,contents:"overview--fullHeight--EYIJa"},manager:er,children:(0,i.jsxs)("div",{className:ed()(tr,ta),style:ec,children:[(0,c.kc)().dt_vscode_ready_for_dev&&(0,L.T)()?(0,i.jsx)(eI.f,{isOnReadyForDevPage:!0,children:t&&(0,i.jsx)(tW,{value:A,onChange:j})}):(0,i.jsxs)("div",{className:"overview--overviewHeader--jQiwO",children:[(0,i.jsx)(tH,{}),(0,i.jsxs)("div",{className:"overview--overviewTitle--UqHJd text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,i.jsx)("div",{className:"overview--overviewTitleIcon--gOHz2",children:(0,i.jsx)(J.O,{})}),(0,i.jsx)(T.hE,{autofocus:!0,children:(0,i.jsx)("div",{className:"overview--overviewTitleWithEllipsis--hdYF- ellipsis--ellipsis--70pHK",children:(0,d.tx)("dev_handoff.workflows.overview.title")})})]}),(0,i.jsx)("div",{className:"overview--overviewTitleInfo--dKx6F text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK","data-tooltip":eo,"data-tooltip-type":eU.Ib.TEXT,children:eo}),(0,i.jsx)("div",{className:"overview--overviewHeaderSpacer--b2jcF"}),t&&(0,i.jsx)(tW,{value:A,onChange:j}),(0,i.jsx)(tF,{})]}),(0,i.jsx)("div",{className:"overview--bannerWrapper--TRH1y",children:(0,i.jsx)(e0,{})}),(0,i.jsxs)("div",{className:"overview--scrollAndEmptyMessage--saKl5",children:[el&&(0,i.jsx)("span",{className:"overview--emptyMessage--gXHhy",children:M?(0,d.tx)("dev_handoff.workflows.overview.empty_message_search"):(0,i.jsx)("div",{className:ek.s.preWrap.$,children:(0,d.tx)("dev_handoff.workflows.overview.no_designs",{status:function(e){switch(e){case tS.oz.BUILD:return(0,d.tx)("dev_handoff.workflows.overview.no_designs_ready");case tS.oz.COMPLETED:return(0,d.tx)("dev_handoff.workflows.overview.no_designs_completed");default:return(0,d.tx)("dev_handoff.workflows.overview.no_designs_ready")}}(w),link:(0,i.jsx)("span",{className:"overview--learnMoreLink--sBZR5",children:(0,i.jsx)(H.N,{href:"https://help.figma.com/hc/articles/23918228264855",trusted:!0,newTab:!0,children:(0,d.tx)("dev_handoff.workflows.overview.learn_more")})})})})}),(0,i.jsx)(eE.P,{className:"overview--overviewNodesScrollContainer--65Bic",scrollContainerRef:g,initialScrollTop:x,children:(0,i.jsxs)("div",{className:"overview--overviewNodesScrollContainerContents--OFl0g",children:[t&&(0,i.jsxs)("div",{className:"overview--overviewTabsContainer--DPNIB",children:[(0,i.jsx)(tD,{tabs:F,selected:w,onTabSelected:ei}),(0,i.jsx)(t$,{sortedBy:E,setSortedBy:C})]}),!el&&(0,i.jsx)("div",{className:"overview--overviewNodesContainer--lySVQ",children:(0,i.jsx)("div",{className:"overview--overviewSections--cjD8D",children:U.map(({key:e,pageId:t,pageName:n,sortedNodesWithStatusForFile:r})=>{let a=!t||z[e];return(0,i.jsx)(tq,{isExpanded:a,pageId:t,pageName:n,overviewNodes:r,users:en,onExpandCollapseClicked:t?()=>K(t):void 0,onPreviewClick:$},e)})})})]})})]})]})})}function tK({pageName:e,isExpanded:t,onExpandCollapseClicked:n}){return(0,i.jsx)(z.E,{className:"overview--pageHeader--IXYmy",onClick:n,"aria-label":t?(0,d.t)("dev_handoff.workflows.overview.collapse_page",{pageName:e}):(0,d.t)("dev_handoff.workflows.overview.expand_page",{pageName:e}),children:(0,i.jsxs)("div",{className:"overview--pageHeaderContent--Kda9e text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,i.jsx)(ew.B,{svg:t?tA.A:tN.A,className:"overview--caretIcon--1CEey"}),(0,i.jsx)(Z.A,{className:"overview--pageIcon--j06-j"}),(0,i.jsx)("span",{children:e})]})})}function tW({value:e,onChange:t}){return(0,i.jsxs)("div",{className:"overview--searchBar--C0tCd",children:[(0,i.jsx)(Q.W,{}),(0,i.jsx)(ev.i,{placeholder:(0,d.t)("dev_handoff.workflows.overview.search_placeholder"),value:e,onChange:e=>{t(e.target.value)},className:"overview--searchInput--rWzW2 text--fontPos11--rO47d text--_fontBase--VaHfk",spellCheck:!1}),!!e&&(0,i.jsx)(G.K,{onClick:()=>t(""),"aria-label":(0,d.t)("dev_handoff.workflows.overview.clear_search"),"data-tooltip":(0,d.t)("dev_handoff.workflows.overview.clear_search"),"data-tooltip-type":eU.Ib.TEXT,children:(0,i.jsx)($.A,{})})]})}function tq({pageName:e,overviewNodes:t,users:n,isExpanded:r,onExpandCollapseClicked:a,onPreviewClick:s}){return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(tK,{pageName:e,isExpanded:r,onExpandCollapseClicked:a}),r&&(0,i.jsx)("div",{className:"overview--overviewNodesList--GFdZO",children:t.map(r=>(0,i.jsx)(tJ,{overviewNode:r,onPreviewClick:s,renderPageName:!e,users:n,nodeCount:t.length},r.nodeId))})]})}function tX({overviewNode:e,onClick:t,renderPageName:n,showLastUpdated:s}){let{nodeId:o,isSection:l,updatedAt:c,pageName:u,nodeName:m,pageId:p}=e,h=(0,eq.VW)(o,p),f=(0,a.d4)(e=>(0,eB.Np)(e,h)),g=(0,a.d4)(e=>(0,eB.xS)(e,h)),x=(0,eK.Cj)(g),_=(0,eq.TQ)(),y=function(e,t){let n=(0,eF.Fk)(t=>t.get(e)?.getStatusInfo(),e),i=n?.lastUpdateUnixTimestamp?1e3*n.lastUpdateUnixTimestamp:null,r=(0,ec.ei)(e),a=t?r?.lastEditedAt:i,s=(0,eb.Ak)(a);return a?s:null}(o,e.hasBeenEditedSinceLastStatusChange),b=r.useMemo(()=>e.hasBeenEditedSinceLastStatusChange?(0,d.tx)("dev_handoff.workflows.edit_info.changed"):e.status===ea.zIx.COMPLETED?(0,d.tx)("dev_handoff.status.completed"):e.status===ea.zIx.BUILD?e.description?(0,d.tx)("dev_handoff.workflows.edit_info.new version"):(0,d.tx)("dev_handoff.status.ready_for_dev"):(0,d.tx)("dev_handoff.workflows.edit_info.changed"),[e.description,e.hasBeenEditedSinceLastStatusChange,e.status]),{getTriggerProps:v,manager:C}=K.b();return(0,i.jsxs)("div",{className:"overview--overviewNodeCardHeader--0JdGb",children:[(0,i.jsxs)(W._,{className:ed()("overview--overviewNodeCardHeaderLeft--HnK--",ts),onClick:t,href:f,recordingKey:ex.Pt("dev_handoff.workflows.overview.card",o),children:[(0,i.jsxs)("div",{className:"overview--headerTextWrapper--V7TgX",children:[n&&u&&(0,i.jsxs)("div",{className:"overview--pageNameAndChevron--FnSfO",children:[(0,i.jsx)("span",{className:"overview--pageName--cBKYh",children:u}),(0,i.jsx)("span",{className:"overview--breadCrumbSeparator--q3I56",children:"/"})]}),(0,i.jsxs)("div",{className:"overview--nodeNameAndIcon--iLFZY",children:[(0,i.jsx)("div",{children:l?(0,i.jsx)(ee.e,{}):(0,i.jsx)(et.q,{})}),(0,i.jsx)("span",{className:"overview--nodeName--L9OhB",children:m})]})]}),s&&c>1&&(0,i.jsx)("div",{className:"overview--updatedAtText--c9oQp text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,d.tx)("dev_handoff.overview_mode.design_status",{fromNow:y,status:b})})]}),(0,i.jsxs)("div",{className:"overview--overviewNodeCardHeaderRight--WYfd-",children:[(0,i.jsxs)(K.bL,{manager:C,children:[(0,i.jsx)(G.K,{...v(),"aria-label":(0,d.t)("dev_handoff.workflows.more_actions_tooltip"),children:(0,i.jsx)(en.J,{})}),(0,i.jsxs)(K.mc,{children:[(0,i.jsx)(K.q7,{onClick:()=>_("Dev Mode Overview Card Go To Canvas Clicked",o,p),children:(0,d.tx)("dev_handoff.workflows.overview.show_on_page_action")}),(0,i.jsx)(K.q7,{onClick:()=>x?.(),children:(0,d.tx)("dev_handoff.status.copy_focus_link")})]})]}),(0,i.jsx)(ej.p,{nodeId:o,isMinimal:!0,sourceForLogging:"overview"})]})]})}function tY({overviewNode:e,onClick:t,user:n}){let{description:r,nodeId:s,hasBeenEditedSinceLastStatusChange:o}=e,l=(0,eq.VW)(e.nodeId),d=(0,a.d4)(e=>(0,eB.Np)(e,l));return(0,i.jsx)("div",{className:"overview--overviewAvatarRowMediaQueryHeader--eD1B-",children:(0,i.jsx)("div",{className:"overview--overviewRecentActivityHeader--nKd-Q",children:(0,i.jsx)("h2",{children:o?(0,i.jsx)(tg,{nodeId:s,user:n,previewUrl:d,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t}):(0,i.jsx)(tx,{nodeId:s,user:n,description:r,previewUrl:d,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t})})})})}function tJ({overviewNode:e,onPreviewClick:t,renderPageName:n,users:r,nodeCount:s}){let o=(0,a.wA)(),l=(0,ep.U)(),{nodeId:c,pageId:u,pageName:m,updatedAt:p,nodeName:h}=e,f=(0,eq.VW)(c),g=(0,a.d4)(e=>(0,eB.Np)(e,f)),[x]=(0,es.fp)(tV),y=x===tS._6.RECENT&&p>1,[,b]=(0,es.fp)(tS.wz),v=r.usersById?.[e.userId],C=y&&(r.loading||v);function E(e){e.preventDefault(),l("Dev Mode Overview Card Clicked",{nodeId:c}),b("overview"),t(),o(_.sf(f))}let w=n&&m?`${m} / ${h}`:h,k=(0,d.t)("dev_handoff.workflows.overview.preview_alt_text",{imageDescription:w});return(0,i.jsxs)("article",{className:"overview--overviewNodeCard--qlEo6",children:[C&&(0,i.jsx)(tY,{overviewNode:e,onClick:E,user:v}),(0,i.jsxs)("div",{className:"overview--previewContainer--zzicx",children:[(0,i.jsx)(tX,{overviewNode:e,onClick:E,renderPageName:n,showLastUpdated:!C}),(0,i.jsx)(tZ,{nodeId:c,pageId:u,updatedAt:p,previewUrl:g,onClick:E,nodeCount:s,altText:k})]})]})}function tZ({nodeId:e,pageId:t,updatedAt:n,previewUrl:a,onClick:s,nodeCount:o,altText:c}){let u=(0,eF.Fk)((e,t,n)=>(0,eS.S7)(e,t,n)||"var(--color-bg)",e,t),m=(0,eF.Fk)(t=>t.get(e)?.size),p=1+(5-5*Math.pow(Math.min(1,Math.max(0,Math.max(m?1-(tP-m.x)/tP:1,m?1-(tO-m.y)/tO:1))),.5)),h=m?{width:m.x*p,height:m.y*p}:{width:tM,height:tR},f=Math.min(1,Math.min(tM/h.width,tR/h.height)),g={width:Math.round(h.width*f),height:Math.round(h.height*f)},x=r.useRef(null),_=(0,eO.x)(x,"100%"),y=(0,eN.yh)({nodeId:e,width:g.width,height:g.height,shouldSkip:!_,version:n,reason:"workflows.overview.thumbnail",regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:l.w3z.canBeBlendedSection(e)}),b=function(){let[e,t]=(0,es.fp)(tj),[n]=(0,es.fp)(tT),i=(0,ep.U)();return r.useCallback(r=>{if(!e&&n){t(!0);let e=tk.stop();i(tw,{nodeCount:r,source:n.source,elapsedMs:e},{forwardToDatadog:!0})}},[e,t,n,i])}();return r.useEffect(()=>{y&&b(o)},[y,b,o]),(0,i.jsxs)(W._,{ref:x,className:ed()("overview--previewThumbnail--8n3ja",ts),style:{background:u},onClick:s,href:a,children:[y&&(0,i.jsx)("img",{src:y.src,style:{maxWidth:y.displaySize.x,maxHeight:y.displaySize.y},alt:c,"aria-label":c}),(0,i.jsx)(er.J,{mode:"dark",children:(0,i.jsx)("div",{className:"overview--previewExpandIcon--Cw3l2","data-tooltip":(0,d.t)("dev_handoff.workflows.overview.card_hover_expand_tooltip"),"data-tooltip-type":"text",children:(0,i.jsx)(ei.O,{})})})]})}let tQ=new class{format(e){switch(e){case tS._6.PAGE:return(0,d.t)("dev_handoff.workflows.overview.sort_pages");case tS._6.RECENT:return(0,d.t)("dev_handoff.workflows.overview.sort_recent");case tS._6.ALPHABETICAL:return(0,d.t)("dev_handoff.workflows.overview.sort_alphabetical")}}};function t$({sortedBy:e,setSortedBy:t}){return(0,i.jsxs)(q.Root,{value:e,onChange:t,children:[(0,i.jsx)(q.Trigger,{label:(0,i.jsx)(X.h,{children:(0,d.t)("dev_handoff.workflows.overview.sort_by")})}),(0,i.jsx)(q.Container,{children:(0,i.jsx)(q.Group,{title:(0,i.jsx)(q.Title,{children:(0,d.t)("dev_handoff.workflows.overview.sort_by")}),children:Object.values(tS._6).map(e=>(0,i.jsx)(q.Option,{value:e,children:tQ.format(e)},e))})})]})}var t0=n(62023),t1=n(787049),t2=n(730436),t5=n(951740),t4=n(603244),t3=n(863412),t6=n(836848),t7=n(450064),t9=n(434183),t8=n(675830),ne=n(14248),nt=n(30589),nn=n(206390),ni=n(595920),nr=n(157998),na=n(486545);let ns=r.forwardRef(function({valueToCopy:e,isCopyable:t,children:n,valueTypeForTracking:a,variableTypeForTracking:s,recordingKey:o},l){let{isSelected:d}=(0,na.e)(),c=(0,eK.Cj)(e),u=(0,t7.ON)(),m=r.useCallback(e=>{e.stopPropagation(),c&&c(),u("cell_copied",{type:a,variableType:s})},[c,u,a,s]);return(0,i.jsx)(z.E,{ref:l,className:ed()("variable_cell_content--copyButton--0kUCP ellipsis--ellipsis--70pHK",d&&"variable_cell_content--isOnSelected--mQ6Sw"),onClick:t?m:void 0,recordingKey:o,children:n})});function no({variable:e,variableSetId:t,modeId:n,isCopyable:a,variableTypeForTracking:s}){let l=(0,t9._t)(t),d=r.useMemo(()=>n&&l?{[l]:n}:void 0,[n,l]),c=(0,t9.bL)(e.node_id,t,n),u=(0,t9.BQ)(e.node_id,d),m=c??u,p=!m||!u||"MIXED"===u||"MIXED"===m;if(r.useEffect(()=>{if(p){let e=m&&u?"Variables table cell has mixed value":"Variables table cell has no value";(0,e3.$D)(o.e.DEV_MODE,Error(e))}},[p,m,u]),p)return null;switch(m.type){case ea.Z_n.STRING:case ea.Z_n.FLOAT:return(0,i.jsx)(nl,{value:m.value,isCopyable:a,recordingKey:`dev_handoff.variables_table.cell.copy-${e.name}-${n}`});case ea.Z_n.BOOLEAN:return(0,i.jsx)(nl,{value:(0,ni.Oi)(m),isCopyable:a,variableTypeForTracking:s});case ea.Z_n.COLOR:return(0,i.jsx)(nd,{value:m,isCopyable:a});case ea.Z_n.ALIAS:return(0,i.jsx)(nc,{value:m,resolvedValue:u,isCopyable:a,variableTypeForTracking:s});case ea.Z_n.SYMBOL_ID:case ea.Z_n.NODE_FIELD_ALIAS:case ea.Z_n.EXPRESSION:case ea.Z_n.FONT_STYLE:case ea.Z_n.TEXT_DATA:case ea.Z_n.MAP:case ea.Z_n.MANAGED_STRING_ALIAS:case ea.Z_n.CMS_ALIAS:case ea.Z_n.JS_RUNTIME_ALIAS:case ea.Z_n.IMAGE:case ea.Z_n.LINK:case ea.Z_n.SLOT_CONTENT_ID:case ea.Z_n.DATE:case ea.Z_n.KEYFRAME_TRACK_ID:case ea.Z_n.KEYFRAME_TRACK_PARAMETER_DATA:return null;default:(0,t6.xb)(m)}}function nl({value:e,isCopyable:t,variableTypeForTracking:n,recordingKey:r}){let a="number"==typeof e?(0,ne.nd)(e,""):e;return(0,i.jsx)(ns,{valueToCopy:a,isCopyable:t,valueTypeForTracking:"value",variableTypeForTracking:n,recordingKey:r,children:(0,i.jsx)("div",{className:ek.s.textBodyMedium.truncate.$,children:a})})}function nd({value:e,isCopyable:t,recordingKey:n}){let r=(0,eA.Ku)(),a=(0,nn.Ig)(),s=(0,nt.q)(e.value,r,a,{alphaInPercent:!0}).value,o=(0,i.jsx)(t8.rh,{color:e.value,value:s,disableHover:!t,pillClassName:"variable_cell_content--rawColorPillContainer--p44cI"});return(0,i.jsx)("div",{className:ek.s.flex.alignCenter.gap8.h16.minW0.itemsCenter.$,children:(0,i.jsx)(ns,{valueToCopy:s,isCopyable:t,valueTypeForTracking:"value",variableTypeForTracking:"COLOR",recordingKey:n,children:o})})}function nc({value:e,resolvedValue:t,isCopyable:n,variableTypeForTracking:a}){let s=(0,t9.u)(e.value),o=(0,eK.Cj)(s?.name),l=(0,t7.ON)(),c=r.useCallback(e=>{e.stopPropagation(),o&&o(),l("cell_copied",{type:"alias",variableType:a})},[o,l,a]);return t.resolvedType===ea.rXF.COLOR?(0,i.jsx)(t8.np,{color:t.value,variable:s,label:s?.name??(0,d.t)("variables.missing_name"),onClick:s&&n?c:void 0,selected:n}):(0,i.jsx)("div",{className:ed()("variable_cell_content--aliasWrapper---Q5BU",e.resolvedType===ea.rXF.COLOR&&"variable_cell_content--shiftLeft--AuKzP"),children:(0,i.jsx)(nr.wG,{thumbnailValue:t,text:s?.name??(0,d.t)("variables.missing_name"),variableValue:e.value,onClick:s&&n?c:void 0,disableHover:!n,ui3Height:!0})})}function nu({name:e,variableId:t,isCopyable:n,isSelected:a=!1,variableTypeForTracking:s}){let o=(0,eL.J2)((0,eA.UK)().showGuids)&&t?`${e} (${t})`:e,l=(0,ne.sD)(o);return r.useEffect(()=>{a&&l.current?.scrollIntoView({block:"nearest",behavior:"instant"})},[a,l]),(0,i.jsx)(ns,{ref:l,valueToCopy:e,isCopyable:n,variableTypeForTracking:s,recordingKey:`dev_handoff.variables_table.cell.copy-${e}`,children:o})}var nm=n(263723),np=n(897071),nh=n(424364),nf=n(579414);let ng=(0,es.eU)({nameColumnWidth:void 0,valueColumnWidths:{}});function nx({modeID:e}){let[t,n]=(0,es.fp)(ng),a=r.useRef(null),s=r.useRef(0),[o,l]=(0,nf.i)({onBeforeDrag(){let n=e?t.valueColumnWidths[e]:t.nameColumnWidth,i=e?tI.Gyo:tI.Wsk;s.current=n??(0,em.jz)(i)},onDrag(t){let i=(0,nh.qE)(s.current+t.delta.x,50,500);n(t=>e?{...t,valueColumnWidths:{...t.valueColumnWidths,[e]:i}}:{...t,nameColumnWidth:i})}}),d=r.useCallback(()=>{n(t=>{if(e){let{[e]:n,...i}=t.valueColumnWidths;return{...t,valueColumnWidths:i}}return{...t,nameColumnWidth:void 0}})},[e,n]);return(0,i.jsx)("div",{ref:a,"data-dragging":o||void 0,onDoubleClick:d,...l({className:"variables_table_resizing--resizingHandle--y8Q97"})})}var n_=n(207436),ny=n(362844),nb=n(982147),nv=n(935867),nC=n(161069),nE=n(320828),nw=n(78453);let nk="variables_table--background--f3VLp",nT="variables_table--row--9ntSD",nj="variables_table--cell--Nb5Js",nS="variables_table--rightBorder--jIxpy",nI="variables_table--cellContents--bPafJ ellipsis--ellipsis--70pHK",nA="variables_table--ellipsis--m47xd ellipsis--ellipsis--70pHK",nN=(0,em.jz)(tI.a_Q),nM=(0,em.jz)(tI.bTb);function nR({name:e}){let t=e.split("/"),n=t.slice(0,-1),r=t[t.length-1];return(0,i.jsxs)("div",{className:"variables_table--groupLabel--1iaEe",children:[n.map((e,t)=>(0,i.jsx)(t3.G,{className:"variables_table--groupLabelParent--W2lzH",text:e},`${e}-${t}`)),(0,i.jsx)(t3.G,{className:"variables_table--groupLabelLast--em-pd",text:r})]})}function nP(){return(0,i.jsx)(eg.u9,{label:"DevModeVariablesTable",children:(0,i.jsx)(nO,{})})}function nO(){let e=(0,eA.dP)(),t=(0,r.useRef)(null),[n,a]=r.useState(!1),{currentVariableSet:s,variablesTableColumns:l,variablesTableData:c,selectedVariable:u,selectedRowIndex:m,setSelectedVariable:h}=function(){let e=performance.now(),t=(0,t7.oy)(),n=(0,nm.A8)(),i=(0,nm.i_)(),a=(0,t9.yp)(),s=(0,nm.R6)(a),o=function(e,t){let n=(0,nm.vo)(e);return r.useMemo(()=>{if(!e)return[];let i=n.filter(e=>!t||t===nm.eb||e.name===t||e.name.startsWith(`${t}/`));return(0,t1.Bq)(i.map((t,n)=>{let i=[],r=t.variables.map(n=>{let i=e.modes.map(e=>({variable:n,modeId:e.id})),r=n.name.split("/"),a=n.name.includes("/")?r[r.length-1]:n.name,s=n?.resolvedType!==void 0?(0,ni.Hr)(n.resolvedType):void 0;return{id:n.node_id,type:n.resolvedType,name:a,group:t.name,variableId:n.node_id,content:i,variableTypeForTracking:s}});return""!==t.name&&t.variables.length>0&&i.push({id:`group${n}`,isDividerRow:!0,content:t.name}),i.push(...r),i}))},[t,e,n])}(s,(0,es.md)(nm.bE)),l=r.useMemo(()=>o.findIndex(e=>e.variableId===n),[o,n]),c=r.useCallback(e=>{s&&i(e,s.node_id)},[i,s]),u=r.useMemo(()=>{let e=s?s.modes.map(e=>{let t=1===s.modes.length&&e.name===nC.nm?(0,d.t)("variables.create_modal.value_label"):e.name;return{id:e.id,label:t}}):[];return{currentVariableSet:s,variablesTableColumns:[{id:"name",label:(0,d.t)("dev_handoff.variables.table_column_name")},...e],variablesTableData:o,selectedRowIndex:l,selectedVariable:n,setSelectedVariable:c}},[s,o,l,n,c]);return t("table",performance.now()-e,{type:"data"}),u}(),f=r.useCallback(()=>{h(null)},[h]),g=(0,t5.Te)({count:c.length,getScrollElement:()=>t.current,estimateSize:e=>c[e]&&nF(c[e])?nM:nN,overscan:20,measureElement:e=>e.getBoundingClientRect().height+1});r.useEffect(()=>{!n&&m&&-1!==m&&(g.scrollToIndex(m,{align:"center"}),a(!0))},[n,m,g]);let x=function(){let e=(0,es.md)(ng);return e.nameColumnWidth?`${e.nameColumnWidth}px`:tI.Wsk}(),_=function(e){let t=(0,es.md)(ng),n=e?.length===1;if(!e)return"";if(n){let n=e[0],i=t.valueColumnWidths[n?.id||""]??tI.Gyo;return`minmax(${i}, auto)`}return e.map((n,i)=>{let r=t.valueColumnWidths[n.id],a=r?`${r}px`:tI.Gyo;return i===e.length-1?`${a} minmax(${tI.Gyo}, auto)`:a}).join(" ")}(s?.modes),y=(0,t9.u)(u||void 0),b=(0,es.md)(np.$),v=r.useMemo(()=>({numColumns:l?.length,numRows:c?.length,variableType:y?.resolvedType!==void 0?(0,ni.Hr)(y.resolvedType):void 0,entrypoint:b}),[y?.resolvedType,l?.length,c?.length,b]);if(!(0,nm.zL)())return(0,i.jsx)("div",{className:nk,children:(0,i.jsx)("div",{className:"variables_table--loadingWrapper--dRuSG",style:{left:e},children:(0,i.jsx)(S.k,{size:"lg"})})});let C=!!s,E=0===c.length,w=s?.modes.length===1,k=`${x} ${_}`;return(0,i.jsx)(p.tH,{boundaryKey:"varTable",fallback:p.H4.DEFAULT_FULL_PAGE,team:o.e.DEV_MODE,sentryTags:{area:o.e.DEV_MODE},hasCustomWASMBuild:!1,children:(0,i.jsx)(t7.gs,{name:"full_table",trackingProps:v,children:(0,i.jsx)("div",{className:nk,children:(0,i.jsxs)("div",{className:"variables_table--fullTableView--gU5xu",style:{left:e},children:[(0,i.jsx)(nL,{title:s?.name}),(0,i.jsx)("div",{className:"variables_table--tableWrapper--DDn67",children:C?E?(0,i.jsx)(nE.fQ,{title:(0,d.t)("variables.authoring_modal.no_variables_in_collection"),text:(0,d.t)("dev_handoff.variables.table_collection_empty")}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"variables_table--scrollContainer--b8EJx",ref:t,children:(0,i.jsxs)(t4.Zu,{gridColumnSizes:k,style:{height:g.getTotalSize()+(0,em.jz)(tI.wxr)},className:ed()("variables_table--stickyTopOverride--ojRJ1","variables_table--stickyLeftOverride--oG-HX"),stickyTop:!0,stickyLeft:!0,"aria-label":(0,d.t)("dev_handoff.variables.table_aria-label"),"aria-describedby":"dev_mode_variables_table_title","aria-rowcount":c.length,children:[(0,i.jsxs)(t4.$y,{className:nT,children:[l.map((e,t)=>{let n=0===t,r=t===l.length-1;return(0,i.jsxs)(t4.Jy,{className:ed()(nj,{[nS]:t<l.length-1||!w,"variables_table--nameHeaderCell--OXfWT":n}),children:[(0,i.jsx)("div",{className:ed()(nA,"variables_table--headerText--NjmDk"),children:e.label}),(!w||!r)&&(0,i.jsx)(nx,{modeID:n?void 0:e.id})]},e.id)}),(0,i.jsx)(t4.Jy,{})]}),(0,i.jsx)("tr",{style:{height:g.getVirtualItems()[0]?.start??0,marginTop:-1}}),g.getVirtualItems().map(e=>{let t=c[e.index],n=nF(t),r=!n&&t.variableId===u;return(0,i.jsx)(na.y,{isSelected:r,children:(0,i.jsx)(nD,{isDivider:n,variableId:t.variableId??"",selectedVariableId:u,setSelectedVariable:h,variableTypeForTracking:t.variableTypeForTracking,children:n?(0,i.jsx)(t4.Jy,{className:ed()(nj,"variables_table--groupDividerCell--bKwpj"),children:(0,i.jsx)("div",{className:ed()("variables_table--itemPlainText--tEiJV","variables_table--groupDivider--9yNRN",nA),"data-testid":`dev_handoff.variables_table.header.${t.content}`,children:(0,i.jsx)(nR,{name:t.content})})}):(0,i.jsxs)(i.Fragment,{children:[!!t.name&&void 0!==t.type&&(0,i.jsxs)(t4.Jy,{className:ed()(nj,"variables_table--nameCell--fLA-M",nS),children:[(0,i.jsx)(nv.i,{type:t.type}),(0,i.jsx)("div",{className:nI,children:(0,i.jsx)(nu,{name:t.name,variableId:t.variableId,isCopyable:r,isSelected:r,variableTypeForTracking:t.variableTypeForTracking})}),(0,i.jsx)(nx,{})]}),Array.isArray(t.content)&&t.content.map((e,n)=>{let a=n===t.content.length-1;return(0,i.jsxs)(t4.Jy,{className:ed()(nj,!w&&nS),children:[(0,i.jsx)("div",{className:nI,children:(0,i.jsx)(no,{variable:e.variable,variableSetId:s?.node_id,modeId:e.modeId,isCopyable:r,variableTypeForTracking:t.variableTypeForTracking})}),(!w||!a)&&(0,i.jsx)(nx,{modeID:e.modeId})]},`${e.variable.node_id}-${e.modeId}`)})]})})},t.id)})]})}),u&&(0,i.jsx)("div",{className:"variables_table--detailsSidePanelContainer--3UAmn",children:(0,i.jsx)(nw.U,{selectedVariable:u,currentVariableSet:s?.node_id,onCloseDetailsSidePanel:f})})]}):(0,i.jsx)(nE.fQ,{title:(0,d.t)("variables.authoring_modal.no_variables_in_file"),text:(0,d.t)("dev_handoff.variables.table_empty")})})]})})})})}function nD({isDivider:e,variableId:t,setSelectedVariable:n,selectedVariableId:a,variableTypeForTracking:s,children:o}){let l=(0,t7.ON)(),d=r.useCallback(e=>{e.stopPropagation(),a||l("variable_clicked",{variableType:s}),n(a===t?null:t)},[a,n,l,t,s]),c=ex.rf(`dev_handoff.variables_table.row-${t}`,"click",d),u=!e&&t===a;return(0,i.jsx)(t4.$y,{className:ed()(nT,{"variables_table--divider--5UlZw":e,"variables_table--selected--aNJ7K":u}),onMouseDown:c,children:o})}function nL({title:e}){let t=(0,n_.Ww)(),n=(0,a.d4)(e=>e.multiplayer),s=(0,b.q5)(),o=(0,eP.iZ)(),l=(0,v._6)(),c=(0,a.wA)(),u=(0,a.d4)(e=>"devModeVariablesTableBackFocusId"in e.selectedView?e.selectedView.devModeVariablesTableBackFocusId:void 0),m=(0,es.Xr)(np.$),p=r.useCallback(()=>{m(null),c(_.sf({...l,view:"fullscreen",editorType:ny.nT.DevHandoff,showDevModeVariablesTable:!1,devModeFocusId:u}))},[c,l,m,u]);return(0,i.jsxs)("div",{className:"variables_table--header--DIWZ0",children:[(0,i.jsxs)("div",{className:ek.s.flex.itemsCenter.$,children:[(0,i.jsx)(G.K,{"aria-label":(0,d.t)("general.close"),"data-tooltip-type":eU.Ib.TEXT,"data-tooltip":(0,d.t)("general.close"),onClick:p,recordingKey:"dev_handoff.variables_table.close",children:(0,i.jsx)(t2.X,{})}),(0,i.jsx)("div",{className:"variables_table--title--2Rt0F","data-testid":"dev_handoff.variables_table.title",id:"dev_mode_variables_table_title",children:e})]}),(0,i.jsxs)("div",{className:ek.s.flex.itemsCenter.gap4.$,children:[t&&(0,i.jsx)(nb.v7,{multiplayer:n,currentUser:t,onUserClick:ef.lQ}),s&&(0,i.jsx)(eW.ShareButton,{user:o,editingFile:s,isFileInWorkshop:!1,appendedClassname:"variables_table--shareButton--adDNk"})]})]})}function nF(e){return!0===e.isDividerRow&&"string"==typeof e.content}var nB=n(521662),nU=n(50918),nV=n(562418),nH=n(624818),nz=n(526575),nG=n(152140),nK=n(772293),nW=n(17432),nq=n(692795),nX=n(836669),nY=n(631467),nJ=n(456622),nZ=n(941452),nQ=n(973792),n$=n(518075),n0=n(674531),n1=n(183006),n2=n(349787),n5=n(142037),n4=n(354884),n3=n(138294),n6=n(386882),n7=n(113370),n9=n(751543),n8=n(365094),ie=n(997767),it=n(718801),ii=n(466082),ir=n(239620),ia=n(575015),is=n(393463),io=n(875253),il=n(652154),id=n(542623),ic=n(763561),iu=n(341153),im=n(1007),ip=n(964731),ih=n(894623),ig=n(300573),ix=n(469543),i_=n(890305),iy=n(239811),ib=n(66806),iv=n(841052);let iC="hit-target-resize";function iE(e){return(0,i.jsx)(eg.u9,{label:"DeviceFrameResizeTarget",children:(0,i.jsx)(iw,{...e})})}function iw(e){let t=ic.hY[e.devicePresetIdentifier].inlinePreviewInfo?.hitTargetSvgUrl,[n,a]=r.useState(null);(0,r.useEffect)(()=>{fetch(t).then(e=>e.text()).then(e=>a(e)).catch(()=>console.warn("Failed to fetch hit target SVG. Falling back to rectangular resize boundary."))},[t]);let s=r.useMemo(()=>n?(0,ew.V)(n):null,[n]);return null!==s?(0,i.jsx)(ik,{...e,hitTargetSvg:s}):(0,i.jsx)(ib.K,{...e})}function ik({resizeTo:e,getCurrentContainerBounds:t,lockAspectRatio:n,isResizing:a,setIsResizing:s,onResizeEnd:o,setResizeDirections:l,devicePresetIdentifier:d,isDeviceRotatedCCW:c,hitTargetSvg:u,hidden:m,recordingKey:p}){let h=r.useCallback(()=>{let e=t(),n=(16/((c?e.bottom-e.top:e.right-e.left)/ic.hY[d].imageSize.x)).toFixed(2);document.querySelectorAll(`[id^=${iC}]`).forEach(e=>e.setAttribute("stroke-width",`${n}`))},[d,c,t]);(0,r.useEffect)(()=>{h()},[h]);let f=r.useCallback(()=>{h(),o?.()},[o,h]),{startResizing:g}=(0,ib.Q)({resizeTo:e,getCurrentContainerBounds:t,isResizing:a,setIsResizing:s,setResizeDirections:l,onResizeEnd:f,lockAspectRatio:n,hidden:m,recordingKey:p}),x=r.useRef(null),_=r.useRef(null),y=r.useMemo(()=>(0,ic.qt)(d)===ic.bq.WATCH,[d]),b=r.useCallback(e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return y?ij({x:n,y:i},t):iT({x:n,y:i},t)},[y]),v=ex.rf(p,"mousedown",r.useCallback(e=>{e.stopPropagation(),e.preventDefault(),g(b(e),{x:e.clientX,y:e.clientY})},[b,g]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),C=ex.rf(ex.Pt(p,"deviceFrameResizeTarget"),"mousemove",r.useCallback(e=>{if(a)return ex.aH;e.stopPropagation(),e.preventDefault();let t=b(e),n=e.currentTarget;_.current&&n.classList.remove(_.current);let i=(0,iy.as)(t);i&&n.classList.add(i),_.current=i},[b,a]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),E=r.useCallback(e=>{e.onmousemove=C,e.onmousedown=v},[v,C]);return((0,r.useEffect)(()=>{document.querySelectorAll(`[id^=${iC}]`).forEach(e=>E(e))},[d,E]),m)?null:c?(()=>{let e=ic.hY[d].imageSize,t=e.x/e.y;return(0,i.jsx)("div",{children:(0,i.jsx)(ew.B,{svg:u,svgClassName:ed()(iv.Q0,iv._d,iv.iZ),svgWidth:`${100*t}%`,ref:x,useOriginalSrcFills_DEPRECATED:!0})})})():(0,i.jsx)("div",{children:(0,i.jsx)(ew.B,{svg:u,svgClassName:iv.iZ,ref:x,useOriginalSrcFills_DEPRECATED:!0})})}let iT=(e,t)=>{let{x:n,y:i}=e,r=.1*Math.min(t.width,t.height),a=[];return i<r?a.push(iy.OP.TOP):i>t.height-r&&a.push(iy.OP.BOTTOM),n<r?a.push(iy.OP.LEFT):n>t.width-r&&a.push(iy.OP.RIGHT),a},ij=(e,t)=>{let{x:n,y:i}=e,r=.1*t.width;if(i<r)return[iy.OP.TOP];if(i>t.height-r)return[iy.OP.BOTTOM];if(n<r)return[iy.OP.LEFT];if(n>t.width-r)return[iy.OP.RIGHT];let a=[];return i<t.height/2?a.push(iy.OP.TOP):a.push(iy.OP.BOTTOM),n<t.width/2?a.push(iy.OP.LEFT):a.push(iy.OP.RIGHT),a};var iS=n(757516),iI=n(612788),iA=n(542948),iN=n(379196),iM=n(17248),iR=n(613675),iP=n(342377),iO=n(808620),iD=n(599490);let iL={x:600,y:600},iF="inlinePreviewModal",iB=()=>{let e=(0,c.kc)().make_iframe_in_figma_design_inline_preview,t=(0,il.uQ)(),n=(0,iN.vD)(t),i=(0,iS.rh)(n),a="CODE_INSTANCE"===(0,eK.rb)()&&e,[s,o]=r.useState(null);r.useEffect(()=>{a&&o(i)},[i,a]);let[l,d]=r.useState(!1),[u,m]=r.useState(!1);return r.useEffect(()=>{a&&!l&&d(!0),a||u||m(!0)},[a,l,u]),{codeSelectionToRender:a?i:s,passesMakeInlinePreviewFF:e,shouldShowMakeIframe:a,shouldMountMakeCodeInstanceIframeComponent:l,shouldMountDesignLayersNodeIframeComponent:u}},iU=()=>{let e=(0,im.MG)({subscribeToUpdates_expensive:!0}),t=(0,im.TZ)({subscribeToUpdates_expensive:!0});return(0,r.useMemo)(()=>new io.Mi(e+n4.wR,t+n4.wR),[e,t])},iV=r.memo(function({pageId:e,viewerControl:t}){let[{previewKeyForErrorBoundary:n},r]=(0,es.fp)(t.stateAtom);return(0,i.jsx)(p.tH,{boundaryKey:"InlinePreviewModal",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{if((0,eu.sx)("inline_preview_crashed",{},{forwardToDatadog:!0}),r({type:"HANDLE_PREVIEW_CRASHED"}),(0,ia.Lg)()||(0,ia.nl)()||(0,is.b5)())throw Error("Inline preview crashed")},children:(0,i.jsx)(iH,{pageId:e,viewerControl:t})},n)}),iH=r.memo(function({pageId:e,viewerControl:t}){let n=r.useRef(null),s=(0,b.tS)(),o=(0,r.useRef)(!1),d=r.useRef(null),[{currentPresentedNode:c,navigateBackwardEnabled:u,navigateForwardEnabled:p,modalStatus:h,sizeInfo:f,showDeviceFrameEnabled:g,scalingInfo:x},_]=(0,es.fp)(t.stateAtom),y=(0,a.wA)(),v=(0,I.eY)(),C=(0,r.useMemo)(()=>h===iO.bi.OPEN,[h]),E=f?.initialViewerSize??iL,w=(0,m.ZC)(E),k=iU(),[T,j]=r.useState(k),[S,A]=r.useState(E.x),[N,M]=r.useState(E.y+iy.uF),R=ii.UN().getCurrentPage()?.prototypeDevice||null,P=R?.presetIdentifier,O=!!P&&(0,ic.L_)(P),D=C&&O&&g,{showing:L}=(0,ip.BK)(t.overflowDropdownType),F=(0,iu.Z)(),B=(0,eL.ut)(l.Ez5?.singleSlideView().isInFocusedNodeView,!1),[U,V]=r.useState(!1),H=r.useCallback(()=>{V(!0),nK.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!0})},[V]),z=(0,iM.sO)(),G=U||L?iD.cD:iD.Xt,K=r.useCallback(e=>{y((0,ig.Zh)({name:"prototype.close_inline_viewer",params:{source:e}})),_({type:"CLOSE_INLINE_PREVIEW"})},[y,_]),W=r.useCallback(()=>((0,t6.vA)(!!N),(0,t6.vA)(!!S),{x:S,y:N-iy.uF}),[N,S]),q=r.useCallback(e=>{A(e.x),M(e.y+iy.uF)},[A,M]),X=r.useCallback(()=>{let e=W();if(!D)return e;(0,t6.B1)(P,"devicePresetIdentifier must be set");let t=R.rotation,{framePresetSize:n,idealDeviceSize:i}=(0,iR.is)(P,t);return(0,iR.BX)(e,n,i)},[P,W,D,R?.rotation]);r.useEffect(()=>{o.current||j(k)},[k]),r.useEffect(()=>{_({type:"SET_CURRENT_VIEWER_SIZE_CALLBACK",payload:X})},[_,X]);let Y=r.useMemo(()=>f?.breakpoint?.type!==n4.l5.DEVICE,[f]),J=r.useCallback(e=>{if(!Y)return;let t=X();(0,t6.vA)(!!c,"currentPresentedNode must be set");let n=v.get(c);(0,t6.vA)(!!n,"expected selectedNode to exist");let i=(0,n4.HS)(v,n),r=(0,n4.hX)(t,n,i,v);(0,t6.vA)(r.breakpoint.type!==n4.l5.DEVICE,"fit to aspect ratio not allowed for device"),q(r.initialViewerSize),y((0,ig.Zh)({name:"prototype.resize_to_fit_aspect_ratio",params:{source:e}}))},[Y,X,c,v,q,y]),Z=()=>{if(!c)return!1;let e=!1;if(D){let{idealDeviceSize:t}=(0,iR.is)(P,R.rotation);e=t.x>=n4.Fe&&t.y>=n4.Sq}else{let t=v.get(c);if(!t)return!1;let n=(0,n4.HS)(v,t),i=(0,n4.nw)(n,t);e=i.x>=n4.Fe&&i.y>=n4.Sq}return e},Q=r.useCallback(e=>{_({type:"SET_PREVIEW_IS_RESPONSIVE",payload:e})},[_]),$=r.useCallback(()=>{_({type:"RESIZE_MODAL",payload:{sceneGraph:v}})},[_,v]),ee=r.useCallback(e=>{if(e){let t=(0,im.QZ)({nodeId:e,alwaysPan:!0,maxScale:.6});z?h===iO.bi.OPEN&&(F(t),B&&l.Ez5?.singleSlideView().focusNodeInFocusedNodeView(e,!0)):F(t)}},[F,z,B,h]);r.useEffect(()=>{_({type:"SET_SCROLL_CALLBACK",payload:ee})},[_,ee]);let et=r.useCallback(e=>{q({x:e.x,y:e.y+(0,em.jz)(tI.m8f)})},[q]),en=r.useMemo(()=>{if(D&&ic.hY[P]?.inlinePreviewInfo?.hitTargetSvgUrl)return function(e){let t=R.rotation===ea.xOL.CCW_90;return(0,i.jsx)(iE,{...e,mirrorResizeHorizontally:!1,devicePresetIdentifier:P,isDeviceRotatedCCW:t})}},[D,P,R?.rotation]),ei=r.useCallback(e=>{(0,t6.vA)(f?.breakpoint.type===n4.l5.DEVICE,"device must be set to toggle device frame"),(0,t6.vA)(!!R,"prototypeDevice must be set to toggle device frame");let t=X();if(e){let e=R.presetIdentifier,{idealDeviceSize:n,framePresetSize:i}=(0,iR.is)(e,R.rotation);et((0,iR.Ho)(t,i,n))}else q(t)},[f?.breakpoint.type,R,X,q,et]);(0,t6.vA)(!C||null!==f,"sizeInfo should always be set when open"),r.useLayoutEffect(()=>{if(w!==E){if(D){let{idealDeviceSize:e,framePresetSize:t}=(0,iR.is)(P,R.rotation);et((0,iR.Ho)(E,t,e))}else q(E)}},[E,w,P,D,R,et,q]),r.useEffect(()=>{P&&(0,ic.L_)(P)&&(0,ic.Gn)(P)},[P]);let er=r.useCallback(()=>{let e=W(),{width:t,height:n}=nK.Y5.getViewportInfo(),i=e.x/t,r=e.y/n;y((0,ig.Zh)({name:"prototype.inline_preview_manually_resized",params:{isDeviceFrameShown:D,horizontalCoverage:i,verticalCoverage:r}}))},[y,W,D]),eo=(0,r.useMemo)(()=>{let e={height:"100%"};return D?e:{...e,borderBottomLeftRadius:"var(--radius-small)",borderBottomRightRadius:"var(--radius-small)"}},[D]),{codeSelectionToRender:el,passesMakeInlinePreviewFF:ec,shouldShowMakeIframe:eu,shouldMountMakeCodeInstanceIframeComponent:ep,shouldMountDesignLayersNodeIframeComponent:eh}=iB(),ef=t.ViewerComponent;if(h===iO.bi.NOT_LOADED)return null;let eg=ed()(z?iD.CN:iD.aq,D?null:G),ex=ed()(D?[G,iv.k9]:null,{[iD.FO]:z}),{x:e_,y:ey}=(0,n4.ut)((0,ii.UN)(),!0),eb=!C||!f?.initialViewerSize;return(0,i.jsxs)(i_.od,{ResizeTargetComponent:en,allowPartialHeaderOnScreen:!0,allowResizeHeight:U&&!z,allowResizeWidth:U&&!z,alwaysEnsureHeaderModalOnScreen:!0,containerClassName:eg,containerFillsPage:z,containerRef:d,customButton:(0,i.jsx)(iz,{allowActualSizeReset:Z(),allowSizeReset:Y,closeInlinePreview:K,iframeRef:n,isDeviceSupportedForPreview:O,isPreviewFittedToAspectRatio:()=>{if(!c||!Y)return!1;let e=v.get(c);if(!e)return!1;let t=X(),n=(0,n4.HS)(v,e),i=(0,n4.hX)(t,e,n,v),r=t.x/t.y,a=i.initialViewerSize.x/i.initialViewerSize.y;return(0,ih.o)(r,a)},isPreviewResponsive:"responsive"===x.contentScalingMode,isPreviewShownAtActualSize:()=>{if(!c||!n.current)return!1;let e=v.get(c);if(!e||!f?.breakpoint)return!1;let t=D?(0,iR.is)(P,R.rotation).framePresetSize:(0,n4.nw)(f.breakpoint,e),i=X();return(0,ih.o)(t.x,i.x,1e-4)&&(0,ih.o)(t.y,i.y,1e-4)},isPrototypeDeviceSet:!!R&&R.type!==ea.XQq.NONE,onToggleShowDeviceFrame:ei,openFileKey:s||void 0,resizeToActualSize:()=>{if(!Z())return;(0,t6.vA)(!!c),(0,t6.vA)(!!f);let e=v.get(c);(0,t6.vA)(!!e),y((0,ig.Zh)({name:"prototype.resize_to_actual_size"}));let t=D?(0,iR.is)(P,R.rotation).idealDeviceSize:(0,n4.nw)(f.breakpoint,e),n=(e,t)=>{q(e),j(new io.Mi(t.x,t.y))},i=W();(0,n4.UB)(t,y,()=>n(i,T)),q(t)},resizeToFitAspectRatio:()=>J("overflow_menu"),scrollToNode:ee,setPreviewIsResponsive:Q,showFullscreenButton:z,showOverflow:!z,viewerControl:t,width:S}),disableDragging:z,dragHeaderOnly:!0,frameStyle:eo,headerClassName:ex,height:N,hidden:eb,ignoreCloseShortcut:!C,lockAspectRatio:f?.breakpoint?.type===n4.l5.DEVICE,makeContentPixelPerfect:!0,minHeight:ey,minWidth:e_,onClose:()=>{K("modal")},onDragStart:()=>o.current=!0,onEdgeDoubleClick:()=>J("double_click"),onFocus:e=>{(!d.current||e.target===d.current||e.target===n.current)&&(t.onFocus()||H())},onResize:$,onResizeEnd:er,position:T,preventKeyboardFocus:!0,recordingKey:iF,setHeight:M,setPosition:j,setWidth:A,tabIndex:0,title:(0,i.jsx)(iG,{navigateBackwardEnabled:u,navigateForwardEnabled:p,width:S,onBack:t.onBack,onForward:t.onForward,onRestart:t.onRestart}),transparentContentBackground:D,width:S,children:[ec&&ep&&(0,i.jsx)(iP.H,{initialViewerSize:E,isDeviceFrameShown:D,shouldHide:!eu,children:(0,i.jsx)(iA.m,{chatNodeId:null,codeSelectionToRender:el,useProgressBarWhenLoading:!0,isVisible:!0,sandbox:null,surface:iI.e.DesignInFloatingModalPreview})},"make-code-instance-iframe"),eh&&(0,i.jsx)(iP.H,{initialViewerSize:E,isDeviceFrameShown:D,shouldHide:eu,children:(0,i.jsx)(ef,{closeInlinePreview:K,iframeFocused:U,isOpen:C,onIframeFocus:H,openFileKey:s||void 0,pageId:e,ref:n,setIframeFocused:V},e)},"design-layers-node-iframe")]})});function iz({allowSizeReset:e,allowActualSizeReset:t,isPrototypeDeviceSet:n,isDeviceSupportedForPreview:s,openFileKey:o,resizeToFitAspectRatio:c,scrollToNode:u,showOverflow:m,showFullscreenButton:p,iframeRef:h,resizeToActualSize:f,isPreviewShownAtActualSize:g,setPreviewIsResponsive:x,isPreviewResponsive:_,closeInlinePreview:y,onToggleShowDeviceFrame:b,width:v,isPreviewFittedToAspectRatio:C,viewerControl:E}){let w=(0,a.wA)(),k=r.useRef(null),[{currentPresentedNode:T,targetFrameFollowingEnabled:j,showDeviceFrameEnabled:S},I]=(0,es.fp)(E.stateAtom),{showing:A,toggle:N}=(0,ip.BK)(E.overflowDropdownType),M=r.useCallback(()=>{if(!o)throw Error("Expected openFileKey to exist");if(!T)throw Error("openPrototypeInNewTab called without currentPresentedNode");w(id.F({fileKey:o,nodeId:T,startingPointNodeId:l.X3B?.getActivePrototypeStartingPointNodeIdOnCurrentPage()??"",source:"inline_viewer",scalingInfo:_?n?{contentScalingMode:"responsive",viewportScalingMode:"scale-down"}:{contentScalingMode:"responsive",viewportScalingMode:"contain"}:void 0})),y("open_in_new_tab")},[o,T,w,_,n,y]),R=r.useCallback(()=>{let e=!j;w((0,ig.Zh)({name:"prototype.toggle_follow_previewed_frame",params:{enabled:e}})),I({type:"TOGGLE_TARGET_FRAME_FOLLOWING"}),u(T)},[w,I,j,u,T]),P=r.useCallback(()=>{let e=!S;w((0,ig.Zh)({name:"prototype.toggle_show_device_frame",params:{enabled:e,location:"preview"}})),I({type:"TOGGLE_SHOW_DEVICE_FRAME"}),b(e)},[w,S,b,I]),O=r.useCallback(()=>{let r={displayText:(0,d.t)("inline_preview.overflow_menu.responsive"),name:"responsive",recordingKey:"responsiveButton",callback:()=>{x(!0)},isChecked:_,icon:(0,i.jsx)(n3.g,{}),unsetStrokeOnActiveOption:!0},a={displayText:s?(0,d.t)("inline_preview.overflow_menu.fixed"):(0,d.t)("inline_preview.overflow_menu.fit_width"),name:s?"fixed":"fit-width",isChecked:!_,recordingKey:"fixedButton",icon:s?(0,i.jsx)(n6.h,{}):(0,i.jsx)(n7.K,{}),callback:()=>{x(!1)},unsetStrokeOnActiveOption:!0},o={displayText:(0,d.t)("inline_preview.overflow_menu.follow_prototype"),name:"follow-active-frame",recordingKey:"followActiveFrame",callback:R,isChecked:j},l={displayText:s?(0,d.t)("inline_preview.overflow_menu.resize_device_100_percent"):(0,d.t)("inline_preview.overflow_menu.resize_window_100_percent"),name:"actual-size",recordingKey:"actualSizeButton",callback:f,disabled:!t,isChecked:g(),"data-onboarding-key":"resize-to-actual-size"},u={displayText:(0,d.t)("inline_preview.overflow_menu.reset_aspect_ratio"),name:"reset-size",recordingKey:"resetSizeButton",callback:c,isChecked:C(),disabled:!e,hidden:n},m={displayText:(0,d.t)("inline_preview.overflow_menu.show_device_frame"),name:"show-device-frame",recordingKey:"showDeviceFrame",callback:P,isChecked:S&&s,disabled:!s,hidden:!n};return[s?r:a,s?a:r,{separator:!0,displayText:""},o,l,u,m,{displayText:(0,d.t)("inline_preview.new_tab"),recordingKey:"openInNewTabButton",name:"open-in-new-tab",callback:M,hidden:v>n4.kl}]},[_,s,R,j,f,t,g,c,C,e,n,P,S,M,v,x]),D=r.useCallback(()=>{h.current&&h.current.requestFullscreen()},[h]);return(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)("div",{ref:k,children:(0,i.jsx)(G.K,{"aria-label":(0,d.t)("inline_preview.overflow_menu"),htmlAttributes:{"data-tooltip-type":eU.Ib.TEXT,"data-tooltip":(0,d.t)("inline_preview.overflow_menu")},actionOnPointerDown:!0,onClick:e=>{e.stopPropagation(),N({})},recordingKey:(0,ir.Pt)(iF,"overflowMenuButton"),children:(0,i.jsx)(n9.P,{})})}),v>n4.kl&&(0,i.jsx)(G.K,{htmlAttributes:{"data-tooltip-type":eU.Ib.TEXT,"data-tooltip":(0,d.t)("inline_preview.new_tab"),"data-testid":"preview-open-in-presentation-view"},"aria-label":(0,d.t)("inline_preview.new_tab"),onClick:M,recordingKey:(0,ir.Pt)(iF,"openInNewTabButton"),children:(0,i.jsx)(n8.V,{})}),p&&(0,i.jsx)(G.K,{onClick:D,htmlAttributes:{"data-tooltip-type":eU.Ib.TEXT,"data-tooltip":(0,d.t)("inline_preview.open_fullscreen")},"aria-label":(0,d.t)("inline_preview.open_fullscreen"),children:(0,i.jsx)(ei.O,{})}),A&&k.current&&(0,i.jsx)(ix.j,{dispatch:w,items:O(),lean:"center",onDismissMenu:E.onDismissOverflow,onDropdownHidden:E.onDismissOverflow,onFocus:e=>{e.stopPropagation()},onSelectItem:e=>{e.callback&&e.callback()},parentRect:k.current.getBoundingClientRect(),recordingKey:(0,ir.Pt)(iF,"overflowMenu"),showPoint:!0})]})}function iG({navigateForwardEnabled:e,navigateBackwardEnabled:t,onRestart:n,width:r,onBack:s,onForward:o}){let l=(0,a.wA)();return(0,i.jsxs)("div",{className:iD.KW,children:[r<=n4.Ah?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.K,{htmlAttributes:{"data-testid":"preview-navigate-backward"},"aria-label":(0,d.t)("viewer.footer.previous_frame"),onClick:s,disabled:!t,recordingKey:(0,ir.Pt)(iF,"navigateBackwardButton"),children:(0,i.jsx)(Y.C,{})}),(0,i.jsx)(G.K,{"aria-label":(0,d.t)("viewer.footer.next_frame"),onClick:o,disabled:!e,recordingKey:(0,ir.Pt)(iF,"navigateForwardButton"),htmlAttributes:{"data-testid":"preview-navigate-forward"},children:(0,i.jsx)(ie.e,{})})]}),r<=n4.kl?null:(0,i.jsx)(G.K,{"aria-label":(0,d.t)("inline_preview.restart"),htmlAttributes:{"data-tooltip-type":eU.Ib.TEXT,"data-tooltip":(0,d.t)("inline_preview.restart"),"data-testid":"preview-restart-prototype"},onClick:()=>{l((0,ig.Zh)({name:"prototype.replay_clicked",params:{source:"inline viewer"}})),n()},recordingKey:(0,ir.Pt)(iF,"restartButton"),children:(0,i.jsx)(it.H,{})})]})}var iK=n(391220),iW=n(431503);function iq(){let e=(0,a.d4)(e=>e.selectedView),t=(0,b.tS)(),n=(0,a.d4)(e=>e.progressBarState.mode),i=(0,a.d4)(e=>(0,nz.pi)({editorType:nG.d1(e)?.editor_type})),o=n!==l.Oin.HIDE_UI&&n!==l.Oin.ON_AND_LOCKED,p=(0,b.q5)(),h=(0,iM.jY)(),f=(0,nZ.BI)(),g=(0,eL.xB)(l.Ez5?.interopToolMode(),l.nQ7.SELF);(0,r.useEffect)(()=>(document.body.setAttribute("data-editor-theme",(0,n1.ju)(e,g)),()=>{document.body.removeAttribute("data-editor-theme")}),[e,g]),(0,nH.f)(),(0,nB._)(),(0,nU.c)(),(0,iW.LP)(),(0,r.useEffect)(()=>{o&&t&&h&&nK.Y5.onReady().then(()=>{c.kc()?.fullscreen_send_client_rendered_message?l.h3O?.sendClientRendered(nY.xK.getClientRenderedMetadata()):l.h3O?.sendSignal("client-rendered",""),window.requestAnimationFrame(()=>{u.eD?.addTabAnalyticsMetadata({reactFullscreenViewRenderTime:window.performance.now()}),nY.xK.reactFullscreenViewIsRendered(),nY.xK.report(t,i),c.kc()?.fullscreen_use_threaded_rendering||function(){let e=(0,nX.dX)("fullscreen");if(!e||nW.Pc?.usingWebGPU())return;let t=(0,nq.ap)()?e.getContext("webgl2"):e.getContext("webgl");if(!t||!window.expectedWebGLContextAttributes)return;let n=t.getContextAttributes();if(!n)return;let i=l.CeL?.getGpuDeviceInfo()??{vendor:"",renderer:"",version:""},r={};for(let e of Object.keys(n))r[`actual_${e}`]=n[e];let a={},s=!0;for(let e of Object.keys(window.expectedWebGLContextAttributes))n[e]!==window.expectedWebGLContextAttributes[e]&&(s=!1),a[`expected_${e}`]=window.expectedWebGLContextAttributes[e];let o={...r,...a,...i,are_context_attributes_correct:s};(0,eu.sx)("fullscreen_load_gpu_parameters",o)}()}),setTimeout(()=>{u.eD?.addTabAnalyticsMetadata({reactFullscreenViewRenderTimeSetTimeout:window.performance.now()}),nY.xK.reactFullscreenViewIsRenderedSetTimeout()},0)})},[o,t,i,h]);let x=(0,a.d4)(e=>e.isFullscreenDocumentLoaded);(0,r.useEffect)(()=>{f?.handleCompleteInitialLoad&&x&&f.handleCompleteInitialLoad()},[f,x]);let[_,y]=(0,r.useState)(!1),v=(0,a.d4)(e=>e.mirror.appModel.isReadOnly);(0,r.useEffect)(()=>{f?.updateReadOnly&&x&&!_&&(y(!0),f.updateReadOnly(v))},[f,x,_,y,v]);let C=(0,m.ZC)(p),E=(0,a.d4)(e=>e.mirror.appModel.pagesList),w=(0,r.useMemo)(()=>E.map(e=>({id:e.nodeId,name:e.name,divider:e.isDivider})),[E]),k=(0,m.ZC)(w),T=(0,a.d4)(e=>e.mirror.appModel.currentPage),j=(0,m.ZC)(T);(0,r.useEffect)(()=>{f?.updatePages&&p&&(!C||p.key!==C.key||p.name!==C.name||p.editorType!==C.editorType||p.isTryFile!==C.isTryFile||!(0,s.c2)(w,k)||T!==j)&&f.updatePages({fileKey:p.key,fileName:p.name,editorType:p.editorType,isTryFile:p.isTryFile,pages:w.length>0?w:[{id:T,name:(0,d.t)("fullscreen.pages_panel.pages_placeholder"),divider:!1}],currentPageId:T})},[f,p,C,w,k,T,j]);let S=(0,nQ.WC)();(0,r.useEffect)(()=>{f?.updateWebOverlaysShown&&f.updateWebOverlaysShown(S)},[f,S]);let I=(0,n0.o3)(n0.nt.customKeyboardShortcuts);(0,r.useEffect)(()=>{(0,c.kc)().ce_custom_keyboard_shortcuts&&l.glU?.reloadKeyboardShortcuts()},[I]);let A=(0,a.d4)(e=>e.multiplayer.allUsers),N=(0,a.d4)(e=>e.multiplayer.observingSessionID),M=(0,a.d4)(e=>e.multiplayer.presenterSessionID),R=(0,a.d4)(e=>e.multiplayer.deviceNameFilter),P=(0,a.d4)(e=>e.multiplayer.sessionID),B=(0,r.useMemo)(()=>{let{users:e}=(0,n$.Yp)(A,null,!1,1048576,{sessionID:P,observingSessionID:N,presenterSessionID:M,deviceNameFilter:R});return{sessionID:P,observingSessionID:-1!==N?N:null,presenterSessionID:-1!==M&&M||null,users:e}},[A,R,N,M,P]),U=(0,m.ZC)(B);return(0,r.useEffect)(()=>{f?.updateMultiplayerUserInfo&&!(0,s.c2)(U,B)&&f.updateMultiplayerUserInfo(B)},[f,B,U]),(0,n2.iA)(),!function(e,t){let n=(0,O.U4)(),i=(0,O._I)(),a=(0,O.xo)(),s=(0,D.D)(),o=(0,F.U)("permission",!0),d=e&&!i&&!n&&!(0,L.T)();(0,r.useEffect)(()=>{t||(l.w3z.setCanAccessDevMode(i),l.w3z.setCanEnterDevMode(n),l.w3z.setShowWorkflowsControls(s),l.w3z.setIsUsingDevModeDemoFile(a))},[i,n,s,t,a]),(0,r.useEffect)(()=>{d&&o("design")},[o,d])}((0,nV.m0)(),(0,nV.ow)()),(0,n5.J2)(),null}function iX({children:e}){let t=(0,a.d4)(n4.xY),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),r=(0,B.l7)(),s=(0,t0.e)(),l=(0,a.d4)(e=>e.isFullscreenDocumentLoaded);return(0,i.jsxs)(i.Fragment,{children:[e??null,(0,i.jsx)(iq,{}),t&&(0,i.jsx)(iV,{viewerControl:iK.e,pageId:n}),r&&(0,i.jsx)(p.tH,{boundaryKey:"DevModeOverview",fallback:p.H4.DEFAULT_FULL_PAGE,sentryTags:{area:o.e.DEV_MODE},hasCustomWASMBuild:nJ.y4,children:(0,i.jsx)(tz,{})}),(0,i.jsx)(p.tH,{boundaryKey:"ComponentBrowser",fallback:p.H4.DEFAULT_FULL_PAGE,sentryTags:{area:o.e.CODE_CONNECT},hasCustomWASMBuild:nJ.y4,children:(0,i.jsx)(P,{})}),s&&l&&(0,i.jsx)(p.tH,{boundaryKey:"DevModeVariablesTable",fallback:p.H4.DEFAULT_FULL_PAGE,sentryTags:{area:o.e.DEV_MODE},hasCustomWASMBuild:nJ.y4,children:(0,i.jsx)(nP,{})})]})}},242064:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(692376);let r=(0,n(445019).um)(!1,(e,t)=>{switch(t.type){case"ACTIVATE_AND_MAXIMIZE":return i.glU?.setActiveEmbed(t.payload.embedNodeID),!0;case"MINIMIZE":return!1;default:return e}})},53964:(e,t,n)=>{n.d(t,{GR:()=>R,bu:()=>M,Nh:()=>D});var i=n(239976),r=n(105652),a=n(20002),s=n(245814),o=n(692376),l=n(2227),d=n(379141),c=n(270450),u=n(445019),m=n(224542),p=n.n(m),h=n(675707),f=n(563188),g=n(876922),x=n(709003),_=n(1007),y=n(157750),b=n(236410),v=n(747079),C=n(242064),E=n(447e3),w=n(754411),k=n(659871),T=n(432318),j=n(910771);function S(){let e=(0,u.Xr)(C.n),t=r.useCallback(()=>{e({type:"MINIMIZE"})},[e]);return(0,c.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(k.V,{variant:"button",tooltip:(0,d.t)("whiteboard.embeds.inline_menu.minimize"),ariaLabel:(0,d.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl",children:(0,i.jsx)(w.p,{})}):(0,i.jsx)(T.K0,{svg:j.A,active:"NONE",tooltip:(0,d.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl"})}var I=n(560772);function A(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let i=t.get(Object.keys(n)[0]);return i&&"WIDGET"===i.type?i:null}function N(e){return e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode)}let M=r.memo(function(){let e=(0,a.d4)(N),t=e?.guid,[n,s]=r.useState(null),c=r.useMemo(()=>t&&t!==l.AD?o.glU.getEmbedTypeOfTooltipIcon(t):null,[t]);r.useEffect(()=>{if(!c||!t){s(null);return}let e=(0,x.EE)("embed-tooltip",[t],e=>{s(e?.position||null)});return s(e.currentNodePosition&&e.currentNodePosition[t]?.position||null),()=>{(0,x.lB)("embed-tooltip")}},[t,c]);let u=!!c&&!!n,m=(0,_._X)({subscribeToUpdates_expensive:u}),p=r.useMemo(()=>{if(!n)return{};let e=(0,_.Yb)(m,n),t=e.x+m.x,i=e.y+m.y;return{height:n.height,width:n.width,transformOrigin:"top left",position:"fixed",transform:`translate(${t}px, ${i}px) rotate(${n.angle}deg) scale(${m.zoomScale})`}},[m,n]);return u?(0,i.jsx)("div",{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":"video"===c||"autoplayable_video"===c?(0,d.t)("whiteboard.embeds.tooltip_help_text.video"):"audio"===c||"autoplayable_audio"===c?(0,d.t)("whiteboard.embeds.tooltip_help_text.audio"):"file"===c||"figma"===c?(0,d.t)("whiteboard.embeds.tooltip_help_text.file"):(0,d.t)("whiteboard.embeds.tooltip_help_text.generic"),"data-tooltip-show-above":!0,"data-tooltip-max-width":160,"data-tooltip-timeout-delay":50,"data-tooltip-show-immediately":!0,style:p}):null}),R=r.memo(function(){let e=(0,y.J2)(o.Ez5.embedUiState().activeEmbedData),t=(0,a.d4)(e=>e.mirror.appModel.currentPage?e.mirror.appModel.currentPage:void 0),n=(0,a.d4)(A),r=(0,u.md)(C.n),s=!!e&&n?.guid===e.embedNodeId;return e&&e.embedNodeId&&e.embedThumbnailNodeId&&e.srcUrl&&e.containingCanvasId&&e.containingCanvasId===t?(0,c.kc)().figjam_embeds_allowlist&&!(0,h.Cy)(e.srcUrl)?(console.error("Could not play embed; domain not on allow-list:",e.srcUrl),null):(0,i.jsx)(P,{isEmbedMaximized:r,nodeSelected:s,embedThumbnailNodeId:e.embedThumbnailNodeId,srcUrl:e.srcUrl}):null}),P=r.memo(function(e){let{embedThumbnailNodeId:t,nodeSelected:n,srcUrl:l,isEmbedMaximized:d}=e,c=r.useRef(null),m=r.useRef(null),[p,h]=r.useState(null),y=r.useRef(null),b=(0,_._X)({subscribeToUpdates_expensive:!0}),v=function(e,t){let[n,i]=r.useState(!1),[a,s]=r.useState(!1);return r.useEffect(()=>{!e&&a&&s(!1)},[e,a]),r.useEffect(()=>{function e(e){if(t.current){let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&i(!0)}}function r(e){if(t.current&&n){i(!1);let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&s(!0)}}return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",r),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",r)}},[n,t]),a||!n&&e}(n,m),E=(0,u.Xr)(C.n),w=(0,a.wA)(),k=s.hS({open:d,onClose:()=>E({type:"MINIMIZE"})}),T=(0,f.Wx)(p);return r.useEffect(()=>{let e=(0,x.EE)("active-embed",[t],e=>{if(!e.position){o.glU.setActiveEmbed("");return}y.current=e.position,L(m,b,y,T,d,v)}),n=e.currentNodePosition[t]?.position;return n?(y.current=n,L(m,b,y,T,d,v)):o.glU.setActiveEmbed(""),()=>{(0,x.lB)("active-embed")}},[t,d,v,b,T]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:d?"embed_overlay--maximizedIframePositioner--wYnKh":void 0,ref:m,children:(0,i.jsx)(D,{ref:c,srcUrl:l,autofocus:v,onMouseOver:()=>{o.h3O?.sendChatMessage("",""),w(g.Ho())},frameBorder:"0"},t+l)}),d&&(0,i.jsx)(O,{manager:k,modalTargetRef:h})]})});function O(e){let{manager:t,modalTargetRef:n}=e;return(0,i.jsxs)(s.bL,{manager:t,theme:{backdrop:"embed_overlay--embedModalBackdrop--gRyLG",contents:"embed_overlay--embedModal--BK9Em",root:"embed_overlay--embedModalRoot--6zLYr"},children:[(0,i.jsx)("div",{className:"embed_overlay--embedModalMenuBackground--e-qNx",children:(0,i.jsx)("div",{className:"embed_overlay--embedModalMenuContainer--DtONo",children:(0,i.jsxs)(T.W1,{testID:"embedMenu",children:[(0,i.jsx)(I.e,{inModal:!0}),(0,i.jsx)(S,{}),(0,i.jsx)(T.wv,{}),(0,i.jsx)(E.S,{inModal:!0})]})})}),(0,i.jsx)("div",{className:"embed_overlay--embedModalContentContainer--OT0bh",children:(0,i.jsx)("div",{ref:n,className:"embed_overlay--embedModalTarget--3sP2v"})})]})}let D=r.forwardRef(function(e,t){let[n,a]=r.useState(!1),s=r.useRef(null),{autofocus:o,extraClassName:l,srcUrl:c,...u}=e;return(0,i.jsxs)("div",{className:p()("embed_overlay--loadingIFrameContainer--qCZlg",l),children:[!n&&(0,i.jsx)("div",{className:"embed_overlay--iframeLoadingPlaceholder--luteu"}),(0,r.createElement)("iframe",{...u,key:c,ref:t||s,allowFullScreen:!0,className:p()("embed_overlay--iframe--e0WvB",{"embed_overlay--iframeHidden--YZiQe":!n},l),"data-embed-iframe":!0,onLoad:()=>{let e=t&&t.current||s.current;e&&o&&e.focus(),a(!0)},src:c,title:(0,d.t)("whiteboard.embeds.embed_overlay_iframe_title")})]})});function L(e,t,n,i,r,a){if(!e.current||!t||!n.current)return;let s=e.current,o=n.current;if(r){if(!i)return;s.style.position="fixed",s.style.height=`${i.height}px`,s.style.width=`${i.width}px`,s.style.pointerEvents="all",s.style.transform="unset",s.style.transformOrigin="unset"}else{let e=(0,_.Yb)(t,o);s.style.position="fixed",s.style.height=`${o.height}px`,s.style.width=`${o.width}px`,s.style.transform=`translate(${e.x+t.x}px, ${e.y+t.y}px) rotate(${o.angle}deg) scale(${t.zoomScale})`,s.style.transformOrigin="top left",a?s.style.pointerEvents="all":s.style.pointerEvents="none"}}(0,v.Ju)(P,"EmbedMaximizedModal")},488790:(e,t,n)=>{n.d(t,{U:()=>u});var i=n(105652),r=n(20002),a=n(692376),s=n(136393),o=n(772293),l=n(496849),d=n(748181);let c=(0,n(450255).Do)(()=>o.Y5.fromFullscreen);function u(e,t){let n=(0,r.wA)(),o=(0,d.f)(e),u=(0,l.g)();i.useEffect(()=>{t?.current||o||!u||a.glU?.setUsedPanAction(!1)},[u,o,t]),i.useEffect(()=>{if(!(o||t?.current))return c().on("panActionMessageForOnboarding",i),()=>{c().removeListener("panActionMessageForOnboarding",i)};function i(){n(s.b({[e]:!0}))}},[o,n,e,t])}},716890:(e,t,n)=>{n.d(t,{g:()=>u});var i=n(105652),r=n(20002),a=n(692376),s=n(136393),o=n(772293),l=n(496849),d=n(748181);let c=(0,n(450255).Do)(()=>o.Y5.fromFullscreen);function u(e,t){let n=(0,r.wA)(),o=(0,d.f)(e),u=(0,l.g)();i.useEffect(()=>{t?.current||o||!u||a.glU?.setUsedZoomAction(!1)},[u,o,t]),i.useEffect(()=>{if(!(o||t?.current))return c().on("zoomActionMessageForOnboarding",i),()=>{c().removeListener("zoomActionMessageForOnboarding",i)};function i(){n(s.b({[e]:!0}))}},[o,n,e,t])}},960807:(e,t,n)=>{n.d(t,{_:()=>T});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(445019),l=n(522568),d=n(102462),c=n(393463),u=n(719749),m=n(228703),p=n(7857),h=n(834300),f=n(27414),g=n(366536),x=n(783868),_=n(192704),y=n(368773),b=n(223487),v=n(276571),C=n(863596),E=n(610604),w=n(937639);function k(){return(0,C.o)(),(0,i.jsx)(i.Fragment,{})}function T(e){return(0,i.jsx)(p.u9,{label:"FullscreenLivegraphSubscriber",children:(0,i.jsx)(j,{...e})})}function j(e){let t=(0,v._6)(),n="fullscreen"===t.view?t.fileKey:null,p=(0,a.wA)(),T=(0,a.d4)(e=>e.fileByKey),j=(0,a.d4)(e=>e.userAnalyticsData),S=(0,a.d4)(e=>e.user),I=(0,b.q5)(),A=I?.canEdit,{orgId:N}=e,M=null!=n&&!!T[n]?.is_favorited,R=(0,u.bc)((0,E.jJU)({fileKey:n||""}),{enabled:!!n});r.useEffect(()=>{if("loaded"===R.status){let e=R.data.file?.developerRelatedLinks,t=e?.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(t)try{s.glU?.setDeveloperRelatedLinks(t)}catch{}}},[R]);let P=r.useRef(!1),O=(0,o.Xr)(x.Kc),D=(0,u.bc)(E.a8q,{fileKey:n||""},{enabled:!!n});r.useLayoutEffect(()=>{if("loaded"!==D.status)return;let e=D.data.figFileWorkshopMode;O(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(P.current=!0),p(g.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[D,p,O]);let L=r.useRef(null),F=r.useRef(!1),B=r.useRef(null),U=r.useRef(null),V=(0,u.bc)(E.ehp,{fileKey:n||""},{enabled:!!n});r.useLayoutEffect(()=>{if("loaded"!==V.status||V.errors.length>0&&null===V.data.file)return;let e=V.data.file;if(null===L.current){let t=(0,c.Ay)().editing_file;null!==e&&t&&e.key===t.key&&!!t.can_edit!==e.canEdit&&((0,l.sx)("open_file_inconsistent_permission",{file_key:e.key,lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit,user:d.D.getState().user?.id},{batchRequest:!0}),(0,m.Rh)("open_file.inconsistent_permissions",{lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit}),s.h3O?.reconnect(!1))}if((0,w.X_)({openFile:e,wasInWorkshop:P.current,previousCanEdit:L.current,wasInUnclaimedTryFile:F.current,previousCanView:U.current,previousFileKey:B.current?.key||null},p),null==e)return;U.current=e.canView,L.current=e.canEdit,P.current&&e.isTryFile&&(F.current=!0);let t=d.D.getState().selectedView;"fullscreen"===t.view&&t.fileKey===e?.key&&B.current!==e&&(p(f.UC({openFile:{...e,isFavorited:M},isLiveGraphSync:!0})),B.current=e)},[V,p,M]);let H=(0,_.Be)();return r.useLayoutEffect(()=>{let e=d.D.getState().selectedView;if(!H.loaded||"fullscreen"!==e.view)return;let{plugins:t,widgets:n,orgPlugins:i,orgWidgets:r}=H,a={...t,...i},s={...n,...r};p(h.g3(a)),p(h.zI(s))},[p,N,H]),(0,y.rB)(),A&&(0,C.n)(j,S?.email)?(0,i.jsx)(k,{}):(0,i.jsx)(i.Fragment,{})}},397043:(e,t,n)=>{n.d(t,{Q:()=>P,e:()=>M});var i=n(239976),r=n(105652),a=n(805242),s=n(20002),o=n(692376),l=n(798913),d=n(537303),c=n(7857),u=n(499735),m=n(27997),p=n(960210),h=n(450207),f=n(324880),g=n(765996),x=n(33433),_=n(669314),y=n(338630),b=n(103392),v=n(643444),C=n(577355),E=n(362844),w=n(910496),k=n(795867),T=n(620573),j=n(469543),S=n(105471),I=n(107811);let A="preferences-menu";class N extends u.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,C.jr)(e,C.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,x.A)(A)]}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.props.selectionToUpdate&&this.props.selectionToUpdate===o.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,g.k$)(e)||(0,g.gN)(e)||(0,g.id)(e)||!e.name||e.name!==A?(this.selectPreferencesMenu(),this.props.dispatch(h.ho({type:w.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(h.oB())}}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null,t=(0,i.jsx)("div",{className:`${f.Dm}`,children:(0,i.jsx)(P,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,allowCodegenOptions:this.props.selectedView.editorType===E.nT.Design,alwaysShowCheckMarkOffset:!0,appModel:this.props.appModel,"aria-labelledby":this.props["aria-labelledby"],controlledByID:this.props.controlledByID,dispatch:this.props.dispatch,id:this.props.id,isLimitedDevMode:this.props.isLimitedDevMode,lean:"right",menuItems:this.props.menuItems,onKeyDown:this.onKeyDown,recordingKey:"mainMenu",selectedView:this.props.selectedView,showPoint:!1,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0})})});return a.createPortal(t,document.body)}}function M(e){return(0,i.jsx)(c.u9,{label:"FullscreenMainMenu",children:(0,i.jsx)(R,{...e})})}function R(e){(0,_.n)();let t=(0,s.wA)(),n=(0,s.d4)(e=>e.mirror.appModel),r=(0,s.d4)(e=>e.selectedView),a=(0,s.d4)(e=>e.dropdownShown?.data?.selectionToUpdate),o=(0,s.d4)(e=>(0,T.$A)(e.selectedView)&&!(0,p.tn)(e)),l=(0,S.g)(),d=(0,b.d)({debugMenuItems:l});return(0,i.jsx)(N,{...e,dispatch:t,menuItems:d,appModel:n,selectedView:r,selectionToUpdate:a,isLimitedDevMode:o})}N.displayName="FullscreenMainMenu";class P extends r.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,t)=>{l.l7.user(`fullscreen-menu-${e.action??"non-action"}`,()=>{if(e.callback&&e.callback((0,g.Dz)(e),e.args,this.props.dispatch,t),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(m.n.set({message:e.loadingIndicatorString,callback:()=>{v.VU.get(n,e.source??"menu",e.args)(t)}})):v.VU.get(n,e.source??"menu",e.args)(t)}})},this.transformMenuItems=(0,d.xx)(e=>(0,I.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(h.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?(0,i.jsx)(y.fu,{name:k.e0.EDITOR_MENU,children:(0,i.jsx)(j.j,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.activatePathOnMount,allowCodegenOptions:this.props.allowCodegenOptions,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,"aria-labelledby":this.props["aria-labelledby"],dispatch:this.props.dispatch,id:this.props.id,items:e,lean:this.props.lean,minWidth:this.props.minWidth,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,recordingKey:this.props.recordingKey,showPoint:this.props.showPoint})}):null}}P.displayName="FullscreenMultilevelDropdown"},105471:(e,t,n)=>{n.d(t,{g:()=>ex});var i=n(105652),r=n(20002),a=n(336976);async function s(e){let t=JSON.parse(e),n=await Promise.all(Object.entries(t.assets).map(async([e,t])=>[e,{url:t.url,blob:t.blob?new Blob([await o(t.blob.base64Blob)],{type:t.blob.type}):null}]));return{root:t.root,documentTitle:t.documentTitle,documentRect:t.documentRect,viewportRect:t.viewportRect,devicePixelRatio:t.devicePixelRatio,assets:new Map(n)}}async function o(e){let t=await fetch(e);return await t.arrayBuffer()}var l=n(854225),d=n(466082),c=n(270450),u=n(522568),m=n(393463),p=n(543595),h=n(239976),f=n(445019),g=n(875253),x=n(106701),_=n(938686),y=n(536378),b=n(747079),v=n(890305);let C="code_connect_debug_modal--controlGroup--Q-Q8I",E="code_connect_debug_modal--label--D2znq",w=(0,b.Ju)(function(){let e=(0,r.wA)(),t=i.useCallback(()=>{e(y.AS())},[e]),[n,a]=(0,f.fp)(x.cH),[s,o]=i.useState(!1),[l,d]=(0,f.fp)(_.Oq);return(0,h.jsx)(v.Ao,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new g.Mi(0,0),onClose:t,children:(0,h.jsxs)("div",{className:"code_connect_debug_modal--container--cbWFH",children:[(0,h.jsxs)("div",{className:C,children:[(0,h.jsx)("input",{type:"checkbox",onChange:e=>a(e.target.checked),checked:n}),(0,h.jsx)("span",{className:E,children:"Debugger break in template execution"})]}),(0,h.jsxs)("div",{className:C,children:[(0,h.jsx)("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:s}),(0,h.jsx)("span",{className:E,children:"Log Code Connect document"})]}),(0,h.jsxs)("div",{className:C,children:[(0,h.jsx)("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:l}),(0,h.jsx)("span",{className:E,children:"Log JS before execution"})]})]})})},"CodeConnectDebugModal");var k=n(381193),T=n(421914),j=n(236410),S=n(213214);function I(e){let[t,n]=i.useState(e.initialValue),a=i.useCallback(e=>{(0,T.gl)(e)||n(e.valueOf())},[n]),s=(0,r.wA)();return i.useEffect(()=>{(0,k.uw)({[e.configPropertyName]:t})},[t,e.configPropertyName]),(0,h.jsx)(S.Ht,{bigNudgeAmount:e.bigNudgeAmount,className:"modal--input--aVUHJ","data-tooltip":e.propertyDescription,"data-tooltip-type":j.Ib.TEXT,dispatch:s,max:e.maxVal,min:e.minVal,onValueChange:a,smallNudgeAmount:e.smallNudgeAmount,value:t,children:(0,h.jsx)("span",{className:"modal--label--PHjpg",children:e.displayName})})}let A=(0,b.Ju)(function(){let e=(0,r.wA)(),t=i.useCallback(()=>{e(y.AS())},[e]);return(0,h.jsx)(v.Ao,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new g.Mi(0,0),onClose:t,children:(0,h.jsxs)("div",{className:"modal--container--kHp62",onMouseDown:e=>{e.stopPropagation()},children:[(0,h.jsx)(I,{configPropertyName:"minZoomPercentage",initialValue:k.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),(0,h.jsx)(I,{configPropertyName:"zoomScaleOverlap",initialValue:k.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),(0,h.jsx)(I,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:k.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),(0,h.jsx)(I,{configPropertyName:"rebuildClustersZoomDelay",initialValue:k.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})]})})},"CommentDebugSettingsModal");var N=n(772293),M=n(419312),R=n(223487),P=n(920675),O=n(482621),D=n(159861),L=n(337812),F=n(423434),B=n(541105);class U extends Error{}async function V({dispatch:e,fileKey:t,log:n=()=>{}}){try{n("Generating file version...");let i=(await F.m(t,"Exported to ML account","",e,!0))?.id;if(void 0===i)throw Error("undefined versionId");n(`Exporting file version ${i}...`);let{meta:{run_key:r}}=(await L.Ay.post(`/api/ml/export/file_version/${i}`)).data;n(`Waiting for run ${r}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:t,s3_uri:i}}=(await (0,L.Ay)({url:`/api/ml/export/status/${encodeURIComponent(r)}`})).data;if(t){n(`Export manifest is ready at ${i}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof U)return;n("Failed!"),n(`${e}`)}}let H=(0,b.Ju)(function(){let e=(0,r.wA)(),t=i.useCallback(()=>{e(y.AS())},[e]),[n,a]=i.useState([]),s=(0,R.tS)();return i.useEffect(()=>{let n=!1,i=e=>{if(n)throw new U;a(t=>t.concat([e]))};return null===s?i("No open file"):V({dispatch:e,fileKey:s,log:i}),()=>{n=!0,t()}},[t,e,s]),(0,h.jsx)(B.OJ,{title:"ML Export",headerSize:"large",minWidth:300,onClose:t,children:(0,h.jsx)("div",{className:"ml_export_modal--container--XdO9L",children:n.join("\n")})})},"MLExportModal");var z=n(846779),G=n(245814),K=n(655793),W=n(517478),q=n(942356),X=n(312884),Y=n(766274),J=n(210823),Z=n(816505),Q=n(605985),$=n(538349),ee=n(898301),et=n(463838),en=n(947700),ei=n(299823);let er=(0,Y.vh)(),ea=(0,b.Ju)(function(e){let t=G.hS({open:e.open,onClose:e.onClose}),n=(0,R.q5)().key,[r,a]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(""),[f,g]=(0,i.useState)(""),[x,_]=(0,i.useState)(""),[y,b]=(0,$.IT)((0,en.TT)({fileKey:n})),v=(0,$.gY)(en.rY),C=(0,en.lA)(n),E=y.data?.connectedProject,w="loaded"!==y.status,k=C.authenticated,T=!!C.isLoading,[j,S]=(0,i.useState)(!1),I=(0,Z.dq)(),A=(0,ee.ol)(),N=(0,Q.TA)()||"";(0,i.useEffect)(()=>{w||T?S(!0):S(!1)},[w,T]);let M=async()=>{try{S(!0),a(null),await et.R.deauthorizeFile({fileKey:n}),b.refetch()}catch(e){a(`Failed to revoke authorization: ${e}`)}finally{S(!1)}},P=async()=>{try{S(!0),a(null);let e=ei.Yr;I?e+=`?org_id=${encodeURIComponent(I)}&user_id=${encodeURIComponent(N)}`:A?.id&&(e+=`?team_id=${encodeURIComponent(A.id)}&user_id=${encodeURIComponent(N)}`);let t=(0,X.FJ)(e,"_blank");await new Promise(e=>{window.addEventListener("message",n=>{n.data&&"child-redirect-complete"===n.data.type&&(t?.close(),e(!0))})})}catch(e){a("Failed to authorize oauth app")}finally{S(!1)}};(0,i.useEffect)(()=>{(async()=>{if(!T&&k&&!w&&k&&!E)try{p("Loading projects..."),S(!0);let e=await er.validate(async({xr:e})=>await e.get(`/api/integrations/supabase/${n}/existing_projects`));d(e.data.meta||[])}catch(e){a(`Failed to fetch projects: ${e}`)}finally{S(!1),p("")}})()},[E,w,k,T,n]);let O=async()=>{if(!c){a("Please select a project first");return}try{S(!0),a(null);let e=l.find(e=>e.id===c);if(!e){a("Selected project not found");return}await L.Ay.post(`/api/integrations/supabase/${n}/connect`,Y.td.toAPIParameters({supabase_project_id:e.id,supabase_org_id:e.organization_id})),await b.refetch()}catch(e){a(`Failed to connect to project: ${e}`)}finally{S(!1)}},D=async()=>{try{S(!0),a(null),await v({fileKey:n})}catch(e){a(`Failed to disconnect from project: ${e}`)}finally{S(!1)}},F=async()=>{try{S(!0),a(null),o(null);let e=(0,z.$d)(),t={};for(let[n,i]of Object.entries(e))if(n.includes("/supabase/functions/server/")){let e=n.split("/").pop(),r=i.sourceCode;e&&r&&(t[e]=r)}if(!t["index.tsx"]){a("/supabase/functions/server/index.tsx not found");return}await L.Ay.post(`/api/integrations/supabase/${n}/edge_functions/make-server/deploy`,{files:t}),o("Deployed function - it may take a few seconds to spin up")}catch(e){a(`Failed to publish edge function: ${e}`)}finally{S(!1)}},B=async()=>{try{S(!0),a(null),o(null),await L.Ay.post(`/api/integrations/supabase/${n}/project/pause`),o("Paused project - you may need to refresh status to see updates")}catch(e){a(`Failed to pause project: ${e}`)}finally{S(!1)}},U=async()=>{try{S(!0),a(null),o(null),await L.Ay.post(`/api/integrations/supabase/${n}/project/restore`),o("Restored project - you may need to refresh status to see updates")}catch(e){a(`Failed to restore project: ${e}`)}finally{S(!1)}},V=async()=>{try{if(S(!0),a(null),o(null),!f.trim()){a("Secret name cannot be empty");return}if(!x.trim()){a("Secret value cannot be empty");return}await L.Ay.post(`/api/integrations/supabase/${n}/secrets`,Y.td.toAPIParameters({secret_name:f,secret_value:x})),g(""),_(""),o("Secret added")}catch(e){a(`Failed to add secret: ${e}`)}finally{S(!1)}};return(0,h.jsx)(K.bL,{manager:t,width:"lg",children:(0,h.jsxs)(W.vo,{children:[(0,h.jsx)(W.Y9,{children:(0,h.jsx)(W.hE,{children:"Supabase"})}),(0,h.jsx)(W.nB,{children:(0,h.jsxs)("div",{style:{padding:"16px"},children:[r&&(0,h.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(235, 87, 87, 0.1)",border:"1px solid rgba(235, 87, 87, 0.3)",borderRadius:"6px"},children:(0,h.jsx)(J.E,{color:"danger",children:r})}),s&&(0,h.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(39, 174, 96, 0.1)",border:"1px solid rgba(39, 174, 96, 0.3)",borderRadius:"6px"},children:(0,h.jsx)(J.E,{color:"success",children:s})}),k?(0,h.jsxs)(h.Fragment,{children:[E?(0,h.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,h.jsxs)("div",{style:{padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",marginBottom:"12px"},children:[(0,h.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:(0,h.jsx)(J.E,{children:`Connected: ${E.name}`})}),(0,h.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:(0,h.jsx)(J.E,{children:`ID: ${E.id} \u2022 Status: ${E.status}`})})]}),"ACTIVE_HEALTHY"===E.status&&(0,h.jsxs)("div",{style:{marginTop:"12px",marginBottom:"12px",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"4px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)"},children:[(0,h.jsx)("div",{style:{fontSize:"13px",marginBottom:"12px"},children:(0,h.jsx)(J.E,{children:"Add Secret"})}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{marginBottom:"4px",fontSize:"12px",color:"rgba(0, 0, 0, 0.6)"},children:(0,h.jsx)(J.E,{children:"Secret Name"})}),(0,h.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),placeholder:"Enter secret name",style:{width:"95%",padding:"6px 8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontSize:"13px",outline:"none",transition:"border-color 0.2s ease"}})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{marginBottom:"4px",fontSize:"12px",color:"rgba(0, 0, 0, 0.6)"},children:(0,h.jsx)(J.E,{children:"Secret Value"})}),(0,h.jsx)("input",{type:"password",value:x,onChange:e=>_(e.target.value),placeholder:"Enter secret value",style:{width:"95%",padding:"6px 8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontSize:"13px",outline:"none",transition:"border-color 0.2s ease"}})]}),(0,h.jsxs)("div",{style:{alignSelf:"flex-start",display:"flex",gap:"10px"},children:[(0,h.jsx)(q.$n,{variant:"secondary",onClick:V,disabled:j,children:j?"...":"Add secret"}),(0,h.jsx)(q.$n,{variant:"secondary",onClick:()=>(0,X.FJ)(`https://supabase.com/dashboard/project/${E.id}/functions/secrets`),disabled:j,children:j?"...":"View secrets \u2197\uFE0F"})]})]})]})]}):(0,h.jsx)("div",{style:{marginBottom:"16px"},children:m.length>0?(0,h.jsx)(J.E,{children:m}):0===l.length?(0,h.jsx)(J.E,{children:"No projects available. Create a project in your Supabase dashboard first."}):(0,h.jsxs)("div",{style:{marginBottom:16},children:[(0,h.jsx)("div",{style:{marginBottom:8,fontWeight:"bold"},children:(0,h.jsx)(J.E,{children:"Select a project to connect:"})}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"200px",overflowY:"auto",padding:"8px",border:"1px solid #e0e0e0",borderRadius:"4px"},children:l.map(e=>(0,h.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"4px 0"},children:[(0,h.jsx)("input",{type:"radio",name:"project",value:e.id,checked:c===e.id,onChange:()=>u(e.id),style:{marginRight:8}}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{fontWeight:"bold"},children:(0,h.jsx)(J.E,{children:e.name})}),(0,h.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:(0,h.jsx)(J.E,{children:`ID: ${e.id} \u2022 Status: ${e.status}`})})]})]},e.id))})]})}),(0,h.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"16px"},children:[!E&&(0,h.jsx)(q.$n,{variant:"primary",onClick:O,disabled:j||!c,children:j?"...":"Connect to selected project"}),(0,h.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginTop:E?"8px":"0"},children:[E?.status==="ACTIVE_HEALTHY"&&(0,h.jsx)(q.$n,{variant:"primary",onClick:F,disabled:j,children:j?"...":"Deploy backend"}),E&&(0,h.jsx)(q.$n,{variant:"secondary",onClick:()=>(0,X.FJ)(`https://supabase.com/dashboard/project/${E.id}/functions/make-server-${n.substring(0,5)}/logs`),disabled:j,children:j?"...":"Server logs \u2197\uFE0F"}),E&&(0,h.jsx)(q.$n,{variant:"secondary",onClick:b.refetch,disabled:j,children:j?"...":"Refresh status"}),E?.status==="ACTIVE_HEALTHY"&&(0,h.jsx)(q.$n,{variant:"secondary",onClick:B,disabled:j,children:j?"...":"Pause"}),E?.status==="INACTIVE"&&(0,h.jsx)(q.$n,{variant:"secondary",onClick:U,disabled:j,children:j?"...":"Restore"}),E&&(0,h.jsx)(q.$n,{variant:"secondary",onClick:D,disabled:j,children:j?"...":"Disconnect"})]}),k&&(0,h.jsx)("div",{style:{width:"100%",marginTop:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"12px"},children:(0,h.jsx)(q.$n,{variant:"destructive",onClick:M,disabled:j,children:j?"...":"Revoke Supabase authorization"})})]})]}):(0,h.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"16px 0"},children:(0,h.jsx)(q.$n,{variant:"primary",onClick:P,disabled:j,children:j?"...":"Authorize with Supabase"})})]})})]})})},"SupabaseDebugModal");var es=n(248317),eo=n(288350),el=n(431688),ed=n(750665),ec=n(680912);let eu=(0,b.Ju)(function(e){let t=G.hS({open:e.open,onClose:e.onClose}),[n,r]=(0,i.useState)(!1),[a,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(null),[u,m]=(0,i.useState)(!1),p=f.zl.get(R.ze),g=p?(0,el.F)(p):"",x=async()=>{try{r(!0),s(null),l(null),c(null);let e=await ed.Ay.foundry.sandbox({forceProvision:u,originHost:"example.com"},(0,ec.Ay)());c(e),l("Successfully fetched sandbox")}catch(e){s(`Error listing nimbus sandboxes: ${e instanceof Error?e.message:String(e)}`)}finally{r(!1)}};return(0,h.jsx)(K.bL,{manager:t,width:"lg",children:(0,h.jsxs)(W.vo,{children:[(0,h.jsx)(W.Y9,{children:(0,h.jsx)(W.hE,{children:"Foundry"})}),(0,h.jsx)(W.nB,{children:(0,h.jsxs)("div",{style:{padding:"16px"},children:[a&&(0,h.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(235, 87, 87, 0.1)",border:"1px solid rgba(235, 87, 87, 0.3)",borderRadius:"6px"},children:(0,h.jsx)(J.E,{color:"danger",children:a})}),o&&(0,h.jsx)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(39, 174, 96, 0.1)",border:"1px solid rgba(39, 174, 96, 0.3)",borderRadius:"6px"},children:(0,h.jsx)(J.E,{color:"success",children:o})}),(0,h.jsxs)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(13, 153, 255, 0.1)",border:"1px solid rgba(13, 153, 255, 0.3)",borderRadius:"6px"},children:[(0,h.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px",fontSize:"14px"},children:(0,h.jsx)(J.E,{children:"md5(file_key):"})}),(0,h.jsx)("div",{style:{fontFamily:"monospace",fontSize:"12px",color:"#666"},children:(0,h.jsx)(J.E,{children:g||"No file key available"})})]}),(0,h.jsxs)("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"rgba(75, 0, 130, 0.05)",border:"1px solid rgba(75, 0, 130, 0.2)",borderRadius:"8px"},children:[(0,h.jsx)("div",{style:{fontWeight:"bold",marginBottom:"16px",fontSize:"16px"},children:(0,h.jsx)(J.E,{children:"Nimbus Foundry"})}),(0,h.jsx)("div",{style:{marginBottom:"16px"},children:(0,h.jsx)(es.S,{checked:u,onChange:e=>m(e),label:(0,h.jsx)(eo.J,{children:"Force provision new sandbox"})})}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},children:(0,h.jsx)("div",{style:{width:320},children:(0,h.jsx)(q.$n,{variant:"secondary",onClick:x,disabled:n,children:n?"Loading...":"Get Nimbus Sandbox"})})})]}),d&&(0,h.jsxs)("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px"},children:[(0,h.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:"API Response:"}),d.preview_url&&(0,h.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,h.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Preview URL:"}),(0,h.jsx)("a",{href:d.preview_url,target:"_blank",rel:"noopener noreferrer",style:{color:"#0d99ff",textDecoration:"underline"},children:d.preview_url})]}),(0,h.jsx)("pre",{style:{fontSize:"12px",overflow:"auto",margin:0},children:JSON.stringify(d,null,2)})]})]})})]})})},"FoundryDebugModal");function em(e=8){let t="bcdfghjklmnpqrstvwxyz",n="aeiou",i="";for(let r=0;r<e;r++)r%2==0?i+=t.charAt(Math.floor(Math.random()*t.length)):i+=n.charAt(Math.floor(Math.random()*n.length));return i}let ep="Add to the array: ${value.letter}",eh='Add to the array: "index: ${index()}, randomNumber: ${randomNumber()}, randomString: ${randomString()}"',ef=JSON.stringify((()=>{let e=[];for(let t=68;t<=90;t++)e.push({letter:String.fromCharCode(t)});return e})(),null,2),eg=(0,b.Ju)(function(e){let t=G.hS({open:e.open,onClose:e.onClose}),[n,r]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)("Create an array with values A, B, C"),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(ep),[p,f]=(0,i.useState)(ef),[g,x]=(0,i.useState)(5),[_,y]=(0,i.useState)(0),[b,v]=(0,i.useState)(""),[C,E]=(0,i.useState)("stop"),[w,k]=(0,i.useState)("continue"),[T,j]=(0,i.useState)(!1),[S,I]=(0,i.useState)(!1),A=(0,i.useRef)(null),N=(0,i.useRef)(!1);(0,i.useEffect)(()=>{N.current=a},[a]),(0,i.useEffect)(()=>{d?u===eh&&m(ep):u===ep&&m(eh)},[d,u]);let M=(0,i.useMemo)(()=>{if(!d)return null;try{let e=JSON.parse(p);return Array.isArray(e)?e:[]}catch{return[]}},[p,d]),R=(0,i.useMemo)(()=>d?M?.length??0:1e3,[d,M]),P=(0,i.useCallback)(e=>{let t=document.querySelector('[data-testid="code-chat-chat-box"]'),n=document.querySelector('[data-testid="code-chat-send-button"]');if(t&&n){let i=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value")?.set;i?.call(t,e);let r=new Event("input",{bubbles:!0});return t.dispatchEvent(r),setTimeout(()=>{n.disabled||n.click()},100),!0}return!1},[]),O=(0,i.useCallback)(()=>null!==document.querySelector('[data-testid="code-chat-stop-button"]'),[]),D=(0,i.useCallback)(()=>null!==document.querySelector('[data-testid="code-chat-error-message"]'),[]),L=(0,i.useCallback)(()=>Array.from(document.querySelectorAll("button")).some(e=>e.textContent?.includes("Fix these errors")||e.textContent?.includes("Fix these warnings")),[]),F=(0,i.useCallback)(()=>{let e=Array.from(document.querySelectorAll("button")).find(e=>e.textContent?.includes("Fix these errors")||e.textContent?.includes("Fix these warnings"));return!!e&&(e.click(),!0)},[]),B=(0,i.useCallback)(()=>new Promise(e=>{let t=setInterval(()=>{if(D()){clearInterval(t),e("chat-error");return}if(L()){clearInterval(t),e("console-error");return}O()||(clearInterval(t),e("completed"))},500)}),[O,D,L]),U=(0,i.useCallback)(async(e,t)=>{if("stop"===C)throw Error(`Chat error occurred on ${t}`);if("retry"===C){if(v(`Chat error on ${t}, retrying in 5 seconds...`),await new Promise(e=>setTimeout(e,5e3)),!P(e))throw Error(`Failed to retry ${t}`);let n=await B();if("completed"!==n)throw Error(`Chat error persisted after retry on ${t}`);return n}return"chat-error"},[C,P,B]),V=(0,i.useCallback)(async e=>{if("stop"===w)throw Error(`Console error occurred on ${e}`);if("fix"===w){if(v(`Console error on ${e}, clicking "Fix these errors"...`),!F())throw Error('Failed to click "Fix these errors" button');await B()}},[w,F,B]),H=(0,i.useCallback)(async()=>{r(!0),s(!0),N.current=!0,y(0),v("");try{if(T)v("Skipping initial prompt...");else{if(v("Sending initial prompt..."),!P(o))throw Error("Failed to find chat input");let e=await B();"chat-error"===e&&(e=await U(o,"initial prompt")),"console-error"===e&&await V("initial prompt")}let e=d?Math.min(g,M?.length??0):g;if(0===e)throw Error("No messages to send. Please set number of messages greater than 0.");for(let t=0;t<e;t++){if(!N.current){v("Stopped by user");break}y(t+1);let n=d&&M?M[t]:null,i=function(e,t,n){return e.replace(/\$\{(.*?)\}/g,(e,i)=>{let r=i.trim();if("index()"===r)return String(n);if("randomNumber()"===r)return String(Math.floor(1e3*Math.random()));if(r.startsWith("randomString(")){let e=r.match(/randomString\((\d+)\)/);return em(e?parseInt(e[1],10):8)}if("randomString()"===r)return em();if(r.startsWith("value.")&&t){let e=r.substring(6);return void 0!==t[e]?String(t[e]):""}return e})}(u,n,t);if(v(`Sending message ${t+1} of ${e}...`),await new Promise(e=>setTimeout(e,1e3)),!P(i))throw Error("Failed to send message");let r=await B();if("chat-error"===r&&(r=await U(i,`message ${t+1}`),"chat-error"===r)){v(`Skipping message ${t+1} due to chat error...`);continue}"console-error"===r&&await V(`message ${t+1}`)}v(N.current?"All messages sent successfully!":"Automation stopped")}catch(e){v(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}finally{r(!1),s(!1)}},[o,u,g,M,P,B,U,V,T,d]),z=()=>{N.current=!1,s(!1),v("Stopping..."),null!==A.current&&(clearInterval(A.current),A.current=null)};return(0,i.useEffect)(()=>()=>{N.current&&!S&&(N.current=!1)},[S]),(0,h.jsx)(K.bL,{manager:t,width:"lg",children:(0,h.jsxs)(W.vo,{children:[(0,h.jsx)(W.Y9,{children:(0,h.jsx)(W.hE,{children:"Generate Make Chat History"})}),(0,h.jsx)(W.nB,{children:(0,h.jsxs)("div",{style:{padding:"16px"},children:[(0,h.jsx)("div",{style:{marginBottom:"20px"},children:(0,h.jsx)(J.E,{children:"Automatically send messages to the LLM to create a file with chat history. When enabled, this tool will send the next message when the previous one completes."})}),(0,h.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsxs)("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,h.jsx)(J.E,{children:"Initial Prompt"}),(0,h.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[(0,h.jsx)("input",{type:"checkbox",checked:T,onChange:e=>j(e.target.checked),style:{cursor:"pointer"}}),(0,h.jsx)(J.E,{children:"Skip initial prompt"})]})]}),(0,h.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),placeholder:"Enter initial prompt",rows:2,disabled:T,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontFamily:"inherit",resize:"vertical",opacity:T?.5:1,cursor:T?"not-allowed":"text"}})]}),(0,h.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsxs)("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,h.jsx)(J.E,{children:"Repeat Prompt Template"}),(0,h.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[(0,h.jsx)("input",{type:"checkbox",checked:d,onChange:e=>c(e.target.checked),style:{cursor:"pointer"}}),(0,h.jsx)(J.E,{children:"Use values array"})]})]}),(0,h.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:d?"Enter repeat prompt template (use ${value.field} syntax)":"Enter repeat prompt template (use ${index()}, ${randomNumber()}, ${randomString()} functions)",rows:2,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}),(0,h.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,h.jsx)(J.E,{children:d?"Use ${value.fieldName} to reference values from the JSON array":"Use ${index()}, ${randomNumber()}, or ${randomString()} / ${randomString(length)} functions"})})]}),d&&(0,h.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsx)("div",{style:{marginBottom:"8px"},children:(0,h.jsx)(J.E,{children:"Values (JSON Array)"})}),(0,h.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),placeholder:"Enter JSON array of values",rows:10,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}),(0,h.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,h.jsx)(J.E,{children:M&&M.length>0?`Valid JSON array with ${M.length} items`:"Invalid JSON array"})})]}),(0,h.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsx)("div",{style:{marginBottom:"8px"},children:(0,h.jsx)(J.E,{children:"Number of Messages"})}),(0,h.jsx)("input",{type:"number",value:g,onChange:e=>x(Math.min(R,Math.max(1,+e.target.value))),placeholder:"Number of messages",min:"1",max:R,style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px"}}),(0,h.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,h.jsx)(J.E,{children:d?`Maximum: ${R} (based on values array length)`:`Maximum: ${R}`})})]}),(0,h.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsx)("div",{style:{marginBottom:"8px"},children:(0,h.jsx)(J.E,{children:"On Chat Error"})}),(0,h.jsxs)("select",{value:C,onChange:e=>E(e.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white"},children:[(0,h.jsx)("option",{value:"stop",children:"Stop automation"}),(0,h.jsx)("option",{value:"continue",children:"Skip and continue to next message"}),(0,h.jsx)("option",{value:"retry",children:"Retry message after 5 seconds"})]}),(0,h.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,h.jsx)(J.E,{children:"What to do when LLM returns an error (network, rate limit, etc.)"})})]}),(0,h.jsxs)("div",{style:{marginBottom:"20px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsx)("div",{style:{marginBottom:"8px"},children:(0,h.jsx)(J.E,{children:"On Console Error"})}),(0,h.jsxs)("select",{value:w,onChange:e=>k(e.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white"},children:[(0,h.jsx)("option",{value:"stop",children:"Stop automation"}),(0,h.jsx)("option",{value:"continue",children:"Ignore and continue sending messages"}),(0,h.jsx)("option",{value:"fix",children:'Click "Fix these errors" button'})]}),(0,h.jsx)("div",{style:{marginTop:"4px",color:"#666"},children:(0,h.jsx)(J.E,{children:"What to do when runtime/compilation errors appear in console"})})]}),(0,h.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:"6px"},children:[(0,h.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,h.jsx)("input",{type:"checkbox",checked:S,onChange:e=>I(e.target.checked),style:{cursor:"pointer"}}),(0,h.jsx)(J.E,{children:"Continue generation after closing modal"})]}),(0,h.jsx)("div",{style:{marginTop:"4px",color:"#666",marginLeft:"28px"},children:(0,h.jsx)(J.E,{children:"When unchecked, closing the modal will stop the automation. When checked, generation will continue in the background."})})]}),(0,h.jsxs)("div",{style:{display:"flex",gap:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"16px"},children:[a?(0,h.jsx)(q.$n,{variant:"destructive",onClick:z,disabled:n,children:n?"...":"Stop Generation"}):(0,h.jsx)(q.$n,{variant:"primary",onClick:()=>{H()},disabled:n||d&&(!M||0===M.length),children:n?"...":"Start Generation"}),(0,h.jsx)(q.$n,{variant:"secondary",onClick:()=>{a&&!S&&z(),e.onClose()},children:"Cancel"})]}),(a||b)&&(0,h.jsx)("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:a?"rgba(39, 174, 96, 0.1)":b.startsWith("Error")?"rgba(235, 87, 87, 0.1)":"rgba(0, 0, 0, 0.05)",border:a?"1px solid rgba(39, 174, 96, 0.3)":b.startsWith("Error")?"1px solid rgba(235, 87, 87, 0.3)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px"},children:a?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(J.E,{color:"success",children:"Auto-generation in progress"}),(0,h.jsx)("div",{style:{marginTop:"8px"},children:(0,h.jsxs)(J.E,{children:["Progress: ",_," / ",g," messages sent"]})}),b&&(0,h.jsx)("div",{style:{marginTop:"4px"},children:(0,h.jsx)(J.E,{children:b})})]}):(0,h.jsx)(J.E,{color:b.startsWith("Error")?"danger":void 0,children:b})})]})})]})})},"GenerateMakeChatHistoryModal"),ex=()=>{let e=(0,r.wA)(),t=(0,R.Cq)({useSinatraType:!0});return(0,i.useMemo)(()=>{let i=[{name:"toggle-comments-debug-settings",callback:()=>{e((0,y.YK)({type:A,data:{}}))}},{name:"toggle-comments-debug-disable-sidebar",callback:()=>{(0,k.uw)(e=>({disableSidebar:!e.disableSidebar}))}},{name:"toggle-code-connect-debug-tools",callback:()=>{e((0,y.YK)({type:w,data:{}}))}}];return window.INITIAL_OPTIONS?.cluster_name==="local"&&i.push({name:"debug-ml-export",callback:()=>{e((0,y.YK)({type:H,data:{}}))}}),(0,c.kc)().bake_bulk_export_guidelines&&t?.editor_type===P._Y.FIGMAKE&&i.push({name:"figmake-export-code-library-guidelines",callback:async()=>{let{exportCodeLibraryGuidelines:e}=await Promise.resolve().then(n.bind(n,130771));e()}}),(0,c.kc)().make_kits_debug_info&&t?.editor_type===P._Y.FIGMAKE&&i.push({name:"make-kits-export-library-css",callback:async()=>{let{exportLibraryCssForMakeKits:e}=await Promise.resolve().then(n.bind(n,130771));e()}}),(0,c.kc)().bake_sb&&t?.editor_type===P._Y.FIGMAKE&&(ea&&i.push({name:"supabase-menu",callback:()=>{N.Y5.dispatch((0,y.to)({type:ea,data:{},showModalsBeneath:!0}))}}),eu&&i.push({name:"foundry-menu",callback:()=>{eu&&N.Y5.dispatch((0,y.to)({type:eu,data:{},showModalsBeneath:!0}))}})),t?.editor_type===P._Y.FIGMAKE&&i.push({name:"generate-make-chat-history",callback:()=>{N.Y5.dispatch((0,y.to)({type:eg,data:{},showModalsBeneath:!0}))}}),(0,m.b5)()&&t?.editor_type===P._Y.DESIGN&&(i.push({name:"toggle-tooltips-plus",callback:()=>{(0,p.YQ)({id:D.v})}}),i.push({name:"toggle-visual-asset-tooltips",callback:()=>{(0,p.YQ)({id:O.io})}})),i.push({name:"debug-paste-h2d-document",callback:async()=>{let e=await navigator.clipboard.readText(),n='{"type":"h2d-document","document":';if(!e.startsWith(n))return;let i=await s(e.substring(n.length,e.length-1));await (0,a.N5)(i,{decodeImage:M.UD,scene:(0,d.UN)(),tracking:l.HzA.TRACK,trackDefinedEvent:u.az.trackDefinedEvent},{attachBuildDataToNodes:{enabled:!!(0,c.kc)().bake_m2d_roundtrip,fileKey:t?.key}})}}),i},[e,t?.editor_type,t?.key])}},840094:(e,t,n)=>{n.d(t,{c:()=>ns});var i=n(239976);n(625859);var r=n(105652),a=n(20002),s=n(362602),o=n(687994),l=n(692376),d=n(847923),c=n(127446),u=n(119737),m=n(586572),p=n(700162),h=n(270450),f=n(184743),g=n(29161);let x=new Set(["-","="]),_=new Set(["-","=","f","o","p","r","s"]);function y(e){if(!_.has(e.key))return;let t=g.Ay.mac?f.xH.META:f.xH.CONTROL;(0,f.vN)(e,t)?e.target instanceof Element&&e.target.matches(".cm-content")||e.preventDefault():x.has(e.key)&&(t|=f.xH.SHIFT,(0,f.vN)(e,t)&&e.preventDefault())}var b=n(535209),v=n(348149),C=n(122313),E=n(806130),w=n(960210),k=n(481200),T=n(27414),j=n(805235),S=n(636882),I=n(763985),A=n(338630),N=n(911900),M=n(270351),R=n(522568),P=n(562418),O=n(854526),D=n(526575),L=n(449340),F=n(956069),B=n(123973),U=n(195176);n(537136);var V=n(494875),H=n(60021),z=n(732838),G=n(621994),K=n(205776),W=n(192704),q=n(704334),X=n(284605);let Y=(0,H.s)((e,t)=>{z.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var J=n(456622),Z=n(591791),Q=n(223487),$=n(816505),ee=n(605985),et=n(640753),en=n(390511),ei=n(379141),er=n(625288),ea=n(888903),es=n(228455),eo=n(136393),el=n(772293),ed=n(364073),ec=n(692962);let eu="keyboard-layout-preference",em=(e,t,n)=>{t&&e(es.FU({tab:t})),n||el.Y5.triggerAction("toggle-keyboard-shortcuts")},ep=(e,t,n,i)=>{e(eo.b({keyboard_manual_supported_bell:!0})),e(ea.F.enqueue({message:(0,ei.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,ei.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>em(e,"layout",i)},type:eu,onDismiss:()=>{e(eo.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,er.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},eh=(e,t,n)=>{e(eo.b({keyboard_generic_supported_first_bell:!0})),e(ea.F.enqueue({message:(0,ei.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,ei.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{em(e,"layout",n),(0,er.rd)({layout:t})}},type:eu,onDismiss:()=>{}})),(0,er.CZ)({layout:en.aT.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function ef(e,t){if(!z.eD)return null;let n=await z.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let i=(0,ec.pB)(n),r=(0,er.v7)();return i===r||e(i,r,n,null!=t),n}async function eg(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let i=await n.getLayoutMap();if(function(e,t){for(let[n,i]of e)if(t?.get(n)!==i)return!1;return!0}(i,t))return t;let{layoutJSON:r,detectedLayoutsWeb:a}=(0,ed.$$)(i),s=(0,ed.ZN)({layoutJSON:r,detectedLayouts:a,desktopLayout:null}),o=(0,er.v7)();return s===o||e(s,o,JSON.stringify(r),null!=t),i}var ex=n(152140),e_=n(83792),ey=n(908756),eb=n(525683),ev=n(994047),eC=n(995586),eE=n(863672),ew=n(600289),ek=n(538349),eT=n(231305),ej=n(884045),eS=n(194467),eI=n(420196),eA=n(362844),eN=n(795867),eM=n(304478),eR=n(445019),eP=n(457636),eO=n.n(eP),eD=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(eD||{}),eL=n(322519);let eF=(0,eR.eU)(eD.NOT_INITIALIZED),eB=(0,eL.bt)(e=>({state:e,fileKey:e.openFile?.key})),eU=[eD.ACTIVE_AFTER_IDLE,eD.ACTIVE_FIRST_TIME],eV=(0,eR.eU)(null,(e,t,n)=>{let{state:i,fileKey:r}=e(eB),a=e(eF);if((a&&eU.includes(a)?"start":"end")!=(n&&eU.includes(n)?"start":"end")){let e="";switch(n){case eD.ACTIVE_AFTER_IDLE:case eD.ACTIVE_FIRST_TIME:e="active";break;case eD.IDLE_DUE_TO_INACTIVITY:case eD.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,D.ds)("active_time_spent_event",r,i,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(eF,n)}),eH=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var ez=n(719749),eG=n(610604),eK=n(854122),eW=n(903584),eq=n(988223),eX=n(90458),eY=n(942356),eJ=n(224542),eZ=n.n(eJ),eQ=n(7857),e$=n(128204),e0=n(154963),e1=n(28777),e2=n(141288),e5=n(431757),e4=n(910970),e3=n(378845),e6=n(454372),e7=n(924729),e9=n(513289);function e8(e){return(0,i.jsx)(eQ.u9,{label:"RequestPermissionsAccountPicker",children:(0,i.jsx)(te,{...e})})}function te(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.auth);return(0,r.useEffect)(()=>{t(e5.Ts({origin:"request_permissions_entry",redirectUrl:e2.Ay.location.pathname,formState:e4.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},[t,e.accountPickerData]),(0,i.jsxs)(e6.u,{useOriginalSrcFills:!0,onBackClick:()=>{n.formState===e4.qB.ACCOUNT_PICKER?e.closeAuth():t(e5.Ts({origin:"request_permissions_entry",redirectUrl:e2.Ay.location.pathname,formState:e4.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},children:[(0,i.jsx)("div",{className:"request_permissions_app--authViewContainer--STI7p",children:(0,i.jsx)(e3.Ob,{id:"request-permissions-app",modal:!0,auth:n})}),(0,i.jsx)(e9.d,{children:(0,i.jsx)(e7.Ji,{})})]})}function tt(e){return(0,i.jsx)(eQ.u9,{label:"MfaRequiredAppView",children:(0,i.jsx)(tn,{...e})})}function tn(e){let t=((0,a.d4)(e=>e.authedUsers)??{}).byId??{},n=e.authedUsers??Object.values(t),[s,o]=(0,r.useState)(!1);return(0,i.jsx)(e$.w,{children:s?(0,i.jsx)(e8,{accountPickerData:{authed_users:n,authed_user_access_reason:{},destination_name:(0,ei.t)("mfa_required_modal.account_switcher.destination")},closeAuth:()=>{o(!1)}}):(0,i.jsx)(e1.H,{org:e.org,switchAccountsSection:(0,i.jsx)(function(){let e=(0,ee.iZ)();return!e||z.eD?null:(0,i.jsx)("div",{className:eZ()(e0.s.mt24.$,"mfa_required--secondaryText--wPk-2"),children:(0,ei.tx)("mfa_required_modal.account_switcher.text",{userEmail:e.email,link:(0,i.jsx)(eY.$n.Link,{onClick:()=>{o(!0)},children:(0,ei.tx)("mfa_required_modal.account_switcher.switch_accounts")})})})},{}),fileKey:e.fileKey})})}var ti=n(619453),tr=n(943866),ta=n(393463),ts=n(102699),to=n(536378),tl=n(366536),td=n(783868),tc=n(206955),tu=n(518126),tm=n(750187),tp=n(360381),th=n(378721),tf=n(330979),tg=n(730436),tx=n(212001);function t_(e){let{onDismiss:t}=e;return(0,i.jsx)(A.fu,{name:"Workshop Expired File Banner",children:(0,i.jsxs)("div",{className:`workshop_expiry_footer--banner--A9Q6b ${tx.yl}`,children:[(0,i.jsxs)("div",{className:"workshop_expiry_footer--bannerContent--wqbRt",children:[(0,i.jsx)("div",{className:"workshop_expiry_footer--icon--Injvl",children:(0,i.jsx)(tf.i,{})}),(0,i.jsx)("div",{className:"workshop_expiry_footer--textContent--NlE-x",children:(0,i.jsx)("span",{className:"workshop_expiry_footer--title--bf0Kc text--fontPos13Whyte--OEkDW text--_fontBaseWhyte--z-Ypd",children:(0,ei.tx)("whiteboard.open_sessions.expiry_banner_title")})})]}),(0,i.jsx)(th.K,{onClick:t,"aria-label":(0,ei.t)("general.close"),children:(0,i.jsx)(tg.X,{})})]})})}var ty=n(330261),tb=n(478258);function tv(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,a.wA)(),t=(0,ee.iZ)(),n=!t,i=(0,td.nF)(),s=i.enabled,o=i.enabled?i.id:null,d=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===l.kul.JOINED),u=(0,a.d4)(e=>e.progressBarState.mode),m=Q.q5()?.isTryFile,p=(0,tc.QL)("name");(0,r.useEffect)(()=>{n&&m&&o&&p&&d&&e((0,tl.cq)({name:p}))},[n,m,p,o,e,d]);let h=(0,r.useMemo)(()=>{if(!t||null==o)return!1;if(m)return!0;let e=(0,c.DN)();try{return e.get((0,tb.v6)(o)).includes(t.email)}catch(e){return!1}},[t,o,m]),f=t?.email;(0,r.useEffect)(()=>{f&&o&&m&&(0,tb.kO)(o,f)},[f,o,m]);let g=(0,Q.MY)();(0,r.useEffect)(()=>{if(s&&!(0,tu.T)(u)&&"loaded"===g.status&&!(0,ta.Ay)().mermaid_content){let t=localStorage.getItem((0,tm.K)(o));n?t?(0,tl.QA)(t):e(to.$O({type:ty.e})):g.data?.canEdit||h||e(to.$O({type:ty.e}))}},[e,n,s,o,u,h,g]);let x=(0,Q.q5)(),_=x?.key,y=x?.name;(0,r.useEffect)(()=>{if(s&&!(0,tu.T)(u)&&n&&m&&_&&y===(0,ei.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,tm.K)(o));t&&e(ts.S({userName:t,file_key:_}))}},[s,u,o,n,m,_,y,e])}();let{showEditFileFooter:n,dismissEditFileFooter:s}=function(e){let[t,n]=(0,r.useState)(!1),i=(0,a.wA)(),s=(0,ee.iZ)(),o=(0,Q.q5)(),d=o?.name,c=!s,{userCanEditFile:u}=(0,r.useMemo)(()=>c?{userCanEditFile:!1,userCanSeeEditButton:!1}:o?{userCanEditFile:o.canEdit}:{userCanEditFile:!1,userCanSeeEditButton:!1},[c,o]),m=(0,td.nF)(),p=m.enabled,h=(0,tr.ZC)(p),f=m.enabled?m.until.valueOf():null,g=(0,r.useRef)(null),x=(0,r.useCallback)(()=>{if(!(0,ta.Ay)().mermaid_content){if(!c){l.h3O?.reconnect(!1),u||n(!0);return}i(e5.Ts({origin:"logged_out_footer",formState:e4.qB.SIGN_UP,redirectUrl:e2.Ay.location.pathname})),i(to.to({type:tp.x,data:{headerText:(0,ei.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:d||""}),subtitle:(0,ei.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()}},[i,e,c,u,d]);return(0,r.useEffect)(()=>{if(p&&f){let e=Math.max(f-Date.now(),0);g.current=setTimeout(()=>{g.current=null,x()},e)}return()=>{g.current&&clearTimeout(g.current)}},[i,p,f,x]),(0,r.useEffect)(()=>{null!=h&&p!==h&&(p?l.h3O?.reconnect(!1):(g.current&&clearTimeout(g.current),x()))},[i,p,h,x]),{showEditFileFooter:t,dismissEditFileFooter:(0,r.useCallback)(()=>{n(!1)},[])}}(t);return n?(0,i.jsx)(t_,{onDismiss:s}):null}var tC=n(679801),tE=n(992749),tw=n(36619),tk=n(17147),tT=n(989611),tj=n(278825),tS=n(760898),tI=n(384203),tA=n(941452),tN=n(910496),tM=n(466082),tR=n(528856),tP=n(723850),tO=n(960068),tD=n(776888),tL=n(684774),tF=n(955994),tB=n(776492),tU=n(249657),tV=n(907023),tH=n(97967),tz=n(352284),tG=n(662423),tK=n(580295),tW=n(17248),tq=n(644857),tX=n(450255),tY=n(82468),tJ=n(359547),tZ=n(740554),tQ=n(592802),t$=n(987732),t0=n(523670),t1=n(627346),t2=n(422572),t5=n(664696),t4=n(496849),t3=n(855990),t6=n(237191),t7=n(579891),t9=n(316157),t8=n(293904),ne=n(846585);let nt=r.memo(e=>(0,i.jsx)(eQ.u9,{label:"FullscreenViewGeneral",children:(0,i.jsx)(nn,{...e})})),nn=r.memo(({children:e})=>{let t=(0,a.d4)(e=>e.openFile),n=t?t.key:"",s=(0,r.useRef)(null),o=(0,a.wA)(),d=(0,eR.md)(t5.h),c=(0,a.d4)(e=>e.openFile?.canEdit??!1),u=(0,tI.p8)("isReadOnly"),m=(0,$.dq)(),p=(0,P.E3)(),f=(0,tr.ZC)(p);p!==f&&f&&o(T.PQ([])),(0,tQ.g8)(n),(0,t9.y1)(n),(0,t7.WR)(),t2.nz(),(0,t4.N)(),(0,t8.Ky)(),(0,r.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),g.Ay.isIpad&&document.addEventListener("focusout",e),document.documentElement.classList.add(ne.FC),document.body.classList.add(ne.Wc),o(t0._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=l.P2e?.getImageMemory(),t=l.P2e?.getHeapMemoryBreakdown();var n={coreJsBufferMemory:tZ.hM?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:tZ.hM?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:tZ.hM?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:tZ.hM?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e?.compressedImages??0,fullscreenUncompressedImagesArrayBuffers:e?.uncompressedArrayBuffer??0,fullscreenUncompressedImagesImageBitmap:e?.uncompressedImageBitmap??0};let i=tZ.hM?.getMemStatsSummary()??void 0;if(i){let e=r(t?.mem_pool_current)||0,n=r(t?.font_files_current)||0,a=r(t?.unique_paths_current)||0,s=r(t?.vector_networks_current)||0;i.application={memPool:{total:e},fontFiles:{total:n},uniquePaths:{total:a},vectorNetworks:{total:s}}}function r(e){return"number"==typeof e?e:parseInt(e)}return{metadata:JSON.parse(JSON.stringify(n)),reservedWasmMemory:(0,t3.le)()||0,rendererGpuMemory:r(l.P2e?.getRendererGpuMemory())||0,rendererBreakdown:function(e){return{textures:r(e.textures),vertexBuffers:r(e.vertexBuffers),renderBuffers:r(e.renderBuffers),uniformBuffers:r(e.uniformBuffers)}}(l.P2e?.getRendererMemoryBreakdown())??void 0,memStats:i}}),()=>{g.Ay.isIpad&&document.removeEventListener("focusout",e),document.body.classList.remove(ne.Wc),document.documentElement.classList.remove(ne.FC)}},[o]),(0,r.useEffect)(()=>{t&&!s.current&&(o(t2.Yx({})),t&&!u?t?.canEdit&&o(t$.rH({fileKey:t.key})):(0,h.kc)().ce_new_missing_fonts_logging&&(0,t6.DI)(),s.current=t)},[o,u,t]),(0,r.useEffect)(()=>{(0,t8.RS)(o,t?.key,m)},[o,m,t?.key,p]),(0,r.useEffect)(()=>{z.eD&&z.eD.setEditFilePermissions(c)},[c]);let x=(0,r.useRef)(null),_=(0,r.useRef)(null);return((0,r.useEffect)(()=>{t&&(null===x.current||!x.current)&&o((0,t1.x4)()),t&&x.current&&t.key!==x.current&&o((0,t1.x4)()),_.current&&p!==_.current&&o((0,t1.x4)()),_.current=p,x.current=t?.key},[o,t,p]),"ok"!==d)?null:(0,i.jsx)(i.Fragment,{children:e})});var ni=n(937639),nr=n(212198);let na=()=>{"hidden"===document.visibilityState&&(c.x4?.clear(),eM.L.cleanupSession())};function ns({children:e,loadedCommentsProvider:t=!0}){let n=(0,a.wA)(),d=(0,Q.q5)();(0,w.lF)(d?.key??""),ek.M4.Folder.useValue(d?.folderId);let c=(0,a.d4)(e=>e.selectedView.editorType),[f,x]=(0,r.useState)(!1),_=(0,o.DP)(),E=(0,tW.sO)(),S=(0,w.xo)(),I=(0,r.useCallback)(()=>{(0,ni.jS)(),x(!0)},[]),A=function({onCanvasExpired:e}){let t=(0,a.d4)(e=>(0,eK.U2)(e.selectedView)),n=(0,ee.TA)(),i=(0,$.dq)(),[s,o]=r.useState(!1),l=(0,eW.K)(),d=(0,ez.bc)(eG.NSA,{fileKey:t??""},{enabled:!!t}),c="loaded"===d.status&&d.data.file?.canRead!==!0,u="loaded"===d.status&&d.data.file?.canRead===!0;return r.useLayoutEffect(()=>{l&&c&&(o(!0),e())},[l,c,e]),r.useEffect(()=>{l&&u&&R.az.trackDefinedEvent("mfa.file_access_without_restriction",{orgId:i??void 0,userId:n??void 0,fileKey:t??void 0})},[l,u,i,n,t]),!!(0,h.kc)().mfa_for_guests&&s}({onCanvasExpired:I}),O=(0,a.d4)(e=>e.mergingStatus),H=(0,ee.TA)(),J=(0,$.dq)();(0,m.G1)(d?.key||""),(0,r.useEffect)(()=>{if((0,h.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",y,!0),()=>void document.removeEventListener("keydown",y,!0)},[]),function(){let e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,a.wA)(),i=(0,a.d4)(e=>e.userFlags),s=(0,a.d4)(e=>!!e.user),o=function(e,t){let n=(0,a.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),i=(0,a.d4)(e=>e.user?.created_at),s=(0,r.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=i&&new Date(i).getTime()>=e},[i]);return(0,r.useCallback)((i,r,a,o)=>{t.keyboard_user_first_detection||o||!s?i!==en.aT.US_QWERTY||o||r!==en.aT.UNKNOWN?i&&r!==en.aT.UNKNOWN?t.keyboard_manual_supported_bell||ep(e,i,r,n):i&&r===en.aT.UNKNOWN?t.keyboard_generic_supported_first_bell||eh(e,i,n):(0,er.CZ)({layout:r,detectedLayoutStr:a??void 0,eventName:"keyboard_change_no_bell"}):(0,er.CZ)({layout:i,eventName:"ignore_us_qwerty"}):(e(eo.b({keyboard_user_first_detection:!0})),i&&((0,er.rd)({layout:i}),(0,er.CZ)({layout:i,eventName:"auto_set_new_user_layout"})))},[e,t,n,s])}(n,i),l=(0,r.useCallback)(async()=>{if(s){if(z.eD){let t=await ef(o,e.current??null);e.current=t}else{let e=await eg(o,t.current??null);t.current=e}}},[o,s]);(0,r.useEffect)(()=>{el.Y5.isReady()?l():el.Y5.onReady().then(()=>setTimeout(l,500))},[])}(),(0,Z.XS)(),function(){let e=(0,a.Pj)(),t=(0,a.d4)(ex.d1),n=(0,a.d4)(eb.m0),i=(0,a.d4)(eb.No),s=(0,a.d4)(e=>e.library.publishedByLibraryKey),o=(0,Q.q5)(),l=(0,a.d4)(e=>e.fileVersion),d=(0,a.d4)(e=>e.loadingState),c=(0,a.d4)(e=>e.library.local),u=(0,a.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),m=(0,e_.ud)(),p=(0,a.d4)(e=>e.folders),f=(0,ev.l6)(),g=(0,ev.He)(),x=(0,a.d4)(e=>e.library.assetsPanelSearch.query),_=(0,a.d4)(e=>e.library.assetsPanelSearch.searchOptions),y=(0,ey.D2)(d,(0,eE.yD)(o?.key||"")),b=(0,eC.M)();(0,r.useEffect)(()=>{t&&ew.YG.sourcesDidChange()},[t,n,i,s,c,u,...(0,h.kc)().asset_search_rm_redux_deps?[]:[m,p]]),(0,r.useEffect)(()=>{(0,ew.Wg)(e.getState(),{ignoreLoadingState:b})&&ew.YG.queryDidChange(e)},[e,x,b]),(0,r.useEffect)(()=>{(0,ew.Wg)(e.getState(),{ignoreLoadingState:b})&&ew.YG.searchOptionsDidChange(e)},[e,_,b]),(0,r.useEffect)(()=>{(0,ew.Wg)(e.getState(),{ignoreLoadingState:b})&&ew.YG.subscriptionsDidChange(e,f,g)},[e,y,f,g,o,l,d,b])}(),(0,p.ji)(),(0,X.gN)(),z.eD&&function(){let e=(0,W.x)(),t=(0,W.V2)(),n=(0,W.QZ)(),i=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),s=(0,a.d4)(e=>e.openFile),o=(0,a.d4)(e=>e.localPlugins),l=(0,P.E3)(),d=(0,W.op)(),c=(0,a.d4)(e=>e.installedPluginVersions.plugins),u=(0,a.d4)(e=>e.mirror.selectedStyleProperties?.selectedWidgetInfo),m=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),p=(0,a.d4)(e=>e.publishedPlugins),h=(0,a.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),f=(0,W.Be)(),g=f.orgPlugins,x=f.orgWidgets,_=(0,q.h)("plugin"),y=(0,q.h)("widget"),b=(0,W.NU)(),v=(0,W.qr)(),C=(0,W.ZT)(),E=null!=(0,X.SH)();r.useEffect(()=>{let r={isReadOnly:i,userCanViewPlugins:e,openFile:s,publishedPlugins:p,localExtensions:o,allSavedPlugins:c,recentlyUsedPlugins:d,org:h,editorType:l,widgetSelectionInfo:u,hideRecentsHeader:!0,activeTextReviewPlugin:m,orgSavedPlugins:g,orgSavedWidgets:x,orgPrivatePlugins:_,orgPrivateWidgets:y,savedWidgetVersions:b,recentlyUsedWidgets:v,publishedWidgets:C,userCanViewWidgets:n,userCanRunExtensions:t};Y(G.$0(r),K.wX(r))},[i,e,s,p,c,d,o,h,l,u,m,f,g,x,_,y,b,v,C,E,n,t])}(),(0,eT.xI)(),function(){let e=(0,P.E3)(),t=(0,r.useCallback)(()=>{(0,R.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,M.A)(t,1e3,{leading:!0,trailing:!1}),i=(0,a.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),s=(0,r.useRef)(i);(0,r.useEffect)(()=>{s.current!==i&&(s.current=i,n())},[i,n])}(),function(){let e=(0,nr.dP)(),t=(0,nr.qw)(),n=(0,nr.UX)(),i=document.documentElement.style;(0,r.useLayoutEffect)(()=>{i.setProperty("--left-panel-width",`${e}px`),(0,h.kc)().properties_panel_resize_lag_fix&&(i.setProperty("--properties-panel-width",`${t}px`),i.setProperty("--dev-handoff-panel-width",`${n}px`))},[e,t,n,i])}(),(0,v.I7)("exp_aa_test_fullscreen_view").getConfig(),(0,eq._r)(H,J),function(){let e=(0,a.wA)(),t=(0,tV._)(),n=(0,tA.BI)(),[i,s]=(0,r.useState)(!1),o=(0,a.d4)(e=>e.multiplayer),[d,c]=(0,tj.yR)(),u=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===l.kul.JOINED);!function(){let e=(0,Q.q5)(),t=window.FigmaMobile,n=(0,tD.rE)(),i=(0,tL.C3)(),s=(0,a.wA)(),o=(0,tP.am)(),l=i?(0,tR.unwrap)(i.pageNodeId):void 0;(0,r.useEffect)(()=>{t&&(t._select_page=async e=>{l===e&&s(tO.au({})),await (0,tM.UN)().setCurrentPageAsync(e)})},[s,t,l]),(0,r.useEffect)(()=>{t&&(t._rename_page=(t,n)=>{(0,tD.CQ)({openFile:e,pageId:t,newName:n,trackRenamePage:()=>o("page_commit_rename",{nodeId:t},{forwardToDatadog:!0})})})},[t,e,o]),(0,r.useEffect)(()=>{t&&(t._delete_page=e=>{el.Y5.triggerActionInUserEditScope("page-delete",{args:{nodeId:e}}),el.Y5.commit()})},[t]),(0,r.useEffect)(()=>{t&&(t._create_page=()=>{n(null)})},[t,n])}();let m=r.useCallback(t=>{l.h3O?.observeUser(t),o&&o.observingSessionID!==t&&o.sessionID!==t&&e(eo.b({aware_of_observation_mode:!0}))},[o,e]);r.useEffect(()=>{t&&!i&&n?.shouldOptimizeForIpadApp&&u&&!l.Ez5?.defaultToolIsHandSelect()&&(s(!0),el.Y5.triggerAction("set-tool-hand",null))},[t,n,i,s,u]);let p=(0,a.d4)(({mirror:{appModel:e}})=>e.showUi);r.useEffect(()=>{n?.updateUIVisible&&n.updateUIVisible(p)},[n,p]);let h=(0,tA.m0)();r.useEffect(()=>{h&&(h._try_to_flush_autosave=async()=>{let e=(0,tS.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[h]);let f=(0,tF.Kd)();r.useEffect(()=>{n?.updateSaveStatus&&(f?u?n.updateSaveStatus(tz.a.SAVING):n.updateSaveStatus(tz.a.PAUSED):n.updateSaveStatus(tz.a.SAVED))},[n,f,u]);let g=(0,a.d4)(e=>(0,tN.Yh)(e.mirror.appModel,"undo")),x=(0,a.d4)(e=>(0,tN.Yh)(e.mirror.appModel,"redo"));r.useEffect(()=>{if(n?.updateUndoEnabled&&n.updateUndoEnabled(g),n?.updateRedoEnabled&&n.updateRedoEnabled(x),h){let t=t=>{e(ea.F.dequeue({matchType:"undo_redo_gesture"})),e(ea.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};h._trigger_undo=()=>{g&&(el.Y5.triggerActionInUserEditScope("undo"),t((0,ei.t)("fullscreen_actions.undo")))},h._trigger_redo=()=>{x&&(el.Y5.triggerActionInUserEditScope("redo"),t((0,ei.t)("fullscreen_actions.redo")))}}},[n,e,g,x,h]);let _=(0,tA.pt)();r.useEffect(()=>{_&&(_._set_ui_visibility=e=>{e!==p&&el.Y5.triggerAction("toggle-ui")})},[_,p]);let y=(0,tT.Yk)();r.useEffect(()=>{n?.updateDLTHeight&&n.updateDLTHeight(y)},[y,n]);let b=(0,tI.dH)(),v=(0,tK.pK)(b),C=(0,tA.Ef)(),E=(0,a.d4)(e=>e.mirror?.appModel.isReadOnly);r.useEffect(()=>{v&&!E&&(C?.nativeToolbarUpdateActiveTool?.(v),C?.nativeToolbarUpdateMultiselectActive?.("MULTISELECT"===v))},[C,v,E]);let[w,k]=r.useState("ERASER"),[T,j]=r.useState("PENCIL");r.useEffect(()=>{!E&&v&&(0,tK.S0)(v)&&v!==w&&(j(w),k(v))},[v,w,k,j,E]),r.useEffect(()=>{_&&(_._switch_to_eraser=function(){if(E)return{success:!1,error:tG.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==w)return(0,tK.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=tK.Jh.get(T);return e&&(0,tK.Jm)(e),{success:!0,error:null,currentTool:T}}},_._switch_to_previous_drawing_tool=function(){if(E)return{success:!1,error:tG.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=tK.Jh.get(T);return e&&(0,tK.Jm)(e),{success:!0,error:null,currentTool:T}})},[E,v,T,w,_]),r.useEffect(()=>{h&&(h._observe_user=e=>{m(e)})},[h,m]),h&&(h._update_context_menu_visibility=e=>{l.glU?.updateNativeContextMenuVisibility(e)},h._override_document_visibility_state=tH.R,h._set_allow_draw_with_touch=e=>{l.glU?.setAllowDrawWithTouch(e)},h._unlock_all_objects=()=>{el.Y5.triggerActionInUserEditScope("unlock-all")},h._zoom_reset=()=>{el.Y5.triggerActionInUserEditScope("zoom-reset")},h._zoom_to_fit=()=>{el.Y5.triggerActionInUserEditScope("zoom-to-fit")},h._present=()=>{l.h3O?.startPresenting()},h._find_in_file=()=>{el.Y5.triggerActionInUserEditScope("canvas-search")},h._copy=()=>{el.Y5.triggerActionInUserEditScope("copy")},h._cut=()=>{el.Y5.triggerActionInUserEditScope("cut")},h._paste=()=>{el.Y5.triggerActionInUserEditScope("paste")},h._add_media=e=>{let t=e.map(e=>{let{encoded_data:t,mime_type:n}=e;return new Blob([(0,tk.Vs)(t)],{type:n})}),n=el.Y5.fileArrayToString(t);l.glU?.handleOpenFromJsonString(n,tG.wu.MOBILE_NATIVE_NAVBAR)},h._get_zoom_scale=()=>l.glU?.getViewportZoomScale()??1),_&&(_._open_timer=()=>{eR.zl.set(tB.Qs,{type:"OPEN"}),(0,R.sx)(tU.Fn.OPEN,{source:tU.OO.IPAD_MENU})},_._close_timer=()=>{eR.zl.set(tB.Qs,{type:"CLOSE"})},_._activate_multiselect_mode=()=>{(0,tK.Jm)("set-tool-multiselect")},_._deactivate_multiselect_mode=()=>{(0,tK.Jm)("set-tool-default")}),r.useEffect(()=>{_&&(_._get_screen_reader_enabled=()=>d)},[_,d]),r.useEffect(()=>{_&&(_._update_screen_reader_enabled=e=>{c(e)})},[_,c])}(),(0,ej.a4)(),(0,u.fp)(),function(){let e=(0,a.wA)(),[t,n]=(0,tE.Wz)("nux_seat_selection_show_confirmation",null);(0,r.useEffect)(()=>{t&&("autoApproved"in t&&"seatType"in t&&e(to.to({type:tw.u,data:{...t}})),n(null))},[t,e,n])}(),(0,L.i)(),r.useEffect(()=>et.Bc,[]),(0,eI.DW)(),(0,U.Wo)(),r.useEffect(()=>(c===eA.nT.Whiteboard&&g.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",na),()=>{document.removeEventListener("visibilitychange",na)}),[c]);let es=(0,N.o)();r.useEffect(()=>{if(es)return n(j.HQ({storeInRecentsKey:es})),c===eA.nT.Whiteboard&&(n(j.gr({storeInRecentsKey:es})),n(j.vZ({storeInRecentsKey:es}))),c!==eA.nT.DevHandoff&&n(j.aF({storeInRecentsKey:es})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)};function e(e){switch(e.key){case eS.vY:case eS.S7:case eS.a7:n(j.HQ({storeInRecentsKey:es}));break;case eS.YN:case eS.xk:n(j.aF({storeInRecentsKey:es}));break;case eS.SO:n(j.gr({storeInRecentsKey:es}));break;case eS.JG:n(j.vZ({storeInRecentsKey:es}))}}},[n,c,es]),r.useEffect(()=>{H&&n(k.oQ())},[n,H]),r.useEffect(()=>{S&&(0,V.K7)()},[S]),function(){let e=(0,eR.Xr)(eV);(0,r.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(eD.IDLE_DUE_TO_INACTIVITY)},6e4)},i=()=>{n(),e(eD.ACTIVE_AFTER_IDLE)},r=eO()(i,500,{trailing:!1,leading:!0}),a=()=>{try{"visible"===document.visibilityState?i():e(eD.IDLE_DUE_TO_TAB_SWITCH)}catch(e){throw console.error("Failed to update visibility state",e),e}};return e(eD.ACTIVE_FIRST_TIME),eH.forEach(e=>{document.addEventListener(e,r)}),document.addEventListener("visibilitychange",a),n(),()=>{eH.forEach(e=>{document.removeEventListener(e,r)}),document.removeEventListener("visibilitychange",a),clearTimeout(t)}},[e,6e4])}(),r.useEffect(()=>{let e=e=>{if(O===s.y.MERGING)return e.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",e.preventDefault(),n(T.sx({name:"Unload During Merge Warning Shown"})),!1},t=()=>{O===s.y.MERGING&&n(T.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",e),window.addEventListener("unload",t),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",t)}},[O,n]);let ed=(0,r.useRef)(!1);r.useEffect(()=>{d?.key&&!ed.current&&(ed.current=!0,F.y.startTimer(d.key,(0,b.lM)()))},[d?.key]);let ec=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(no,{file:d,loadedCommentsProvider:t,onCanvasExpired:I,children:e})});return(0,i.jsx)(C.k,{name:"editor",alsoTrack:()=>({editorType:(0,eA.Bu)(c),productType:(0,D.Dc)(c),uiVersion:_.version,fileKey:d?.key||"",slideView:E?eR.zl.get(tq.v2)?"ssv":"grid":void 0}),trackImpressions:!1,children:(0,i.jsx)(B.wG,{children:(0,i.jsxs)(i.Fragment,{children:[!f&&ec,!f&&(0,i.jsx)(tv,{onWorkshopExpired:I}),A&&(0,i.jsx)(nl,{file:d})]})})})}function no({children:e,file:t,loadedCommentsProvider:n,onCanvasExpired:r}){let s=(0,a.d4)(e=>e.userStateLoaded),o=(0,a.d4)(e=>e.mirror.appModel.isInitialized),c=(0,d.R)(e=>e.comments),u=(0,a.d4)(e=>e.progressBarState),{anchorPositions:m,boundingBoxPositions:p,DEPRECATED_updateWatchedNodeIds:h,updateWatchedStablePaths:f}=(0,I.Cn)(),g=(0,I.e_)(),x=(0,ee.TA)();(0,tC.ox)({file:t,onCanvasExpired:r}),(0,O.G)();let _=function(){let{error:e}=(0,E.Hb)();return!!(e instanceof Error&&e.message.includes("Out of memory"))}(),y=(0,i.jsx)(tJ.R,{children:(0,i.jsx)(tY.P,{children:(0,i.jsx)(E.tH,{boundaryKey:"InAppPage",fallback:_?(0,i.jsx)(ti.PG,{}):E.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:J.y4,children:(0,i.jsx)(nt,{children:e})})})});return(0,A.T8)(n?(0,i.jsx)(S.NX,{DEPRECATED_updateWatchedNodeIds:h,activeId:c.activeThread?.id||null,anchorPositions:m,boundingBoxPositions:p,enableCommentsLoadingVisualBell:u.mode===l.Oin.OFF,file:t,getPageIdsForNodes:g,orgId:t?.parentOrgId??null,updateWatchedStablePaths:f,userId:x,children:y}):y,eN.e0.EDITOR,null!=t?(0,D.oP)(t):{},null!=t&&s&&o)}function nl({file:e}){let t=(0,$.sZ)();return(0,a.d4)(e=>e.modalShown?.type===eX.M)||!t?null:(0,i.jsx)(tt,{org:t,fileKey:e?.key})}(0,tX.nh)(()=>{})},669437:(e,t,n)=>{n.d(t,{sk:()=>od});var i=n(239976);n(625859);var r=n(105652),a=n(20002),s=n(865702),o=n(692376),l=n(854225),d=n(379141),c=n(270450),u=n(847923),m=n(445019),p=n(916626),h=n(970508),f=n(719749),g=n(493064),x=n(267585),_=n(7857),y=n(29161),b=n(806130),v=n(888903),C=n(955104),E=n(779267),w=n(598066),k=n(62023),T=n(785055),j=n(218670),S=n(960068),I=n(362844);let A={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_pages",filterBy:"hidden_sections"},N={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_pages"};var M=n(90154),R=n(2227),P=n(466082),O=n(40297),D=n(682641),L=n(760367),F=n(950851),B=n(342931),U=n(212198),V=n(776888),H=n(157750),z=n(895414),G=n(273444),K=n(460845),W=n(526865);let q=(0,m.eU)(new Map),X=(0,O.jz)(W.LdP);function Y({children:e}){let t=(0,H.ut)(o.Ez5?.cooperFocusView().isInFocusedNodeView,!1),n=(0,V.dh)(),a=r.useContext(z.kw),s=(0,H.ut)(o.Ez5?.cooperFocusView().focusedNodeId,""),l=(0,H.ut)(o.Ez5?.canvasGrid().canvasGridArray,[]),c=(0,G.rY)(l),u=r.useMemo(()=>c.reduce((e,t,n)=>(e.set(t,n),e),new Map),[c]),p=function(){let e=(0,L.wq)(),t=(0,m.Xr)(q),[n,i]=r.useState(new Map),[a,s]=r.useState(new Map);return r.useEffect(()=>{let r=new Set,o=new Map;"loaded"===e.status&&e.data.forEach(e=>{let t=e.canvasPosition,n=a.get(e.id),i={commentCount:e.comments.filter(e=>!e.resolved_at).length,threadIds:[],hasUnread:e.comments.some(e=>!e.resolved_at&&e.isUnread)};o.set(e.id,i),t&&(!n||t.x!==n.x&&t.y!==n.y)&&r.add(e)}),r.forEach(e=>{let t=e.comments[0]?.client_meta?.node_id;if(!t||!e.canvasPosition)return;let n=(0,P.UN)().get(t),r=n?.containingCooperFrameId()??R.AD;r!==R.AD&&e.canvasPosition&&(s(t=>new Map(t.set(e.id,e.canvasPosition))),i(t=>new Map(t.set(e.id,r))))});let l=new Map;n.forEach((e,t)=>{let n=o.get(t);if(!n)return;let{commentCount:i,hasUnread:r}=n,a=l.get(e),s={commentCount:(a?.commentCount??0)+i,threadIds:[...a?.threadIds??[],t],hasUnread:a?.hasUnread||r};l.set(e,s)}),t(l)},[t,a,n,e.data,e.status]),n}(),h=(0,U.qw)(),f=r.useCallback(e=>{let t=p.get(e.id);if(t)return t;let n=e.comments[0]?.client_meta?.node_id;if(!n)return R.AD;let i=(0,P.UN)().get(n);return i?.containingCooperFrameId()??R.AD},[p]),g=(0,K.R)(),x=r.useMemo(()=>{let e=[B.mW.RESOLVED,B.mW.YOURS];return t&&e.push(B.mW.CURRENT_ASSET),e},[t]),_=r.useMemo(()=>[B.qN.CREATION_DATE,B.qN.UNREAD,B.qN.ASSET],[]),y=(0,D.J)(),b=r.useCallback(e=>{let t=f(e),n=u.get(t);return void 0!==n&&t!==R.AD?(0,d.t)("comments.asset_number",{orderNum:n+1}):e.pageName},[f,u]),v=r.useMemo(()=>!!t,[t]),C=r.useCallback(e=>{if(!t)return()=>{};let n=f(e);return n!==R.AD?()=>{y(n)}:()=>{o.Ez5?.cooperFocusView().exitFocusedNodeView()}},[f,y,t]),E=r.useCallback(e=>{if(!t||!s)return!1;let i=e&&n?a.getCommentDestinationForCanvasPosition(e,n)?.nodeId:void 0;if(!i)return!1;let r=(0,P.UN)().get(i),o=r?r.containingCooperFrameId():R.AD;return o===R.AD||o!==s},[s,n,a,t]),w=r.useMemo(()=>({[B.qN.ASSET]:(e,t)=>{let n=1/0,i=f(e),r=f(t),a=u.get(i)??n,s=u.get(r)??n;return a!==s?a-s:Date.parse(t.comments[0].created_at)-Date.parse(e.comments[0].created_at)}}),[f,u]),k=r.useMemo(()=>{let e,t=0;return e=0+X,t+=h,{...F.Ey,maxHeightDelta:-e,minBottomMarginDelta:e,minRightMarginDelta:t}},[h,!0]),T=r.useMemo(()=>({paddingRight:h}),[h,!0]),j=r.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,disableZoomViewportOnCommentSelection:v,orphanedBy:"deleted_anchors",filterBy:t?"non_focused_node_anchors":"deleted_anchors",sidebarFilters:x,sidebarSorts:_,sidebarModesDisabled:!0,dockPositionAdjustment:g,getParentName:b,getOnCommentSelect:C,sortComparatorOverrides:w,commentPositionPaddingAdjustment:T,draggableModalBoundsAdjustment:k,isCommentingDisabledAtPosition:E,commentDisabledPositionBellMessage:(0,d.t)("comments.comments_can_only_be_placed_on_buzz_assets")}),[v,x,_,g,b,C,w,T,k,t,E]);return(0,i.jsx)(M.a.Provider,{value:j,children:e})}var J=n(313616),Z=n(750554),Q=n(56107),$=n(836038),ee=n(130763),et=n(920675),en=n(790016),ei=n(870141),er=n(315086),ea=n(826187),es=n(802825);function eo({children:e}){let t=(0,a.d4)(e=>e.universalInsertModal?.pinned===ea.t.PINNED_AND_DOCKED_LEFT),n=(0,Z.a)(),{isPropertiesPanelCollapsed:s}=(0,J.iT)(),o=(0,U.qw)();o=s?0:o;let l=r.useMemo(()=>[B.mW.RESOLVED,B.mW.YOURS,B.mW.CURRENT_PAGE],[]),d=r.useMemo(()=>[B.qN.CREATION_DATE,B.qN.UNREAD],[]),{xDelta:u,yDelta:m}=(0,K.R)(),p=r.useMemo(()=>{let e=(0,O.hG)(W.PXB),n=u;return t&&(n+=es.AN+e),{xDelta:n,yDelta:m}},[t,m,u]),h=r.useMemo(()=>{let e=(0,O.jz)(W.LdP),t=0,i=0;return n&&(t+=e,i+=o),{...F.Ey,minBottomMarginDelta:t,minRightMarginDelta:i}},[o,n]),f=r.useMemo(()=>{if(n)return{paddingRight:o}},[o,n]),g=function(){let e=(0,ee.De)(),t=(0,er.u)(),n=(0,en.No)().unwrapOr(null),i=(0,ei.l)(),a=$.Gq()?.getPrimaryLocale(!1);return(0,r.useMemo)(()=>a===Q.Locale.EN&&!!n&&(n.tier!==et.Ag.STARTER||!!(0,c.kc)().bake_starter_limit)&&(!i||!!(0,c.kc)().enable_send_to_make_in_view_only_files)&&((0,c.kc)().enable_send_comments_to_make?t:t&&e()),[t,e,i,a,n])}(),x=r.useMemo(()=>({...K.y,sidebarFilters:l,sidebarSorts:d,dockPositionAdjustment:p,draggableModalBoundsAdjustment:h,commentPositionPaddingAdjustment:f,enableSendCommentToMake:g}),[l,d,f,p,h,g]);return(0,i.jsx)(M.a.Provider,{value:x,children:e})}var el=n(582300);let ed={isDevHandoff:!0};function ec({children:e}){let t=(0,Z.a)(),n=(0,w.hA)(),s=(0,a.d4)(e=>e.mirror.appModel.currentPage),o=r.useContext(z.kw),{isPropertiesPanelCollapsed:l}=(0,J.iT)(),c=(0,U.UX)();c=l?0:c;let u=(0,O.jz)(W.ZB$),m=r.useMemo(()=>[B.mW.RESOLVED,B.mW.YOURS,B.mW.CURRENT_PAGE],[]),p=r.useMemo(()=>[B.qN.CREATION_DATE,B.qN.UNREAD],[]),h=(0,K.R)(),f=r.useMemo(()=>{let e=0,n=0;return t&&(e+=u,n+=c),{...F.Ey,minBottomMarginDelta:e,minRightMarginDelta:n}},[u,c,t]),g=r.useMemo(()=>{if(t)return{paddingRight:c}},[c,t]),x=r.useCallback(e=>{if(!n)return!1;let t=e&&s?o.getCommentDestinationForCanvasPosition(e,s)?.nodeId:void 0;return!t||!(0,el.rV)((0,P.UN)(),n,t)},[s,o,n]),_=r.useMemo(()=>{let e={...K.y,sidebarFilters:m,sidebarSorts:p,dockPositionAdjustment:h,draggableModalBoundsAdjustment:f,commentPositionPaddingAdjustment:g,linkGenerationParams:ed,isCommentingDisabledAtPosition:x,commentDisabledPositionBellMessage:(0,d.t)("dev_handoff.workflows.focus_view.comments")};return n&&(e.filterBy="non_dev_mode_focus"),e},[m,p,h,f,g,x,n]);return(0,i.jsx)(M.a.Provider,{value:_,children:e})}var eu=n(687631),em=n(490225),ep=n(484401),eh=n(429641);let ef={isFigJam:!0};function eg({children:e}){let t=(0,ep.Vi)(),n=r.useMemo(()=>[B.mW.RESOLVED,B.mW.YOURS],[]),a=r.useMemo(()=>[B.qN.CREATION_DATE,B.qN.UNREAD],[]),s=(0,U.dP)(),o=(0,K.R)({leftSidePanelWidth:s}),l=r.useMemo(()=>208,[]),d=r.useMemo(()=>{let e=new Map;return e.set(em.b.DOCK_STYLE,"dock--dock--ueAdc"),e.set(em.b.ATTACHMENT_MODAL_BACKGROUND_COLOR,(0,eu.Bx)("light")),e},[]),c=r.useMemo(()=>{let e;let n=(0,O.jz)(W.IuL),i=(0,O.jz)(W.rY4),r=0,a=0;return e=0-n,r+=n,t&&(a+=i),{...F.Ey,maxHeightDelta:e,minBottomMarginDelta:r,minRightMarginDelta:a}},[t]),u=r.useCallback(()=>{(0,eh.W)("left",()=>{})},[]),m=r.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,orphanedBy:"deleted_pages",filterBy:"hidden_sections",sidebarFilters:n,sidebarSorts:a,dockPositionAdjustment:o,draggableModalBoundsAdjustment:c,onDockSideEffect:u,sidebarBottomPaddingAdjustment:l,styleOverrideMap:d,linkGenerationParams:ef}),[o,c,u,l,n,a,d]);return(0,i.jsx)(M.a.Provider,{value:m,children:e})}var ex=n(446232),e_=n(875253),ey=n(597562),eb=n(629648);function ev({children:e}){let t=(0,m.md)(eb.Wg),n=(0,m.md)(ey.J),a=r.useMemo(()=>({...F.Ey,minTopMarginDelta:50,minLeftMarginDelta:-50,minRightMarginDelta:t}),[t]),s=r.useCallback(({viewportInfo:e,triggerRef:t})=>{let n=t?.current?t.current.getBoundingClientRect():void 0;return new e_.Mi(e.x+e.width,n?n.top:e.y)},[]),o=r.useMemo(()=>[B.mW.RESOLVED,B.mW.YOURS,B.mW.LATEST_MAKE_VERSION],[]),l=r.useCallback(e=>{let t=(0,ex.unwrap)(e.makeCommentContext);return t?(0,d.t)("figmake.chat.artifact.version",{version:t.fileSequenceNumber}):t||e.isPendingFromLg||e.isPendingFromSinatra?e.pageName:(0,d.t)("figmake.chat.artifact.version",{version:0})},[]),c=r.useCallback(()=>({makeContext:n}),[n]),u=r.useMemo(()=>({draggableModalBoundsAdjustment:a,showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_anchors",bringDetailsContainerToFront:!0,getCustomActiveThreadPosition:s,disableCommentPinsToggle:!0,disableDraggableThreadModal:!0,enableAttachmentThumbnailsInSidebar:!0,sidebarFilters:o,getParentName:l,getExtraReplyParameters:c}),[s,a,c,l,o]);return(0,i.jsx)(M.a.Provider,{value:u,children:e})}var eC=n(629674);function eE({children:e}){let t=(0,a.d4)(e=>e.selectedView.editorType),n=r.useMemo(()=>{if(window.FigmaMobile)return t===I.nT.Whiteboard?function({children:e}){return(0,i.jsx)(M.a.Provider,{value:A,children:e})}:function({children:e}){return(0,i.jsx)(M.a.Provider,{value:N,children:e})};switch(t){case I.nT.Design:return eo;case I.nT.Whiteboard:return eg;case I.nT.Slides:return eC.Yz;case I.nT.DevHandoff:return ec;case I.nT.Cooper:return Y;case I.nT.Figmake:return ev;default:return function({children:e}){return(0,i.jsx)(M.a.Provider,{value:K.y,children:e})}}},[t]);return(0,i.jsx)(n,{children:e})}var ew=n(798913),ek=n(522568),eT=n(499735),ej=n(118889),eS=n(772293),eI=n(577355),eA=n(43862),eN=n(259714),eM=n(324880),eR=n(421914),eP=n(639280),eO=n(270389),eD=n(751642),eL=n(636174),eF=n(111315);function eB(e){let t=(0,eD.G)(),n=(0,eO.JI)();if(t||!n)return null;let r=(0,eR.E7)(n?.url)??"",a=null;if(""!==r){let{url:t,nodeIdInThisFile:n,versionId:i}=(0,eP.ih)(r,e.store);a=n&&!i?{type:"internal",id:n}:{type:"url",url:t}}let{x:s,y:l}=n,d=eS.Y5.getViewportInfo(),c=Math.min(Math.max(s,100),d.width-100);return(0,i.jsx)("div",{className:"sites_hyperlink_editor--container--bmnCO",style:{left:Math.round(c+d.x),top:Math.round(l+d.y)},children:(0,i.jsxs)("div",{className:`sites_hyperlink_editor--popup--iq5be _overlayBase--_overlayBase--VoHJ7 ${eM.Dm}`,children:[a&&(0,i.jsx)(eN.B,{svg:eF.A,className:"sites_hyperlink_editor--breakIcon--VcmZ6",onMouseDown:t=>{e.onClickTrash(t)},recordingKey:eT.Pt(e.recordingKey,"breakHyperlink")}),(0,i.jsx)(eL.MO,{id:"inline_editor",recordingKey:e.recordingKey,link:a,onLinkChange:t=>{let n;t?.type==="url"?n=t.url:t?.type==="internal"&&(n=eS.Y5.generateLinkToNode(t.id)),e.setUrl(n??""),o.glU?.hideHyperlinkEditor()},isHyperlinkEditor:!0})]})})}function eU(e){return e.startsWith("mailto:")?-1!==e.indexOf("?")?e:e.substring(7):e}function eV(e){let t=(0,a.wA)(),n=(0,a.Pj)().getState(),[l,c]=r.useState(eU(e.hyperlinkLocation.url)),u=r.useRef(!0),m=r.useRef(l);r.useEffect(()=>{m.current=l},[l]);let p=r.useCallback(t=>ew.l7.user("set-hyperlink",()=>!!o.glU&&o.glU.setHyperlink(eU(t),e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeStart,e.hyperlinkLocation.rangeEnd,null)),[e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeEnd,e.hyperlinkLocation.rangeStart]);r.useEffect(()=>()=>{u.current&&(p(m.current),(0,ek.sx)("Hyperlink Editor Updated Link On Dismiss"))},[p]);let h=eT.AF(e.recordingKey,"change",e=>{c(e.target.value.trim())}),f=eT.v_(e.recordingKey,"keydown",n=>{if((0,eI.jr)(n,eI.W0.NO))return eT.aH;if("Escape"===n.key)n.preventDefault(),u.current=!1,(0,ek.sx)("Hyperlink Editor Cancelled On Escape"),o.glU.hideHyperlinkEditor();else if("Enter"===n.key){if(n.preventDefault(),u.current=!1,p(l)){if(""===l)(0,ek.sx)("Hyperlink Editor Deleted Link"),t(v.F.enqueue({message:(0,d.t)("hyperlink.link_deleted")}));else{let t={};if(l&&!l.startsWith("mailto:"))try{let n=new URL((0,ej.xT)(l)).hostname,i=e.editorType;t={domain:n,editorType:i}}catch(e){}(0,ek.sx)("Hyperlink Editor Updated Link On Enter",t)}}else(0,ek.sx)("Hyperlink Editor Invalid Link"),t(v.F.enqueue({message:(0,d.t)("hyperlink.invalid_link_plain")}));o.glU.hideHyperlinkEditor()}}),g=eT.rf(e.recordingKey,"click",n=>{u.current=!1,e.hyperlinkLocation&&ew.l7.user("clear-hyperlink",()=>o.glU.setHyperlink("",e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeStart,e.hyperlinkLocation.rangeEnd,null)),t(v.F.enqueue({message:(0,d.t)("hyperlink.link_deleted")})),o.glU.hideHyperlinkEditor(),n.stopPropagation()}),x=e.hyperlinkLocation.x,_=e.hyperlinkLocation.y,y=eS.Y5.getViewportInfo(),b=Math.round(Math.min(Math.max(x,100),y.width-100)+y.x),C=Math.round(_+y.y);return e.editorType===I.nT.Sites||e.editorType===I.nT.Figmake?(0,i.jsx)(eB,{recordingKey:"hyperlinkEditor",setUrl:c,onClickTrash:g,store:n}):(0,i.jsx)(eA.c,{url:l,location:new e_.Mi(b,C),onInputChange:h,onInputKeyDown:f,onBlur:s.lQ,onClickTrash:g})}var eH=n(740554),ez=n(999457),eG=n(19047),eK=n(692795),eW=n(452533),eq=n(230925),eX=n(836669);class eY{static getCanvasColorSpace(e={}){let t=(0,eX.dX)("fullscreen"),n=t?.getContext(eK.ap()?"webgl2":"webgl")?.drawingBufferColorSpace;if("srgb"===n);else if("display-p3"===n)return e.returnString?ez.RY[ez.RY.DISPLAY_P3]:ez.RY.DISPLAY_P3;return e.returnString?ez.RY[ez.RY.SRGB]:ez.RY.SRGB}static setCanvasColorSpace(e){let t=(0,eX.dX)("fullscreen"),n=t?.getContext(eK.ap()?"webgl2":"webgl");"drawingBufferColorSpace"in n&&(n.drawingBufferColorSpace=e)}static getDocumentColorProfile(e={}){if(void 0===ez.H4)throw Error("ColorManagementStateJs is not defined");return e.returnString?ez.yw[ez.H4.documentColorProfile().getCopy()]:ez.H4.documentColorProfile().getCopy()}static async debugImagesFromSelection(){async function e(e){for(let t of["image/png","image/jpeg","image/heic"])try{return await eW.EC.decodeAsync(e,t,0,0,!0)}catch(e){}return null}let t=(0,eq.D)();for(let n of t.currentPage.selection){for(let i=0;i<n.fills.length;i++){let r=n.fills[i];if("IMAGE"===r.type){let a=t.getImageByHash(r.imageHash);if(!a)continue;let s=await a.getBytesAsync(),o=await e(s);if(o){let e={id:n.id,type:"fill",index:i,imageHash:r.imageHash,colorProfile:ez.RY[o.colorProfile],bytes:s};(0,eG.ED)("ColorManagementDebug","images",e,{logToConsole:eH.NU.ALWAYS})}}}for(let i=0;i<n.strokes.length;i++){let r=n.strokes[i];if("IMAGE"===r.type){let a=t.getImageByHash(r.imageHash);if(!a)continue;let s=await a.getBytesAsync(),o=await e(s);if(o){let e={id:n.id,type:"stroke",index:i,imageHash:r.imageHash,colorProfile:ez.RY[o.colorProfile],bytes:s};(0,eG.ED)("ColorManagementDebug","images",e,{logToConsole:eH.NU.ALWAYS})}}}}}}function eJ(){return r.useEffect(()=>((0,c.kc)().ee_color_management_debug&&(window.colorManagementDebug=eY),()=>{"colorManagementDebug"in window&&delete window.colorManagementDebug}),[]),null}var eZ=n(948629),eQ=n(271814),e$=n(605985),e0=n(610604),e1=n(908756),e2=n(456556),e5=n(577225),e4=n(835204),e3=n(336400),e6=n(752783),e7=n(359962),e9=n(362563);function e8(){let{Sprig:e}=(0,e5.A)(),t=(0,m.md)(e9.Lk),n=(0,e6.I)(),{loaded:i,query:a,sessionId:s}=function(){let[e,t]=(0,r.useState)(!1),{currentSearch:n}=(0,m.md)(e3.WP),i=(0,m.md)(e4.hO.currentSearchAtom),a=(0,m.md)(e9.dd);(0,r.useEffect)(()=>{let e=n?.result.status==="loaded",r=i?.result.status==="loaded";e&&r&&t(!0)},[n?.result.status,i?.result.status]);let s="";return n?.input.type==="input-text"&&(s=n.input.query),{loaded:e,query:s,sessionId:a}}(),o=(0,r.useRef)(null),l=(0,r.useRef)(!1),d=(0,r.useCallback)(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),u=(0,r.useCallback)(()=>{e("track","quick_actions_assets_tab_search",{query:a,sessionId:s}),l.current=!0},[e,a,s]);return(0,r.useEffect)(()=>{if((0,c.kc)().assets_tab_sprig_tracking&&!l.current)return t===e7.Jc.ASSETS&&i&&(n?o.current=setTimeout(()=>{u()},3e4):(u(),d())),d},[t,d,i,n,u]),null}var te=n(910496),tt=n(605966),tn=n(290029);function ti(){let e=(0,tt.X)();return(0,i.jsx)(tn.Y,{prioritizedBanners:e,location:"editor"})}var tr=n(974575);let ta=r.memo(function(){return(0,c.kc)().internal_only_debug_tools?(0,i.jsx)(to,{}):null});r.memo(function(){return(0,c.kc)().internal_only_debug_tools?(0,i.jsx)(tl,{}):null});let ts={loading:()=>null,error:function(){return r.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},to=tr.A.createLazyComponent(()=>n.e(895).then(n.bind(n,738634)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...ts,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),tl=tr.A.createLazyComponent(()=>n.e(895).then(n.bind(n,738634)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...ts,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"});var td=n(892845),tc=n(220153),tu=n(295870),tm=n(931547),tp=n(517478),th=n(310955),tf=n(323264),tg=n(100029),tx=n(794172),t_=n(341801),ty=n(714778),tb=n(585066),tv=n(227517),tC=n(375296),tE=n(27414),tw=n(338630),tk=n(388627),tT=n(680912),tj=n(223487),tS=n(13939),tI=n(558604),tA=n(795867),tN=n(581121),tM=n(834163);let tR=(0,i.jsx)(ty.Ph,{newTab:!0,trusted:!0,href:tN._t,children:(0,d.tx)("general.learn_more")});function tP({id:e,header:t,headerPopoverContent:n,title:r,subtitle:a,numAvailable:s,numTotal:o,isInactive:l}){let d=t&&(0,i.jsx)("div",{...tf.xk(th.g.textBodyMediumStrong),children:t}),c=n&&(0,i.jsx)("div",{"data-testid":`${e}-popover`,...tf.xk(th.g.textBodyMedium),children:n});return(0,i.jsx)("div",{"data-testid":`${e}-container`,...{0:{className:"x1sjmt1f x19y5rnk xgk9eko x1akne3o xh8yej3"},1:{className:"x19y5rnk xh8yej3 x16v0e3u xmkeg23 x1y0btm7 x7z60cl x1gnnqk1 x1n0bwc9"}}[!!l<<0],children:(0,i.jsxs)(tv.Y,{direction:"vertical",spacing:8,padding:{top:12,left:16,bottom:16,right:16},children:[(0,i.jsxs)("div",{children:[n&&d&&(0,i.jsx)(tx.b,{text:d,popoverContent:c,type:"tooltip"}),!n&&d,r&&(0,i.jsx)("div",{id:e,...tf.xk(th.g.textBodyMediumStrong),children:r}),a&&(0,i.jsx)("div",{...tf.xk(th.g.textBodyMedium,tV.balanceSubtitle),children:a})]}),(0,i.jsx)(t_.A.Root,{id:`${e}-meter`,"data-testid":`${e}-meter`,"aria-labelledby":e,value:s,max:o,className:"xols6we x1mxnbhz xh8yej3 x176lpz5",children:(0,i.jsx)(t_.A.Bar,{...{0:{className:"xols6we x1mxnbhz xdq5r5b"},1:{className:"xols6we x1mxnbhz x1evwjr3"}}[!!l<<0]})})]})})}function tO({plan:e,planUser:t,planBalance:n,planUserBalance:r,resetDate:a}){let{monthly_summary:s}=r,o=s.total,l=s.available,c=0===l?(0,d.t)("ai-balance.empty"):(0,d.t)("ai-balance.num-credits-left",{numCredits:l.toLocaleString()}),u=e.name,m=(0,tI.BG)(t),p=e.activeTrialLicenseTypes?.includes(et.G_.FIGMAKE)?(0,d.tx)("ai-balance.plan-credits-with-monthly-limit-and-shared-credits-learn-more",{planName:u,numCredits:o.toLocaleString(),learnMoreLink:tR}):(0,d.tx)("ai-balance.seat-in-plan-credits-with-monthly-limit-and-shared-credits-learn-more",{seatType:(0,tC.JT)(m),planName:u,numCredits:o.toLocaleString(),learnMoreLink:tR}),h=n.total,f=n.available,g=0===f?(0,d.t)("ai-balance.empty"):(0,d.t)("ai-balance.num-credits-left",{numCredits:f.toLocaleString()}),x=l>0,_=!x&&f>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tP,{id:"ai-balance-modal-seat-credits",header:(0,d.t)("ai-balance.seat-credits"),headerPopoverContent:p,title:c,numAvailable:l,numTotal:o,isInactive:!x}),(0,i.jsx)(tP,{id:"ai-balance-modal-plan-credits",header:(0,d.t)("ai-balance.shared-credits"),headerPopoverContent:(0,d.tx)("ai-balance.plan-has-up-to-num-additional-credits-for-members-to-share",{planName:u,numCredits:h.toLocaleString(),learnMoreLink:tR}),title:g,numAvailable:f,numTotal:h,isInactive:!_}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,d.tx)("ai-balance.credits-reset",{resetDate:a})})]})}function tD({plan:e,planUser:t,planUserBalance:n,resetDate:r}){let a,s;let{daily_summary:o,monthly_summary:l}=n,c=l.total,u=l.available,m=0===u?(0,d.t)("ai-balance.empty"):(0,d.t)("ai-balance.num-credits-left",{numCredits:u.toLocaleString()}),p=e.tier,h=e.name,f=e.activeTrialLicenseTypes?.includes(et.G_.FIGMAKE)??!1,g=(0,tI.BG)(t);return o?(l.available>=o.total&&(s=(0,d.t)("ai-balance.num-credits-available-today",{numCredits:o.available.toLocaleString()})),a=function({planTier:e,planName:t,seatType:n,numTotalMonthlyCredits:i,numTotalDailyCredits:r,resetDate:a}){if(e===et.Ag.STARTER)return(0,d.tx)("ai-balance.seat-in-starter-plan-credits-with-daily-limit-and-reset-date-learn-more",{planName:t,numMonthlyCredits:i.toLocaleString(),numDailyCredits:r.toLocaleString(),resetDate:a,learnMoreLink:tR});let s=(0,tC.JT)(n);return(0,d.tx)("ai-balance.seat-in-plan-credits-with-daily-limit-and-reset-date-learn-more",{seatType:s,planName:t,numMonthlyCredits:i.toLocaleString(),numDailyCredits:r.toLocaleString(),resetDate:a,learnMoreLink:tR})}({planTier:p,planName:h,seatType:g,numTotalMonthlyCredits:c,numTotalDailyCredits:o.total,resetDate:r})):a=function({planTier:e,planName:t,seatType:n,numTotalMonthlyCredits:i,resetDate:r,omitSeatType:a,bypassMetering:s}){if(e===et.Ag.STUDENT)return(0,d.tx)("ai-balance.seat-in-edu-plan-credits-with-daily-limit-and-reset-date-learn-more",{planName:t,numCredits:i.toLocaleString(),resetDate:r,learnMoreLink:tR});let o=(0,tC.JT)(n);return s?a?(0,d.tx)("ai-balance.soft-limit-in-plan-with-future-credit-limit",{planName:t,numTotalMonthlyCredits:i.toLocaleString()}):(0,d.tx)("ai-balance.soft-limit-for-seat-in-plan-with-future-credit-limit",{seatType:o,planName:t,numTotalMonthlyCredits:i.toLocaleString()}):a?(0,d.tx)("ai-balance.plan-credits-with-monthly-limit-and-reset-date-learn-more",{planName:t,numCredits:i.toLocaleString(),resetDate:r,learnMoreLink:tR}):(0,d.tx)("ai-balance.seat-in-plan-credits-with-monthly-limit-and-reset-date-learn-more",{seatType:o,planName:t,numCredits:i.toLocaleString(),resetDate:r,learnMoreLink:tR})}({planTier:p,planName:h,seatType:g,numTotalMonthlyCredits:c,resetDate:r,omitSeatType:f,bypassMetering:!!l.bypass_metering}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tP,{id:"ai-balance-modal-seat-credits",title:m,subtitle:s,numAvailable:u,numTotal:c,isInactive:!(u>0)}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:a})]})}function tL(){let e=(0,tk.L)(tu.e.MONETIZATION_EXPANSION),t=(0,tj.q5)(),n=t?.key||null,r=(0,tS.lW)(n,void 0,!0),a=(0,tS.aN)(n,void 0,!0),s=r?.data?.planRecordId||null,[o]=(0,tg.pp)(s),[l]=(0,tg.C_)(s);if("loading"===r.status||"loading"===a.status||"loading"===o.status||"loading"===l.status)return(0,i.jsx)("div",{className:"xk0qfmw x143tcsw x11md1zd x78zum5 x6s0dn4 xl56j7k",children:(0,i.jsx)(tb.k,{size:"sm"})});if(null===r.data)throw Error("Plan data is null");if(null===a.data)throw Error("Plan user data is null");if(null==o.data)throw Error("Plan balance data is null");if(null==l.data)throw Error("Plan user balance data is null");let{monthly_summary:d}=l.data,c=d.resets_at?(0,tT.A0)(new Date(d.resets_at)):void 0;if(!c)throw Error("Monthly balance summary has invalid reset date");let u=o.data.resets_at?(0,tT.A0)(new Date(o.data.resets_at)):void 0;if(!u)throw Error("Monthly plan balance summary has invalid reset date");let m=r.data.tier,p=(0,tI.BG)(a.data),h=o.data.total>0;return(0,i.jsx)(tw.fu,{name:tA.e0.AI_BALANCE_MODAL,properties:{seatType:p,tier:m},trackingOptions:e,children:(0,i.jsxs)("div",{className:"xk0qfmw x1akne3o x78zum5 xdt5ytf x1v2ro7d x143tcsw x3enpkt xkdneqi x13faqbe",children:[h&&(0,i.jsx)(tO,{plan:r.data,planUser:a.data,planBalance:o.data,planUserBalance:l.data,resetDate:u}),!h&&(0,i.jsx)(tD,{plan:r.data,planUser:a.data,planUserBalance:l.data,resetDate:c})]})})}function tF(){return(0,i.jsx)("div",{className:"xk0qfmw x143tcsw xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9",children:(0,i.jsx)(tv.Y,{direction:"vertical",spacing:0,children:(0,i.jsx)("div",{children:(0,d.t)("ai-balance.could-not-load-please-refresh")})})})}function tB(){return(0,i.jsx)(_.u9,{label:"AiBalanceModalContent",children:(0,i.jsx)(b.tH,{boundaryKey:"AiBalanceModalContent",team:tu.e.MONETIZATION_EXPANSION,fallback:tF,children:(0,i.jsx)(tL,{})})})}function tU(){let e=(0,a.wA)(),t=r.useRef(null),n=()=>{e(tE.XE())};(0,tM.Y)(n,{ignore:[t]});let s=new e_.Mi(window.innerWidth/2-120,window.innerHeight/3);return(0,i.jsx)(tm.bL,{ref:t,onClose:n,draggable:"header",defaultPosition:s,children:(0,i.jsxs)(tp.vo,{children:[(0,i.jsx)(tp.Y9,{children:(0,i.jsx)(tp.hE,{children:(0,d.t)("general.ai_credits")})}),(0,i.jsx)(tp.nB,{padding:0,children:(0,i.jsx)(tB,{})})]})})}let tV={balanceSubtitle:{kMwMTN:"x1n0bwc9",$$css:!0}};var tH=n(224542),tz=n.n(tH),tG=n(490096),tK=n(689966);function tW(){let e=Array.from((0,H.ut)(o.Ez5?.uiState().autoLayoutShortcutHints,new Map).values()),t=(0,m.md)(e9.Bu),n=tK.y.isApple(),r=e=>{switch(e){case eH.oe.IGNORE_AUTOLAYOUT:return{displayName:(0,d.t)("fullscreen.auto_layout_hints.ignore_auto_layout"),shortcutText:n?"\u2303 Ctrl":"S"};case eH.oe.PREVENT_NESTING:return{displayName:(0,d.t)("fullscreen.auto_layout_hints.prevent_nesting"),shortcutText:(0,d.t)("fullscreen.auto_layout_hints.space_key")};case eH.oe.FORCE_INSERTION:return{displayName:(0,d.t)("fullscreen.auto_layout_hints.force_insertion"),shortcutText:n?"\u2318":"Ctrl"}}},a=e=>e.isValid?e.isActive?"auto_layout_hints--activeShortcutWithTextContainer--aCTx- auto_layout_hints--shortcutWithTextContainer--GP-YU":"auto_layout_hints--shortcutWithTextContainer--GP-YU":"auto_layout_hints--invalidShortcutWithTextContainer--rAXBM auto_layout_hints--shortcutWithTextContainer--GP-YU";return e?(0,i.jsx)("div",{className:tz()("auto_layout_hints--root--zCgFr",{"auto_layout_hints--rootAdjustedForQA--CTZUI":t}),children:(0,i.jsx)("div",{className:"auto_layout_hints--hintsBarContainer--dU568",children:e.sort((e,t)=>e.shortcut-t.shortcut).map((e,t)=>{let n=r(e.shortcut);return(0,i.jsxs)("div",{className:a(e),children:[(0,i.jsx)("div",{className:e.isActive&&e.isValid?"auto_layout_hints--activeShortcutContainer--x2Jhx auto_layout_hints--shortcutContainer--Ss-wK":"auto_layout_hints--shortcutContainer--Ss-wK",children:n.shortcutText.length>0?(0,i.jsx)("div",{className:"auto_layout_hints--smallShortcutText--Akm4l",children:n.shortcutText}):(0,i.jsx)(tG.S,{shortcut:n.shortcutText})}),(0,i.jsx)("p",{children:n.displayName})]},t)})})}):null}var tq=n(288350),tX=n(556581),tY=n(943360),tJ=n(942356),tZ=n(248317),tQ=n(253983),t$=n(933870),t0=n(154963),t1=n(543595),t2=n(712650),t5=n(1470),t4=n(237494);let t3=0;class t6{constructor(){this.work=()=>{let e=this.jobs.shift();if(e)try{let t=e.callback();e.resolve(t)}catch(t){e.reject(t)}},this.jobs=[]}isDone(){return 0===this.numJobs()}numJobs(){return this.jobs.length}cancelJobs(e){this.jobs=this.jobs.filter(t=>-1===e.indexOf(t.jobId))}queueJob(e){let t,n;let i=new Promise((e,i)=>{t=e,n=i}),r=++t3;return this.jobs.push({jobId:r,resolve:t,reject:n,callback:e}),{promise:i,jobId:r}}}let t7={requestAnimationFrame:e=>requestAnimationFrame(e),computeElapsedTime:e=>{let t=Date.now();return e(),Date.now()-t}},t9=new class{constructor(e={}){this.tick=()=>{if(!this.isTickScheduled)throw Error("wat, how did tick() get called if we're not ticking?");let e=0,t=0;for(;t<this.msPerTick&&!this.queuedWorker.isDone();)t+=this.utils.computeElapsedTime(this.queuedWorker.work),e++;this.debug&&console.log(`did ${e} jobs in ${t} ms`),this.isTickScheduled=!1,this.queuedWorker.isDone()||this.requestTick()},this.requestTick=()=>{this.isTickScheduled||(this.isTickScheduled=!0,this.utils.requestAnimationFrame(this.tick))},this.numJobs=()=>this.queuedWorker.numJobs(),this.queueJob=e=>{let{promise:t,jobId:n}=this.queuedWorker.queueJob(e);return this.requestTick(),{promise:t,jobId:n}},this.queuedWorker=new t6,this.isTickScheduled=!1,this.msPerTick=e.msPerTick||6,this.utils=e.utils||t7,this.debug=!0===e.debug}cancelJobs(e){this.queuedWorker.cancelJobs(e)}}({debug:!1});var t8=n(233631),ne=n(123973),nt=n(652604),nn=n(354099),ni=n(814213),nr=n(419312),na=n(457479),ns=n(910175),no=n(684520),nl=n(236410),nd=n(818350),nc=n(234522),nu=n(582902),nm=n(530979),np=n(892691),nh=n(890305);let nf="export_picker--header--4Gahw",ng="export_picker--labelWithoutCheckbox--oKi-F export_picker--label--CWwwJ";var nx=n(137187);let n_=(0,O.hG)(W.zK5);function ny(){let e=(0,tj.q5)(),t=(0,a.d4)(e=>e.exportableItems),n=(0,a.d4)(e=>e.dropdownShown),s=!!e&&(0,ns.Pe)(e),o=(0,tQ.Av)(),l=(0,a.d4)(e=>e.saveAsState),u=(0,a.d4)(e=>e.mirror.appModel.currentPage),m=(0,a.wA)(),p=()=>{m(tE.XE())},h=new e_.Mi(window.innerWidth-n_,o+12);r.useEffect(()=>{m((0,nt.HR)())},[m]);let f=(0,i.jsx)("div",{className:"export_picker--exportModalContainer--9qTfr",children:(0,i.jsx)(nC,{exports:t,isCopyExportRestricted:s,width:n_,dispatch:m,dropdownShown:n,saveAsState:l,currentPage:u})});return(0,c.kc)().ce_tv_fpl_export_picker?(0,i.jsx)(tm.bL,{onClose:p,draggable:"header",defaultPosition:h,children:(0,i.jsxs)(tp.vo,{children:[(0,i.jsx)(tp.Y9,{children:(0,i.jsx)(tp.hE,{children:(0,d.t)("fullscreen.properties_panel.export")})}),(0,i.jsx)(tp.nB,{padding:0,children:f})]})}):(0,i.jsx)(nh.Ao,{title:(0,d.t)("fullscreen.properties_panel.export"),headerSize:"small",initialPosition:h,onClose:p,dragHeaderOnly:!0,headerClassName:"export_picker--modalHeader--k0HKf",children:f})}let nb=new t4.mz;function nv({nodeID:e,title:t,filename:n,exportSetting:a,colorProfile:s=ez.RY.SRGB,isBeingRenamed:l,...c}){let[u,m]=(0,r.useState)({size:"",warning:"",warningTooltip:""}),[p,h]=(0,r.useState)(""),f=(0,ni.A0)(o.uQ6.EXPORT_PICKER);(0,r.useEffect)(()=>{let i={guid:e,title:t,filename:n,exportSetting:a},r=o.glU.getExportWarningAndSize(i);if(r){let{size:e,warning:t,warningTooltip:n}=r;m({size:e,warning:t,warningTooltip:n})}else console.error("Failed to export",i);let l=!!a.contentsOnly,d=(0,eR.gl)(a)?s:(0,t8.A)([a],s),{jobId:c}=t9.queueJob(()=>{let t=na._G(new e_.Mi(32,32),e,l),n="";t&&t.pixels&&t.pixelSize&&t.displaySize&&(n=na.Pv(t.pixels,t.pixelSize,d)),h(n)});return()=>t9.cancelJobs([c])},[s,a,n,e,t]);let{onToggleChecked:g,isChecked:x,isDisabled:_}=c,{imageType:y}=a,b=c.warning??u.warning,v=c.warningTooltip??u.warningTooltip,C=(0,r.useId)(),E=`${C}-input`,w=`${C}-export-name`,k=`${C}-desc`,T=`${C}-title`;return(0,i.jsxs)("div",{className:"export_picker--row--P7rR3",children:[(0,i.jsx)(tq.h,{htmlFor:E,children:(0,d.t)("fullscreen.export.select_for_export")}),(0,i.jsx)(tX.W,{id:E,checked:x,onChange:g,disabled:_,"aria-describedby":`${w} ${k}`}),(0,i.jsx)(tY.E,{className:"export_picker--thumbContainer--AwFrc",onClick:t=>{t.preventDefault(),o.glU?.panToNode(e,!1)},"data-tooltip-type":nl.Ib.TEXT,"data-tooltip":n,"aria-label":(0,d.t)("fullscreen.export.view_selection_on_canvas"),"aria-describedby":T,children:!!p&&(0,i.jsx)("img",{src:p,className:"export_picker--thumb--lyhs6",alt:""})}),(0,i.jsx)("div",{id:w,className:"export_picker--label--CWwwJ",children:(0,i.jsxs)("div",{className:"export_picker--nameInfo--mpG0F export_picker--twoRows--DaEXa",children:[(0,i.jsx)("div",{className:tz()("export_picker--name--7Y7Jw ellipsis--ellipsis--70pHK",{"export_picker--nameRenaming--C3waM":f&&l}),id:T,children:t}),b&&(0,i.jsxs)("div",{className:"export_picker--warningRow--5U2Px",children:[(0,i.jsx)(eN.B,{className:"export_picker--warningIcon--dRrSh",svg:nx.A,"data-tooltip-type":nl.Ib.TEXT,"data-tooltip":v}),(0,i.jsx)("span",{className:"export_picker--warning--XLcKT ellipsis--ellipsis--70pHK",children:b})]})]})}),(0,i.jsxs)("div",{className:"export_picker--settingsInfo--19aKd export_picker--twoRows--DaEXa",id:k,children:[(0,i.jsxs)("div",{children:[nb.format(a.constraint)," ",y]}),(0,i.jsx)("div",{children:u.size})]})]})}class nC extends r.PureComponent{constructor(){super(...arguments),this.state={renamingLayersRunning:!1,downloadStarted:!1,exportingStarted:!1,exportingProgress:0,exportingTotal:0,exportingJobIds:[]},this.onCancel=()=>{this.props.dispatch(tE.XE())},this.autoRenameFrameAndFile=async e=>{if(0===e.length)return;this.setState({renamingLayersRunning:!0}),this.props.exports.items.forEach(t=>{e.includes(t.nodeID)&&(t.isBeingRenamed=!0)}),m.zl.set(nm.zF,(0,nn.Tr)(o.uQ6.EXPORT_PICKER)),(0,nd.B3)(tN.JT.AUTO_RENAME_LAYERS),await (0,nd.Ag)(tN.JT.AUTO_RENAME_LAYERS,nn.Ay,{source:o.uQ6.EXPORT_PICKER,overwriteNames:!1,customNodeSelection:e,ignoreDescendants:!0});let t=(0,nd.pP)(tN.JT.AUTO_RENAME_LAYERS).state;t===nd.qy.DONE?this.props.exports.items.forEach(t=>{if(!e.includes(t.nodeID))return;let n=P.UN().get(t.nodeID)?.name;t.filename=t.filename.replace(t.title,n||t.title),t.title=n||t.title,t.isBeingRenamed=!1}):(t===nd.qy.ERROR||t===nd.qy.CANCELLED)&&this.props.exports.items.forEach(e=>{e.isBeingRenamed=!1}),this.setState({renamingLayersRunning:!1})},this.cancelAutoRename=()=>{let{aiTrackingContext:e}=(0,nd.pP)(tN.JT.AUTO_RENAME_LAYERS),t={...e,...(0,nc.LU)({shortcut:null,target:null}),interaction:nu.Ek.STOP};(0,nd.cT)(tN.JT.AUTO_RENAME_LAYERS),(0,nc.nP)(t)},this.onExport=e=>{if(this.props.isCopyExportRestricted||((0,ek.sx)("Export Picker Exported"),this.state.downloadStarted||this.state.exportingStarted||this.isExporting()||0===e.length))return;let t=[this.props.currentPage];nr.xY.includeOutsideContents(e.map(e=>e.exportSetting))||(t=e.map(e=>e.nodeID)),this.setState({downloadStarted:!0}),(0,no.Dc)(no.hV.Export,this.props.saveAsState,this.props.dispatch,()=>{this.setState({exportingStarted:!0,downloadStarted:!1}),this.exportItemsWithFullscreen(e)},t,"export-picker")},this.exportItemsWithFullscreen=e=>{let t=e.map(e=>({guid:e.nodeID,title:e.title,filename:e.filename,exportSetting:e.exportSetting})),n=0;o.glU.clearExportedItems();let i=t.map(e=>t9.queueJob(()=>o.glU.exportItem(e))),r=i.map(e=>e.promise);r.forEach(e=>e.then(()=>this.setState({exportingProgress:++n}))),this.setState({exportingProgress:0,exportingTotal:t.length,exportingJobIds:i.map(e=>e.jobId)}),Promise.all(r).then(()=>{this.setState({exportingJobIds:[]}),o.glU.saveExportedItems(),this.props.dispatch(tE.XE()),this.props.dispatch(t2.rg()),(0,t1.YQ)({id:"export_completed",properties:{from:"export_picker"}})})},this.setAllChecked=e=>{this.props.exports.items.forEach((t,n)=>{this.props.dispatch(t5.G({itemID:t.itemID,checked:e}))})},this.setChecked=(e,t)=>{this.props.dispatch(t5.G({itemID:e.itemID,checked:t}))},this.isChecked=e=>this.props.exports.checked[e.itemID],this.renderRenameLayersButton=e=>{let{detectedUnnamedLayers:t,exceedingLayerLimit:n,renamableNodeGuids:r}=(0,ni.Mc)(e.map(e=>e.nodeID),!0),a=this.state.renamingLayersRunning?this.cancelAutoRename:()=>this.autoRenameFrameAndFile(r),s=!(t&&!n)||this.state.downloadStarted||this.state.exportingStarted;return(0,i.jsx)(tJ.Pw,{variant:"secondary",onClick:a,disabled:s,children:this.state.renamingLayersRunning?(0,d.tx)("fullscreen.export.cancel"):(0,i.jsxs)("div",{className:t0.s.flex.flexRow.justifyCenter.gap8.$,children:[(0,d.tx)("fullscreen.context_menu.auto_rename_layers"),(0,i.jsx)(np.yi,{helpUrlVariant:tN.JT.AUTO_RENAME_LAYERS})]})})}}isExporting(){return this.state.exportingJobIds&&this.state.exportingJobIds.length>0}componentWillUnmount(){this.isExporting()&&t9.cancelJobs(this.state.exportingJobIds)}getItemsToExport(){return this.props.exports.items?this.props.exports.items.filter(e=>this.isChecked(e)):[]}renderHeader(){if(this.isExporting())return(0,i.jsxs)("div",{className:nf,children:[(0,i.jsx)("label",{className:ng,children:(0,d.tx)("fullscreen.export.preparing_exporting_progress_of_exporting_total",{exportingProgress:this.state.exportingProgress,exportingTotal:this.state.exportingTotal})}),(0,i.jsx)(tJ.$n,{variant:"secondary",onClick:this.onCancel,children:(0,d.tx)("fullscreen.export.cancel")})]});if(this.state.exportingStarted||!this.props.saveAsState.startTime&&this.state.downloadStarted)return(0,i.jsx)("div",{className:nf,children:(0,i.jsx)("label",{className:ng,children:(0,d.tx)("fullscreen.export.exporting")})});if(this.state.downloadStarted){if(!(this.props.saveAsState.totalImagesToDownload>0))return(0,i.jsx)("div",{className:nf,children:(0,i.jsx)("label",{className:ng,children:(0,d.tx)("fullscreen.export.downloading")})});{let e=Math.min(this.props.saveAsState.totalImagesToDownload,this.props.saveAsState.totalImagesToDownload-this.props.saveAsState.remainingImagesToDownload);return(0,i.jsxs)("div",{className:nf,children:[(0,i.jsx)("label",{className:ng,children:(0,d.tx)("fullscreen.export.downloading_progress",{downloadingProgress:e,downloadingTotal:this.props.saveAsState.totalImagesToDownload})}),(0,i.jsx)(tJ.$n,{variant:"secondary",onClick:this.onCancel,children:(0,d.tx)("fullscreen.export.cancel")})]})}}{let e=this.props.exports.items||[],t=e.filter(this.isChecked).length,n=e.length,r=n===t;return(0,i.jsxs)("div",{className:nf,children:[(0,i.jsx)(tZ.S,{checked:r,mixed:!r&&t>0,onChange:()=>this.setAllChecked(!r),label:(0,i.jsx)(tq.J,{children:(0,d.tx)("fullscreen.export.num_selected_of_total_selected",{numSelected:t,total:n})})}),(0,i.jsx)("span",{className:"export_picker--flexRight--y2UVV",children:(0,i.jsx)(tJ.$n,{variant:"secondary",disabled:!t,onClick:()=>this.onExport(this.getItemsToExport()),autoFocus:!0,children:(0,d.tx)("fullscreen.export.export")})})]})}}render(){let e=this.props.exports.items&&this.props.exports.items.length>0,t=(0,ni.A0)(o.uQ6.EXPORT_PICKER);return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"export_picker--modal--XAbPh",children:[this.renderHeader(),(0,i.jsxs)(t$.P,{width:this.props.width,className:"export_picker--scrollContainer--sdzXj",children:[!e&&(0,i.jsx)("div",{className:"export_picker--emptyModal--vv8Vh",children:(0,d.tx)("fullscreen.export.no_selected_layers_with_export")}),(0,i.jsx)(ne.ZH,{children:({documentExportColorProfile:n})=>e&&this.props.exports.items.map((e,r)=>(0,i.jsx)(nv,{colorProfile:n,isDisabled:this.isExporting(),isChecked:this.isChecked(e),onToggleChecked:()=>this.setChecked(e,!this.isChecked(e)),isBeingRenamed:t&&e.isBeingRenamed,...e},r))})]}),t&&(0,i.jsx)("div",{className:"export_picker--footer---pMfu",children:this.renderRenameLayersButton(this.getItemsToExport())})]})})}}nC.displayName="ExportPicker";var nE=n(777100),nw=n(104626),nk=n(294407),nT=n(562418),nj=n(707470),nS=n(1007),nI=n(890030),nA=n(421564),nN=n(665933),nM=n(842708);let nR=(0,O.jz)(W.ZAq);function nP({subscribeToUpdates__EXPENSIVE:e}){let t=(0,nS._X)({subscribeToUpdates_expensive:e}),n=(0,nT.ow)(),i=(0,nN.Ye)(),a=(0,tQ.Pg)(),s=(0,nj._o)(),{left:o,right:l}=(0,nk.LO)();return r.useCallback((e,r,d)=>{let c={top:s,left:i||n?0:o,right:t.x+t.width-(Math.max(n?0:l,d+12)+8),bottom:t.height-(a+nR+16)},u=12;e<c.left?u=c.left+12:e>c.right&&(u=-(d+4));let m=12;return r>c.bottom&&(m=Math.min(c.bottom+12-(r+8),-(a+24))),{x:u,y:m}},[n,t,i,a,s,o,l])}var nO=n(522645),nD=n(819149);let nL={type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL"};function nF({initialPosition:e,initialCreationColor:t,initialView:n,disableStyleModal:s,onClose:d}){let{VariableAndStyleCreateModalRoot:c}=r.useContext(nD.l)??{},u=(0,a.d4)(e=>e.pickerShown),m=(0,a.wA)();function p(){(tE.Ty(u?.id??null)||tE.kU(u?.id??null))&&m(tE.XE())}let h=r.useMemo(()=>({type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:t}),[t]);return e&&c?(0,i.jsx)(c,{disableStyleModal:s,inheritStyleKeyField:"inheritFillStyleKey",initialPosition:e,initialStyleCreationPaint:nL,initialVariableValue:h,initialView:n,onClose:d,onCreateStyle:function(e){ew.l7.system("create-new-style-from-eyedropper",()=>{o.OmW?.applyPaint(nO.oU(t),null,e.node_id),p()})},onCreateVariable:function(e){let n=Object.values(e.modeValues)?Object.values(e.modeValues)[0]:null,i=(0,nO.oU)(n?.type===l.Z_n.COLOR?n.value:t);o.OmW?.applyPaint(i,e.node_id,null),p()},resolvedType:l.rXF.COLOR,shouldUseEyedropperStyleCreationFlow:!0}):null}var nB=n(769347),nU=n(746159),nV=n(127446),nH=n(250600),nz=n(732838),nG=n(276326),nK=n(287736),nW=n(997594),nq=n(278825),nX=n(841301),nY=n(929646),nJ=n(508902);let nZ=(0,m.eU)(!1);var nQ=n(340328),n$=n(596611),n0=n(789631),n1=n(206390),n2=n(450332),n5=n(805242),n4=n(828269),n3=n(890049);class n6 extends r.Component{static getDerivedStateFromError(e){return{}}componentDidCatch(e,t){if((0,n4.isErrorCausedByWindowClose)(e))(0,eG.xi)("FloatingWindowErrorBoundary","Ignoring IPC error",{error:e,errorInfo:t},{reportAsSentryError:!1});else throw e}render(){return this.props.children}}function n7({children:e,initialWidth:t,initialHeight:n,initialMinHeight:i,initialExtraFeatures:a,onChangePosition:s,hidden:o}){if(!nz.eD||!nz.eD.isFloatingWindowAvailable())throw Error("DesktopFloatingWindow: rendered with unsupported desktop app version");let[l,d]=(0,r.useState)(null),c=(0,r.useRef)(l),u=(0,r.useRef)(t),m=(0,r.useRef)(n),p=(0,r.useRef)(i),h=(0,r.useRef)(a),f=(0,r.useRef)(s),g=(0,r.useRef)(null),x=(0,r.useCallback)(e=>{null!=g.current&&g.current.displayId!==e.displayId&&requestAnimationFrame(()=>{null!=c.current&&(0,n4.withFloatingWindowAPI)(c.current,e=>{e.readyToDisplay()})}),g.current=e,f.current?.(e)},[]),_=(0,r.useCallback)(()=>{let e=`width=${u.current},height=${m.current},floatingWindow=true`;null!=p.current&&(e+=`,minHeight=${p.current}`),null!=h.current&&(e+=`,${h.current}`);let t=window.open("about:blank","_blank",e);if(null==t)return(0,eG.x1)("DesktopFloatingWindow","Unable to open floating window"),null;t.document.body.style.overflow="hidden",function(e){let t=0,n=()=>{(t-=1)<=0&&e.requestAnimationFrame(()=>{e.getComputedStyle(e.document.body).width,e.requestAnimationFrame(()=>{(0,n4.withFloatingWindowAPI)(e,e=>{e.readyToDisplay()})})})};for(let t of(e.document.body.classList.add(n3.xE),document.body.attributes))t.name.startsWith("data-")&&e.document.body.setAttribute(t.name,t.value);for(let i of(e.document.body.style.colorScheme=document.body.style.colorScheme,document.querySelectorAll("link[rel=stylesheet], style"))){let r=i.cloneNode(!0);"LINK"===r.tagName&&(t+=1,r.addEventListener("load",n),r.addEventListener("error",n),r.setAttribute("blocking","render")),e.document.head.appendChild(r)}0===t&&n()}(t),(0,n4.withFloatingWindowAPI)(t,e=>{e.onChangePosition(x)}),d(t),c.current=t,t.addEventListener("close",()=>{d(null),c.current=null})},[x]),y=!!e;return((0,r.useEffect)(()=>{y?_():d(null)},[y,_]),(0,r.useEffect)(()=>{if(null!=l)return()=>{(0,n4.suppressingErrorsCausedByWindowClose)(()=>{l.close()})}},[l]),(0,r.useEffect)(()=>{null!=l&&(0,n4.withFloatingWindowAPI)(l,e=>{o?e.hideWindow():e.showWindow()})},[l,o]),null!=l)?n5.createPortal(e,l.document.body):null}function n9(e){return(0,i.jsx)(n6,{children:(0,i.jsx)(n7,{...e})})}function n8({children:e,loupeWidth:t,loupeHeight:n,panelWidth:a,panelHeight:s,hidden:o,onClick:l}){let[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!0),[g,x]=(0,r.useState)(!1),_=d?16:16+a+24,y=m===h?16:16+s+24;h||(y=-y);let b=r.useRef(null),v=r.useRef(null),C=(0,r.useCallback)(e=>{n5.flushSync(()=>{x(!0),e()}),b.current?.getBoundingClientRect(),n5.flushSync(()=>{x(!1)})},[]),E=(0,r.useCallback)(e=>{let t=v.current;v.current=e;let n=t?.yZone===n4.FloatingWindowVerticalZone.NN||t?.yZone===n4.FloatingWindowVerticalZone.N,i=e.yZone===n4.FloatingWindowVerticalZone.NN||e.yZone===n4.FloatingWindowVerticalZone.N,r=()=>{f(!i),u(e.xZone===n4.FloatingWindowHorizontalZone.EE),p(e.yZone===n4.FloatingWindowVerticalZone.SS)};null==t||n!==i||t.displayId!==e.displayId?C(r):r()},[C]);return(0,i.jsxs)(n9,{initialWidth:(a+12+16)*2,initialHeight:(s+12+16)*2,initialMinHeight:s+16,initialExtraFeatures:(0,c.kc)().desktop_global_eyedropper?`eyedropper=1,eyedropperWidth=${t},eyedropperHeight=${n}`:void 0,onChangePosition:E,hidden:o,children:[(0,i.jsx)("div",{onClick:l,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),(0,i.jsx)("div",{ref:b,style:{position:"absolute",height:s,width:a,left:0,[h?"top":"bottom"]:0,transform:`translate(${_}px, ${y}px)`,transition:g?void 0:"transform 0.2s ease-in-out"},children:e})]})}var ie=n(102462),it=n(526575);let ii=document.createElement("canvas"),ir=ii.getContext("2d"),ia=(e,t,n,i,r,a)=>{e.save();{let s=t/2;a?e.roundRect?e.roundRect(0,0,48,48,5):e.rect(0,0,48,48):e.arc(s,s,s-2,0,2*Math.PI,!1),e.clip();let{width:o,height:l,rgba:d,grid:c}=r;if(ir&&o&&l){let n=ir.createImageData(o,l,{colorSpace:r.colorProfile===ez.RY.DISPLAY_P3?"display-p3":"srgb"});n.data.set(d),ii.width=o,ii.height=l,ir.putImageData(n,0,0),e.imageSmoothingEnabled=!1,e.drawImage(ii,0,0,t,t)}if(c){e.beginPath();let r=a?1:0,s=a?-.5:.5;for(let a=1;a<i;a++)s+=n,e.moveTo(s,r),e.lineTo(s,t-r),e.moveTo(r,s),e.lineTo(t-r,s);e.strokeStyle=a?"rgba(0, 0, 0, 0.1)":"rgba(51, 51, 51, 0.2)",e.stroke()}}e.restore()},is=(e,t,n,i)=>{i||(e.strokeStyle="white",e.strokeRect(t-n/2-.5,t-n/2-.5,n+2,n+2),e.strokeStyle="black",e.strokeRect(t-n/2+.5,t-n/2+.5,n,n))},io=(e,t,n)=>{if(n){e.beginPath(),e.roundRect?e.roundRect(0,0,348,548,5):e.rect(0,0,348,548),e.strokeStyle="rgba(0, 0, 0, 0.1)",e.stroke();return}e.beginPath(),e.arc(t,t,t-1,0,2*Math.PI,!1),e.strokeStyle="white",e.stroke(),e.beginPath(),e.arc(t,t,t-2,0,2*Math.PI,!1),e.strokeStyle="black",e.stroke()},il="eyedropper_v2--text--p9MAD",id="eyedropper_v2--rowContents--SZ6nB",ic="eyedropper_v2--chit--HLu11";function iu({eyedropper:e,onOpenCreationModal:t}){let n,s;let u=function(){let e=(0,a.d4)(e=>e.eyedropper),t=(0,a.d4)(e=>e.library.local.styles),n=(0,m.md)(nM.Cg),i=(0,a.d4)(e=>e.library.used__LIVEGRAPH.styles);if(!e)return null;let r=e.assetId,s={},l=e.variableSetModeId;if(""===r)return null;let d=null,c=null;if(nw.PK.isValid(r)){if(d=nw.PK.toGuidStrIfLocal(r)){if(d in t){let e={style:t[d]};return s[d]=e,e}}else if(c=nw.PK.toRefIfSubscribed(r)){d=nw.PK.fromRef(c);let e=(0,nI.yh)(c.key,i,{}),t=null;return e&&(t={style:e},s[d]=t),t}}else if(nw.sD.isValid(r)){if((d=nw.sD.toString(r))in n){let e={variable:n[d],variableModeId:l};return s[d]=e,e}let e=o.CWU?.getSubscribedVariableInfo(d);if(e){let t={variable:(0,nA.ZI)(e),variableModeId:l};return s[d]=t,t}}return d&&d in s?s[d]:null}(),p=(0,a.wA)(),h=function(){let e=o.Ez5?.uiState().backgroundPickerOpen.getCopy(),t=(0,a.d4)(e=>e.mirror.appModel.prototypeBackgroundPickerOpen),n=(0,a.d4)(e=>e.variablePickerShown.isShown),i=(0,a.d4)(e=>e.mirror.appModel.currentSelectedProperty),r=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected);return e||t||n||i.type!==l.rrT.NONE||0!==r}(),f=(0,nT.E3)(),g=(0,ne.Ep)(),x=(0,m.md)(nX.wg),_=(0,m.md)(nZ),[b,C]=function(){let e=(0,m.md)(nH.U),[t,n]=r.useState(null);return null!=t||!e||"error"in e||n(e.inWindow??!0),r.useEffect(()=>{let e=()=>{n(!0)},t=()=>{n(!1)};return document.addEventListener("mouseenter",e),document.addEventListener("mouseleave",t),()=>{document.removeEventListener("mouseenter",e),document.removeEventListener("mouseleave",t)}},[]),null==e?[null,null]:"error"in e?[null,e.error]:[t??!0?null:e,null]}(),E=(0,nq.e_)(),[w,k]=(0,nV.Vc)("has_toggled_eyedropper_creation_mode",!1),[T,j]=r.useState(!1),[S,A]=r.useState(!1),N=r.useRef(null),M=r.useCallback(t=>{if(!t)return;let{width:n,height:i,rgba:r}=b??e,{grid:a}=e;!function(e,t,n){let i=n?7:17,r=n?7:10,a=n?48:i*r,s=e.getContext("2d");if(!s)return;let o=devicePixelRatio;e.width=a*o,e.height=a*o,s.scale(o,o),ia(s,a,r,i,t,n),is(s,a/2,r,n),io(s,a/2,n)}(t,{width:n,height:i,rgba:r,grid:a,colorProfile:g},!0)},[g,e,b]),R=(0,nW.v4)(),P=(0,n1.Ig)(),D=(0,U.Ku)(),L=function(){let e=(0,U.Ku)();return r.useCallback(()=>{let t=Object.keys(ez.NV).length/2,n=(e+1)%(t-1),i=[ez.NV.CSS,ez.NV.UIColor];for(;i.includes(n);)n=(n+1)%(t-1);return(0,U.UK)().colorFormat.set(n),n},[e])}(),F=nP({subscribeToUpdates__EXPENSIVE:_||e?.dropperData?.isKeyboardNavigating}),B=(0,eu.H0)(b?.color??e.color)??eu.UE,V=(0,eu.H0)(e.resolvedVariableColor)??eu.UE,H=f===I.nT.Whiteboard,z=f===I.nT.DevHandoff,G=u?.style?u.style:void 0,K=u?.variable?u.variable:void 0,q=!H&&!z,X=q&&e.dropperData.creationFlow!==o._4o.NONE&&!G&&!K,Y=!x||z||!h&&!X,J=P(B,{eyedropperFormat:!0})||"",Z="",Q=[];G?(Z=G.name,n=(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"eyedropper_v2--styleCircle--Pp-ij"}),(0,i.jsx)(n2.zi,{dsStyle:G,disableOutline:!0,disableTooltip:!0})]}),s="eyedropper-v2-style",Q=[{key:"modifier-1",label:"shift"}]):K?(Z=z?(0,nW.xv)(K,R.id)??K.name:K.name,n=(0,i.jsx)(n$.J,{className:ic,color:V,hideBorderShadow:!0}),s="eyedropper-v2-variable",Q=[{key:"modifier-1",label:"shift"}]):q&&w?(e.dropperData.creationFlow===o._4o.STYLES?(Z=(0,d.t)("eyedropper.create_style"),n=(0,i.jsx)(nB.J,{}),s="eyedropper-v2-style-creation"):e.dropperData.creationFlow===o._4o.VARIABLES&&(Z=(0,d.t)("eyedropper.create_variable"),n=(0,i.jsx)(nB.J,{}),s="eyedropper-v2-variable-creation"),Q=[{key:"modifier-1",label:"shift"},{key:"modifier-2",label:y.Ay.mac?"\u2318":"ctrl",isMetaKey:y.Ay.mac}]):(Z=Y?(0,d.t)("eyedropper.click_to_copy"):(0,d.t)("eyedropper.click_to_sample"),n=(0,i.jsx)(nU.S,{}));let $=r.useCallback(()=>{if(!N.current)return null;t(B,e)},[t,B,e]),ee=r.useCallback(()=>{if(!N.current||!Y&&h)return!1;let t="",n="";return T&&(G?t="style name":K&&(t="variable name"),n=Z),""===t&&(t=D===ez.NV.HEX?"hex":n0.F.format(D),n=J),(0,nG.Dk)(n),p(v.F.enqueue({message:(0,d.t)("visual_bell.copied_color_to_clipboard_figma_design",{colorType:t}),count:n,icon:nK.zX.EYEDROPPER})),!function(e,t,n,i,r){let a,s;let o=ie.D.getState(),[l,d]=(a="raw",s=n,i&&"style name"===t?(a="style",s=i.node_id):r&&"variable name"===t&&(a="variable",s=r.node_id),[a,s]);(0,it.ds)("eyedropper_copy",o.openFile?.key,o,{tracking_session_dropper_id:e,selection_type:l,copied_value:d,contains_style:!!i,contains_variable:!!r})}(e.dropperData.dropperId,t,n,G,K),!0},[D,p,e.dropperData,J,h,Z,T,G,K,Y]),et=r.useCallback((e,t)=>{if(o.OmW?.toggleOffEyedropper(),X&&T){$();return}ee()||ew.l7.system(e,()=>{o.OmW?.applyPaint(nO.oU(B),t?K?.node_id??null:null,t?G?.node_id??null:null)})},[ee,X,B,$,T,G?.node_id,K?.node_id]),en=r.useCallback(()=>{et("apply-global-eyedropper-with-click",!1)},[et]),ei=eT.fo("stylesAndVariablesEyedropper","keydown",r.useCallback(e=>{let{event:t}=e,n=y.Ay.mac?t.metaKey:t.ctrlKey,i="ArrowUp"===t.key||"ArrowDown"===t.key||"ArrowLeft"===t.key||"ArrowRight"===t.key;if("Tab"===t.key){let t=L();nY.Lj?.announceEyedropperColorFormatChanged(n0.F.format(t)),(0,c.kc)().ee_a11y_kb_eye_dropper||e.accept()}t.shiftKey&&(G||K||!n||k(!0),(X&&n||G||K)&&(j(!0),(0,c.kc)().ee_a11y_kb_eye_dropper||i||e.accept())),"Enter"===t.key&&N.current&&(et("apply-eyedropper-with-keyboard",T),e.accept())},[et,X,L,T,k,G,K])),er=r.useCallback(e=>{let t=y.Ay.mac?e.metaKey:e.ctrlKey;(e.shiftKey||"Shift"!==e.key)&&(!X||t||"Meta"!==e.key)||j(!1)},[X]),ea=r.useCallback(()=>{ee()},[ee]),es=r.useCallback(e=>{X&&T&&$()},[X,T,$]),eo=r.useCallback(()=>{A(!0)},[]);r.useEffect(()=>(window.addEventListener("keyup",er),window.addEventListener("pointerup",ea),window.addEventListener("mousedown",es),window.addEventListener("mousemove",eo,{once:!0}),()=>{window.removeEventListener("keyup",er),window.removeEventListener("pointerup",ea),window.removeEventListener("mousedown",es),window.removeEventListener("mousemove",eo)}));let el=(0,c.kc)().desktop_floating_eyedropper&&!E&&nz.eD?.isFloatingWindowAvailable(),ed=(0,O.jz)(H?W.tXK:W.k22),ec=(()=>{let t;if(!_&&!b&&!e?.dropperData?.isKeyboardNavigating)return null;if(!el){let n=F(e.cursorPosition.x,e.cursorPosition.y,ed);t={transform:`translate(${n.x}px, ${n.y}px)`}}return(0,i.jsxs)("div",{className:tz()("eyedropper_v2--eyedropperv2--dDC8V",S&&"eyedropper_v2--eyedropperv2Animation--lR1hA"),style:t,ref:N,"data-testid":"eyedropper",children:[(0,i.jsx)("div",{className:"eyedropper_v2--loupeSamplingSquare--kasMD"}),(0,i.jsx)("canvas",{ref:M}),!H&&(0,i.jsxs)("div",{children:[(0,i.jsx)(im,{icon:(0,i.jsx)(n$.J,{className:ic,color:B,hideBorderShadow:!0}),text:J,keyBadges:[],isSelected:!T}),(0,i.jsx)(im,{icon:n,text:Z,keyBadges:Q,isSelected:T,dataTestId:s})]})]})})();return(0,i.jsxs)(i.Fragment,{children:[null!=ec&&(0,i.jsx)(nJ.vL,{focusOnMount:!0,name:"stylesAndVariablesEyedropper",handleKeyDown:ei}),el?(0,i.jsx)(n8,{loupeHeight:e.height,loupeWidth:e.width,panelHeight:(0,O.jz)(W.ZAq),panelWidth:ed,hidden:null==ec,onClick:en,children:ec}):null!=ec&&(0,i.jsx)(nQ.ix,{position:e.cursorPosition,currentToolForCursor:l.NLJ.DROPPER_COLOR,children:ec})]})}function im({icon:e,text:t,keyBadges:n,isSelected:r,dataTestId:a}){return(0,i.jsxs)("div",{className:tz()("eyedropper_v2--menuRow--Sv5yb",r&&"eyedropper_v2--selectedRow--H177v",eM.Dm),"data-testid":a,children:[(0,i.jsxs)("div",{className:id,children:[(0,i.jsx)("div",{className:"eyedropper_v2--iconContainer--O6bus",children:e}),(0,i.jsx)("div",{className:tz()("eyedropper_v2--menuOption--MmcdM",il),children:t})]}),(0,i.jsx)("div",{className:id,children:n&&n.map(e=>(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:tz()(il,e.isMetaKey?"eyedropper_v2--keyMetaBadge--4hzjk eyedropper_v2--keyBadge--MyANW":"eyedropper_v2--keyTextBadge--HpsPI eyedropper_v2--keyBadge--MyANW"),children:(0,i.jsx)(tG.S,{shortcut:e.label})})},e.key))})]})}function ip(){let e=(0,a.d4)(e=>e.eyedropper),t=r.useRef(void 0),n=nP({subscribeToUpdates__EXPENSIVE:!!e}),[s,l]=r.useState(!1),[d,c]=r.useState(null),[u,m]=r.useState("createVariable"),[p,h]=r.useState(!1),f=r.useCallback((e,i)=>{l(!0),c(e),m(i.dropperData.creationFlow===o._4o.STYLES?"createStyle":"createVariable"),h(i.dropperData.canAcceptStyles);let r=n(i.cursorPosition.x,i.cursorPosition.y,nE.i),a=new e_.Mi(r.x+i.cursorPosition.x,r.y+i.cursorPosition.y);t.current=a,o.OmW?.toggleOffEyedropper()},[n]),g=r.useCallback(()=>{l(!1)},[]),x=s&&d;return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(iu,{eyedropper:e,onOpenCreationModal:f}),x&&(0,i.jsx)(nF,{initialPosition:t.current,initialCreationColor:d,initialView:u,disableStyleModal:!p,onClose:g})]})}var ih=n(190531),ig=n(515977),ix=n(397043);function i_({clientX:e,clientY:t,selectedView:n,deleteCollection:r,collectionId:s}){let o=(0,a.wA)(),l=(0,ig.ZX)(),{appModel:d,sceneGraph:m,sceneGraphSelection:p}=(0,u.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),h=[];return null!=r&&h.push({name:"dakota-delete-collection",callback:()=>{r()}}),(0,c.kc)().dakota_import_export&&h.push({name:"dakota-export-collection-internal",callback:async()=>{let e=await l(s);e||o(v.F.enqueue({message:"Could not export collection to clipboard"})),navigator.clipboard.writeText(e??""),o(v.F.enqueue({message:"Collection exported to clipboard"}))}}),(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{appModel:d,dispatch:o,menuItems:h,recordingKey:"dakotaCollectionContextMenu",removeDisabledItems:!0,sceneGraph:m,sceneGraphSelection:p,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}function iy({clientX:e,clientY:t,selectedView:n,deleteField:r,duplicateField:s}){let o=(0,a.wA)(),{appModel:l,sceneGraph:d,sceneGraphSelection:c}=(0,u.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),m=[];return m.push({name:"dakota-duplicate-field",callback:s},{separator:!0},{name:"dakota-delete-field",callback:r}),(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{appModel:l,dispatch:o,menuItems:m,recordingKey:"dakotaFieldContextMenu",removeDisabledItems:!0,sceneGraph:d,sceneGraphSelection:c,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}function ib({clientX:e,clientY:t,selectedView:n,deleteItemOrItems:r}){let s=(0,a.wA)(),{appModel:o,sceneGraph:l,sceneGraphSelection:d}=(0,u.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),c=[];return null!=r&&c.push({name:"dakota-delete-item",callback:()=>{r()}}),(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{appModel:o,dispatch:s,menuItems:c,recordingKey:"dakotaItemContextMenu",removeDisabledItems:!0,sceneGraph:l,sceneGraphSelection:d,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}var iv=n(129416);function iC(e){return{attachmentId:e.id,attachmentUploadedAt:e.uploadedAt.toString(),imageUrlPrefix:function(e){if(-1!==e.search("blob"))return"blob";let t=e.search("/images/");if(-1!==t)return e.substring(0,t)}(e.imageUrl)}}function iE(e){return(0,i.jsx)(_.u9,{label:"CommentAttachmentContextMenu",children:(0,i.jsx)(iw,{...e})})}function iw(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.mirror.appModel),r=e.clientX,s=e.clientY,o=async t=>{let n=await fetch(e.attachment.imageUrl,{mode:"cors"}),i=await n.blob();if(!t)return i;if("image/jpeg"===i.type||"image/gif"===i.type){let e=await createImageBitmap(i),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");return n?.drawImage(e,0,0),new Promise(e=>{t.toBlob(t=>{e(t)},"image/png")})}return i},l=[{name:"download-attachment",callback:async()=>{try{await o(!1).then(n=>{let i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=(0,d.t)("comments.attachment_default_name",{fileExtension:n.type.split("/")[1]}),r.click(),URL.revokeObjectURL(i),(0,ek.sx)("Comment Attachment Download Success",iC(e.attachment)),t(v.F.enqueue({message:(0,d.t)("comments.download_attachment_success"),type:"attachment-download"}))})}catch(n){(0,ek.sx)("Comment Attachment Download Failure",iC(e.attachment)),(0,iv.$D)(tu.e.FEEDBACK,n),t(v.F.enqueue({message:(0,d.t)("comments.download_attachment_error"),type:"attachment-download",error:!0}))}}},{name:"copy-attachment",callback:async()=>{t(v.F.enqueue({message:(0,d.t)("comments.copying_attachment"),type:"copy-attachment",icon:nK.zX.SPINNER}));try{await o(!0).then(async n=>{let i=new ClipboardItem({[n.type]:n});await navigator.clipboard.write([i]).then(()=>{(0,ek.sx)("Comment Attachment Copy Success",iC(e.attachment)),t(v.F.enqueue({message:(0,d.t)("comments.copy_attachment_success"),type:"copy-attachment"}))})})}catch(n){(0,ek.sx)("Comment Attachment Copy Failure",iC(e.attachment)),(0,iv.$D)(tu.e.FEEDBACK,n),t(v.F.enqueue({message:(0,d.t)("comments.copy_attachment_error"),type:"copy-attachment",error:!0}))}}}];return(0,i.jsx)(ix.Q,{appModel:n,menuItems:l,targetRect:{width:10,height:10,left:r+100,top:s,right:r+110,bottom:s-10},showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var ik=n(352643),iT=n(192704),ij=n(960210),iS=n(723850),iI=n(946737),iA=n(898301),iN=n(937182),iM=n(519708);function iR({children:e,entryPoint:t}){let n=(0,tj.tS)(),a=(0,e$.iZ)(),s=(0,iA.ol)(),o=(0,iI.O)(),l=(0,iS.U)(),d=(0,iN.U)("upsell"),c=(0,r.useCallback)(()=>{l("Dev Mode Paywall clicked",{type:"Design Mode Upsell",entryPoint:t},{forwardToDatadog:!0}),d("handoff")},[t,d,l]);return(0,i.jsx)(tw.fu,{name:"Dev Mode Upsell In Design Mode",properties:{currentPlan:o,teamId:s?.id,userId:a?.id,fileKey:n,upsellSource:t},children:(0,i.jsxs)(tY.E,{className:"context_menus_upsells--upsellItem--VY-Q6",onClick:c,children:[(0,i.jsx)(eN.B,{svg:iM.A}),(0,i.jsx)("span",{children:e})]})})}function iP(){return(0,i.jsx)(iR,{entryPoint:"design_section_status",children:(0,d.tx)("dev_handoff.paywall.ready_for_dev.upsell")})}function iO(){return(0,i.jsx)(_.u9,{label:"DevModeCopyAsCodeUpsell",children:(0,i.jsx)(iR,{entryPoint:"design_copy_as_code",children:(0,d.tx)("dev_handoff.paywall.codegen.upsell")})})}function iD(){return(0,i.jsx)(iR,{entryPoint:"design_annotations",children:(0,d.tx)("dev_handoff.paywall.annotations.upsell")})}function iL(e){return(0,i.jsx)(_.u9,{label:"AnnotationsButtonContextMenu",children:(0,i.jsx)(iF,{...e})})}function iF({targetInViewport:e,annotationsCount:t,selectedView:n}){var r;let s=(0,a.wA)(),o=(0,a.d4)(e=>e.mirror.appModel),l=(0,a.d4)(e=>e.mirror.sceneGraph),c=(0,iN.U)("annotations_button"),u=(0,nS.ni)(),m=(0,ij._I)(),p=(0,ij.U4)(),h=(r=()=>c("handoff"),m?[{name:"view-annotations",callback:r,flags:["design"]},{separator:!0},{render:()=>(0,i.jsxs)("div",{className:t0.s.flex.itemsCenter.colorTextMenuSecondary.columnGap4.pl4.pb4.pr10.pt0.$,children:[(0,i.jsx)(nU.S,{style:{"--color-icon":"var(--color-text-menu-secondary)"}}),(0,d.tx)("dev_handoff.paywall.annotations.double_click_hint")]}),optionHeight:32}]:p?[{header:!0,name:(0,d.t)("dev_handoff.annotation.number_annotations",{count:t})},{separator:!0},{render:()=>(0,i.jsx)(iD,{}),optionHeight:32,flags:["design"]}]:[{header:!0,name:(0,d.t)("dev_handoff.annotation.number_annotations",{count:t})}]),f=e.origin.x+u.x,g=e.origin.y+u.y,x={left:f,top:g,right:f+e.size.x,bottom:g+e.size.y,width:e.size.x,height:e.size.y};return(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{allowDisabledOnly:!p,appModel:o,dispatch:s,menuItems:h,minWidth:50,recordingKey:"annotationsButtonMenu",removeDisabledItems:p,sceneGraph:l,selectedView:n,showPoint:!0,targetRect:x})})}var iB=n(304315),iU=n(738418),iV=n(126278),iH=n(854122);function iz(e){let t=(0,a.wA)(),n=(0,iU.I_)(),r=(0,a.d4)(e=>e.mirror.appModel);if(!(0,a.d4)(e=>(0,iH.U2)(e.selectedView)))return null;let{thread:s}=e,o=!!s.comments.find(e=>e.isUnread),l=!!s.isPendingFromSinatra,c=null,u=n.commentReceipts;u&&(c=o?{name:"mark-as-read",callback:()=>{t(iB.AY({receiptsAPI:u,thread:s}))}}:{name:"mark-as-unread",callback:()=>{t(iB.QY({receiptsAPI:u,comment:s.comments[0]}))}});let m=[];l||((0,iV.m)(s.sidebarItemType)?m.push({name:"resolve",callback:()=>{t(iB.hx({thread:s,resolved:!0}))},disabled:null!=s.commentPin},c,{name:"copy-link",callback:()=>{e.copyLink(s.comments[0])}},{separator:!0}):m.push({name:"copy-link",callback:()=>{e.copyLink(s.comments[0])}},{separator:!0})),m.push({action:"toggle-show-comments",displayText:(0,d.t)("fullscreen.context_menu.hide_comments")});let p=m.filter(e=>e).map(e=>e),h={width:224,height:129,left:e.pinClientRect.x,top:e.pinClientRect.y,right:e.pinClientRect.x+e.pinClientRect.width,bottom:e.pinClientRect.y+e.pinClientRect.height};return(0,i.jsx)(ix.Q,{appModel:r,menuItems:p,targetRect:h,showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var iG=n(787049),iK=n(901461),iW=n(591084),iq=n(22291),iX=n(610265),iY=n(348149),iJ=n(592802),iZ=n(39171),iQ=n(623002),i$=n(75354),i0=n(402342),i1=n(27997),i2=n(314008);async function i5({paint:e,fileKey:t,dispatch:n}){if(!t||"VIDEO"!==e.type||!e.video||!e.video?.hash)return i3("Incorrect asset type"),null;n(i1.n.set({message:(0,d.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{}}));let i=await (0,i2.w6)({paint:e,fileKey:t});if(null===i)return i3("Error getting download url for asset"),null;i4(i)}let i4=e=>{let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},i3=e=>{(0,iv.$D)(tu.e.FIGJAM,Error(`Error exporting video: ${e}`))};var i6=n(17453),i7=n(876922),i9=n(143256),i8=n(765996),re=n(951578),rt=n(33433),rn=n(621994),ri=n(205776),rr=n(704334),ra=n(677451),rs=n(353950),ro=n(799272),rl=n(83792),rd=n(6236),rc=n(129963);function ru(e){return new URL(e).hostname.split(".").slice(-2).join(".")}var rm=n(8192),rp=n(862390),rh=n(349277),rf=n(780172),rg=n(394396),rx=n(1681),r_=n(404195),ry=n(425519),rb=n(789379),rv=n(739093),rC=n(591600),rE=n(702746),rw=n(620573),rk=n(142037),rT=n(85219),rj=n(316157),rS=n(582389),rI=n(410274),rA=n(581774),rN=n(22048),rM=n(534366),rR=n(712515),rP=n(363198),rO=n(767157),rD=n(624069),rL=n(283802),rF=n(623854);function rB(e,t){return{action:"slides-rewrite-text",flags:["slides"],callback:()=>(0,rD.mD)(e,{source:"context_menu"}),disabled:!t}}function rU(e){return!m.zl.get(rD.Tm)&&e}var rV=n(151015),rH=n(643556);let rz=(0,O.hG)(W.tui);function rG(e){let t=(0,a.wA)(),n=e.clientX,r=e.clientY;return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{allowCodegenOptions:e.selectedView.editorType===I.nT.Design,appModel:e.appModel,"aria-labelledby":e.ariaLabelledBy,dispatch:t,isLimitedDevMode:e.isLimitedDevMode,menuItems:(0,iG.WI)((()=>{var n,i,r,a;let s=e.isPrototypeCanvasEditUiVisible&&!e.hasSelection?[{separator:!0},{action:"remove-interactions-on-page",flags:["edit"]}]:[],l=window.FigmaMobile,u=r0(e.appModel.showComments,e.selectedView,e.viewportInfo,e.clientX,e.clientY,t,l?.requestToAddDraftCommentPin),m=e.selectedView.editorType===I.nT.Whiteboard,p=e.selectedView.editorType===I.nT.Slides,h=e.selectedView.editorType===I.nT.Sites,f=e.selectedView.editorType===I.nT.Figmake,g=e.selectedView.editorType===I.nT.Cooper,x=(0,rw.$A)(e.selectedView),_=y.Ay.windows?"Ctrl+":"\u2318",b={action:"paste-here",flags:["edit"],displayText:m?(0,d.t)("fullscreen_actions.paste"):void 0,shortcutText:m?`${_}V`:void 0},v=!y.Ay.safari||l?.readClipboardData?[b,m?{separator:!0}:null]:[],C={name:"start-chat",disabled:e.isJoinedToActiveVotingSession||e.isCursorChatDisabled,callback:(n,i,r,a)=>{o.glU?.triggerAction("set-tool-default",null),t(i7.F6({position:{x:a.clientX||e.clientX,y:(a.clientY||e.clientY)-rz},source:"canvas_context_menu"}))}},E=rB(t,(n=e.hasSlidesAiTextEnabled,i={x:e.clientX,y:e.clientY},r=e.slideId,a=e.viewportInfo,!!(r&&a&&(0,rF.ih)(r,i,a))&&rU(n))),w=e.openFile,k=e.canPublishOrgTemplate&&w?(0,rV.we)({dispatch:t,file:{key:w.key,name:w.name,folder_id:w.folderId,team_id:w.teamId,editor_type:w.editorType,parent_org_id:w.parentOrgId},fileNeedsMovingBeforePublish:e.fileNeedsMovingBeforePublish,isPublished:e.isFilePublishedTemplate,source:"fullscreen-context-menu"}):null,T=[{action:"toggle-ui"},{action:"toggle-show-comments",displayText:(0,d.t)("fullscreen.context_menu.show_hide_comments")},...m||f?[]:[{separator:!0},C],f?null:{action:"toggle-menu",displayText:(0,rI.gn)()?(0,d.t)("fullscreen_actions.toggle-actions-menu"):(0,d.t)("fullscreen_actions.toggle-menu")},!e.userCanViewPlugins||h&&!(0,c.kc)().sites_plugin_api||g&&!(0,c.kc)().buzz_plugins||f?null:(0,rn.qz)({...e,isReadOnly:e.appModel.isReadOnly},"contextmenu"),e.appModel.isReadOnly||!e.userCanViewWidgets||x?null:(0,ri.Vd)(e,"contextmenu"),k,...s],j=[...u,...v,{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},...m?[C,{separator:!0}]:[],...p?[{separator:!0},E]:[],...T];return r2(j,"canvas_context_menu"),j})()),recordingKey:"canvasMenu",removeDisabledItems:!0,selectedView:e.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:n+100,top:r,right:n+110,bottom:r-10}})})}function rK(e){let t=(0,iT.op)(),n=(0,iT.$1)(),s=(0,iT.cW)(),o=(0,iT.Be)(),l=o.orgPlugins,d=o.orgWidgets,c=(0,rr.h)("plugin"),u=(0,rr.h)("widget"),m=(0,iT.NU)(),p=(0,iT.qr)(),h=(0,iT.ZT)(),f=(0,rT.S)(),g=(0,iS.am)();r.useEffect(()=>{g("Canvas Right Click")},[g]);let x=(0,nS._X)({subscribeToUpdates_expensive:!0}),_=(0,ra.J3)(),y=(0,ra.JU)(_),b=_===ra.kN.FILE_IN_DRAFTS,v=!!(0,ra.kD)(),C=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),E=r1(),w=(0,rD.Ne)(),k=(0,rO.Jb)(),T=(0,a.d4)(tj.tB),j=(0,a.d4)(e=>e.selectedView.editorType),S=(0,a.d4)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]||null),I=(0,a.d4)(e=>e.mirror.appModel),A=(0,a.d4)(rf.gR),N=(0,a.d4)(e=>Object.keys(e.mirror.sceneGraphSelection).length>0);return(0,i.jsx)(rG,{...e,activeTextReviewPlugin:C,allSavedPlugins:o.plugins,appModel:I,canPublishOrgTemplate:y,editorType:j,fileNeedsMovingBeforePublish:b,hasSelection:N,hasSlidesAiTextEnabled:w,isCursorChatDisabled:f,isFilePublishedTemplate:v,isJoinedToActiveVotingSession:A,isPrototypeCanvasEditUiVisible:E,localExtensions:n,openFile:T,org:S,orgPrivatePlugins:c,orgPrivateWidgets:u,orgSavedPlugins:l,orgSavedWidgets:d,publishedPlugins:s,publishedWidgets:h,recentlyUsedPlugins:t,recentlyUsedWidgets:p,savedWidgetVersions:m,slideId:k,viewportInfo:x})}let rW=(e,t)=>o.glU?o.glU.getObjectsListUnderCursor(e,t):[],rq=class e extends r.PureComponent{constructor(e){super(e),this.objectsListMouseEnter=e=>{rp.Uc(e)},this.objectsListMouseExit=()=>{rp.Uc("")},this.getSelectionGuid=()=>Object.keys(this.props.sceneGraphSelection)[0],this.getObjectsListMenu=(e,t)=>{let n=rW(e,t);if(null==n)return[];let i=[];for(let e of n){let t=e.nodeId;i.push({nodeId:t,args:{nodeId:t,name:e.name},action:"select-node",source:"canvas_context_menu",displayText:(0,d.t)("fullscreen_actions.select-node",{name:e.name??""}),onMouseEnter:()=>this.objectsListMouseEnter(t),onMouseExit:this.objectsListMouseExit})}return i},this.getNodeTypeForCopyLinkText=()=>{let e=this.getSelectionGuid();return e&&o.glU?o.glU.isPlatformShape(e)?l.Z6A.SHAPE_WITH_TEXT:o.glU.getNodeType(e):null},this.getPageListForMoveToMenu=()=>{let e=this.props.appModel.pagesList;if(!this.props.userCanEditFile||null==e||e.length<2)return[];let t=[];for(let n of e)n.nodeId!==this.props.appModel.currentPage&&(n.isDivider?t.push({separator:!0}):t.push({name:n.name,args:{nodeId:n.nodeId,name:n.name},action:"page-move-to",displayText:(0,d.t)("fullscreen_actions.page-move-to",{name:n.name??""})}));return t},this.state={pageItems:this.getPageListForMoveToMenu(),relatedComponentMenu:this.getRelatedComponentMenu(o.iCO.NONE),relatedStateMenu:this.getRelatedComponentMenu(o.iCO.STATE_INSTANCE),objectItems:this.getObjectsListMenu(this.props.clientX,this.props.clientY),nodeTypeForCopyLinkText:this.isFigjam()?this.getNodeTypeForCopyLinkText():null,hyperlink:this.isFigjam()?this.getHyperlinkUnderCursor():null}}getRelatedComponentMenu(e){let t;if(e!==o.iCO.NONE&&e!==o.iCO.STATE_INSTANCE)return null;let n={userId:this.props.user?.id,fileKey:this.props.openFile?.key,orgId:this.props.openFile?.parentOrgId??void 0,teamId:this.props.openFile?.teamId??void 0},i=(0,rv.SY)(this.props.masterSymbolGUID,this.props.dispatch,this.props.openFile?.key||"",(0,iq.l)(this.props.openFile?.libraryKey??""),this.props.library,this.props.sceneGraph,this.props.sceneGraphSelection,this.props.isCooper,e,n,this.props.stateGroupSelectionInfo);if(0===i.length)return null;t=e===o.iCO.STATE_INSTANCE?"relatedComponentMenuSwapVariants":"relatedComponentMenu";let r=this.props.clientX,a=this.props.clientY;return{items:i,showPoint:!1,parentRect:{width:10,height:10,left:r+100,top:a,right:r+110,bottom:a-10},recordingKey:t,dispatch:this.props.dispatch,depth:0,onSelectItem:()=>{}}}getHyperlinkUnderCursor(){return o.glU?o.glU.getHyperlinkUnderCursor(this.props.clientX,this.props.clientY):null}selectLayerMenu(){return!this.props.isObjectsPanelMenu&&this.state.objectItems.length>1?this.state.objectItems:[]}textEditModeMenu(){let e=this.getCopyPasteMenu(),t=this.getCopyExportMenu(),n=this.props.spellCheckPreference,i=this.props.appModel.spellCheckSuggestions,r=i||!n?[{name:"spell-check-menu",flags:["design","whiteboard","slides","cooper"],children:(0,rh.aB)(this.props.dispatch)},...this.props.userCanViewPlugins?(0,rn.dL)(this.props,"contextmenu"):[]]:[];return[...n||this.props.appModel.activeTextReviewPlugin?(0,rh.Ax)(i,this.props.editorType):[],...r,{separator:!0},...this.getTableCellMenu(),{separator:!0},...e,{separator:!0},...this.isFigjam()?t:[]]}getFaviconMenu(e){return{name:e?"clear-favicon":"set-favicon",args:{label:e?(0,d.t)("fullscreen_actions.clear_favicon"):(0,d.t)("fullscreen_actions.set_as_favicon")},flags:["edit","!slides","sites"],featureFlags:["sites"],callback:()=>{let t=P.UN().getCurrentPage()?.guid;void 0!==t&&ew.l7.user("set-web-settings",()=>{o.glU?.setWebMetadata({faviconID:e?"":this.getSelectionGuid()},[t]),eS.Y5.commit()})}}}getFileThumbnailMenu(e){return{name:(0,c.kc)().dse_library_pg_thumbnails?eS.Y5.getFileThumbnailMenuItemName():eS.Y5.getThumbnailMenuItemName(),args:(0,c.kc)().dse_library_pg_thumbnails?{label:e?(0,d.t)("fullscreen_actions.restore_default_file_thumbnail"):(0,d.t)("fullscreen_actions.set_as_file_thumbnail")}:{label:e?(0,d.t)("fullscreen_actions.restore_default_thumbnail"):(0,d.t)("fullscreen_actions.set_as_thumbnail")},flags:["edit","!slides"],callback:()=>{this.props.openFile&&this.props.dispatch(i6.$m({file_key:this.props.openFile.key,thumbnail_guid:e?null:this.getSelectionGuid()}))}}}getPageThumbnailMenu(){return{get name(){return eS.Y5.getPageThumbnailMenuItemName()},callback:()=>eS.Y5.handlePageThumbnailMenuItem(),get disabled(){return eS.Y5.disablePageThumbnailMenu()},flags:["edit","design"],featureFlags:["dse_library_pg_thumbnails"]}}selectedEmbedOrLinkPreviewHasValidUrl(){return this.props.widgetSelectionInfo?.pluginID===rm.k.EMBED_WIDGET&&this.props.embedData&&(this.props.embedData.url||this.props.embedData.srcUrl)||this.props.widgetSelectionInfo?.pluginID===rm.k.LINK_PREVIEW_WIDGET&&this.props.linkPreviewData&&this.props.linkPreviewData.url}isFigjam(){return"fullscreen"===this.props.selectedView.view&&this.props.selectedView.editorType===I.nT.Whiteboard}getCopyLinkMenu(){let e=this.selectedEmbedOrLinkPreviewHasValidUrl()?"FigJam":"";return{name:"copy-link",args:{label:(0,d.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:e})},displayText:this.isFigjam()&&this.state.nodeTypeForCopyLinkText?function(e){switch(e){case l.Z6A.STICKY:return(0,d.t)("fullscreen_actions.copy-link-to-sticky");case l.Z6A.CONNECTOR:return(0,d.t)("fullscreen_actions.copy-link-to-connector");case l.Z6A.WIDGET:return(0,d.t)("fullscreen_actions.copy-link-to-widget");case l.Z6A.STAMP:return(0,d.t)("fullscreen_actions.copy-link-to-stamp");case l.Z6A.SECTION:return(0,d.t)("fullscreen_actions.copy-link-to-section");case l.Z6A.TEXT:return(0,d.t)("fullscreen_actions.copy-link-to-text");case l.Z6A.TABLE:return(0,d.t)("fullscreen_actions.copy-link-to-table");case l.Z6A.WASHI_TAPE:return(0,d.t)("fullscreen_actions.copy-link-to-washi-tape");case l.Z6A.SHAPE_WITH_TEXT:return(0,d.t)("fullscreen_actions.copy-link-to-shape");case l.Z6A.INSTANCE:return(0,d.t)("fullscreen_actions.copy-link-to-instance");default:return(0,d.t)("fullscreen_actions.copy-link-to-this")}}(this.state.nodeTypeForCopyLinkText):this.isSelectedElementASlide()?(0,d.t)("fullscreen_actions.copy_link_to_slide"):void 0,callback:()=>{let e;if(!this.props.openFile)return;let t=!(0,rw.$A)(this.props.selectedView)&&this.props.attributionContextKey,n=(0,w.Wl)(this.props.selectedView),i=(0,w.s4)(this.props.selectedView),r=(0,rL.P)(this.props.selectedView),a=this.getSelectionGuid(),s=(0,rg.jN)({file:this.props.openFile,nodeId:this.getSelectionGuid(),isDevHandoff:(0,rw.$A)(this.props.selectedView),isReadOnly:this.props.appModel.isReadOnly,isFigJam:this.isFigjam(),isDevModeOverview:n,devModeFocusId:i,attributionContext:t?(0,rx.b)(this.props.attributionContextKey,rx.d.FULLSCREEN_CONTEXT_MENU):null});if((0,c.kc)().ce_copy_labelled_links){let t=(0,P.UN)().get(this.getSelectionGuid());e=t?t.name:this.props.openFile.name}let o=(()=>{if(this.isFigjam()&&this.state.nodeTypeForCopyLinkText)return function(e){switch(e){case l.Z6A.STICKY:return(0,d.t)("visual_bell.copy_link_to_sticky");case l.Z6A.CONNECTOR:return(0,d.t)("visual_bell.copy_link_to_connector");case l.Z6A.WIDGET:return(0,d.t)("visual_bell.copy_link_to_widget");case l.Z6A.STAMP:return(0,d.t)("visual_bell.copy_link_to_stamp");case l.Z6A.SECTION:return(0,d.t)("visual_bell.copy_link_to_section");case l.Z6A.TEXT:return(0,d.t)("visual_bell.copy_link_to_text");case l.Z6A.TABLE:return(0,d.t)("visual_bell.copy_link_to_table");case l.Z6A.WASHI_TAPE:return(0,d.t)("visual_bell.copy_link_to_washi_tape");case l.Z6A.SHAPE_WITH_TEXT:return(0,d.t)("visual_bell.copy_link_to_shape");case l.Z6A.INSTANCE:return(0,d.t)("visual_bell.copy_link_to_instance");default:return(0,d.t)("visual_bell.copy_link")}}(this.state.nodeTypeForCopyLinkText);if(r&&a){let e=(0,P.UN)().get(a);if(e)return(0,d.t)("copy_to_clipboard.slides.link_to_slide_copied_to_clipboard",{name:e.name})}})();this.props.dispatch(i6.S({fileKey:this.props.openFile.key,url:s,label:e,source:rx.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:o}))}}}getCopyHyperlinkMenu(){let e=(()=>{let e=this.state.hyperlink;if(!e||""===e)return null;if(e.startsWith("mailto:")){let t=e.substring(7);if(t)return{displayText:(0,d.t)("fullscreen_actions.copy-email",{email:t}),linkToCopy:t,visualBellText:(0,d.t)("visual_bell.copy_email",{email:t})}}else if(e.startsWith("tel:")){let t=e.substring(4);if(t)return{displayText:(0,d.t)("fullscreen_actions.copy-phone",{number:t}),linkToCopy:t,visualBellText:(0,d.t)("visual_bell.copy_phone",{number:t})}}else{let t=ru(e);if(t)return{displayText:(0,d.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t}),linkToCopy:e,visualBellText:(0,d.t)("visual_bell.copy_hyperlink",{hyperlink:t})}}})();return e?{name:"copy-hyperlink",displayText:e.displayText,callback:()=>(0,eP.UA)(this.props.dispatch,e.linkToCopy,"ContextMenu",e.visualBellText)}:null}getImageToProfilePicture(){if(!this.props.user||!this.props.fillPaints||(0,eR.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.findIndex(e=>"IMAGE"===e.type);if(e<0)return null;let t=this.props.fillPaints[e];return{name:"set-image-as-profile-picture",args:{label:"Set image as profile picture"},flags:["view_restricted","whiteboard"],featureFlags:["figjam_canvas_image_to_avatar"],callback:()=>{(0,i$.V8)(t,this.props.user,this.props.dispatch)}}}getMaybeEmbedOrLinkPreviewWidgetMenu(){if(!this.selectedEmbedOrLinkPreviewHasValidUrl())return null;let e=this.props.embedData?.url||this.props.embedData?.srcUrl||this.props.linkPreviewData?.url,t=ru(decodeURIComponent(e));return{name:"labeled-menu-item",args:{label:(0,d.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t})},callback:()=>{!function(e,t){let n=decodeURIComponent(t);(0,nG.Dk)(n),(0,rc.Rm)(rd.yc.COPY_LINK,n),e(v.F.enqueue({type:"copy-preview",message:(0,d.t)("visual_bell.copy_hyperlink",{hyperlink:ru(n)}),error:!1}))}(this.props.dispatch,e)}}}getMaybeEmbedDeactivateMenu(){return this.props.widgetSelectionInfo?.pluginID===rm.k.EMBED_WIDGET&&o.Ez5&&this.props.widgetSelectionInfo.widgetID===o.Ez5.embedUiState().activeEmbedData.getCopy().embedNodeId?{name:"labeled-menu-item",args:{label:"Deactivate preview"},callback:()=>{o.glU?.deactivateEmbed()}}:null}getExportVideo(){if(!this.props.fillPaints||(0,eR.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.find(e=>"VIDEO"===e.type);if(!e)return null;let t=this.props.openFile?.key;return{action:"export-selected-video",flags:["view_restricted","whiteboard","design"],platforms:["!ipad"],displayText:(0,d.t)("fullscreen.context_menu.export_selected_video"),callback:(n,i,r)=>{i5({paint:e,fileKey:t,dispatch:r})}}}getCombineVideoStack(){return{action:"combine-selected-video-stack",flags:["edit","design"],platforms:["!ipad"],displayText:(0,d.t)("fullscreen.context_menu.combine_selected_video_stack"),callback:async()=>{let e=Object.keys(this.props.sceneGraphSelection);if(1!==e.length||!e[0])return;let t=this.props.sceneGraph.get(e[0]);if(!t)return;let n=t.childrenNodes.map(e=>{let t=o.ruz?.getTopmostVideoIndex(e.id)??void 0;if(void 0!==t)return e.fills[t]?.video}).filter(e=>!!e),i=(await Promise.all(n.map(e=>(0,rM.f)(e)))).filter(e=>!!e),r=await (0,rM.M)(i);r&&ew.l7.ai("combine-selected-video-stack",()=>{if(!o.ruz)return;let e=(0,P.UN)(),t=eS.Y5.getViewportInfo(),n=e.createNode("RECTANGLE");n.size={x:1280,y:720},n.x=t.offsetX-n.size.x/2,n.y=t.offsetY-n.size.y/2,o.ruz.insertVideoInNode(n.id,r,(0,d.t)("fullscreen.context_menu.combine_selected_video_stack")),eS.Y5.triggerAction("commit")})},featureFlags:["aip_mw_video"]}}selectedDefaultLibraryComponents(){let e=Object.keys(this.props.sceneGraphSelection);if(0===e.length)return!1;let t=this.props.sceneGraph.get(e[0])?.symbolId;if(!t)return!1;let n=this.props.sceneGraph.get(t)?.sourceLibraryKey;return!!n&&(0,nI.td)(this.props.library.defaultPublished,n)}getMoveToMenu(){return this.state.pageItems.length>=1?{action:"page-move-to-menu",flags:["edit"],children:this.state.pageItems,name:"page-move-to-menu"}:null}getFigJamRemovePluginActionsMenu(){if(this.props.selectedView.editorType===I.nT.Design)return null;let t=e=>this.props.dispatch(i0.af({id:e,resourceType:rC.bD.PLUGIN})),n=(0,ry.vA)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localExtensions,this.props.currentOrgId,this.props.numSelected||0,(n,i)=>e.refreshCache.debounceRefresh(n,()=>t(n),i),rE.FW.FIGJAM),i=[],r=new Set;for(let e of n)r.has(e.pluginTypeAndID)||(i.push({name:e.plugin.name,plugin_id:e.plugin.plugin_id}),r.add(e.pluginTypeAndID));return 0===i.length?null:{name:"remove-plugin-actions",children:[...i.map(({name:e,plugin_id:t})=>({name:"plugins-menu-item",callback:()=>o.NfO?.removeRelaunchDataFromSelection(t),args:{extensionName:e}})),{separator:!0},{name:"remove-all-plugin-actions",callback:()=>i.map(({plugin_id:e})=>o.NfO?.removeRelaunchDataFromSelection(e))}]}}getMainComponentActionsMenu(){if(this.props.isLimitedDevMode)return null;let e=(0,te.Yh)(this.props.appModel,"find-symbol")&&!this.selectedDefaultLibraryComponents(),t=(0,te.Yh)(this.props.appModel,"push-changes-to-main"),n=(0,te.Yh)(this.props.appModel,"restore-symbol-or-state-group"),i=(0,te.Yh)(this.props.appModel,"add-variant"),r=(0,te.Yh)(this.props.appModel,"publish-selection"),a=[e,t,n,i,r].filter(Boolean).length;if(0===a)return null;if(1===a){if(e)return{action:"find-symbol"};if(i)return{action:"add-variant",flags:["edit"]};if(r)return{action:"publish-selection",flags:["edit"]}}return{action:"main-component",children:[{action:"find-symbol"},{action:"push-changes-to-main",flags:["edit"]},{action:"restore-symbol-or-state-group",flags:["edit"]},{action:"publish-selection",flags:["edit"]},{action:"add-variant",flags:["edit"]}]}}getTableCellMenu(){let e=(0,te.Yh)(this.props.appModel,"delete-table-contents"),t=(0,te.Yh)(this.props.appModel,"delete-current-table-row")||(0,te.Yh)(this.props.appModel,"delete-current-table-column");return[{action:"move-table-row-up",flags:["edit"]},{action:"move-table-row-down",flags:["edit"]},{action:"move-table-column-left",flags:["edit"]},{action:"move-table-column-right",flags:["edit"]},{separator:!0},{action:"add-table-column-before",flags:["edit"]},{action:"add-table-column-after",flags:["edit"]},{separator:!0},{action:"add-table-row-above",flags:["edit"]},{action:"add-table-row-below",flags:["edit"]},{separator:!0},{action:"delete-table-contents",flags:["edit"],shortcutText:e&&!t?"\u232B":void 0},{action:"delete-current-table-column",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0},{action:"delete-current-table-row",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0}]}getCopyPasteMenu(){let e;let t=window.FigmaMobile,n=!y.Ay.safari||!!t?.readClipboardData,r=!this.props.isObjectsPanelMenu&&!this.props.isSingleSlideViewCarousel&&!this.props.isBuzzCarousel&&n,a=this.props.isTextEditModeMenu,s=(0,rj.P5)(),o=(0,rS.C7)()&&this.props.hasFragmentSearchPermission,l=this.props.shouldShowSendToMakeFromDesign??!1,u=this.props.shouldShowSendToMakeFromFigJam??!1,m=[{action:"copy-text"},{action:"copy-as-code",children:[{action:"copy-as-css"},{action:"copy-as-css-recursive"},{action:"copy-as-ios"},{action:"copy-as-android"},...!this.props.canAccessDevMode&&this.props.canAccessDevModeEntryPoint?[{separator:!0},{render:()=>(0,i.jsx)(iO,{}),optionHeight:40}]:[]]},{action:"copy-as-svg"},{action:"copy-as-png"},...this.props.canCopyLink?[this.getCopyLinkMenu()]:[],{separator:!0},{action:"copy-properties",flags:["view_restricted"]},{action:"paste-properties",flags:["edit"]}],p=y.Ay.windows?"Ctrl+":"\u2318";switch(this.props.selectedView.editorType){case I.nT.Design:case I.nT.Illustration:case I.nT.Figmake:case I.nT.Sites:case I.nT.Slides:case I.nT.Cooper:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${p}C`}:null,r?{action:"paste-here",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.paste-here"),shortcutText:a?`${p}V`:void 0}:this.props.isSingleSlideViewCarousel?{action:"paste",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.paste"),shortcutText:`${p}V`}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:a?(0,d.t)("fullscreen_actions.paste-and-match-style"):void 0,shortcutText:a?`${p}\u21E7V`:void 0}:null,{action:"copy-paste-menu",flags:["edit"],children:m},{action:"copy-as-menu",flags:["!edit"],children:m},{action:"duplicate-in-place",flags:["edit","slides","cooper"],displayText:(0,d.t)("fullscreen_actions.duplicate-in-place"),shortcutText:`${p}D`},l?{...r_.V6,name:"send-to-make-from-design"}:null,s||o?{action:"find-inspiration",flags:["edit","!slides","!cooper"]}:null,(0,c.kc)().asset_suggestions_inspect_fragment?{action:"inspect-fragment",flags:["!slides","!cooper"]}:null];break;case I.nT.DevHandoff:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${p}C`}:null,this.props.isLimitedDevMode?null:{action:"copy-text"},this.props.isLimitedDevMode?null:{action:"copy-as-svg"},this.props.isLimitedDevMode?null:{action:"copy-as-png"},this.props.isLimitedDevMode?null:{action:"copy-layer-name"},this.props.canCopyLink?this.getCopyLinkMenu():null,l?{...r_.Hm}:null];break;case I.nT.Whiteboard:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${p}C`}:null,r?{action:"paste",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.paste"),shortcutText:`${p}V`}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.paste-to-replace")}:null,u?{...r_.pe,action:"send-to-make-from-figjam"}:null];break;default:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${p}C`}:null,r?{action:"paste",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.paste"),shortcutText:`${p}V`}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.paste-to-replace")}:null]}return e}getCopyExportMenu(){return this.isFigjam()?[...this.props.canCopyLink?[this.getCopyLinkMenu(),this.getCopyHyperlinkMenu()]:[],this.getMaybeEmbedOrLinkPreviewWidgetMenu(),this.getMaybeEmbedDeactivateMenu(),{action:"copy-as-png"},{action:"export-selection-or-current-page",flags:["view_restricted","whiteboard"],displayText:(0,d.t)("fullscreen.context_menu.export_selection")},this.getExportVideo()]:(0,c.kc)().aip_mw_video?[this.getExportVideo()]:[]}rulerGuideMenu(e,t){let n="toggle-rulers",i=[e===iK._0.Y?{action:"remove-vertical-guides"}:{action:"remove-horizontal-guides"},{separator:!0},{action:n,displayText:(0,d.t)("fullscreen.ruler_guide_context_menu.hide_rulers"),shortcutText:(0,te.c1)(this.props.appModel.keyboardShortcuts,n)},...this.getRulerUnitSubmenu()],r=[{action:"remove-guide"}];switch(t){case o.bQY.RULER:return i;case o.bQY.GUIDE:return r;case o.bQY.BOTH:return r.concat(...i);default:return[]}}getRulerUnitSubmenu(){let e=[{action:"toggle-ruler-unit-pixels",checked:(0,U.UK)().renderRulerUnitAsPixels.getCopy()},{action:"toggle-ruler-unit-inches",checked:(0,U.UK)().renderRulerUnitAsInches.getCopy()}];return[{action:"ruler-unit-menu",flags:["cooper"],children:(0,iG.WI)(e),featureFlags:["buzz_print_export"]}]}singleSlideViewCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["slides"]},{separator:!0},{action:"create-slide",flags:["slides"]},{action:"create-row",flags:["slides"],featureFlags:["slide_chapters"]},{action:"select-all-slides",flags:["slides"]},...this.skipSlidesMenu()]}isSelectedElementASlide(){let e=this.getSelectionGuid();if(!e)return!1;let t=(0,P.UN)().get(e);return t?.type==="SLIDE"}skipSlidesMenu(){let e=(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=(0,P.UN)().get(e);if(!(0,iW.Y)(t))return!1}return!0})(),t=Object.keys(this.props.sceneGraphSelection).length>1;return e?[{separator:!0},(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=(0,P.UN)().get(e);if(!(0,iW.Y)(t)||!t.isSkippedSlide)return!1}return!0})()?{action:t?"unskip-slides":"unskip-slide",flags:["slides"]}:{action:t?"skip-slides":"skip-slide",flags:["slides"]}]:[]}slidesObjectAnimationMenu(){return(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=(0,P.UN)().get(e);if(!t||!t.isInSlide)return!1}return!0})()?[{action:"add-slide-object-animation",flags:["edit","slides"]}]:[]}buzzCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["cooper"]}]}sitesSemanticTagMenu(){let e=this.props.accessibilityPanelConfig;return e.tagEditable?{name:"change-tag",children:e.tagOptions.map(t=>{if("divider"in t)return{separator:!0};let n=t.value,i=n.toLowerCase(),r=(0,rR.K3)(n),a=e.accessibleHTMLTag===rR._I.AUTO?e.tagDefaultValue===n:e.accessibleHTMLTag===n;return{name:i,displayText:r,sideText:i,sideTextClassname:rH.Rc,rightJustifySideText:!0,callback:()=>{e.setAccessibleHTMLTag(n)},checked:a}}),flags:["edit","sites"]}:null}contextMenu(){let{objectItems:e,relatedComponentMenu:t,relatedStateMenu:n}=this.state,r=this.props.appModel,a=this.props.selectedView.editorType===I.nT.Design,s=this.props.selectedView.editorType===I.nT.Slides,l=(0,rP.Vj)(this.props.selectedView),u=this.props.selectedView.editorType===I.nT.Figmake,m=this.props.selectedView.editorType===I.nT.Cooper,p=this.props.selectedView.editorType===I.nT.Illustration,h=(a||l||u||p)&&(0,te.Yh)(this.props.appModel,"select-node-menu")&&!this.props.isObjectsPanelMenu&&e.length>1,f=this.props.isObjectsPanelMenu&&(0,te.Yh)(this.props.appModel,"rename-selection"),g=f&&this.props.hasAIPermission&&(0,rS.Ii)(),x=window.FigmaMobile,_=r0(r.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,x?.requestToAddDraftCommentPin),y=(0,te.Yh)(this.props.appModel,"swap-to-related-symbol"),b=(0,te.Yh)(this.props.appModel,"swap-to-related-state"),v=this.props.isPrototypeCanvasEditUiVisible?[{separator:!0},{action:"remove-interactions-on-selection",flags:["edit"]},{action:"add-prototype-starting-point",flags:["edit"]},{action:"delete-prototype-starting-point",flags:["edit"]}]:[],C=this.getCopyPasteMenu(),E=this.getCopyExportMenu(),w=[h?{action:"select-node-menu",children:e,name:"select-node-menu"}:null,this.getMoveToMenu(),{action:"move-to-file",flags:["edit"]}],k=!a&&!p,T=s||l&&!(0,c.kc)().sites_plugin_api||u||m?[]:[k?{separator:!0}:null,this.props.userCanViewPlugins?(0,rn.qz)(this.props,"contextmenu"):null,this.props.appModel.isReadOnly||!this.props.userCanViewWidgets?null:(0,ri.Vd)(this.props,"contextmenu")],j=(0,c.kc)().internal_only_debug_tools,S=j&&1===this.props.numSelected,A=this.props.spellCheckPreference,N=this.props.appModel.spellCheckSuggestions,M=rU(this.props.hasSlidesAiTextEnabled),R=rB(this.props.dispatch,M);return[...A||this.props.appModel.activeTextReviewPlugin?(0,rh.Ax)(N,this.props.editorType):[],{separator:!0},...this.getTableCellMenu(),{separator:!0},..._,...C,{separator:!0},{action:"delete-selection",flags:["whiteboard","slides"]},{separator:!0},R,{separator:!0},this.getCombineVideoStack(),{separator:!0},...E,{separator:!0},...w,{action:"bring-to-front",flags:["edit"]},{action:"bring-forward",flags:["edit","slides"]},{action:"send-backward",flags:["edit","slides"]},{action:"send-to-back",flags:["edit"]},{separator:!0},{action:"create-webpage",flags:["edit","sites"]},{action:"set-as-site-homepage",flags:["edit","sites"]},{action:"convert-responsive-set-to-webpage",flags:["edit","sites"]},{action:"create-responsive-node-set",featureFlags:["sts_responsive_node_sets"],flags:["edit","sites"]},{action:"replace-selected-frame-with-section",flags:["edit","!slides"]},{action:"replace-selected-section-with-frame",flags:["edit","!slides"]},{action:"group-selection",flags:["edit"]},{action:"frame-selection",flags:["edit"]},{action:"create-section-from-selection",flags:["edit","!slides"]},{action:"ungroup-selection",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.ungroup")},f?{action:"rename-selection",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.rename")}:null,g?{name:"auto-rename-layers",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.auto_rename_layers"),rightIcon:(0,i.jsx)(np.yi,{variant:rA.x.ON_MENU,helpUrlVariant:tN.JT.AUTO_RENAME_LAYERS}),callback:()=>{(0,rI.$I)({moduleToOpen:{type:"custom",module:(0,i.jsx)(rN.A,{source:o.uQ6.CONTEXT_MENU}),beforeModuleOpen:()=>{(0,nd.B3)(tN.JT.AUTO_RENAME_LAYERS),(0,nd.Ag)(tN.JT.AUTO_RENAME_LAYERS,nn.Ay,{source:o.uQ6.CONTEXT_MENU,overwriteNames:!1})},name:e7.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"selection_context_menu_rename_layers"}})}}:null,{action:"flatten-selection",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.flatten")},p?{action:"break-vector-network-into-paths",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.split_vector")}:null,p?{action:"add-transform-modifier-to-selection",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.wrap_with_transform")}:null,{action:"outline-stroke",flags:["edit"],shortcutText:(0,te.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke")},{action:"mask-selection",flags:["edit"],get displayText(){let e=(0,re.P)();return(0,rt.A)(e)}},p?{action:"create-brush-menu",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.create-brush-menu"),children:[{action:"create-stretch-brush"},{action:"create-scatter-brush"}]}:null,{action:"set-as-primary-breakpoint",flags:["edit"],displayText:(0,d.t)("fullscreen_actions.set-as-primary-breakpoint")},this.props.canSetAsFavicon&&!this.props.appModel.isReadOnly?this.getFaviconMenu(this.getSelectionGuid()===this.props.sceneGraph.getCurrentPage()?.webMetadata?.faviconID):null,this.props.canSetAsFileThumbnail&&!this.props.appModel.isReadOnly?this.getFileThumbnailMenu(this.getSelectionGuid()===this.props.openFile?.thumbnailGuid):null,(0,c.kc)().dse_library_pg_thumbnails&&this.props.canSetAsPageThumbnail&&!this.props.appModel.isReadOnly?this.getPageThumbnailMenu():null,{separator:!0},{action:this.props.propertiesPanelShouldShowRemoveAutoLayout?"unstack-selection":"stack-selection",flags:["design","edit","slides"]},(0,i9.r)({msalEnabled:(0,te.Yh)(this.props.appModel,"run-multi-stack-auto-layout")&&!this.props.propertiesPanelShouldShowRemoveAutoLayout,destroyAllALEnabled:(0,te.Yh)(this.props.appModel,"destroy-all-auto-layout"),resizeToFitEnabled:(0,te.Yh)(this.props.appModel,"resize-to-fit")}),{action:"create-symbol",flags:["edit"]},this.sitesSemanticTagMenu(),{action:"create-code-layer-from-design",flags:["edit","sites"]},{action:"create-make-from-design",flags:["edit","design"],featureFlags:["bake_canvas"],displayText:(0,d.t)("fullscreen_actions.create-make-prototype")},{action:"edit-code",flags:["edit","sites"]},{action:"restore-design-in-place-from-code",flags:["edit","sites"]},{action:"create-template",flags:["edit"],featureFlags:["dse_templates_proto"]},...(0,ro.D)()?[{action:"convert-to-slot",flags:["edit"]},{action:"convert-slot-to-frame",flags:["edit"]},{action:"group-selection-into-slot",flags:["edit"]}]:[],y&&t?{name:"swap-to-related-symbol",flags:["edit"],childDropdown:t}:null,b&&n?{name:"swap-to-related-state",flags:["edit"],childDropdown:n}:null,{action:"reset-symbol",flags:["edit"]},{action:"reset-fauxverride",flags:["edit","sites"]},{action:"reset-responsive-container-overrides",flags:["edit","sites"]},{action:"detach-instance",flags:["edit","design","sites","slides"]},this.getMainComponentActionsMenu(),{action:"link-to-component",flags:["edit"]},{displayText:(0,d.t)("dev_handoff.layers.add_annotation"),flags:["design","dev_handoff"],action:"add-annotation"},{action:"remove-annotations",flags:["dev_handoff","design"]},...k?[]:T,this.getFigJamRemovePluginActionsMenu(),{separator:!0},{action:"toggle-shown-for-selected-nodes",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.show_hide")},{action:"toggle-locked-for-selected-nodes",flags:["edit"],displayText:(0,d.t)("fullscreen.context_menu.lock_unlock")},{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},{action:"flip-horizontal",flags:["edit"]},{action:"flip-vertical",flags:["edit"]},{separator:!0},...k?T:[],{separator:!0},this.getImageToProfilePicture(),...v,...s?this.skipSlidesMenu():[],{separator:!0},...s?this.slidesObjectAnimationMenu():[],(0,c.kc)().dt_ccv2_on_canvas?{action:"find-codebase-suggestions",flags:[]}:null,S?{separator:!0}:null,S?{action:"debug-inspect-layer-figma-scope"}:null,j?{action:"debug-print-as-test-code"}:null]}getActionSource(){return this.props.isTextEditModeMenu?"canvas_context_menu":this.props.isObjectsPanelMenu?"panel":this.props.isRulerGuideMenu||this.props.isSelectLayerMenu?void 0:"canvas_context_menu"}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,iG.WI)(this.props.isTextEditModeMenu?this.textEditModeMenu():this.props.isSelectLayerMenu?this.selectLayerMenu():this.props.isRulerGuideMenu?this.rulerGuideMenu(this.props.axis,this.props.rulerGuideContextMenuType):this.props.isSingleSlideViewCarousel?this.singleSlideViewCarouselMenu():this.props.isBuzzCarousel?this.buzzCarouselMenu():this.contextMenu());return r2(n,this.getActionSource()),(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:this.props.appModel,dispatch:this.props.dispatch,isLimitedDevMode:this.props.isLimitedDevMode,menuItems:n,recordingKey:"layerMenu",removeDisabledItems:!0,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,selectedView:this.props.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}};function rX(e){let t=e.mirror.sceneGraph.getCurrentPage()?.guid;return e.library.publishableSymbols.some(e=>e.containingFrame.pageId===t)||e.library.publishableStateGroups.some(e=>e.containingFrame.pageId===t)}function rY(e){let t=(0,a.d4)(tj.tB),n=(0,iT.Tg)(),r=(0,nS._X)({subscribeToUpdates_expensive:!0}),s=(0,rl.ud)(),o=(0,ij._I)(),l=(0,ij.U4)(),d=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),c=r1(),m=(0,a.wA)(),p=(0,iT.Be)(),h=p.orgPlugins,f=(0,rr.h)("plugin"),g=(0,H.J2)((0,U.UK)().spellCheckPreference),x=(0,u.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?(0,P.UN)().get(t[0]):null,i=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type||"RESPONSIVE_SET"===n.type||"WEBPAGE"===n.type),r=null!=n&&"FRAME"===n.type&&n.isTopLevelFrame(),a=e.selectedView.editorType,s=i&&!n?.isInstanceSublayer;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanViewPlugins:(0,ns.Eh)(e),userCanViewWidgets:(0,iT.BE)(e),userCanRunExtensions:(0,ns.cb)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,currentOrgId:e.currentUserOrgId,org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFavicon:r,canSetAsFileThumbnail:s,canSetAsPageThumbnail:s&&rX(e),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:a,isDevHandoff:a===I.nT.DevHandoff,isLimitedDevMode:(0,rw.$A)(e.selectedView)&&!(0,ij.tn)(e)}}),_=(0,iJ.PE)(),y=(0,rD.Ne)(),b=(0,rj.LC)(),v=(0,rs.V)(),C=(0,rs.J)(),E=r5(),w=(0,iZ.to)(),k=(0,rR.bo)();return(0,i.jsx)(rq,{...e,...x,accessibilityPanelConfig:k,activeTextReviewPlugin:d,allSavedPlugins:p.plugins,canAccessDevMode:o,canAccessDevModeEntryPoint:l,currentOrgId:x.currentOrgId,dispatch:m,editorType:x.editorType,fileByKey:s,hasAIPermission:_,hasFragmentSearchPermission:b,hasSlidesAiTextEnabled:y,isCooper:w,isPrototypeCanvasEditUiVisible:c,openFile:t,orgPrivatePlugins:f,orgSavedPlugins:h,recentlyUsedPlugins:n,shouldConsolidateSendToEntryPoints:E,shouldShowSendToMakeFromDesign:v,shouldShowSendToMakeFromFigJam:C,spellCheckPreference:g,viewportInfo:r})}rq.displayName="SelectionContextMenu",rq.refreshCache=new rb.O(iX.A.duration(1,"day"));var rJ=(e=>(e.SINGLE_SLIDE_VIEW="single_slide_view",e.COOPER_CAROUSEL="cooper_carousel",e))(rJ||{});function rZ(e){let t=(0,a.d4)(tj.tB),n=(0,iT.Tg)(),r=(0,nS._X)({subscribeToUpdates_expensive:!0}),s=(0,rl.ud)(),o=(0,ij._I)(),l=(0,ij.U4)(),d=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),c=r1(),m=(0,a.wA)(),p=(0,iT.Be)(),h=p.orgPlugins,f=(0,rr.h)("plugin"),g=(0,H.J2)((0,U.UK)().spellCheckPreference),x=(0,u.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?(0,P.UN)().get(t[0]):null,i=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),r=e.selectedView.editorType,a=i&&!n?.isInstanceSublayer;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanViewPlugins:(0,ns.Eh)(e),userCanViewWidgets:(0,iT.BE)(e),userCanRunExtensions:(0,ns.cb)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,currentOrgId:e.currentUserOrgId,org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFavicon:!1,canSetAsFileThumbnail:a,canSetAsPageThumbnail:a&&rX(e),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:r,isDevHandoff:r===I.nT.DevHandoff,isLimitedDevMode:(0,rw.$A)(e.selectedView)&&!(0,ij.tn)(e)}}),_=(0,iJ.PE)(),y=(0,rD.Ne)()&&"single_slide_view"===e.carouselType,b=(0,rj.LC)(),v=r5(),C=(0,iZ.to)(),E=(0,rR.bo)();return(0,i.jsx)(rq,{...e,...x,accessibilityPanelConfig:E,activeTextReviewPlugin:d,allSavedPlugins:p.plugins,canAccessDevMode:o,canAccessDevModeEntryPoint:l,dispatch:m,editorType:x.editorType,fileByKey:s,hasAIPermission:_,hasFragmentSearchPermission:b,hasSlidesAiTextEnabled:y,isBuzzCarousel:"cooper_carousel"===e.carouselType,isCooper:C,isPrototypeCanvasEditUiVisible:c,isSingleSlideViewCarousel:"single_slide_view"===e.carouselType,openFile:t,orgPrivatePlugins:f,orgSavedPlugins:h,recentlyUsedPlugins:n,shouldConsolidateSendToEntryPoints:v,spellCheckPreference:g,viewportInfo:r})}function rQ({expandElement:e,guid:t,...n}){let r=(0,a.d4)(e=>e.mirror.sceneGraphSelection),s=(0,a.d4)(e=>e.mirror.appModel),o=(0,a.d4)(e=>e.mirror.sceneGraph),l=(0,w.hA)()??void 0,c=(0,tj.q5)(),u=(0,a.d4)(e=>e.mirror.selectionProperties.canCopyLinkToSelection),m=(0,e2.Fk)((e,t)=>{let n=e.get(t);return n?n.canHaveAnnotation:null},t),p=(0,rk.s9)(),h=(0,a.wA)(),f=y.Ay.windows?"Ctrl+":"\u2318",g=[e?{name:"expand-element",callback:e}:null,{separator:!0},m&&p?{name:"add-annotation",action:"add-annotation"}:null,{separator:!0},navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${f}C`}:null,{action:"copy-text"},{action:"copy-as-svg"},{action:"copy-as-png"},{action:"copy-layer-name"},u?{name:"copy-link",args:{label:(0,d.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:""})},callback:()=>{if(!c)return;let e=(0,rg.jN)({file:c,nodeId:t,isDevHandoff:!0,devModeFocusId:l,isReadOnly:!0,isFigJam:!1,attributionContext:null});h(i6.S({fileKey:c.key,url:e,source:rx.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:void 0}))}}:null],x=n.clientX,_=n.clientY;return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:s,dispatch:h,menuItems:g.filter(iQ.t),recordingKey:"codeMenu",removeDisabledItems:!0,sceneGraph:o,sceneGraphSelection:r,selectedView:n.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:x+100,top:_,right:x+110,bottom:_-10}})})}function r$({...e}){let t=(0,a.d4)(e=>e.mirror.sceneGraphSelection),n=(0,a.d4)(e=>e.mirror.appModel),r=(0,a.d4)(e=>e.mirror.sceneGraph),s=(0,a.wA)(),o=y.Ay.windows?"Ctrl+":"\u2318",l=[];navigator.clipboard&&navigator.clipboard.write&&l.push({name:"copy",shortcutText:`${o}C`,callback:()=>{e.onCopyText()}});let d=e.clientX,c=e.clientY;return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:n,dispatch:s,menuItems:l,recordingKey:"codeMenu",removeDisabledItems:!0,sceneGraph:r,sceneGraphSelection:t,selectedView:e.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:d+100,top:c,right:d+110,bottom:c-10}})})}function r0(e,t,n,i,r,a,s){return e&&n&&t.commentsEnabled&&y.Ay.isIpadNative?[{name:"add-comment",callback:()=>{!function(e,t,n,i,r){if(!e)return;let a={x:t,y:n-rz};if(r)r({x:a.x,y:a.y,width:36.8,height:36.8});else{let t=(0,nS.$$)(e,a);i(iB.vV({anchorPosition:t})),i(iB.CX())}}(n,i,r,a,s)}},{separator:!0}]:[]}function r1(){return(0,H.ut)((0,rp.aY)(),o.FAf.DESIGN)===o.FAf.PROTOTYPE}function r2(e,t){t&&e.forEach(e=>{e&&((0,i8._o)(e)&&(e.source=t,"submenu"in e&&e.submenu&&r2(e.submenu,t)),(0,i8.TV)(e)&&e.children&&r2(e.children,t))})}function r5(){let{getConfig:e}=(0,iY.I7)("exp_send_to_new_products_consolidation");return r.useCallback(()=>e().get("enabled",!1,e=>"boolean"==typeof e),[e])}var r4=n(490549);function r3({clientX:e,clientY:t,selectedView:n}){let s=(0,a.wA)(),o=(0,a.d4)(e=>e.mirror.appModel),l=(0,tj.q5)(),c=r.useCallback(()=>{s(r4.lW({stringToCopy:(0,rg.jN)({file:l,isDevHandoff:!0,isDevModeOverview:!0,isReadOnly:!0,isFigJam:!1,attributionContext:null}),successText:(0,d.t)("permissions.copy_link_button.visual_bell.copy_summary_link")}))},[s,l]),u=[{name:"page-copy-link",displayText:(0,d.t)("dev_handoff.status.copy_summary_link"),callback:c}];return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:o,menuItems:u,dispatch:s,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,recordingKey:"overviewMenu"})})}function r6({pageId:e,clientX:t,clientY:n,selectedView:r}){let s=(0,a.wA)(),o=(0,a.d4)(e=>e.mirror.appModel),l=(0,e2.Fk)((e,t)=>e.get(t)?.isPageDivider,e),d=[{action:"page-copy-link",args:{nodeId:e},disabled:l}];return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:o,menuItems:d,dispatch:s,selectedView:r,showPoint:!1,targetRect:{width:10,height:10,left:t+100,top:n,right:t+110,bottom:n-10},removeDisabledItems:!1,recordingKey:"pageMenu"})})}function r7(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.mirror.appModel),r=e.clientX,s=e.clientY,o=[{name:"redistribute-gradient-stops",callback:e.redistributeStops},{separator:!0},{name:"delete-gradient-stop",callback:e.deleteStop}];return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:n,menuItems:o,dispatch:t,selectedView:e.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:r+100,top:s,right:r+110,bottom:s-10},removeDisabledItems:!1,recordingKey:"pageMenu"})})}var r9=n(184743),r8=n(450207),ae=n(454705),at=n(842582);function an({name:e,variant:t,recordingKey:n,onClick:r}){return(0,i.jsx)(ae.J,{brand:"design",mode:"dark",children:(0,i.jsx)("div",{className:"x12ulsxz xdqyycr",children:(0,i.jsx)(at.Ih,{variant:t,recordingKey:n,onClick:r,children:e})})})}var ai=n(317496),ar=n(594654);function aa(e){return(0,i.jsx)(_.u9,{label:"LinterContextMenu",children:(0,i.jsx)(as,{...e})})}function as({targetInViewport:e,selectedView:t}){let n=(0,a.wA)(),s=(0,a.d4)(e=>e.mirror.appModel),l=(0,P.UN)(),c=(0,nS.ni)(),u=(0,ij.xo)(),m=(0,r.useCallback)(()=>{(0,ar.u)({source:o.Qej.RFD_INITIAL_NUDGE}),n(r8.oB())},[n]);(0,ai.KV)(o.Qej.RFD_INITIAL_NUDGE,!0);let p=(0,r.useMemo)(()=>[{name:(0,d.t)("dev_handoff.linter.menu_title_header"),header:!0,displayTextClassName:tf.Ay.classNames(ao.title,ao.header)},{name:(0,d.t)("dev_handoff.linter.menu_title_subheader"),header:!0,displayTextClassName:tf.Ay.classNames(ao.title,ao.subheader)},{render:()=>(0,i.jsx)(an,{name:(0,d.t)("fullscreen_actions.quick_actions.detect-violations"),variant:"primary",recordingKey:"linterDetectViolations",onClick:m}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,flags:["design","dev_handoff"],disabled:!!u},{render:()=>(0,i.jsx)(an,{name:(0,d.t)("dev_handoff.linter.menu_skip_button"),variant:"secondary",recordingKey:"skipLinting",onClick:()=>n(r8.oB())}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,flags:["design","dev_handoff"],disabled:!!u}],[u,n,m]),h=e.origin.x+c.x,f=e.origin.y+c.y,g={left:h,top:f,right:h+e.size.x,bottom:f+e.size.y,width:e.size.x,height:e.size.y};return(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{appModel:s,dispatch:n,menuItems:p,minWidth:200,onKeyDown:e=>{(0,r9.Fo)(e)&&"z"===e.key.toLowerCase()&&(0,eI.f7)(e)},recordingKey:"linterMenu",removeDisabledItems:!u,sceneGraph:l,selectedView:t,showPoint:!0,targetRect:g})})}let ao={title:{ks0D6T:"xb3xe92",khDVqt:"xeaf4i8",kMwMTN:"xz16r55",$$css:!0},header:{kLKAdn:"x1iorvi4",kMv6JI:"xxrns5j",kGuDYH:"x1q8tae1",k63SB2:"x1vg90ec",kLWn49:"x1eab18d",kb6lSQ:"x1yyillh",$$css:!0},subheader:{kGO01o:"xjkvuk6",kMv6JI:"xrlp15q",kGuDYH:"x1nmd3yn",k63SB2:"xm735u9",kLWn49:"xkbmbem",kb6lSQ:"x3wk4up",$$css:!0}};var al=n(416854),ad=n(738388),ac=n(816411),au=n(964731),am=n(469543);function ap(){let e=(0,au.Um)(),t=(0,a.wA)(),n=(0,ac.Gt)(e?.data.pluginId,e?.data.triggeredFrom),r=(0,ac.dR)(e?.data.pluginId,e?.data.triggeredFrom),s=(0,ad.t)(e?.data.pluginId,n,r);if(!e)return null;let o=e.data.target.height+e.data.target.width>0;return(0,i.jsx)(am.j,{showPoint:o,items:s,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:e.data.target,dispatch:t,lean:o?"left":"right"})}var ah=n(125802),af=n(628051),ag=n(652154),ax=n(998146),a_=n(741400),ay=n(914909);let ab="status_context_menu--headerStrong--NG7Bx";function av(e){return(0,i.jsx)(_.u9,{label:"ReadyStatusContextMenu",children:(0,i.jsx)(aC,{...e})})}function aC({targetInViewport:e,nodeId:t,selectedView:n}){let s=(0,a.wA)(),l=(0,a.d4)(e=>e.mirror.appModel),p=(0,P.UN)(),h=(0,ag.mJ)(t),f=!!h?.hasReadyStatus,g=!!h?.hasCompletedStatus,x=f||g,_=(0,af.D)()&&!!h?.hasBeenEditedSinceLastStatusChange,y=(0,tj.q5)(),b=(0,iN.U)("status_label_menu"),v=(0,nS.ni)(),C=(0,ij._I)(),E=(0,ij.U4)(),w=(0,af.D)(),k=C&&w,T=(0,te.Yh)(l,"set-selection-completed-status"),j=(0,te.Yh)(l,"mark-incomplete"),S=(0,ah.L4)(),A=(0,iS.U)(),N=(0,nT.E3)(),[,M]=(0,m.fp)(ax.wz),R=(0,V.dh)(),O=(0,ni.A0)(o.uQ6.READY_FOR_DEV),D=(0,ij.xo)(),L=(0,r.useMemo)(()=>o.w3z.isReadOnly(o.SES.NODE_STATUS),[]),F=o.w3z.canEditNodeStatus(),B=E&&L&&!C,U=(0,u.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,editorType:I.nT.DevHandoff,focusViewBackNavigation:{toEditorType:e.selectedView.editorType,toOverview:!1},devModeFocusId:t,overviewBackButtonTargetNodeId:R}:e.selectedView),H=(0,r.useMemo)(()=>{if(!y)return[];let e=j?{name:"status-mark-as-ready",callback:()=>{a_.z4.setNodesReady(!0,[t],"canvas",null),O&&(0,ni.R4)([t])},flags:["dev_handoff","design"],disabled:!!D}:null,r=T?{name:"status-mark-as-completed",callback:()=>{a_.z4.setNodesCompleted([t],"canvas")},flags:["dev_handoff","design"],disabled:!!D}:null,a=f?r:e,l=S?{name:"detect-violations",callback:()=>{(0,ar.u)({source:o.Qej.RFD_STATUS_MENU})},flags:["dev_handoff","design"],featureFlags:["aip_flower_garden","aip_flower_garden_ready_for_dev"],disabled:!!D}:null,c=[...l?[l]:[],...a?[a]:[]],u={name:"ready-status-copy-dev-link",callback:()=>{let e=(0,rg.jN)({file:y,nodeId:t,isDevHandoff:!0});s(i6.S({fileKey:y.key,url:e,source:rx.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"]},m=E?[{name:"ready-status-open-in-dev-mode",callback:()=>{b("handoff")},flags:["design"]},u]:[u],p={separator:!0,flags:["design","dev_handoff"]},h=[p,{render:()=>(0,i.jsx)(iP,{}),optionHeight:32,flags:["design"]}],g=k&&!a_.z4.getIsExtension()?[{name:"enter-dev-mode-focus-view",callback:()=>{A("Dev Mode Canvas Focus Entry Clicked",{nodeId:"devModeFocusId"in U?U.devModeFocusId:""}),b("handoff"),M(N===I.nT.DevHandoff?"dev_mode_canvas":"design_canvas"),s(r8.sf(U))},flags:["design","dev_handoff"]},{name:"status-copy-focus-link",callback:()=>{let e=(0,rg.jN)({file:y,nodeId:R,isDevHandoff:!0,devModeFocusId:n?.devModeFocusId??t});s(i6.S({fileKey:y.key,url:e,source:rx.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1}]:m;if(!F)return[...g,...B?h:[]];let v=[...g,...c.length>0?[p,...c]:[],p,{name:"status-remove",callback:()=>{a_.z4.setNodesReady(!1,[t],"canvas",null)},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1,disabled:!!D},...B?h:[]];return x?_?[{name:"completed-status-remark-as-ready",displayText:(0,d.t)("dev_handoff.status.popover_title_add_a_note"),displayTextClassName:ab,children:v,showDotDotDotButton:!0},{render:()=>(0,i.jsx)(ay.A,{onResult:e=>{a_.z4.setNodesReady(!0,[t],"canvas",e??null),O&&(0,ni.R4)([t]),s(r8.oB())},useDarkMode:!0}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,allowClickThrough:!0,flags:["design","dev_handoff"],disabled:!!D}]:v:[{header:!0,name:(0,d.t)("dev_handoff.status.menu_title_start_handoff_title"),displayTextClassName:ab},{render:()=>(0,i.jsx)(ay.A,{onResult:e=>{a_.z4.setNodesReady(!0,[t],"canvas",e??null),O&&(0,ni.R4)([t]),s(r8.oB())},useDarkMode:!0}),flags:["design","dev_handoff"],disabled:!!D}]},[y,T,j,R,f,E,F,B,t,b,s,k,x,_,U,n?.devModeFocusId,N,M,A,O,D,S]),z=e.origin.x+v.x,G=e.origin.y+v.y,K={left:z,top:G,right:z+e.size.x,bottom:G+e.size.y,width:e.size.x,height:e.size.y};return(0,ai.KV)(o.Qej.RFD_STATUS_MENU,S&&!!(0,c.kc)().aip_flower_garden_ready_for_dev),(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:l,dispatch:s,menuItems:H,minWidth:176,recordingKey:"readyStatusMenu",removeDisabledItems:!D,sceneGraph:p,selectedView:n,showPoint:!0,targetRect:K})})}function aE(e){let t=(0,a.wA)(),n=(0,u.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),r=(0,tj.q5)(),s=(0,ex.unwrap)(r?.siteMount);return(0,i.jsx)(aw,{...e,...n,openFileHasPublishedSiteMount:!!s&&"published"===s.status,dispatch:t})}class aw extends r.PureComponent{constructor(e){super(e)}componentDidMount(){o.VDs?.setExpectingCopyCutEvent(!0)}componentWillUnmount(){o.VDs?.setExpectingCopyCutEvent(!1)}contextMenu(){let e=this.props.sceneGraphSelection,t=this.props.sceneGraph.getCurrentPage()?.siteHomepageId,n=!!t&&void 0!==e[t];return[{action:"sites-copy-link",flags:["edit"],displayText:(0,d.t)("sites.fullscreen_actions.copy-external-url"),disabled:!this.props.openFileHasPublishedSiteMount},{action:"copy-link",flags:["edit"],displayText:(0,d.t)("sites.fullscreen_actions.copy-link")},{separator:!0},{action:"rename-selection",flags:["edit"],disabled:n,displayText:(0,d.t)("fullscreen.context_menu.rename")},{action:"duplicate",flags:["edit"],displayText:(0,d.t)("sites.fullscreen_actions.duplicate-webpage")},{action:"copy",flags:["edit"]},{action:"delete-selection",flags:["edit"],disabled:n,displayText:(0,d.t)("sites.fullscreen_actions.delete-selection")},{separator:!0},{action:"set-as-site-homepage",flags:["edit"]},{action:"convert-responsive-set-to-webpage",flags:["edit"]}]}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,iG.WI)(this.contextMenu());return(0,i.jsx)("div",{className:`${eM.Dm}`,children:(0,i.jsx)(ix.Q,{appModel:this.props.appModel,dispatch:this.props.dispatch,isLimitedDevMode:this.props.isLimitedDevMode,menuItems:n,recordingKey:"webpageMenu",removeDisabledItems:!0,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,selectedView:this.props.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}}function ak({clientX:e,clientY:t,selectedView:n,isLayerLike:r,isInteraction:s,renameItem:o,deleteItem:l,selectOnCanvas:c}){let m=(0,a.wA)(),{sceneGraph:p,sceneGraphSelection:h}=(0,u.R)(e=>({sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),f=(0,a.d4)(e=>e.mirror.appModel),g=[];return g.push({name:"rename-selection",displayText:(0,d.t)("fullscreen.context_menu.rename"),callback:o,shortcutText:" "}),r&&g.push({name:"select-on-canvas",displayText:(0,d.t)("sites.code_layer.context_menu.select_on_canvas"),callback:c}),g.push({name:r?"delete-code-layer":s?"delete-code-interaction":"delete-code-file",callback:l}),(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{appModel:f,dispatch:m,menuItems:g,recordingKey:"codeComponentContextMenu",removeDisabledItems:!0,sceneGraph:p,sceneGraphSelection:h,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}aw.displayName="WebpageContextMenu";var aT=n(748765),aj=n(236716),aS=n(155932),aI=n(640675);function aA({clientX:e,clientY:t,selectedView:n,targetItem:r,paint:s,onPaintChange:l}){let d=(0,a.wA)(),{appModel:c,sceneGraph:m,sceneGraphSelection:p}=(0,u.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),h=(0,aS.s1)(),f=(0,aj.k1)(h),g=[];return"DOCUMENT_COLOR"===r.type?g.push({name:"slides-move-to-theme-colors",recordingKey:"moveToThemeColors",callback:()=>{let e=f(r.documentColor);e&&s&&(0,eR.hS)(s)&&s.color&&(0,eu.DA)(s.color,r.documentColor)&&l((0,aI.FW)(e),aT.zk.YES)}}):(g.push({name:"slides-edit-theme-color",recordingKey:"edit",callback:r.onEdit}),g.push({name:"slides-delete-theme-color",recordingKey:"delete",callback:()=>{o.CWU?.deleteVariable(r.variableId)}})),(0,i.jsx)("div",{className:eM.Dm,children:(0,i.jsx)(ix.Q,{appModel:c,dispatch:d,menuItems:g,recordingKey:"slidesColorPickerContextMenu",removeDisabledItems:!0,sceneGraph:m,sceneGraphSelection:p,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10}})})}var aN=n(513001),aM=n(60021),aR=n(348841),aP=n(536378),aO=n(641172),aD=n(874554),aL=n(761312),aF=n(938241),aB=n(567726),aU=n(625009),aV=n(776844),aH=n(801861),az=n(927774),aG=n(446341);function aK({name:e,onIconClick:t}){return(0,i.jsxs)("div",{className:aG.w0,children:[(0,i.jsx)("button",{className:tz()(aG.FW,{[aG.PT]:t}),onClick:t,children:(0,i.jsx)(az.Q,{})}),(0,i.jsx)("div",{className:aG.TK,children:e})]})}var aW=n(220752),aq=n(764091);function aX(){return(0,i.jsx)("div",{className:aG.Do,children:(0,i.jsx)(tb.k,{size:"lg"})})}function aY({name:e,description:t,iconUrl:n}){return(0,i.jsx)(aZ,{name:e,description:t,iconUrl:n,trailingIcon:(0,i.jsx)(eN.B,{className:aG.KR,svg:aq.A}),itemType:"shelf"})}function aJ({name:e,description:t,iconUrl:n,isSelected:r,iconBackgroundColor:a}){return(0,i.jsx)(aZ,{name:e,description:t,iconUrl:n,trailingIcon:r?(0,i.jsx)(eN.B,{svg:aW.A}):void 0,iconBackgroundColor:a,itemType:"template"})}function aZ({name:e,description:t,itemType:n,iconUrl:r,trailingIcon:a,iconBackgroundColor:s}){return(0,i.jsxs)("div",{className:tz()({[aG.pl]:"shelf"===n,[aG.fg]:"template"===n}),children:[(0,i.jsx)("div",{className:tz()({[aG.Tt]:"shelf"===n,[aG.BA]:"template"===n}),style:{backgroundColor:s},children:r&&(0,i.jsx)("img",{src:r,alt:(0,d.t)("whiteboard.section_preset_picker.shelf.thumbnail")})}),(0,i.jsxs)("div",{className:aG.FS,children:[(0,i.jsx)("div",{className:aG.fh,children:e}),(0,i.jsx)("div",{className:aG.ij,children:t})]}),a&&(0,i.jsx)("div",{className:aG.ER,children:a})]})}var aQ=n(824171),a$=n(35668),a0=n(933477);let a1="section_preset_item",a2=/^Section(\s\d+)?$/,a5=(0,O.jz)(W.IuL);function a4({sectionId:e,sectionName:t,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:o}){let c,u;let p=(0,a.wA)(),h=(0,tj.tS)(),f=(0,m.md)(aV.g),g="hasData"===f.state?f.data:[],x=0!==g.length,[_,y]=(0,r.useState)(n),[b,v]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),w=(0,aD.fG)(),k=(0,aB.g)(),T=(0,m.Xr)(aU.Yq),j=(0,m.Xr)(aU.pn),S=(0,m.Xr)(aU.bj),I=(0,m.md)(aU.oh),A=(0,m.md)(aU.pF),N=(0,aL.q)(),M=(0,m.md)(aU.pg),R=function(e,t){let n=(0,nS._X)({subscribeToUpdates_expensive:!0}),i=n.zoomScale,a=(0,r.useMemo)(()=>{let t=(0,P.UN)().get(e);if(!t)return null;let n=t.absoluteBoundingBox;return{canvasSpaceSectionTopLeft:t.canvasSpaceSectionTopLeft,canvasSpaceSectionOrigin:{x:n.x,y:n.y}}},[i,e]);if(!a)return null;let{canvasSpaceSectionTopLeft:s,canvasSpaceSectionOrigin:o}=a,l=(0,nS.Z0)(n,{x:s.x,y:s.y},!0),d={x:l.x-8,y:l.y},c=(0,nS.Z0)(n,o,!0),u=Math.max(d.y+n.y,n.y+8),m={top:u,bottom:u+200,height:200,left:0,right:d.x,width:301},p={x:(0,nS.Qt)(t.x,0,i,0),y:(0,nS.Qt)(t.y,0,i,0)};return{contextMenuRect:m,mouseBoundaryRect:{x:d.x,y:c.y+n.y,width:p.x+8,height:p.y}}}(e,A),O=r.useRef(!1),D=r.useCallback(()=>{T(),j(),v(!1)},[T,j]);(0,r.useEffect)(()=>{let e=setTimeout(()=>{E(!0)},500);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>()=>{O.current||(T(),j())},[T,j]);let L=R?.mouseBoundaryRect;if((0,r.useEffect)(()=>{if(!b||!L)return;let e=(0,aM.s)(function(e){let t=document.activeElement?.id??"";(!L||e.clientX>L.x+L.width||e.clientX<L.x||e.clientY>L.y+L.height||e.clientY<L.y)&&!t.includes(a1)&&D()},16);return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[D,b,L]),!R)return null;let{contextMenuRect:F}=R,B=(n,i,r)=>{if(N&&h&&!M&&(v(!1),I?.template.id!==n.template.id)){if(T(),n.template.id===s){j();return}n.type===aF.n.HubFile&&(0,aO.Zg)({insert:()=>k(n,{moveViewportAfterPreview:!1,priority:"user-visible",previewManager:{nodeType:l.Z6A.SECTION,options:{nodeId:e,newName:a2.test(t)||i&&t===i?r:null,shelfId:n.category??"",templateId:n.template.id,templateName:(0,aD.gY)(n)}}}),template:n,fileKey:h,dispatch:p,triggeredFrom:"section-preset",userTriggered:!1,isPreview:!0})}},U=e=>{(0,aO.Zg)({insert:()=>S({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:ew.zk.USER}),template:e,fileKey:h,dispatch:p,triggeredFrom:"section-preset",userTriggered:!0})},V=t=>{N&&h&&!M&&t.template.id!==s&&(O.current=!0,o?p((0,aP.to)({type:aH.f,data:{sectionId:e,initialTemplateId:s,initialShelfId:n,onConfirm:()=>U(t),onCancel:()=>D()}})):U(t))},H=_?g.find(e=>e.id===_):void 0;if(H){c={displayText:H.title,render:()=>(0,i.jsx)(aK,{name:H.title,leadingIcon:a$.A,onIconClick:()=>{y(null),T()}}),preventDismissOnSelected:!0};let e=n&&s?(0,aQ.bO)(g,n,s):null;u=H.shelf_content.map((t,n)=>{let r={type:aF.n.HubFile,template:t,category:_},{name:a,description:o}=w(r),l=(0,aR.$J)(o).trim(),d="client_meta"in t?JSON.parse(t.client_meta):{},c=d.preset_picker?.thumbnail_url_dark_bg??"";return{displayText:a,render:()=>(0,i.jsx)(aJ,{name:a,description:l,iconUrl:c,isSelected:s===r.template.id,iconBackgroundColor:(0,aQ.j3)(n)}),onMouseEnter:()=>{B(r,e,a)},callback:()=>V(r)}})}else c={displayText:"Edit section name",render:()=>(0,i.jsx)(aK,{name:(0,d.t)("whiteboard.section_preset_picker.shelf.title"),leadingIcon:a0.A}),preventDismissOnSelected:!0},u=g.map(t=>({displayText:t.title,render:()=>(0,i.jsx)(aY,{name:t.title,description:t.description,iconUrl:t.shelf_meta.preset_picker?.thumbnail_url}),preventDismissOnSelected:!0,callback:()=>{(0,ek.sx)("section_preset_picker_category_clicked",{fileKey:h,sectionId:e,selectedCategory:t.id,initialTemplateCategory:n,initialTemplateId:s}),y(t.id),T()}}));if(!x){if(!C)return null;u.push({displayText:"Loading",render:()=>(0,i.jsx)(aX,{}),disabled:!0})}return(0,i.jsx)(tw.fu,{name:"section_preset_picker_shown",enabled:x,properties:{fileKey:h,sectionId:e,initialTemplateCategory:n,initialTemplateId:s,templateType:aF.n.HubFile},children:(0,i.jsx)(am.j,{depth:0,disableDropdownScrollContainer:!0,dispatch:p,displayOverTarget:!0,items:[c,...u],lean:"left",leanPadding:0,minBottomMargin:a5,minWidth:301,onMouseLeaveMenu:e=>{if(e.clientX>=F.right){v(!0);return}D()},onSelectItem:e=>{e.callback&&e.callback("",null,p)},parentRect:F,preventZoom:!0,recordingKey:a1,showPoint:!1})})}function a3(e){let t=(0,a.d4)(e=>!e.mirror.appModel.isReadOnly),n=(0,tj.q5)();(0,a.d4)(e=>n?.team||null);let r=(0,iT.x)(),s=(0,iT.QZ)(),o=(0,iT.V2)(),l=e.dropdownShown.type,d=(0,ik.v)();if(l===eM.K9){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rY,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!1})}if(l===eM.wi){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rY,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isSelectLayerMenu:!0,isObjectsPanelMenu:!1})}if(l===eM.ku){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rY,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}if(l===eM.t4){let{clientX:n,clientY:a,axis:l,rulerGuideContextMenuType:d}=e.dropdownShown.data;return(0,i.jsx)(rY,{axis:l,clientX:n,clientY:a,isObjectsPanelMenu:!1,isRulerGuideMenu:!0,isTextEditModeMenu:!1,rulerGuideContextMenuType:d,selectedView:e.selectedView,userCanEditFile:t,userCanRunExtensions:o,userCanViewPlugins:r,userCanViewWidgets:s})}if(l===eM.Rb){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rY,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!0})}if(l===eM.W_){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rK,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!0,ariaLabelledBy:e.ariaLabelledBy})}if(l===eM.LO)return(0,i.jsx)(ap,{});else if(l===eM.SA){let{clientX:t,clientY:n,pageId:r}=e.dropdownShown.data;return(0,i.jsx)(r6,{pageId:r,clientX:t,clientY:n,selectedView:e.selectedView})}else if(l===eM.bx){let{clientX:t,clientY:n}=e.dropdownShown.data;return(0,i.jsx)(r3,{clientX:t,clientY:n,selectedView:e.selectedView})}else if(l===eM.d2){let{clientX:t,clientY:n,pageIds:r,shouldShowDuplicateOption:a}=e.dropdownShown.data;return(0,i.jsx)(al.W,{pageIds:r,clientX:t,clientY:n,selectedView:e.selectedView,shouldShowDuplicateOption:a})}else if(l===eM.Z7){let{thread:t,pinClientRect:n}=e.dropdownShown.data;return(0,i.jsx)(iz,{selectedView:e.selectedView,thread:t,pinClientRect:n,copyLink:d})}else if(l===eM.DT){let{attachment:t,clientX:n,clientY:r}=e.dropdownShown.data;return(0,i.jsx)(iE,{attachment:t,selectedView:e.selectedView,clientX:n,clientY:r})}else if(l===eM.i){let{clientX:n,clientY:a,stringToCopy:l,expandElement:d,guid:c}=e.dropdownShown.data;return(0,i.jsx)(rQ,{clientX:n,clientY:a,expandElement:d,guid:c,isObjectsPanelMenu:!0,selectedView:e.selectedView,stringToCopy:l,userCanEditFile:t,userCanRunExtensions:o,userCanViewPlugins:r,userCanViewWidgets:s})}else if(l===eM.Sl){let{clientX:n,clientY:a,onCopyText:l}=e.dropdownShown.data;return(0,i.jsx)(r$,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!0,onCopyText:l})}else if(l===eM.WJ){let{targetInViewport:n,nodeId:a}=e.dropdownShown.data;return(0,i.jsx)(av,{targetInViewport:n,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!0,nodeId:a})}else if(l===eM.AM){let{targetInViewport:t}=e.dropdownShown.data;return(0,i.jsx)(aa,{targetInViewport:t,selectedView:e.selectedView})}else if(l===eM.XX){let{targetInViewport:n,annotationsCount:a}=e.dropdownShown.data;return(0,i.jsx)(iL,{targetInViewport:n,annotationsCount:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!0})}else if(l===eM.si){let{sectionId:n,initialShelfId:a,initialTemplateId:l,sectionName:d,showAlertOnSelect:c}=e.dropdownShown.data;return(0,i.jsx)(a4,{initialShelfId:a,initialTemplateId:l,isObjectsPanelMenu:!0,sectionId:n,sectionName:d,selectedView:e.selectedView,showAlertOnSelect:c,userCanEditFile:t,userCanRunExtensions:o,userCanViewPlugins:r,userCanViewWidgets:s})}else if(l===eM.U3){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rZ,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!1,carouselType:rJ.SINGLE_SLIDE_VIEW})}else if(l===eM.kX){let{clientX:t,clientY:n,targetItem:r,paint:a,onPaintChange:s}=e.dropdownShown.data;return(0,i.jsx)(aA,{clientX:t,clientY:n,selectedView:e.selectedView,targetItem:r,paint:a,onPaintChange:s})}else if(l===eM.OI){let{boundingRect:t,targetObjectAnimation:n}=e.dropdownShown.data;return(0,i.jsx)(aN.E,{boundingRect:t,selectedView:e.selectedView,targetObjectAnimation:n})}else if(l===eM.J7){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(aE,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}else if(l===eM.V6){let{clientX:t,clientY:n,deleteCollection:r,collectionId:a}=e.dropdownShown.data;return(0,i.jsx)(i_,{clientX:t,clientY:n,deleteCollection:r,selectedView:e.selectedView,collectionId:a})}else if(l===eM.Zn){let{clientX:t,clientY:n,deleteField:r,duplicateField:a}=e.dropdownShown.data;return(0,i.jsx)(iy,{clientX:t,clientY:n,deleteField:r,duplicateField:a,selectedView:e.selectedView})}else if(l===eM.s9){let{clientX:t,clientY:n,deleteItemOrItems:r}=e.dropdownShown.data;return(0,i.jsx)(ib,{clientX:t,clientY:n,deleteItemOrItems:r,selectedView:e.selectedView})}else if(l===eM.jQ){let{clientX:t,clientY:n,deleteItem:r,renameItem:a,isLayerLike:s,isInteraction:o,selectOnCanvas:l}=e.dropdownShown.data;return(0,i.jsx)(ak,{clientX:t,clientY:n,isLayerLike:s,isInteraction:o,deleteItem:r,renameItem:a,selectOnCanvas:l,selectedView:e.selectedView})}else if(l===eM.Vx){let{clientX:n,clientY:a}=e.dropdownShown.data;return(0,i.jsx)(rZ,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanViewPlugins:r,userCanViewWidgets:s,userCanRunExtensions:o,isObjectsPanelMenu:!1,carouselType:rJ.COOPER_CAROUSEL})}else if(l===eM.Vl){let{clientX:t,clientY:n,deleteStop:r,redistributeStops:a}=e.dropdownShown.data;return(0,i.jsx)(r7,{clientX:t,clientY:n,deleteStop:r,redistributeStops:a,selectedView:e.selectedView})}return null}var a6=n(869456),a7=n(45169),a9=n(443389),a8=n(943866),se=n(289555),st=n(811804),sn=n(323747),si=n(971340);function sr({background:e,showSpinner:t}){let n=r.useContext(z.kw),{x:a,y:s,width:o}=n.getViewportInfo(),l={background:e},d=window.innerWidth-o;n&&(l={...l,width:`calc(100vw - ${d}px)`,height:`calc(100vh - ${s}px)`,top:`${s}px`,left:`${a}px`});let u=!1;return(0,c.kc)().css_backed_loading_spinner?u=!0:y.Ay.isMobileApp||y.Ay.isMobileBrowser||(t=!1),(0,i.jsxs)("div",{className:"loading_overlay--pageSyncing--UrwP1",children:[(0,i.jsx)("div",{className:tz()("loading_overlay--blurredOverlay--qrd2W",eM.Dm),style:l}),t&&u?(0,i.jsx)("div",{className:"loading_overlay--pageSyncingFadeIn--77LLv",children:(0,i.jsx)(si.$y,{size:"large"})}):t&&(0,i.jsx)(si.dW,{className:"loading_overlay--pageSyncingSpinner--wgeHV"})]})}function sa(){let e=(0,iS.U)(),t=(0,a.d4)(e=>e.selectedView),n=a.d4(e=>e.versionHistory)?.isLoadingPage,s=(0,st.DP)(),{isLoading:l}=(0,sn.v9)({selectedView:t,isLoadingVersionHistory:n,theme:s}),d=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState),u=(0,se.yZ)(),m=(0,a.d4)(e=>e.mirror.appModel.currentPage),p=(0,a.wA)(),[h,f]=r.useState(null),g=(0,a8.ZC)(l),x=(0,r.useCallback)(t=>{e("page_loading_overlay",{timeElapsedMs:t,pageNodeId:m},{forwardToDatadog:!0})},[e,m]);return r.useEffect(()=>{if((0,c.kc)().long_page_change_notif){if(!o.h3O)throw Error("Multiplayer bindings not available");if(o.h3O.isIncrementalSession()&&l)l!==g&&u&&d!==o.kul.JOINED&&(f(Date.now()),p(v.F.enqueue({message:"Page change may take longer during staging deploy",error:!1,delay:3e3,type:"long-page-change",timeoutOverride:1/0})));else{let e=h?Date.now()-h:0;e<3e3||e>9e3?(p(v.F.dequeue({matchType:"long-page-change"})),f(null)):setTimeout(()=>{p(v.F.dequeue({matchType:"long-page-change"})),f(null)},Math.max(0,9e3-e))}}},[l,d,u,p,h,g]),(0,i.jsx)(ss,{onPageLoadingFinish:x,selectedView:t,isLoadingVersionHistory:n,theme:s})}function ss({onPageLoadingFinish:e,selectedView:t,isLoadingVersionHistory:n,theme:a}){let{isLoading:s,isLoadingMissingFonts:o,background:l}=(0,sn.v9)({selectedView:t,isLoadingVersionHistory:n,theme:a});return((0,r.useEffect)(()=>{!s&&a9.sn.get("page_loading_overlay")&&requestAnimationFrame(()=>{let t=a9.sn.tryStop("page_loading_overlay");t&&e&&e(t)})},[s,e]),s)?(a9.sn.get("page_loading_overlay")||a9.sn.start("page_loading_overlay"),(0,i.jsx)(sr,{background:l,showSpinner:!o})):null}var so=n(836848),sl=n(74372),sd=n(197256),sc=n(270307),su=n(575015),sm=n(844268),sp=n(770785),sh=n(627144),sf=n(103392),sg=n(874606),sx=n(643444),s_=n(231305),sy=n(522178),sb=n(862750),sv=n(743634),sC=n(217213),sE=n(579891),sw=n(98011),sk=n(642473),sT=n(626310),sj=n(604466),sS=n(170334),sI=n(923581),sA=n(257367),sN=n(152787),sM=n(809029),sR=n(176346),sP=n(864727),sO=n(466254),sD=n(659286);let sL=e=>(0,i8.Zj)(e)&&!e.hideCheckForQuickCommand;class sF extends eT.o6{constructor(e){super(e),this.searchInputRef=r.createRef(),this.scrollContainerRef=r.createRef(),this.listboxId=(0,sl.g)(),this.resultPrefix=(0,sl.g)(),this.delayedCloseTimerID=0,this.updateQueryAndResults=e=>{let t;if(e){let n=this.searchIndex.search(this.props.appModel,e.trim());t=this.sortedByEnabledSearchResults(n)}else t=this.recentlyUsedItemsMenu();this.logSearchResults(e,t),this.setState({searchQuery:e,searchResults:t,activeItemIndex:0,mouseMoved:!1})},this.logSearchResults=(e,t)=>{this.props.quickActionsSessionId&&this.props.fireQueryResultTrackingEvent({quickActionsSessionId:this.props.quickActionsSessionId,quickActionsQueryId:this.props.latestQuerySessionIdRef.current,searchQuery:e,numSearchResults:this.state.searchResults.length,currentSelection:this.props.currentSelection,module:e7.Jc.ALL,moduleFilters:null,qaVersion:sw.U3,searchQueryResults:(0,sk.X)(t)})},this.cancelDelayedClose=()=>{0!==this.delayedCloseTimerID&&(clearTimeout(this.delayedCloseTimerID),this.delayedCloseTimerID=0)},this.onClick=eT.cZ(this,"click",e=>{e?.button!==0||this.state.searchResults.length>0||this.setState({searchResults:this.searchIndex.list(this.props.appModel)})}),this.onKeyDown=eT.C0(this,"keydown",e=>{let t=e=>{if(this.state.searchResults.length>0){let t=this.state.activeItemIndex+e,n=t<0?this.state.searchResults.length-1:t%this.state.searchResults.length,i=1!==this.state.searchResults.length||!this.state.displayAriaActiveDescendant;this.setState({activeItemIndex:n,displayAriaActiveDescendant:i}),this.scrollContainerRef.current.scrollElementAtIndexIntoView(n)}},n=(0,r9.vN)(e,r9.xH.CONTROL),i=y.Ay.mac?(0,r9.vN)(e,r9.xH.META):n,r=y.Ay.mac&&n;switch(e.keyCode){case r9.Uz.ENTER:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&ew.l7.user(`quick-actions-select-${t.name??t.action??"unknown"}`,()=>{this.onSelectItem(t)});break}case r9.Uz.ESCAPE:e.preventDefault(),this.cancelDelayedClose(),this.props.dispatch(r8.oB());break;case r9.Uz.N:case r9.Uz.DOWN_ARROW:if(e.keyCode===r9.Uz.N&&!r){(0,eI.jr)(e,eI.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(1);break;case r9.Uz.P:case r9.Uz.UP_ARROW:if(e.keyCode===r9.Uz.P&&!r){(0,eI.jr)(e,eI.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(-1);break;case r9.Uz.TAB:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&t.itemParameterArgs&&(this.onStartParameterMode(t.itemParameterArgs,t,"tab"),this.logActionSelectedEvent(t));break}case r9.Uz.R:case r9.Uz.S:case r9.Uz.D:case r9.Uz.E:case r9.Uz.F:case r9.Uz.O:if(i){e.preventDefault();let t=this.state.searchQuery+e.key;this.updateQueryAndResults(t)}break;default:"Meta"!==e.key&&"Ctrl"!==e.key&&this.cancelDelayedClose(),(0,eI.jr)(e,eI.W0.NO)}}),this.onSearchChange=eT.Z7(this,"change",e=>{let t=e.currentTarget.value;this.updateQueryAndResults(t)}),this.onSelectItem=(e,t)=>{if(e.disabled)this.cancelDelayedClose();else{let n=!1;if(e.itemParameterArgs){if(e.runPluginArgs&&!this.state.searchQuery)s_.R0.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs}),n=!0;else if(e.parametersRequired){this.onStartParameterMode(e.itemParameterArgs,e,t?.type==="click"?"click":"enter"),this.logActionSelectedEvent(e);return}}if(e.callback&&!n&&(e.callback((0,i8.Dz)(e),e.args,this.props.dispatch),n=!0),e.action&&(sx.VU.get(e.action,"quick-actions",e.args)(t),n=!0),n&&this.addToRecentlyUsedCommands(e,e.runPluginArgs),this.logActionSelectedEvent(e),"toggle-publish"===e.action&&(0,t1.YQ)({id:"insert-component-onboarding-event"}),sL(e)&&!(0,su.PN)()){this.cancelDelayedClose(),this.delayedCloseTimerID=setTimeout(()=>{this.props.dispatch(r8.oB())},300);return}this.props.dispatch(r8.oB())}},this.renderResult=(e,t)=>{let n=t===this.state.activeItemIndex;return(0,i.jsx)(sV,{actionIcon:this.getActionIcon(e),active:n,allSavedPlugins:this.props.pluginAndWidgetMenuArgs.allSavedPlugins,appModel:this.props.appModel,disabled:!!e.disabled,id:this.getResultId(t),isLastItem:t===this.state.searchResults.length-1,item:e,onClick:t=>this.onSelectItem(e,t),onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:t})},onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:t})},publishedPlugins:this.props.pluginAndWidgetMenuArgs.publishedPlugins,recordingKey:eT.Pt(this.props,e.action||"searchResult"),role:"option",searchQuery:this.state.searchQuery},e.action||t)},this.searchIndex=this.createSearchIndex(),this.state={searchQuery:"",searchResults:this.recentlyUsedItemsMenu(),activeItemIndex:0,displayAriaActiveDescendant:!0,mouseMoved:!1}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),(0,sc.c2)(this.props.pluginAndWidgetMenuArgs,e.pluginAndWidgetMenuArgs)||(this.searchIndex=this.createSearchIndex())}createSearchIndex(){let e=(0,sh.M)({extensionMenuProps:this.props.pluginAndWidgetMenuArgs,isReadOnly:this.props.appModel.isReadOnly,includeDisabled:!0});return new sC.xm(this.props.appModel,this.props.selectedView,[...this.props.fullscreenMenuItems,...e],{includeDisabled:!0,acceptsUnicode:!0})}componentDidMount(){super.componentDidMount(),this.searchInputRef.current.focus()}logActionSelectedEvent(e){let{createMetrics:t}=this.props.interactionMetrics;(0,sA.kp)({item:e,searchQuery:this.state.searchQuery,qaVersion:sw.U3,numSearchResults:this.state.searchResults.length,searchPosition:this.state.activeItemIndex,moduleFilters:null,...t()})}recentlyUsedItemsMenu(){return(0,iG.WI)(this.props.recentlyUsedQuickCommands.map(e=>{let t=this.searchIndex.getItem(this.props.appModel,e.displayName);return t&&e.runPluginArgs&&(t.runPluginArgs=e.runPluginArgs),t}))}sortedByEnabledSearchResults(e){let t=e.filter(e=>!e.disabled),n=e.filter(e=>e.disabled);return t.concat(n)}addToRecentlyUsedCommands(e,t){let n=(0,sI.EG)(e),i=this.props.recentlyUsedQuickCommands.filter(e=>e.displayName!==n&&!!this.searchIndex.getItem(this.props.appModel,e.displayName));i.length>=3&&i.pop(),i.unshift({displayName:n,runPluginArgs:t}),this.props.dispatch(tE.PQ(i)),this.props.updateFrecencyHistory(e,this.state.searchQuery),(0,sj.s)({displayText:n,runPluginArgs:t,localFileIdOrPluginId:e.pluginLocalFileId??e.pluginId})}getActionIcon(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=(0,ry.DM)({idToSearch:e.pluginId,localExtensionsByFileId:void 0,publishedExtensions:{...this.props.pluginAndWidgetMenuArgs.publishedPlugins,...this.props.pluginAndWidgetMenuArgs.publishedWidgets}})),t&&!(0,rE.ZQ)(t))?(0,i.jsx)(sb.V,{className:sM.ZR,plugin:t,role:"presentation"}):(0,i.jsx)(eN.B,{className:sM.pB,svg:sO.A,ariaLabel:`${e.name} icon`})}if(e.iconType&&"external_link"===e.iconType)return(0,i.jsx)(eN.B,{svg:sP.A})}onStartParameterMode(e,t,n){this.addToRecentlyUsedCommands(t),this.props.onStartParameterEntry(e,t,n)}getResultId(e){return this.resultPrefix+"-"+e}renderResults(){let e=this.state.searchResults;if(this.state.searchQuery){if(0===this.state.searchResults.length)return(0,i.jsx)("div",{className:sM.Tk,children:(0,d.tx)("fullscreen_actions.no_matches")})}else if(0===this.state.searchResults.length)return null;return(0,i.jsx)(sN.h,{id:this.listboxId,ref:this.scrollContainerRef,resultCount:e.length,role:"listbox",children:e.map(this.renderResult)})}render(){let e=this.state.searchQuery||this.state.searchResults.length;return(0,i.jsxs)(sN.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,"data-testid":"quick-actions",children:[(0,i.jsxs)("div",{className:sM.$P,children:[(0,i.jsx)(eN.B,{svg:sD.A,className:sM.qc}),(0,i.jsx)("input",{ref:this.searchInputRef,"aria-activedescendant":e&&(this.state.displayAriaActiveDescendant||this.state.searchResults.length>1)?this.getResultId(this.state.activeItemIndex):void 0,"aria-autocomplete":"list","aria-controls":this.listboxId,"aria-expanded":e?"true":"false","aria-owns":this.listboxId,className:sM.Rt,dir:"auto",maxLength:150,onChange:this.onSearchChange,onClick:this.onClick,placeholder:(0,rt.A)("quick-actions-modal-placeholder"),role:"combobox",spellCheck:!1,value:this.state.searchQuery})]}),this.renderResults()]})}}function sB(e){return(0,i.jsx)(_.u9,{label:"QuickActions",children:(0,i.jsx)(sU,{...e})})}function sU(e){let t=(0,sg.c4)(),n=(0,sf.F)(),r=(0,sA.Sk)(),{addFrecencyUsage:s}=(0,sv.fJ)(),o=(0,a.d4)(sy.l),l=(0,nm.Ev)(),d=(0,m.md)(e9.dd),c=(0,m.md)(e9.Rt),u=(0,sm.F)(c),p=(0,a.wA)(),h=(0,sE.wo)(),f=(0,a.d4)(e=>e.mirror.appModel),g=(0,a.d4)(e=>e.selectedView),x=(0,a.d4)(e=>e.user?.locale);return(0,i.jsx)(sF,{...e,appModel:f,currentSelection:o,dispatch:p,fireQueryResultTrackingEvent:l,fullscreenMenuItems:n,interactionMetrics:r,latestQuerySessionIdRef:u,locale:x,pluginAndWidgetMenuArgs:t,quickActionsSessionId:d,recentlyUsedQuickCommands:h,selectedView:g,updateFrecencyHistory:s})}function sV(e){let t=(0,H.J2)((0,U.UK)().showQuickCommandRankDebug);return(0,i.jsx)(sH,{...e,showQuickCommandRankDebug:t})}sF.displayName="QuickActions";class sH extends eT.o6{constructor(e){super(e),this.onClick=eT.cZ(this,"click",e=>{if(!this.props.onClick)return eT.aH;this.props.onClick(e)}),this.getDisplayText=()=>{let e=this.props.item;if(e.itemParameterArgs&&e.runPluginArgs&&!this.props.searchQuery)return(0,i.jsx)(sS._,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs});if(e.itemPath){let t=e.itemPath;return(0,i.jsx)(sS.h,{itemPath:t})}let t=(0,sI.EG)(e);return this.props.showQuickCommandRankDebug&&void 0!==e.stringMatchScore&&void 0!==e.popularityScore&&(t=`M${e.stringMatchScore} P${e.popularityScore}: `+t),(0,i.jsx)("div",{className:sM.D6,children:t})},sL(this.props.item)?this.state={itemIsChecked:(0,i8.WJ)(this.props.appModel,this.props.item)}:this.state={}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),null!=this.state.itemIsChecked&&this.setState({itemIsChecked:(0,i8.WJ)(this.props.appModel,this.props.item)})}render(){let e=this.props.item,t=this.getDisplayText(),n=(0,i8.Dz)(e),r=e.shortcutText||(0,te.c1)(this.props.appModel.keyboardShortcuts,n),a=void 0!==this.props.item.runPluginArgs,s=e.menuActionType&&"run-local-plugin"===e.menuActionType&&(!e.runPluginArgs||this.props.searchQuery),o="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,l=null;void 0!==this.state.itemIsChecked?l=(0,i.jsx)(sT.S,{checked:this.state.itemIsChecked,disabled:this.props.disabled}):this.props.actionIcon&&(l=this.props.actionIcon);let u=`${this.props.active?sM.ix:sM.Ke} ${this.props.disabled?sM.wn:""}`;return(0,i.jsxs)("div",{className:u,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onClick:this.onClick,id:this.props.id,role:this.props.role,"aria-disabled":this.props.disabled||void 0,"aria-checked":this.props.item.checked,children:[(0,i.jsx)("div",{className:sM.EA,children:l}),(0,i.jsxs)("div",{className:sM.V4,children:[t,s&&(0,i.jsx)("div",{className:sM.Vu,children:(0,d.tx)("fullscreen_actions.development")})]}),r&&!o&&(0,i.jsx)("div",{className:sM.LE,children:(0,i.jsx)(tG.S,{shortcut:r})}),!r&&o&&(0,i.jsxs)("div",{className:sM.LE,children:[(0,i.jsx)("div",{className:sM.Hq,children:(0,d.tx)("fullscreen_actions.tab")}),a&&(0,i.jsx)("div",{className:sM.w8,children:(0,d.tx)("fullscreen_actions.to_edit")}),(0,i.jsx)(eN.B,{svg:sR.A})]}),!r&&e.isRepairCommand&&(0,c.kc)().internal_only_debug_tools&&(0,i.jsx)("div",{style:sp.sx.colorBgTertiary.p8.bRadius8.borderBox.flex.itemsCenter.justifyCenter.mr8.h16.add({fontSize:"8px"}).$,children:"REPAIR"})]})}}function sz(e){return(0,i.jsx)(_.u9,{label:"QuickActionsOuter",children:(0,i.jsx)(sG,{...e})})}function sG({parameterEntryArgs:e,fireTrackingEvent:t}){let[n,a]=r.useState(),[s,o]=r.useState(!0),l=(0,m.Xr)(e9.dd);if(r.useEffect(()=>{if(s){o(!1);let n=(0,sl.g)();l(n),t(n),e&&a({args:e})}},[e,s,t,l]),!n)return(0,i.jsx)(sB,{recordingKey:"quickActions",onStartParameterEntry:(e,t,n)=>{let i;switch(n){case"tab":i="quick-actions-tab";break;case"enter":i="quick-actions-enter";break;case"click":i="quick-actions-click";break;default:(0,so.xb)(n)}a({args:{...e,triggeredFrom:i},item:t})}});{let{args:e,item:t}=n,r=t?(0,sI.EG)(t):void 0;return(0,i.jsx)(sd.ry,{command:e.command,displayName:e.displayName,initialParameterValues:t?.runPluginArgs?.parameterValues,onExitParameterEntry:()=>{a(void 0)},parameterOnly:e.parameterOnly,parameters:e.parameters,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,recentlyUsedCommandName:r,recordingKey:"parameterEntry",triggeredFrom:e.triggeredFrom})}}sH.displayName="QuickActionsResult";var sK=n(943436),sW=n(888830),sq=n(207474),sX=n(147244),sY=n(996066),sJ=n(26377),sZ=n(749233),sQ=n(832269),s$=n(9275);function s0({inheritStyleKeyField:e,initialStyleCreationPaint:t,recordingKey:n,onSubmit:s,shouldUseEyedropperStyleCreationFlow:o}){let l=(0,a.d4)(e=>e.mirror.selectedStyleProperties),c=(0,a.d4)(e=>e.mirror.sceneGraphSelection),u=r.useRef(Object.keys(c).length>0),m=(0,sX.sg)(e),{styleRef:p,createStyle:h}=(0,sQ.u)({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:u.current,trackingOptions:{styleType:m},shouldUseEyedropperStyleCreationFlow:o}),f=eT.of(n,"submit",()=>{h(),s(p)});return l.styleType?(0,i.jsxs)(sY.zK.Provider,{value:sY.zM.CREATE_VARIABLE_STYLE,children:[(0,i.jsx)(s$.O8,{type:l.styleType,recordingKey:n,isInspectPanel:!1,selectedStyleProperties:l,showProperties:!0,onEnterPressed:f}),(0,i.jsx)(tv.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16,children:(0,i.jsx)(tJ.$n,{onClick:f,disabled:!p,variant:"primary",children:(0,d.tx)("design_systems.create_style.create_style")})})]}):null}var s1=n(214514),s2=n(12728),s5=n(822889);let s4="reconnecting_modal--reconnectingModal--9tIgq";function s3({clientType:e}){let t=(0,iS.U)(),n=!(0,c.kc)().reconnecting_modal_disable_spinner;return(0,r.useEffect)(()=>{let n=Date.now();return()=>{let i=Date.now()-n;t("reconnecting_modal_shown",{msElapsed:i,clientType:e},{forwardToDatadog:!0}),i>1e3&&(0,s5.B3)(e)}},[e,t]),(0,i.jsx)("div",{className:`${s4} reconnecting_modal--reconnectingModalAnimate--Wrxef`,children:(0,i.jsx)(ae.J,{mode:"dark",children:(0,i.jsxs)(s2.bL,{children:[n&&(0,i.jsx)(tb.k,{}),(0,i.jsx)(s2.QB,{children:(0,d.tx)("reconnecting_modal.loading")})]})})})}function s6(){let e=(0,iS.U)(),t=!(0,c.kc)().reconnecting_modal_disable_spinner;return e("waiting_for_sync_modal_shown"),(0,i.jsx)("div",{className:`${s4}`,children:(0,i.jsx)(ae.J,{mode:"dark",children:(0,i.jsxs)(s2.bL,{children:[t&&(0,i.jsx)(tb.k,{}),(0,i.jsx)(s2.QB,{children:(0,d.tx)("waiting_for_sync_modal.saving")})]})})})}var s7=n(101679);let s9=n(492567).Cc,s8=new(n(119301)).b({name:"react_scenegraph",dependencies:[],exports:{"./lazy_root":"./lazy_root.tsx","./jsx_panel":"./jsx_panel.tsx","./chart/import_data_modal":"./chart/import_data_modal.tsx","./jsx_props":"./jsx_props.ts"},friendFiles:[],routeHints:["react_scenegraph"],eslint:{rules:{"react/jsx-no-literals":["error",{elementOverrides:{Text:{allowElement:!0},Line:{allowElement:!0},UnorderedList:{allowElement:!0},OrderedList:{allowElement:!0},Sticky:{allowElement:!0}}}]}}}).createLazyComponent(()=>Promise.all([n.e(3544),n.e(3721),n.e(6517)]).then(n.bind(n,899011)).then(e=>e.ReactScenegraphRoot),{componentName:"LazyReactScenegraphRoot",error:h.H4.NONE});var oe=n(329983),ot=n(684774),on=n(793955),oi=n(293904),or=n(846585);function oa(e){return{selectedView:e.selectedView,user:e.user,currentUserOrgId:e.currentUserOrgId,comments:e.comments,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,multiplayerEmoji:e.multiplayerEmoji,eyedropper:e.eyedropper,needsUpgrade:e.needsUpgrade,progressBarState:e.progressBarState,showingReconnectingModal:e.showingReconnectingModal,showingOpenDesktopAppModal:e.showingOpenDesktopAppModal,openFile:e.openFile,pagesList:e.mirror.appModel.pagesList,timerModalState:e.timer.modalState,timerTime:e.timer.time,universalInsertModal:e.universalInsertModal,isCommentsToolSelected:e.mirror.appModel.currentTool===l.NLJ.COMMENTS,loadingBackgroundColor:e.desktopNewTab.loadingBackgroundColor,isReadOnly:e.mirror.appModel.isReadOnly,currentPage:e.mirror.appModel.currentPage,hyperlinkLocation:e.mirror.appModel.hyperlinkLocation,onCanvasNameEditorInfo:e.mirror.appModel.onCanvasNameEditorInfo,topLevelMode:e.mirror.appModel.topLevelMode,showUi:e.mirror.appModel.showUi,showToolbar:!0,showKeyboardShortcuts:e.mirror.appModel.showKeyboardShortcuts,loadingEmbeds:e.mirror.appModel.loadingEmbeds,fileIsLoading:e.progressBarState.mode===o.Oin.HIDE_UI||e.progressBarState.mode===o.Oin.ON_AND_LOCKED}}function os({fileKey:e}){let t=(0,a.wA)(),n=(0,a.Pj)(),i=(0,a.d4)(e=>e.isFullscreenDocumentLoaded),s=(0,ot.jz)(),l=(0,on.e_)()===on.$_.ELIGIBLE,d=(0,e2.Fk)(e=>e.getCurrentPage()?.guid);return r.useLayoutEffect(()=>{if(!i||!l)return;let r=n.getState(),a=s?.find(e=>e.inProgress),c=r.mirror.appModel.votingSessionInfo,u=c.sessionId&&s?s.find(e=>e.id===c.sessionId):null;if(a){if(a.id!==c.sessionId){t(S.au({}));let n=(0,e1.VP)(r.loadingState,S.$c(e))||r.voting.lastInitiatedVotingSessionId===a.id;t(S.H1({votingStage:n?o.W8Y.JOINED:o.W8Y.NOT_JOINED}))}}else c.sessionId&&!u?t(S.H1({votingStage:o.W8Y.NO_SESSION})):!a&&c.sessionId&&c.votingStage!==o.W8Y.ENDED&&(t((u?.pageNodeId&&(0,g.oA)(u.pageNodeId))===d?S.H1({sessionId:c.sessionId,votingStage:o.W8Y.ENDED}):S.H1({votingStage:o.W8Y.NO_SESSION})),t(S.D6("")))},[e,t,s,i,l,n,d]),null}function oo(){let e=(0,a.d4)(e=>e.isFullscreenDocumentLoaded),t=r.useRef(!1);return r.useEffect(()=>{e&&!t.current&&((0,x.Z1)(),t.current=!0)},[e,t]),null}let ol={VariableAndStyleCreateModalRoot:function({initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:r,initialView:s,resolvedType:l,onCreateVariable:c,onCreateStyle:u,onClose:m,disableStyleModal:p,shouldUseEyedropperStyleCreationFlow:h}){let f="createVariableAndStyleModal";(0,sZ.NF)({resolvedType:l});let{onCreateVariableSubmit:g,onCreateStyleSubmit:x}=function({onCreateVariable:e,onCreateStyle:t,onClose:n}){let{onCreateVariableSubmit:i}=(0,sJ.useVariableCreateModalActions)({onCreateVariable:e,onClose:n}),r=(0,tj._G)(),s=(0,a.d4)(e=>e.mirror.sceneGraph);return{onCreateVariableSubmit:i,onCreateStyleSubmit:function(e){let i=function(e){let t=o.Pt4.getStyleNodeId(e.key,e.version),n=s.get(t);return n?{type:nA.PW.STYLE,name:n.name,library_key:r??(0,iq.l)(""),key:n.styleKeyForPublish,thumbnail_url:"",canvas_url:"",content_hash:n.styleVersionHash??void 0,userFacingVersion:(0,sq.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!0,style_type:n.styleType}:null}(e);i&&(t(i),n())}}}({onCreateVariable:c,onCreateStyle:u,onClose:m}),[_,y,b]=sW.t.useTabs({createStyle:!p,createVariable:!0},{recordingKey:eT.Pt(f,"viewTabs"),defaultActive:()=>s&&["createVariable","createStyle"].includes(s)?s:"createVariable"});return(0,i.jsx)(tm.bL,{onClose:m,defaultPosition:e,width:nE.i,recordingKey:"createStyleWindow",children:(0,i.jsxs)(tp.vo,{children:[(0,i.jsxs)(tp.Y9,{children:[(0,i.jsx)(tp.r1,{children:(0,d.tx)("design_systems.create_style.title")}),(0,i.jsxs)(sW.t.TabStrip,{manager:b,children:[(0,i.jsx)(sW.t.Tab,{..._.createStyle,children:(0,d.tx)("design_systems.create_style.style")}),(0,i.jsx)(sW.t.Tab,{..._.createVariable,children:(0,d.tx)("variables.create_modal.title")})]})]}),(0,i.jsxs)(tp.nB,{padding:0,children:[(0,i.jsx)(sW.t.TabPanel,{...y.createStyle,children:(0,i.jsx)(s0,{inheritStyleKeyField:n,initialStyleCreationPaint:r,recordingKey:"createStyleModal",onSubmit:x,shouldUseEyedropperStyleCreationFlow:h??!1})}),(0,i.jsx)(sW.t.TabPanel,{...y.createVariable,children:(0,i.jsx)(sJ.CreateVariableForm,{resolvedType:l,initialValue:t,recordingKey:eT.Pt(f,"createVariableForm"),onSubmit:g})})]})]})})},VariableAndComponentPropCreateModalRoot:sK.NO};function od(e){return(0,i.jsx)(p.k,{id:"FullscreenViewInnerWrapper",children:(0,i.jsx)(_.u9,{label:"FullscreenViewInnerWrapper",children:(0,i.jsx)(oc,{...e})})})}function oc({children:e}){let t=(0,u.R)(oa),n=(0,a.wA)(),l=(0,e$.TA)(),p=t.openFile?t.openFile.key:null,x=(0,en.px)().unwrapOr(null),_=(0,H.ut)(o.Ez5?.uiState().shouldShowAutoLayoutHintsIfExist,!1),S=(0,H.ut)(o.Ez5?.uiState().autoLayoutShortcutHints,new Map),A=(0,f.bc)((0,e0.Jpz)({key:p??""}),{enabled:!!p}),N=!1;if(A&&"loaded"===A.status&&t.openFile){let e=A.data.file;if(e&&l){let n=e.linkAccess,i=(0,g.oA)(e.team?.isStarterTeam,!1),r=(0,g.oA)(e.team?.isStudentTeam,!1),a=!!e.roles.find(e=>e.userId===l);N=(0,c.kc)().starter_file_no_auto_grant_role?t.openFile.canEdit&&n===et.PQ.EDIT&&i&&!r&&!x:t.openFile.canEdit&&n===et.PQ.EDIT&&i&&!r&&!a}}(0,C.fk)(p);let M=(0,w.l7)(),R=(0,k.e)(),P=(0,E.RT)(),O=(0,ih.bE)(),D=(0,oe.Oc)(),[L]=(0,m.fp)(eQ.vE),F=(0,m.Xr)(nZ),B=!t.showUi&&(0,te.TY)(t.dropdownShown),U=t.dropdownShown?.type===te.jv,V=U?t.dropdownShown?.data?.parameterEntryArgs:void 0,z=t.dropdownShown?.data?.fireQuickActionsTrackingEvent||s.lQ,G=!(0,s7.ty)(),K=(0,r.useCallback)(e=>{n((0,j.r)({dataTransfer:e.dataTransfer,clientX:e.clientX,clientY:e.clientY}))},[n]),W=(0,r.useCallback)(e=>{eS.Y5.reparentRootElement(e),e&&e.addEventListener("drop",K)},[K]),q=L&&L.status===eQ.QY.WAITING,X=!q&&t.showingReconnectingModal;return(0,i.jsxs)(i.Fragment,{children:[(0,c.kc)().ee_color_management_debug?(0,i.jsx)(eJ,{}):null,p&&(0,i.jsx)(os,{fileKey:p}),!(y.Ay.isIpad||y.Ay.isIpadNative||y.Ay.isMobileBrowser||y.Ay.isMeetDevice)&&(0,i.jsx)(oo,{}),(0,i.jsx)("div",{className:or.MY,"data-forward-events-to-fullscreen":!0,children:(0,i.jsx)(nD.l.Provider,{value:ol,children:(0,i.jsxs)(eE,{children:[!M&&!R&&!O&&!D&&!P&&(0,i.jsx)("div",{ref:W,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1)},"fullscreen-container"),(0,i.jsx)(sa,{}),(0,i.jsx)(tc.T,{}),(0,eZ.T)()&&(0,c.kc)().dt_vscode_ready_for_dev&&(0,i.jsx)(T.f,{isOnReadyForDevPage:!1}),!t.fileIsLoading&&(0,i.jsx)(ti,{}),B&&(0,i.jsx)(ix.e,{dropdown:t.dropdownShown},"fullscreen-menu"),U&&(0,i.jsx)(b.tH,{boundaryKey:"QuickActionsOuter",onError:()=>{n(v.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:b.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(sz,{parameterEntryArgs:V,fireTrackingEvent:z},"quick-actions")}),(0,i.jsx)(e8,{}),(0,c.kc)().ce_al_experiments_on&&_&&S.size>0&&(0,i.jsx)(tW,{}),e,t.hyperlinkLocation&&(0,i.jsx)(eV,{hyperlinkLocation:t.hyperlinkLocation,editorType:t.selectedView.editorType,recordingKey:"hyperlinkEditor"}),(0,i.jsx)(td.y,{}),t.progressBarState.mode!==o.Oin.OFF&&(0,i.jsx)(s1.z2,{editorType:(0,I.oD)(t.selectedView.editorType),progressBarMode:t.progressBarState.mode,progressBarType:t.progressBarState.type,left:0}),q?(0,i.jsx)(s6,{}):X&&(0,i.jsx)(s3,{clientType:"fullscreen"}),(0,i.jsx)(oi.Nd,{}),(0,i.jsx)(oi.jx,{showStartModal:N}),t.dropdownShown&&!G&&!y.Ay.isMeetDevice&&(0,i.jsx)(b.tH,{boundaryKey:"FullscreenContextMenu",onError:()=>{n(v.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:b.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,i.jsx)(a3,{dropdownShown:t.dropdownShown,selectedView:t.selectedView,ariaLabelledBy:(0,d.t)("fullscreen.fullscreen_view.context_menu.aria_label")})}),t.pickerShown?.id===eM.C9&&(0,i.jsx)(ny,{}),t.pickerShown?.id===a7.O&&(0,i.jsx)(a7.S,{recordingKey:"nudgeAmountPicker"}),t.pickerShown?.id===eM.Je&&(0,i.jsx)(tU,{}),(0,i.jsx)(ip,{})]})})}),(0,i.jsx)(s9,{}),(0,i.jsx)(ta,{}),t.showKeyboardShortcuts&&(0,i.jsx)(a6.k7,{recordingKey:"keyboardShortcutPanel"}),(0,c.kc)().react_scenegraph&&(0,i.jsx)(s8,{fallback:h.H4.NONE})]})}},293904:(e,t,n)=>{n.d(t,{jx:()=>ef,XI:()=>ey,qn:()=>ep,Nd:()=>eh,RS:()=>em,P2:()=>ex,j6:()=>e_,Ky:()=>eg});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(537303),l=n(916626),d=n(7857),c=n(960210),u=n(598066),m=n(62023),p=n(198260),h=n(319925),f=n(536378),g=n(374073),x=n(720410),_=n(772293),y=n(384203),b=n(223487),v=n(605985),C=n(854225),E=n(102462),w=n(526575),k=n(702417),T=n(190531),j=n(211846),S=n(73518),I=n(454705),A=n(798913),N=n(466082),M=n(379141),R=n(522568),P=n(723850),O=n(543595),D=n(819316),L=n(324880),F=n(862390),B=n(421914),U=n(162251),V=n(1007),H=n(406673),z=n(858707),G=n(279758),K=n(150605);function W(e){let t=(0,a.d4)(e=>e.mirror.selectionProperties.name),n=(0,a.d4)(e=>e.mirror.selectionProperties.width),r=(0,G.xv)(),o=(0,H.W)();if(!t||!n||!r)return null;let l=s.qmM?.editorTypeConfig().hasSlideRowBeenManuallyRenamed(r)??!0;return(0,i.jsx)(z.qn,{name:l?t:"",setName:n=>{t&&(A.l7.user("rename-frame",()=>F.i(r,n)),o({newTitle:n,nodeType:"FRAME"}),n!==t&&(0,H.d)(n).length>0&&(0,O.YQ)({id:"frame_node_name_changed_with_rfd_indicator",properties:{nodeId:r}}),e?.setNameCallback?.(r))},maxWidth:n,hasSlideRowBeenManuallyRenamed:l})}function q(){return(0,i.jsx)(I.J,{brand:"design",children:(0,i.jsx)(W,{setNameCallback:e=>{R.az.trackDefinedEvent("slides.rename_row",{rowId:e})}})})}function X(){return(0,i.jsx)(I.J,{brand:"cooper",children:(0,i.jsx)(W,{})})}function Y(){let[e,t]=(0,U.lJ)("prototypeStartingPoint"),n=B.E7(e)?.name||"";return n?(0,i.jsx)(z.qn,{name:n,setName:n=>{n&&t({name:n,description:B.E7(e)?.description||"",position:B.E7(e)?.position||""})},maxWidth:93,containerClassname:K.VW}):null}function J(){let{measurementId:e,initMeasurementText:t}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),o=r.useMemo(()=>s.w3z.findMeasurement(e,n),[e,n]),l=r.useRef(!o?.freeText),d=(0,D.Kv)(),c=function(){let e=(0,P.U)();return r.useCallback((t,n,i)=>{let r=t.findContainingTopLevelFrameOrSelf(),a=t.containingCanvas,s={measurement_id:n.id,from_node_id:n.fromNode,to_node_id:1===n.toNode.length?n.toNode[0].toString():n.toNode.toString(),node_type:t.type};r&&(s.tlf_id=r),a&&(s.page_id=a),s.free_text=i,e("update_annotation_measurement_free_text",s)},[e])}();return o?d?(s.glU?.hideOnCanvasNameEditor(),null):(0,i.jsx)(z.qn,{name:t,setName:e=>{let n=(0,N.UN)().get(o.fromNode);if(n){if(l&&e===t)return;A.l7.user("free-text-annotation-measurement",()=>{n.updateMeasurementFreeText(o.id,e),c(n,o,e)})}},maxWidth:150}):null}function Z(){let{varWidthNodeId:e,varWidthIndex:t}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),n=(0,P.U)(),r=(0,N.UN)().get(e);if(!r)return null;let s=r.variableWidthPoints,o=r.strokeWeight;if(s.length<=t)return null;let l=s[t],d=l.ascent*o*2;return(0,i.jsx)(z.qn,{name:(Math.round(10*d)/10).toString(),containerClassname:K.WV,setName:e=>A.nc.user("set-var-width-point-ascent",()=>{let i=parseFloat(e);if(isNaN(i))return;let a=[...s];a[t]={...l,ascent:i/(2*o)},r.variableWidthPoints=a,n("on_canvas_var_width_point_update",{node_id:r.id})})(),maxWidth:200})}function Q(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.name),t=(0,a.d4)(e=>e.mirror.selectionProperties.width),n=(0,H.W)();return null!=e&&t?(0,i.jsx)($,{name:e,setNameWithNodeId:(e,t)=>{A.l7.user("rename-section",()=>F.i(e,t?t.trim():"")),n({newTitle:t,nodeType:"SECTION"})},maxWidth:t}):null}function $(e){let{name:t,setNameWithNodeId:n,maxWidth:r}=e,o=(0,G.uQ)(),l=(0,z.R9)(t,e=>{o&&n(o,e)},{maxWidth:r}),d=(0,a.d4)(e=>{let t=e.mirror.appModel.activeCanvasEditModeType;return t===C.m1T.DESIGN_LAYOUT||t===C.m1T.SITES_LAYOUT}),{fontSize:c,top:u,left:m,height:p,horizontalPadding:h,verticalPadding:f,borderRadius:g}=function(e,t){let{fontSize:n,padding:i,margin:r,cornerRadius:o}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),l=s.qmM.editorTypeConfig().showBigSectionNamePills(),d=i.x,c=i.y,u=l?24:2*i.y+n,m=0,p=-r.y-u,h=s.qmM.editorTypeConfig().sectionNestedZoomLevel();return(!e||t<=h)&&(m=r.x,p=r.y),{fontSize:n,height:u,top:p,left:m,horizontalPadding:d,verticalPadding:c,borderRadius:o}}((0,a.d4)(e=>{if(null===o)return!1;let t=e.mirror.sceneGraph.get(o),n=e.mirror.appModel.currentPage,i=!!t?.isResponsiveSetOrWebpage;return t&&("SECTION"===t.type||i)&&t.parentGuid===n}),Math.round(100*(0,V._X)({subscribeToUpdates_expensive:!0}).zoomScale));if(!l||!o)return null;let{containerRef:x,measurerRef:_,containerStyle:y,editingName:b,onFocus:v,onChange:E,onKeyDown:w,onBlur:k,width:T,setIsComposing:j}=l,S=d?"normal":500;return(0,i.jsxs)("div",{ref:x,className:`${K.ed} ${L.Dm}`,style:y,children:[(0,i.jsx)("span",{ref:_,className:K.so,style:{fontSize:c,fontWeight:S,paddingLeft:h,paddingRight:h,paddingTop:f,paddingBottom:f},children:b}),(0,i.jsx)("input",{"aria-label":(0,M.t)("whiteboard.section_name.aria_label"),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,className:K.Zk,dir:"auto",onBlur:k,onChange:E,onCompositionEnd:()=>j(!1),onCompositionStart:()=>j(!0),onFocus:v,onKeyDown:w,spellCheck:!1,style:{width:`${T}px`,fontSize:c,fontWeight:S,left:m,top:u,height:p,borderRadius:g,paddingLeft:h,paddingRight:h,paddingTop:f,paddingBottom:f},value:b})]})}var ee=n(815491),et=n(811338),en=n(545242),ei=n(141288),er=n(338630),ea=n(303994),es=n(717096),eo=n(212001);function el(e){let t=(0,v.iZ)();return(0,i.jsx)(er.fu,{name:"Starter team edit confirmation modal",properties:{userId:t?.id,userEmail:t?.email},children:(0,i.jsx)(es.yX,{confirmationTitle:(0,M.t)("fullscreen.starter_team_edit_modal.open_this_link"),confirmText:"Continue",onConfirm:()=>{(0,R.sx)("Starter File Edit Modal Confirm Clicked",{fileKey:e.fileKey}),ea.L.createStarterTeamFileRole({key:e.fileKey})},disableClickOutsideToHide:!0,hideOnConfirm:!1,size:"small",hideCancel:!1,hideClose:!0,onCancel:()=>{(0,R.sx)("Starter File Edit Modal Cancel Clicked",{fileKey:e.fileKey}),ei.Ay.redirect("/files/recents-and-sharing")},children:(0,i.jsx)("div",{className:eo.jE,children:(0,M.tx)("fullscreen.starter_team_edit_modal.when_you_open_this_link_your_email_may_be_visible",{email:t?.email})})})})}var ed=n(865702);let ec=(0,n(747079).Ju)(function(e){return(0,i.jsxs)(es.ey,{size:"small",className:eo.yl,disableClickOutsideToHide:!0,hide:ed.lQ,children:[(0,i.jsx)("div",{className:eo.DD,children:(0,M.tx)("file_migration.updating.title")}),(0,i.jsx)("div",{className:eo.jE,children:(0,M.tx)("file_migration.updating.message")})]})},"FileMigrationWarningModal");function eu(){return(0,a.d4)(e=>e.progressBarState)}let em=(0,o.xx)((e,t,n)=>{e(h.gI()),e(p.mV({}))});function ep(){switch((0,y.p8)("onCanvasNameEditorInfo").mode){case s.nzw.FRAME_NAME:return(0,i.jsx)(W,{});case s.nzw.FLOW_STARTING_POINT_NAME:return(0,i.jsx)(Y,{});case s.nzw.SECTION_NAME:return(0,i.jsx)(Q,{});case s.nzw.MEASUREMENT_FREE_TEXT:return(0,i.jsx)(J,{});case s.nzw.RESPONSIVE_SET_NAME:return(0,i.jsx)(Q,{});case s.nzw.RESPONSIVE_NODE_SET_NAME:return(0,i.jsx)(W,{});case s.nzw.CANVAS_GRID_ROW_NAME:return(0,i.jsx)(q,{});case s.nzw.CANVAS_GRID_ROW_STATE_GROUP:return(0,i.jsx)(X,{});case s.nzw.GRID_TRACK_SIZE:return(0,i.jsx)(S.v2,{});case s.nzw.VAR_WIDTH_SIZE:return(0,i.jsx)(Z,{});default:return null}}function eh(){let e=eu(),t=(0,a.d4)(e=>e.showingOpenDesktopAppModal),n=(0,a.wA)();if(e.mode!==s.Oin.OFF)return(0,i.jsx)(i.Fragment,{});switch(t){case k.kF.FOR_OPEN:return(0,i.jsx)(et.g,{dispatch:n});case k.kF.FOR_MENU:return(0,i.jsx)(ee.s,{})}return(0,i.jsx)(i.Fragment,{})}function ef(e){let t=(0,b.q5)(),n=(0,v.iZ)();return e.showStartModal&&n&&t&&t.key?(0,i.jsx)(el,{fileKey:t.key}):(0,i.jsx)(i.Fragment,{})}function eg(){let e=(0,r.useRef)(null),t=(0,r.useRef)(!1),n=eu(),i=(0,a.wA)(),o=(0,a.d4)(e=>e.needsUpgrade),l=(0,r.useCallback)(()=>{null!==e.current&&(clearTimeout(e.current),e.current=null)},[e]),d=(0,r.useCallback)(()=>{l(),e.current=setTimeout(()=>{t.current=!0,o&&n.mode!==s.Oin.OFF&&i((0,f.to)({type:ec}))},2e4)},[o,n,i,l]),c=(0,r.useCallback)(()=>{t.current&&i(f.Ce()),t.current=!1,l()},[t,l,i]);(0,r.useEffect)(()=>(_.Y5.fromFullscreen.on("multiplayerConnect",d),_.Y5.fromFullscreen.on("multiplayerDisconnect",l),_.Y5.fromFullscreen.on("multiplayerGotSchema",c),()=>{_.Y5.fromFullscreen.removeListener("multiplayerConnect",d),_.Y5.fromFullscreen.removeListener("multiplayerDisconnect",l),_.Y5.fromFullscreen.removeListener("multiplayerGotSchema",c),l()}),[l,d,c])}function ex(e,t,n){!t.current&&function(e,t){if(t===C.NLJ.VECTOR_PENCIL||t===C.NLJ.ERASER||t===C.NLJ.HIGHLIGHTER){var n;return n="figjam",(0,w.uE)("Pointer Input",E.D.getState(),{inputSource:e.pointerType,tool:function(e){switch(e){case C.NLJ.VECTOR_PENCIL:return"VECTOR_PENCIL";case C.NLJ.ERASER:return"ERASER";case C.NLJ.HIGHLIGHTER:return"HIGHLIGHTER"}}(t),productType:n}),!0}return!1}(e,n)&&(t.current=!0)}function e_(e,t){t.current||(t.current=!0)}function ey(e){return(0,i.jsx)(l.k,{id:"MultiplayerEditorOverlays",children:(0,i.jsx)(d.u9,{label:"MultiplayerEditorOverlays",children:(0,i.jsx)(eb,{...e})})})}function eb({commentsDetailContainerRef:e}){let t=(0,y.p8)("topLevelMode")===s.lyf.HISTORY,n=(0,b.q5)(),r=(0,a.d4)(e=>e.user),o=(0,y.p8)("currentPage"),l=(0,a.d4)(e=>e.comments),d=(0,u.l7)(),p=(0,m.e)(),h=(0,T.bE)(),f=(0,x.k)(),_=(0,c.xo)(),v=l.activeThread?.id||null,C=l.showOnlyParticipating,E=l.showResolved;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(en.Ay,{}),n&&!t&&!d&&!p&&!h&&(r||f)&&!_&&(0,i.jsx)(g.$2,{showOnlyParticipatingComments:C,showResolvedComments:E,pageId:o,activeId:v,renderDetailContainerInPortal:!0,detailContainerPortal:e.current}),!_&&(0,i.jsx)(j.yL,{})]})}},705134:(e,t,n)=>{n.d(t,{v:()=>b});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(224542),l=n.n(o),d=n(687934),c=n(537136),u=n(948629),m=n(816505),p=n(157750),h=n(2286),f=n(960807),g=n(30788),x=n(293904),_=n(846585);function y(){return(0,c.co)(),null}function b({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=x.j6,isDragTarget:o=!1}){let c=(0,a.d4)(e=>e.modalShown),b=(0,u.T)(),v=(0,p.ut)(s.Ez5?.devHandoffState()?.focusMode,!1),C=(0,m.dq)(),E=r.useRef(!1);return(0,i.jsx)(g.d,{children:(0,i.jsx)(d.Y,{isDragTarget:()=>o,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)},style:{flex:"1 1 auto"},children:(0,i.jsxs)("div",{"aria-hidden":!!c,className:l()(_.lA,b&&v&&_.$J),onPointerDown:e=>{n(e,E)},children:[(0,i.jsx)(f._,{orgId:C}),e,(0,i.jsx)(h.G,{}),(0,i.jsx)(y,{})]})})})}},819215:(e,t,n)=>{n.d(t,{O:()=>p});var i=n(105652),r=n(20002),a=n(158053),s=n(945508),o=n(214175),l=n(652154),d=n(384203),c=n(345186),u=n(811996),m=n(940106);function p(){let e=(0,r.wA)(),t=(0,d.aV)(),n=(0,r.d4)(e=>e.selectedView.compareChangesVersionId),p=(0,r.d4)(e=>e.selectedView.compareChangesActivityId),h=(0,r.d4)(e=>e.selectedView?.view==="fullscreen"&&e.selectedView.compareChangesNodeId||null),f=(0,l.uQ)(),g=h??f??void 0,x=(0,a.ei)(g),_=(0,s.i)(g),{versions:y,versionsQueryLoaded:b}=(0,u.DS)(g),v=!b||0===y.length||!x,C=(0,c.P)(),E=(0,o.dU)(g??null,"cc_version_id_url");i.useEffect(()=>{(n||p)&&!t&&b&&!C&&(_&&!v?E():(0,m.L$)(void 0,e,!1,null))},[n,p,e,t,C,v,_,E,b])}},579263:(e,t,n)=>{n.d(t,{HY:()=>R,MC:()=>D,Mt:()=>L,iT:()=>F,nb:()=>P,sG:()=>O,ur:()=>M});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(270450),l=n(445019),d=n(127342),c=n(789099),u=n(865702),m=n(784395),p=n(295265),h=n(562418),f=n(772293),g=n(384203),x=n(674531),_=n(157750),y=n(330116),b=n(363105),v=n(26517),C=n(58268),E=n(665933),w=n(916446),k=n(267447),T=n(63546),j=n(551821),S=n(699589),I=n(955994),A=n(289348),N=n(431503);function M({canvasInteractions:e,views:t}){let n=(0,g.aV)(),o=(0,a.d4)(e=>e.mirror.appModel.showUi),u=t&&t.length>0,p=(0,m.B)(),h=(0,_.ut)(s.Ez5?.editorPreferences().showPropertyLabels,d.$v),x=(0,l.md)(A.me);return(r.useEffect(()=>{s.h3O&&f.Y5.isReady()&&s.h3O?.sendDesignFullPageViewState(x)},[x]),r.useEffect(()=>()=>{s.h3O&&f.Y5.isReady()&&s.h3O?.sendDesignFullPageViewState(s.zx_.NONE)},[]),o)?(0,i.jsxs)(c.bL,{width:p,isFileLoading:n,shouldShowLabels:h,children:[(0,i.jsxs)(c.Y9,{menuButton:(0,i.jsx)(j.Fr,{hideChevron:!0}),children:[e,u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.cG,{hasGapStyling:!0}),t]})]}),(0,i.jsx)(y.p,{children:(0,i.jsx)(b.A,{})}),(0,i.jsxs)(c.wi,{children:[(0,i.jsx)(T.I,{isLeftRail:!0}),(0,i.jsx)(I.n8,{isLeftRail:!0}),(0,i.jsx)(v.En,{isLeftRail:!0}),(0,i.jsx)(C.J,{isLeftRail:!0}),(0,i.jsx)(w.b,{entrypoint:k.r6.LEFT_RAIL_FOOTER,hideIfNoUpdates:!0,isLeftRail:!0}),(0,i.jsx)(S.A,{isLeftRail:!0})]})]}):null}function R(){let e=(0,h.Em)(),t=(0,E.Ye)(),n=(0,x.o3)(x.nt.designNavBar);return e&&!t&&n}function P(){let e=R(),t=(0,m.B)();return(0,r.useMemo)(()=>({leftOffset:e?t:void 0,shouldAnimate:!e&&void 0}),[e,t])}function O(){let e=R(),t=(0,m.B)();return(0,r.useMemo)(()=>({maxWidth:e?E.g_-t:void 0}),[e,t])}function D(){let e=(0,l.md)(A.FZ),t=(0,A.$J)(e),n=t?e:s.zx_.NONE,i=(0,A.b4)(n),[r,a]=(0,l.fp)(i);return t?{isViewPanelMinimized:r,setIsViewPanelMinimized:a}:{isViewPanelMinimized:!1,setIsViewPanelMinimized:u.lQ}}function L(){let e=R(),t=(0,E.cT)(),n=(0,p.xL)(),r=(0,x.o3)(x.nt.designNavBarView),a=(0,h.vn)();if(!e)return null;let s=a?N.LX.ILLUSTRATION:N.LX.DESIGN,o=(0,N.O5)(s,{isReadOnly:t,isAIAssistantEnabled:n}),l=(0,N.Fd)(s,{isReadOnly:t,isViewsEnabled:r});return(0,i.jsx)(M,{canvasInteractions:o,views:l})}function F(){let e=R(),t=(0,x.o3)(x.nt.designNavBarView);if(!e)return null;let n=!!(0,o.kc)().ai_assistant_dev_mode,r=(0,N.O5)(N.LX.DEV_MODE,{isAIAssistantEnabled:n}),a=(0,N.Fd)(N.LX.DEV_MODE,{isViewsEnabled:t});return(0,i.jsx)(M,{canvasInteractions:r,views:a})}},430169:(e,t,n)=>{n.d(t,{h5:()=>f,hZ:()=>m,hs:()=>g,mb:()=>h,sv:()=>x});var i=n(836848),r=n(776888),a=n(223487),s=n(816505),o=n(605985),l=n(665933),d=n(78063);let c=/^Page \d+$/;var u=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(u||{});function m(){let e=(0,s.sZ)(),t=!!e?.k12_google_org,n=o.iZ()?.profile?.job_title;return t&&"student"===n}function p(){let e=(0,a.q5)(),t=(0,l.cT)(),n=m();return e?n?"k12":t?"readOnly":(0,d.Qy)(e)?"personalDraft":null:"fileLoading"}var h=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(h||{});function f({nonDividerPageCount:e}){let t=p(),n=(0,r.nn)(),a=n&&!c.exec(n);if("fileLoading"===t)return null;if(e>1||a)return"viewPages";switch(t){case null:return"addPage";case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,i.xb)(t)}}function g(){return null===p()}function x(){return null===p()}},570270:(e,t,n)=>{n.d(t,{m:()=>ta});var i=n(239976),r=n(105652),a=n(20002),s=n(735786),o=n(378721),l=n(563225),d=n(379141);n(323264);var c=n(224542),u=n.n(c),m=n(7857),p=n(499735),h=n(328452),f=n(720410),g=n(715307),x=n(230964),_=n(445019),y=n(552315),b=n(154963),v=n(951633);function C(e){let{targetKey:t}=e,[n,a]=r.useState(!1),[s,o]=(0,_.fp)(y.Ui),l=(0,g.MP)()&&null!==s&&!n;(0,r.useEffect)(()=>(window.addEventListener("message",y.FR),()=>{window.removeEventListener("message",y.FR)}),[]);let c=s?(0,d.tx)("fullscreen.filename_view.zoom-integration-popup-header-with-name",{hostName:s}):(0,d.t)("fullscreen.filename_view.zoom-integration-popup-header");return(0,i.jsx)(i.Fragment,{children:l&&(0,i.jsx)(v.OA,{targetKey:t,isUI3:e.isUI3,dismissModal:()=>{a(!0),o(null)},width:268,background:"dark",title:(0,i.jsx)("div",{className:b.s.alignLeft.$,children:c}),children:(0,i.jsx)("p",{className:b.s.textBodyMedium.alignLeft.$,children:(0,d.t)("fullscreen.filename_view.zoom-integration-popup-body")})})})}var E=n(429921),w=n(692376),k=n(270450),T=n(446232),j=n(719749),S=n(39171),I=n(779267),A=n(892925),N=n(960210),M=n(760367),R=n(338630),P=n(677181),O=n(562418),D=n(535996),L=n(677451),F=n(526575),B=n(376129),U=n(352472),V=n(424888),H=n(817810),z=n(434183),G=n(941452),K=n(223487),W=n(605985),q=n(610604),X=n(832374),Y=n(31201),J=n(665180),Z=n(477916),Q=n(362844),$=n(347725),ee=n(910496),et=n(795867),en=n(286237),ei=n(151015),er=n(980271),ea=n(765996),es=n(33433),eo=n(107811),el=n(988779);function ed(e,t){e=e.filter(e=>e&&(0,eo.UN)(e,{isDesktopMenu:!1,isReadOnly:!!t.isReadOnly,isSearching:!!t.isSearching,selectedView:t.selectedView,isLimitedDevMode:t.isLimitedDevMode}));let n=[],r={header:"",items:[]};for(let t of(n.push(r),e))(0,ea.k$)(t)?(r={header:"",items:[]},n.push(r)):(0,ea.gN)(t)?r.header=t.name:r.items.push(t);return 1===n.length||n.every(e=>!e.header)?e.map(e=>ec(e,t)):n.map(e=>(0,i.jsx)(s.YJ,{title:(0,i.jsx)(s.hE,{children:e.header}),children:e.items.map(e=>ec(e,t))},e.header))}function ec(e,t){if(!e||(0,ea.k$)(e)||(0,ea.gN)(e)||(0,ea.id)(e))return null;let n=(0,ea._o)(e)&&e.disabled||!e.name&&!((0,ea._o)(e)&&(0,ee.Yh)(t.enabledActions,e.action));if(!((0,ea._o)(e)&&e.disabledAndForceVisible)&&n&&t.removeDisabledItems)return null;let r=(0,ea.Dz)(e);return(0,ea._o)(e)?(0,i.jsxs)(el.Pu,{disabled:e.disabled,onClick:()=>e.callback?.(e.action,{},t.dispatch),recordingKey:e.recordingKey||e.action||e.name,children:[((0,ea.TV)(e)||(0,ea._o)(e))&&e.displayText||(0,es.A)(r,e.args),e.rightIcon&&(0,i.jsx)(s.Ov,{children:e.rightIcon}),e.rightText&&(0,i.jsx)(s.Ov,{children:e.rightText}),e.shortcutText&&(0,i.jsx)(s.rm,{children:e.shortcutText})]},e.name):(0,ea.TV)(e)&&e.children?(0,i.jsxs)(s.g8,{children:[(0,i.jsx)(el.Qq,{recordingKey:e.childDropdown&&e.childDropdown.recordingKey||e.name,children:e.displayText}),(0,i.jsx)(s.MJ,{children:ed(e.children,t)})]},e.name):null}var eu=n(432963),em=n(50679),ep=n(391708),eh=n(136572),ef=n(78063),eg=n(501929),ex=n(329983),e_=n(363198),ey=n(17248),eb=n(326609),ev=n(882503),eC=n(415839),eE=n(999457),ew=n(123973),ek=n(990096);let eT=r.memo(function(){let e=(0,ew.R6)(),{colorProfilePreference:t}=(0,ek.jK)(),n=(0,ek.hP)(t)===eE.RY.DISPLAY_P3?"p3":"srgb",r=[{value:eE.yw.SRGB,label:(0,d.t)("fullscreen.filename_view.color_management.color_profile_srgb")},{value:eE.yw.DISPLAY_P3,label:(0,d.t)("fullscreen.filename_view.color_management.color_profile_display_p3")}].sort((t,n)=>t.value===e&&n.value!==e?-1:t.value!==e&&n.value===e?1:0);return(0,i.jsx)(s.YJ,{children:(0,i.jsxs)(s.g8,{children:[(0,i.jsx)(el.Qq,{children:(0,d.t)("fullscreen.filename_view.color_management.file_color_profile")}),(0,i.jsx)(s.MJ,{children:(0,i.jsxs)(eC.z6,{title:(0,i.jsx)(s.r1,{children:(0,d.t)("fullscreen.filename_view.color_management.file_color_profile")}),value:eE.yw[e],onChange:e=>{e===eE.yw[eE.yw.SRGB]?w.glU&&w.glU.triggerAction("change-document-color-profile-to-srgb",{}):e===eE.yw[eE.yw.DISPLAY_P3]&&w.glU&&w.glU.triggerAction("change-document-color-profile-to-display-p3",{})},children:[e===eE.yw.LEGACY&&(0,i.jsx)(el.MJ,{value:eE.yw[eE.yw.LEGACY],children:(0,d.t)("fullscreen.filename_view.color_management.menu_item_title.legacy_file",{colorProfile:(0,d.t)(`fullscreen.properties_panel.export_settings_color_profile.${n}`)})}),r.map(e=>(0,i.jsx)(el.MJ,{value:eE.yw[e.value],children:(0,d.t)("fullscreen.filename_view.color_management.menu_item_title.legacy.assign",{color_profile:e.label})},e.value))]})})]})})});var ej=n(331061),eS=n(522568),eI=n(88830),eA=n(220061),eN=n(97387),eM=n(17453),eR=n(132297),eP=n(682100),eO=n(27414),eD=n(536378),eL=n(726317),eF=n(598334),eB=n(577175),eU=n(67562),eV=n(632222),eH=n(877964),ez=n(773444),eG=n(920675),eK=n(709631),eW=n(495798),eq=n(867841),eX=n(162494),eY=n(272607),eJ=n(994142),eZ=n(551417),eQ=n(655674),e$=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(e$||{});function e0(){let e=(0,a.wA)();return r.useCallback(()=>{e(eD.to({type:eJ.dD,data:{entrypoint:eZ.RR.FILENAME_VIEW_DROPDOWN}}))},[e])}function e1(){let e=(0,K.q5)(),t=(0,j.bc)((0,q.dTR)({fileKey:e?.key||""}),{enabled:!!e?.key});return r.useMemo(()=>{if(!e)return{};let n=!1,i=!1,r=!1,a=null;return"loaded"===t.status&&(n=!!t.data?.file?.canTrash&&!!(0,T.unwrap)(t.data?.file?.canTrash),r=!!(0,T.unwrap)(t.data?.file?.canMove),i=!!(t.data.file&&(0,eF._R)(t.data.file.editorType??eG._Y.DESIGN,t.data.file.currentPlanUser)),a=(0,T.unwrap)(t.data?.file?.canMoveWithReasons)||null),{userCanTrashFile:n,userIsVRForSeat:i,userCanMove:r,userCanMoveWithReasons:a}},[t,e])}var e2=n(288350),e5=n(66570);let e4=r.memo(function(){let e=(0,a.d4)(e=>e.currentUserOrgId),t=(0,a.d4)(e=>e.currentTeamId),n=(0,eq.Q)({currentOrgId:e,currentTeamId:t}),o=!!(0,W.iZ)(),l=function(){let e=(0,a.d4)(K.vu),t=(0,a.d4)(e=>e.currentUserOrgId),n=(0,a.d4)(e=>e.currentTeamId),i=(0,eq.Q)({currentOrgId:t,currentTeamId:n});return r.useMemo(()=>{if(e&&"loaded"===i.status)return(0,eU.T0)(i.data,e.key)},[e,i])}(),d=!!l,c=(0,K.q5)(),u=e9(),m="loaded"===n.status&&(0,eU.gV)(n.data,e),p=n.data?.currentUser?.userSidebarSections!=null?(0,T.unwrap)(n.data.currentUser.userSidebarSections):null,h=n.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],f=(0,eU.t$)(p??[],h),g=f.find(e=>e.id===l?.resource.sidebarSectionId),x=(0,e5.pH)(c?.key??null,{enabled:!!c});if(e7||!o)return null;let _=!!u&&!(m&&!d),y="loaded"===x.status&&x.data&&c;return _||y?(0,i.jsxs)(s.YJ,{children:[_&&(0,i.jsx)(e3,{isFavorited:d,favoriteSection:g,sections:f}),y&&(0,i.jsx)(e6,{})]}):null}),e3=r.memo(function({isFavorited:e,favoriteSection:t,sections:n}){let o=function(){let e=(0,a.wA)(),t=(0,a.d4)(K.vu),n=(0,a.d4)(e=>e.currentUserOrgId),i=(0,a.d4)(e=>e.currentTeamId),s=(0,eq.Q)({currentOrgId:n,currentTeamId:i}),o=r.useMemo(()=>{if(t&&"loaded"===s.status)return(0,eU.T0)(s.data,t.key)},[t,s]);return(n,i)=>{if(!t)return;let r={entrypoint:"editor",favoriteId:o?.resource.id,sectionId:i,file:ez.F.toLiveGraph(t),fileBrowserEntryPoint:!1};n?e(eN.qP(r)):e(eN.Fb(r))}}(),l=(0,d.t)("favorited_resources.add_to_sidebar");return e&&(l=`${(0,d.t)("favorited_resources.indicate_section_prefix")}: ${t?.name||(0,d.t)("sidebar.starred")}`),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.g8,{children:[(0,i.jsx)(el.Qq,{children:l}),(0,i.jsx)(s.MJ,{children:(0,i.jsxs)(eC.z6,{title:(0,i.jsx)(e2.h,{children:l}),value:t?.id||(e?(0,d.t)("sidebar.starred"):void 0),recordingKey:"favorite-custom",onChange:e=>{e===(0,d.t)("sidebar.starred")?o(!1):o(!!t&&t.id===e,e)},children:[0===n.length&&(0,i.jsx)(el.MJ,{value:(0,d.t)("sidebar.starred"),children:(0,d.t)("sidebar.starred")},(0,d.t)("sidebar.starred")),n.map(e=>(0,i.jsx)(el.MJ,{value:e.id,children:e.name||(0,d.t)("sidebar.starred")},e.id))]})})]}),e&&(0,i.jsx)(el.Pu,{recordingKey:"favorite-custom-remove",onClick:()=>o(!0,t?.id),children:(0,d.t)("favorited_resources.remove_from_sidebar")})]})}),e6=r.memo(function(){let e=(0,K.q5)(),t=function(){let e=(0,a.wA)();return t=>{e(eD.to({type:(0,eI.l)(),data:{pinnedFileId:t}}))}}(),n=function(){let e=(0,a.wA)();return t=>{e(eD.to({type:(0,eA.I)(),data:{pinnedFileId:t}}))}}(),r=(0,e5.pH)(e?.key??null,{enabled:!!e}),s=(0,e5.GI)("filename-context-menu");if("loaded"!==r.status||!r.data||!e)return null;let{canPinFileToWorkspace:o,canEditPin:l,existingFilePinId:c,workspaceHasMaxPins:u}=r.data;return o?(0,i.jsx)(el.Pu,{recordingKey:"pin-to-workspace",onClick:()=>s(e.key,u),children:(0,d.t)("tile.dropdown.pin_to_workspace")}):l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el.Pu,{onClick:()=>t(c),children:(0,d.t)("tile.dropdown.edit_workspace_pin")}),(0,i.jsx)(el.Pu,{onClick:()=>n(c),children:(0,d.t)("tile.dropdown.remove_workspace_pin")})]}):null}),e7=(0,H.ck)(),e9=()=>{let e=(0,K.q5)(),t=(0,a.d4)(e=>e.plans);return r.useMemo(()=>!!t.find(t=>e?.plan?.tier===eG.Ag.ORG||e?.plan?.tier===eG.Ag.ENTERPRISE?`organization::${t.plan_id}`===e?.plan?.id:`team::${t.plan_id}`===e?.plan?.id),[t,e?.plan?.tier,e?.plan?.id])},e8=(0,H.ck)(),te=r.memo(function(e){let t=(0,K.q5)();return t?(0,i.jsx)(m.u9,{label:"FilenameViewDropdown",children:(0,i.jsx)(tt,{...e,openFile:t})}):null}),tt=r.memo(function({openFile:e,recordingKey:t=""}){let n=(0,a.d4)(e=>(0,er.Ah)(e.mirror.appModel.activeCanvasEditModeType)),o=(0,a.d4)(e=>e.mirror.appModel.keyboardShortcuts),l=(0,a.d4)(e=>e.selectedView),c=(0,a.d4)(e=>(0,X.getPermissionsStateMemoized)(e)),u=(0,a.d4)(e=>e.userStateLoaded),m=(0,a.d4)(e=>e.fileVersion),h=(0,a.d4)(e=>e.repos),f=!!(0,W.iZ)(),g=(0,a.wA)(),x=(0,a.Pj)();(0,z.SR)();let{archiveBranch:y,deleteBranch:b,deleteFile:v,restoreBranch:C,openFileAnalytics:H,projectUrl:ea,publish:es,toggleVersionHistory:eo,resetFileThumbnail:ec,rename:eC,closeSelectMenu:eE}={deleteBranch:function(){let e=(0,K.q5)(),t=(0,a.wA)();return r.useCallback(()=>{e&&t(eD.to({type:eX.e,data:{fileName:e.name,onConfirm:()=>t(eP.kj({fileKeys:{[e.key]:!0},userInitiated:!0}))}}))},[t,e])}(),rename:function(){let e=(0,a.wA)();return r.useCallback(()=>{e(eO.vg())},[e])}(),deleteFile:function(){let e=(0,K.q5)(),t=e?.canDelete,n=(0,a.d4)(K.vu),i=(0,P.JT)(),s=i&&i.profile.entityType===$.o1.TEAM,o=(0,a.wA)(),l=(0,a.d4)(e=>e.repos);return r.useCallback(()=>{if(!e||!n)return;let i=(0,B.up)(e,l),r=!!eW.Ay&&t&&!s;i&&(0,B.SA)(e,i)?e.repo?.canEdit&&!i.trashed_at&&o(eP.U1({filesByKey:{},reposById:{[i.id]:{repo:i,main_file:n}}})):r&&o(eP.U1({filesByKey:{[e.key]:n}}))},[e,n,t,s,o,l])}(),archiveBranch:function(){let e=(0,a.d4)(K.vu),t=(0,a.wA)();return r.useCallback(()=>{e&&(t(eL.VK({fileKeys:{[e.key]:e},userInitiated:!0})),(0,eS.sx)("Branch Archived",{fileKey:e.key,fileRepoId:e.file_repo_id}))},[e,t])}(),restoreBranch:function(){let e=(0,a.d4)(K.vu),t=(0,a.wA)();return r.useCallback(()=>{e&&t(eR.Rh({fileKeys:{[e.key]:e},userInitiated:!0}))},[e,t])}(),openFileAnalytics:function(){let e=(0,K.q5)(),t=(0,a.wA)();return r.useCallback(()=>{e&&t((0,eD.to)({type:eY.e,data:{fileKey:e.key,entrypoint:eB.F.FileView}}))},[e,t])}(),projectUrl:function(){let e=(0,K.q5)(),t=(0,eH.FC)();return r.useMemo(()=>{if(!e)return;let n=e.project;return n&&n.path&&""!==n.path?(0,eV.cU)(n.id,n.orgId??null,n.teamId,t,!!n?.team?.canView):null},[e,t])}(),publish:function(){let e=(0,_.md)(Y.p9),t=(0,a.d4)(Y.fA),n=(0,K.q5)(),i=e0(),s=function(){let e=(0,K.q5)(),t=(0,a.d4)(e=>e.teams),n=(0,a.wA)(),i=e0();return r.useCallback(()=>{if(!e)return;let r=e.teamId&&t[e.teamId];n(eD.to({type:eQ.$3,data:{afterFileMove:i,team:r||null}}))},[n,e,t,i])}(),o=r.useMemo(()=>n&&e?t?"publish":"show_upsell_modal":"disabled",[t,e,n]),l=r.useCallback(()=>{n&&"show_upsell_modal"===o?s():"publish"===o&&i()},[n,o,s,i]);return"disabled"===o?null:l}(),toggleVersionHistory:function(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);return r.useCallback(()=>{(0,er.Ah)(t)?e((0,eK.Eg)()):e((0,eK._b)({source:et.e0.EDITOR_TOOLBAR}))},[e,t])}(),resetFileThumbnail:function(){let e=(0,a.wA)(),t=(0,K.q5)();return r.useCallback(()=>{t&&e(eM.$m({file_key:t.key,thumbnail_guid:null}))},[e,t])}(),closeSelectMenu:function(){let e=(0,ej.cq)();return r.useCallback(()=>{e&&e.events.emit("click")},[e])}()},ew=(0,ey.sO)(),ek=(0,e_.cJ)(),eI=(0,ex.Oc)(),eA=!!((0,k.kc)().ds_pubplat_sts||(0,k.kc)().ds_pubplat_sts_code),eN=(0,S.to)(),eF=(0,O.Em)(),eU=(0,O.m0)(),ez=(0,G.BI)(),eG=(0,G.m0)(),eq=c.user,eJ=(0,A.WO)(e),eZ=(0,I.ju)(),e$=(0,a.d4)(Y.F9),e2=(0,eu.jT)(e,e$).unwrapOr(!1),e5=(0,j.bc)(q.iY3,{branchFileKey:e?.key||""},{enabled:!0}),e3=(0,ef.DF)(e,eq),e6=(0,ex.aI)(),{userCanTrashFile:e7,userCanMove:e9}=e1(),te=(0,P.JT)(),tt=te&&te.profile.entityType===$.o1.TEAM,ta=!!eq&&e7&&!tt,ts=(0,J.jB)({files:[{editor_type:e?.editorType??null,folder_id:e?.project?.id??null}],repos:[],destinationFolderId:e?.project?.id??null,isDestinationDrafts:!1}),to=(0,J.Cp)(ts.destinationPlan?{type:ts.destinationPlan.key.type,parentId:ts.destinationPlan.key.parentId}:null,ts.licenseType),tl=function(e,t){let{userIsVRForSeat:n,userCanMove:i,userCanMoveWithReasons:a}=e1(),s=(0,K.q5)(),o=(0,j.bc)((0,q.dTR)({fileKey:s?.key||""}),{enabled:!!s?.key});return r.useMemo(()=>({canMove:!!i,isUserViewerRestricted:!!n,planUser:o.data?.file?.currentPlanUser??null,inDrafts:!!o.data?.file?.isDraftFile,draftsMoveData:e,hasConnectedPlanUserInOrg:t,canMoveWithReasons:a||void 0}),[i,n,o.data?.file?.currentPlanUser,o.data?.file?.isDraftFile,e,t,a])}(ts,!!to),td=(0,N.xo)(),tc=!1;e&&l.editorType&&(tc=l.editorType===Q.nT.Slides&&(0,T.unwrap)(!!e.org?.isSlidesDisabled)||l.editorType===Q.nT.Sites&&!!e.org?.isSitesDisabled||l.editorType===Q.nT.Cooper&&!!e.org?.isCooperDisabled);let tu=eI&&ts.requiresUpgrade&&!e6,tm=(0,J.Px)(ts,tc),tp=td||tm||tu,th=(0,V.$n)(),tf=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),tg=(0,eg.F)(),tx=(0,M.n6)(),t_=(0,L.kD)(),ty=(0,L.J3)(),tb=(0,L.JU)(ty),tv=ty===L.kN.FILE_IN_DRAFTS,tC=D.h.useTrackingContext({trigger:Z.b.FILE_DUPLICATE});r.useEffect(()=>{eG&&(eG._move_to_project=()=>{e9&&!tp&&(0,ef.RG)(g,e,h,tl)()}),ez?.updateFilePermissionV2?.(e3,!!e9&&!tp,!!ta)},[e3,e9,ta,tp,g,ez,eG,e,h,tl]);let tE=(0,eh.tz)(),tw=(0,ep.y$)(),tk=f&&!e8&&(eF||eU||ek&&eA),tT=e$&&eJ||tw,tj=r.useCallback(()=>{es&&(eE(),es())},[eE,es]),tS=(0,i.jsx)(tn,{disabled:!es,recordingKey:t,onClick:tj}),tI=r.useCallback(()=>{eZ({componentBrowserEntrypoint:"filename_menu",componentBrowserScope:"file"})},[eZ]),tA=r.useMemo(()=>eJ&&(0,i.jsx)(ti,{recordingKey:t,onClick:tI}),[eJ,t,tI]),tN=!!e2&&(0,i.jsx)(el.Pu,{recordingKey:p.Pt(t,"viewFileAnalytics"),onClick:H,children:(0,d.t)("fullscreen.filename_view.file_analytics")}),tM=r.useCallback(()=>{(0,em.e)({dispatch:g,state:x.getState()})},[g,x]),tR=tw&&(0,i.jsx)(tr,{recordingKey:t,onClick:tM}),tP=r.useCallback(()=>{w.glU&&w.glU.triggerAction("export-selected-exportables",{source:"toolbar"})},[]),tO=r.useCallback(()=>{(0,F.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,eb.fx)(e,m).then(e=>{(0,eb.PF)(g,e)})},[g,m,e]),tD=w.Ez5&&w.Ez5.uiState().isRecovery.getCopy(),tL=l.editorType,tF=!e.canExport,tB=tL===Q.nT.Whiteboard&&!!e.org?.figjamDisabledAt||tL===Q.nT.Slides&&(0,T.unwrap)(e.org?.isSlidesDisabled)||tL===Q.nT.Sites&&!!e.org?.isSitesDisabled||tL===Q.nT.Cooper&&!!e.org?.isCooperDisabled||(0,X.isOrgUserExternallyRestrictedFromState)(c)||tF,tU=tL!==Q.nT.Whiteboard,tV=!!(tU&&(0,B.Kz)(e)),tH="loaded"===e5.status&&(null===e5.data.file||e5.data.file&&(0,en.AM)(e5.data.file)===en.pT.MERGED),tz=tV&&("loaded"!==e5.status||tH),tG=eq&&e.canManage,tK=!!(tV&&e.trashedAt),tW=tK&&!tz,tq=!eI&&e.canEdit&&!!e.thumbnailGuid,tX=!e8&&l.editorType===Q.nT.Design&&e.canEdit,tY=(0,ev.z0)(),tJ=r.useMemo(()=>(0,U.m)(th,et.e0.EDITOR_TOOLBAR,tf,tx),[th,tf,tx]),tZ=r.useMemo(()=>ed(tJ,{enabledActions:tY,selectedView:l,dispatch:g}),[tJ,tY,l,g]),tQ=r.useMemo(()=>(0,U.t)(th,et.e0.EDITOR_TOOLBAR,tf),[th,tf]),t$=r.useMemo(()=>ed(tQ,{enabledActions:tY,selectedView:l,dispatch:g}),[tQ,tY,l,g]);return(0,i.jsx)(R.fu,{name:et.e0.EDITOR_FILENAME_DROPDOWN,properties:{...tC,slideConversionDropdownEntrypoint:tg},children:(0,i.jsx)(s.mc,{children:(0,i.jsxs)(E.o,{eventListeners:["onPointerEnter","onPointerLeave","onMouseEnter","onMouseLeave"],children:[tZ.map((e,t)=>(0,i.jsx)(r.Fragment,{children:e},`merging-${t}`)),tV&&t$.map((e,t)=>(0,i.jsx)(r.Fragment,{children:e},`branching-${t}`)),f&&!e8&&!tD&&!eI&&(0,i.jsx)(el.Pu,{disabled:!(0,ee.Yh)(tY,"enter-history-mode"),recordingKey:p.Pt(t,"toggleVersionHistory"),onClick:eo,children:n?(0,d.t)("fullscreen.filename_view.version-history-hide"):(0,d.t)("fullscreen.filename_view.version-history-show")}),!eI&&(0,i.jsxs)(s.YJ,{children:[!!t_&&(0,i.jsx)(ei.Z4,{fileKey:t_?.fileKey||"",templateName:t_?.name||""}),tb&&!eI&&(0,i.jsx)(ei.Lr,{file:{key:e.key,name:e.name,folder_id:e.folderId,team_id:e.teamId,editor_type:e.editorType,parent_org_id:e.parentOrgId},isPublished:!!t_,fileNeedsMovingBeforePublish:tv,source:"filename-context-menu"}),tk&&(0,i.jsx)(i.Fragment,{children:tT?(0,i.jsxs)(s.g8,{children:[(0,i.jsx)(el.Qq,{children:(0,d.t)("fullscreen.filename_view.library_actions")}),(0,i.jsxs)(s.MJ,{children:[tS,tA,tR,tN]})]}):(0,i.jsxs)(i.Fragment,{children:[tS,tR,tN]})}),tU&&!ew&&!eN&&!ek&&!tD&&!eI&&(0,i.jsxs)(el.Pu,{disabled:!eq,recordingKey:p.Pt(t,"exportSelectedExportables"),onClick:tP,children:[(0,d.t)("fullscreen.filename_view.export"),(0,i.jsx)(s.Ov,{children:(0,i.jsx)(s.rm,{children:(0,ee.c1)(o,"export-selected-exportables")})})]}),tg&&e.canEdit&&(0,i.jsx)(el.Pu,{onClick:tO,recordingKey:p.Pt(t,"copyToFigmaSlides"),disabled:!eq,children:(0,d.t)("slides.general.copy_current_page_to_figma_slides")})]}),(0,i.jsx)(e4,{}),!tV&&t$.length>0&&(0,i.jsx)(s.YJ,{children:t$.map((e,t)=>(0,i.jsx)(r.Fragment,{children:e},`branching-group-${t}`))}),tX&&(0,i.jsx)(eT,{}),(0,i.jsxs)(s.YJ,{children:[f&&!e8&&tE.canDuplicate&&(0,i.jsx)(el.Pu,{disabled:!u||tB,recordingKey:p.Pt(t,"duplicate"),onClick:tE.duplicateFile,children:tE.duplicateDisplayText}),f&&!tK&&(0,i.jsx)(el.Pu,{disabled:!e3,recordingKey:p.Pt(t,"rename"),onClick:()=>{eE(),eC()},children:tV?(0,d.t)("fullscreen.filename_view.rename-branch"):(0,d.t)("fullscreen.filename_view.rename")}),f&&!e8&&tW&&(0,i.jsx)(el.Pu,{disabled:!tG,recordingKey:p.Pt(t,"restore"),onClick:C,children:(0,d.t)("fullscreen.filename_view.restore")}),f&&!e8&&ea&&""!==ea&&(0,i.jsx)(el.Oo,{recordingKey:"goToProject",href:ea,newTab:!0,children:(0,d.t)("fullscreen.filename_view.go_to_project")}),f&&!e8&&!tV&&(0,i.jsxs)(el.Pu,{disabled:tp,"data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",recordingKey:p.Pt(t,"moveToProject"),onClick:(0,ef.RG)(g,e,h,tl),children:[(0,d.t)("fullscreen.filename_view.move_file"),(0,i.jsx)(s.Ov,{children:(0,J.zS)(ts,tp,to)})]}),f&&!e8&&!tK&&e7&&(0,i.jsx)(el.Pu,{disabled:!ta,recordingKey:p.Pt(t,"delete"),onClick:tV?y:v,children:tV?(0,d.t)("fullscreen.filename_view.archive-branch"):(0,d.t)("fullscreen.filename_view.move_to_trash")}),f&&!e8&&tK&&(0,i.jsx)(el.Pu,{disabled:!tG,onClick:b,children:tV?(0,d.t)("fullscreen.filename_view.archive-branch"):(0,d.t)("fullscreen.filename_view.move_to_trash")})]}),!!tq&&(0,i.jsx)(s.YJ,{children:(0,i.jsx)(el.Pu,{recordingKey:p.Pt(t,"resetFileThumbnail"),onClick:ec,children:(0,k.kc)().dse_library_pg_thumbnails?(0,d.t)("fullscreen.filename_view.restore_default_file_thumbnail"):(0,d.t)("fullscreen.filename_view.restore_default_thumbnail")})})]})})})}),tn=r.memo(function({disabled:e,recordingKey:t,onClick:n}){return(0,i.jsx)(el.Pu,{disabled:e,recordingKey:p.Pt(t,"publishVersion"),onClick:n,children:(0,d.t)("fullscreen.filename_view.publish-styles-and-components")})}),ti=r.memo(function({recordingKey:e,onClick:t}){return(0,i.jsx)(el.Pu,{recordingKey:p.Pt(e,"codeConnect"),onClick:t,children:(0,d.t)("dev_handoff.component_browser.menu_item")})}),tr=r.memo(function({recordingKey:e,onClick:t}){return(0,i.jsx)(el.Pu,{recordingKey:p.Pt(e,"makeLibrary"),onClick:t,children:(0,d.t)("fullscreen.filename_view.make_library")})});function ta(e){return(0,i.jsx)(m.u9,{label:"FileMenu",children:(0,i.jsx)(ts,{...e})})}function ts({setFileMenuIsHovered:e,isDropdownVisibleWithDelay:t,recordingKey:n}){let c=(0,a.d4)(e=>e.isRenaming),{getTriggerProps:m,manager:_}=s.b(),{onMouseDown:y,...b}=m(),v=(0,f.k)(),E=(0,h.Om)(),w=(0,r.useCallback)(e=>{v?E("LEFT_PANEL_FILE_NAME_CHEVRON"):y(e)},[v,y,E]);return r.useMemo(()=>{if(c)return null;let r=_.isOpen;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:u()("file_menu--chevronContainer--gGwRO",{"file_menu--selected--ukEyJ":r||t,"file_menu--enableSecondaryHover--1rtXs":!(r||t)}),onMouseEnter:()=>{e?.(!0)},onMouseLeave:()=>{e?.(!1)},children:[(0,g.MP)()&&(0,i.jsx)(C,{isUI3:!0,targetKey:x.O0}),(0,i.jsxs)(s.bL,{manager:_,children:[(0,i.jsx)("span",{className:"xjmxbmz",children:(0,i.jsx)(o.K,{...b,onClick:w,actionOnPointerDown:!0,recordingKey:p.Pt(n,"chevron"),"aria-label":(0,d.t)("fullscreen.filename_view.edit_file_menu"),"data-onboarding-key":x.O0,children:(0,i.jsx)(l.O,{})})}),(0,i.jsx)(te,{recordingKey:n})]})]})})},[c,t,_,w,b,n,e])}},347470:(e,t,n)=>{n.d(t,{n:()=>Y});var i=n(239976),r=n(20002),a=n(600195),s=n(224542),o=n.n(s),l=n(105652),d=n(295870),c=n(692376),u=n(379141),m=n(522568),p=n(719749),h=n(493064),f=n(129416),g=n(143973),x=n(543735),_=n(981510),y=n(562418),b=n(376129),v=n(610604),C=n(74189),E=n(795867),w=n(189570);function k(e){let t=Number(e);return Number.isNaN(t)?((0,b.cb)(Error("Invalid checkpoint id found in repo data")),null):t}function T(e){let t=(0,y.m0)(),{openFile:n,modalShown:i,topLevelMode:r,dispatch:a}=e,{canEdit:s,key:o,fileRepoId:T}=n,j=function(e){let t=e?.fileRepoId||"",n=(0,p.bc)(v.op7,{repoId:t});return l.useMemo(()=>{if("loaded"!==n.status||!t)return!1;let{repo:i}=n.data,r=n.data.repo?.files;if(i&&(0,b.Ns)(e,i))return!1;if(null==i||!r)return(0,f.$D)(d.e.SCENEGRAPH_AND_SYNC,Error("useUpdatesAvailableFromMain called with invalid repo or repo files data")),!1;let a=r.find(t=>t.key===e.key),s=r.find(e=>(0,b.Ns)(e,i));if(!a||!s)return(0,f.$D)(d.e.SCENEGRAPH_AND_SYNC,Error("useUpdatesAvailableFromMain called with invalid branch or source file data")),!1;if(a.sourceCheckpointId===s.checkpointId)return!1;let o=(0,h.oA)(s.recentFileVersions)||[];if(0===o.length||!a.sourceCheckpointId)return!1;let l=k(a.sourceCheckpointId);if(null===l)return!1;let c=o.filter(e=>{let{user:t,checkpoint:n}=e;if(!n||t.isSystemUser)return!1;let{id:i,meta:r}=n,a=k(i);if(null===a||a<=l)return!1;if(null===r||null===r.editCounts||void 0===r.editCounts)return!0;let s=function(e){try{return Object.fromEntries(Object.entries(e).map(([e,t])=>{let n=t&&t.version_history_count?{version_history_count:parseInt(t.version_history_count)}:{version_history_count:0};return[e,n]}))}catch(e){return(0,b.cb)(Error("Invalid edit count found in repo data")),null}}(r.editCounts);return null!==s&&Object.values(s).some(e=>e.version_history_count>0)});return!!c&&c.length>0},[e,t,n])}(n);return l.useEffect(()=>{if(t&&j){a(x.Q.dequeue({type:g._.BRANCHING_SOURCE_FILE_UPDATED}));return}s&&i?.type!==w.$l.type&&r!==c.lyf.BRANCHING&&j?((0,m.sx)("Branch Update Alert",{action:"Shown",fileKey:o,fileRepoId:T}),a(x.Q.enqueue({notification:{type:g._.BRANCHING_SOURCE_FILE_UPDATED,message:(0,u.t)("collaboration.branching.updates_available_from_main_file"),acceptCallback:()=>{a(_.hx({direction:C.Kn.FROM_SOURCE,trackingContextName:E.e0.BRANCHING_UPDATE_NOTIFICATION})),(0,m.sx)("Branch Update Alert",{action:"Update",fileKey:o,fileRepoId:T})},dismissCallback:()=>{(0,m.sx)("Branch Update Alert",{action:"Dismiss",fileKey:o,fileRepoId:T})}}}))):a(x.Q.dequeue({type:g._.BRANCHING_SOURCE_FILE_UPDATED}))},[s,o,T,i,r,j,a,t]),null}var j=n(499735),S=n(635426),I=n(964731),A=n(362602),N=n(836848),M=n(943866),R=n(888903),P=n(287736),O=n(679821),D=n(416054),L=n(536378),F=n(74962),B=n(841501),U=(e=>(e[e.NoMerges=0]="NoMerges",e[e.MergeStarted=1]="MergeStarted",e[e.MergeChangesSyncedPendingConfirmation=2]="MergeChangesSyncedPendingConfirmation",e[e.MergeComplete=3]="MergeComplete",e[e.MergeError=4]="MergeError",e[e.MergeTimeout=5]="MergeTimeout",e))(U||{});function V(e){return 1===e||2===e}function H(e){return null===e.mergeResultCheckpointId}function z({repoId:e,openFileKey:t,currentUserId:n,appMergingStatus:i,openFileMerge:a}){let s=function({repoId:e,currentUserId:t,appMergingStatus:n,openFileMerge:i}){let r=(0,p.bc)(v.grH,{repoId:e}),[a,s]=l.useState(0),[o,d]=l.useState();return l.useEffect(()=>{if("loaded"===r.status){let e;let n=r.data.repo?.files?.find(e=>e.fileMerges.find(e=>e.id===i?.fileMergeId&&e.userId===t&&H(e)));i&&(e=r.data.repo?.files?.find(e=>e.fileMerges.find(e=>e.id===i.fileMergeId&&e.userId===t&&!H(e)))),n?0===a||3===a?(d(n),i&&i.committedChanges?s(2):s(1)):i&&i.committedChanges&&1===a&&s(2):V(a)&&e?(d(e),s(3)):0===a&&e?(d(e),s(3)):(4===a||5===a)&&(d(e||o),s(3))}},[r,a,o,i,t]),l.useEffect(()=>{n===A.y.MERGING_ERROR?s(4):4===a&&n===A.y.NOT_MERGING&&s(0)},[a,n]),l.useEffect(()=>{let e;if(2===a?e=setTimeout(()=>{s(5)},3e4):3===a&&(e=setTimeout(()=>{s(0),d(void 0)},3e3)),void 0!==e)return()=>clearTimeout(e)},[t,a,o]),{state:a,mergeFile:o}}({repoId:e,currentUserId:n,appMergingStatus:i,openFileMerge:a}),o=(0,M.ZC)(s),d=function(e,t,n){switch(t){case 0:default:return;case 1:case 2:case 4:case 5:return n?.fileMerges.find(t=>t.userId===e&&H(t));case 3:return n?.fileMerges.find(t=>t.userId===e&&!H(t))}}(n,s.state,s.mergeFile),c=(0,r.wA)(),h=l.useContext(F.ss),f=l.useMemo(()=>s?.state!==3||o?.state===4?null:{icon:P.zX.CHECK,type:"file-merge-submit",message:d?.direction===0?(0,u.t)("collaboration.branching.merge_success"):(0,u.t)("collaboration.branching.update_success"),button:d?.direction===0?{text:(0,u.t)("collaboration.branching.edit_merge_description"),action:()=>{c(D.T({fileKey:t,versionId:d?.mergeResultFileversionId})),(0,m.sx)("Merge Finished Edit Description Clicked",{branchKey:s.mergeFile?.key,sourceKey:s.mergeFile?.sourceFileKey})}}:void 0,timeoutOverride:1e4},[c,d?.direction,d?.mergeResultFileversionId,s.mergeFile?.key,s.mergeFile?.sourceFileKey,s.state,t,o?.state]);return l.useEffect(()=>{if(0===s.state&&(!o||o?.state===3)){c(R.F.clearAll());return}if(5===s.state&&o&&V(o.state)&&o.mergeFile){let e=s.mergeFile.key===t?C.Kn.FROM_SOURCE:C.Kn.TO_SOURCE;c(R.F.clearAll()),c((0,L.to)({type:B.my,data:{view:B.RK.TIMED_OUT,mergeParams:{branchKey:s.mergeFile.key,sourceKey:s.mergeFile.sourceFileKey,direction:e},failureInfo:{file_merge_id:d.id}}}))}f&&c(R.F.enqueue(f));let e=d?.direction===0?C.Kn.TO_SOURCE:C.Kn.FROM_SOURCE;if(o&&V(o.state)&&(4===s.state||5===s.state)){let t;switch(s.state){case 4:t=Error("useMergeStatus: Backend merge error");break;case 5:t=Error("useMergeStatus: Open merge was not closed in 30 seconds");break;default:(0,N.xb)(s.state)}(0,b.HJ)(t,C.PW.ON_MERGE,e,{file_merge_id:d?.id})}if((V(o?.state)||o?.state===0)&&3===s.state){let t={branchKey:s.mergeFile.key,direction:e,sourceKey:s.mergeFile.sourceFileKey,branchModalTrackingId:h};c(O.ie({})),c(O.ov({hideModal:!0,mergeParams:t,userInitiated:!0,reason:"merge_complete"}))}},[c,d,s.mergeFile,s.state,t,o,f,h]),null}var G=n(223487),K=n(605985),W=n(230964),q=n(78063);let X="filename_view--renaming--vUvAN";function Y(e){let t=(0,K.iZ)(),n=(0,G.q5)(),s=n?.repo,l=!!(n&&s&&(0,b.Ns)(n,s)),d=!!(n&&(0,b.Kz)(n)),c=!!n&&(0,q.DF)(n,t),u=(0,r.d4)(e=>e.isRenaming),m=I.Um()?.type===W.eg,p=(0,r.d4)(e=>e.mergingStatus),h=(0,r.d4)(e=>e.openFileMerge),f=(0,r.d4)(e=>e.mirror.appModel.topLevelMode),g=(0,r.d4)(e=>e.modalShown),x=(0,r.wA)(),_=n?.project?.activeProjectResourceConnections?.[0];return(0,i.jsxs)("div",{className:o()("filename_view--filenameView--Gj2E6",{[X]:u}),children:[d&&(0,i.jsx)("span",{"data-testid":"branch-icon",className:"filename_view--branchIcon--nkXPN",children:(0,i.jsx)(a.L,{})}),(0,i.jsx)("span",{className:o()("filename_view--filenameText--UrHW-",{[X]:u,"filename_view--dropdownOpen--f7oD-":m||e.isDropdownVisibleWithDelay,"filename_view--enableSecondaryHover--Kw0AU":!u,"filename_view--shouldShowFileMenu--uyVNh":!e.shouldShowFileMenu}),onMouseEnter:()=>{e.setFileNameIsHovered?.(!0)},onMouseLeave:()=>{e.setFileNameIsHovered?.(!1)},children:l&&s?(0,i.jsx)(W.IS,{dispatch:x,user:t,repo:s,canRename:c,isRenaming:u,dataTestId:"repo_name_data_test_id"}):(0,i.jsx)(W.o3,{recordingKey:j.Pt(e.recordingKey,"fileName")})}),e.shouldShowConnectedBadge&&_&&(0,i.jsx)(S.W,{hostPlanName:_.hostPlanName,connectedPlanName:_.connectedPlanName}),n?.fileRepoId&&t?.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{openFile:n,modalShown:g,topLevelMode:f,dispatch:x}),(0,i.jsx)(z,{repoId:n.fileRepoId,openFileKey:n.key,currentUserId:t.id,appMergingStatus:p,openFileMerge:h})]})]})}},215256:(e,t,n)=>{n.d(t,{d:()=>h});var i=n(239976);n(323264);var r=n(916626),a=n(7857),s=n(598066),o=n(62023),l=n(819805),d=n(223487),c=n(439259),u=n(579263),m=n(271820),p=n(491743);function h(e){return(0,i.jsx)(r.k,{id:"LeftPanelHeader",children:(0,i.jsx)(a.u9,{label:"LeftPanelHeader",children:(0,i.jsx)(f,{...e})})})}function f({shouldUseBottomBorder:e}){let t=(0,d.q5)(),n=(0,s.l7)(),r=(0,o.e)(),a=(0,u.HY)(),h=(0,l.Zr)("toggle-sidebar");if(!(t&&t.key&&t.name))return(0,i.jsxs)(m.SZ,{shouldUseBottomBorder:!!e,shouldUseTopPadding:a,children:[(0,i.jsx)(c.cQ,{}),(0,i.jsx)(c.EG,{})]});let f=(0,i.jsx)(m.x$,{shouldShowFileMenu:!n&&!r,recordingKey:m.Fp});return a&&(f=(0,i.jsxs)("div",{...{0:{className:"x7hzu26 x1ai9mow x78zum5 x1qughib x1nfngrj"},1:{className:"x7hzu26 x1ai9mow x78zum5 x1qughib x1nfngrj x1gskr33 x1ihwiht"}}[!h<<0],children:[f,h&&(0,i.jsx)(p.n,{})]})),(0,i.jsxs)(m.SZ,{shouldUseBottomBorder:!!e,withSmallBottomPadding:a,children:[f,(0,i.jsx)(m.l9,{}),(0,i.jsx)(m.t7,{openFile:t})]})}},271820:(e,t,n)=>{n.d(t,{x$:()=>S,t7:()=>N,Fp:()=>T,SZ:()=>j,l9:()=>A});var i=n(239976),r=n(105652),a=n(20002),s=n(943360),o=n(379141),l=n(224542),d=n.n(l),c=n(7857),u=n(282746),m=n(981510),p=n(376129),h=n(964731),f=n(223487),g=n(795867),x=n(409380),_=n(82468),y=n(405539),b=n(230964);function v(e){return(0,i.jsx)("div",{className:"static_repo_name--container--IYos-",children:(0,i.jsx)(s.E,{className:"static_repo_name--button--j3wy5 ellipsis--ellipsis--70pHK",onClick:()=>e.dispatch(m.oz({trackingContextName:e.trackingContextName})),children:(0,p.oj)(e.repo)})})}v.displayName="StaticRepoName";var C=n(570270),E=n(347470);let w="left_panel_header_components--row--0yXll",k="left_panel_header_components--withBottomMargin--OhKPS",T="leftPanelHeader";function j({shouldUseBottomBorder:e,children:t,withSmallPaddingRight:n,withSmallBottomPadding:r,shouldUseTopPadding:a}){return(0,i.jsx)("div",{className:d()("left_panel_header_components--container--Ce6-c",{"left_panel_header_components--withBottomBorder--HKV1J":e,"left_panel_header_components--withSmallBottomPadding--hcid8":r,"left_panel_header_components--withSmallPaddingRight--Ji2Cl":n,"left_panel_header_components--withTopPadding--7uHy9":a}),children:t})}function S(e){return(0,i.jsx)(c.u9,{label:"FileControlsRow",children:(0,i.jsx)(I,{...e})})}function I({shouldShowFileMenu:e=!0,recordingKey:t}){let[n,a]=r.useState(!1),s=h.Um()?.type===b.eg,[o,l]=r.useState(s);r.useEffect(()=>{if(s)l(!0);else{let e=requestAnimationFrame(()=>{l(!1)});return()=>cancelAnimationFrame(e)}},[s]);let d=(0,u.b)(),c=(0,i.jsxs)("div",{className:w,"data-file-header-hover":n,style:d?{overflow:"hidden"}:void 0,children:[(0,i.jsx)(E.n,{setFileNameIsHovered:a,isDropdownVisibleWithDelay:o,recordingKey:t,shouldShowFileMenu:e}),e&&(0,i.jsx)(C.m,{setFileMenuIsHovered:a,isDropdownVisibleWithDelay:o,recordingKey:t})]});return(0,i.jsx)(x.x,{children:c})}function A(){let e=(0,f.q5)(),t=e?.repo,n=!!(t&&(0,p.Ns)(e,t)),r=!!(e&&(0,p.Kz)(e)),s=(0,a.wA)();return r&&t?(0,i.jsx)("div",{className:d()(w,k),children:(0,i.jsx)(v,{repo:t,dispatch:s,trackingContextName:g.e0.EDITOR_TOOLBAR_ACTION})}):n&&e.fileRepoId?(0,i.jsx)("div",{className:d()(w,k),children:(0,i.jsx)(M,{})}):null}function N({openFile:e}){return(0,i.jsxs)("div",{className:w,children:[(0,i.jsx)(b.ur,{openFile:e}),(0,i.jsx)(y.s,{openFile:e})]})}function M(){let e=(0,a.wA)(),t=r.useContext(_.X);return null===t||t<1?null:(0,i.jsx)(s.E,{className:"left_panel_header_components--button--vJXRf",onClick:()=>e(m.o5({trackingContextName:g.e0.EDITOR_TOOLBAR_ACTION})),children:(0,o.tx)("fullscreen.filename_view.branch-count",{BRANCHES:t})})}},26517:(e,t,n)=>{n.d(t,{En:()=>s,J:()=>a}),n(239976);var i=n(475829),r=(n(453720),n(282746));function a(){return!1}function s({isLeftRail:e=!1}){return e=(0,r.b)()||e,i.iv({placement:e?"right":"bottom"}),null}n(477948),n(456622)},58268:(e,t,n)=>{n.d(t,{J:()=>_,K:()=>x});var i=n(239976),r=n(105652),a=n(20002),s=n(81678),o=n(692376),l=n(379141),d=n(522568),c=n(723850),u=n(477948),m=n(536378),p=n(562418),h=n(157750),f=n(236410),g=n(539119);function x(){let e=(0,a.d4)(e=>e.modalShown),t=e?.type===g.CM.type,n=(0,h.ut)(o.Ez5?.uiState().showMissingFontsButton,!1),i=(0,c.U)(),r=(0,a.wA)();return{expanded:t,icon:s.z,label:(0,l.t)("fullscreen.toolbar.missing_fonts"),onClick:()=>{t?r((0,m.AS)()):(i("missing_fonts_button_clicked"),o.glU?.findMissingFontsAndShowPopover())},shouldShow:n}}function _({isLeftRail:e=!1}){let{label:t,onClick:n,shouldShow:a}=x(),o=(0,p.lg)();return((0,r.useEffect)(()=>{a&&d.az.trackDefinedEvent("ui3_platform.missing_fonts_warning_shown",{withNavbar:e,editorType:o})},[o,a,e]),a)?(0,i.jsx)(u.J,{onClick:n,recordingKey:"toolbarView.missingFontsButton","aria-label":(0,l.t)("fullscreen.toolbar.missing_fonts"),"data-tooltip":t,"data-tooltip-type":f.Ib.TEXT,"data-tooltip-show-right":e,children:(0,i.jsx)(s.z,{})}):null}},491743:(e,t,n)=>{n.d(t,{n:()=>u,A:()=>m});var i=n(239976),r=n(319995),a=n(379141),s=n(477948),o=n(772293),l=n(936199),d=n(236410),c=n(122970);function u(){let e=(0,l.q)(),t=e?(0,a.t)("fullscreen_actions.expand-ui"):(0,a.t)("fullscreen_actions.minimize-ui");return(0,i.jsx)(s.J,{"aria-label":t,onClick:()=>o.Y5.triggerAction("toggle-sidebar",{source:"left_panel",state:e?"expand":"minimize"}),recordingKey:"left-panel-island.toggle-minimize-ui","data-onboarding-key":c.ue,"data-tooltip":t,"data-tooltip-type":d.Ib.TEXT,"data-tooltip-shortcut-key":"toggle-sidebar",children:(0,i.jsx)(r.C,{})})}function m(){return(0,i.jsx)("div",{className:"toggle_sidebars_icon_button--nonInteractiveContainer--qozYS",children:(0,i.jsx)(r.C,{})})}},362151:(e,t,n)=>{n.d(t,{E:()=>r});var i=n(105652);function r(e,t){let[n,r]=(0,i.useState)(null);return(0,i.useLayoutEffect)(()=>{if(!e||!e.current||!t)return;r(e.current.getBoundingClientRect().width);let n=new ResizeObserver(e=>{e.forEach(e=>{let t=e.borderBoxSize?.[0];r(t?t.inlineSize:e.contentRect.width)})});return n.observe(e.current),()=>n.disconnect()},[e,t]),n}},995522:(e,t,n)=>{n.d(t,{Q:()=>u});var i=n(239976),r=n(105652),a=n(224542),s=n.n(a),o=n(212198),l=n(936199),d=n(157750),c=n(665933);let u=r.forwardRef(({shouldAnimate:e=!0,ignoreRulers:t,leftOffset:n=0,floatingWhenExpanded:r,children:a},u)=>{let m=(0,d.J2)((0,o.UK)().renderRulers),p=(0,c.Ye)(),h=(0,l.T)();return(0,i.jsx)("div",{ref:u,className:s()("left_panel_positioner--leftPanelPositioner--GlQU8",{"left_panel_positioner--withShowingRulers--0MmsA":m&&!t,"left_panel_positioner--withAnimation--n2gGH":e&&!h,"left_panel_positioner--withInsetEditorEnabled--Wwwv-":!p&&!r}),style:n?{left:n}:void 0,children:a})})},916446:(e,t,n)=>{n.d(t,{b:()=>T,A:()=>k});var i=n(239976),r=n(105652),a=n(20002),s=n(796557),o=n(179189),l=n(854225),d=n(379141),c=n(445019),u=n(224542),m=n.n(u),p=n(499735),h=n(338630),f=n(400773),g=n(31201),x=n(61983),_=n(421564),y=n(215496),b=n(685144),v=n(85572),C=n(957457),E=n(498139),w=n(544392);function k({entrypoint:e,hideIfNoUpdates:t,initialTabOverride:n}){let i=(0,C.Xm)(),s=(0,c.md)(x.Lc),u=(0,c.md)((0,g.Xh)(i)),m=(0,v.c)(),p=(0,f.nf)({type:b.T,data:{entrypoint:e,initialTab:n??(m?_.Wv.RECOMMENDED:s?_.Wv.UPDATES:_.Wv.LIBRARIES)}}),h=(0,a.d4)(e=>e.modalShown?.type===b.T.type),[y,k]=(0,c.fp)(w.s0),T=r.useMemo(()=>s?(0,d.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):u?(0,d.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,d.t)("fullscreen.libraries_button.tooltip.no_updates"),[s,u]),j=s||u;(0,E.Pf)({showBadge:j,hasChangesToPull:s,disabled:!1});let S=!(t&&!s&&!u);return{expanded:h,label:T,icon:o.l,onClick:()=>{y!==l.Nfd.FILE&&k(l.Nfd.FILE),p()},shouldShow:S,badge:j}}function T({recordingKey:e,onSetKeyboardNavigationElement:t,entrypoint:n,hideIfNoUpdates:a,initialTabOverride:s,isLeftRail:o}){let{expanded:l,label:d,icon:c,onClick:u,shouldShow:h,badge:f}=k({entrypoint:n,hideIfNoUpdates:a,initialTabOverride:s});return h?(0,i.jsx)("div",{className:"library_modal_button--teamLibraryIcon--STDqu","data-onboarding-key":"library",children:(0,i.jsxs)(j,{"aria-label":d,"aria-expanded":l,ref:t,recordingKey:p.Pt(e,"teamLibrary"),onClick:u,"data-onboarding-key":y.D,"data-tooltip-show-right":o,size:o?"lg":"md",children:[r.createElement(c),f?(0,i.jsxs)("div",{className:m()("library_modal_button--badgeContainer--DvDMs",{"library_modal_button--badgeContainerLeftRail--w6IKd":o}),children:[(0,i.jsx)("span",{className:"library_modal_button--updatesBadge--vpIue","data-testid":"library-button-badge"})," "]}):null]})}):null}let j=(0,h.tf)(s.d)},63546:(e,t,n)=>{n.d(t,{I:()=>y});var i=n(239976),r=n(105652),a=n(328414),s=n(379141),o=n(270450),l=n(445019),d=n(585066),c=n(223487),u=n(581121),m=n(818350),p=n(359962),h=n(410274),f=n(824851),g=n(376176),x=n(391708),_=n(483468);function y({isLeftRail:e}){let t=(0,c._G)(),{state:n}=(0,m.RL)(u.JT.PUBLISH_LIBRARY_FOR_AI,g.Iq,{},(0,g._3)(t)),[y,b]=(0,l.fp)(x.OV),v=r.useCallback(()=>{(0,h.$I)({moduleToOpen:{type:"custom",module:(0,i.jsx)(_.u,{}),name:p.Sn.LIBRARY_CSS_EXTRACTION},trackingData:{source:"publishing_modal"}})},[]);if(r.useEffect(()=>{[m.qy.ERROR,m.qy.DONE].includes(n)&&y&&(b(!1),v())},[n,y,b,v]),!y)return null;let C={"data-tooltip-type":"text","data-tooltip-show-below":!e,"data-tooltip-show-right":e,onClick:v};return(0,f.zy)()?(0,i.jsx)(d.k,{size:e?"md":"sm",...C,"data-tooltip":(0,s.t)("figmake.ds_imports.extract_make_library_icon_tooltip")}):(0,o.kc)().bake_ds_import_l3a?(0,i.jsx)(a.s,{"data-tooltip":(0,s.t)("figmake.ds_imports.extract_library_icon_tooltip"),...C}):null}},406673:(e,t,n)=>{n.d(t,{W:()=>m,d:()=>u});var i=n(105652),r=n(445019),a=n(522568),s=n(393463),o=n(574220),l=n(223487),d=n(605985);let c=["dev","done","eng","experiment","not final","final","finalized","hand off","handoff","implementation","launch","m1","m2","m3","m4","milestone","mvp","proposal","qa","ready","ship","spec","\u2611\uFE0F","\u2705","\u2714\uFE0F","\u2747\uFE0F","\u2B50\uFE0F","\u{1F3C1}","\u{1F49A}","\u{1F4CC}","\u{1F680}","\u{1F6A2} ","\u{1F7E2}","\u{1F7E9}","\u{1F9EA}"];function u(e){let t=(e||"").toLowerCase(),n=new Set(c.filter(e=>t.includes(e)));return n.has("final")&&n.has("not final")&&(n.delete("final"),n.delete("not final")),[...n]}function m(){let e=(0,d.iZ)(),t=(0,l.tS)(),n=(0,r.md)(o.zN),c="loaded"!==n.status||!0===n.data||(0,s.sL)();return(0,i.useCallback)(({newTitle:n,nodeType:i})=>(function({fileKey:e,nodeType:t,newTitle:n,userId:i,notEligible:r}){if(r)return;let s=u(n);a.az.trackDefinedEvent("node_name.changed",{fileKey:e,nodeType:t,userId:i,didUseDevModeIndicator:s.length>0,indicator:s[0]||"",allIndicators:s.join(",")})})({nodeType:i,newTitle:n,fileKey:t||"",userId:e?.id||"",notEligible:c}),[e,t,c])}},797121:(e,t,n)=>{n.d(t,{m:()=>F});var i=n(239976),r=n(105652),a=n(943360),s=n(269751),o=n(379141),l=n(270450),d=n(224542),c=n.n(d),u=n(494432),m=n(622043),p=n(384795),h=n(687631),f=n(774946),g=n(563188),x=n(29161),_=n(499735),y=n(86742),b=n(259714),v=n(827081),C=n(836848),E=n(586468),w=n(983316),k=n(786711),T=n(413539),j=n(634566);function S(e){let t="left"===e.side?T.A:j.A,n="left"===e.side?`6px 0 0 ${e.color}`:`-6px 0 0 ${e.color}`;return(0,i.jsx)(p.P.div,{style:{opacity:e.opacity,position:"relative",top:e.offset,zIndex:1},"aria-hidden":!0,children:(0,i.jsx)("div",{style:{boxShadow:n,transition:`box-shadow ${k.Bn}s linear`},children:(0,i.jsx)(b.B,{svg:t,style:{fill:e.color,transition:`fill ${k.Bn}s linear`}})})})}function I(e){let{opacity:t,offset:n,color:r,children:a}=e;return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[(0,i.jsx)(S,{side:"left",opacity:t,offset:n,color:r}),(0,i.jsx)("span",{style:{zIndex:2},children:a}),(0,i.jsx)(S,{side:"right",opacity:t,offset:n,color:r})]})}function A(e){return(0,i.jsx)("div",{style:{borderRadius:"6px",overflow:"hidden"},children:e.children})}function N(e){let{color:t,docked:n,dockedStyle:r,dockedOffset:a,children:s}=e,o=(0,E.d)(1),l=(0,E.d)(0),d=!0===n?o:!1===n?l:n,c=(0,w.G)(d,[0,1],[0,1]),u=(0,w.G)(d,[0,1],["0px",`${a}px`]),m=(0,w.G)(d,[0,1],["6px","0px"]);switch(r){case"straight":return(0,i.jsx)(p.P.div,{style:{borderTopLeftRadius:m,borderTopRightRadius:m,borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",backgroundColor:t,overflow:"hidden"},children:s});case"inverted":return(0,i.jsx)(I,{opacity:c,offset:u,color:t,children:(0,i.jsx)(A,{children:s})});default:(0,C.xb)(r)}}var M=n(953548),R=n(270351);let P=({enabled:e})=>{let[t,n]=r.useState(0),i=r.useCallback(()=>{n(Date.now())},[]);return r.useEffect(()=>(e&&document.addEventListener("mousemove",i),()=>{document.removeEventListener("mousemove",i)}),[i,e]),t};function O({enabled:e,children:t}){let n=P({enabled:e}),a=(0,M.E)(),s=r.useCallback(()=>{a.start({opacity:1,transition:{duration:0}})},[a]),o=r.useCallback(()=>{a.start({opacity:0,transition:{duration:.5}})},[a]),l=(0,R.A)(o,5e3);return r.useEffect(()=>{s(),e?l():l.isPending()&&l.cancel()},[e,n,l,s]),(0,i.jsx)(p.P.div,{animate:a,children:t})}let D="multiplayer_bell--buttonContainer--2V2-A";var L=n(217169);function F(e){let{color:t,useSecondaryColor:n,message:d,renderKey:v,progressBar:C,progressBarDurationMs:E,autoHide:w,button:T,secondaryButton:j,showCloseButton:S,onCloseCallback:I,docked:A,dockedBorderInfo:M,isTabAccessible:R}=e,[P,F]=r.useState(!1),U=x.Xb?"multiplayer_bell--buttonMobile--DHPE8 multiplayer_bell--button--OW6Cy multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk multiplayer_bell--multiplayerTextMobile--u8Fms multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos14--QJNQC text--_fontBase--VaHfk":"multiplayer_bell--button--OW6Cy multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk",V=x.Xb?"multiplayer_bell--messageMobile--sWVDy multiplayer_bell--message--3oz6H multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk multiplayer_bell--multiplayerTextMobile--u8Fms multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos14--QJNQC text--_fontBase--VaHfk":"multiplayer_bell--message--3oz6H multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk",H=x.Xb?"multiplayer_bell--closeButtonMobile--1fMZo multiplayer_bell--closeButton--WddBI multiplayer_bell--multiplayerTextMobile--u8Fms multiplayer_bell--multiplayerText--h4DOL text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos14--QJNQC text--_fontBase--VaHfk":"multiplayer_bell--closeButton--WddBI",z=t??h.ol.MULTIPLAYER_GRAY,G=r.useMemo(()=>{if("brand"===t)return{"--multiplayerBellBackgroundColor":n?"var(--color-bg-brand-hover)":"var(--color-bg-brand)","--multiplayerBellTextColor":"var(--color-text-onbrand)","--multiplayerBellButtonBackgroundColor":"var(--color-bg-menu)","--multiplayerBellButtonTextColor":"var(--color-text-menu)","--multiplayerBellButtonHoverColor":"var(--color-bg-menu-secondary)","--multiplayerBellProgressBackgroundColor":"var(--color-bg-brand-hover)"};{let e=(0,h.H0)(z),t=(0,f.Hd)(e,-.15),i=(0,f.Hd)(e,-.55),r=(0,f.Hd)(e,-.8),a=e&&(0,h.GL)(e),s=i&&(0,h.GL)(i);return{"--multiplayerBellBackgroundColor":n&&t?(0,u.colorToString)(t):z,"--multiplayerBellTextColor":a,"--multiplayerBellButtonBackgroundColor":i?(0,u.colorToString)(i):void 0,"--multiplayerBellButtonTextColor":s,"--multiplayerBellButtonHoverColor":r?(0,u.colorToString)(r):void 0,"--multiplayerBellProgressBackgroundColor":t?(0,u.colorToString)(t):void 0}}},[z,t,n]),K=(0,r.useRef)(null),W=(0,r.useRef)(null),q=(0,g.wY)(K),X=(0,g.wY)(W),Y=q&&X?q.width+X.width:"auto";if(P)return null;let J=E>=k.BI?"multiplayer_bell--progressBarAnimationSlow--DR-6R":"multiplayer_bell--progressBarAnimationQuick--6H-20";return(0,i.jsx)(O,{enabled:w,children:(0,i.jsx)(N,{color:G["--multiplayerBellBackgroundColor"],docked:A||!1,dockedStyle:0===(M?.width||0)?"straight":"inverted",dockedOffset:M?.width||0,children:(0,i.jsx)(B,{isTabAccessible:R,children:(0,i.jsx)(m.N,{initial:!1,children:(0,i.jsxs)("div",{className:"multiplayer_bell--multiplayerBell--xf-na",style:{...G,transition:`background-color ${k.Bn}s linear`},children:[C&&(0,i.jsx)("div",{className:"multiplayer_bell--progressBarContainer--EXqpP",children:(0,i.jsx)("div",{className:c()("multiplayer_bell--progressBarFill--KT7SH",J),style:{animationDuration:`${E}ms`}})}),(0,i.jsx)("div",{className:"multiplayer_bell--messageAndButtonsContainer--QAyXx",children:(0,i.jsxs)(p.P.div,{animate:{width:Y},className:"multiplayer_bell--messageAndButtonsVariableWidthContainer--sQF-p",transition:{duration:k.Uj,type:"easeOut"},children:[(0,i.jsx)("div",{style:{width:"fit-content"},ref:K,"aria-live":"polite",children:d.onClick?(0,i.jsx)(a.E,{className:c()(V),recordingKey:_.Pt(e,"message"),onClick:d.onClick,children:(0,i.jsx)(s.T,{children:d.text})}):(0,i.jsx)(s.T,{className:c()(V),children:d.text})}),(0,i.jsx)("div",{style:{width:"fit-content"},ref:W,children:(0,i.jsxs)("div",{className:"multiplayer_bell--buttonsContainer--WkC-g",children:[(0,l.kc)().spotlight_zoom_override&&j&&(0,i.jsx)(p.P.div,{className:D,children:(0,i.jsx)(a.E,{className:c()(U),recordingKey:_.Pt(e,"button"),onClick:j.onClick,children:j.text})}),T&&(0,i.jsx)(p.P.div,{className:D,initial:{opacity:0},animate:{opacity:1},transition:{duration:k.Gy,delay:k.kS},children:(0,i.jsx)(a.E,{className:c()(U),recordingKey:_.Pt(e,"button"),onClick:T.onClick,children:T.text})}),S&&(0,i.jsx)("div",{className:D,children:(0,i.jsx)(y.GG,{className:c()(H),recordingKey:_.Pt(e,"closeButton"),onClick:()=>{I&&I(),F(!0)},"aria-label":(0,o.t)("collaboration.spotlight.bell.dismiss"),children:(0,i.jsx)(b.B,{svg:L.A})})})]})})]})})]},v)})})})})}function B({isTabAccessible:e,children:t}){return e?(0,i.jsx)(i.Fragment,{children:t}):(0,i.jsx)(v.m,{role:"region",children:t})}},461718:(e,t,n)=>{n.d(t,{X5:()=>en,Nz:()=>ee});var i=n(239976),r=n(105652),a=n(20002),s=n(836848),o=n(692376),l=n(379141),d=n(270450),c=n(445019),u=n(224542),m=n.n(u),p=n(622043),h=n(384795),f=n(522568),g=n(443389),x=n(943866),_=n(29161),y=n(125776),b=n(625429),v=n(253983),C=n(653120),E=n(566697),w=n(707470),k=n(1007),T=n(384203),j=n(223487),S=n(207436),I=n(331226),A=n(276571),N=n(797182),M=n(101679),R=n(656599);function P({count:e}){let t;return t=e<10?60:e<100?68:72,(0,i.jsx)("div",{style:{minWidth:t,display:"flex",justifyContent:"center"},children:(0,l.tx)("collaboration.spotlight.bell.presenter.follower_count",{followerCount:e})})}var O=n(586468),D=n(983316),L=n(797121),F=n(786711);let B=r.createContext({borderInfo:{width:0,color:"transparent"},style:{}});function U(e){let{borderInfo:t}=r.useContext(B),n=t.width,a=e.docked?0:8,s=(0,O.d)(a),o=(0,D.G)(s,[8,n,0],[0,0,1]),l=(0,D.G)(s,[8,0],[0,1]),d=0===t.width?l:o;return(0,i.jsx)(h.P.div,{className:m()({"positioned_multiplayer_bell--multiplayerBellContainer--9hwyg":!0,"positioned_multiplayer_bell--ghost--GjPvj":e.ghost}),animate:{top:a},style:{top:s},initial:!1,transition:{type:"easeout",duration:F.lo},children:(0,i.jsx)(L.m,{...e,docked:!!e.docked&&d,dockedBorderInfo:t,recordingKey:"multiplayerBell",isTabAccessible:e.isTabAccessible})},e.renderKey)}let V="multiplayer_viewport_overlay--viewportFrame--a6bPQ";var H=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(H||{});let z=(e,t)=>{let n=(0,k.ni)(),i=(0,v.Av)(),a=(0,w._o)(),s=(0,T.p8)("showUi"),o=(0,A._6)(),l=function({isUI3:e,prototypeHeaderHidden:t,showUi:n,style:i,toolbarHeight:r,editorBannerHeight:a}){return(2===i?t?0:r:e?_.Ay.isIpadNative||(0,_.FP)()&&n?(0,M.VA)():0:n||_.Ay.isIpadNative?r:0)+a}({isUI3:!("prototype"===o.view&&"slides"===o.file.editor_type),prototypeHeaderHidden:t,showUi:s,style:e,toolbarHeight:i,editorBannerHeight:a});return r.useMemo(()=>({left:n.x,top:l,width:n.width}),[n,l])},G=(e,t)=>{let n;let i=function(e){let t;let n=(0,k.ni)();(0,T.p8)("showUi");let i=0;(_.Ay.isIpad||(0,_.FP)())&&(i=(0,M.VA)());let a=n.y+i;switch(e){case 1:t=4;break;case 2:t=a;break;case 3:t=0;break;case 0:t=10}return r.useMemo(()=>({left:n.x,top:a,width:n.width-(0===e?10:0),height:n.height-t-i}),[n,e,a,t,i])}(t),a=0;switch(t){case 0:n={borderWidth:5},a=5;break;case 1:if((0,_.FP)()){n={};break}n={borderTopWidth:4},a=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},a=5;break;case 2:n={}}return r.useMemo(()=>({style:{...i,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${a}px`},borderInfo:{width:a,color:e}}),[e,i,n,a])};function K(e){let{children:t,prototypeHeaderHidden:n}=e,r=(0,A.z3)(),a=0;"prototype"===r?a=2:_.Xb&&(a=1);let s=z(a,n||!1),o=2===a?"multiplayer_viewport_overlay--prototypeView--ULGHe":void 0,l=2===a&&n?"multiplayer_viewport_overlay--delayTransition--1mNzG":void 0;return(0,i.jsx)("div",{className:m()("multiplayer_viewport_overlay--multiplayerBellOuterContainer--mOtdF",o,l),style:s,"data-testid":"multiplayer-bell-container",children:t})}function W(){let{style:e,borderInfo:t}=r.useContext(B);return e={...e,borderColor:t.color},(0,i.jsx)("div",{"data-testid":"viewport-frame",className:V,style:e})}function q(){let{style:e,borderInfo:t}=r.useContext(B);return e={...e,color:"brand"===t.color?"var(--color-bg-brand)":t.color,"--borderColorTransitionDurationSeconds":`${F.Bn}s`},(0,i.jsx)("div",{className:V,style:e})}function X(e){let{children:t,colorOverride:n,overlayStatus:r}=e,a=(0,S.$0)(),s=(0,S.dR)(),o=(0,S.Ww)(),l=(0,A._6)(),d=0;"prototype"===l.view?d=l.isPresenterView?3:2:_.Xb&&(d=1);let c=G((()=>{if(n)return n;if(!r)return s&&o?.sessionID===s?.sessionID?o?.color??"transparent":a?.color??"transparent";{let{self:e,others:t}=r;return"none"!==e?"brand":"following"===t&&"none"===e?a?.color??"transparent":"transparent"}})(),d);return(0,i.jsx)(B.Provider,{value:c,children:t})}var Y=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.NONE="none",e))(Y||{}),J=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(J||{});function Z(){return"prototype"!==(0,A.z3)()&&!(0,_.FP)()}function Q(e,t,n,i){let a=(0,x.ZC)(e),s=(0,x.ZC)(t),o=r.useRef(performance.now()),l=(0,N.u)();return r.useEffect(()=>{if("presenting"===e){let e=g.sn.tryStop("start_spotlight");e&&(0,f.sx)("start_spotlight",{elapsedMs:e,...l},{forwardToDatadog:!0})}else if("pending_auto_follow"===t){let e=g.sn.tryStop("join_spotlight");e&&(0,f.sx)("join_spotlight",{elapsedMs:e,...l},{forwardToDatadog:!0})}else if("following"===t){let e=g.sn.tryStop("start_following");e&&(0,f.sx)("start_following",{elapsedMs:e,...l},{forwardToDatadog:!0})}},[e,t,n,i,l]),(e!==a||t!==s)&&(o.current=performance.now()),{statusChangedAt:o.current}}function $(e){let{multiplayer:t,prototypeHeaderHidden:n,isTabAccessible:a=!1,hideOthersOverlayOverride:u=!1}=e,m=(0,S.Ww)(),f=(0,S.dR)(),g=(0,S.$0)(),x=(0,S.y)(),v=(0,j.q5)(),w=(0,c.md)(b.X),k=(0,I.T)(),T=(0,y.y7)(),N=(0,y.oJ)(),M=(0,y.$)(),[O,D]=r.useState(!1);r.useEffect(()=>{D(!1)},[f?.sessionID]),r.useEffect(()=>{g?.sessionID===f?.sessionID&&D(!1)},[g?.sessionID,f?.sessionID]);let{isAutoFollowPending:L,cancelAutoFollowCallback:B,completeAutoFollowCallback:V,observeCurrentPresenter:H,autoFollowType:z,autoFollowDelayMs:G}=(0,S.oW)({multiplayer:e.multiplayer}),{isWaitingForFirstFollower:W,stopPresenting:Y}=function(e){let[t,n]=r.useState(!1),i=e.followerCount,[a,s]=(0,c.fp)(b.Dv);0===i||t||n(!0);let l=(0,y.jA)(e)||a;(0,y.jA)(e)&&a&&s(!1),!l&&t&&n(!1);let d=l&&0===i&&!t,u=(0,I.T)(),m=(0,A.z3)(),p=r.useCallback(()=>{u(I.N.STOP),"prototype"===m?C.h()?.stopPresenting():o.h3O.stopPresenting()},[u,m]),h=r.useCallback(()=>!!d&&(p(),!0),[p,d]);return(0,E.O1)(h,E.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:d,stopPresenting:p}}(t),J=function(e){let{multiplayer:t,showingExplainer:n,isPendingPresenting:i}=e;return(0,y.jA)(t)||i?"presenting":n?"showing_explainer":(0,y.NB)(t)?"prompt_to_accept_nomination":"none"}({multiplayer:t,showingExplainer:(0,c.md)(b.ah),isPendingPresenting:(0,c.md)(b.Dv)}),$=function(e){let{multiplayer:t,isAutoFollowPending:n,presenterUser:i,suppressRejoinPrompt:r}=e;return n?"pending_auto_follow":(0,y.L3)(t)?"following":i&&!r?"prompt_to_rejoin":"none"}({multiplayer:t,isAutoFollowPending:L,presenterUser:f,suppressRejoinPrompt:O}),ee=r.useRef(t.allUsers.length);ee.current=t.allUsers.length;let{statusChangedAt:et}=Q(J,$,v,ee),[en,ei]=function(e,t){switch(e){case"presenting":if("following"===t||"prompt_to_rejoin"===t)return[e,"none"];return[e,t];case"prompt_to_accept_nomination":if("pending_auto_follow"===t)return["none",t];return[e,"none"];case"showing_explainer":case"none":return[e,t];default:(0,s.xb)(e)}}(J,$),er=ei;u&&"following"===er&&(er="none");let ea=r.useCallback(()=>{D(!0),B(),k(I.N.IGNORE)},[B,k]),es=z===S.D_.INITIAL,eo=r.useCallback(()=>"pending_auto_follow"===er&&!!L&&z===S.D_.INITIAL&&(B(),!0),[z,B,L,er]);(0,E.O1)(eo,E.KD.MULTIPLAYER_SPOTLIGHT);let el=Z(),ed="showing_explainer"===en,ec=(0,c.md)(R.N),eu="none"!==en,em="none"!==er,ep=["presenting","prompt_to_accept_nomination","showing_explainer"].includes(en)||["following"].includes(er),[eh,ef]=(0,c.fp)(b.uc);return r.useEffect(()=>{ep!==eh&&ef(ep)},[ep,eh,ef]),(0,i.jsxs)(X,{overlayStatus:{self:en,others:er},children:[(0,i.jsx)(p.N,{children:ep&&(0,i.jsx)(h.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.Bn},children:(0,i.jsx)(q,{})})}),(0,i.jsx)(p.N,{children:eu&&(0,i.jsx)(h.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.Bn},children:(0,i.jsx)(K,{prototypeHeaderHidden:n,children:(()=>{switch(en){case"presenting":if(null===m)return null;if(W){let e=(0,l.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),t=(0,l.t)("collaboration.spotlight.bell.presenter.cancel");return(0,i.jsx)(U,{color:"brand",message:{text:e},renderKey:`${m.sessionID}`,progressBar:!0,progressBarDurationMs:b.S$,autoHide:!1,button:{text:t,onClick:Y},isTabAccessible:a})}return(0,i.jsx)(U,{color:"brand",message:{text:(0,i.jsx)(P,{count:t.followerCount})},renderKey:`${m.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,l.t)("collaboration.spotlight.bell.presenter.stop"),onClick:Y},docked:el,isTabAccessible:a});case"prompt_to_accept_nomination":if(!m||!x)return null;return(0,i.jsx)(U,{autoHide:!1,button:{text:(0,l.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{T(t)}},color:"brand",isTabAccessible:a,message:{text:(0,l.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:x.name})},onCloseCallback:()=>{N(m.sessionID,t)},progressBar:!1,progressBarDurationMs:0,renderKey:`${m.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"showing_explainer":if(null===m)return null;let e=f?(0,l.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:f?.name}):(0,l.tx)("collaboration.spotlight.bell.explainer");return(0,i.jsx)(U,{autoHide:!1,button:null,color:"brand",docked:!1,isTabAccessible:a,message:{text:e},progressBar:!1,progressBarDurationMs:0,renderKey:`${t.sessionID}`,useSecondaryColor:!0});case"none":return null;default:(0,s.xb)(en)}})()})})}),(0,i.jsx)(p.N,{children:em&&(0,i.jsx)(h.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.Bn},children:(0,i.jsx)(K,{prototypeHeaderHidden:n,children:(()=>{switch(er){case"pending_auto_follow":{if(!f)return null;let e=f.name,n=es?{text:(0,l.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:V}:{text:(0,l.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},r=es?{text:(0,l.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ea}:null;if(!w){let e=(0,l.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:f.name}),n=(0,l.t)("collaboration.spotlight.bell.follower.follow"),r=()=>(0,y.KI)(H,t,"Spotlight Joined Manually in A11y mode ",et);return(0,i.jsx)(U,{autoHide:!1,button:{text:n,onClick:r},color:f?.color,ghost:ed,isTabAccessible:a,message:{text:e,onClick:r},onCloseCallback:()=>(0,y.KI)(()=>D(!0),t,"Spotlight Dismissed Manually in A11y mode",et),progressBar:!1,progressBarDurationMs:0,renderKey:`${f.sessionID}`,showCloseButton:!0,useSecondaryColor:!0})}return(0,i.jsx)(U,{color:f?.color,message:n,renderKey:`${f.sessionID}`,progressBar:es,progressBarDurationMs:G||0,autoHide:!1,button:r,ghost:ed,isTabAccessible:a})}case"following":{let e=t.observingSessionID===t.presenterSessionID;if(null===g)return null;let n=g?.name||"",r=e?(0,l.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,l.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),s={text:e?(0,l.t)("collaboration.spotlight.bell.stop_following"):(0,l.t)("collaboration.spotlight.bell.stop"),onClick:()=>M(t)};return(0,i.jsx)(U,{autoHide:!_.Xb,button:s,color:g?.color,docked:el,ghost:ed,isTabAccessible:a,message:{text:r},progressBar:!1,progressBarDurationMs:0,renderKey:`${t.observingSessionID}`,secondaryButton:(0,d.kc)().spotlight_zoom_override&&ec&&1!==ec?{text:(0,l.t)("collaboration.spotlight.bell.reset_zoom"),onClick:()=>{c.zl.set(R.N,1)}}:null})}case"prompt_to_rejoin":let e=()=>(0,y.KI)(H,t,"Spotlight Rejoined",et);if(null!==g||null===f)return null;let n=(0,l.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:f.name}),r=(0,l.t)("collaboration.spotlight.bell.follower.follow");return(0,i.jsx)(U,{autoHide:!1,button:{text:r,onClick:e},color:f?.color,ghost:ed,isTabAccessible:a,message:{text:n,onClick:e},onCloseCallback:()=>(0,y.KI)(()=>D(!0),t,"Spotlight Rejoin Dismissed",et),progressBar:!1,progressBarDurationMs:0,renderKey:`${f.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"none":return null;default:(0,s.xb)(er)}})()})})})]})}function ee({prototypeHeaderHidden:e,isTabAccessible:t=!1,hideOthersOverlayOverride:n=!1}){let r=(0,a.d4)(({multiplayer:e})=>e),s=(0,S.HG)(),o=(0,S.By)(),l=-1!==r.observingSessionID;return((0,S.VA)({multiplayer:r}),(0,S.Pi)({multiplayer:r}),o)?null:s?(0,i.jsx)($,{multiplayer:r,prototypeHeaderHidden:e,isTabAccessible:t,hideOthersOverlayOverride:n}):l?(0,i.jsx)(et,{prototypeHeaderHidden:e,isTabAccessible:t}):null}function et(e){let{prototypeHeaderHidden:t,isTabAccessible:n=!1}=e,s=(0,S.$0)(),o=(0,j.q5)(),d=(0,a.d4)(e=>e.multiplayer.allUsers.length),c=r.useRef(d);c.current=d,Q("none","following",o,c);let u=`${s?.sessionID}`,m=r.useMemo(()=>{let e=s?.name||"";return{text:(0,l.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[s]),p=Z();return null===s?null:(0,i.jsxs)(X,{children:[(0,i.jsx)(W,{}),(0,i.jsx)(K,{prototypeHeaderHidden:t,children:(0,i.jsx)(U,{color:s?.color,message:m,renderKey:u,autoHide:!_.Xb,progressBar:!1,progressBarDurationMs:0,button:null,docked:p,isTabAccessible:n})})]})}function en(){return(0,i.jsx)(X,{colorOverride:"var(--color-border-brand-strong)",children:(0,i.jsx)(W,{})})}},786711:(e,t,n)=>{n.d(t,{BI:()=>l,Bn:()=>o,Gy:()=>a,Uj:()=>r,kS:()=>s,lo:()=>i});let i=.2,r=.2,a=.05,s=.2-.05,o=.1,l=3e3},340328:(e,t,n)=>{n.d(t,{mZ:()=>g,ix:()=>y,AS:()=>b});var i=n(239976),r=n(105652),a=n(20002),s=n(854225),o=n(379141),l=n(40297),d=n(393463),c=n(75962),u=n(958344),m=n(94360),p=n(705456),h=n(526865);let f="fake_cursor--hideCursor--4o4uF";var g=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(g||{});let x={[s.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[s.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[s.NLJ.DROPPER_COLOR]:"3a904092ca690b41c06a24b8e2dddb724a992c94"},_=(0,l.hG)(h.xEX);function y(e){var t;let{position:n,currentToolForCursor:s,children:o}=e;t=!e.hidden,r.useEffect(()=>(t?document.body.classList.add(f):document.body.classList.remove(f),()=>document.body.classList.remove(f)),[t]);let l=(0,a.d4)(e=>e.downtime.status===p.A.Ongoing||e.downtime.status===p.A.Imminent||e.showingDowntimeBanner)?_:0,d=n.x,c=n.y-l,u={willChange:"transform",transform:`translate3D(${d}px, ${c}px, 0)`,opacity:e.hidden?0:1};return(0,i.jsxs)("div",{style:u,className:"fake_cursor--container---GsiR",children:[(0,i.jsx)(C,{currentToolForCursor:s}),o]})}function b(e){let t=(0,u.x)({subscribeToUpdates_EXPENSIVE:!0}),n=(0,m.K)();return t?(0,i.jsx)(y,{...e,position:t,hidden:!n}):null}let v=e=>{switch(e){case s.NLJ.SELECT:return(0,o.t)("fake_cursor.select_cursor");case s.NLJ.HAND:return(0,o.t)("fake_cursor.hand_cursor");case s.NLJ.DROPPER_COLOR:return(0,o.t)("fake_cursor.eyedropper_cursor");default:return(0,o.t)("fake_cursor.cursor")}};function C({currentToolForCursor:e}){let t="fake_cursor--handCursor--qoR3S fake_cursor--cursor--wRdsw";e===s.NLJ.SELECT?t="fake_cursor--selectCursorUI3--G5xXn fake_cursor--cursor--wRdsw":e===s.NLJ.DROPPER_COLOR&&(t="fake_cursor--eyedropperCursor--F4Qrr fake_cursor--cursor--wRdsw");let n=x[e];return n?(0,i.jsx)(c.oW,{className:t,src:(0,d.ck)(n),alt:v(e)}):null}},211846:(e,t,n)=>{n.d(t,{k_:()=>tk,yL:()=>tA});var i={};n.r(i),n.d(i,{GLARE_ANIMATION:()=>eY,GRAY_BACKGROUND:()=>eX,NONE:()=>eZ,ORANGE_GRADIENT:()=>eq,PINK_GRADIENT:()=>eK,animateBg:()=>eW,glareAnimation:()=>eJ});var r=n(239976),a=n(105652),s=n(20002),o=n(731112),l=n(692376),d=n(854225),c=n(270450),u=n(847923),m=n(224542),p=n.n(m),h=n(443389),f=n(687631),g=n(959197),x=n(806130),_=n(151370),y=n(562418),b=n(958344),v=n(793123),C=n(105825),E=n(1007),w=n(135251),k=n(780172),T=n(384203),j=n(207436),S=n(157750),I=n(895414),A=n(393463),N=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(N||{});let M=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]),R=new Map([[(0,A.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,A.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,A.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,A.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,A.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,A.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,A.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,A.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,A.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,A.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);var P=(e=>(e[e.Standard=0]="Standard",e))(P||{});let O=new Map;R.forEach((e,t)=>{!function(e,t,n){e.forEach(e=>n.set(e,t))}(e,t,O)});let D=(e,t)=>{let n=t.get(e);n&&w.R9.sendReaction(n)};var L=n(223487),F=n(920443),B=n(380799),U=n(297613);let V=a.memo(function({sessionId:e}){let t=(0,L.tS)();return(0,s.d4)(e=>t&&!!e.voice.activeCall[t])?(0,r.jsx)(H,{sessionId:e}):null});function H({sessionId:e}){let t=(0,L.tS)(),{userIdsInCall:n}=(0,B.W5)(t),{voiceUsersInMultiplayer:i}=(0,B.Eo)(n,t),s=a.useMemo(()=>i.find(t=>t.sessionID===e),[i,e]);return s&&t?(0,r.jsx)(z,{color:s.color,userId:s.userID}):null}let z=a.memo(function({userId:e,color:t}){let n=(0,F.qr)();return n?(0,r.jsx)(W,{userId:e,color:t,voiceCall:n}):null}),G={},K={},W=a.memo(function({userId:e,voiceCall:t,color:n}){return a.useEffect(()=>{let{unsubscribe:n}=(0,U.Em)(e,t,t=>{if(G[e]){K[e].style.visibility=t?.isMuted?"hidden":"visible";let n=.9*Math.pow(t?.volumeLevel||0,1/3)+.1;G[e].style.transform=`scale(${n})`}});return()=>{delete G[e],n()}},[e,t]),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{ref:t=>G[e]=t,className:"voice_cursor_pulse--backgroundPulse--pWqgZ",style:{backgroundColor:n}}),(0,r.jsx)("div",{ref:t=>K[e]=t,className:"voice_cursor_pulse--pulse--ZLpqG",style:{boxShadow:`0 0 0 1px ${n}`}})]})});var q=n(445019),X=n(537303),Y=n(82131),J=n(732838);class Z{constructor(){this.type="Entity",this.id=Math.random().toString(),this.position={x:0,y:0},this.rotation=0,this.scale=1,this.age=0,this.lifetime=1,this.sortOrder=0,this.customData={}}update(e){return this.age+=e,this.age<=this.lifetime}}class Q{constructor(){this._entities=[],this._entitiesToAdd=[],this.lastUpdateTime=0,this.addEntity=e=>{this._entitiesToAdd.push(e)}}getDeltaTime(){let e=performance.now(),t=e-this.lastUpdateTime;return this.lastUpdateTime=e,t/1e3}update(e){let t="number"==typeof e?e:this.getDeltaTime();this._entities=this._entities.filter(e=>e.update(t)),this._entitiesToAdd.length&&(this._entities=this._entities.concat(this._entitiesToAdd).sort((e,t)=>e.sortOrder-t.sortOrder),this._entitiesToAdd=[])}getEntities(){return this._entities}}class $ extends Z{constructor(){super(),this.type="Particle",this.velocity={x:0,y:0},this.kick={x:0,y:0},this.kickDecay=1,this.gravity={x:0,y:0}}static fastVectorAddScaled(e,t,n){e.x+=t.x*n,e.y+=t.y*n}update(e){return $.fastVectorAddScaled(this.position,this.velocity,e),$.fastVectorAddScaled(this.position,this.kick,e),$.fastVectorAddScaled(this.kick,this.kick,Math.pow(this.kickDecay,e/.016)-1),$.fastVectorAddScaled(this.velocity,this.gravity,e),super.update(e)}}class ee extends Q{constructor(){super(...arguments),this.MAX_PARTICLES=512,this.addParticle=e=>{this.getParticles().length<this.MAX_PARTICLES&&this.addEntity(e)}}getParticles(){return this.getEntities().filter(e=>e instanceof $)}}var et=n(102462),en=n(520432),ei=n(723850),er=n(212198),ea=n(963245);let es=class e{constructor(){this.previouslyCollidingCursors=new Set}updateAndCheckCollisions(t){let n=new Set,i=[];for(let r=0;r<t.length;r++){let a=t[r],s=e.closestNonSelfCursor(a,t.slice(r+1));if(s&&e.distanceBetween(a.mouse?.canvasSpacePosition,s.mouse?.canvasSpacePosition)<e.CURSOR_COLLISION_RADIUS){let t=e.makeCursorProximityKey(a,s);this.previouslyCollidingCursors.has(t)||i.push([a,s]),n.add(t)}}return this.previouslyCollidingCursors=n,i}static makeCursorProximityKey(e,t){return[e.sessionId,t.sessionId].sort().join("+")}static distanceBetween(e,t){if(!e||!t)return 1/0;let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}static computeMidpoint(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static closestNonSelfCursor(t,n){let i=1/0,r=null;return n.forEach(n=>{if(n.sessionId!==t.sessionId){let a=e.distanceBetween(t.mouse?.canvasSpacePosition,n.mouse?.canvasSpacePosition);a<i&&(i=a,r=n)}}),r}};es.CURSOR_COLLISION_RADIUS=80;let eo=(0,q.eU)(!1);class el extends Z{constructor(e){super(),this.position=e,this.type="BubblePopEntity",this.sortOrder=-2}}class ed extends Z{constructor(e){super(),this.position=e,this.type="SparkleEntity"}}class ec extends Z{constructor(e){super(),this.position=e,this.type="StarParticle",this.scale=(1+Math.random())*.3,this.sortOrder=-.5,this.customData.emissionAngle=Math.random()*Math.PI*2}}class eu extends Z{constructor(e){super(),this.timedTriggers=e}update(e){return this.age+=e,this.timedTriggers=this.timedTriggers.filter(e=>!(this.age>=e.time)||(e.event(),!1)),this.timedTriggers.length>0}}let em=class e extends Z{constructor({startingRelativePosition:t,startingRotation:n,position:i,viewportZoomScale:r,cursorOnRightForWindup:a,cursorOnRightForCollision:s,sessionId:o,getUserCursorTransform:l}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=i,this.viewportZoomScale=r,this.cursorOnRightForWindup=a,this.cursorOnRightForCollision=s;let d={transform:`translate(${t.x}px, ${t.y}px) rotate(${n}rad)`},c={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},u={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},m=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${u.transform}`})),p=1e3/60;this.customData={sessionId:o,animations:[{keyframes:[d,c],timing:{duration:12*p,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[c,u],timing:{delay:12*p,duration:4*p,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:m,timing:{delay:16*p,duration:4*p,easing:`steps(${m.length})`}},{keyframes:[u,u],timing:{delay:20*p,duration:18*p}}],getReturnToCursorTransform:t=>{let n=(this.cursorOnRightForCollision?1:-1)*10,i=l(),a=(i.position.x-this.position.x)*r,s=(i.position.y-this.position.y)*r,o=i.rotation;return`translate(${e.lerp(n,a,t)}px,${e.lerp(0,s,t)}px) rotate(${e.lerp(0,o,t)}rad) scale(${e.lerp(2,1,t)})`}}}static lerp(e,t,n){return e*(1-n)+t*n}};em.RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];class ep{constructor(){this.lastCursorLocations={},this.CANVAS_SPACE_SPEED_THRESHOLD=2,this.cursorHandsOnRight=new Set}getHandsOnRight(){return this.cursorHandsOnRight}updateSingleCursor(e,t,n){let i=this.lastCursorLocations[n];i&&(t.x>i.x+this.CANVAS_SPACE_SPEED_THRESHOLD&&this.cursorHandsOnRight.add(n),t.x<i.x-this.CANVAS_SPACE_SPEED_THRESHOLD&&this.cursorHandsOnRight.delete(n)),e[n]=t}updateCursors(e,t,n,i){let r={};for(let n of e)t.toString()!==n.sessionId&&this.updateSingleCursor(r,n.mouse.canvasSpacePosition,n.sessionId);for(let e of(n&&this.updateSingleCursor(r,{x:i.x,y:i.y},t.toString()),this.lastCursorLocations=r,this.cursorHandsOnRight.keys()))r[e]||this.cursorHandsOnRight.delete(e)}}let eh=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let t=this.subscriptions.indexOf(e);t>=0&&this.subscriptions.splice(t,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let t of(this.wiggleMode=e,this.subscriptions))t(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),t=e-this.lastUpdateTime;return this.lastUpdateTime=e,t/1e3}update(e,t){e?this.setMousePositionAndUpdate(e,t):this.updateWiggleMeter(t)}setMousePositionAndUpdate(t,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let i="number"==typeof n?n:this.getDeltaTime();if(i<=0)return;this.mouseX=t.x,this.mouseY=t.y;let r=1,a=(this.mouseX-this.lastMouseX)/i,s=(this.mouseY-this.lastMouseY)/i;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let o=Math.sqrt(a*a+s*s);if(o>0){let e=a/o,t=s/o;r=e*this.lastDirectionX+t*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=t}let l=i/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=i/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+l;this.speedFactor+=Math.min(o*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-l),this.speedFactor=Math.min(1,this.speedFactor);let c=this.speedFactor>=.8,u=c&&r<0,m=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);c&&u&&m&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-i/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=i/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),c&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(i)}updateWiggleMeter(t){if((t="number"==typeof t?t:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=t/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function ef(){return{cursorWiggleDetector:new eh,cursorEntitySystem:new ee,cursorCollisionDetector:new es,cursorKinematics:new ep}}eh.WIGGLE_MODE_DEACTIVATION_TIME=6,eh.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,eh.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,eh.WIGGLE_MODE_MOUSE_RESET_TIME=.6,eh.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,eh.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,eh.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,eh.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,eh.WIGGLE_MODE_REPLENISH_SHAKES=3.5,eh.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,eh.WIGGLE_MODE_SHAKE_RESET_TIME=.5,eh.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3;let eg=(0,X.xx)(function(e){return e.reduce((e,t)=>(e[t.sessionID]=t,e),{})});function ex(e,t,n,i,r){let a=(t.getHandsOnRight().has(n)?1:-1)*(Math.PI/4),s=32/i,o={x:e.x+s*Math.sin(a),y:e.y-s*Math.cos(a)};return r||(o.x+=16/i,o.y+=16/i),{position:o,rotation:a}}function e_(e,t){return!!e.find(e=>"AnimatedCursorEntity"===e.type&&e.customData.sessionId===t)}function ey(e,t,n,i,r){return!("editor"!==e.deviceName||t?.mouse?.canvasSpacePosition==null||isNaN(t?.mouse?.canvasSpacePosition.x)||t.mouse.pageId!==n||(-1===t.lastMouseMoveMs||window.performance.now()-t.lastMouseMoveMs>6e4)&&i!==e.sessionID)&&e.sessionID!==r}function eb(){let e=(0,y.lg)(),t=(0,k.XM)();return"whiteboard"===e&&!t}var ev=n(384795),eC=n(622043),eE=n(398518);function ew({viewportInfo:e,bb:t}){let{zoomScale:n}=e,i=t.w*n,a=t.h*n,s=(n-1)*t.x,o=(n-1)*t.y,l={transform:`translate(${t.x+s}px, ${t.y+o}px)`,width:`${i}px`,height:`${a}px`};return(0,r.jsx)(ev.P.div,{className:"ai_animations--aiSelectionBox--LSzuy",style:l,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1}})}function ek({viewportInfo:e}){let t=(0,q.md)(eE.EO),n=(0,q.md)(eE.aG);return(0,r.jsx)(eC.N,{children:n&&t.map(t=>(0,r.jsx)(ew,{viewportInfo:e,bb:t.boundingBox},t.guid))})}function eT(e,t){let n=3*e,i=3*e,r=1.7999999999999998*e,a=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){a.push(ej(0,0,0));continue}let t=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*i)-i/2,o=Math.floor(Math.random()*r)-r/2;a.push(ej(t,s,o))}return new Animation(new KeyframeEffect(t,a,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function ej(e,t,n){return{transform:`translate(${e}px, ${t}px) rotate(${n}deg)`}}function eS(e){return!!e.length&&e.some(e=>"running"===e.playState)}function eI(e){let{content:t,children:n}=e,[i,s]=(0,a.useState)(0),o=(0,a.useRef)(0),l=(0,a.useRef)([]),d=a.useRef(null),[c,u]=(0,a.useState)([]),m=(0,ei.am)(),p=(0,a.useMemo)(()=>0===t.length?0:((t.match(/\!+$/g)||[])[0]||"").length,[t]),h=(0,a.useCallback)(e=>{clearTimeout(o.current),o.current=setTimeout(()=>{s(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,a.useEffect)(()=>{s(p),h(1e3)},[p,h]),(0,a.useEffect)(()=>{if(!d.current)return;i>1&&!l.current.length&&(l.current=[eT(1,d.current),eT(1.5,d.current),eT(2,d.current),eT(2.5,d.current),eT(3,d.current)]);let e=eS(l.current);if(i>1){let e=Math.min(i-1-1,l.current.length-1);l.current.forEach((t,n)=>{n===e?t.play():t.cancel()})}else l.current.forEach(e=>e?.cancel());let t=eS(l.current);!e&&t&&m("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[i,m]),(0,r.jsx)("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":c,ref:d,children:n})}let eA={HANDLE_KEYDOWN:"HANDLE_KEYDOWN",HANDLE_INPUT:"HANDLE_INPUT",STOP_CHATTING:"STOP_CHATTING",START_FADING_INACTIVE_CHAT:"START_FADING_INACTIVE_CHAT",STOP_FADING_INACTIVE_CHAT:"STOP_FADING_INACTIVE_CHAT",HANDLE_EMOTE_ANIMATION_END:"HANDLE_EMOTE_ANIMATION_END"},eN={currentUserInput:"",previousLine:"",fadingOutText:"",isWidthLocked:!1,isShowingEmptyNewline:!1,inputIsEmpty:!0,currentEmoteBackground:N.NONE,width:0,isFigJam:!1,isFadingInactiveChat:!1,shouldClose:!1,hasTypedAnything:!1},eM=e=>{let t=document.createElement("canvas").getContext("2d");if(!t)return e;t.font="14px Inter, sans-serif";let n=Math.max(t.measureText(e.currentUserInput).width,t.measureText(e.previousLine).width);return{...e,width:n}};function eR(e,t){var n;let i=e.toLocaleLowerCase(),r=!(1===(n=i.charAt(i.length-t.length-1)).length&&/[A-Za-z]/.test(n));return i.endsWith(t)&&r}let eP=(e,t,n)=>{for(let t of O.keys())eR(e,t)&&(!function(e,t){D(e,t),D(e,t),D(e,t),D(e,t),D(e,t),D(e,t)}(t,O),n("cursor_chat_emote_triggered",{keyword:t}))},eO=e=>{for(let[t,n]of M)if(n&&eR(e,t))return{key:t,background:n}};function eD(e,t){switch(t.type){case eA.HANDLE_INPUT:{let n={...e},{value:i}=t.payload;if(e.isShowingEmptyNewline&&(n.isShowingEmptyNewline=!1),i.length>n.currentUserInput.length&&n.isFigJam){let{key:e,background:r}=eO(i)??{};r&&(n.currentEmoteBackground=r,t.payload.trackEvent("cursor_chat_background_effect_triggered",{keyword:e})),eP(i,P.Standard,t.payload.trackEvent)}return n.fadingOutText=n.previousLine,n.previousLine="",n.currentUserInput=i,e.hasTypedAnything||t.payload.trackEvent("cursor_chat_typed_something"),n.hasTypedAnything=!0,n.inputIsEmpty=0===n.currentUserInput.length&&0===n.previousLine.length,eM(n)}case eA.HANDLE_KEYDOWN:{let n=t.payload;if("Enter"===n.key){if(!1===e.hasTypedAnything)return e;let t={...e};return t.isShowingEmptyNewline=!0,t.inputIsEmpty=!1,t.isWidthLocked=!0,t.fadingOutText=t.previousLine,t.previousLine=t.currentUserInput,t.currentUserInput="",eM(t)}if("Escape"===n.key)return{...e,shouldClose:!0};return e}case eA.HANDLE_EMOTE_ANIMATION_END:{let t={...e};return t.isWidthLocked=!1,t.currentEmoteBackground=N.NONE,eM(t)}case eA.STOP_CHATTING:return{...e,shouldClose:!0};case eA.START_FADING_INACTIVE_CHAT:return{...e,isFadingInactiveChat:!0};case eA.STOP_FADING_INACTIVE_CHAT:return{...e,isFadingInactiveChat:!1};default:return e}}var eL=n(94360),eF=n(379141),eB=n(836038),eU=n(876922),eV=n(837033),eH=n(163974);let ez=(e,t,n)=>{a.useEffect(()=>{if(e.current){if(t){e.current.style.width="initial";return}e.current.style.width=`${n+35}px`}},[n,e,t])},eG=(e,t,n,i)=>{a.useEffect(()=>{n.current&&i.current&&(n.current.value=e,i.current.setAttribute("data-value",e))},[e,t,n,i])},eK="cursor_chat_emotes--PINK_GRADIENT--K3Lnp",eW="cursor_chat_emotes--animateBg--ZQ9F-",eq="cursor_chat_emotes--ORANGE_GRADIENT--06lm9",eX="cursor_chat_emotes--GRAY_BACKGROUND--4mBd0",eY="cursor_chat_emotes--GLARE_ANIMATION--lbnLI",eJ="cursor_chat_emotes--glareAnimation--KA33s",eZ="cursor_chat_emotes--NONE--h-9qd";function eQ(e){let t;let{color:n}=e,o="whiteboard"===(0,y.lg)(),d=a.useRef(null),c=a.useRef(null),u=(0,s.wA)(),m=(0,ei.am)(),[{currentUserInput:p,previousLine:h,fadingOutText:g,isFadingInactiveChat:x,isShowingEmptyNewline:_,inputIsEmpty:b,currentEmoteBackground:v,width:C,shouldClose:E,hasTypedAnything:w},k]=a.useReducer(eD,{...eN,isFigJam:o});ez(d,b,C),eG(p,h,d,c),function(e,t,n,i){a.useEffect(()=>{l.h3O?.sendChatMessage(e,t)},[e,t]);let r=a.useCallback(()=>{l.h3O?.sendChatMessage("",""),i(eU.Ho())},[i]);a.useEffect(()=>{n&&r()},[n,r]),a.useEffect(()=>()=>r(),[r])}(p,h,E,u);let T=a.useCallback(()=>{u(eU.Ho()),k({type:eA.STOP_CHATTING})},[u,k]);a.useEffect(()=>{k({type:eA.STOP_FADING_INACTIVE_CHAT});let e=setTimeout(()=>{k({type:eA.START_FADING_INACTIVE_CHAT})},5e3),t=setTimeout(()=>{k({type:eA.STOP_FADING_INACTIVE_CHAT}),T()},8e3);return()=>{clearTimeout(e),clearTimeout(t)}},[p,k,T]),a.useEffect(()=>{let e=e=>{k({type:eA.HANDLE_KEYDOWN,payload:e})},t=()=>{document.removeEventListener("keydown",e)},n=()=>{document.addEventListener("keydown",e)};return d.current&&(window.focus(),d.current.focus({preventScroll:!0})),document.addEventListener("keydown",e),document.addEventListener("compositionstart",t),document.addEventListener("compositionend",n),()=>{document.removeEventListener("keydown",e),document.removeEventListener("compositionstart",t),document.removeEventListener("compositionend",n)}},[k,d]);let j=a.useCallback(e=>{if((0,eV.n3)(e.relatedTarget,(0,eV.Tc)(eH.oP))){d.current?.focus();return}T()},[T]),S=(0,f.GL)(n),I=S===f.e3?"chat_input--lightPlaceholder---QE4-":"chat_input--darkPlaceholder--NbT1B",A=(0,eF.t)("whiteboard.cursor_chat.say_something");switch(eB.Gq()?.getPrimaryLocale(!1)){case"ja":t=18;break;case"ko-kr":t=13;break;default:t=A.length}let N=(0,r.jsx)("div",{className:`chat_input--mask--9usek ${x?"chat_input--fading--bnzcG":""} `,style:{boxShadow:`2px 4px 8px ${n}40`},children:(0,r.jsxs)("label",{ref:c,className:"chat_input--inputSizer--MPJKU",children:[(0,r.jsx)("input",{ref:d,className:`chat_input--input--77rAg ${I} ${_?"chat_input--expanded---I6Nz":""}`,dir:"auto",maxLength:50,onBlur:j,onChange:e=>k({type:eA.HANDLE_INPUT,payload:{value:e.currentTarget.value,trackEvent:m}}),placeholder:w?"":A,size:w?1:t,spellCheck:!1,style:{color:S,backgroundColor:"transparent"},type:"text",value:p}),(0,r.jsx)("div",{className:`chat_input--chatBackground--E2eF5 ${i[v]}`,style:{background:n,color:S},onAnimationEnd:()=>k({type:eA.HANDLE_EMOTE_ANIMATION_END})}),(0,r.jsx)("div",{style:{color:S},className:"chat_input--previousChat---KHTr",children:h}),(0,r.jsx)("div",{style:{color:S},className:"chat_input--fadingOutLine--T-iph chat_input--previousChat---KHTr chat_input--animated--QHbnr",children:g},g)]})});return o?(0,r.jsx)(eI,{content:p,children:N}):N}var e$=n(462285),e0=n(269845);function e1(){let e=(0,o.G)(),t=(0,eL.K)(),n=(0,s.d4)(({multiplayer:{allUsers:e}})=>e[0]?.color||e$.w3),i=e.enhancedContrast?(0,f.En)(n):n,a=e0.Rt;return(0,r.jsx)("div",{className:a,style:{opacity:t?1:0},children:(0,r.jsx)(eQ,{color:i})})}var e2=n(85219),e5=n(836848),e4=n(799635),e3=n(29161),e6=n(340328);let e7="848484",e9={"007BE5":"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","00B5CE":"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","0FA958":"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","14AE5C":"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","19A0FB":"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPEVycm9yPjxDb2RlPkFjY2Vzc0RlbmllZDwvQ29kZT48TWVzc2FnZT5BY2Nlc3MgRGVuaWVkPC9NZXNzYWdlPjxSZXF1ZXN0SWQ+OTNWUldYM0I5OUZSNTZBWjwvUmVxdWVzdElkPjxIb3N0SWQ+bzRwUThldDB3N0pWWTZWT2p2dkM3cUM3UlVkaTNTaVh0enZUVlpvUlo5WHFSR1BHMnBhMzVkWlRDWlY2cjJwUGczbmxFVFdYWjhnPTwvSG9zdElkPjwvRXJyb3I+","1BC47D":"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","5551FF":"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",667799:"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",848484:"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","907CFF":"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","9747FF":"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",D27C2C:"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",EBEBEB:"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",EE46D3:"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",EF5533:"iVBORw0KGgoAAAANSUhEUgAAAEIAAABICAYAAABCzyOOAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjASURBVHgB7VpdbBTXFb7r3bXXu167dm1TWzh2VYempiqlThX1qc4LQi24T1ZrpKotD0V1wgOqqFQlUt2HgopaHkiUBEuQRAYjfsSLHUsoghgFkiiJg1EiKwkgMGAT87/2er0/szP5vjv3bsaOHXAgY9aaTzqandn5u9895zvn3jtCePDgwYMHDx48ePDgwYMHDx48ePDgwYMHDx48ePBwP7Asy4eNTzwiKBDuwqeeKZ/b2dmpyfCRGJhYLLjSI2wkoJ+nzVJbEmKqrWZi8Rj5juFDI+kFAVgwk8nsOnv27I/xOwQrampqKuTxtrY2/6MWMg8Nyt3ZMD+MDQ4lk8kXcdxKp9Pdx44d+ymORZYvX16MbREsoEhbcmRoXQgK2wMi4+PjHZZCNpsduXnz5j+/B+C/ElixOjcgHHqS91Cu7lfuH4aVdXd3/8KaBcMwLp87d+6P/B8WETZpJER6h7pP/oINYOwLOyzYwApYLTwhRgISr/7Pyo6P5QiJx+MHDh069HOcU1pTU0PiZLjwHvkeMlof2CC6fiWsbnJy8j3Z8B1/t+60NVvTh3ZbZnwiR8jt27f/i/PKYVFhhwuJ1GTkLSGaCDaqClY/Ojr6mvYIEkGLday3Um/1zgiXK1euPFtWVkZCnOEiBfVhZhi3hMhymHx5EPEZ//A3rMidZN4YE4mXOkW8c5Mwr18Tfr+/DtnkhatXr76McHlc2GQGGxsbpWewONFZ6UE1xFVFXrZsGd/aDIVC1pEjRz7kscDK5q+dZwwPioln14vp1/8vCSkpKfk9NOIMsstz27dvrz5//rysO3g5uKC3aRK+NRluxZmvpaXFPzAwUFhaWhqamJigVpTA9d9Dr0djf35aWInJOS8sqKoVoba/isKWdXIfInvl2rVrO+rq6vZhN8NDMFNtGVGySlWV7H3DFY9wjCEskMAd+fIorMZ40P/DFfNeq8Nl4pnWGeGSSqVO9fT08EIZLrAAyGa4+H0LZUG4GBrwBquhoUGGhrC1wrx169YH/M9fv+Ke15MQhgtJISGFhYUr29vbP0L2eeXo0aONlZWVhQgZXYgxXHRmuS9S3NQIKxwOSxIikYj0iDt37tge0XBvIjTSA30i/u9NItV/QO5DP/7Q2trae+bMmT+BlFBVVdUMMtQI957tdDMX60EXhY51QcmuXbuaN2/efFj2Nlx/wTeEfoSf+ZcINNmCS/1Advndhg0bLgpbPwxhe6D2Qm1zvpybsHTmoPX394/Kl0CDfOGoWChIIFOtDhfqB8MF1emMdCsc3jFfmnXTI2SFCaEL0oUx8oxMT0+XQjDfLCoqqp3cukFkRz4X3xa+SFQU/aZdZhiC3oHq9JXq6uqXsJtB7WFAQ+ghc3qGax7BzAFVFyiOrFgsxpkaEwQYeNl564kF3X9qUiQPd8kQo47QO6AX/wEhZy9fvtwKEugVuZpjtme4KpZ4Md0TZiKRyCIFmtevX/9Uvkh1rXgQMLSCv2wRRb9tz2mGvG9BwWOoOXqmpqaeQ9bKjVFmZ9iAcAnqwRaG49aNGzdMGvbN4eHhz1atWiUCP1m4R9CL2GhpszwKnjAJb3sTBHx88uTJ3i1btpxHlpLplFrhmBa030+4C/aIH4JZiMkZZo7IunXrant7e9+ha8f+8vQ3XwyvCT7561zDqQtOoAQfwhjmI+D9jRs3votDSWXTsLSwMwnNmUkkXPMIBRkawWBQv4jZ19cXQ4iMFUWitcwezARzgSV2uKNzxjGE1/ilS5dOHT9+/NTBgwc/P3369F1hN1Q32lCWE8jm5mYxODjIUnxGeLhKhHq4FQgEpE6gwMpSKyiYmIRpZS+nB+YmItS2SW4hfO9euHBhaO/evW/v27dvFPfKYsyiG2yg4swgIxkY2GXwrDRE08A5xt27d1nEZUGCadnT6ouTNQg+nLGJXrTKy8stkCC9QgvmfBUmU2JBVY1Auv2ivr7++TVr1hwACSya4uBgAttJZXGIYxzbKaTlBAhIoqZIITtJ74A3SK+YayjidmhoWBAuE+WxiRfNQi9kYTXXmEOPPolt27Y9j800GpLClsYQMIqLiw2QJHscBMgtzES9Ire4f84bxCO0ZlKAnmG1xxmnSrhww9q1a38lx8+YqtOzVdr0jNXFixf7oS1P4ZqfwchYA4w5lzNeFZwFr6ioKIUQ876c6yxWE8bOQVjBfJXlYkyVWxQraIKFuQkOxbMnTpyIMd0xC9ADNCiQNIYEJmS6sDCUhJtPwwMS+HtK2NkgiXsl4V0pEJFC72dQuNFT0kjN0hO4aiCUOM/WBg3XQ0MJlcDkSi5zQNxMCOYgCq4Wp2BqgRwaGjrY1dV1CT8TyDCy8cIODQO9nkUZbapiTWBJwHRogD2P53O7Srh/+FH7c0BUisxRg+3jIyMj3SQp+UZPblabgDeQFVZLT8DqotEoZ8Gj6nrt9g88ibtYq0gW0pyFyRRmDum2Y2NjdqldWTNDIHfu3PkPYfe+FEcIoKwRMHibMUUn8nHhWK1NUMhK2MMUzK1bt67RgqkFEl7SB4HkYg+H1BQPTutTCHMrYCLPwQawMWwUV77qYE+wJtBrGgyJjo6O9TjeBHuMhEEHSlQmcM5c5z3YGI43uPjL3m7E8Px9TQSm3nbg2ErYj2A/UOdxgUcvDj9ULJZG6N40kfJknCM8DBRXwzzIscfq1atfE19lhwy8gSW01AXrO/i0ZtHEUhvSJokwUE+k8fsT/rl///6/oV5Iol5IoT6Q4ohhu4FFnjnHCfkOXWEWY9xRhgZX7d69+ymU3odBADWD4VIt7M8EwurcpfcBiSp1Ge+sB1gWUwMq9+zZ8yRIIQHfF+pbCS2QVr5/IzEfHN9NUAS5DMiGl6stZ13CunBSq99iqcL5bRUbLGethBo0OarHpfH50DyQZbHyCho1QBKiv7ITX5GwNEPCAb3gor+C8TuswM1PhR4FpvU6g72jRoqW4ytVsYQ/QP0mLPkw8JAP+BLq/4lSxDsmoQAAAABJRU5ErkJggg==",F24822:"iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjoSURBVHgB7VprbBRVFL777Ha329rah9XWklp81AhiE0V/ICZgSJSqUTAVH/1HjEETkmIM/sBXiAbFVI2QEMW0oNBKDDWSWEMgQsAKVqpBCYSXfVAgQNvddre7M9fv3Ll3O0ChLWyHssyXnMzO7M7uzjfnfOdxhzEbNmzYsGHDhg0bNmzYsGHDhg0bNmzYsGHDhg0bNmzYuFbgnDuwcbAJDiezACBDvXTI3xS/u2zZMrXvIMJMn5swsOQO0sUD6vcu+k0QxU1bLj8z8dgaJwgvkSHlhnlisVjtvn377sJrH8xbUVHhoffmzZvnAknKo9gNAZPWuGBemC8SiXyO43xwcLBu69at9+JYoKioKB3bNCaJYteBPiULSmfIS8hjAqdOnXqVS2iaduz06dNv3QTgvQxYuvysy3Ru6kJ6kKu8vJy8xw/Lqqure4BfACLq4MGDL9H7sACT3sRMIs5S0avowmTI0AXThWfDCkFIDxEzsOo9rp9oTxDV19f33caNG+/HZzJNYecx6xNLJSgPYsaFUgjlwopBxG4ipP+dhbx3TimP1H/K9VBvgqgzZ858yAwyg8wIO/JARVLKEUUXRATRxebBStrb278xPOhdQRBZ6JUZfLC5MUFSPB4/3tHR8ZrUJxV2IuMRUSkRdvIiiCDyACIoHzappaXlLZHJfm5MEKQsvKTqkmEH80+aNInEnvTJpUiS26TDigyRKGjy8vJEIejz+fTGxsY9dMw15aGLTtDafmOh6hkssvp9xrs7WEZGxvPQoFaE3dIVK1bkHT16lLxIhBwKUHO4JZ0kq9zTgWLQvXfvXm8wGPTBIyibBRFCu10uVzD03P2Mh/uGPdFZUMS8L77OPLOeFfsQ9/+6uro+Ki4ursduXJoG05lwWE5bqtyTUmla1ouBGOE9IIcuQBgKxk7xJ+4ov+S5enc7i3y8hIWrHxXeBEKLkd0+i0ajO9avXz+ZGbpE3uSeOXOmE8S4ZF+TlJtvWRG2bds2Bu1IkAPTUCCKMHOW3jPi+USUCLtPlgiivF7vvVVVVX+EQqEvN23aVJabm+s9dOiQEHA2lOWumigrq1Td7XYLLwoEAoKkc+fOddAbrtLyUX9JrPl71v/mC2zwh6/FPr6rqrKysqm1tfUVeKcPOqdIotLCKScGV0yUZRokjf44hQPVNRm1tbUVixYtaiDvoBAaK0iffIs/hNBPF/ukT/Cmyvnz5x9h5+uTmhIIfWJjmBRY5UHqD/GCggL1R7UtW7a0iz+BC3UEgmysIGL731yQCDvSJ8p2CLtVKAvM+qS8yTnWKYGVRZaoqCGwnt7e3nSMPPwDAwNBCPUvaWlpt4Zfe5Lph/9hVwpHIJN5nqlmaQveEPvkTSgLVuXn53+B3Rh6wfj+/fuV/imPGhGWaRDdOWQZhgqagyAdiUYHMRou4pL10Ji+P9zLButrRajGfvleeBP06AMQ1Xb8+PGnQI5ZvEcNS0cJqlCE6f39/RpStX7y5Ml/xR/JL2JXAwpR9/TZzPN0NXPfN0S20+m8HTXT+nA4vLSsrMws1qMiys0sRENDA4erc8yDdDIc0nBnD0ydOpW5p05nUTY2uECEGwJN3nehB8Jz+uCdzSDmr+3btzctXrz4IPbJITTKbGrMOxIs0yA5lxY6BKH2dnd3UyYLzJ07t3Dz5s27KERCz0277Hc44GXuR2aDFIMQ0h0zUFf92dnZuRcpv6W6unoXDg3AiPcIbFDahZntsrDMg0ylP/d4PEootaamph4IdZcvkFlIBPCT7cOe75n9LFL6R+cdQ5h2Q19+bW5u3rlhw4YDO3fuPIfDMWYQQVv6nTgbKk45dJBT0arrOoUfGwmWhhgJtVzdIGh+v19o0dmzZ38vLCysdE95EAI7PEFpC14XWxCy68iRI61r1qzZUV9f34HiM05g0jNQYccw646hIY6BgEFYHDckjt8Q/RrI4SCHj4YcgqUiTV6E2NeRyfScnBwiR9xZhNsB8WcuUVETOQ7USigLTpSUlLw9a9asb0HOYbwVAjfU5ZKFyHDhtA3DK/uRyaKoiaIgTXgRGmYRVpKciZXmCeaZDQSTY4whhBqZTLiNa5im1VlwG7p5o7ZZvnz5Umz6QXSYGYQIYuAtal8QwwztiaD1IO2J4QYID8M0QU9Wlz8uUMMzOcCnCWEuLq5kzpw5D4s5RajnouGZmjAirH5CqDyIc6bA7oSVwAqZMaHMycrKyoZXZqKUUCsjPvk75zWw4zVYSybEEhA0x5+ZmZmD18UIgXKEihhI9708I0HOwMc1ghyEYtfChQufwmenoLicnJ6eTkUTESNm1vRdNOCXhHghxKpZFS2GaVl7zORYKtIEbuR7jqFXomiEqJJQ78HI4jGzUCthbmtr+2716tVH8XIAxaUIHyYzFUjRQBgvLS2lcGVoVLmpxjFYGUoM18VyraiFUNVSI5mFTEZhMvnYsWN1RF5001fCe6J1nwrvgTDTUK0CdjesGIM3WhUJyvOVp4zb8N7yVUvp6hxhxeExIs1jX0OBZ7QctxSdJ8wrV66sYUPFXhTCKzwHIaXGrKMu+q4LUITJtS3SCySyjDwS6pqamseVUCthhlf9CGGm1QwaXZCnkeaoNbLUW0QkmNayKLvQ8P5mGInu3UqoVWhhmPYEM0LrdgotylAytFL+4QY1XSRvoEXBW2FlPT09LYog9FPUV9CTH6WwW5ixZq/WwyyThmv15ITSDJ6dnS16MmoNUPXupzeRqTqnTZu2lkndgcXQ4CaaTM6te3joWj9aosseSUMFHEd1/TcdXLdu3auodyJI31FolBBlVMMaxqk6ydSEroaTCKd8sswPL8oisUat8xAIawAxxcwIOyoGKQT98rOpKczDwfRInnrqg4jIW7t2bQXIovV7Em/xrJCskF3XQ5uQVMjnhhJPnjGDkJvklpY5/KogvJIViVSAenaISCIiKKv5palm09KsNdGgnj5TJBEhaSZiRLPJxrGVmOgwP3tIRLhM5pQV9zWF5d38BVAPjTNZ23DVecuu/4b0mpFgk2IjhfA/Jsihbk+RqMoAAAAASUVORK5CYII=",F24E1E:"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",FF24BD:"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",FFC700:"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",FFCD29:"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"},e8={848484:"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"};function te(e,t,n){let i=l.z7E[t];return n?(0,A.CZ)(`multiplayer_cursors/ui3/${i}/${e.substring(1)}.png`):(0,A.CZ)(`multiplayer_cursors/v1/${i}/${e.substring(1)}.png`)}function tt(e,t){if(t){let t=e8[e.substring(1)]??e8[e7];return`data:image/png;base64, ${t}`}let n=e9[e.substring(1)]??e9[e7];return`data:image/png;base64, ${n}`}function tn({viewportInfo:e,cursorEntities:t}){let n=(0,j.KP)(),i=(0,s.d4)(({multiplayer:{allUsers:e}})=>e);return(0,r.jsx)(r.Fragment,{children:t.map(t=>{let a;switch(t.type){case"StarParticle":a=(0,r.jsx)(tu,{emissionAngle:t.customData.emissionAngle});break;case"BubblePopEntity":a=(0,r.jsx)(th,{});break;case"SparkleEntity":a=(0,r.jsx)(tf,{});break;case"AnimatedCursorEntity":let s=t.customData.sessionId,o=n.toString()===s,l=o?to:i.find(e=>e.sessionID.toString()===s)?.color;a=(0,r.jsx)(tm,{customData:t.customData,color:l,isCurrentUser:o})}return a&&(0,r.jsx)(tr,{canvasPosition:t.position,viewportInfo:e,rotation:t.rotation,scale:t.scale,children:a},t.id)})})}function ti({cursorWiggleStatus:e,temporarilyHide:t,isCursorHandOnRight:n}){let[i,s]=a.useState(!1);return a.useEffect(()=>{let t=requestAnimationFrame(()=>{s("HIDDEN"!==e)});return()=>cancelAnimationFrame(t)},[e]),(0,r.jsx)("div",{className:"cursor_high_five--highFiveCursorForSelf--Vl78F",children:(0,r.jsx)(ts,{color:to,isHighFiveHandOut:i,aboutToHide:"ABOUT_TO_HIDE"===e,temporarilyHide:t,isCursorHandOnRight:n})})}function tr({canvasPosition:e,viewportInfo:t,children:n,rotation:i=0,scale:a=1}){let s=(0,E.Z0)(t,e||{x:0,y:0});return(0,r.jsx)(ta,{viewportPosition:s,rotation:i,scale:a,children:n})}function ta({viewportPosition:e,children:t,rotation:n=0,scale:i=1}){let a={transform:`translate3D(${0|e.x}px, ${0|e.y}px, 0) translate(-50%, -50%) rotate(${n}rad) scale(${i})`};return(0,r.jsx)("div",{className:"cursor_high_five--highFiveAbsoluteContainer--cGAqO",style:a,children:t})}function ts({color:e,isHighFiveHandOut:t,temporarilyHide:n,isCursorHandOnRight:i,aboutToHide:a=!1}){return(0,r.jsx)("div",{className:p()({"cursor_high_five--highFiveAnimationContainer--OdvS-":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--c1aJS":t,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--vY49P":a}),children:(0,r.jsx)("div",{style:{opacity:n?"0":"1"},className:p()({"cursor_high_five--highFiveWaveContainer--0NAcG":!0,"cursor_high_five--cursorHandOnRight--mAE2o":i}),children:(0,r.jsx)(tc,{color:e})})})}let to="#FFFFFF",tl=new Set([to,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function td({color:e}){let[t,n]=a.useState(!1);if(!tl.has(e))return(0,e5.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),(0,r.jsx)(r.Fragment,{});let i=te(t?to:e,l.z7E.HIGH_FIVE,!1);return(0,r.jsx)("img",{className:"cursor_high_five--handImage--JXftf",src:i,alt:"",onError:()=>n(!0)})}function tc({color:e}){return(0,r.jsx)(td,{color:e},e)}function tu({emissionAngle:e}){return(0,r.jsx)("div",{className:"cursor_high_five--fallingStar--hLjZS",children:(0,r.jsx)("div",{style:{transform:`rotate(${e}rad)`},children:(0,r.jsx)("div",{className:"cursor_high_five--shootingStar--1nX4A",children:(0,r.jsx)(tp,{})})})})}function tm({customData:e,color:t,isCurrentUser:n}){let i=a.useRef(null);return a.useLayoutEffect(()=>{if(!(0,e4.x)())return;let t=-1;return e.animations.forEach((n,r)=>{let a=i.current?.animate(n.keyframes,n.timing);a&&r===e.animations.length-1&&(a.onfinish=()=>{let n=null,r=0,a=1e3/60*12,s=o=>{let l=null===n?0:o-n;if(n=o,r+=l,i.current&&r<a){let n=r/a,o=Math.sin(2.1*n)/.8632093666488737*(1-n)+n;i.current.style.transform=e.getReturnToCursorTransform(o),t=requestAnimationFrame(s)}};t=requestAnimationFrame(s)})}),()=>{t>=0&&cancelAnimationFrame(t)}},[e,i]),(0,r.jsx)("div",{ref:i,children:(0,r.jsx)(tc,{color:t})})}function tp(){let e=(0,A.ck)("353e095c3f9c8488d9bb83dec3ce1d4c689f96db");return(0,r.jsx)("img",{className:"cursor_high_five--starImage--KcEOx",src:e,alt:"star"})}function th(){return(0,r.jsx)("div",{className:"cursor_high_five--bubble--7qGg-"})}function tf(){return(0,r.jsx)("div",{className:"cursor_high_five--sparkle--UA3Qm",style:{backgroundImage:`url(${(0,A.ck)("d67d53e57e063de9a1d2ae0edfb4dc96b2db406f")})`}})}var tg=n(257556),tx=n(78320),t_=n(456556),ty=n(834163);let tb="reactions--indicatorSolid--zJOmS";function tv({viewportInfo:e,reactionInfo:t}){let n=(0,E.Z0)(e,t.canvasSpacePosition),[i]=(0,a.useState)(.5*Math.random()+2),[s]=(0,a.useState)(.4*Math.random()+.3),o={animationDuration:`${i.toFixed(1)}s`},l={animationDuration:`${s.toFixed(1)}s`},{x:d,y:c}=n;d-=5,c-=10;let[u]=(0,a.useState)(1*Math.random()+.5),m={willChange:"transform",transform:`translate3D(${0|d}px, ${0|c}px, 0) scale(${u})`},[p]=(0,a.useState)(Math.random()>.5?"reactions--forward--q4hq5":"reactions--backward--bNemj");return(0,r.jsx)("div",{className:"reactions--translationContainer--UqS2S",style:m,"data-testid":"reaction",children:(0,r.jsx)("div",{className:"reactions--floatingEmojiContainer--SOX1N",style:o,children:(0,r.jsx)("img",{src:t.reactionId,className:`reactions--floatingEmoji--6iT-I ${p}`,style:l,alt:""})})})}function tC({viewportInfo:e,multiplayerCursorsEnabled:t}){let n=w.R9.useReactionsBySessionId(),i=Object.keys(n),s=(0,j.KP)(),o=(0,t_.Fk)(e=>e.getCurrentPage()?.guid);return(0,r.jsx)(r.Fragment,{children:i.map(i=>{let l=n[i],d=Object.keys(l).filter(e=>l[e].pageId===o);return i===`${s}`||t?(0,r.jsx)(a.Fragment,{children:d.map(t=>{let n=l[t];return(0,r.jsx)(tv,{viewportInfo:e,reactionInfo:n},t)})},i):null})})}let tE=[{x:0,y:-20,rotation:10,scale:1.6},{x:5,y:-35,rotation:-15,scale:1.2},{x:-2,y:-50,rotation:0,scale:.8}];function tw({multiplayerEmoji:e,viewportInfo:t}){let n=(0,b.x)({subscribeToUpdates_EXPENSIVE:!0}),i=(0,a.useRef)(0),[o,d]=(0,a.useState)(tb),[u,m]=(0,a.useState)(!1),p=(0,s.wA)(),h=(0,a.useCallback)(()=>{p(eU.mu())},[p]);(0,ty.Y)(h,{closeOnEsc:!0,ignore:"allClicks"});let{reactImageUrl:f,reactName:g}="REACTING_OR_CHATTING"===e.type?{reactImageUrl:e.imageUrl,reactName:e.name}:{reactImageUrl:null,reactName:null};return(0,a.useEffect)(()=>{if(d(tb),!f)return;let e=null,t=null,n=()=>{w.R9.sendReaction(f),en.H.trigger(l.JA.GENERIC),d(tb),null!=e&&clearTimeout(e),e=setTimeout(()=>{d("reactions--indicatorFading--cB-xF reactions--indicatorSolid--zJOmS")},300)},r=e=>{" "===e.key&&null!==t&&clearInterval(t)},a=e=>{"CANVAS"===e.target.tagName&&(i.current=Date.now(),n(),t&&clearInterval(t),t=setInterval(()=>{n()},60),e.stopPropagation(),e.preventDefault())},s=e=>{if(null!=t){let e=t;if(i.current>0){let e=Date.now()-i.current;tx.F.trackFromFullscreen("emoji_reaction",{duration:e,image:f,name:g},!1),i.current=0}setTimeout(()=>{clearInterval(e)},70)}e.stopPropagation(),e.preventDefault()},o=new Set,c=0,u=null,p=e=>{if("mouse"===e.pointerType){a(e);return}if("CANVAS"!==e.target.tagName||u&&e.pointerId===u.pointerId)return;o.add(e.pointerId);let n=o.size;if(c=Math.max(n,c),1===n){let t=new PointerEvent("pointermove",e);e.target?.dispatchEvent(t),u=new PointerEvent("pointerdown",e)}c<=1?a(e):(u&&(e.target?.dispatchEvent(u),u=null),t&&clearInterval(t),m(!0))},h=e=>{"mouse"!==e.pointerType&&u&&e.pointerId===u.pointerId&&(u=new PointerEvent("pointerdown",{bubbles:u.bubbles,cancelable:u.cancelable,composed:u.composed,detail:u.detail,view:u.view,altKey:u.altKey,ctrlKey:u.ctrlKey,metaKey:u.metaKey,shiftKey:u.shiftKey,button:u.button,buttons:u.buttons,clientX:e.clientX,clientY:e.clientY,movementX:e.movementX,movementY:e.movementY,relatedTarget:u.relatedTarget,screenX:e.screenX,screenY:e.screenY,isPrimary:u.isPrimary,pointerId:u.pointerId,pointerType:u.pointerType}))},x=e=>{if("mouse"===e.pointerType){s(e);return}if(!o.has(e.pointerId))return;o.delete(e.pointerId);let t=o.size;1===c&&s(e),0===t&&(c=0,u=null,m(!1))},_=(0,tg.ft)(!0);return _?(document.addEventListener("pointerdown",p,!0),document.addEventListener("pointermove",h,!0),document.addEventListener("pointerup",x,!0),document.addEventListener("pointercancel",x,!0)):(document.addEventListener("mousedown",a,!0),document.addEventListener("mouseup",s,!0),document.addEventListener("mouseleave",s,!0)),document.addEventListener("keydown",r),()=>{null!=t&&clearInterval(t),null!=e&&clearTimeout(e),_?(document.removeEventListener("pointerdown",p,!0),document.removeEventListener("pointermove",h,!0),document.removeEventListener("pointerup",x,!0),document.removeEventListener("pointercancel",x,!0)):(document.removeEventListener("mousedown",a,!0),document.removeEventListener("mouseup",s,!0),document.removeEventListener("mouseleave",s,!0)),document.removeEventListener("keydown",r)}},[f,g]),f&&n&&!u?(0,r.jsx)("div",{className:o,style:{willChange:"transform",transform:`translate3D(${n.x-t.x}px, ${n.y-0}px, 0)`},children:(0,c.kc)().figjam_emoji_stamps_mw25?tE.map((e,t)=>(0,r.jsx)("img",{style:{opacity:.5,position:"absolute",transform:`translate3D(${e.x}px, ${e.y}px, 0) rotate(${e.rotation}deg) scale(${e.scale})`},src:f,alt:""},t)):(0,r.jsx)("img",{src:f,alt:""})}):null}let tk=(0,a.memo)(function({name:e,color:t,cursorType:n,chatMessage:s,isHighFiving:d,focusOnTextCursor:c,temporarilyHide:u,isCursorHandOnRight:m,isCursorPointingRight:g,editorType:x,isCursorAndChatAreaOffscreen:_,sessionId:y,prefersReducedMotion:b,isHighFivingSupported:v,useChatAnimation:C,disableMessageFade:E,isStaticView:w,isHoveringWidgetWithHiddenCursors:k}){let T=(0,o.G)(),[j,S]=(0,a.useState)(1),I=(0,a.useMemo)(()=>(0,f.GL)(t),[t]),A=T.enhancedContrast?(0,f.En)(t):t,[R,P]=(0,a.useState)(N.NONE),O=()=>P(N.NONE),[D,L]=(0,a.useState)(w),[F,B]=s||[];(0,a.useEffect)(()=>{let e,t;return F||B?(L(!0),S(1)):(L(!1),O()),E||(e=setTimeout(()=>{S(0)},5e3),t=setTimeout(()=>{L(!1),O()},8e3)),()=>{S(0),L(!1),O(),clearTimeout(e),clearTimeout(t)}},[F,B,E]);let U="whiteboard"===x;(0,a.useEffect)(()=>{if(U&&F&&!_)for(let e of M.keys()){let t=M.get(e);t&&eR(F,e)&&P(t)}},[F,_,U]);let H=a.useRef(null);(0,a.useEffect)(()=>{if(H.current&&H.current.innerText===F){let e=h.sn.tryStop(`view_cursor_chat_message_${y}_${F}`);e&&h.Vq.add("view_cursor_chat_message",e)}},[F,H,y]);let z=g&&n===l.z7E.DEFAULT,G=n===l.z7E.PEN,K=(0,r.jsxs)("div",{className:p()({[e0.iU]:D,[e0.VW]:!D,[e0.S8]:!G,[e0.z8]:z}),style:{color:I},children:[(0,r.jsx)("div",{className:D?e0.bu:e0.iY,style:{opacity:D?I===f.e3?.8:.5:1},dir:"auto",children:e}),D&&(0,r.jsxs)("div",{className:e0.Lo,style:{opacity:I===f.YN?.8*j:j,boxShadow:U?void 0:`2px 4px 8px ${A}40`},dir:"auto",children:[B&&(0,r.jsx)("div",{className:B.length>0&&(F?.length??0)>0?e0.vD:"",children:B}),F&&(0,r.jsx)("div",{ref:H,children:F})]}),(0,r.jsx)("div",{className:`${e0.hD} ${i[R]}`,style:"NONE"!==R?{background:A,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:A},onAnimationEnd:()=>O()})]});return c?null:(0,r.jsxs)("div",{className:e0.Dy,style:{opacity:k?0:1},"data-testid":`multiplayer-cursor-${y}`,children:[(0,r.jsxs)("div",{className:e0.or,children:[v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:e0.p,children:(0,r.jsx)(ts,{color:t,isHighFiveHandOut:d,temporarilyHide:u,isCursorHandOnRight:m})}),(0,r.jsx)("img",{className:p()({[e0.u0]:!0,[e0.Bj]:!0,[e0.DE]:d,[e0.z8]:z}),src:te(t,d?l.z7E.DEFAULT:n,!0),alt:`${d?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=tt(t,!0)}})]}):(0,r.jsx)("img",{className:p()({[e0.u0]:!0,[e0.z8]:z}),src:te(t,n,!0),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=tt(t,!0)}}),y&&(0,r.jsx)(V,{sessionId:y})]}),(C||U)&&!b?(0,r.jsx)(eI,{content:F||"",children:K}):K]})}),tT=a.memo(function({isCursorAndChatAreaOffscreen:e,x:t,y:n,children:i}){let a={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${t}px, ${n}px, 0)`};return(0,r.jsx)("div",{style:a,children:i})});function tj(){var e;let t=(0,u.R)(({multiplayer:{allUsers:e}})=>e.map(e=>e.sessionID)),n=(0,E._X)({subscribeToUpdates_expensive:!0}),i=(0,a.useContext)(I.kw);(0,b.x)({subscribeToUpdates_EXPENSIVE:!1});let o=(0,a.useMemo)(()=>i.getCommentsWrapperOffset(n),[i,n]),c=(0,j.KP)(),m=(0,k.XM)(),p=(0,s.d4)(e=>e.multiplayerEmoji),h=!(0,S.ut)(l.Ez5?.uiState().hideMultiplayerCursors,!1),f=(0,T.p8)("currentTool"),g=eb(),[x,y,v,C]=function(){let[e]=(0,a.useState)(ef);!function(e){let t=(0,ei.am)(),[n,i]=(0,q.fp)(eo),r=eb(),o=function(){let e=(0,s.d4)(e=>{let t=e.mirror.appModel.currentTool;return t===d.NLJ.SELECT||t===d.NLJ.HAND}),t=(0,s.d4)(e=>e.multiplayerEmoji?.type==="WHEEL"||e.multiplayerEmoji?.type==="REACTING_OR_CHATTING"),n=(0,s.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);return e&&!t&&n!==d.m1T.TEXT}(),c=(0,S.J2)((0,er.UK)().cursorHighFiveWiggle),u=(0,a.useRef)(null),m=(0,a.useRef)(0);(0,a.useEffect)(()=>{o||e.stopWigglingNow()},[e,o]),(0,a.useEffect)(()=>{let n=e.onWiggleModeChange(n=>{w.R9.sendHighFiveStatus(n),i(n),n&&e.getHighFiveKeyPressed()?t("figjam_cursor_high_five_events",{type:"enter_hands_up",source:"keyboard"}):n&&t("figjam_cursor_high_five_events",{type:"enter_hands_up",source:"mouse"})});return()=>{n()}},[e,i,t]),(0,a.useEffect)(()=>{n?(e.startOrRefreshWiggle(),e.setMouseLeftCanvas(!1),e.update()):e.stopWigglingNow()},[e,n]);let p=(0,a.useCallback)(()=>{clearTimeout(m.current),m.current=setTimeout(()=>{e.getHighFiveKeyPressed()&&!e.getWiggleMode()&&(e.update(),p())},250)},[e]);(0,a.useEffect)(()=>()=>clearTimeout(m.current),[]);let h=(0,s.Pj)(),f=(0,a.useCallback)(t=>{let n=t.metaKey||t.ctrlKey||t.altKey||t.shiftKey;if("h"!==t.key||n)" "!==t.key&&"/"!==t.key&&!n&&e.getWiggleMode()&&(e.setHighFiveKeyPressed(!1),u.current=null,e.stopWigglingNow());else{if(!e.getHighFiveKeyPressed()){let e=h.getState().mirror.appModel.currentTool;u.current=e}e.setHighFiveKeyPressed(!0),e.update(),p()}},[e,p,h]),g=(0,a.useCallback)(t=>{"h"===t.key&&(e.getWiggleMode()&&null!==u.current&&u.current!==d.NLJ.HAND&&l.glU.triggerActionInUserEditScope("set-tool-default",{source:"cursor-high-fives"}),u.current=null,e.setHighFiveKeyPressed(!1),e.stopWigglingNow())},[e,u]),x=(0,a.useCallback)(t=>{e.getWiggleMode()&&(e.setHighFiveKeyPressed(!1),e.stopWigglingNow()),(0===t.button||1===t.button)&&e.setMouseButtonHeld(!0)},[e]),_=(0,a.useCallback)(()=>{e.setMouseButtonHeld(!1)},[e]),y=(0,a.useCallback)(t=>{let n=!(t.target instanceof Element&&t.target.closest("#fullscreen-root"));e.setMouseLeftCanvas(n),e.update({x:t.clientX,y:t.clientY})},[e]),b=r&&o;(0,ea.Po)("keydown",f,b),(0,ea.Po)("keyup",g,b),(0,ea.Po)("pointerdown",x,b),(0,ea.Po)("pointerup",_,b),(0,ea.Po)("mousemove",y,b&&c)}(e.cursorWiggleDetector);let t=(0,ei.am)(),[n,i]=(0,a.useState)([]),[r,o]=(0,a.useState)("HIDDEN"),[c,u]=(0,a.useState)(()=>new Set),m=(0,E.bs)({subscribeToUpdates_expensive:!0}),p=(0,a.useRef)({oldEntitiesKey:"",oldHandsOnRightKey:"",oldWiggleMode:!1,oldWiggleStatus:"HIDDEN"});return w.R9.useInfoBySessionIdSubscription((0,a.useMemo)(()=>(0,Y.n)(100,()=>{let n=m.current;if(!n)return;(function(e,t,n){if(!et.D||!l.h3O)return;let i=et.D.getState(),r=w.R9.infoBySessionId();if(!i.mirror||!i.mirror.appModel)return;let a=l.h3O.currentSessionID(),s=i.multiplayer,o=i.mirror.appModel.currentPage,d=s.observingSessionID,c=eg(s.allUsers),u=Object.values(r).filter(e=>{if(!e.highFiveStatus||!e.mouse)return!1;let t=c[e.sessionId];return!!t&&(t.sessionID===a||ey(t,e,o,d,a))});t.cursorKinematics.updateCursors(u,a,t.cursorWiggleDetector.getWiggleMode(),t.cursorWiggleDetector.getMousePosition());let m=e?.zoomScale||1;t.cursorCollisionDetector.updateAndCheckCollisions(u).forEach(e=>(function(e,t,n,i,r){let[a,s]=e,o=e_(i.cursorEntitySystem.getEntities(),a.sessionId),d=e_(i.cursorEntitySystem.getEntities(),s.sessionId);if(o&&d)return;let c=a.sessionId===n.toString(),u=s.sessionId===n.toString(),m=a.mouse.canvasSpacePosition,p=s.mouse.canvasSpacePosition,h=es.computeMidpoint(m,p);h.y-=38/t;let f=m.x>p.x,g=c||u?c:f;(c&&!o||u&&!d)&&i.cursorWiggleDetector.startOrRefreshWiggle(),e.forEach((e,n)=>{if(!e_(i.cursorEntitySystem.getEntities(),e.sessionId)&&e.mouse){let r=ex(e.mouse.canvasSpacePosition,i.cursorKinematics,e.sessionId,t,c);J.eD&&setTimeout(()=>{en.H.trigger(l.JA.GENERIC)},400),i.cursorEntitySystem.addEntity(new em({startingRelativePosition:{x:(r.position.x-h.x)*t,y:(r.position.y-h.y)*t},startingRotation:r.rotation,position:h,viewportZoomScale:t,cursorOnRightForWindup:0===n?f:!f,cursorOnRightForCollision:0===n?g:!g,sessionId:e.sessionId,getUserCursorTransform:()=>ex(w.R9.infoBySessionId()[e.sessionId]?.mouse?.canvasSpacePosition||{x:0,y:0},i.cursorKinematics,e.sessionId,t,0===n?c:u)}))}}),i.cursorEntitySystem.addEntity(new eu([{time:.3,event:()=>{i.cursorEntitySystem.addEntity(new el(h)),i.cursorEntitySystem.addEntity(new ed(h));for(let e=0;e<6;e++)i.cursorEntitySystem.addEntity(new ec(h))}}])),r("figjam_cursor_high_five_events",{type:"give_high_five"})})(e,m,a,t,n)),t.cursorEntitySystem.update()})(n,e,t);let r=e.cursorEntitySystem.getEntities(),a=r.map(e=>e.id).join(",");a!==p.current.oldEntitiesKey&&i(r);let s=e.cursorWiggleDetector.getWiggleMode(),d=e.cursorWiggleDetector.getAboutToHide()?"ABOUT_TO_HIDE":s?"SHOWN":"HIDDEN";d!==p.current.oldWiggleStatus&&o(d);let c=e.cursorKinematics.getHandsOnRight(),h=Array.from(c.keys()).join(",");h!==p.current.oldHandsOnRightKey&&u(new Set(c)),p.current.oldEntitiesKey=a,p.current.oldWiggleMode=s,p.current.oldWiggleStatus=d,p.current.oldHandsOnRightKey=h}),[m,t,e])),[n,r,!e.cursorWiggleDetector.getMouseLeftCanvas(),c]}(),A="HIDDEN"!==y,N=e6.mZ.NONE,M=f===d.NLJ.HAND?d.NLJ.HAND:d.NLJ.SELECT,R=A?d.NLJ.SELECT:M;"REACTING_OR_CHATTING"===p.type&&p.isChatting?N=e6.mZ.CHAT:A&&(N=e6.mZ.HIGH_FIVE);let P=function(e){let t=e===e6.mZ.NONE,[n,i]=(0,a.useState)(!t);return(0,a.useEffect)(()=>{let e=()=>i(!1);if(!t){i(!0);return}if(!e3.Ay.isIpad&&!e3.Ay.isMeetDevice)return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e);e()},[t]),n}(N);if(null==n)return null;let O={left:`${0|n.x}px`,top:`${0|n.y}px`,width:`${0|n.width}px`,height:`${0|n.height}px`},D=(0-n.offsetX)*n.zoomScale+o.x,L=(0-n.offsetY)*n.zoomScale+o.y,F={top:`${n.y+n.height/2}px`,left:`${n.x+n.width/2}px`,transform:`translate(${D}px, ${L}px)`};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.p,{children:(0,r.jsx)("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:e0.Lw,style:F,children:h&&(0,r.jsxs)("div",{className:m?e0.W7:e0.PT,children:[(0,r.jsx)(ek,{viewportInfo:n}),t.map(e=>e===c?null:(0,r.jsx)(tI,{sessionID:e,viewportInfo:n,cursorEntities:x,cursorHandsOnRight:C,isHighFivingSupported:g},e))]})})}),(0,r.jsxs)("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:e0.zr,style:O,children:[P&&(0,r.jsxs)(e6.AS,{currentToolForCursor:R,children:[N===e6.mZ.CHAT&&(0,r.jsx)(e1,{}),(0,r.jsx)(ti,{cursorWiggleStatus:y,temporarilyHide:!v||e_(x,c.toString()),isCursorHandOnRight:(e=c.toString(),C.has(e))})]}),g&&h?(0,r.jsx)(tn,{viewportInfo:n,cursorEntities:x}):null,n?(0,r.jsx)(tC,{viewportInfo:n,multiplayerCursorsEnabled:h}):null,n&&"REACTING_OR_CHATTING"===p.type?(0,r.jsx)(tw,{multiplayerEmoji:p,viewportInfo:n}):null]})]})}let tS=(e,t,n)=>{let i=a.useRef(null);i.current=e?.sessionId??i.current,(0,a.useEffect)(()=>{i.current&&n&&C.zw?.setOtherUserChattingState(i.current,t)},[n,t]),(0,a.useEffect)(()=>(i.current&&C.zw?.setOtherUserChattingState(i.current,!1),()=>{i.current&&C.zw?.setOtherUserChattingState(i.current,!1)}),[])};function tI({sessionID:e,viewportInfo:t,cursorEntities:n,cursorHandsOnRight:i,isHighFivingSupported:a}){let o=(0,s.d4)(({multiplayer:{allUsers:t}})=>t.find(t=>t.sessionID===e)),l=(0,T.p8)("currentPage"),d=(0,g.j)(),u=(0,y.lg)(),m=(0,S.J2)((0,v.d)().showOutlines),p=(0,e2.S)(),h=(0,s.d4)(({multiplayer:{observingSessionID:e}})=>-1!==e),f=w.R9.useInfoBySessionId({updateSynchronously:h})[e],x=!p&&f?f.chatMessage:[null],_=(0,j.KP)(),b=(0,j._E)(),C=!!(o&&f?.mouse&&ey(o,f,l,b,_));if(tS(f,!!(x&&x.length&&x[0]),C),!C||!f?.mouse)return null;let k=!!(0,c.kc)().ee_text_selection_in_mp&&f.focusOnTextCursor,I=m?"#848484":o.color,A=f.mouse.canvasSpacePosition,N=(0,E.Z0)(t,A),M=function({x:e,y:t},{width:n,height:i}){return e<0||t<0||e>n||t>i}(N,t)&&function({x:e,y:t}){return e<-400||t<-100}(N),R=t.zoomScale,P=(R-1)*A.x,O=(R-1)*A.y,D=o.sessionID.toString();return(0,r.jsx)(tT,{x:A.x+P,y:A.y+O,isCursorAndChatAreaOffscreen:M,children:(0,r.jsx)(tk,{chatMessage:x,color:I,cursorType:f.cursorType,editorType:u,focusOnTextCursor:k??!1,isCursorAndChatAreaOffscreen:M,isCursorHandOnRight:i.has(D),isHighFiving:f.highFiveStatus,isHighFivingSupported:a,isHoveringWidgetWithHiddenCursors:f.isHoveringWidgetWithHiddenCursors,name:o.name,prefersReducedMotion:d,sessionId:o.sessionID,temporarilyHide:e_(n,D)})})}function tA(){return(0,r.jsx)(x.tH,{boundaryKey:"MultiplayerCursors",fallback:x.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,r.jsx)(tj,{})})}},73518:(e,t,n)=>{n.d(t,{JP:()=>L,Nu:()=>D,v2:()=>R});var i=n(239976),r=n(105652),a=n(782982),s=n(686788),o=n(563225),l=n(833915),d=n(975430),c=n(591157),u=n(618209),m=n(293152),p=n(31896),h=n(393439),f=n(454705),g=n(692376),x=n(901461),_=n(854225),y=n(379141),b=n(270450),v=n(847923),C=n(224542),E=n.n(C),w=n(562418),k=n(421914),T=n(162251),j=n(1007),S=n(384203),I=n(456556),A=n(578608),N=n(858707),M=n(150605);function R(){let e;let[t]=(0,T.lJ)("gridTrackSize"),n=t&&(0,k.hS)(t)&&void 0!==t.value?t.value:void 0,r=t&&(0,k.hS)(t)&&void 0!==t.type?_.sAE[t.type]:void 0,{axis:a,width:s,initialText:o,shouldOpenDropdown:l,trackSizeInPx:d}=(0,v.R)(e=>({axis:e.mirror.appModel.onCanvasNameEditorInfo.axis,width:e.mirror.selectionProperties.width,initialText:e.mirror.appModel.onCanvasNameEditorInfo.initialText,shouldOpenDropdown:e.mirror.appModel.onCanvasNameEditorInfo.shouldOpenDropdown,trackSizeInPx:e.mirror.appModel.onCanvasNameEditorInfo.trackSizeInPx})),c=(0,I.Fk)(()=>g.HV5?.getGridTrackSelection()||[]),u=(0,k.E7)((0,T.kl)("gridRowCount")),m=(0,k.E7)((0,T.kl)("gridColumnCount")),p=(0,A.RK)();if(!t||!(0,k.gl)(t)&&void 0===r||!(0,k.gl)(t)&&void 0===n||!s||!m||!u)return null;e=a===x._0.X?Math.round(s/m):Math.round(s/u);let h="";h=(0,k.gl)(t)?(0,y.t)("fullscreen.mixed"):A.u1.format({type:r,value:n||0});let f=e=>{let i=A.u1.parse(e,(0,k.gl)(t)?void 0:{type:r,value:n||1}),a=c[0]?.index??-1;p({value:i.value,type:i.type,index:a,eventSource:g.m4k.CANVAS_INPUT})};return(0,b.kc)().ce_tv_grid_hug?(0,i.jsx)(O,{axis:a,disableSaveOnEscape:!0,gridTrackSizingType:r,maxWidth:e,name:o||h,noSelectOnFocus:!!o,setGridTrackSizingType:e=>{null!==e&&p({value:null,type:e,index:c[0]?.index??-1,eventSource:g.m4k.CANVAS_DROPDOWN})},setName:f,shouldOpenDropdown:l,trackSizeFlexMultiplier:r===_.sAE.FLEX?n:void 0,trackSizeInPx:d}):(0,i.jsx)(N.qn,{name:o||h,setName:f,maxWidth:e,noSelectOnFocus:!!o,disableSaveOnEscape:!0})}let P={crossAxis:-30,mainAxis:8};function O(e){let t=(0,N.R9)(e.name,e.setName,{maxWidth:e.maxWidth,noSelectOnFocus:e.noSelectOnFocus,disableSaveOnEscape:e.disableSaveOnEscape,formatter:e.noSelectOnFocus?A.$J:A.u1}),n=(0,w.m0)(),d=(0,I.Fk)(e=>{let t=g.HV5?.getSingleSelectedPrimaryGridId();if(!t)return!1;let n=e.get(t);return!!n&&n.isOrInInstance(_.Yc7.SLOT_SUBLAYERS)}),c=(0,I.Fk)(e=>{let t=g.HV5?.getSingleSelectedPrimaryGridId();if(!t)return!1;let n=e.get(t);return!!n&&"SYMBOL"===n.type}),[u,m]=r.useState(e.shouldOpenDropdown),[p,h]=r.useState(u&&void 0!==e.gridTrackSizingType?(0,A.VG)(e.gridTrackSizingType):void 0),x=(0,j.LE)({subscribeToUpdates_expensive:u}),y=(0,j.Xg)({subscribeToUpdates_expensive:u}),b=(0,S.p8)("isReadOnly"),v=n||b,C=d||v,k=(0,A.mp)(d);r.useEffect(()=>{(x||y)&&m(!1)},[x,y]);let T=a.M.useAutocomplete({selected:void 0!==e.gridTrackSizingType?[(0,A.VG)(e.gridTrackSizingType)]:[],activeValue:p,onActiveValueChange:h,expanded:u,expandOnFocus:!1,onExpand:m,onSelect(t){if(!t)return;let n=(0,A.i8)(t);null!=n&&(e.setGridTrackSizingType(n),m(!1),g.glU?.hideOnCanvasNameEditor())}}),R=r.useRef(null);if(r.useEffect(()=>{R.current&&R.current.focus()},[]),!t)return null;let{containerRef:O,measurerRef:F,containerStyle:B,editingName:U,onFocus:V,onChange:H,onKeyDown:z,onBlur:G,width:K,setIsComposing:W}=t,q=c||d;return(0,i.jsx)(N.n9,{containerRef:O,containerClassname:e.containerClassname,containerStyle:B,measurerRef:F,editingName:U,children:(0,i.jsxs)(f.J,{brand:"design",children:[(0,i.jsxs)("div",{className:q?M.iM:M.hs,children:[(0,i.jsx)(s.Y,{id:`on-canvas-name-editor-${e.name}`,disabled:C,...T.getInputProps({ref:R,autoFocus:!1,className:E()(M.U2,{[M.r9]:d||n}),onChange:(e,{event:t})=>{H(t)},onKeyDown:function(e){"Enter"===e.key&&u||z(e)},spellCheck:!1,style:{width:`${K}px`},value:U,htmlAttributes:{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",dir:"auto",onBlur:G,onCompositionEnd:()=>W(!1),onCompositionStart:()=>W(!0),onFocus:V},formatter:e.noSelectOnFocus?{gridTrackSizeFormatterFlexNoSelect:A.$J}:{gridTrackSizeFormatterFlex:A.u1}})}),v?null:(0,i.jsx)(a.M.Trigger,{...T.getTriggerProps(),className:q?M.Pq:M.uR,children:(0,i.jsx)(o.O,{})})]}),(0,i.jsx)(a.M.PopupList,{...T.getListProps(),anchorEl:R,"data-testid":"grid-track-combobox-popup-list",placement:"bottom-start",offset:({rects:e})=>({crossAxis:e.reference.width+P.crossAxis,mainAxis:P.mainAxis}),className:M.g1,children:k.map(t=>(0,i.jsx)(a.M.Option,{value:(0,A.VG)(t),className:M.r2,recordingKey:`trackSizingTypeOption-${_.sAE[t]}`,"data-testid":`gridTrackSizing-${_.sAE[t]}`,children:(0,i.jsxs)("span",{className:E()(M.Fo,{[M.$U]:p===(0,A.VG)(t)}),children:[(0,i.jsx)(l.l,{className:M.rF}),(0,i.jsx)(D,{gridTrackSizingType:t,axis:e.axis}),(0,i.jsx)(L,{gridTrackSizingType:t,axis:e.axis,trackSizeInPx:e.trackSizeInPx,trackSizeFlexMultiplier:e.trackSizeFlexMultiplier})]})},t))})]})})}function D(e){switch(e.gridTrackSizingType){case _.sAE.FIXED:return e.axis===x._0.X?(0,i.jsx)(d.w,{}):(0,i.jsx)(c.T,{});case _.sAE.HUG:return e.axis===x._0.X?(0,i.jsx)(u.v,{}):(0,i.jsx)(m.C,{});case _.sAE.FLEX:return e.axis===x._0.X?(0,i.jsx)(p.G,{}):(0,i.jsx)(h.N,{})}}function L(e){switch(e.gridTrackSizingType){case _.sAE.FIXED:let t=A.xm.format({type:_.sAE.FIXED,value:e.trackSizeInPx});return e.axis===x._0.X?(0,y.tx)("fullscreen.on_canvas_editor.grid_track_size.fixed_width_explicit",{width_in_px:t}):(0,y.tx)("fullscreen.on_canvas_editor.grid_track_size.fixed_height_explicit",{height_in_px:t});case _.sAE.HUG:return(0,y.tx)("fullscreen.on_canvas_editor.grid_track_size.hug");case _.sAE.FLEX:return(0,y.tx)("fullscreen.on_canvas_editor.grid_track_size.fill_container_explicit",{size_in_fr:A.u1.format({type:_.sAE.FLEX,value:e.trackSizeFlexMultiplier||1})})}}},858707:(e,t,n)=>{n.d(t,{R9:()=>x,n9:()=>_,qn:()=>y});var i=n(239976),r=n(105652),a=n(20002),s=n(424364),o=n(692376),l=n(224542),d=n.n(l),c=n(184743),u=n(499735),m=n(324880),p=n(772293),h=n(577355),f=n(1007),g=n(150605);function x(e,t,n){let i;let{maxWidth:l,noSelectOnFocus:d=!1,disableSaveOnEscape:m=!1,hasSlideRowBeenManuallyRenamed:x=!0,formatter:_}=n,{padding:y,margin:b,...v}=(0,a.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),C=(0,f._X)({subscribeToUpdates_expensive:!0}),E=C?.zoomScale||1,[w,k]=r.useState(e),[T,j]=r.useState(!0),S=r.useRef(null),I=r.useRef(null),[A,N]=r.useState(0),[M,R]=r.useState(!1),P=r.useCallback((e,t)=>{switch(v.mode){case o.nzw.FRAME_NAME:case o.nzw.VAR_WIDTH_SIZE:case o.nzw.RESPONSIVE_NODE_SET_NAME:N(Math.min(e,l*E)+7);break;case o.nzw.CANVAS_GRID_ROW_NAME:case o.nzw.CANVAS_GRID_ROW_STATE_GROUP:let n=Math.min(e,l*E);x?N(n+14):N(Math.max(n,40)+14);break;case o.nzw.RESPONSIVE_SET_NAME:case o.nzw.SECTION_NAME:let i=l*E;v.mode===o.nzw.RESPONSIVE_SET_NAME&&(i-=60),e<i?N(e):N(i-2*b.x);break;case o.nzw.FLOW_STARTING_POINT_NAME:N(Math.min(e,l)+4);break;case o.nzw.MEASUREMENT_FREE_TEXT:N(Math.min(e,l*E)+8.5);break;case o.nzw.GRID_TRACK_SIZE:let r=e;o.qmM&&(r=o.qmM.measureTrackLabelSize(t).x),N(Math.min(r,l*E+8.5))}},[v.mode,l,E,b.x,x]);r.useLayoutEffect(()=>{I.current&&P(I.current.scrollWidth,w)},[w,P]),r.useEffect(()=>{e&&(j(!0),k(e))},[e]),r.useEffect(()=>{let e=e=>{let t=!(S.current&&S.current.contains(e.target)),n=document.querySelector('[data-resource-id="rename-selection"]'),i=e.target&&n&&n.contains(e.target);t&&!i&&o.glU?.hideOnCanvasNameEditor()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let O=u.AF("onCanvasRename","change",e=>{k(e.target.value)}),D=u.v_("onCanvasRename","keydown",e=>{if(!M){if("Escape"===e.key&&m){j(!1),o.glU?.hideOnCanvasNameEditor();return}switch(e.key){case"Escape":case"Enter":case"Tab":e.preventDefault(),j(!1),t(w),p.Y5.commit(),o.glU?.hideOnCanvasNameEditor();break;case"=":case"-":(0,c.Fo)(e)&&(0,h.f7)(e)}}});if(!C)return null;let L={},F=(0,f.Z0)(C,{x:v.x,y:v.y},!1),B={x:F.x+C.x,y:F.y+C.y};if(v.mode===o.nzw.FLOW_STARTING_POINT_NAME&&(B.x-=32+A,B.y=Math.round(B.y)),v.mode===o.nzw.FRAME_NAME||v.mode===o.nzw.RESPONSIVE_NODE_SET_NAME){let e=(0,s.Cc)(5,9,(C.zoomScale-.1)*5);e=(0,s.qE)(e,5,9)-3,B.y-=e}if(v.mode===o.nzw.CANVAS_GRID_ROW_NAME&&o.Ez5){let e=o.Ez5.canvasGrid().gridRowSpacing()/2*C.zoomScale;e-=8,B.y-=e}switch(v.mode===o.nzw.CANVAS_GRID_ROW_STATE_GROUP&&o.Ez5&&(B.y+=8,B.x+=6),v.mode===o.nzw.RESPONSIVE_SET_NAME&&(B.x+=36,B.y-=3),v.mode===o.nzw.VAR_WIDTH_SIZE&&(B.y+=20*v.varWidthTextDirection.y,B.x+=20*v.varWidthTextDirection.x),v.mode===o.nzw.GRID_TRACK_SIZE?(L.height="unset",L.transform=`translate(${B.x+v.viewportOffset.x}px, ${B.y+v.viewportOffset.y}px) rotate(${v.angle}deg) translate(${v.justificationOffset.x}px, ${v.justificationOffset.y}px)`):v.mode===o.nzw.MEASUREMENT_FREE_TEXT?v.invertTextPosition?L.transform=v.isCentered?`translate(calc(${B.x}px - 50%), ${B.y-24}px)`:`translate(calc(${B.x-6}px - 100%), ${B.y-9.5}px)`:L.transform=v.isCentered?`translate(calc(${B.x}px - 50%), ${B.y+7}px)`:`translate(${B.x+6}px, ${B.y-9.5}px)`:v.mode===o.nzw.VAR_WIDTH_SIZE?L.transform=`translate(calc(${B.x}px - 50%), ${B.y-10}px)`:L.transform=`translate(${B.x}px, ${B.y}px) rotate(${v.angle}deg)`,v.mode){case o.nzw.FRAME_NAME:case o.nzw.RESPONSIVE_NODE_SET_NAME:i=g.Rj;break;case o.nzw.CANVAS_GRID_ROW_NAME:case o.nzw.CANVAS_GRID_ROW_STATE_GROUP:i=g.oX;break;case o.nzw.FLOW_STARTING_POINT_NAME:i=g.K3;break;case o.nzw.MEASUREMENT_FREE_TEXT:i=g.Q;break;case o.nzw.GRID_TRACK_SIZE:i=g.PE;break;case o.nzw.VAR_WIDTH_SIZE:i=g.z$}return{containerRef:S,measurerRef:I,containerStyle:L,inputClassname:i,editingName:w,onFocus:e=>{if(d||e.target.select(),I.current&&P(I.current.scrollWidth,w),_&&_.defaultSelection){let{start:t,end:n}=_.defaultSelection(w);e.target.setSelectionRange(t,n)}},onChange:O,onKeyDown:D,onBlur:e=>{T&&(t(e.target.value),p.Y5.commit(),e.relatedTarget&&"focus-target"===e.relatedTarget.className&&o.glU?.hideOnCanvasNameEditor())},width:A,setIsComposing:R}}function _({containerRef:e,containerClassname:t,containerStyle:n,measurerRef:r,editingName:a,children:s}){return(0,i.jsxs)("div",{ref:e,className:d()(t,m.Dm,g.T_),style:n,children:[(0,i.jsx)("span",{ref:r,className:g.jk,children:a}),s]})}function y(e){let t=x(e.name,e.setName,{maxWidth:e.maxWidth,noSelectOnFocus:e.noSelectOnFocus,disableSaveOnEscape:e.disableSaveOnEscape,hasSlideRowBeenManuallyRenamed:e.hasSlideRowBeenManuallyRenamed});if(!t)return null;let{containerRef:n,measurerRef:r,containerStyle:a,editingName:s,onFocus:o,onChange:l,onKeyDown:d,onBlur:c,width:u,setIsComposing:m,inputClassname:p}=t;return(0,i.jsx)(_,{containerRef:n,containerClassname:e.containerClassname,containerStyle:a,measurerRef:r,editingName:s,children:(0,i.jsx)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,className:p,dir:"auto",onBlur:c,onChange:l,onCompositionEnd:()=>m(!1),onCompositionStart:()=>m(!0),onFocus:o,onKeyDown:d,spellCheck:!1,style:{width:`${u}px`},value:s})})}},906401:(e,t,n)=>{n.d(t,{Cg:()=>l,UA:()=>d,fr:()=>s,uF:()=>a,ym:()=>o});var i=n(40297),r=n(526865);let a=40,s=(0,i.jz)(r.xM9),o=(0,i.jz)(r.M$q),l=(0,i.jz)(r.MGP),d=8},129865:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(239976),r=n(224542),a=n.n(r),s=n(323747);function o({isFullHeight:e,children:t}){let n=(0,s._Z)().isLoading;return(0,i.jsx)("div",{"data-testid":"left-panel-body",className:a()("left_panel_body--container--aM8oX sf_pro--uiFontWithSFProFallback--iJ25E",{leftPanelBody:!n,"left_panel_body--flexGrow--fE3Rb":e}),children:t})}},617451:(e,t,n)=>{n.d(t,{e:()=>c,i:()=>d});var i=n(239976),r=n(318584),a=n(379141),s=n(842582),o=n(776888),l=n(236410);function d({onClick:e,recordingKey:t,tooltipText:n}){return(0,i.jsx)(s.Me,{recordingKey:t,"aria-label":n,onClick:e,trackingProperties:{text:"Add new page"},"data-testid":"new-page-button","data-tooltip":n,"data-tooltip-type":l.Ib.TEXT,"data-tooltip-show-above":!0,children:(0,i.jsx)(r.e,{})})}function c({recordingKey:e}){let t=(0,o.rE)();return(0,i.jsx)(d,{onClick:()=>t(null),recordingKey:e,tooltipText:(0,a.t)("fullscreen.pages_panel.add_new_page")})}},848170:(e,t,n)=>{n.d(t,{t:()=>v});var i=n(239976),r=n(388733),a=n(627917),s=n(318584),o=n(442182),l=n(379141),d=n(499735),c=n(259714),u=n(154963),m=n(562418),p=n(544477),h=n(776888),f=n(920675),g=n(236410),x=n(535651),_=n(933384);let y="new_page_dropdown--newPageIcon--jdPyp";var b=n(701506);function v({recordingKey:e}){let{Dropdown:t,toggleDropdown:n,isDropdownShown:v,dropdownTargetRef:C}=(0,x.B)("newPageDropdown"),E=(0,m.lg)(),w=(0,p.Te)(),k=(0,h.rE)();if(!w)return null;let T=[{displayText:(0,l.t)("fullscreen.pages_panel.page_dropdown_new"),optionHeight:24,editorType:null,disabled:!0},{displayText:(0,l.t)("fullscreen.pages_panel.design_page"),optionHeight:24,editorType:f._Y.DESIGN,icon:(0,i.jsx)("div",{className:y,children:(0,i.jsx)(r.N,{})}),callback:()=>k(f._Y.DESIGN)},{displayText:(0,l.t)("fullscreen.pages_panel.figjam_page"),optionHeight:24,editorType:f._Y.WHITEBOARD,icon:(0,i.jsx)("div",{className:y,children:(0,i.jsx)(c.B,{svg:b.A})}),callback:()=>k(f._Y.WHITEBOARD)},{displayText:(0,l.t)("fullscreen.pages_panel.slide_deck"),optionHeight:24,editorType:f._Y.SLIDES,icon:(0,i.jsx)("div",{className:y,children:(0,i.jsx)(a.o,{})}),callback:()=>k(f._Y.SLIDES)}],j=48;for(let e=0;e<T.length;e++)if(T[e].editorType===E){j+=24*e;break}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:u.s.absolute.w8.h8.$,ref:C,style:{bottom:`${j}px`,right:"42px"}}),(0,i.jsx)(_.K0,{className:"new_page_dropdown--newPageButton--Hzu1C",recordingKey:d.Pt(e,"newPageDropdown"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,l.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,onMouseDown:n,children:(0,i.jsxs)("div",{className:"new_page_dropdown--newPageIconsContainer--hdA5d",children:[(0,i.jsx)(s.e,{}),(0,i.jsx)("div",{className:"new_page_dropdown--newPageChevron--7bGa-",children:(0,i.jsx)(o.r,{})})]})}),v&&(0,i.jsx)(t,{minWidth:160,items:T,showPoint:!0})]})}},245834:(e,t,n)=>{n.d(t,{bU:()=>et,bG:()=>er,VS:()=>ea});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(445019),l=n(224542),d=n.n(l),c=n(723850),u=n(829012),m=n(943866),p=n(419950),h=n(7857),f=n(289555),g=n(598066),x=n(573806),_=n(508352),y=n(212198),b=n(34503),v=n(341153),C=n(776888),E=n(707470),w=n(323747),k=n(223487),T=n(276571),j=n(920675),S=n(157750),I=n(295870),A=n(943360),N=n(917340),M=n(379141),R=n(634020),P=n(405228),O=n(719749),D=n(493064),L=n(129416),F=n(971340),B=n(620132),U=n(410463),V=n(610604),H=n(737473),z=n(223556);function G({pageRowRef:e,pagesListRef:t,nodeId:n,nodeName:r,pageThumbnail:a,isLoading:s}){let l=(0,k.q5)(),u=(0,c.hC)(),m=(0,o.Xr)(z.qp);if(!l||!t.current||!e.current)return null;let h=t.current.getBoundingClientRect().left+t.current.getBoundingClientRect().width,f=h-16,g=`calc(${h}px + var(--spacer-2, 0.5rem))`,x=e.current.getBoundingClientRect().top,_=e.current.getBoundingClientRect().height;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{position:"fixed",zIndex:10,left:f+"px",top:x+"px",height:_+"px",width:"32px"}}),(0,i.jsxs)("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--U0zKR",style:{left:g,top:x+_/2},children:[(0,i.jsxs)("div",{className:"page_summary_preview--thumbnailContainer---xTyh",children:[(0,i.jsx)("div",{"data-testid":"FileThumbnail",children:(0,i.jsx)(U.V,{thumbnailType:(0,B.lv)(l.editorType,!1),thumbnailUrl:a?.thumbnail_url??null,clientMeta:a?.thumbnail_meta??l.clientMeta,noBorder:!0})}),(0,i.jsx)(A.E,{"aria-label":(0,M.t)("pages_panel.summary_preview.update_preview"),className:d()("page_summary_preview--refreshButton--mkQ4D",{"page_summary_preview--alwaysShowRefreshButton--uszR-":!a}),onClick:()=>{l&&!s&&(u("figjam_pages_summary.preview_refreshed",{previewPageId:n}),m(p.r.LOADING),H.S.updatePageCheckpointThumbnails({fileKey:l.key}).catch(()=>{u("figjam_summary_preview.page_thumbnails_request_failed_increment_metric",{})}))},"data-tooltip":(0,M.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text","data-testid":"RefreshPreviewButton",children:s?(0,i.jsx)(F.kt,{testId:"LoadingSpinner",size:"small",className:"page_summary_preview--loadingSpinner--lDqZ5"}):(0,i.jsx)(N.o,{})})]}),(0,i.jsx)("div",{className:"page_summary_preview--pageTitleContainer--ZbkWh text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:r})]})]})}let K=P.z.record(P.z.object({thumbnail_url:P.z.string(),thumbnail_meta:P.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:P.z.string().optional()}));var W=n(861940),q=n(184743),X=n(772293),Y=n(862390),J=n(665933),Z=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(Z||{});function Q(e){return(0,q.Fo)(e)?"individual":e.shiftKey?"range":null}var $=n(582866),ee=n(798913);function et(e){return(0,i.jsx)(h.u9,{label:"PagesList",children:(0,i.jsx)(en,{...e})})}function en({pages:e,isReadOnly:t,onContextMenu:n,isComparingChanges:l,onPageSwitch:d,pageToNumChanges:m,shouldHighlightActivePage:p=!0,activePageShouldUseBrandColor:h,scrollContainer:b,shouldUseButtonRows:v}){let w=(0,S.ut)(s.Ez5?.currentPageState().requestedPageChange,""),k=(0,S.ut)(s.Ez5?.uiState().showInFileMemoryPercentage,!1),T=(0,C.dh)(),j=!(0,f.wK)(),I=(0,c.U)(),A=(0,g.l7)(),N=(0,r.useRef)(null),M=(0,E.Ht)(),R=(0,a.d4)(e=>e.versionHistory),P=(0,S.J2)((0,y.UK)().showGuids),{selectedPageIds:O,handleMultiselectClick:D,cancelMultiselect:L}=function(e){let[t,n]=(0,o.fp)(z.cE),i=(0,C.dh)(),a=(0,r.useCallback)(()=>{n(e=>e.length?[]:e)},[n]),s=(0,r.useCallback)((r,s)=>{let o=Q(s);switch(o&&((0,Y.tJ)([]),X.Y5.commit()),o){case"individual":return n(t.includes(r)?t.filter(e=>e!==r):0===t.length&&i!==r?[i,r]:[...t,r]),!0;case"range":{let a=0===t.length?i:t[t.length-1],s=e.findIndex(e=>e.nodeId===a),o=e.findIndex(e=>e.nodeId===r),l=Math.min(s,o),d=Math.max(s,o),c=new Set(t),u=e.slice(l,d+1).map(e=>e.nodeId);return c.has(u[0])&&c.has(u[u.length-1])?n(t.filter(e=>!u.includes(e))):n([...t,...u.filter(e=>!c.has(e))]),!0}case null:return a(),!1}},[a,e,i,t,n]);return{selectedPageIds:t,handleMultiselectClick:s,cancelMultiselect:a}}(e),{isReordering:F,reorderingPageIds:B,startReordering:U,cancelReordering:V,commitReordering:H,draggingState:G,updateDraggingState:K}=function(e){let[t,n]=(0,r.useState)([]),i=(0,r.useRef)(null),[a,o]=(0,r.useState)(null),l=t.length>0,d=(0,c.U)(),u=(0,r.useCallback)(e=>{n(e),o(null),i.current=null},[]),m=(0,r.useCallback)(()=>{n(e=>e.length?[]:e),o(null),i.current=null},[]),p=(0,r.useCallback)((e,n)=>{if(t.includes(e)){o(null);return}let r=n.target;a&&a.dragOverPageId===e&&i.current||(i.current=r.getBoundingClientRect());let s=n.clientY-i.current.top<i.current.height/2?"before":"after";o(t=>t&&t.dragOverPageId===e&&t.insertPosition===s?t:{dragOverPageId:e,insertPosition:s})},[a,t]),h=(0,r.useCallback)(()=>!a||!l||t.includes(a.dragOverPageId)?(m(),!1):(ee.l7.user("reorder-pages",()=>{let n=(0,J.Pe)(e);"before"===a.insertPosition?[...t].sort((e,t)=>(n[e]??Number.MAX_SAFE_INTEGER)-(n[t]??Number.MAX_SAFE_INTEGER)).forEach(e=>{s.Egt?.pageMoveBeforePage(e,a.dragOverPageId)}):[...t].sort((e,t)=>(n[t]??Number.MAX_SAFE_INTEGER)-(n[e]??Number.MAX_SAFE_INTEGER)).forEach(e=>{s.Egt?.pageMoveAfterPage(e,a.dragOverPageId)})}),m(),d("page_reorder",{reorderedPageIds:t,dragOverPageId:a.dragOverPageId,insertPosition:a.insertPosition},{forwardToDatadog:!0}),!0),[e,l,t,m,a,d]);return{isReordering:l,reorderingPageIds:t,startReordering:u,cancelReordering:m,commitReordering:h,draggingState:a,updateDraggingState:p}}(e),{renamingPageId:Z,startRenaming:et,cancelRenaming:en,commitRenaming:ea,pendingPageName:es,setPendingPageName:eo}=(0,$.c)(e),el=er({pagesList:e,isComparingChanges:l});!function({pagesList:e,isDisabled:t,selectedPageIds:n,startRenaming:i,cancelMultiselect:a,cancelReordering:s}){(0,r.useEffect)(()=>{if(t)return;let r=t=>{let r=(0,J.Pe)(e),o=n.filter(t=>{let n=r[t];return void 0!==n&&!e[n].isDivider}).sort((e,t)=>r[e]-r[t]);if(0!==o.length)switch(t.keyCode){case q.Uz.ESCAPE:a(),s();break;case q.Uz.R:(0,q.Fo)(t)&&(1===o.length?i(o[0]):X.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:o}}))}};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,e,n,a,s,i])}({pagesList:e,isDisabled:t,selectedPageIds:O,startRenaming:et,cancelMultiselect:L,cancelReordering:V}),(0,r.useEffect)(()=>{let e=()=>{L(),V()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[L,V]),(0,r.useEffect)(()=>{if(!F)return;let e=e=>{e.stopPropagation(),t?V():H()};return document.addEventListener("mouseup",e),()=>document.removeEventListener("mouseup",e)},[F,t,V,H]),(0,u.C)(b?.getScrollContainer(),F);let ed=(e,n)=>{V(),t||(0,x.i)(n)||Q(n)||(O.includes(e)?U(O):(L(),U([e])))},ec=(e,n)=>{F&&!t&&(K(e,n),n.preventDefault(),n.stopPropagation())},eu=(e,n)=>{if(t||Q(n)){V();return}H()&&(n.preventDefault(),n.stopPropagation())},em=(e,n)=>{n.stopPropagation(),!t&&D(e,n)||(0,_.J)(()=>{A&&I("Dev Mode Overview Page Clicked",{pageId:e}),el(e),d?.(e)})},ep=({nodeId:e,e:t,clientX:i,clientY:r})=>{t.preventDefault(),t.stopPropagation(),n({nodeId:e,clientX:i??t.clientX,clientY:r??t.clientY})},eh=e=>{t||et(e)},ef=e=>{Z&&(t||!e?en():ea())},eg=e=>!!p&&(w?e===w:e===T),ex=(0,r.useMemo)(()=>{let t=e[0];return!!t&&e.some(e=>e.pageType!==t.pageType)},[e]);return(0,i.jsx)("div",{ref:N,children:e.map((t,n)=>(0,i.jsx)("div",{children:(0,i.jsx)(ei,{nodeId:t.nodeId,nodeName:t.name,isDivider:t.isDivider,isFirstRow:0===n,isLastRow:n===e.length-1,draggingState:G,pagesListRef:N,previewSummaryEnabled:0===B.length&&!t.isDivider&&Z!==t.nodeId,children:(0,i.jsx)(W.G,{activePageShouldUseBrandColor:h,hasMultiplePageTypes:ex,index:n,isActive:eg(t.nodeId),isComparingChanges:l,isDivider:t.isDivider,isOffline:j,isRenaming:Z===t.nodeId,nodeId:t.nodeId,nodeName:t.name,onClickCallback:em,onContextMenuCallback:ep,onMouseDownCallback:ed,onMouseMoveCallback:ec,onMouseUpCallback:eu,pageToNumChanges:m,pageType:t.pageType,pagesList:e,renamingPagePendingName:Z===t.nodeId?es:null,reorderingPageGuids:B,selectedPageGuids:O,setRenamingPagePendingName:eo,shouldShowGuids:P,shouldUseButtonRow:v,showInFileMemoryPercentage:k,showMemoryUsage:M,startRenaming:eh,stopRenaming:ef,versionHistory:R})})},t.nodeId))})}function ei({nodeId:e,nodeName:t,isDivider:n,isFirstRow:l,isLastRow:u,children:h,draggingState:f,pagesListRef:g,previewSummaryEnabled:x}){let _=(0,r.useRef)(null),[y,b]=r.useState(!1),v=(0,a.d4)(e=>e.mirror.appModel.topLevelMode===s.lyf.HISTORY),C=f&&f.dragOverPageId===e?"before"===f.insertPosition?l?"pages_list--withInsertBeforeTop--Kqeu7":"pages_list--withInsertBefore--TMjiP":u?"pages_list--withInsertAfterBottom--RTPNY":"pages_list--withInsertAfter--6ZfQO":null,E=(0,k.q5)(),[w,T]=(0,o.fp)(z.qp),S=(0,r.useMemo)(()=>E?.editorType===j._Y.WHITEBOARD&&!v,[E?.editorType,v]),A=(0,r.useMemo)(()=>y&&x&&S,[y,x,S]),N=function(e){let t=(0,k.q5)(),n=(0,O.bc)(V.SPC,{fileKey:t?.key??""},{enabled:!!(t?.key&&e)});return R.Qw.useTransform(n,e=>{if(e?.file?.pagesSignedThumbnailData.status!==D.tT.Loaded)return null;try{if(!e?.file?.pagesSignedThumbnailData.data)return null;let t=JSON.parse(e.file.pagesSignedThumbnailData.data);return K.parse(t)}catch(n){return(0,L.$D)(I.e.FIGJAM,Error(`PageSummaryPreview: Failed to parse page thumbnail data. Error: ${n.message}.`),{tags:{fileKey:t?.key},extra:{parsedPageThumbnails:e?.file?.pagesSignedThumbnailData.data}}),null}})}(S),M=(0,r.useMemo)(()=>N?.data?.[e],[e,N?.data]),P=(0,r.useMemo)(()=>w===p.r.LOADING||"loading"===N.status,[w,N.status]);(0,r.useEffect)(()=>{M?.created_at&&T(p.r.SUCCESS)},[T,M?.created_at]);let F=(0,c.hC)(),B=(0,m.ZC)(S);return(0,r.useEffect)(()=>{!B&&A&&F("figjam_summary_preview.preview_shown",{previewPageId:e})},[F,e,A,B]),(0,i.jsxs)("div",{className:d()("pages_list--pagesRowWrapper--1v7Fv",C,{"pages_list--divider--GOTq6":n}),ref:_,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),"data-testid":"PagesRowWrapper",children:[h,y&&x&&S&&(0,i.jsx)(G,{"data-testid":"PageSummaryPreview",pagesListRef:g,pageRowRef:_,nodeId:e,nodeName:t,pageThumbnail:M,isLoading:P})]})}function er({pagesList:e,isComparingChanges:t}){let n=(0,v.Z)("page_change_navigator_navigate"),i=(0,b.E)(),o=(0,c.U)(),l=(0,a.wA)(),d=(0,T._6)(),u=(0,C.dh)(),m=(0,a.d4)(e=>e.versionHistory);return(0,r.useCallback)(r=>(0,C.$P)(r,u,m,l,(0,w.Fy)(e,r)===s.xal.LOADED,o,n,i,t,d),[e,n,i,o,l,d,u,m,t])}function ea({pagesList:e,isComparingChanges:t,enabled:n=!0}){let i=(0,v.Z)("page_change_navigator_navigate"),o=(0,b.E)(),l=(0,c.U)(),d=(0,a.wA)(),u=(0,T._6)(),m=(0,C.dh)(n),p=(0,a.d4)(e=>e.versionHistory);return(0,r.useCallback)(async r=>{n&&await (0,C.$P)(r,m,p,d,(0,w.Fy)(e,r)===s.xal.LOADED,l,i,o,t,u)},[e,i,o,l,d,u,m,p,t,n])}},79600:(e,t,n)=>{n.d(t,{k3:()=>p,q0:()=>h});var i=n(105652),r=n(445019),a=n(844268),s=n(943866),o=n(371591),l=n(253983),d=n(640753),c=n(805940),u=n(906401),m=n(474538);function p({initialHeight:e,numberOfPages:t,upsellHeight:n,panelHeadersHeight:r,showingExtraControls:d,scrollContainerInnerRef:c,filterState:p,onHeightChange:f}){let[g,x]=(0,i.useState)(void 0),_=(0,i.useRef)(!1),{windowInnerHeight:y}=(0,o.l)(),b=(0,i.useCallback)(function(e){x(e),f?.(e)},[f]);(0,i.useLayoutEffect)(()=>{void 0===e||_.current||(x(e),_.current=!0)},[e]);let v=function({numberOfPages:e,upsellHeight:t,panelHeadersHeight:n,showingExtraControls:r,windowInnerHeight:a}){return(0,i.useMemo)(function(){let i=e*u.fr;return i=Math.ceil(i/u.fr)*u.fr+t+u.UA,r&&(i+=u.fr),Math.min(i,Math.round(.25*(a-(0,l.bG)()-u.Cg-n)))},[n,t,a,e,r])}({numberOfPages:t,upsellHeight:n,panelHeadersHeight:r,showingExtraControls:d,windowInnerHeight:y}),C=h({scrollContainerInnerRef:c,windowInnerHeight:y}),E=g?C(g):v;return function({filterState:e,computedHeight:t,defaultHeight:n,setHeight:r}){let o=(0,s.ZC)(t),l=(0,a.F)({previousComputedHeight:o,defaultHeight:n,setHeight:r});(0,i.useLayoutEffect)(()=>{if(void 0===e)return;let{previousComputedHeight:t,defaultHeight:n,setHeight:i}=l.current;t&&i(e===m.m.ALL?Math.max(t,n):Math.min(t,n))},[e,l])}({filterState:p,computedHeight:E,defaultHeight:v,setHeight:b}),{height:E,setHeight:b,defaultHeight:v}}function h({scrollContainerInnerRef:e,windowInnerHeight:t}){let{topLevelObjectRowHeight:n}=i.useContext(c.y0);return(0,i.useCallback)(function(i){return Math.max(1.5*u.fr,Math.min(i,t-(e.current?.getBoundingClientRect().top??175)-(1.5*n+(u.uF+u.ym))))},[e,t,n])}(0,d.Wh)(()=>(0,r.eU)(null))},474538:(e,t,n)=>{n.d(t,{m:()=>i});var i=(e=>(e.FILTERED="filtered",e.ALL="all",e))(i||{})},311030:(e,t,n)=>{n.d(t,{R:()=>Y});var i=n(239976),r=n(429921),a=n(75340),s=n(379141),o=n(776888),l=n(906401),d=n(105652),c=n(270450),u=n(499735),m=n(598066),p=n(257556),h=n(562418),f=n(471380),g=n(579263),x=n(617451),_=n(848170),y=n(236994);function b({isReadOnly:e,isPagesOpen:t,isComparingChanges:n,hasMultiplePageTypes:r,onClickNewPage:s,onCanvasSearch:l,onPageContextMenu:b,recordingKey:v,title:C,tooltipText:E}){let w=(0,o.dh)(),k=(0,o.nn)(),T=(0,h.m0)(),j=(0,m.l7)(),S=r||(0,c.kc)().interop_pages,I=!(0,g.HY)()&&(e||T||j)&&!!l,A=(0,d.useCallback)(e=>{(0,p.jo)(e),t||b?.({nodeId:w,clientX:e.clientX,clientY:e.clientY})},[b,t,w]);return(0,i.jsxs)(a.Y9,{variant:"leftPanel",size:"lg",children:[I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.JU,{onContextMenu:A,recordingKey:u.Pt(v,"collapsedRow"),children:(0,i.jsx)("span",{className:y.W,"data-onboarding-key":"pages-panel-toggle",children:t?(0,i.jsx)("span",{children:C}):k||""})}),!n&&(0,i.jsx)(a.X0,{children:(0,i.jsx)(f._,{onClick:l})})]}):(0,i.jsx)(a.JU,{onContextMenu:A,recordingKey:u.Pt(v,"collapsedRow"),children:C}),!e&&(0,i.jsx)(a.X0,{children:S?(0,i.jsx)(_.t,{recordingKey:v}):(0,i.jsx)(x.i,{onClick:s,recordingKey:u.Pt(v,"newPage"),tooltipText:E})})]})}var v=n(224542),C=n.n(v),E=n(687934),w=n(933870),k=n(862390),T=n(323747),j=n(674531),S=n(503120),I=n(20002),A=n(844268),N=n(346942),M=n(554408),R=n(536378),P=n(130763),O=n(338630),D=n(535996),L=n(550534),F=n(384203),B=n(223487),U=n(920675),V=n(329076),H=n(477916);function z({onHeightChange:e}){let t=(0,I.wA)(),n=(0,B.q5)(),r=(0,F.p8)("pagesList").length,a=(0,h.m0)(),o=(0,P.Fr)(),l=D.h.useTrackingContext({trigger:H.b.PAGE_TRACKER_UPSELL}),c=(0,A.F)(e),u=d.useCallback(e=>{c.current?.(e?.getBoundingClientRect().height||0)},[r]),m=n?.team,p=n?.plan,f=m&&p&&m.canEdit&&p.tier===U.Ag.STARTER;if(r<=0||!n||a||!f)return null;let g=(0,V.Lj)(n);if((g<=1||g>=1/0)&&!o(n))return null;let x=()=>{t((0,R.to)({type:M.V,data:{teamId:m?.id,entrypoint:L.C.PAGE_TRACKER_UPSELL,openCheckoutInNewTab:!0}}))},_=(0,i.jsx)(N.Us,{onClick:x,trusted:!0,"data-testid":"page_tracker_upsell_link",children:(0,s.tx)("fullscreen.pages_panel.see_plans_that_offer_more")}),y=(0,i.jsx)(N.Us,{onClick:x,trusted:!0,"data-testid":"page_tracker_upsell_link",children:(0,s.tx)("fullscreen.pages_panel.get_unlimited_pages_and_more")}),b=r/V.LF[n.editorType??U._Y.DESIGN],v=C()({"page_tracker_upsell--progressPartial--dTK-E":b<1,"page_tracker_upsell--progressCompleteWarning--JLBus page_tracker_upsell--progressComplete--zEhZO":1===b,"page_tracker_upsell--progressCompleteDanger--Oyfq9 page_tracker_upsell--progressComplete--zEhZO":b>1}),E=`${Math.trunc(100*Math.min(b,1))}%`,w={fileTeamId:m?.id,numPages:r,...l};return(0,i.jsx)(O.fu,{name:"Page Tracker Upsell",properties:w,children:(0,i.jsx)("div",{className:"page_tracker_upsell--upsellContainer---KABP",ref:u,"data-testid":"page_tracker_upsell",children:(0,i.jsxs)("div",{className:"page_tracker_upsell--upsellBody--PDiPi",children:[(0,i.jsx)("div",{className:"page_tracker_upsell--progressBar--9r3-h",children:(0,i.jsx)("div",{className:v,style:{width:E},"data-testid":"page_tracker_progress_bar"})}),(0,i.jsx)("p",{className:"page_tracker_upsell--upsellText--dDSJ5",children:(()=>{let e=V.LF[n.editorType??U._Y.DESIGN]-r;return e>=2?(0,i.jsxs)(i.Fragment,{children:[(0,s.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),(0,i.jsx)("br",{}),_]}):1===e?(0,i.jsxs)(i.Fragment,{children:[(0,s.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),(0,i.jsx)("br",{}),y]}):0===e?(0,i.jsxs)(i.Fragment,{children:[(0,s.tx)("fullscreen.pages_panel.all_n_free_pages_used",{maxFreePages:V.LF[n.editorType??U._Y.DESIGN]}),(0,i.jsx)("br",{}),y]}):(0,i.jsxs)(i.Fragment,{children:[(0,s.tx)("fullscreen.pages_panel.all_free_pages_used"),(0,i.jsx)("br",{}),y]})})()})]})})})}var G=n(245834),K=n(79600),W=n(886108),q=n(601775);function X({pages:e,initialHeight:t,extraControls:n,panelHeadersHeight:r,shouldHighlightActivePage:a,isComparingChanges:s,pageToNumChanges:o,isReadOnly:l,onPageContextMenu:c,filterState:u,onHeightChange:m}){let p=(0,T._Z)().isLoading,h=(0,d.useRef)(null);(0,W.a)({pagesList:e,scrollContainerRef:h});let f=(0,d.useRef)(null),[g,x]=(0,d.useState)(0),_=e.length,y=(0,j.o3)(j.nt.newResizablePanel),b=(0,j.o3)(j.nt.designPagePickerA11y),{height:v,setHeight:I,defaultHeight:A}=(0,K.k3)({initialHeight:t,numberOfPages:_,upsellHeight:g,panelHeadersHeight:r,showingExtraControls:!!n,scrollContainerInnerRef:f,filterState:u,onHeightChange:m});return(0,i.jsx)(E.V,{children:(0,i.jsx)(S.w,{size:v,defaultSize:A,onResize:e=>{I(e),k.Uc("")},side:"bottom",className:p?q.aY:q.l$,children:(0,i.jsxs)(w.P,{scrollBarAlways:!1,ref:h,scrollContainerRef:f,className:C()(q.jG,{[q.ge]:!y}),children:[(0,i.jsx)(G.bU,{pages:e,scrollContainer:h.current??void 0,shouldHighlightActivePage:a,isComparingChanges:s,pageToNumChanges:o,isReadOnly:l,onContextMenu:c,shouldUseButtonRows:b}),n,(0,i.jsx)(z,{onHeightChange:x})]})})})}function Y({height:e,onHeightChange:t,isOpen:n,onToggle:d,showHeader:c=!0,pages:u,extraControls:m,filterState:p,panelHeadersHeight:h=l.uF,shouldHighlightActivePage:f=!0,isComparingChanges:g=!1,pageToNumChanges:x,isReadOnly:_,onPageContextMenu:y,onCanvasSearch:v}){let C=(0,o.rE)(),E=u.some(e=>u[0]&&e.pageType!==u[0].pageType);return(0,i.jsx)(r.o,{eventListeners:["onClick"],children:(0,i.jsx)("div",{className:"pages_panel--pagesPanelContent--xsgwV",children:(0,i.jsxs)(a.bL,{isOpen:n,toggle:d,children:[c&&(0,i.jsx)(b,{hasMultiplePageTypes:E,isComparingChanges:g,isPagesOpen:n,isReadOnly:_,onCanvasSearch:v,onClickNewPage:()=>C(null),onPageContextMenu:y,recordingKey:"pagesPanel",title:(0,s.t)("fullscreen.pages_panel.pages"),tooltipText:(0,s.t)("fullscreen.pages_panel.add_new_page")}),(0,i.jsx)(a.UC,{children:n&&(0,i.jsx)(X,{extraControls:m,filterState:p,initialHeight:e??void 0,isComparingChanges:g,isReadOnly:_,onHeightChange:t,onPageContextMenu:y,pageToNumChanges:x,pages:u,panelHeadersHeight:h,shouldHighlightActivePage:f})})]})})})}},861940:(e,t,n)=>{n.d(t,{v:()=>V,G:()=>U});var i=n(239976),r=n(105652),a=n(20002),s=n(449979),o=n(446862),l=n(943360),d=n(388733),c=n(627917),u=n(919530),m=n(163608),p=n(97966),h=n(692376),f=n(854225),g=n(379141),x=n(270450),_=n(445019),y=n(224542),b=n.n(y),v=n(499735),C=n(259714),E=n(888903),w=n(562418),k=n(577355),T=n(526465),j=n(323747),S=n(157750),I=n(456556),A=n(236410),N=n(416854),M=n(184743),R=n(690252);function P({value:e,setValue:t,recordingKey:n,isDisabled:a,stopRenaming:s}){let o=(0,r.useRef)(null);(0,r.useEffect)(()=>{o.current?.select()},[]);let l=v.v_(n,"keydown",e=>{if(e.keyCode===M.Uz.ESCAPE)s(!1),e.stopPropagation();else if(e.keyCode===M.Uz.ENTER)e.preventDefault(),s(!0);else{if(e.keyCode!==M.Uz.TAB)return(0,k.jr)(e,k.W0.NO),v.aH;e.preventDefault(),s(!0)}}),d=v.AF(n,"change",e=>{a||t(e.currentTarget.value)}),c=v.iQ(n,"blur",()=>{s(!0)});return(0,i.jsx)(R.ks,{"aria-label":(0,g.t)("fullscreen.pages_panel.page_name"),autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"page_rename_input--input--5hyJ8",innerRef:o,onBlur:c,onChange:d,onKeyDown:l,spellCheck:!1,value:e})}var O=n(601775),D=n(684081),L=n(701506);function F({editorType:e}){switch(e){case f._YF.DESIGN:return(0,i.jsx)(d.N,{});case f._YF.WHITEBOARD:return(0,i.jsx)(C.B,{svg:L.A});case f._YF.SLIDES:return(0,i.jsx)(c.o,{});default:return null}}function B(e){let{isActive:t,isDivider:n,pageType:r,hasMultiplePageTypes:a}=e;return n||!a?null:(0,i.jsx)("div",{className:b()(O.n6,{[O.vu]:t}),children:(0,i.jsx)(F,{editorType:r})})}function U({pageType:e,hasMultiplePageTypes:t,nodeId:n,nodeName:l,isRenaming:d,startRenaming:c,stopRenaming:u,renamingPagePendingName:m,setRenamingPagePendingName:p,isActive:f,shouldShowGuids:y,onMouseDownCallback:S,onMouseUpCallback:M,onMouseMoveCallback:R,onClickCallback:L,reorderingPageGuids:F,selectedPageGuids:U,onContextMenuCallback:z,showMemoryUsage:G,showInFileMemoryPercentage:K,isOffline:W,isComparingChanges:q,pageToNumChanges:X,versionHistory:Y,isDivider:J,pagesList:Z,index:Q,activePageShouldUseBrandColor:$,shouldUseButtonRow:ee}){let et=(0,a.wA)(),en="whiteboard"===(0,w.lg)(),[ei,er]=r.useState(!1),ea=(0,_.md)(N.l),es=(0,I.Fk)((e,t,n)=>n?e.get(t)?.nodeMemoryUsage:null,n,K),eo=(0,I.Fk)((e,t,n)=>n?e.get(t)?.rootMemoryUsage:null,n,K),el=r.useMemo(()=>(0,j.Fy)(Z,n)===h.xal.LOADED,[n,Z]),ed=h.h3O?.getSessionState()===h.kul.JOINED,ec=r.useMemo(()=>W&&!ed&&!el&&!!h.h3O?.isIncrementalSession(),[W,el,ed]),eu=v.Pt("pagesPanel","row",Q)||"",em=v.rf(eu,"contextmenu",e=>{e.preventDefault(),!ec&&z&&z({nodeId:n,e})}),ep=(0,r.useCallback)(()=>{ec||d||(eI.current="keyboard"===o.F.type,c(n))},[c,ec,d,n]),eh=v.rf(eu,"dblclick",()=>{ep()}),ef=(0,r.useCallback)(e=>{if("Enter"!==e.key)return(0,k.jr)(e,k.W0.NO),v.aH;e.preventDefault(),ep()},[ep]),eg=v.rf(eu,"click",e=>{if(!J&&!d){if(ec){et(E.F.enqueue({type:"offline-page-switch",message:(0,g.t)("fullscreen.pages_panel.unavailable_offline")}));return}L(n,e)}}),ex=r.useCallback(e=>{ec||d||S(n,e)},[d,n,S,ec]),e_=r.useCallback(e=>{d||R(n,e)},[d,n,R]),ey=r.useCallback(e=>{d||M(n,e)},[d,n,M]),eb=r.useCallback(()=>(0,s.uy)(es)||(0,s.uy)(eo)?"":(0,T.pr)(es,eo,!0),[es,eo]),ev=q&&X?.get(n)||0,eC=Y?.activeId&&"current_version"===Y.activeId,eE=G&&K&&!d&&eC,ew=!q&&!d,ek=J&&!f&&!d,eT=en&&!d&&f&&U?.length===0,ej=b()({[O.mB]:ek,[O.oG]:!ek,[O.sl]:f,[O.sR]:eT&&ei&&ea,[O.Pl]:$,[O.Dq]:0===F.length&&0===U.length,[O.As]:ee},0!==F.length||0!==U.length?U.includes(n)?O.wH:F.includes(n)?O.iB:0===F.length?O.Dq:"":""),eS=r.useRef(null),eI=r.useRef(!1),eA=r.useCallback(e=>{u(e),eI.current&&(eI.current=!0)},[u]);r.useLayoutEffect(()=>{!d&&eI.current&&eS.current&&(eS.current.focus(),eI.current=!1)},[d]);let eN=d&&(0,i.jsx)(P,{value:m||"",setValue:p,stopRenaming:eA,recordingKey:eu,isDisabled:ec}),eM=ec&&!ek&&(0,i.jsx)("div",{className:O.Nr,"data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,g.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline",children:(0,i.jsx)(C.B,{className:O.VQ,svg:D.A,"data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,g.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})}),eR=(0,x.kc)().version_diffing&&q&&ev>0&&(0,i.jsx)("div",{className:O.Sp,children:ev}),eP=eT&&!t,eO=eP?(0,i.jsx)(H,{accessibleLabel:ee?(0,g.t)("fullscreen.pages_panel.page_row.more_actions",{pageName:l}):void 0,onContextMenuCallback:z,nodeId:n,isMoreActionsActive:ei,setIsMoreActionsActive:er,isPageContextMenuOpen:ea,shouldAbsolutePositionButton:ee}):null,eD=(0,i.jsxs)(i.Fragment,{children:[!ee&&eN,ek?(0,i.jsx)("span",{className:O.jE,"data-testid":"pageDivider"}):!d&&(0,i.jsx)("div",{className:eP?O.R:O.Nz,children:(0,i.jsx)("span",{className:ec?O.YW:O.KE,children:y?`${l} (${n})`:l})}),(0,i.jsxs)("div",{className:O.q8,children:[ew&&(0,i.jsx)(V,{pageGuid:n,fallback:(0,i.jsx)(B,{isActive:f,isDivider:J,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),eM,eE&&(0,i.jsx)("span",{className:ec?O.hi:O.VC,dir:"auto",children:eb()}),eR,!ee&&eO]})]});return ee?d?(0,i.jsxs)("div",{className:ej,draggable:!1,onContextMenu:em,children:[eN,(0,i.jsxs)("div",{className:O.q8,children:[eM,eR]})]}):(0,i.jsxs)("div",{className:"pages_panel_row--pageRowContainer--BaOAx",children:[(0,i.jsx)("button",{ref:eS,"aria-current":f?"page":void 0,"aria-label":ek?(0,g.t)("fullscreen.pages_panel.page_divider"):void 0,className:ej,draggable:!1,onClick:eg,onContextMenu:em,onDoubleClick:eh,onKeyDown:ef,onMouseDown:ex,onMouseMove:e_,onMouseUp:ey,type:"button",children:eD}),eO]}):(0,i.jsx)("div",{className:ej,draggable:!1,onClick:eg,onContextMenu:em,onDoubleClick:eh,onMouseDown:ex,onMouseMove:e_,onMouseUp:ey,children:eD})}function V({pageGuid:e,margin:t,fallback:n=null,hideBackground:r=!1}){let a=(0,S.ut)(h.Ez5?.currentSceneState().numReadyNodesByPage,null),s=(0,S.ut)(h.Ez5?.currentSceneState().numCompletedNodesByPage,null),o=a?.has(e)?a.get(e)>0:!!h.glU?.nodeStatusesOnPage(e).includes(f.zIx.BUILD),l=s?.has(e)?s.get(e)>0:!!h.glU?.nodeStatusesOnPage(e).includes(f.zIx.COMPLETED);return l&&!o?(0,i.jsx)(u.g,{"aria-label":(0,g.t)("dev_handoff.status.completed"),className:"pages_panel_row--pageCompleted--dAT2R","data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,g.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):o||l?(0,i.jsx)(m.O,{"aria-label":(0,g.t)("dev_handoff.tag.ready_to_build"),className:b()("pages_panel_row--pageReady--xQlbE",{"pages_panel_row--hideBackground--Q9HH3":r}),style:t?{[t]:"8px"}:void 0,"data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,g.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):n}function H({accessibleLabel:e,onContextMenuCallback:t,nodeId:n,isMoreActionsActive:a,isPageContextMenuOpen:s,setIsMoreActionsActive:o,shouldAbsolutePositionButton:d}){let c=r.useRef(null);return r.useEffect(()=>{s||o(!1)},[s,o]),(0,i.jsx)(l.E,{ref:c,"aria-label":e,htmlAttributes:d?void 0:{onDoubleClick:e=>e.stopPropagation()},onClick:e=>{o(!0);let i=c.current?.getBoundingClientRect();i&&t({nodeId:n,e,clientX:i.x+-4,clientY:i.y+i.height+10})},className:b()("pages_panel_row--pageMoreActionsButton--uVZLK",{"pages_panel_row--pageMoreActionsButtonActive--nJgDf":a&&s,"pages_panel_row--pageMoreActionsAbsolutePosition--vmzmu":d}),"data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,g.t)("fullscreen.pages_panel.more_pages_actions"),"data-tooltip-show-above":!0,children:(0,i.jsx)(p.A,{className:"pages_panel_row--pageMoreActionsIcon--W3FWv"})})}},309092:(e,t,n)=>{n.d(t,{y:()=>s});var i=n(239976),r=n(224542),a=n.n(r);function s({children:e,withBorder:t,autoHeight:n=!1}){return(0,i.jsx)("div",{className:a()("tabs_header--tabsHeader--mCKhR",{"tabs_header--autoHeight--eM2PI":n,"tabs_header--withBorder--UAaF2":t}),children:e})}},341637:(e,t,n)=>{n.d(t,{ay:()=>_,FV:()=>v,eG:()=>w,BN:()=>k});var i=n(239976),r=n(105652),a=n(888830),s=n(692376),o=n(379141),l=n(270450),d=n(499735),c=n(19047),u=n(562418),m=n(276571),p=n(674531),h=n(579263),f=n(624631),g=n(363198),x=n(251695);let _=s.xae.ASSETS.toString(),y=s.xae.CHAT.toString(),b=s.xae.CODE.toString(),v=s.xae.LAYERS.toString(),C=s.xae.DESIGN_SYSTEM.toString(),E=s.xae.VARIABLES.toString();function w({tabManager:e,tabPropsMap:t}){let n=(0,h.HY)();return(0,i.jsx)("div",{className:"ui3_tabs--tabStrip--ka3f-",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:(0,i.jsxs)(a.t.TabStrip,{manager:e,children:[(0,i.jsx)(a.t.Tab,{...t[v],"data-testid":f.pk,children:(0,o.tx)("fullscreen.pages_panel.file_tab")}),(0,i.jsx)(a.t.Tab,{...t[b],children:(0,o.tx)("fullscreen.pages_panel.code_tab")}),!n&&(0,i.jsx)(a.t.Tab,{...t[_],onboardingKey:f.Qr,children:(0,o.tx)("fullscreen.pages_panel.assets_tab")})]})})}function k(e,t){let n=(0,m._6)(),i=(0,h.HY)(),{showPublish:o,showLayersPanel:f,showCodePanel:w,showChat:k}=(0,x.U)(),T=(0,g.Vj)(n),j=(0,u.ow)(),S=(0,u.Em)(),I=(0,l.kc)().ai_assistant||!1,A=(0,l.kc)().ds_home||!1,N=(0,p.o3)(p.nt.designNavBarView),M=r.useCallback(e=>{let t=parseInt(e);switch(t){case s.xae.LAYERS:f();break;case s.xae.CODE:w();break;case s.xae.ASSETS:o();break;case s.xae.CHAT:k();break;case s.xae.DESIGN_SYSTEM:case s.xae.VARIABLES:f(),(0,c.x1)("UI3Tabs","NavBar-only tab showing in non-NavBar experience",{reportAsSentryError:!0,tab:t});break;default:(t=>{throw Error("Unhandled tab behavior: "+e)})(0)}},[f,w,o,k]);return a.t.useManagedTabs({[v]:!0,[b]:T,[_]:!j,[y]:S&&I&&!1,[C]:i&&A,[E]:i&&N},e.toString(),M,{recordingKey:d.Pt(t,"tabs")})}},654590:(e,t,n)=>{n.d(t,{K:()=>c,g:()=>u});var i=n(105652),r=n(20002),a=n(445019),s=n(450207),o=n(324880),l=n(665933),d=n(223556);function c(){let e=(0,r.wA)();return(0,i.useCallback)(({nodeId:t,clientX:n,clientY:i})=>{e((0,s.j7)({type:o.SA,data:{clientX:n,clientY:i,pageId:t}}))},[e])}function u({pagesList:e,shouldShowDuplicateOption:t=!0}){let n=(0,r.wA)(),[c,u]=(0,a.fp)(d.cE);return(0,i.useCallback)(({nodeId:i,clientX:r,clientY:a})=>{let d=new Set(e.map(e=>e.nodeId)),m=c.filter(e=>d.has(e));m.length>0&&!m.includes(i)&&d.has(i)&&(m.push(i),u(m));let p=(()=>{if(m.length>0){let t=(0,l.Pe)(e);return[...m].sort((e,n)=>t[e]-t[n])}return[i]})();0!==p.length&&n((0,s.j7)({type:o.d2,data:{clientX:r,clientY:a,pageIds:p,shouldShowDuplicateOption:t}}))},[c,n,e,u,t])}},886108:(e,t,n)=>{n.d(t,{a:()=>u});var i=n(105652),r=n(445019),a=n(40297),s=n(844268),o=n(776888),l=n(223556),d=n(526865);let c=(0,a.hG)(d.xM9);function u({pagesList:e,scrollContainerRef:t}){let n=(0,o.dh)(),a=(0,r.md)(l.l7),d=(0,s.F)(e),c=(0,s.F)(!!a);(0,i.useLayoutEffect)(()=>{c.current||m({pageId:n,pagesList:d.current,scrollContainerRef:t})},[n,t,d,c]),(0,i.useLayoutEffect)(()=>{a&&m({pageId:a,pagesList:d.current,scrollContainerRef:t})},[a,t,d])}function m({pageId:e,pagesList:t,scrollContainerRef:n}){let i=n.current;if(!i)return;let r=t.findIndex(t=>t.nodeId===e);if(-1===r)return;let a=r*c,s=a+c,o=i.getScrollTop(),l=o+i.getTrackHeight();a<o?i.scrollTo(a-c/2):s>l&&i.scrollTo(o+(s-l)+c/2)}},582866:(e,t,n)=>{n.d(t,{c:()=>g});var i=n(105652),r=n(20002),a=n(692376),s=n(466082),o=n(445019),l=n(723850),d=n(543595),c=n(508352),u=n(776888),m=n(323747),p=n(223487),h=n(406673),f=n(223556);function g(e){let t=(0,u.dh)(),[n,g]=(0,o.fp)(f.l7),[x,_]=(0,o.fp)(f.oZ),y=(0,p.q5)(),b=(0,r.wA)(),v=(0,u.rE)(),C=(0,r.d4)(e=>e.versionHistory),E=(0,l.am)(),w=(0,h.W)(),k=(0,i.useCallback)(e=>{g(e),a.glU?.triggerActionInUserEditScope("track-page-rename",{args:{nodeId:e}})},[g]),T=(0,i.useCallback)(()=>g(null),[g]),j=(0,i.useCallback)(async()=>{if(!n)return;let i=(0,s.UN)().get(n),r=i?.name,o=x||"",l=await (0,u.zO)({openFile:y,pageNode:i,pageName:o});if((0,u.CQ)({openFile:y,pageId:n,newName:o,oldName:r,trackRenamePage:()=>E("page_commit_rename",{nodeId:t,isDivider:l},{forwardToDatadog:!0})}),l&&t===n){let n=e.findIndex(e=>e.nodeId===t),i=n+1,r=e[i];for(;r&&r.isDivider;)i+=1,r=e[i];if(r)(0,c.J)(()=>(0,u.$P)(r.nodeId,t,C,b,(0,m.Fy)(e,r.nodeId)===a.xal.LOADED,E));else{let i=n-1,r=e[i];for(;r&&r.isDivider;)i-=1,r=e[i];r?(0,c.J)(()=>(0,u.$P)(r.nodeId,t,C,b,(0,m.Fy)(e,r.nodeId)===a.xal.LOADED,E)):v(null)}}g(e=>e===n?null:e),w({newTitle:o,nodeType:"PAGE"}),r!==o&&(0,h.d)(o).length>0&&(0,d.YQ)({id:"page_name_changed_with_rfd_indicator",properties:{pageId:n}})},[e,v,n,g,x,y,t,C,E,b,w]);return{renamingPageId:n,startRenaming:k,cancelRenaming:T,commitRenaming:j,pendingPageName:x,setPendingPageName:_}}},320681:(e,t,n)=>{n.d(t,{d:()=>o});var i=n(105652),r=n(20002),a=n(127446),s=n(223487);function o({defaultIsOpen:e}){let[t,n]=function(e){let t=(0,s.tS)(),[n,o]=(0,i.useState)(()=>t?l(t)??e:e);return(0,i.useLayoutEffect)(()=>{if(!t)return;let e=l(t);e&&o(e)},[t]),[n,(0,i.useCallback)(e=>{o(n=>{let i="function"==typeof e?e(n):e;return t&&function(e,t){let n=(0,a.TQ)();if(n){let i=JSON.parse(n.getItem("pages-panel")||"{}");if((0,r.bN)(i[e],t))return;i[e]=t,n.setItem("pages-panel",JSON.stringify(i))}}(t,i),i})},[t])]}({height:null,isOpen:e,devHandoffShowAllPages:!1}),o=(0,i.useCallback)(e=>{n(t=>({...t,isOpen:e}))},[n]),d=(0,i.useCallback)(e=>{n(t=>({...t,height:e}))},[n]),c=(0,i.useCallback)(e=>{n(t=>({...t,devHandoffShowAllPages:e}))},[n]);return{height:t.height,setHeight:d,isOpen:t.isOpen,setIsOpen:o,devHandoffShowAllPages:t.devHandoffShowAllPages,setDevHandoffShowAllPages:c}}function l(e){let t=(0,a.TQ)();if(t)return JSON.parse(t.getItem("pages-panel")||"{}")[e]}},158910:(e,t,n)=>{n.d(t,{Mw:()=>e_,ON:()=>ec});var i=n(239976),r=n(105652),a=n(20002),s=n(942356),o=n(169909),l=n(454705),d=n(692376),c=n(379141),u=n(270450),m=n(445019),p=n(610265),h=n(141288),f=n(393463),g=n(337812),x=n(328452),_=n(154963),y=n(595433),b=n(842582),v=n(888903),C=n(254056),E=n(202648),w=n(58756),k=n(265573);let T="interacted_with_slack_and_teams_announcement";var j=n(960210),S=n(321411),I=n(124720),A=n(136393),N=n(639184),M=n(811804),R=n(720410),P=n(845743),O=n(817810),D=n(964929),L=n(623870),F=n(223487),B=n(605985),U=n(394396),V=n(920675),H=n(157750),z=n(790016),G=n(702417),K=n(620573),W=n(937182),q=n(730436),X=n(634020),Y=n(224542),J=n.n(Y),Z=n(122313),Q=n(75962),$=n(699165),ee=n(714778),et=n(338630),en=n(677743),ei=n(690252);let er="announcement--announcementAppImg--e3gql",ea="announcement--announcementBrandImg--6owCo",es="announcement--imageNoPaddingTop--fPQa0";function eo(e){return e.link?(0,i.jsx)("div",{children:(0,i.jsx)(ee.Ph,{trackingProperties:{text:e.mainButtonTitle},href:e.link,newTab:!0,children:e.children})}):(0,i.jsx)("div",{className:_.s.wFull.$,children:(0,i.jsx)(b.$z,{variant:"secondary",onClick:e.onClick,disabled:e.disabled,children:e.children})})}function el(e){let t=(0,B.iZ)(),n=(0,F.MY)(),r=(0,a.wA)(),s=(0,L.w)(),o=()=>{let t=e.asset.bg?{backgroundColor:e.asset.bg}:void 0;return"image"===e.asset.type?(0,i.jsx)(Q.oW,{src:e.asset.src,className:J()("brand"===e.layoutStyle?ea:er,{[es]:e.asset.noPaddingTop}),alt:e.asset.alt,style:t}):(0,i.jsx)("video",{src:e.asset.src,className:J()("brand"===e.layoutStyle?ea:er,{[es]:e.asset.noPaddingTop}),"aria-label":e.asset.alt,style:t,autoPlay:!0,loop:!0,muted:!0})},l=X.Qw.useTransform(n,e=>t?.id===e?.creatorId?"owner":e?.canEdit?"editor":"viewer");return(0,i.jsx)(et.fu,{name:e.trackingContextName,properties:{userId:t?.id,jobTitle:s,userRole:l.unwrapOr("viewer")},enabled:e.trackingDisabled&&"loaded"===l.status,children:(0,i.jsx)(Z.k,{name:"announcement_panel",children:(0,i.jsxs)(ei.Zk,{className:"announcement--announcementPanel--nGwal",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"announcement--announcementTitleRow--G7JRH",children:[(0,i.jsx)(en.xw,{extended:!0,doNotReserveSpaceForChevron:!0,children:(0,i.jsx)("div",{className:_.s.with({ml8:!0}).$,children:e.title})}),(0,i.jsx)("div",{className:"announcement--announcementCloseButton--H4W9P",children:(0,i.jsx)(b.Me,{"aria-label":(0,c.t)("general.close"),onClick:e.onDismiss?e.onDismiss:()=>{r(A.b({[e.userFlagName]:!0}))},trackingProperties:{action:"close"},children:(0,i.jsx)(q.X,{})})})]}),"app"===e.layoutStyle&&e.description,"brand"===e.layoutStyle&&o()]}),"app"===e.layoutStyle&&o(),"brand"===e.layoutStyle&&e.description,e.mainButtonOverride,!e.mainButtonOverride&&e.mainButtonTitle&&(0,i.jsx)(eo,{link:e.ctaHref,onClick:e.onCtaClick,disabled:e.isLoading,mainButtonTitle:e.mainButtonTitle,children:(0,i.jsx)($.x,{isLoading:e.isLoading,className:"announcement--loading--VSIUH",children:()=>(0,i.jsx)(i.Fragment,{children:e.mainButtonTitle})})})]})})})}let ed=(0,O.ck)();var ec=(e=>(e.DESIGN="Design",e.PROTOTYPE="Prototype",e.INSPECT="Inspect",e.HANDOFF="Handoff",e.COMMENTS="Comments",e))(ec||{});let eu={assetSrc:(0,f.ck)("828793d9a2d4cff784587a20da2cd458dceddfe9"),backgroundColor:"#F5F5F5",imageNoPaddingTop:!0},em={assetSrc:(0,f.ck)("fb12393ac78bdda14d77f2be682d3f2e67fe7f6f"),backgroundColor:"#383838",imageNoPaddingTop:!0},ep=e=>{let t=e?.currentPlanUser?.draftsFolderId??void 0;return{folderId:t,isDraftsFolder:void 0!==t}},eh=(e,t)=>{let n=new Date(e);return n.setDate(n.getDate()+t),n},ef=new Date,eg=[{userFlagName:"dismissed_figma_make_prototype_announcement",AnnouncementComponent:function({userFlagName:e}){let t=(0,a.wA)(),n=(0,F.q5)(),r="dark"===(0,M.DP)(),{folderId:s,isDraftsFolder:o}=ep(n),d=(0,I.$)({folderId:s,isDraftsFolder:o,editorType:V._Y.FIGMAKE,forceOpenNewTab:!0,newFileFrom:G.f6.FIGMAKE_PROTOTYPE_ANNOUNCEMENT,contextClicked:"figmake_prototype_announcement_created"}),u={type:"video",src:r?(0,f.ck)("001c68beb7c3ebcc9c080f1104272404696c536b"):(0,f.ck)("8aa3d03397da517c320149f5e387c1030ceebe13"),alt:(0,c.t)("upsell.figma_make_prototype_announcement.image_alt"),bg:r?"#2D2E46":"#F7F6FF",noPaddingTop:!0};return(0,i.jsx)(el,{asset:u,description:(0,c.t)("upsell.figma_make_prototype_announcement.description"),layoutStyle:"brand",mainButtonOverride:(0,i.jsx)(l.J,{brand:"seascape",children:(0,i.jsx)(b.lR,{variant:"primary",onClick:d,trackingProperties:{trackingDescriptor:N.c.TRY_FIGMA_MAKE},children:(0,c.t)("upsell.figma_make_prototype_announcement.button_title")})}),onDismiss:()=>{t(A.b({[e]:!0}))},title:(0,c.t)("upsell.figma_make_prototype_announcement.title"),trackingContextName:"Figma Make Prototype Announcement",userFlagName:e})},panelName:"Prototype",additionalDisplayBlocker:({canCreateFigmakeFileInTargetFolder:e})=>!e},{userFlagName:"seen_mobile_proto_announcement",AnnouncementComponent:function(){let e=(0,a.wA)();return(0,m.md)(D.NE)?(0,i.jsx)(el,{asset:{type:"image",src:(0,f.ck)("b50fba0faeea245feed92fe60337297d827e4984"),alt:(0,c.t)("cross_sell.mobile_app_prompt.comment_image_alt_text")},description:(0,c.t)("mobile_download_prompts.play_mobile_prototypes"),isLoading:!1,layoutStyle:"app",mainButtonTitle:(0,c.t)("mobile_download_prompts.email_me"),onCtaClick:()=>{g.Ay.post("/api/send_mobile_download_email",{type:"prototype"}),e(v.F.enqueue({message:(0,c.t)("rcs.mobile_comment_reply_upsell.email_sent")})),e(A.b({seen_mobile_proto_announcement:!0}))},title:(0,c.t)("mobile_download_prompts.run_prototypes_from_your_phone"),trackingContextName:"Mobile App Prototype Announcement",trackingDisabled:!0,userFlagName:"seen_mobile_proto_announcement"}):(0,i.jsx)(i.Fragment,{})},panelName:"Prototype",additionalDisplayBlocker:({userAnalyticsData:e,userFlags:t,selectedView:n})=>!(0,u.kc)().mobile_download_proto_sidebar||e?.is_active_mobile_user||!!t.seen_mobile_proto_download_modal_prompt||(0,K.$A)(n)},{userFlagName:"seen_mobile_comment_announcement",AnnouncementComponent:function(){let e=(0,a.wA)();return(0,i.jsx)(el,{asset:{type:"image",src:(0,f.ck)("5b8af9ed88cb76b20858a7a8ac9fed784e5cbeb7"),alt:(0,c.t)("cross_sell.mobile_app_prompt.comment_image_alt_text")},description:(0,c.t)("mobile_download_prompts.join_team_conversations"),isLoading:!1,layoutStyle:"app",mainButtonTitle:(0,c.t)("mobile_download_prompts.email_me"),onCtaClick:()=>{g.Ay.post("/api/send_mobile_download_email",{type:"comment"}),e(v.F.enqueue({message:(0,c.t)("rcs.mobile_comment_reply_upsell.email_sent")})),e(A.b({seen_mobile_comment_announcement:!0}))},title:(0,c.t)("mobile_download_prompts.meet_your_team"),trackingContextName:"Mobile App Comments Announcement",trackingDisabled:!0,userFlagName:"seen_mobile_comment_announcement"})},panelName:"Comments",additionalDisplayBlocker:({userAnalyticsData:e,userFlags:t,selectedView:n})=>!(0,u.kc)().mobile_download_comment_sidebar||e?.is_active_mobile_user||!!t.seen_mobile_comment_download_modal_prompt||(0,K.$A)(n)},{userFlagName:"dev_mode_dismissed_properties_panel_announcement",AnnouncementComponent:function({userFlagName:e,lifecycle:t}){let n=(0,a.wA)(),r=(0,W.U)("announcement"),s="dark"===(0,M.DP)(),o=()=>{t?(0,P._Z)(t):n(A.b({[e]:!0}))},{assetSrc:d,backgroundColor:u,imageNoPaddingTop:m}=s?em:eu;return(0,i.jsx)(el,{asset:{type:"image",src:d,alt:(0,c.t)("inspect_panel.code.promo_image_alt"),bg:u,noPaddingTop:m},description:(0,c.t)("inspect_panel.properties.dev_mode_upsell_message"),layoutStyle:"brand",mainButtonOverride:(0,i.jsx)("div",{className:_.s.wFull.$,children:(0,i.jsx)(l.J,{brand:"dev-handoff",children:(0,i.jsx)(b.lR,{variant:"primary",onClick:()=>{o(),r("handoff")},children:(0,c.t)("dev_handoff.paywall.blocking_modal.button.request_access")})})}),onDismiss:o,title:(0,c.tx)("dev_handoff.paywall.banner.title"),trackingContextName:"Dev Mode announcement",userFlagName:e})},panelName:"Inspect",lifecycle:{userFlagName:"dev_mode_dismissed_properties_panel_announcement",maxTimes:3,cooldown:"MONTH_AND_A_HALF"},additionalDisplayBlocker:({selectedView:e,isRecovery:t,isReadOnly:n,canAccessDevMode:i})=>!function({isDevHandoffView:e,isRecovery:t,isReadOnly:n,canAccessDevMode:i}){return!t&&n&&!i&&!e}({isDevHandoffView:(0,K.$A)(e),isRecovery:t,isReadOnly:n,canAccessDevMode:i})},{userFlagName:T,AnnouncementComponent:function(){let{filteredSidebarItems:e}=r.useContext(E.hh);return 0===r.useMemo(()=>"loaded"===e.status&&e.data||[],[e]).length?null:(0,i.jsx)(w.u,{className:"dev_handoff_comments_panel_slack_teams_hint--hintPanel--huoRY",idForTests:"hintFigmaForSlackTeams",userFlag:T,title:(0,c.t)("dev_handoff.comments_panel.slack_teams_hint.title"),icon_DEPRECATED:k.A,hintText:(0,c.tx)("dev_handoff.comments_panel.slack_teams_hint",{figmaForSlackLink:(0,i.jsx)(C.N,{href:"https://figma.slack.com/apps/A01N2QYSA81-figma-and-figjam?tab=more_info",newTab:!0,trusted:!0,children:(0,c.tx)("dev_handoff.comments_panel.slack_teams_hint.slack_link")}),figmaForTeamsLink:(0,i.jsx)(C.N,{href:"https://appsource.microsoft.com/en-us/product/office/WA200004521?exp=ubp8",newTab:!0,trusted:!0,children:(0,c.tx)("dev_handoff.comments_panel.slack_teams_hint.teams_link")})})})},panelName:"Comments",additionalDisplayBlocker:({selectedView:e})=>!(0,K.$A)(e)},{userFlagName:S.xb,AnnouncementComponent:S.FO,panelName:"Handoff",additionalDisplayBlocker:({userFlags:e})=>!e.dev_handoff_seen_config_wizard||eh(e.dev_handoff_seen_config_wizard.updatedAt,3)<ef},{userFlagName:"dev_mode_demo_file_props_panel_upsell_dismissed",AnnouncementComponent:function(){let e=(0,a.wA)(),t=(0,f.tl)().dev_mode_demo_file_key;return t?(0,i.jsx)(el,{asset:{type:"image",src:(0,f.ck)("0381fb8f01b5e71da6e1f3d65e2bab6be47de673"),alt:(0,c.t)("inspect_panel.code.promo_image_alt")},description:(0,c.t)("dev_mode_demo_file.check_out_our_interactive_test"),layoutStyle:"brand",mainButtonOverride:(0,i.jsx)(l.J,{brand:"dev-handoff",children:(0,i.jsx)(b.lR,{variant:"primary",onClick:()=>{t&&h.Ay.redirect((0,U.jN)({file:{key:t},isDevHandoff:!0}),"_blank"),e(A.b({dev_mode_demo_file_props_panel_upsell_dismissed:!0}))},children:(0,c.t)("dev_mode_playground_file.try_it_now")})}),title:(0,c.tx)("dev_mode_playground_file.want_to_try_dev_mode"),trackingContextName:"Dev Mode Demo Props Upsell",userFlagName:"dev_mode_demo_file_props_panel_upsell_dismissed"}):null},panelName:"Inspect",additionalDisplayBlocker:({userFlags:e,isEngineer:t,canAccessDevMode:n,plan:i})=>!e.dev_mode_dismissed_properties_panel_announcement||n||!t||i?.tier===V.Ag.STARTER}],ex=(0,m.eU)(e=>{let t={};return eg.forEach(n=>{n.lifecycle&&(t[n.userFlagName]=e((0,P.eC)(n.lifecycle)))}),t});function e_(e){let t=(0,F.q5)(),n=t?.editorType,l=(0,z.S2)().unwrapOr(null),f=l?.figjamDisabledAt||null,g=(0,a.d4)(e=>e.userFlags),_=(0,m.md)(ex),b=(0,B.iZ)(),v=(0,a.d4)(e=>e.userAnalyticsData),C=(0,a.d4)(e=>e.selectedView),E=b?.created_at,w=(0,p.A)(E).add(14,"day").isSameOrAfter((0,p.A)()),k=(0,R.k)(),T=(0,x.Om)(),S=r.useMemo(()=>"prototype"===C.view?void 0:d.Ez5,[C.view]),I=(0,H.ut)(S?.uiState().isRecovery,!1),A="developer"===(0,L.w)(),N=(0,j._I)(),{folderId:M}=ep(t),{data:O,status:D}=(0,y.nt)(M),U=l?.tier===V.Ag.STARTER&&!(0,u.kc)().bake_starter_limit,G=null!==O&&(0,y.d6)(O,V._Y.FIGMAKE)&&!U,K={Prototype:"loading"===D},W={};if(k)return(0,i.jsxs)("div",{className:"announcement--loggedOutSignupCta--fvjhr",children:[(0,i.jsx)(o.O,{}),(0,c.t)("auth.create_account_to_view_reply_comments"),(0,i.jsx)(s.$n,{variant:"link",onClick:()=>T("SIGN_UP_CTA_COMMENTS_PANEL"),children:(0,c.t)("auth.sign_up")})]});if(n===V._Y.WHITEBOARD||n===V._Y.SLIDES||"fullscreen"!==C.view||null!=f||w||"Comments"===e.panelName&&"fullscreen"===C.view&&n===V._Y.DESIGN&&g.claimed_invite_with_pending_user_mention&&!g.has_closed_comment&&h.Ay.location.hash)return null;let q=Date.now()-2592e5;if(eg.some(e=>{let t=g[e.userFlagName];return!!t&&t.updatedAt>new Date(q)}))return null;let X=eg.find(n=>{if(ed||n.panelName!==e.panelName||K[e.panelName])return!1;if(n.lifecycle){let e=_[n.userFlagName];if(e?.status!=="loaded"||(0,P.$1)({...e.data,lifecycleConfig:n.lifecycle}))return!1}let i=g[n.userFlagName];return(!!n.lifecycle||!i)&&!n.additionalDisplayBlocker?.({currentUser:b,openFile:t,userAnalyticsData:v,userFlags:g,selectedView:C,isRecovery:I,isEngineer:A,isReadOnly:!t?.canEdit,canAccessDevMode:N,experiments:W,plan:l,canCreateFigmakeFileInTargetFolder:G})});if(X){let e=X.AnnouncementComponent;return(0,i.jsx)(e,{userFlagName:X.userFlagName,lifecycle:X.lifecycle})}return null}},578608:(e,t,n)=>{n.d(t,{$J:()=>_,$Q:()=>k,KR:()=>y,RK:()=>T,VG:()=>E,i8:()=>w,mp:()=>v,u1:()=>x,xm:()=>g});var i=n(105652),r=n(692376),a=n(901461),s=n(854225),o=n(379141),l=n(270450),d=n(108492),c=n(19047),u=n(421914),m=n(162251),p=n(456556),h=n(880197);class f{constructor(e,t=!1){this.defaultValue=e,this.placeCursorAtEnd=t,this.defaultValue=e,this.placeCursorAtEnd=t}parse(e,t){if(""===(e=e.trim().toLowerCase())||"%"===e||"px"===e)return this.defaultValue;if(["hug","fit-content"].some(t=>t.startsWith(e)||e.startsWith(t))&&(0,l.kc)().ce_tv_grid_hug)return{type:s.sAE.HUG,value:1};if(["auto","flex","fill"].some(t=>t.startsWith(e)||e.startsWith(t)))return{type:s.sAE.FLEX,value:1};let n=e.endsWith("fr");e=e.replace(/px|fr/g,"");let i=(0,d.O4)(e,NaN);return i.error?t||this.defaultValue:n?(0,l.kc)().ce_tv_grid_ga&&i.value>50?{type:s.sAE.FIXED,value:i.value}:{type:s.sAE.FLEX,value:(0,l.kc)().ce_tv_grid_ga?Math.min(50,i.value):1}:{type:s.sAE.FIXED,value:i.value}}defaultSelection(e){let t=/[0-9\.]+/.exec(e);return null!=t?this.placeCursorAtEnd?{start:t.index+t[0].length,end:t.index+t[0].length}:{start:t.index,end:t.index+t[0].length}:this.placeCursorAtEnd?{start:e.length,end:e.length}:{start:0,end:e.length}}format(e){if(!e)return"";if((0,u.gl)(e))return(0,o.t)("fullscreen.mixed");if(e.type===s.sAE.HUG)return(0,o.t)("fullscreen.properties_panel.constraints_resizing_panel.hug");let t=parseFloat(e.value.toFixed(2));return e.type===s.sAE.FLEX?(0,l.kc)().ce_tv_grid_hug?`${t}fr`:(0,o.t)("fullscreen.auto"):(0,h.lg)(t)}}let g=new f({type:s.sAE.FIXED,value:100}),x=new f({type:s.sAE.FLEX,value:1}),_=new f({type:s.sAE.FLEX,value:1},!0),y=new class extends f{format(e){if(!e)return"";if((0,u.gl)(e))return(0,o.t)("fullscreen.mixed");let t=parseFloat(e.value.toFixed(2));return e.type===s.sAE.FLEX?(0,l.kc)().ce_tv_grid_hug?`${t}fr`:(0,o.t)("fullscreen.auto"):(0,h.lg)(t)}incrementBy(e,t){let n=e.value+t;return{type:s.sAE.FIXED,value:n}}}({type:s.sAE.FLEX,value:1}),b=[s.sAE.FLEX,s.sAE.HUG,s.sAE.FIXED];function v(e){return i.useMemo(()=>e?b.filter(e=>e!==s.sAE.FIXED):b,[e])}function C(e){switch(e){case s.sAE.FIXED:return"FIXED";case s.sAE.HUG:return"HUG";case s.sAE.FLEX:return"FLEX"}}function E(e){switch(e){case s.sAE.FIXED:return"FIXED";case s.sAE.HUG:return"HUG";case s.sAE.FLEX:return"FLEX"}}function w(e){switch(e){case"FIXED":return s.sAE.FIXED;case"HUG":return s.sAE.HUG;case"FLEX":return s.sAE.FLEX;default:return null}}function k(e){return(0,p.Fk)(t=>{let n=r.HV5?.getSingleSelectedPrimaryGridId(),i=t.get(n||"");return i?"ROWS"===e?i.gridRowSizesInOrder:i.gridColumnSizesInOrder:null})}function T(){let[e,t]=(0,m.lJ)("gridTrackSize"),n=(0,p.Fk)(()=>r.HV5?.getGridTrackSelection()||[]),o=n[0]?.axis,l=k(o===a._0.Y?"ROWS":"COLUMNS"),d=n.length,h=function(e){let{type:t,value:n}=(0,u.E7)(e)??{type:null,value:null};if(null==t||null==n)return null;let i=w(t);return null==i?null:{type:i,value:n}}(e);return(0,i.useCallback)(({value:e,type:n,index:i,eventSource:a})=>{if(null==e&&null==n){(0,c.x1)("GridTracksPanel","useSetAndLogTrackSize called with no type or value");return}if(0===d||!l||null==o){(0,c.x1)("GridTracksPanel","useSetAndLogTrackSize called with no track selection or invalid axis/trackSizes");return}let u=1;null==e?n===s.sAE.FIXED&&(u=1===d?l[i]?.computedSize??-1:-1):u=e,r.HV5?.logGridTrackSizeChanged({value:u,type:n},h,o,i,d,a),null==e?t({type:C(n)}):t({value:e,type:C(n)})},[o,d,h,l,t])}},156928:(e,t,n)=>{n.d(t,{T:()=>I,w:()=>S});var i=n(239976),r=n(105652),a=n(20002),s=n(865702),o=n(379141),l=n(445019),d=n(888903),c=n(639184),u=n(826151),m=n(859100),p=n(634224),h=n(215496),f=n(337812);let g=new class{sendMobileDownloadEmail(){return f.Ay.post("/api/send_mobile_download_email")}};var x=n(783844),_=n(816379),y=n(271625),b=n(393463),v=n(770785),C=n(289252);function E(){return(0,i.jsxs)("div",{style:v.sx.flex.columnGap32.flexRow.alignCenter.justifyCenter.wFull.$,children:[(0,i.jsx)("img",{alt:"Android QR code",src:(0,b.ck)("259b16f36c4afa958c6185b07e9b78f3e2b4cc4d")}),(0,i.jsx)("img",{alt:"IOS QR code",src:(0,b.ck)("d32c8c72eda223d979ca672dacb3ead939ac63a3")})]})}function w(){return(0,i.jsx)(C.y,{src:(0,b.ck)("a553882986986c96fc7d298a674e9e0522d05b53"),alt:(0,o.t)("rcs.mobile_comment_reply_upsell.media_alt_text"),aspectRatio:1.75})}function k(){return(0,i.jsx)("div",{style:v.sx.flex.alignCenter.wFull.borderBox.p18.h200.add({backgroundColor:"#5551ff"}).$,children:(0,i.jsx)(E,{})})}let T="dismissed_mobile_replies_upsell",j=(0,p.r1)(T),S="commentSubmitted";function I(){let e=(0,l.md)(j),t=(0,a.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),{uniqueId:n,isShowing:p,show:f,complete:b}=(0,m.e)({overlay:y.$T1,priority:h.N.DEFAULT_MODAL},[e]),v=(0,a.wA)();(0,u.E)(n,S,(0,r.useCallback)(()=>{t||f({canShow:e=>!e})},[t,f]));let C=(0,r.useCallback)(async()=>{await g.sendMobileDownloadEmail(),b(),v(d.F.enqueue({message:(0,o.t)("rcs.mobile_comment_reply_upsell.email_sent")}))},[b,v]);return(0,i.jsx)(x.cr,{steps:[{description:(0,o.tx)("rcs.mobile_comment_reply_upsell_page1.description"),title:(0,o.tx)("rcs.mobile_comment_reply_upsell.title"),trackingContextName:"mobile_reply_upsell",position:_.Q.BOTTOM_RIGHT,media:(0,i.jsx)(w,{}),primaryCta:{label:(0,o.tx)("rcs.mobile_comment_reply_upsell.download_via_qr_code"),type:"button",ctaTrackingDescriptor:c.c.POST_COMMENT_MOBILE_APP_DOWNLOAD_PROMPT_QR_CODE_CLICKED,onClick:s.lQ},secondaryCta:{label:(0,o.tx)("rcs.mobile_comment_reply_upsell.email_me"),type:"button",ctaTrackingDescriptor:c.c.POST_COMMENT_MOBILE_APP_DOWNLOAD_PROMPT_EMAIL_ME_CLICKED,onClick:C},hideStepCounter:!0},{description:(0,o.tx)("rcs.mobile_comment_reply_upsell_page2.description"),title:(0,o.tx)("rcs.mobile_comment_reply_upsell.title"),trackingContextName:"mobile_reply_upsell",position:_.Q.BOTTOM_RIGHT,media:(0,i.jsx)(k,{}),primaryCta:{label:(0,o.tx)("rcs.rcs_shared.done"),type:"button",ctaTrackingDescriptor:c.c.DONE,onClick:s.lQ},secondaryCta:{label:(0,o.tx)("rcs.mobile_comment_reply_upsell.email_me_instead"),type:"button",ctaTrackingDescriptor:c.c.POST_COMMENT_MOBILE_APP_DOWNLOAD_PROMPT_EMAIL_ME_CLICKED,onClick:C},hideStepCounter:!0}],onComplete:b,isShowing:p,userFlagOnShow:T})}},197256:(e,t,n)=>{n.d(t,{Hj:()=>G,W$:()=>z,ry:()=>H});var i=n(239976),r=n(105652),a=n(20002),s=n(787049),o=n(836848),l=n(449109),d=n(295870),c=n(379141),u=n(224542),m=n.n(u),p=n(522568),h=n(184743),f=n(29161),g=n(499735),x=n(129416),_=n(19047),y=n(259714),b=n(450207),v=n(27414),C=n(772293),E=n(910175),w=n(425519),k=n(284605),T=n(83345),j=n(231305),S=n(484552),I=n(493259),A=n(862750),N=n(98011),M=n(604466),R=n(606369),P=n(152787),O=n(159206),D=n(809029),L=n(670466),F=n(659286);let B="Loading suggestions...";function U(e){(0,o.vA)(null!==e,"We should never be in the middle state if there are no optional parameters")}class V extends g.o6{constructor(e){let t;if(super(e),this.searchInputRef=r.createRef(),this.scrollContainerRef=r.createRef(),this.searchBarRef=r.createRef(),this.primaryPlaceholderTextRef=r.createRef(),this.ranWithParameters=!1,this.runArgs=null,this.loadingTimerID=null,this.pendingLoadingMessage=null,this.firstOptionalIndex=null,this.eventID=0,this.onSuggestions=e=>{switch(e.type){case"SUGGESTIONS":{let t=this.getDropdownItems(e.suggestions,this.state.searchQuery,this.state.activeParameterIndex),n=t.findIndex(e=>(function(e){return"freeform"!==e&&"skip"!==e})(e)),i=n>=0?n:this.state.activeItemIndex,r=t.length||!this.state.searchQuery?null:(0,c.t)("fullscreen_actions.no_matches");this.clearLoadingMessage(),this.setState({activeItemIndex:i,items:t,errorMessage:r});break}case"ERROR":this.clearLoadingMessage(),this.setState({items:this.getDropdownItems([],this.state.searchQuery,this.state.activeParameterIndex),errorMessage:e.message||(0,c.t)("fullscreen_actions.no_matches")});break;case"LOADING":this.setLoadingMessage(e.message)}},this.onBackspace=()=>{let e=this.state.activeParameterIndex,t=null;if("middle"===e){if(U(this.firstOptionalIndex),0===this.firstOptionalIndex){this.props.onExitParameterEntry();return}t=this.firstOptionalIndex-1}else if("final"===e)t=this.props.parameters.length-1;else{if(0===e){this.props.onExitParameterEntry();return}t=e-1}let n={...this.state.parameterValues},i=this.getParameterForIndex(t)?.key;i&&delete n[i],this.setParameterIndex(t,n)},this.onTextChange=e=>{let t;let n=this.state.activeParameterIndex;if("middle"===n)U(this.firstOptionalIndex),t=this.firstOptionalIndex;else{if("final"===n)return;t=n}let i=this.props.parameters[t];this.triggerInputEvent({parameterValues:this.state.parameterValues,currentParameter:i,currentSearchQuery:e}),this.setLoadingMessage(B),this.setState({searchQuery:e,items:this.getDropdownItems([],e,t),activeItemIndex:0,activeParameterIndex:t,mouseMoved:!1,errorMessage:""})},this.onSelectItem=(e,t)=>{let n;let i=this.state.activeParameterIndex;if("final"===i){"enter"===t&&this.launchPluginWithParameters(this.state.parameterValues);return}let r={...this.state.parameterValues};if("middle"!==i){if(0===this.state.items.length)return;let n=this.props.parameters[i];if(e<0||e>=this.state.items.length){let r="Trying to select suggestion at invalid index";console.error(r),(0,_.Lo)("PluginParameterEntry","invalid index",{index:e,items:this.state.items.length,currentIndex:i,parameter:n.name,keyPress:t}),(0,x.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error(r));return}let a=this.state.items[e];"skip"===a||("freeform"===a?r[n.key]={name:this.state.searchQuery}:((0,o.KF)(!this.state.loadingMessage,"Selected item while loading"),r[n.key]=a))}let a=this.firstOptionalIndex;if("middle"===i){if(U(this.firstOptionalIndex),"enter"===t){this.launchPluginWithParameters(r);return}n=this.firstOptionalIndex}else if(i===this.props.parameters.length-1){if("enter"===t){this.launchPluginWithParameters(r);return}n="final"}else n=null!==a&&i===a-1?"tab"===t?a:"middle":i+1;this.setParameterIndex(n,r),this.searchInputRef.current.focus()},this.onKeyDown=g.C0(this,"keydown",e=>{let t=e=>{let t=this.state.activeItemIndex+e;return t<0?this.state.items.length-1:t%this.state.items.length},n=f.Ay.mac?(0,h.vN)(e,h.xH.META):(0,h.vN)(e,h.xH.CONTROL);switch(e.keyCode){case h.Uz.ENTER:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"enter");break;case h.Uz.TAB:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"tab");break;case h.Uz.DOWN_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=t(1);this.setState({activeItemIndex:e}),this.scrollContainerRef.current?.scrollElementAtIndexIntoView(e)}break;case h.Uz.UP_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=t(-1);this.setState({activeItemIndex:e}),this.scrollContainerRef.current?.scrollElementAtIndexIntoView(e)}break;case h.Uz.BACKSPACE:0===this.state.searchQuery.length?(e.preventDefault(),this.onBackspace(),e.stopPropagation()):("final"===this.state.activeParameterIndex||"middle"===this.state.activeParameterIndex)&&e.preventDefault();break;case h.Uz.ESCAPE:e.preventDefault(),this.props.dispatch(b.oB());break;case h.Uz.P:case h.Uz.FORWARD_SLASH:n&&(e.preventDefault(),this.props.dispatch(b.oB()));break;case h.Uz.EQUALS:case h.Uz.DASH:n&&(e.preventDefault(),"-"===e.key?C.Y5.triggerAction("zoom-out"):C.Y5.triggerAction("zoom-in"));break;case h.Uz.R:case h.Uz.S:case h.Uz.D:case h.Uz.E:case h.Uz.F:case h.Uz.O:if(n){e.preventDefault();let t=this.state.searchQuery+e.key;this.onTextChange(t)}}}),this.onSearchChange=g.Z7(this,"change",e=>{let t=e.currentTarget.value;this.onTextChange(t)}),this.renderResult=(e,t,n)=>{let r,a="",s="";return"skip"===t?(a=`Skip "${e.name}"`,s="skip"):"freeform"===t?(a=this.state.searchQuery,s="skip"):(a=t.name,s=t.name,r=W(t,D.ZR)),(0,i.jsx)(K,{recordingKey:g.Pt(this.props,"suggestion",s),active:n===this.state.activeItemIndex,suggestion:a,onClick:e=>this.onSelectItem(n,"enter"),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:n})},icon:r,onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:n})}},n)},(0,_.Lo)("PluginParameterEntry","Starting parameter entry for plugin",{parameters:e.parameters,displayName:e.displayName,parameterOnly:e.parameterOnly,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command}),0===e.parameters.length)throw Error("Must specify at least one parameter");let n=e.parameters.findIndex(e=>e.optional);this.firstOptionalIndex=n<0?null:n,t=e.initialParameterValues?"final":e.parameters[0].optional?"middle":0,this.handler=this.runPlugin();let a=this.getParameterForIndex(t);a&&this.triggerInputEvent({parameterValues:{},currentParameter:a,currentSearchQuery:""}),this.setLoadingMessage("Loading plugin..."),this.state={searchQuery:"",items:[],errorMessage:null,loadingMessage:null,activeItemIndex:0,parameterValues:e.initialParameterValues||{},activeParameterIndex:t,mouseMoved:!1,hidePluginName:!1}}getParameterForIndex(e){return"middle"===e||"final"===e?null:this.props.parameters[e]}getCurrentParameter(){return this.getParameterForIndex(this.state.activeParameterIndex)}runPlugin(){let e=null;if(this.props.pluginId?this.props.allSavedPlugins[this.props.pluginId]?e=this.props.allSavedPlugins[this.props.pluginId]:this.props.publishedPlugins[this.props.pluginId]&&(e=(0,w.uF)(this.props.publishedPlugins[this.props.pluginId])):this.props.pluginLocalFileId&&(e=this.props.localExtensions[this.props.pluginLocalFileId]),!e)throw Error("Plugin not runnable");let{canRun:t}=(0,w.JT)({plugin:e,editorType:this.props.editorType});if(!t)throw Error("Plugin not runnable");this.runArgs={plugin:e,command:this.props.command||"",queryMode:!0,runMode:"default",triggeredFrom:"parameter-entry",openFileKey:this.props.openFile?.key||"",deferRunEvent:!0,isWidget:!1};let n=(0,T.D)();return j.R0.instance.enqueue({mode:"run-forever",runPluginArgs:this.runArgs}),n}async triggerInputEvent(e){this.eventID++;let t=this.eventID,n=await this.handler;this.eventID===t&&n.triggerParameterInputEvent({...e,onSuggestions:e=>{this.eventID===t&&this.onSuggestions(e)}})}updateLayout(){let e=0===this.state.activeParameterIndex&&!this.props.parameters[0].optional;if(void 0===this.state.placeholderWidth&&!e){if(this.primaryPlaceholderTextRef.current){let e=Math.min(250,Math.max(this.primaryPlaceholderTextRef.current.offsetWidth,120));this.setState({placeholderWidth:e})}else this.setState({placeholderWidth:0})}let t=this.searchBarRef.current,n=t.offsetWidth<t.scrollWidth;e||!n||this.state.hidePluginName||this.setState({hidePluginName:!0}),t.scrollLeft=t.scrollWidth}componentDidMount(){super.componentDidMount(),(0,p.sx)(R.yh,(0,R.ov)({...this.props,qaVersion:N.U3})),this.searchInputRef.current.focus(),this.updateLayout()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateLayout()}componentWillUnmount(){super.componentWillUnmount(),this.ranWithParameters||(0,I.wY)();let e=(0,R.O8)(this.props.parameters,this.state.parameterValues);this.ranWithParameters&&e.requiredEntered!==e.requiredCount&&((0,_.Lo)("PluginParameterEntry","Parameter entry mismatch",{requiredParameters:this.props.parameters,parameterValues:this.state.parameterValues}),(0,x.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error("Plugin ran successfully with parameters, but not all parameters were recorded")));let t=(0,R.ov)({...this.props,qaVersion:N.U3});(0,p.sx)(R.rj,{...t,success:this.ranWithParameters,parametersEntered:e.entered,requiredParametersEntered:e.requiredEntered,optionalParametersEntered:e.optionalEntered})}getDropdownItems(e,t,n){if("middle"===n||"final"===n)return[];let i=e.slice(),r=this.props.parameters[n];t.length>0&&r.allowFreeform&&i.unshift("freeform");let a=this.props.parameters[n];return 0===t.length&&a.optional&&i.unshift("skip"),i}setLoadingMessage(e){if(this.loadingTimerID){this.pendingLoadingMessage=e;return}this.pendingLoadingMessage=e,this.loadingTimerID=setTimeout(()=>{this.setState({loadingMessage:this.pendingLoadingMessage}),this.loadingTimerID=null,this.pendingLoadingMessage=null},300)}clearLoadingMessage(){this.loadingTimerID&&(clearTimeout(this.loadingTimerID),this.loadingTimerID=null),this.setState({loadingMessage:null})}setParameterIndex(e,t){let n=this.getParameterForIndex(e);n&&((0,_.Lo)("PluginParameterEntry","setParameterIndex",{nextParameter:n.name}),this.triggerInputEvent({parameterValues:t,currentParameter:n,currentSearchQuery:""}));let i=!(0===e&&!this.props.parameters[0].optional)&&this.state.hidePluginName;this.searchInputRef.current.focus(),this.setLoadingMessage(B),this.setState({searchQuery:"",items:this.getDropdownItems([],"",e),activeItemIndex:0,activeParameterIndex:e,parameterValues:t,mouseMoved:!1,errorMessage:null,placeholderWidth:void 0,hidePluginName:i})}launchPluginWithParameters(e){if(this.setState({parameterValues:e}),this.handler.then(async t=>{let{isCancelled:n}=await (0,S.y)(this.runArgs);n||t.triggerRunEvent({command:"parameters",parameters:e})}),this.runArgs){let t=this.runArgs;if(this.runArgs=null,t.queryMode=!1,t.deferRunEvent=!1,t.parameterValues=e,this.props.recentlyUsedCommandName){let e=this.props.recentlyUsedCommandName;this.props.dispatch(v.Rw({currentDisplayName:e,newCommand:{displayName:e,runPluginArgs:t}})),(0,M.s)({displayText:e,runPluginArgs:t,localFileIdOrPluginId:this.props.pluginLocalFileId??this.props.pluginId})}(0,k.C3)(t)}this.ranWithParameters=!0,this.props.dispatch(b.oB())}renderResults(){if("middle"===this.state.activeParameterIndex)return(0,i.jsxs)("div",{className:O.wM,children:[(0,i.jsxs)("div",{className:O.FV,children:[(0,i.jsx)("div",{className:O.h8,children:(0,c.tx)("fullscreen_actions.plugin_parameters.tab")}),(0,i.jsx)("div",{className:O.w8,children:(0,c.tx)("fullscreen_actions.plugin_parameters.to_enter_optional_parameters")})]}),(0,i.jsxs)("div",{className:O.FV,children:[(0,i.jsx)("div",{className:O.h8,children:(0,c.tx)("fullscreen_actions.plugin_parameters.enter")}),(0,i.jsx)("div",{className:O.w8,children:(0,c.tx)("fullscreen_actions.plugin_parameters.to_run_plugin")})]})]});if("final"===this.state.activeParameterIndex)return null;let e=this.props.parameters[this.state.activeParameterIndex],t=null;if(this.state.errorMessage?t=(0,i.jsx)("div",{className:D.Tk,children:this.state.errorMessage}):this.state.loadingMessage&&(t=(0,i.jsx)("div",{className:D.Tk,children:this.state.loadingMessage})),0===this.state.items.length)return t;let n=t?this.state.items.length+1:this.state.items.length;return(0,i.jsxs)(P.h,{ref:this.scrollContainerRef,resultCount:n,children:[this.state.items.map((t,n)=>this.renderResult(e,t,n)),t]})}renderCurrentParameters(){let e=this.getCurrentParameter()?.key,t=G(this.props.parameters,this.state.parameterValues,e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z,{value:this.state.hidePluginName?void 0:this.props.displayName,icon:function(e,t,n){if(!n)return(0,i.jsx)(y.B,{className:O.nW,svg:L.A,ariaLabel:"plugin icon"});{let r=e[n];return r||(r=t[n]&&(0,w.uF)(t[n])),(0,i.jsx)(A.V,{className:O.nW,plugin:r,alt:"plugin icon"})}}(this.props.allSavedPlugins,this.props.publishedPlugins,this.props.pluginId)},"plugin-name"),t]})}placeholderElement(){let e=this.state.activeParameterIndex,t=this.state.searchQuery.length>0;if("final"===e)return(0,i.jsx)(i.Fragment,{});if("middle"===e){let e=(0,s.WI)(this.props.parameters.map(e=>e.optional?e.name:null)).join(", ");return(0,i.jsx)("span",{ref:this.primaryPlaceholderTextRef,children:(0,c.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:e})})}{let n=this.props.parameters[e],r=this.props.parameters.slice(e);if(n.optional){let e=r.map(e=>e.name);return t&&(e[0]=""),(0,i.jsx)("span",{ref:this.primaryPlaceholderTextRef,children:e.join(", ")})}{let e=(0,s.WI)(r.map(e=>e.optional?null:e.name)),n=(0,s.WI)(r.map(e=>e.optional?e.name:null));return t&&(e[0]=""),(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{ref:this.primaryPlaceholderTextRef,children:e.join(", ")}),n.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:O.yL,children:"|"},"divider"),(0,i.jsx)("span",{children:(0,c.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:n.join(", ")})},"optionalParams")]})]})}}}render(){let e=this.getCurrentParameter(),t=e?.description,n=this.placeholderElement(),r="final"===this.state.activeParameterIndex?O.ed:O.Kf,a={minWidth:this.state.placeholderWidth?`${this.state.placeholderWidth}px`:void 0},s=this.renderResults();return(0,i.jsxs)(P.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,children:[(0,i.jsxs)("div",{className:D.$P,children:[(0,i.jsx)(y.B,{svg:F.A,className:D.qc}),(0,i.jsxs)("div",{className:O.ON,ref:this.searchBarRef,children:[this.renderCurrentParameters(),(0,i.jsxs)("div",{className:r,children:[(0,i.jsx)("input",{ref:this.searchInputRef,className:O.t6,onChange:this.onSearchChange,value:this.state.searchQuery,maxLength:150,spellCheck:!1,style:a}),(0,i.jsx)("div",{className:O.l4,children:(0,i.jsxs)("div",{className:O.qf,children:[(0,i.jsx)("span",{className:O.CZ,children:this.state.searchQuery}),n]})})]})]})]}),!!t&&(0,i.jsx)("div",{className:m()({[O.WL]:!0,[O.$8]:!s}),children:t}),s]})}}function H(e){let t=(0,a.wA)(),n=(0,a.d4)(e=>e.openFile),r=(0,a.d4)(e=>e.publishedPlugins),s=(0,a.d4)(e=>e.installedPluginVersions.plugins),o=(0,a.d4)(e=>e.localPlugins),l=(0,a.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),d=(0,a.d4)(e=>e.selectedView.editorType),c=(0,a.d4)(e=>(0,E.Eh)(e)),u=(0,a.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),m=(0,a.d4)(e=>(0,E.cb)(e));return(0,i.jsx)(V,{...e,activeTextReviewPlugin:u,allSavedPlugins:s,dispatch:t,editorType:d,localExtensions:o,openFile:n,org:l,publishedPlugins:r,userCanRunExtensions:m,userCanViewPlugins:c})}function z(e){return(0,i.jsxs)("div",{className:O.Io,children:[e.icon&&(0,i.jsx)("span",{children:e.icon}),e.value&&(0,i.jsx)("span",{children:e.value})]})}function G(e,t,n){return e.filter(e=>t[e.key]&&e.key!==n).map(e=>t[e.key]&&t[e.key].name&&(0,i.jsx)(z,{icon:W(t[e.key],O.nW),value:t[e.key].name},e.key))}V.displayName="PluginParameterEntry";class K extends g.o6{constructor(){super(...arguments),this.onClick=g.cZ(this,"click",e=>{if(!this.props.onClick)return g.aH;this.props.onClick(e)})}render(){let e=`${this.props.active?D.ix:D.Ke}`;return(0,i.jsxs)("div",{className:e,onClick:this.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,children:[(0,i.jsx)("div",{className:D.EA,children:this.props.icon}),(0,i.jsx)("div",{className:O.iu,children:(0,i.jsx)("div",{className:D.D6,children:this.props.suggestion})})]})}}function W(e,t){let n="";if(e.iconUrl)n=e.iconUrl;else if(e.icon&&"string"==typeof e.icon)n="data:image/svg+xml;base64,"+l.aj(e.icon);else{if(!e.icon||"string"==typeof e.icon)return;n="data:application/octet-stream;base64,"+l.lF(e.icon)}return(0,i.jsx)(q,{className:t,src:n})}K.displayName="ParameterSuggestion";class q extends g.o6{render(){let e=new URL(this.props.src);return e.hostname===window.location.hostname?((0,x.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error("same-origin URL blocked in UntrustedImage")),(0,i.jsx)(i.Fragment,{})):["https:","http:","data:","blob:"].includes(e.protocol)?(0,i.jsx)("img",{src:this.props.src,className:this.props.className,crossOrigin:"anonymous",alt:""}):((0,x.$D)(d.e.EXTENSIBILITY_ECOSYSTEM,Error("Unexpected protocol blocked in UntrustedImage")),(0,i.jsx)(i.Fragment,{}))}}q.displayName="UntrustedImage"},170334:(e,t,n)=>{n.d(t,{_:()=>p,h:()=>m});var i=n(239976),r=n(105652),a=n(270307),s=n(943866),o=n(259714),l=n(197256),d=n(159206),c=n(809029),u=n(237536);function m({itemPath:e}){let t=r.useRef(null),n=r.useRef(null),l=r.useRef(null),d=r.useRef(null),[m,p]=r.useState("full"),h=(0,s.ZC)(e);r.useLayoutEffect(()=>{(0,a.c2)(e,h)||"full"===m||p("full"),"full"===m&&f()},[h,e,m]);let f=()=>{let e=n.current?.offsetWidth,i=d.current?.offsetWidth,r=l.current?.offsetWidth,a=t.current?.scrollWidth,s=t.current?.clientWidth;void 0!==e&&void 0!==i&&void 0!==r&&a&&s&&s<a&&(e+i>s?p("plugin"):p("path"))};if(1===e.length)return(0,i.jsx)("span",{ref:d,children:e[0]});let g=e.slice(1,e.length-1),x=(0,i.jsx)(o.B,{svg:u.A,className:c.VU,dataTestId:"rightChevron"}),_=(0,i.jsxs)("span",{ref:n,children:["plugin"===m?"...":e[0],x]}),y=(0,i.jsx)("span",{ref:l,children:"plugin"!==m&&(0,i.jsx)(i.Fragment,{children:"path"===m?(0,i.jsxs)(i.Fragment,{children:["...",x]}):g.map((e,t)=>(0,i.jsxs)("span",{children:[e," ",x]},t))})});return(0,i.jsxs)("div",{ref:t,className:c.D6,..."full"!==m?{"data-tooltip-type":"text","data-tooltip":e.join(" > "),"data-tooltip-show-above":!0}:{},children:[_,y,(0,i.jsx)("span",{ref:d,children:e[e.length-1]})]})}function p({runPluginArgs:e,itemParameterArgs:t}){let[n,a]=r.useState(!1),s=r.useRef(null);r.useEffect(()=>{let e=s.current;e&&e.offsetWidth<e.scrollWidth&&!n&&a(!0)},[n]);let o=e.parameterValues;if(o){let e=t.parameters,r=(0,l.Hj)(e,o);return(0,i.jsxs)("div",{className:d.ON,ref:s,"data-testid":"parameter-display",children:[(0,i.jsx)(l.W$,{value:n?void 0:t.displayName},"plugin-name"),r]})}return(0,i.jsx)(i.Fragment,{})}},152787:(e,t,n)=>{n.d(t,{H:()=>u,h:()=>m});var i=n(239976),r=n(105652),a=n(499735),s=n(620030),o=n(933870),l=n(324880),d=n(508902),c=n(809029);class u extends a.o6{constructor(e){super(e),this.onKeyDownFromFullscreen=e=>{e.accept(),this.props.onKeyDown(e.event)},this.onContainerClick=e=>{e.stopPropagation()}}componentDidMount(){super.componentDidMount(),document.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.props.onKeyDown)}render(){let e={left:window.innerWidth/2-200,top:window.innerHeight/8,width:400};return(0,i.jsx)(d.vL,{name:this.props.recordingKey||"",handleKeyDown:this.onKeyDownFromFullscreen,focusOnMount:!0,children:(0,i.jsx)(s.ms,{className:`${c.DU} ${l.Dm}`,style:e,"data-testid":this.props["data-testid"],onClick:this.onContainerClick,children:(0,i.jsx)("div",{children:this.props.children})})})}}class m extends a.o6{constructor(e){super(e),this.scrollContainerRef=r.createRef()}scrollElementAtIndexIntoView(e){if(this.props.resultCount>=10){let t=this.scrollContainerRef.current.getScrollTop(),n=32*e,i=32*e+32;n<t?this.scrollContainerRef.current.scrollTo(n):i>t+304&&this.scrollContainerRef.current.scrollTo(i-304)}}render(){let e=this.props.resultCount,t=Math.min(Math.max(e,1),10);return(0,i.jsxs)(o.P,{ref:this.scrollContainerRef,width:400,height:32*t+(e>=10?-16:8),hideScrollbar:!0,role:this.props.role,contentId:this.props.id,children:[this.props.children,(0,i.jsx)("div",{style:{height:8}})]})}}},915225:(e,t,n)=>{n.d(t,{s:()=>_});var i=n(105652),r=n(20002),a=n(787049),s=n(270450),o=n(988938),l=n(749013),d=n(923424),c=n(793993),u=n(502338),m=n(52616),p=n(402342),h=n(562418),f=n(538349),g=n(425519),x=n(367147);function _(){let e=(0,r.wA)(),t=(0,h.lg)(),[n,_]=(0,i.useState)([]),[y,b]=(0,i.useState)(!1),v=(0,i.useMemo)(()=>{let e=(0,m.Gj)(t);(0,s.kc)().ext_design_plugins_in_sites&&e===m.qq.SITES&&(e=m.qq.DESIGN);let n={resourceType:[u.vt.PLUGIN,u.vt.WIDGET],editorType:e,caller:c.z.SUGGESTED_EXTENSIONS,sortBy:d.e.Browse.POPULAR,includeContent:!0};return[{...n,price:o.C.FREE},{...n,price:o.C.PAID}]},[t]),C=(0,i.useCallback)(async()=>{let e,t;try{[e,t]=await Promise.all([f.M4.fetch(x.a.CommunityResourcesPaginatedQuery(v[0])),f.M4.fetch(x.a.CommunityResourcesPaginatedQuery(v[1]))])}catch(e){b(!1),_([]);return}let n=e.map(e=>(0,l.$9)(e)).filter(e=>!!e),i=t.map(e=>(0,l.$9)(e)).filter(e=>!!e);_((0,a.k4)([...(0,a.k4)(n).slice(0,10),...(0,a.k4)(i).slice(0,5)])),b(!0)},[v]);return(0,i.useEffect)(()=>{C()},[C]),(0,i.useEffect)(()=>{e(p.Qi({publishedPlugins:n,src:"Quick Actions V2 suggested extensions"}))},[n,e]),{loaded:y,extensions:(0,i.useMemo)(()=>n.map(e=>(0,g.Ar)(e)).filter(e=>!!e),[n])}}},642473:(e,t,n)=>{n.d(t,{X:()=>o});var i=n(923581),r=n(98011),a=n(530979);function s(e){return{key:(0,i.ee)(e),isDisabled:!!e.disabled,resultType:e.pluginId||e.pluginLocalFileId?r.l4.EXTENSION:r.l4.ACTION}}function o(e){let t=new Map;e.forEach(e=>{let n=e.category??"";t.has(n)||t.set(n,[]),t.get(n)?.push(e)});let n=[];for(let[e,i]of t.entries())n.push({name:e,actions:i.map(s)});return(0,a.i6)(n)}},467838:(e,t,n)=>{n.d(t,{l:()=>cs});var i={};n.r(i),n.d(i,{button:()=>l2,buttonContent:()=>l3,buttonText:()=>l4,destructive:()=>ds,destructiveLink:()=>du,destructiveSecondary:()=>dl,fauxFocus:()=>dn,icon:()=>l5,largeSize:()=>l9,largeWideSize:()=>de,link:()=>dc,outlineStyle:()=>dt,primary:()=>dr,regularSize:()=>l7,secondary:()=>da,shortcut:()=>l6,signup:()=>dd,solidStyle:()=>di,wideSize:()=>l8});var r=n(239976),a=n(105652),s=n(20002),o=n(363638),l=n(295870),d=n(54307),c=n(726577),u=n(250730),m=n(692376),p=n(445019),h=n(7857),f=n(592802),g=n(806130),x=n(888903),_=n(752783),y=n(986091),b=n(410274),v=n(854225),C=n(443389),E=n(309742),w=n(929532),k=n(178373),T=n(39467),j=n(192704),S=n(704334),I=n(362563),A=n(317133),N=n(872653),M=n(796439),R=n(98011),P=n(226032),O=n(530979),D=n(200438),L=n(582353),F=n(836848),B=n(865702),U=n(379141),V=n(239620),H=n(74372),z=n(184743),G=n(901962),K=n(154963),W=n(835204),q=n(319925),X=n(223487),Y=n(910175),J=n(421564),Z=n(870975),Q=n(316157),$=n(581121),ee=n(102462),et=n(977082),en=n(336400),ei=n(234522),er=n(359962),ea=n(151211),es=n(6393),eo=n(204885),el=n(667818),ed=n(718403),ec=n(461761),eu=n(255398),em=n(900207),ep=n(961016),eh=n(524924),ef=n(270450),eg=n(575015),ex=n(270351),e_=n(129416),ey=n(490096),eb=n(259714),ev=n(770785),eC=n(732730),eE=n(765996),ew=n(464827),ek=n(214082),eT=n(643444),ej=n(212198),eS=n(384203),eI=n(816505),eA=n(157750),eN=n(425519),eM=n(231305),eR=n(522178),eP=n(702746),eO=n(236410),eD=n(862750),eL=n(910496),eF=n(743634),eB=n(170334),eU=n(923581),eV=n(257367),eH=n(847923);function ez(){return(0,eH.R)(e=>{let t={};for(let n in e.mirror.appModel)(0,eL.vg)(n)&&(t[n]=e.mirror.appModel[n]),"isReadOnly"===n&&(t.isReadOnly=e.mirror.appModel.isReadOnly);return t})}var eG=n(787049),eK=n(271650),eW=n(546597),eq=n(632381),eX=n(779963),eY=n(523380),eJ=n.n(eY),eZ=n(210823),eQ=n(562418),e$=n(466082),e0=n(19047),e1=n(750665);async function e2(e,t,n){let i;return(await e1.Ay.shared.assistantChat({messages:[...t,e]})).pipeThrough((i={},new TransformStream({async transform(e,t){if(e.choices.length&&(i=function(e,t){let n=(e,t)=>{for(let[i,r]of(e={...e},Object.entries(t)))if(void 0===e[i]||null===e[i]){if(e[i]=r,Array.isArray(e[i]))for(let t of e[i])delete t.index}else if("string"==typeof e[i]&&"string"==typeof r)e[i]+=r;else if("number"==typeof e[i]&&"number"==typeof r)e[i]=r;else if(Array.isArray(e[i])&&Array.isArray(r)){let t=e[i];for(let e=0;e<r.length;e++){let{index:i,...a}=r[e];if(i-t.length>1)throw Error(`Error: An array has an empty value when tool_calls are constructed. tool_calls: ${t}; tool: ${r}`);t[i]=n(t[i],a)}}else"object"==typeof e[i]&&"object"==typeof r&&(e[i]=n(e[i],r));return e};return n(e,t.choices[0].delta)}(i,e),t.enqueue({...i,role:"assistant"}),i.tool_calls&&i.tool_calls.length>0&&"tool_calls"===e.choices[0].finish_reason))for(let e of i.tool_calls){let i=await n(e),r={tool_call_id:e.id,role:"tool",name:e.function.name,content:JSON.stringify(i)};t.enqueue(r)}}})))}var e5=n(405228),e4=n(623318),e3=n(890030),e6=n(600289),e7=n(14566),e9=n(28254),e8=n(493259),te=n(315588),tt=n(123215),tn=n(362844),ti=n(778046),tr=n(906445),ta=n(201218);let ts=e5.z.object({node_id:e5.z.string(),score:e5.z.number(),file_name:e5.z.string(),editor_name:e5.z.string(),editor_img_url:e5.z.string(),last_edited_at:e5.z.string(),url:e5.z.string(),thumbnail_url:e5.z.string(),edit_info:e5.z.object({created_at:e5.z.string(),last_modified:e5.z.string(),last_modified_user:e5.z.string()}).optional(),containing_page_name:e5.z.string(),containing_frame_name:e5.z.string().optional(),fragment_name:e5.z.string(),width:e5.z.number(),height:e5.z.number()}),to=e5.z.object({type:e5.z.literal("fragments"),status:e5.z.literal("success"),fragments:e5.z.array(ts)}),tl=e5.z.object({type:e5.z.literal("fragments"),status:e5.z.literal("success"),fragments:e5.z.array(ts.pick({score:!0,file_name:!0,editor_name:!0,last_edited_at:!0,containing_page_name:!0,containing_frame_name:!0,fragment_name:!0})),images:e5.z.array(e5.z.string())}),td=e5.z.object({type:e5.z.literal("selection"),status:e5.z.literal("success"),selectionLength:e5.z.number()}),tc=e5.z.object({type:e5.z.literal("selection"),status:e5.z.literal("success"),selectionLength:e5.z.number(),images:e5.z.array(e5.z.string()),jsx:e5.z.array(e5.z.string())}),tu=e5.z.object({type:e5.z.literal("plugin"),status:e5.z.literal("success")}),tm=e5.z.object({type:e5.z.literal("plugin"),status:e5.z.literal("success")}),tp=e5.z.object({type:e5.z.literal("assets"),queries:e5.z.array(e5.z.string()),status:e5.z.literal("success"),assets:e5.z.any().array()}),th=e5.z.object({type:e5.z.literal("assets"),status:e5.z.literal("success"),assets:e5.z.array(e5.z.object({name:e5.z.string(),description:e5.z.string().optional()})),images:e5.z.array(e5.z.string())}),tf=e5.z.object({type:e5.z.literal("request-feature"),status:e5.z.literal("success"),title:e5.z.string(),description:e5.z.string()}),tg=e5.z.object({type:e5.z.literal("request-feature"),status:e5.z.literal("success"),images:e5.z.undefined()}),tx=e5.z.object({userFacing:e5.z.union([to,td,tu,tp,tf]),assistantFacing:e5.z.union([tl,tc,tm,th,tg])});async function t_(e){if("function"!==e.type)throw Error("Unexpected tool_call type:"+e.type);let t=JSON.parse(e.function.arguments),n=p.zl.get(X.ze);if(!n)throw Error("No file key found");switch(e.function.name){case"autocomplete":case"view_user_selection":{let e=e$.UN().getCurrentPage()?.directlySelectedNodes??[],t=e?.slice(0,10),n=t.map(e=>{let t=(0,W.T1)(e,W.UF.GPT);if(!t)throw Error("Failed to export thumbnail");return t}),i=t.map(e=>"");return{userFacing:{type:"selection",status:"success",selectionLength:e.length},assistantFacing:{type:"selection",status:"success",selectionLength:e.length,images:n,jsx:i}}}case"visual_search_with_selection":case"search_designs_by_text":{let i=[];if("visual_search_with_selection"===e.function.name){let e=e$.UN().getCurrentPage()?.directlySelectedNodes;if(!e||0===e.length)throw Error("No selection found");i=(await (0,W.lc)({type:"input-selection",node:e[0],file_key:n,name:e[0].name})).slice(0,3)}else i=(await (0,W.c)({type:"input-text",value:t.query,file_key:n})).slice(0,3);return{userFacing:{type:"fragments",status:"success",fragments:i},assistantFacing:{type:"fragments",status:"success",fragments:i.map(e=>({score:e.score,file_name:e.file_name,editor_name:e.editor_name,last_edited_at:e.last_edited_at,containing_page_name:e.containing_page_name,containing_frame_name:e.containing_frame_name,fragment_name:e.fragment_name})),images:i.map(e=>e.thumbnail_url)}}}case"search_components_by_text":{let e=t.queries.slice(0,3);if(0===e.length)throw Error("No queries provided");let n=(await Promise.all(e.map(e=>tb(e)))).map(e=>e.slice(0,3)).flat(),i=[],r=[];return n.map(e=>{if(!e.thumbnail_url)return;let t=e.thumbnail_url.startsWith("/")?`${window.location.origin}${e.thumbnail_url}`:e.thumbnail_url;i.push(e),r.push(t)}),{userFacing:{type:"assets",status:"success",queries:t.queries,assets:i},assistantFacing:{type:"assets",status:"success",assets:i.map(e=>({name:e.name,description:e.description})),images:r}}}case"create_figma_plugin":let i=e5.z.object({plugin_code:e5.z.string(),ui_code:e5.z.string().optional()}).safeParse(t);if(!i.success)throw Error("Invalid args: "+i.error.toString());let{plugin_code:r,ui_code:a}=i.data;return ty(r,a);case"edit_file":{let e=e5.z.object({code:e5.z.string()}).safeParse(t);if(!e.success)throw Error("Invalid args: "+e.error.toString());let{code:n}=e.data;return ty(n)}default:throw Error(`No function found for ${e.function.name}`)}}async function ty(e,t){let n=p.zl.get(X.ze),i=(0,ti.o8)();if(!i)throw Error("Cannot run plugin while logged out");if(!n)throw Error("No file key found");await (0,e8.wY)();let r=`
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
    ${t}
    </script>
    <div id="root"></div>
    `,a=t?(0,eN.nx)(e,r):e,s=(0,e8.mv)();return e8.iu.currentPluginRunID=s,(0,e9.E9)({allowedDomains:tr.gH,apiVersion:e7.pS,capabilities:[],stats:new ta.P,checkSyntax:!0,code:a,command:"",disableSilenceConsole:!0,enablePrivatePluginApi:!1,enableProposedApi:!1,errorHandler:B.lQ,isLocal:!0,isWidget:!1,name:"Assistant plugin",openFileKey:n,permissions:eN.qH.forFirstPartyPlugin(),pluginID:"",pluginRunID:s,pluginVersionID:"0",queryMode:!1,showLaunchErrors:!0,showRuntimeErrors:!0,titleIconURL:"",userID:i,vmType:"cppvm",editorType:[eP.FW.FIGMA],incrementalSafeApi:!1,enableNativeJsx:!1}),{userFacing:{type:"plugin",status:"success"},assistantFacing:{type:"plugin",status:"success"}}}async function tb(e){let t=ee.D.getState(),n=(0,X.tB)(t),i=(0,tt.vx)(t);if(!n||null==i)throw Error("No open file or file version found");let r=1;for(;!(0,e6.Wg)(ee.D.getState())&&r<=50;)await new Promise(e=>setTimeout(e,200*r)),r++;if(!(0,e6.Wg)(ee.D.getState()))throw Error("Failed to initialize assets");let a={type:J.IS.ALL},s=(0,tn.yY)((0,eQ.XE)((0,te.h)(t))),o=p.zl.get(e4.qp);t=ee.D.getState();let l={type:"input-text",query:e,assetTypeOption:a,isKnownLibrary:e=>!0,openFile:(0,X.tB)(t),selectedView:(0,te.h)(t),inDesignEditor:s,fileVersion:i,currentOrgId:(0,e3.eD)(t),fileByKey:(0,tt.t_)(t),libraryByLibraryKey:o,includeVisualAssets:!1,usedAssetKeys:(0,e3.ET)(t,ee.D.dispatch)};e6.YG.refreshSourcesIfNeeded(ee.D);let d=await e6.YG.computeResultsReduxSearchTypeHelper(e,a,s,o,null),c=d.normalizedSearchResults;return c=d.normalizedSearchResults.filter(e=>l.isKnownLibrary(e)),(0,e6.Ow)(c)}var tv=(e=>(e.Idle="idle",e.Loading="loading",e.Error="error",e))(tv||{});let tC=(0,p.eU)({status:"idle",messages:[]});async function tE(e,t,n,i){try{let r;let a=e$.UN().getCurrentPage()?.directlySelectedNodes,s="string"==typeof e?{role:"user",content:[{type:"text",text:`<user_message><user_input>${e}</user_input><selected_layer_ids>${a&&JSON.stringify(a.map(e=>e.guid))}</selected_layer_ids></user_message>`}]}:e;n(e=>({...e,status:tv.Loading,messages:[...e.messages,s]}));let o=[];for(let e of t){let t=function(e){if("tool"!==e.role)return e;let t=e.content,n="string"==typeof t?JSON.parse(t):t,i=tx.parse(n).assistantFacing,r=i.type;switch(r){case"selection":case"assets":case"fragments":let{images:a,...s}=i;return{...e,content:JSON.stringify(s)};case"plugin":case"request-feature":return e;default:(0,F.xb)(r)}}(e);o.push(t)}let l=(await e2(s,o,i)).getReader();for(;;){let{done:e,value:t}=await l.read();if(e){n(e=>({...e,status:tv.Idle}));break}let{sendFollowup:i,newMessages:a}=function(e){if("tool"!==e.role)return{sendFollowup:!1,newMessages:[]};let t=e.content,n="string"==typeof t?JSON.parse(t):t,i=tx.parse(n),r=i.assistantFacing.type;switch(r){case"selection":case"assets":case"fragments":return{sendFollowup:!0,newMessages:[{role:"user",content:[{type:"text",text:"\x3c!-- The tool call showed me the following images: --\x3e"},...i.assistantFacing.images.map(e=>({type:"image_url",image_url:{url:e.startsWith("http")?e:`data:image/jpeg;base64,${e}`,detail:"high"}}))]}]};case"plugin":case"request-feature":return{sendFollowup:!1,newMessages:[]};default:(0,F.xb)(r)}}(t);a.length>0&&i&&(r=a[a.length-1]),n(e=>"string"==typeof t.content&&0===t.content.length||t.role!==e.messages[e.messages.length-1]?.role?{status:tv.Loading,messages:[...e.messages,t,...a]}:{status:tv.Loading,messages:[...e.messages.slice(0,-1),t,...a]})}r&&tE(r,p.zl.get(tC).messages,n,i)}catch(e){(0,e0.Lo)("Send chat message failed: ",e.message),n(e=>({...e,status:tv.Error}))}}var tw=n(790016),tk=n(579891),tT=n(303288);let tj=(0,a.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.5 5a6.5 6.5 0 0 1 4.935 10.728l3.419 3.419a.5.5 0 1 1-.707.707l-3.42-3.42A6.5 6.5 0 1 1 11.5 5m0 1a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11m-.485 2.44c.126-.505.844-.505.97 0l.515 2.06 2.06.515c.505.126.505.844 0 .97l-2.06.515-.515 2.06c-.126.505-.844.505-.97 0L10.5 12.5l-2.06-.515c-.505-.126-.505-.844 0-.97l2.06-.515z"})})});var tS=n(510977),tI=n(181760),tA=n(939514),tN=n(441498),tM=n(919530),tR=n(976541),tP=n(622043),tO=n(384795),tD=n(585066),tL=n(536378),tF=n(605985),tB=n(803575),tU=n(410116),tV=n(361149),tH=n(243092),tz=n(391132),tG=n(828226),tK=n(942356),tW=n(875253),tq=n(747079),tX=n(890305);function tY({url:e}){return(0,r.jsx)("img",{src:e,className:K.s.maxW100.$,alt:"debug"})}function tJ(e){let{obj:t,depth:n=0}=e;if(null===t)return(0,r.jsx)("span",{className:K.s.colorTextTertiary.$,children:(0,U.t)("assistant.debug.null")});if("object"!=typeof t){if("string"==typeof t){if(t.startsWith("{")&&t.endsWith("}"))try{let e=JSON.parse(t);return(0,r.jsx)(tJ,{obj:e,depth:n})}catch(e){}return t.startsWith("data:image")?(0,r.jsx)(tY,{url:t}):t.length>300&&t.match(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/)?(0,r.jsx)(tY,{url:`data:image/jpeg;base64,${t}`}):(0,r.jsxs)("span",{className:K.s.colorTextSuccess.$,children:['"',t,'"']})}return"number"==typeof t?(0,r.jsx)("span",{className:K.s.colorTextSelected.$,children:t}):"boolean"==typeof t?(0,r.jsx)("span",{className:K.s.colorTextComponent.$,children:t.toString()}):(0,r.jsx)("span",{children:t})}let i=Array.isArray(t),a=i?["[","]"]:["{","}"],s=Object.entries(t);return(0,r.jsxs)("div",{style:{marginLeft:`${8*n}px`},children:[a[0],s.length>0&&(0,r.jsx)("div",{children:s.map(([e,t],a)=>(0,r.jsxs)("div",{children:[!i&&(0,r.jsx)("span",{className:K.s.colorTextDanger.$,children:`"${e}:" `}),(0,r.jsx)(tJ,{obj:t,depth:n+1}),a<s.length-1&&","]},e))}),a[1]]})}function tZ(e){let{data:t}=e;return(0,r.jsx)("pre",{contentEditable:!0,className:"font-mono text-sm select-all text-wrap",children:(0,r.jsx)(tJ,{obj:t})})}function tQ({messages:e}){return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:K.s.px2.py2.$,children:(0,r.jsx)(tZ,{data:e})})})}let t$=(0,tq.Ju)(function({messages:e}){let t=(0,s.wA)();return(0,r.jsx)(tX.Ao,{onClose:()=>{t(tL.AS())},initialPosition:new tW.Mi(0,0),initialWidth:400,allowResizeWidth:!0,autoflowHeight:!0,title:(0,U.t)("assistant.debug.title"),dragHeaderOnly:!0,children:(0,r.jsxs)("div",{className:K.s.px2.py2.$,style:{height:600,overflowX:"scroll",overflowY:"scroll"},children:[(0,r.jsx)(tK.$n,{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e,void 0,2))},children:(0,U.t)("assistant.debug.copy_all")}),(0,r.jsx)(tQ,{messages:e})]})})},"AiChat_DEPRECATEDDebugModal",tq.ZU.YES);function t0(){let[e,t]=a.useState(""),[n,i]=(0,p.fp)(tC),o=(0,s.wA)(),l=(0,s.d4)(e=>e.modalShown);(0,Z.b)();let d=a.useCallback(()=>{if(l&&l.type===t$.type){o(tL.AS());return}o(tL.to({type:t$,data:{messages:n.messages}}))},[n.messages,o,l]);a.useEffect(()=>{l?.type!==t$.type||o(tL.hm({type:t$.type,data:{messages:n.messages}}))},[n.messages,o,l]);let c=a.useCallback(()=>{"/debug"===e?d():tE(e,n.messages,i,t_),t("")},[e,n.messages,i,d]);return(0,r.jsxs)(es.n,{height:$.wC,hideActionPanel:!0,children:[(0,r.jsx)(es.n.Body,{children:0===n.messages.length?(0,r.jsx)(t1,{}):(0,r.jsx)(tH.q,{stretchContent:!1,useBottomPinning:!0,enableScrollShadow:!0,children:(0,r.jsxs)("div",{className:K.s.py8.flex.flexColumn.gap4.$,children:[n.messages.map((e,t)=>(0,r.jsx)(t6,{message:e},`msg-${t}`)),(0,r.jsx)("div",{style:{marginLeft:"44px",marginRight:"12px"},children:(0,r.jsx)(t4,{status:n.status})})]})})}),(0,r.jsx)(es.n.Footer,{children:(0,r.jsx)(eo.vj,{placeholder:(0,U.t)("fullscreen_actions.assistant-chat"),searchQuery:e,onSearchChange:t,endEnhancer:(0,r.jsx)(tU.r,{shortcuts:[{key:z.Uz.ENTER}],onAction:c,disabled:0===e.length||n.status===tv.Loading,children:(0,U.t)("assistant.chat.send_message")})})})]})}function t1(){return(0,r.jsxs)("div",{className:K.s.flex.flexColumn.itemsCenter.justifyEnd.hFull.gap8.$,children:[(0,r.jsx)(tT.J,{}),(0,r.jsxs)("div",{className:K.s.flex.flexRow.gap16.$,children:[(0,r.jsx)("div",{className:K.s.flex.flexColumn.itemsCenter.flexGrow1.gap8.$,children:(0,r.jsxs)(t2,{inputToSend:"Find similar designs to my selection",children:[(0,r.jsx)(tj,{}),"Find designs"]})}),(0,r.jsxs)("div",{className:K.s.flex.flexColumn.itemsCenter.flexGrow1.gap8.$,children:[(0,r.jsxs)(t2,{inputToSend:"Make a plugin that creates rectangles in a grid",children:[(0,r.jsx)(tS.m,{}),(0,U.t)("assistant.chat.suggestion.make_tool")]}),(0,r.jsxs)(t2,{inputToSend:"",disabled:!0,children:[(0,r.jsx)(tI.X,{}),(0,U.t)("assistant.chat.suggestion.coming_soon")]})]})]})]})}function t2({children:e,inputToSend:t,disabled:n}){let[i,s]=(0,p.fp)(tC),o=a.useCallback(()=>{tE(t,i.messages,s,t_)},[t,i.messages,s]);return(0,r.jsx)("button",{className:K.s.flex.flexColumn.justifyEnd.wFull.b1.colorBorder.gap8.textBodyLargeStrong.p12.if(n,K.s.colorTextSecondary).$,style:{borderRadius:13,minWidth:150,...n&&{"--color-icon":"var(--color-text-secondary)"}},onClick:o,disabled:n,children:e})}function t5({children:e}){return(0,r.jsx)("div",{className:K.s.flex.flexRow.itemsCenter.wFull.b1.colorBorder.gap8.h40.textBodyLargeStrong.px4.mr12.$,style:{borderRadius:13},children:e})}function t4({status:e}){let t;switch(e){case tv.Idle:t=null;break;case tv.Loading:t=(0,r.jsxs)(t5,{children:[(0,r.jsx)("div",{className:K.s.pl4.flex.itemsCenter.justifyCenter.$,children:(0,r.jsx)(tD.k,{})}),(0,r.jsx)("div",{className:K.s.colorTextSecondary.$,children:(0,U.t)("assistant.chat.status.loading")})]});break;case tv.Error:t=(0,r.jsxs)(t5,{children:[(0,r.jsx)(tA.e,{}),(0,U.t)("assistant.chat.status.error")]});break;default:(0,F.xb)(e)}return(0,r.jsx)(tP.N,{mode:"popLayout",initial:!1,children:(0,r.jsx)(tO.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t},e)})}function t3(e){let t=a.useRef(null),n=(0,s.d4)(X.tB);try{let i=e.content,a="string"==typeof i?JSON.parse(i):i,{userFacing:s}=tx.parse(a);if("fragments"===s.type){let e=s.fragments.map(e=>({...e,type:"fig-file-fragment"}));return(0,r.jsx)(tG.U,{fragments:e,focusHandle:t,numberOfGridColumns:3,maxResults:3,entryPoint:W.G4.ACTIONS_LIST,disableActionShortcuts:!0})}if("assets"===s.type)return(0,r.jsx)(tV.x,{primary:!0,columns:3,padding:8,gap:12,children:s.assets.map((e,t)=>(0,r.jsx)(tz.a,{asset:e,assetTypeDropdownSelection:J.IS.ALL,disableActionShortcuts:!0,libraryNameByLibraryKeyFromLG:{},openFileKey:n?.key??"",queryId:"",searchQuery:s.queries[0],searchSessionId:p.zl.get(I.dd)??"",sectionPosition:t},t))});if("selection"===s.type)return(0,r.jsxs)(t5,{children:[(0,r.jsx)(tN.W,{}),(0,U.t)("assistant.chat.tool_result.selection.success")]});if("request-feature"===s.type)return(0,r.jsxs)(t5,{children:[(0,r.jsx)(tN.W,{}),(0,U.t)("assistant.chat.tool_result.feature_request")]});return(0,r.jsxs)(t5,{children:[(0,r.jsx)(tM.g,{}),(0,U.t)("assistant.chat.tool_result.success")]})}catch(e){return(0,r.jsxs)(t5,{children:[(0,r.jsx)(tA.e,{}),(0,U.t)("assistant.chat.tool_result.error")]})}}function t6({message:e}){let t=(0,tF.iZ)();return"user"===e.role&&"string"!=typeof e.content&&e.content?.length&&e.content[0]?.type==="text"&&e.content[0].text.startsWith("\x3c!--")||"assistant"===e.role&&!e.content||"tool"===e.role&&!e.content?null:(0,r.jsx)("div",{className:K.s.px12.py4.flex.wFull.$,children:(0,r.jsxs)("div",{className:K.s.gap8.flex.wFull.$,children:[(0,r.jsx)("div",{className:K.s.w24.h24.flexShrink0.flex.itemsCenter.justifyCenter.$,children:"assistant"===e.role||"tool"===e.role?(0,r.jsx)(tT.J,{}):t?.img_url?(0,r.jsx)(tB.J,{src:t.img_url,className:K.s.w16.h16.radiusFull.$}):(0,r.jsx)(tR.j,{})}),(0,r.jsxs)("div",{className:K.s.flex.flexColumn.wFull.pt2.$,children:[(0,r.jsx)("span",{className:K.s.textBodyLargeStrong.$,children:"assistant"===e.role||"tool"===e.role?"Figma":"You"}),"tool"===e.role?(0,r.jsx)("div",{className:K.s.wFull.pt4.$,children:(0,r.jsx)(t3,{...e})}):"string"==typeof e.content?(0,r.jsx)(t7,{text:e.content}):(0,r.jsx)("div",{children:null===e.content?null:e.content.map((e,t)=>"text"===e.type?(0,r.jsx)(t7,{text:e.text},`sub-t-${t}`):null)})]})]})})}function t7({text:e}){let t=e;try{let n=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("user_input");n.length>0&&(t=n[0].textContent||"")}catch{}return(0,r.jsx)("div",{children:t.split("\n").map((e,t)=>(0,r.jsxs)("span",{children:[e,(0,r.jsx)("br",{})]},`l-${t}`))})}var t9=n(588526),t8=n(100252),ne=n(980489),nt=n(774837),nn=n(943866),ni=n(62023),nr=n(576116),na=n(217213),ns=n(279758),no=n(869525);let nl=(0,a.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M16.5 11a.5.5 0 0 1 .5.5v6a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 7 17.5v-2a.5.5 0 0 1 1 0v2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 1 .5-.5m-6.353.146a.5.5 0 0 1 .707 0l2 2a.5.5 0 0 1 0 .707l-2 2a.5.5 0 1 1-.707-.707L11.293 14H5.5a.5.5 0 0 1 0-1h5.793l-1.146-1.146a.5.5 0 0 1 0-.707m2.45-6.136a.5.5 0 0 1 .257.136l4 4A.5.5 0 0 1 16.5 10h-4a.5.5 0 0 1-.5-.5V6H8.5a.5.5 0 0 0-.5.5v5a.5.5 0 0 1-1 0v-5A1.5 1.5 0 0 1 8.5 5h4zM13 9h2.293L13 6.707z"})})});var nd=n(629036),nc=n.n(nd),nu=n(190284),nm=n.n(nu);function np(){let e=(0,s.d4)(e=>e.mirror?.appModel);return(t,n,i=!1)=>{let r=t[n];if(r&&(i||!r.disabled&&(!r.action||(0,eL.Yh)(e,n))))return r}}function nh(e){switch(e){case no.b.RECENTS:return 0;case no.b.ORGANIZE:return 1;case no.b.TEMPLATES_AND_DIAGRAMS:return 2;case no.b.IMAGE_EDITING:return 3;case no.b.DESIGN_TOOLS:return 4;case no.b.RIFFING_AND_WRITING:return 5;case no.b.COLLABORATION_TOOLS:return 6;case no.b.HANDOFF_TOOLS:return 7;case no.b.VIEWER_TOOLS:return 8;case no.b.SUGGESTIONS:return 9;case no.b.COMMON_SETTINGS:return 10;case null:return 100;default:return(0,F.xb)(e)}}var nf=n(132216),ng=n(652154),nx=n(353950),n_=n(513861),ny=n(501201),nb=n(790208);let nv=new Set([$.JT.REMOVE_BACKGROUND,$.JT.UPSCALE_IMAGE]),nC=new Set([...nv,$.JT.EDIT_IMAGE,$.JT.EXPAND_IMAGE,$.JT.REMOVE_OBJECT,$.JT.SEPARATE_OBJECT]);var nE=(e=>(e[e.NONE=0]="NONE",e[e.MULTI_IMAGE=1]="MULTI_IMAGE",e[e.SINGLE_IMAGE=2]="SINGLE_IMAGE",e[e.IMAGE_PLACEHOLDER=3]="IMAGE_PLACEHOLDER",e))(nE||{});function nw(e,t){return 2!==e&&1!==e||t.action!==$.JT.GENERATE_IMAGE}let nk=new Map([[$.JT.REMOVE_BACKGROUND,no.b.IMAGE_EDITING],[$.JT.UPSCALE_IMAGE,no.b.IMAGE_EDITING],[$.JT.EXPAND_IMAGE,no.b.IMAGE_EDITING],[$.JT.REMOVE_OBJECT,no.b.IMAGE_EDITING],[$.JT.SEPARATE_OBJECT,no.b.IMAGE_EDITING],[$.JT.GENERATE_IMAGE,no.b.IMAGE_EDITING],[$.JT.EDIT_IMAGE,no.b.IMAGE_EDITING],[$.JT.VECTORIZE_IMAGE,no.b.IMAGE_EDITING],[$.JT.AUTO_RENAME_LAYERS,no.b.DESIGN_TOOLS],[$.JT.CONTENT_FILL,no.b.DESIGN_TOOLS],[$.JT.FIND_INSPIRATION,no.b.DESIGN_TOOLS],[$.JT.FIRST_DRAFT,no.b.DESIGN_TOOLS],[$.JT.FIRST_DRAFT_FINE_TUNE,no.b.DESIGN_TOOLS],[$.JT.MAGIC_LINK,no.b.DESIGN_TOOLS],[$.JT.MAKE_EDITS,no.b.DESIGN_TOOLS],[$.JT.REWRITE_TEXT,no.b.RIFFING_AND_WRITING],[$.JT.SLIDES_GENERATE_SPEAKER_NOTES,no.b.RIFFING_AND_WRITING],[$.JT.SLIDES_REWRITE_TEXT,no.b.RIFFING_AND_WRITING],[$.JT.SHORTEN_TEXT,no.b.RIFFING_AND_WRITING],[$.JT.TRANSLATE_TEXT,no.b.RIFFING_AND_WRITING],[$.JT.WHITEBOARD_GENERATE_CONTENT,no.b.TEMPLATES_AND_DIAGRAMS],[$.JT.SUMMARIZE_STICKIES,no.b.ORGANIZE],[$.JT.SORT_STICKIES_BY_TOPIC,no.b.ORGANIZE],[$.JT.MIND_MAP_GENERATE_IDEAS,no.b.TEMPLATES_AND_DIAGRAMS],[$.JT.MERMAID_TO_DIAGRAM,no.b.TEMPLATES_AND_DIAGRAMS],[$.OZ,no.b.DESIGN_TOOLS],[$.Ax,no.b.DESIGN_TOOLS]]),nT=[["set-tool-comments",no.b.COLLABORATION_TOOLS],["present-as-prototype",no.b.COLLABORATION_TOOLS],["set-tool-measure",no.b.HANDOFF_TOOLS],["set-tool-annotate",no.b.HANDOFF_TOOLS],["zoom-to-fit",no.b.VIEWER_TOOLS],["export-selected-exportables",no.b.VIEWER_TOOLS],["copy-as-png",no.b.VIEWER_TOOLS]],nj=[["theme-light-mode",no.b.COMMON_SETTINGS],["theme-dark-mode",no.b.COMMON_SETTINGS],["theme-system",no.b.COMMON_SETTINGS]],nS=[["request-to-edit",no.b.COLLABORATION_TOOLS],["set-tool-comments",no.b.COLLABORATION_TOOLS],["present-as-prototype",no.b.COLLABORATION_TOOLS],["zoom-to-fit",no.b.VIEWER_TOOLS],["page-next",no.b.VIEWER_TOOLS],["export-selected-exportables",no.b.VIEWER_TOOLS],["toggle-rulers",no.b.VIEWER_TOOLS]];var nI=(e=>(e.DESIGN_EDITOR_AI="DESIGN_EDITOR_AI",e.DESIGN_EDITOR_NO_AI="DESIGN_EDITOR_NO_AI",e.DESIGN_VIEWER="DESIGN_VIEWER",e.DEV_MODE="DEV",e.VARIABLES_TABLE="VARIABLES_TABLE",e.NONE="NONE",e))(nI||{});function nA(){let e=m.Ez5?.singleSlideView().isFocusedNodeViewFocused(),t=(0,ns.Vr)(),n=(0,s.d4)(nr.Sh);return(!t||!t.isSlide||!e)&&n.length>0}function nN(e,t){let n=(0,s.d4)(e=>e.selectedView);return a.useMemo(()=>new na.xm(e,n,t,{includeDisabled:!0,acceptsUnicode:!0}),[e,n,t])}var nM=n(132421);n(323264);var nR=n(778650),nP=n(236078),nO=n(819805),nD=n(456556),nL=n(702417),nF=n(103392),nB=n(423407),nU=n(920675),nV=n(404195);function nH({children:e}){return(0,r.jsxs)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xg2d0mh",children:[e,(0,r.jsx)(nB.E,{variant:"brandOutline",children:(0,U.tx)("fullscreen_actions.new")})]})}var nz=n(245834),nG=n(43612),nK=n(394738),nW=n(362330),nq=n(773008),nX=n(998367);let nY=(0,a.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 6A1.5 1.5 0 0 1 18 7.5v6a.5.5 0 0 1-1 0V10h-6v7h2.5a.5.5 0 0 1 0 1h-6A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6zM10 17v-7H7v6.5a.5.5 0 0 0 .5.5zM7 9h10V7.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9.7 7.7.315-1.26c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L16.7 18.3l-1.26-.315c-.505-.126-.505-.844 0-.97z",clipRule:"evenodd"})})});var nJ=n(800307),nZ=n(798749),nQ=n(683168),n$=n(626056),n0=n(795331),n1=n(218665),n2=n(276637),n5=n(907594),n4=n(418347),n3=n(525897),n6=n(758121),n7=n(873034),n9=n(902144),n8=n(91619),ie=n(220678),it=n(453255),ii=n(653900),ir=n(878614),ia=n(772293),is=n(354099),io=n(300573),il=n(18294),id=n(857621),ic=n(624069),iu=n(423808),im=n(796970),ip=n(566779),ih=n(489445),ig=n(818350),ix=n(638163),i_=n(206189),iy=n(622250),ib=n(639457),iv=n(692729),iC=n(798913),iE=n(17147),iw=n(409084),ik=n(785496),iT=n(41801),ij=n(608284),iS=n(777919),iI=n(59510),iA=n(550507),iN=n(282664),iM=n(588358),iR=n(125212),iP=n(507641),iO=n(381213),iD=n(199689),iL=n(298707),iF=n(643102),iB=n(680912),iU=n(419312);async function iV({params:{prompt:e,actionData:t,modelType:n},clientLifecycleId:i}){await Promise.all(t.map(t=>iH(e,t.image,n,t.onImageSuccess,t.onImageFailed,i)))}async function iH(e,t,n,i,r,a){try{let r={...(0,iB.Ay)(),clientLifecycleId:a},s=await e1.Ay.buzz.promptToDesign({prompt:e,image:t,modelType:n},r),o=s.referenceImage?await (0,iU.UD)((0,iE.Vs)(s.referenceImage),"image/png",e):null,l=await (0,iU.UD)((0,iE.Vs)(s.backgroundImage),"image/png",e);i(o,l,s.styledGroups)}catch(e){if("AbortError"===e.name)return;throw r(),e}}let iz=["Create a flyer for a local yard sale","Make a poster for a neighborhood bake sale","Design a banner for a small business grand opening","Generate a social post for a seasonal sale at a local boutique","Make a digital ad for a community event at a senior center this weekend",'Create a flyer: "Dog Adoption Fair \u2013 Sunday, June 15, 10\u20132 PM, Riverside Park.','Design an Instagram story promoting a yoga class: "Morning Flow at Sunbeam Studio, starts May 3','Make a product launch post for a new coffee blend called "Velvet Roast.','Generate a sleek, modern, corporate LinkedIn banner for an upcoming webinar on May 3rd: "AI Trends 2025',"Design a playful poster for a kid's summer art camp in July using bright colors and hand-drawn fonts","Design an editorial-style, earthy, real image-driven, instagram story ad for a new local grocery co-op opening","Design a minimal, high-contrast poster for an art show; headline must dominate","Make a social post using Starbucks' green and cream color palette to announce a new seasonal drink: \"The Winter Velvet Latte.","Design a banner for Nike announcing a new running shoe launch \u2014 focus on energy, motion, and sleek typography with bold contrast.",'Make an ad using Figma\'s design language to recruit participants for a "Design Systems 101" webinar','Generate a poster for Etsy sellers promoting the "Holiday Shop Small" campaign; it should feel handmade, warm, and community-driven.'];var iG=n(393012);async function iK(e,t){let n=(0,e$.UN)(),i=function(e){let t=(0,e$.UN)().createNode("FRAME");return t.name="Reconstruction",t.x=e.x,t.y=e.y,t.size={x:e.size.x,y:e.size.y},t.appendChild(e),e.x=0,e.y=0,t}(e),r=await Promise.all(t.map(e=>iW(e.fontName,e.fontWeight,e.isItalicized)));for(let a=0;a<t.length;a++){let s=t[a],o=r[a];if(!s||!o){console.error("Missing group or font for styled group at index",a);continue}iC.l7.ai("buzzDesignToPrompt",()=>{let t=n.createNode("TEXT");i.appendChild(t),t.characters=s.text,t.fontName={...o,postscript:""};let r=m.IPu?.computeTextSize({text:s.text,font:s.fontName,weight:s.fontWeight,italicized:s.isItalicized,color:s.textFillColor,justification:s.alignment,boundingBox:s.boundingBox,lines:s.lines});if(!r||!r.fontSize){console.error("Failed to compute text sizing for group");return}t.fontSize=r.fontSize,t.lineHeight={value:t.fontSize,units:"PIXELS"},t.fills=[{type:"SOLID",color:{...iq(s.textFillColor),a:1}}],s.textStroke&&(t.strokePaints={data:[{type:"SOLID",color:{...iq(s.textStroke.color),a:1},opacity:1,visible:!0}],blobs:[]},t.strokeWeight=s.textStroke.width,t.strokeAlign="OUTSIDE"),s.textShadow&&(t.effects=[{type:"DROP_SHADOW",color:{...iq(s.textShadow.color),a:s.textShadow.opacity},offset:{x:s.textShadow.offsetX,y:s.textShadow.offsetY},radius:s.textShadow.blurRadius,spread:0,visible:!0,blendMode:"NORMAL"}]),t.textAlignHorizontal=s.alignment.toUpperCase(),t.size={x:s.boundingBox.width+.1*s.boundingBox.width,y:s.boundingBox.height},t.rotation=-s.boundingBox.rotation*(180/Math.PI);let a=s.boundingBox.coordinates[0];t.x=e.x+a.x,t.y=e.y+a.y,t.textAutoResize="NONE",setTimeout(()=>{m.IPu?.resizeTextToFitNumLines(t.id,s.lines.length)},1e3)})}n.getCurrentPage()?.setSelectionToSingleNode(i.id)}async function iW(e,t,n){try{let i=(0,iG.ye)(e,t,n);if(!i)throw Error(`No closest font found for ${e}, weight ${t}, italic ${n}`);return await (0,iG.EV)(i),i}catch(t){return console.error(`Failed to load font ${e}, falling back to Inter Regular:`,t),{family:"Inter",style:"Regular"}}}function iq(e){if(!/^#?[0-9A-Fa-f]{6}$/.test(e))throw Error(`Invalid hex color: ${e}`);let t=e.replace("#","");return{r:parseInt(t.substring(0,2),16)/255,g:parseInt(t.substring(2,4),16)/255,b:parseInt(t.substring(4,6),16)/255}}let iX=(0,p.E3)("buzz_prompt_to_design_prompt_history",[]);async function iY(e){let t=await iJ();if(!t.length)return[{referenceImageNode:(0,iR.qq)({create:!0,canvasGrid:e,size:{x:iv.$G,y:iv.sA}})}];for(let{referenceImageNode:e,imageData:n}of t)n&&iC.l7.ai("buzzPromptToDesign",()=>{e.size={x:n.originalWidth,y:n.originalHeight}});return t}async function iJ(){let e=[];for(let t of(0,ij.i2)()){let n=t.fills.find(e=>"IMAGE"===e.type&&e.image);if(!n)continue;let i=n?.originalImageWidth,r=n?.originalImageHeight,a=await (0,iA.I)(n);a&&r&&i&&(iC.l7.ai("buzzPromptToDesign",()=>{t.size={x:i,y:r}}),e.push({referenceImageNode:t,imageData:{imageBase64:(0,iE.H9)(a),originalHeight:r,originalWidth:i}}))}return e}var iZ=n(430377),iQ=n(460637);function i$({action:e,actionType:t,actionIcon:n,actionLabel:i,instructionLabel:a}){let[s]=(0,p.fp)(ip.hQ),o=(0,iZ.s)(e),{close:l}=(0,M.cq)(),d=(0,ei._M)({action:e,clientLifecycleId:void 0});return s?(l(),null):e&&o.state!==iZ.w.SELECTION_OK?(0,r.jsx)(iQ.AE,{action:e,actionIcon:n,actionLabel:i,onPerform:()=>{o.confirmInitialSelection(),(0,ip.J7)(t),l()},aiTrackingContext:d,instructionAction:{type:"learn_more",url:$.UW},children:a}):null}var i0=n(863739),i1=n(238754),i2=n(134670),i5=n(424364),i4=n(888830),i3=n(522645),i6=n(677394),i7=n(224542),i9=n.n(i7),i8=n(158053),re=n(726582),rt=n(522568),rn=n(687631),ri=n(228703),rr=n(499735),ra=n(70887);function rs(e,t){return(0,ra.YJ)({nodeIds:Object.keys(e),options:{skipNodeIds:!1,detachInstances:!0,includeType:!0,skipNodeIdsWithoutType:t,classPropName:"class",autoLayoutTagName:"div",frameTagName:"div"}})}var ro=n(43141),rl=n(127446);let rd="first_draft_prompt_history_";var rc=n(920858);async function ru(e,t,n){let i=(0,e$.UN)();for(let r of n.flatMap(e=>e.nodeWeightInfos)){let n=i.get(r.nodeId);if(!n)continue;let a=function(e,t,n,i){if(!rc.z[t])return;let r=rc.z[e];if(r)return r[n][i]}(t,n.fontName.family,e,r.weight),s={family:t,style:a?.style??n.fontName.style};try{await (0,iG.uW)(s),iC.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=s})}catch(i){let e={family:t,style:"Regular"};try{await (0,iG.uW)(e),iC.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=e})}catch(t){let e=void 0===t?"undefined":t instanceof Error?t.message:JSON.stringify(t);rt.az.trackDefinedEvent("ai_generation.first_draft_font_error",{error:e,family:s.family,style:s.style,location:"adjust-font"})}}iC.l7.user("first-draft-theme-modal-adjust-font-family",()=>{a?.letterSpacing!==void 0&&(n.letterSpacing=a.letterSpacing)})}}var rm=n(128261),rp=n(809267),rh=n(276159),rf=n(771993),rg=n(637739),rx=n(883343),r_=n(895019),ry=n(67370);let rb=new(n(575)).q(40);async function rv({changes:e,makeChangesSessionId:t,clientLifecycleId:n,containingNodeId:i,instrumentationRef:r}){let a=(0,e$.UN)().get(e.affectedId);if(!a)return!1;let s=`${t}:${e.affectedId}`;if(rb.has(s))return(0,e_.$D)(l.e.AI_GENERATION,Error("first-draft: Attempted to apply content changes twice"),{extra:{clientLifecycleId:n}}),!1;if(rb.set(s,!0),!a.getSharedPluginData("jsx","isImage"))return iC.l7.ai("first-draft-iterate-text-content",()=>(function({node:e,textContent:t}){return"TEXT"!==e.type?((0,e0.xi)("first-draft","Update text called on a non-text node",{nodeId:e.guid,nodeType:e.type}),!1):(e.characters=t,!0)})({node:a,textContent:e.content})),!0;{let t=a.getSharedPluginData("jsx","background");return await r.current.logImageLoad(()=>(0,iT.Og)({node:a,description:e.content,background:t,clientLifecycleId:n,containingNodeId:i,endpoint:e1.Ay.design.firstDraftCreateImage})),!0}}async function rC(e,t){try{let{parseJSX:i}=await Promise.resolve().then(n.bind(n,159360));return i(e,t)}catch{return null}}var rE=n(782015),rw=n(718923);async function rk({action:e,insertJSX:t,options:{dsKitKey:n,currentTheme:i,imageArgs:r,rootNodeId:a}}){try{let{affectedId:s,jsxToInsert:o}=e,l=(0,e$.UN)().get(s);if(!l)throw Error("Could not find affected node in the scene");let d=(0,e$.UN)().get(a);if(!d)throw Error("Could not find root node in the scene");let c=(0,rx.BY)(d),u=l.parentNode;if(!u)throw Error("Could not find affected node in the scene");let m=u.childrenGuids.indexOf(s);if(-1===m)throw Error("Could not find affected node in the scene");let p="below";"insert"===e.type&&(p=e.insertBehavior);let h=await rC(o);if(!h||0===h.length)throw Error("Failed to parse JSX");let f=(0,rE.fv)(h);if(0===f.size)throw Error("Only building blocks can be inserted or replaced");await t({jsxStr:"```jsx\n"+o+"\n```",options:{...(0,rw.Dp)(),insertBehavior:"inline",dsKitKey:n,themeProperties:i,deviceType:c,parentNodeId:u.guid,insertAtIndex:"above"===p?m:m+1,imageArgs:r}}),"replace"===e.type&&iC.l7.ai("first-draft-make-changes-remove",()=>{l.removeSelfAndChildren()})}catch(t){throw(0,e_.$D)(l.e.AI_GENERATION,t,{extra:{action:e,dsKitKey:n}}),t}}var rT=n(874134),rj=n(295432);function rS(){let e=(0,eS.eY)(),t=Object.entries((0,eS.KH)()).filter(([e,t])=>t).map(([e])=>e),n=null;for(let i of t)if(n=function(t){let n="",i=t;for(;!n&&i;){let t=e.get(i);if(!t)break;t.getSharedPluginData(rj.SV,"userPrompt")&&(n=i),i=t.parentGuid||""}return n||null}(i))break;return n}var rI=n(793567),rA=n(582389),rN=n(582902),rM=n(571666);function rR(){return(0,r.jsx)("div",{className:"animation_overlay--Sweep--paA9d"})}var rP=n(574257),rO=n(272063),rD=n(545242),rL=n(311939),rF=n(347087),rB=n.n(rF),rU=(e=>(e.mobile="MOBILE",e.web="WEB",e))(rU||{});function rV(e=1){let t=[{label:(0,U.t)("first_draft.make_changes.prompt_labels.change_font"),prompt:(0,U.t)("first_draft.make_changes.prompts.futuristic_font")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,U.t)("first_draft.make_changes.prompts.calming_colors")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.round_corners"),prompt:(0,U.t)("first_draft.make_changes.prompts.round_corners")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,U.t)("first_draft.make_changes.prompts.watermelon_theme")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.rewrite"),prompt:(0,U.t)("first_draft.make_changes.prompts.punchier_text")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.imagery"),prompt:(0,U.t)("first_draft.make_changes.prompts.vibrant_images")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.add"),prompt:(0,U.t)("first_draft.make_changes.prompts.add_another_section")},{label:(0,U.t)("first_draft.make_changes.prompt_labels.replace"),prompt:(0,U.t)("first_draft.make_changes.prompts.replace_hero_image")}];return eJ()(rB()(t.filter(e=>""!==rH(e.label))),e=>e.label).slice(0,e)}function rH(e){return e.trim().toLowerCase()}var rz=n(727640),rG=n(733200),rK=n(288350),rW=n(362940),rq=n(378721),rX=n(698572),rY=n(69553),rJ=n(64939),rZ=n(811804),rQ=n(86742),r$=n(641332),r0=n(339675),r1=n(697134),r2=n(737694),r5=n(236941);function r4({children:e}){let t=(0,a.useRef)(null),{tracker:n,index:i}=(0,r1.L0)(t),s=a.useMemo(()=>({trackerRef:n,layoutIndex:i}),[i,n]);return(0,r.jsx)(r1.MQ.Provider,{value:s,children:e})}let r3=a.createContext({isFocused:!1});function r6({children:e,defaultActiveIndex:t=0,itemsPerRow:n}){let i=(0,a.useRef)(null),[s,o]=a.useState(!1);a.useEffect(()=>{let e=()=>i.current?.blur();return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),a.useEffect(()=>{let e=i.current;if(!e)return;let t=()=>o(!0),n=()=>o(!1);return e.addEventListener("focus",t),e.addEventListener("blur",n),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",n)}},[]);let l=(0,a.useMemo)(()=>({isFocused:s,itemsPerRow:n}),[s,n]);return(0,r.jsx)(r0._,{fillWidth:!0,children:(0,r.jsx)("div",{className:"keyboard_navigation_on_focus--parent--t9OrH",tabIndex:0,ref:i,children:(0,r.jsx)(r4,{children:(0,r.jsx)(r5.A.Provider,{value:t,children:(0,r.jsx)(r3.Provider,{value:l,children:e})})})})})}function r7({children:e,primaryAction:t,className:n,htmlAttributes:i,...s}){let o=(0,a.useRef)(null),{isFocused:l,itemsPerRow:d}=a.useContext(r3),{active:c,target:u}=(0,r$.H)({ref:o,itemsPerRow:d}),m=a.useCallback(()=>{l&&t()},[l,t]),p=(0,a.useMemo)(()=>({shortcuts:[{key:z.Uz.ENTER}],onAction:m,allowDefault:!0}),[m]);return(0,r2.k)({primaryAction:p,active:c,actionLabel:!1,target:u}),(0,r.jsx)(rQ.D8,{forwardedRef:o,className:i9()(n,{"keyboard_navigation_on_focus--active--H4atK":c}),...i,...s,children:e})}var r9=n(350433),r8=n(591446),ae=n(462285);let at=[(0,U.t)("whiteboard.colors.black"),(0,U.t)("whiteboard.colors.red"),(0,U.t)("whiteboard.colors.blue"),(0,U.t)("whiteboard.colors.green"),(0,U.t)("whiteboard.colors.yellow")],an=[ae.jR,ae.N0,ae.k0,ae.RO,ae.Sb].map(e=>({string:e,color:r9.F.parse(e)}));function ai({theme:e,onChangeColor:t,activeColorIdx:n,activeColorOutline:i,idx:s,colorSwatch:o}){let l=a.useCallback(()=>{t(o.color),ia.Y5.triggerAction("commit")},[o.color,t]),d=n===s,c=at[s];return(0,r.jsx)(r7,{primaryAction:l,children:(0,r.jsx)(r8.pt,{ariaLabel:c,ariaSelected:d,background:"dark"===e?"dark":"light",onClick:l,paletteType:"base",role:"radio",size:"medium",swatchStyle:{...d&&{outline:i,outlineOffset:"2px"},boxSizing:"border-box",boxShadow:"none"},value:o.color},o.string)})}function ar(e){let t=-1===e.activeColorIdx,n=(0,U.t)("whiteboard.colors.custom");return(0,r.jsx)(r7,{primaryAction:e.onClick,children:(0,r.jsx)("div",{className:K.s.radiusFull.$,children:t?(0,r.jsx)(r8.pt,{ariaLabel:n,ariaSelected:!0,background:"dark"===e.theme?"dark":"light",onClick:e.onClick,paletteType:"base",role:"radio",selectionState:"selected_custom",size:"medium",swatchStyle:{boxSizing:"border-box",boxShadow:"none"},value:e.value}):(0,r.jsx)(r8.ck,{size:"medium",onClick:e.onClick,role:"radio",ariaLabel:n,ariaSelected:!1,swatchStyle:{boxSizing:"border-box",boxShadow:"none"}})})})}function aa({theme:e,onChangeColor:t,setShowCustomColorPicker:n,value:i}){let s=a.useCallback(()=>{n(!0)},[n]),o=(0,i6.zN)(i,rn.DA),{activeColorIdx:l,activeColorOutline:d}=a.useMemo(()=>({activeColorIdx:an.findIndex(e=>(0,rn.DA)(e.color,o)),activeColorOutline:`2px solid ${r9.F.format(o)}`,value:o}),[o]),c=Math.max(l,0);return(0,r.jsx)(r6,{defaultActiveIndex:c,children:(0,r.jsx)("div",{className:K.s.flex.flexGrow1.justifyBetween.$,style:{boxSizing:"content-box"},role:"radiogroup","aria-label":(0,U.t)("first_draft.theme_panel.color"),children:(0,r.jsxs)(r.Fragment,{children:[an.map((n,i)=>(0,r.jsx)(ai,{theme:e,onChangeColor:t,activeColorIdx:l,activeColorOutline:d,idx:i,colorSwatch:n},n.string)),(0,r.jsx)(ar,{activeColorIdx:l,value:o,theme:e,onClick:s})]})})})}var as=n(539491),ao=(e=>(e.COLOR="color",e.RADIUS="radius",e.SPACING="spacing",e.FONT="font",e))(ao||{}),al=(e=>(e.TITLE="title",e.BODY="body",e.LABLE="label",e))(al||{});let ad="theme_editor--svgText--WSkNz",ac=a.createContext({activeTab:ao.COLOR,onTabChange:()=>{},recordingKey:void 0});function au({label:e,children:t,tab:n}){let{onTabChange:i,activeTab:s,recordingKey:o}=a.useContext(ac),l=s===n,d=a.useCallback(()=>{i(n)},[i,n]);return(0,r.jsx)(r7,{"aria-label":e,primaryAction:d,className:i9()("theme_editor--iconButton--YMt-w theme_editor--baseIconButton--76pMJ",l&&"theme_editor--iconActive--CxTzT"),onClick:d,recordingKey:rr.Pt(o,n),htmlAttributes:a.useMemo(()=>({role:"tab","aria-selected":l,tabIndex:0,"data-tooltip":e,"data-tooltip-type":eO.Ib.TEXT,"data-tooltip-show-above":!0,"data-clickable":!0}),[e,l]),children:t})}var am=n(999457),ap=n(563188),ah=n(964731),af=n(592545),ag=n(789631),ax=n(43575),a_=n(257176);function ay(e,t){return t===am.NV.HSL?(0,i3.oB)(e):(0,i3.qN)(e)}function ab({brandColor:e,absoluteContainerId:t,onChangeColor:n,onHide:i}){let o=(0,s.wA)(),l=(0,ah.Um)(),d=a.useRef(document.getElementById(t||"fullscreen-root"));(0,D.kz)(z.Uz.ESCAPE,i),(0,D.kz)(z.Uz.BACKSPACE,i,document.activeElement?.tagName.toLowerCase()!=="input");let[c,u]=a.useState(am.NV.HEX),[m,p]=a.useState(ay(e,c)),[h,f]=a.useState({left:0,top:0}),g=a.useRef(void 0),x=()=>{let e=g.current?.getBoundingClientRect();e&&f({left:e.left,top:e.bottom-120})},_=a.useCallback(e=>{e&&(g.current=e,x())},[]);(0,ap.wY)(g,()=>x()),(0,ap.wY)(d,()=>x());let y=(0,re.A)(async(e,t)=>{await n(e),t&&ia.Y5.triggerAction("commit")},100),b=a.useCallback((e,t)=>{p(e),y((0,i3.w_)(e),t)},[y]),C=a.useCallback(e=>{e.a=1,y(e,!0),p((0,af.QS)(m,ay(e,c),e))},[m,c,y]),E={color:e,value:m,changeCallback:b,hideOpacity:!0,colorFormat:c,dispatch:o,currentTool:v.NLJ.CODE_BLOCK,dropdownShown:l,onColorChange:C,canAcceptStyles:!1,canAcceptVariables:!1};return(0,r.jsxs)("div",{className:K.s.flex.pr16.pl16.pt8.pb4.flexRow.justifyCenter.itemsEnd.flexGrow1.gap16.$,children:[(0,r.jsxs)("div",{className:K.s.flex.flexRow.justifyCenter.itemsCenter.flexGrow1.gap8.$,children:[(0,r.jsx)(rq.K,{"aria-label":(0,U.t)("first_draft.theme_tool.close_panel"),onClick:()=>i(),recordingKey:"closeSectionEditor",children:(0,r.jsx)(rJ.C,{})}),(0,r.jsxs)("div",{className:K.s.flex.flexColumn.justifyBetween.wFull.itemsEnd.gap4.$,children:[(0,r.jsx)("div",{className:K.s.flex.justifyBetween.itemsCenter.wFull.$,children:(0,r.jsx)(ax.e,{width:168,color:m,changeCallback:b})}),(0,r.jsxs)("div",{className:K.s.flex.justifyBetween.itemsCenter.wFull.gap8.$,style:{maxWidth:210},children:[(0,r.jsx)(ag.p,{selectClassName:i9()(K.s.flexShrink1.flexGrow0.flex.$,"theme_editor--colorSelect--SZSdx","theme_editor--precedence--6qmHD"),colorFormat:c,onColorFormatChange:e=>{u(e),"l"in m&&e!==am.NV.HSL?p((0,i3.qN)((0,i3.w_)(m))):e!==am.NV.HSL||"l"in m||p((0,i3.oB)((0,i3.w_)(m)))},dispatch:o,dropdownShown:l}),c===am.NV.HEX&&(0,r.jsx)(af.dt,{...E}),c===am.NV.RGB&&(0,r.jsx)(af.VA,{...E}),c===am.NV.CSS&&(0,r.jsx)(af.he,{...E}),(c===am.NV.HSL||c===am.NV.HSB)&&(0,r.jsx)(af.fC,{...E})]})]})]}),(0,r.jsx)("div",{className:K.s.flex.justifyCenter.itemsCenter.relative.mr8.$,ref:_,children:(0,r.jsx)("div",{style:{width:115},children:(0,r.jsxs)("div",{style:{position:"fixed",width:115,height:115,...h},children:[(0,r.jsx)("div",{className:i9()("theme_editor--pickerUnderlay--2GCUD",K.s.colorBg.elevation200.absolute.p2.$),style:{width:115,height:115,borderRadius:14}}),(0,r.jsx)("div",{className:i9()("theme_editor--pickerOverlay--Fxb-u",K.s.flex.colorBg.absolute.p2.overflowHidden.justifyCenter.alignCenter.$),style:{width:115,height:115,borderRadius:14},children:(0,r.jsx)(a_.T,{containerClass:"theme_editor--pickerWrapper--UNnnY",size:115,color:m,changeCallback:b,canvasWrapperStyles:{outlineWidth:0,borderRadius:"13px"},ghostStyles:{boxShadow:"none"}})})]})})})]})}var av=n(772129);function aC(e){let t=(0,rZ.DP)(),n=e.brandColor,i=as.ER.get(Math.round(2*e.cornerRadiusStop)/2),s=as.NT.get(Math.round(2*e.spacingStop)/2),o=a.useMemo(()=>({activeTab:e.activeTab,onTabChange:e.onTabChange,recordingKey:e.recordingKey}),[e.activeTab,e.onTabChange,e.recordingKey]);return(0,r.jsx)(ac.Provider,{value:o,children:(0,r.jsx)(r6,{defaultActiveIndex:function(e){switch(e){case ao.COLOR:return 0;case ao.RADIUS:return 1;case ao.SPACING:return 2;case ao.FONT:return 3}}(e.activeTab),children:(0,r.jsx)("div",{role:"tablist",className:K.s.wFull.$,children:(0,r.jsxs)(ea.B,{fullWidth:!0,justify:"space-between",children:[(0,r.jsx)(au,{tab:ao.COLOR,label:(0,U.t)("first_draft.theme_panel.color"),children:(0,r.jsx)(r8.pt,{size:"medium",value:n,paletteType:"base",background:"dark"===t?"dark":"light",swatchStyle:{boxSizing:"border-box",boxShadow:"none"}})}),(0,r.jsx)(au,{tab:ao.RADIUS,label:(0,U.t)("first_draft.theme_panel.radius"),children:(0,r.jsx)(eb.B,{svg:i,className:"theme_editor--svgIcon--6HQ9H"})}),(0,r.jsx)(au,{tab:ao.SPACING,label:(0,U.t)("first_draft.theme_panel.spacing"),children:(0,r.jsx)(eb.B,{svg:s,className:ad})}),(0,r.jsx)(au,{tab:ao.FONT,label:(0,U.t)("first_draft.theme_panel.font"),children:(0,r.jsx)(eb.B,{svg:av.A,className:ad})})]})})})})}let aE={[ao.COLOR]:function(e){let t=(0,rZ.DP)(),[n,i]=a.useState(!1),{focusParent:s}=e,o=a.useCallback(()=>{i(!1),s?.()},[s]);return n?(0,r.jsx)(ab,{onHide:o,...e}):(0,r.jsxs)("div",{className:K.s.flex.flexRow.flexGrow1.p16.pt12.pb12.gap16.itemsCenter.$,children:[(0,r.jsx)(aI,{recordingKey:e.recordingKey}),(0,r.jsx)("div",{className:K.s.flex0.flexShrink0.$,children:(0,r.jsxs)(rz.bL,{onChange:e.onChangeColorMode,value:e.colorMode,recordingKey:rr.Pt(e,"colorModePicker"),legend:(0,r.jsx)(rG.q,{children:(0,U.tx)("first_draft.theme_tool.color.mode_picker")}),children:[(0,r.jsx)(rz.c$,{value:"light","aria-label":(0,U.t)("first_draft.theme_tool.color.light_mode"),icon:(0,r.jsx)("div",{className:K.s.flex.w44.itemsCenter.justifyCenter.$,children:(0,r.jsx)(rX.K,{})})}),(0,r.jsx)(rz.c$,{value:"dark","aria-label":(0,U.t)("first_draft.theme_tool.color.dark_mode"),icon:(0,r.jsx)("div",{className:K.s.flex.w44.itemsCenter.justifyCenter.$,children:(0,r.jsx)(rY.D,{})})})]})}),(0,r.jsx)(aa,{value:e.brandColor,onChangeColor:e.onChangeColor,theme:t,setShowCustomColorPicker:i})]})},[ao.RADIUS]:function(e){let[t,n]=a.useState(e.cornerRadiusStop);return(0,r.jsxs)("div",{className:K.s.flex.flexRow.flexGrow1.itemsCenter.p16.gap16.$,children:[(0,r.jsx)(aI,{recordingKey:e.recordingKey}),(0,r.jsx)(rK.J,{className:K.s.opacity0_5.$,children:(0,U.tx)("first_draft.theme_panel.radius")}),(0,r.jsx)(rW.A,{"aria-label":(0,U.t)("first_draft.theme_panel.radius"),bigStep:.2,defaultValue:t,max:as.Ne,min:as.Xy,onChange:e.onChangeCornerRadiusStop,rangeAnchor:as.Xy,recordingKey:rr.Pt(e,"cornerRadiusSlider"),step:.1,value:e.cornerRadiusStop})]})},[ao.SPACING]:function(e){let[t,n]=a.useState(e.spacingStop);return(0,r.jsxs)("div",{className:K.s.flex.flexRow.flexGrow1.itemsCenter.p16.gap16.$,children:[(0,r.jsx)(aI,{recordingKey:e.recordingKey}),(0,r.jsx)(rK.J,{className:K.s.opacity0_5.$,children:(0,U.tx)("first_draft.theme_panel.spacing")}),(0,r.jsx)(rW.A,{"aria-label":(0,U.t)("first_draft.theme_panel.spacing"),bigStep:.2,defaultValue:t,max:as.Ne,min:as.Xy,onChange:e.onChangeSpacingStop,rangeAnchor:as.Xy,recordingKey:rr.Pt(e,"spacingSizeSlider"),step:as.jF,value:e.spacingStop})]})},[ao.FONT]:function(e){let[t,n,i]=i4.t.useTabs({[al.TITLE]:null!==e.titleFont,[al.BODY]:null!==e.bodyFont,[al.LABLE]:null!==e.labelFont},{recordingKey:rr.Pt(e,"fontEditor")});return(0,r.jsxs)("div",{className:K.s.flex.flex1.flexColumn.$,children:[(0,r.jsxs)("div",{className:K.s.flex.flex1.flexRow.gap8.p8.$,children:[(0,r.jsx)(aI,{recordingKey:e.recordingKey}),(0,r.jsxs)(i4.t.TabStrip,{manager:i,children:[(0,r.jsx)(i4.t.Tab,{...t.title,children:(0,U.tx)("first_draft.theme_panel.label.fontTitle")}),(0,r.jsx)(i4.t.Tab,{...t.body,children:(0,U.tx)("first_draft.theme_panel.label.fontBody")}),(0,r.jsx)(i4.t.Tab,{...t.label,children:(0,U.tx)("first_draft.theme_panel.label.fontLabel")})]})]}),(0,r.jsx)("div",{className:K.s.wFull.colorBgTertiary.h1.$}),(0,r.jsxs)("div",{className:K.s.flex.flex1.flexColumn.gap8.p8.$,children:[(0,r.jsx)(i4.t.TabPanel,{...n.title,children:(0,r.jsx)(aT,{...e})}),(0,r.jsx)(i4.t.TabPanel,{...n.body,children:(0,r.jsx)(aj,{...e})}),(0,r.jsx)(i4.t.TabPanel,{...n.label,children:(0,r.jsx)(aS,{...e})})]})]})}};function aw(e){let t=a.useRef(null),n=a.useCallback(()=>{t.current?.focus()},[]);if(a.useLayoutEffect(n,[n]),!e.section)return null;let i=aE[e.section];return(0,r.jsx)("div",{ref:t,tabIndex:-1,className:i9()("theme_editor--boxInherit--EM7bT",K.s.flex.relative.wFull.$),children:(0,r.jsx)(i,{focusParent:n,...e})})}function ak({selectedKey:e,items:t,recordingKey:n}){let i=t.findIndex(({key:t})=>t===e);return(0,r.jsx)(r6,{defaultActiveIndex:i>-1?i:0,itemsPerRow:5,children:(0,r.jsx)("div",{className:K.s.flex.flex1.flexWrap.itemsCenter.rowGap8.justifyBetween.$,children:t.map(({key:t,name:i,svg:a,onClick:s})=>(0,r.jsx)(r7,{"aria-label":i,recordingKey:rr.Pt(n,t),className:i9()("theme_editor--fontIconButton--tLtGj theme_editor--iconButton--YMt-w theme_editor--baseIconButton--76pMJ",ad,e===t&&"theme_editor--selected---xxyP"),primaryAction:s,onClick:s,htmlAttributes:{"data-tooltip":i,"data-tooltip-show-above":!0,"data-tooltip-type":eO.Ib.TEXT},children:(0,r.jsx)(eb.B,{svg:a})},t))})})}function aT(e){let t=`FontTitle_${e.titleFont}`,n=Array.from(as.X4).map(([t,n])=>({key:`FontTitle_${t}`,name:t,svg:n,onClick:()=>e.onChangeTitleFont(t)}));return null===e.titleFont?null:(0,r.jsx)(ak,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function aj(e){let t=`FontBody_${e.bodyFont}`,n=Array.from(as.K4).map(([t,n])=>({key:`FontBody_${t}`,name:t,svg:n,onClick:()=>e.onChangeBodyFont(t)}));return null===e.bodyFont?null:(0,r.jsx)(ak,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function aS(e){let t=`FontLabel_${e.labelFont}`,n=Array.from(as.pz).map(([t,n])=>({key:`FontLabel_${t}`,name:t,svg:n,onClick:()=>e.onChangeLabelFont(t)}));return null===e.labelFont?null:(0,r.jsx)(ak,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function aI({recordingKey:e}){let{pop:t}=(0,M.cq)();return(0,D.kz)(z.Uz.ESCAPE,t),(0,D.kz)(z.Uz.BACKSPACE,t),(0,r.jsx)("div",{className:K.s.h24.$,children:(0,r.jsx)(rq.K,{recordingKey:rr.Pt(e,"backButton"),onClick:t,"aria-label":(0,U.t)("qa.go_back"),children:(0,r.jsx)(rJ.C,{})})})}var aA=n(616431);function aN(e){let{close:t}=(0,M.cq)();(0,eS.f4)(n=>{if(e)for(let e of Object.keys(n.mirror.sceneGraphSelection)){let n=(0,e$.UN)().get(e);if(n&&!n.isOrInFirstDraft){t();return}}})}var aM=(e=>(e[e.READY_FOR_PROMPT=0]="READY_FOR_PROMPT",e[e.RUNNING=1]="RUNNING",e[e.FINISHED=2]="FINISHED",e[e.ERROR=3]="ERROR",e[e.ICANTDOTHIS=4]="ICANTDOTHIS",e))(aM||{}),aR=(e=>(e.PROMPT="prompt",e.THEME="theme",e))(aR||{});function aP(e,t){switch(t.type){case"NEW_ROOT_NODE":case"EDIT_INFO_UPDATED":return t.payload;case"SET_BRAND_COLOR":return{...e,brandColor:t.payload};case"SET_RADIUS":return{...e,radius:t.payload};case"SET_SPACING":return{...e,spacing:t.payload};case"SET_COLOR_MODE":return{...e,colorMode:t.payload};case"SET_TITLE_FONTS":return{...e,titleFonts:t.payload};case"SET_BODY_FONTS":return{...e,bodyFonts:t.payload};case"SET_LABEL_FONTS":return{...e,labelFonts:t.payload}}}let aO={brandColor:rn.UE,colorMode:rf.lH.LIGHT,spacing:1,radius:1,titleFonts:[],bodyFonts:[],labelFonts:[]};function aD(e,{pinnedRanges:t}={}){let n=(0,e$.UN)().get(e);if(!n)return aO;let i=(0,rx.BY)(n),r=(0,rx.uP)(n,{pinnedRanges:t}),a=(0,rx.Mz)(n,i),s=(0,rg.X6)(n)??rn.UE;return{brandColor:(0,rn.tK)((0,rp.tb)(s,r.colors))??rn.UE,colorMode:(0,rh.P)(n)??rf.lH.LIGHT,spacing:(0,rm.YB)(r.spacingRangesForGuids),radius:(0,rm.nd)(r.radiusValues),titleFonts:a.title,bodyFonts:a.body,labelFonts:a.label}}function aL({initialRootGuid:e}){let t=(0,ei._M)({action:$.JT.FIRST_DRAFT_MAKE_CHANGES,clientLifecycleId:void 0}),n=t.clientLifecycleId,i=(0,X.tS)(),s=a.useCallback(()=>{(0,rt.sx)("First Draft: Error",{file_key:i,clientLifecycleId:n,view:"firstDraftMakeChanges"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[i,n]);return(0,r.jsx)(g.tH,{boundaryKey:"FirstDraftMakeChanges",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:l.e.AI_GENERATION},onError:s,children:(0,r.jsx)(aF,{recordingKey:"firstDraftMakeChangesView",initialRootGuid:e,aiTrackingContext:t})})}function aF(e){let t=e.aiTrackingContext,n=t.clientLifecycleId,[i,o]=a.useState(""),d=(0,X.tS)(),c=(0,eS.eY)(),{allUsableKitEntries:u}=(0,rL.sI)(),p=rS()||e.initialRootGuid,h=(0,eS.KH)(),f=(0,a.useMemo)(()=>p?c.get(p):null,[c,p]),{applyMakeChanges:g,resetMakeChanges:x,instrumentationRef:_}=function({clientLifecycleId:e}){let[t]=(0,a.useState)({current:(0,H.g)()}),{insertJSX:n,resetAsync:i,instrumentationRef:r}=(0,rT.Vh)({clientLifecycleId:e,insertType:"makeChanges"});return{applyMakeChanges:(0,a.useCallback)(async(a,s)=>{let o=[];for(let e of("affectedId"in a&&o.push(a.affectedId),"destinationId"in a&&o.push(a.destinationId),o)){if(!function e(t,n,i){let r=t.get(n);return!!r&&(r.guid===i||!!r.parentGuid&&e(t,r.parentGuid,i))}((0,e$.UN)(),e,s.rootNodeId)){(0,e_.$D)(l.e.AI_GENERATION,Error("first-draft: Node does not have root node as ancestor"),{extra:{nodeId:e,action:a,...s}});return}if(e===s.rootNodeId){(0,e_.$D)(l.e.AI_GENERATION,Error("first-draft: Tried to mutate root node"),{extra:{nodeId:e,action:a,...s}});return}}switch(await i(),a.type){case"theme":{let{content:e}=a;e&&function(e,t,n){let i=(0,e$.UN)().get(e);if(!i)return;let r=(0,rx.BY)(i);if(["borderRadii","spacing","colors","fontFamilies"].some(e=>e in n)){let e=(0,rx.k5)(t,n);(0,rx.jR)(i,e,r)}let a=t.darkMode?rf.lH.DARK:rf.lH.LIGHT,s=t.brandColor??function(e){let t=(0,rx.uP)(e,{ignoreOpacity:!0}),n=(0,rg.X6)(e)??rn.UE;return(0,rp.tb)(n,t.colors)}(i),o="darkMode"in n?n.darkMode?rf.lH.DARK:rf.lH.LIGHT:void 0;if(o&&a!==o&&iC.l7.ai("first-draft-make-changes-theme-switch-mode",()=>{(0,rh.t)(i,o,s)}),"brandColor"in n&&n.brandColor){let e=(0,rn.tK)(n.brandColor);if(e){let t=(0,rg.qO)(e,o??a);iC.l7.ai("first-draft-make-changes-theme-brand-color",()=>{(0,rp.l9)(i,t,o??a??rf.lH.LIGHT,{},s)})}}}(s.rootNodeId,s.currentTheme,e);break}case"text_or_image":await rv({changes:a,makeChangesSessionId:t.current,clientLifecycleId:e,containingNodeId:s.rootNodeId,instrumentationRef:r});break;case"insert":case"replace":await rk({action:a,options:s,insertJSX:n}),await i();break;case"remove":iC.l7.ai("first-draft-make-changes-remove",()=>{let e=(0,e$.UN)().get(a.affectedId);e&&e.removeSelfAndChildren()});break;case"move":{let{affectedId:e,destinationId:t,insertBehavior:n}=a;iC.l7.ai("first-draft-make-changes-move",()=>{let i=(0,e$.UN)(),r=i.get(e),a=i.get(t),s=a?.parentNode,o=s?.childrenGuids.indexOf(t)??-1;r&&s&&("above"===n?s.insertChild(r,o):"below"===n&&(o<s.childCount-1?s.insertChild(r,o+1):s.appendChild(r)))});break}case"replaceClasses":{let{affectedId:e,classes:t}=a,n=(0,e$.UN)().get(e),i=n?.isIconLike&&(0,rf.Dk)(n)===rf.lg.CONTENT?"Icon":void 0;iC.l7.ai("first-draft-make-changes-replace-classes",()=>{for(let n of t)(0,ry.w)(e,n,i)})}}},[e,t,n,r,i]),resetMakeChanges:(0,a.useCallback)(()=>{t.current=(0,H.g)()},[t]),instrumentationRef:r}}({clientLifecycleId:n}),[y,b]=a.useState(0),[v,C]=a.useState(Error((0,U.t)("first_draft.something_went_wrong"))),[E,w]=a.useState(null),[k,T,j]=i4.t.useTabs({prompt:!0,theme:!0},{defaultActive:"theme",recordingKey:rr.Pt(e,"tabs")}),[S,I]=a.useState(!1);aN(2===y||3===y||4===y);let A=a.useRef(1),N=a.useRef(null);(0,a.useEffect)(()=>{N.current=i},[i]);let[M,R]=a.useState(Date.now()),P=(0,s.wA)(),O=a.useRef(S);(0,a.useEffect)(()=>{S!==O.current&&f&&(S?(0,rD.Vm)(f.guid,(0,r.jsx)(rR,{})):(0,rD.ks)(f.guid),O.current=S)},[S,f]);let D=a.useCallback(()=>{A.current+=1,_.current.trackFinished("stopped"),aV(t,"stopped"),b(0),I(!1)},[b,t,A,_]),L=a.useCallback(async()=>{x();let e=A.current,i={file_key:d,clientLifecycleId:n,generation_id:f?.firstDraftData?.generationId};try{if(_.current.start(),b(1),w(null),R(Date.now()),!f)throw Error("Root node not found");let r=f&&f.getSharedPluginData(rj.SV,"userPrompt")||"",a=aU(f),s="LOCAL"===a.type,o=s?m.XJn.getKitKey(a.pageId):a.key,l=u.find(e=>"key"in e.dsKitKey&&e.dsKitKey.key===o);Object.assign(i,{dsKitType:a.type,isLocal:s,kitKey:o,kitIdentifier:l?.metadata?.identifier??null}),(0,rt.sx)("First Draft: Make Changes Started",{...i,hasNonRootNodeSelected:!(f.guid in h)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),(0,ei.Dl)(t);let{jsxStr:d}=rs({[f.guid]:!0},!1),{jsxStr:c}=rs({[f.guid]:!0},!0);if(!d||!c){(0,rt.sx)("First Draft: Make Changes Ended",{...i,timeElapsedMs:Date.now()-M,status:"failed",reason:"infer-jsx-failed",hasNonRootNodeSelected:!(f.guid in h)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),aV(t,"error"),b(2);return}let p=N.current||"",x=function(e){if(!(0,ef.kc)().first_draft_prompt_history||!(0,ef.kc)().first_draft_make_changes_history)return[];let t=(0,rl.Q_)();if(!t)return[];let n=`${rd}${e}`,i=t.getItem(n);if(!i)return[];try{return e5.z.array(ro.Db).parse(JSON.parse(i))}catch{}return[]}(f.guid),y=function(e){let t=(0,rx.uP)(e,{ignoreOpacity:!0}),n=(0,rg.X6)(e)??rn.UE,i=(0,rp.tb)(n,t.colors),r=(0,rh.P)(e)??rf.lH.LIGHT;return{...(0,rx.rO)(e,t),version:2,brandColor:i,darkMode:"dark"===r}}(f),v=await e1.Ay.design.firstDraftMakeChanges({userPrompt:p,promptHistory:x,storedInitialPrompt:r,kitKey:o??"",isLocal:s,currentTheme:y,jsx:d,jsxInsertReplace:c},(0,rI.sF)({clientLifecycleId:n}));x.push({prompt:p}),function(e,t){let n=(0,rl.Q_)();if(!n)return;let i=`${rd}${e}`;n.setItem(i,JSON.stringify(t))}(f.guid,x);let C=v.getReader(),E=[];for(;;){let{done:n,value:s}=await C.read();if(e!==A.current){C.cancel();break}if(_.current.trackFirstByteReceived(),n&&_.current.trackLastStreamByteReceived(),(0,e0.Lo)("makeChanges","Response message",{message:s}),s?.trace&&w(s.trace),s?.action){if("replaceClasses"===s.action.type&&!(0,ef.kc)().first_draft_surgical_edits){(0,e0.xi)("makeChanges","Unsupported action",{action:s.action.type}),(0,ri.Rh)("first_draft.client.make_changes.unsupported_action",{action:s.action.type}),E.push(Promise.reject(new i2.G1("make_changes_unsupported",{})));continue}if((0,rt.sx)("First Draft: Make Changes Prompt Action",{...i,action:s.action.type},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),"iCantDoThis"===s.action.type){let e=s.action.rationaleCategory;E.push(Promise.reject(new i2.G1("make_changes_unsupported",{rationaleCategory:e})))}else E.push(g(s.action,{dsKitKey:a,rootNodeId:f.guid,currentTheme:y,imageArgs:{initialUserPrompt:r}}))}if(n){let e=await Promise.allSettled(E);if(!E.length)throw(0,e0.xi)("makeChanges","No actions were applied from the prompt response"),(0,ri.Rh)("first_draft.client.make_changes.no_actions_applied"),new i2.G1("make_changes_unsupported",{});if(e.every(e=>"rejected"===e.status)){for(let t of e)if("rejected"===t.status)throw t.reason}(0,rt.sx)("First Draft: Make Changes Ended",{...i,status:"completed",timeElapsedMs:Date.now()-M,hasNonRootNodeSelected:!(f.guid in h)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),aV(t,"success"),_.current.trackFinished("success"),b(2),ia.Y5.triggerAction("commit");break}}}catch(a){(0,e0.xi)("makeChanges","Error",{error:a});let e=a instanceof i2.G1,n={...i,timeElapsedMs:Date.now()-M,error:a.toString(),status:"failed",reason:"error"},r=e?"handled_internally":(0,e_.$D)(l.e.AI_GENERATION,a,{extra:n});(0,rt.sx)("First Draft: Make Changes Ended",{...n,sentryEventId:r},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),aV(t,"error"),_.current.trackFinished("failure"),e&&("make_changes_unsupported"===a.type||"make_changes_moderated"===a.type)?((0,rt.sx)("First Draft: Make Changes Prompt Action",{...i,action:"make_changes_unsupported"===a.type?"iCantDoThis":"blocked"},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),b(4)):b(3),C(a instanceof Error?a:Error("Unknown error"))}finally{e===A.current&&(A.current+=1)}},[d,n,A,_,f,h,t,M,g,x,u]),B=()=>{b(0),(0,rP.k)()},V=E&&(0,ef.kc)().cortex_execution_tracing;switch(y){case 1:return(0,r.jsx)(iF.F,{onStop:D,aiTrackingContext:t,recordingKey:rr.Pt(e,"running"),children:(0,U.tx)("first_draft.making_changes")});case 3:return V&&(0,aA.A)(P,E),(0,r.jsx)(iD.Eb,{error:v,customMessage:(0,U.t)("first_draft.something_went_wrong"),recordingKey:rr.Pt(e,"error"),buttons:[{type:iD.ft.GO_BACK,callback:B}],aiTrackingContext:t});case 4:return V&&(0,aA.A)(P,E),(0,r.jsx)(iD.Eb,{error:v,customMessage:(e=>{let t=(0,U.t)("first_draft.make_changes.i_cant_do_this");if(e instanceof i2.G1){if("make_changes_moderated"===e.type)return(0,U.t)("ai.error.unsafe_or_harmful");if(!(0,ef.kc)().first_draft_make_changes_errors)return t;if("make_changes_unsupported"===e.type&&e.data?.rationaleCategory){let t=e.data.rationaleCategory;switch(t){case"component":return(0,U.t)("first_draft.make_changes.i_cant_do_this_component");case"font":return(0,U.t)("first_draft.make_changes.i_cant_do_this_font");case"layout":return(0,U.t)("first_draft.make_changes.i_cant_do_this_layout");case"other":break;default:return(0,F.xb)(t)}}}return t})(v),recordingKey:rr.Pt(e,"unsupported"),buttons:[{type:iD.ft.GO_BACK,callback:B}],aiTrackingContext:t});case 2:let z=[];return(0,rA.KK)()&&!(0,ef.kc)().first_draft_use_gemini&&(z.push({type:rO.is.UNDO_MAKE_CHANGES,callback:()=>{b(0),ia.Y5.triggerAction("undo"),(0,rt.sx)("First Draft: Make Changes Undo",{file_key:d,clientLifecycleId:n},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0}),(0,rP.k)()}}),z.push({type:rO.is.MAKE_CHANGES,callback:B})),V&&(0,aA.A)(P,E),(0,r.jsx)(rO.Oq,{recordingKey:rr.Pt(e,"iterate"),iterateOptions:z,aiTrackingContext:{...t,iteration_view_type:rN.$J.SUCCESS_WITH_ITERATION},stayOpen:!0});case 0:return(0,r.jsx)(aB,{promptValue:i,setPromptValue:o,rootNode:f,tabManager:j,tabPropsMap:k,tabPanelPropsMap:T,handleSubmit:L,recordingKey:e.recordingKey,aiTrackingContext:t});default:(0,F.xb)(y)}}function aB({promptValue:e,setPromptValue:t,rootNode:n,tabManager:i,tabPropsMap:s,tabPanelPropsMap:o,handleSubmit:l,recordingKey:d,aiTrackingContext:c}){let u=c.clientLifecycleId,[m,p]=a.useState(rV(1)[0].prompt),[h,f]=a.useState(rV(3)),[g,x]=a.useReducer(aP,aO),_=a.useCallback(e=>{b.current=Date.now(),x(e)},[x]),y=(0,i6.zN)(n,(e,t)=>e?.guid===t?.guid);(0,a.useEffect)(()=>{_({type:"NEW_ROOT_NODE",payload:aD(y?.guid??"")})},[y?.guid,_]);let b=a.useRef(-1/0),v=a.useRef((0,rm.$L)(y)),C=a.useRef((0,rx.nF)((0,rm.uq)(y))),E=a.useRef(g.radius),w=a.useRef(g.spacing);(0,a.useEffect)(()=>{v.current=(0,rm.$L)(y),C.current=(0,rx.nF)((0,rm.uq)(y));let e=aD(y?.guid??"");E.current=e.radius,w.current=e.spacing},[y]);let{close:k}=(0,M.cq)(),T=(0,X.tS)(),j=a.useMemo(()=>{let e,t;let n={file_key:T,clientLifecycleId:u,generation_id:y?.firstDraftData?.generationId};return y&&(t="LOCAL"===(e=aU(y)).type?e.pageId:e.key),Object.assign(n,{dsKitType:null!=e?e.type:null,kitKey:t}),n},[y,T,u]),S=g.colorMode,I=g.brandColor,A=g.radius,N=g.spacing,R=g.titleFonts,P=g.bodyFonts,O=g.labelFonts,D=(0,i8.ei)(y?.guid),L=(0,i6.k9)(()=>D,[D]);a.useEffect(()=>{let e=aD(y?.guid??"",{pinnedRanges:C.current});(0,i5.xN)((0,i3.oB)(I).h,(0,i3.oB)(e.brandColor).h,.01)&&(e.brandColor=I);let t=L?.lastEditedAt??-1/0;(t>b.current||b.current-t>1e3)&&_({type:"EDIT_INFO_UPDATED",payload:e})},[I,_,L,y?.guid,g.radius,g.spacing]);let F=(0,re.A)(e=>{(0,rt.sx)("First Draft: Make Changes Color Change",{...j,color:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},5e3),B=a.useCallback(e=>{e!==S&&(iC.l7.user("first-draft-switch-color-mode",()=>{(0,rh.t)(y,e,(0,rn.F_)(g.brandColor))}),F(S),ia.Y5.triggerAction("commit"),_({type:"SET_COLOR_MODE",payload:e}))},[S,F,_,y,g.brandColor]),V=a.useMemo(()=>(0,rp.N_)(y),[y]),H=a.useRef(null),G=a.useRef(null),W=a.useCallback((e,t)=>{if(G.current)H.current=[e,G.current];else{G.current=e;let n=(0,rn.F_)(t);iC.l7.user("first-draft-apply-brand-color",()=>{(0,rp.l9)(y,e,S,V,n)}),setTimeout(()=>{if(G.current=null,H.current){let[e,t]=H.current;H.current=null,W(e,t)}},30)}},[S,V,y]),q=a.useCallback(e=>{F((0,rn.F_)(e));let t={...(0,rg.qO)(e,S),a:1};W(t,I),_({type:"SET_BRAND_COLOR",payload:t})},[_,F,S,W,I]),Y=(0,re.A)(e=>{(0,rt.sx)("First Draft: Make Changes Radius Change",{...j,radius:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),J=(0,re.A)(e=>{Y(e),(0,rm.oP)(v.current,e,E.current)},100),Z=a.useCallback((e,t)=>{t.commit&&ia.Y5.triggerAction("commit"),e!==A&&(J(e),_({type:"SET_RADIUS",payload:e}))},[A,_,J]),Q=(0,re.A)(e=>{(0,rt.sx)("First Draft: Make Changes Spacing Change",{...j,spacing:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),ee=(0,re.A)(e=>{Q(e),(0,rm.HS)(C.current,e,w.current)},100),et=a.useCallback((e,t)=>{t.commit&&ia.Y5.triggerAction("commit"),e!==N&&(ee(e),_({type:"SET_SPACING",payload:e}))},[_,ee,N]),en=(0,re.A)((e,t)=>{(0,rt.sx)("First Draft: Make Changes Font Change",{...j,font_location:e,font_type:t},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),er=a.useCallback(e=>0===e.length?null:e[0].family,[]),es=a.useCallback(async e=>{await ru(r_.lu.TITLE,e,R),en("title",e),ia.Y5.triggerAction("commit"),y&&_({type:"SET_TITLE_FONTS",payload:(0,rx.Mz)(y,(0,rx.BY)(y)).title})},[R,en,y,_]),eo=a.useCallback(async e=>{await ru(r_.lu.BODY,e,g.bodyFonts),en("body",e),ia.Y5.triggerAction("commit"),y&&_({type:"SET_BODY_FONTS",payload:(0,rx.Mz)(y,(0,rx.BY)(y)).body})},[g.bodyFonts,en,y,_]),el=a.useCallback(async e=>{await ru(r_.lu.LABEL,e,g.labelFonts),en("label",e),ia.Y5.triggerAction("commit"),y&&_({type:"SET_LABEL_FONTS",payload:(0,rx.Mz)(y,(0,rx.BY)(y)).label})},[g.labelFonts,en,y,_]),ed=(0,a.useCallback)(e=>{(0,ei.SX)({...c,...(0,ei.Q0)(e),interaction:rN.NI.GENERATE}),l()},[c,l]),[ec,eu]=a.useState(ao.COLOR),em=(0,r.jsx)(tU.r,{shortcuts:[{key:z.Uz.ENTER,modifier:[z.xH.META]}],onAction:ed,disabled:!y||0===e.length,recordingKey:rr.Pt(d,"submit"),children:(0,U.tx)("first_draft.make_changes")}),ep=(0,r.jsx)(tU.r,{shortcuts:[{key:z.Uz.ENTER,modifier:[z.xH.META]}],onAction:k,recordingKey:rr.Pt(d,"doneTheming"),children:(0,U.tx)("first_draft.done_theming")});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ea.B,{fullWidth:!0,align:"center",justify:"space-between",gap:0,children:"theme"===i.activeTab&&(0,r.jsx)(aw,{bodyFont:er(P),brandColor:I,colorMode:S,cornerRadiusStop:A,labelFont:er(O),onChangeBodyFont:eo,onChangeColor:q,onChangeColorMode:B,onChangeCornerRadiusStop:Z,onChangeLabelFont:el,onChangeSpacingStop:et,onChangeTitleFont:es,recordingKey:rr.Pt(d,"themeEditorDrawer"),section:ec,spacingStop:N,titleFont:er(R)})}),(0,r.jsxs)("div",{className:i9()(K.s.p8.relative.$,"theme"===i.activeTab&&"first_draft_make_changes_view--contentBoxed--UQ-m7",ec&&K.s.elevation500.radiusLarge.$),"data-testid":"readyForPromptView",children:[(0,r.jsx)(i4.t.TabPanel,{...o.prompt,children:(0,r.jsx)(rM.XG,{action:$.JT.FIRST_DRAFT_MAKE_CHANGES,value:e,onChange:t,recordingKey:rr.Pt(d,"prompt"),suggestion:m,suggestionPills:(0,ef.kc)().first_draft_new_prompt_pills?h:void 0})}),(0,r.jsx)(i4.t.TabPanel,{...o.theme,children:(0,r.jsx)(aC,{activeTab:ec,onTabChange:eu,brandColor:I,cornerRadiusStop:A,spacingStop:N,titleFont:er(R),bodyFont:er(P),labelFont:er(O),recordingKey:rr.Pt(d,"themeEditor")})}),(0,r.jsxs)(ea.B,{fullWidth:!0,justify:"space-between",children:[(0,r.jsxs)(i4.t.TabStrip,{manager:i,children:[(0,r.jsx)(i4.t.Tab,{...s.theme,children:(0,U.tx)("first_draft.style")}),(0,r.jsx)(i4.t.Tab,{...s.prompt,children:(0,r.jsx)("span",{"data-testid":"promptTabLabel",children:(0,U.tx)("first_draft.prompt")})})]}),"prompt"===i.activeTab?em:ep]})]})]})}function aU(e){let t=e.firstDraftData;if(t){if(t.kit.type===v.AZ4.LOCAL)return{type:"LOCAL",pageId:m.XJn.getPageIdFromKitKey(t.kit.key)??""};if(t.kit.type===v.AZ4.LIBRARY)return{type:"1P_LIBRARY",key:t.kit.key}}return JSON.parse(e.getSharedPluginData(rj.SV,"dsKitKey"))}function aV(e,t){switch(t){case"success":(0,ei.as)({...e,status:rN.dM.COMPLETED,reason:rN.F9.SUCCESS});break;case"error":(0,ei.as)({...e,status:rN.dM.FAILED,reason:rN.F9.ERROR});break;case"stopped":(0,ei.as)({...e,status:rN.dM.FAILED,reason:rN.F9.STOPPED})}}var aH=n(522755),az=n.n(aH),aG=n(620281),aK=n(227517),aW=n(960058),aq=n(134409),aX=n(940349),aY=n(30662);function aJ({node:e,tree:t,parentComponent:n,descendantComponentGuids:i},r){if(!t[e.guid]){if(t[e.guid]={isBuildingBlock:r.isBuildingBlock,name:r.name,parentGuid:n?.guid??null,isListItem:r.isListItem,inferReason:r.inferReason,children:[]},n){let i=t[n.guid];i&&i.children.push(e.guid)}for(let r of i){let i=t[r];i&&(!i.parentGuid||i.parentGuid===n?.guid)&&(i.parentGuid=e.guid)}}}function aZ({node:e,tree:t,parentComponent:n,descendantComponentGuids:i}){t[e.guid]&&delete t[e.guid];let r=n?t[n.guid]:null;for(let a of(r&&(r.children=r.children.filter(t=>t!==e.guid)),i)){let i=t[a];i&&i.parentGuid===e.guid&&(i.parentGuid=n?.guid??null,r&&r.children.push(a))}}function aQ(e){let t=function(e,t){let n={};for(let i of e.childrenNodes)!function e(t,n,i,r,a=null){var s;let o=i.components[t.guid],l=(s=i.isMobileDesign,("FRAME"===t.type||"INSTANCE"===t.type)&&(!s||function(e,t,n=.1){return Math.abs(e-t)<n}(t.size.x,n.size.x-n.stackLeftPadding-n.stackLeftPadding))),d=[];if(o&&(r[t.guid]={isBuildingBlock:l,name:o,parentGuid:a?.guid??null,isListItem:!1,children:[]},a&&r[a.guid])){let e=r[a.guid];e&&e.children.push(t.guid)}for(let s of t.childrenNodes)d=d.concat(e(s,n,i,r,o?t:a));let c={node:t,designNode:n,tree:r,nodeCanBeBuildingBlock:l,descendantComponentGuids:d,parentComponent:a};(function(e){let{node:t,tree:n,nodeCanBeBuildingBlock:i,parentComponent:r}=e,a={};for(let e of t.childrenNodes){let t=n[e.guid];t&&(a[t.name]||(a[t.name]=[]),a[t.name].push(e.guid))}let s=Object.entries(a).filter(([e,t])=>t.length>1);if(1!==s.length)return;let o=s[0][1],l=o[0];for(let a of(n[t.guid]||r||!l||aJ(e,{name:`${n[l].name}List`,isBuildingBlock:i,isListItem:!1,inferReason:"list-view"}),o)){let e=n[a];e&&(e.isListItem=!0,e.isBuildingBlock=!1)}})(c),function(e){let{node:t,tree:n,nodeCanBeBuildingBlock:i,parentComponent:r,descendantComponentGuids:a}=e;!n[t.guid]&&!r&&i&&a.filter(e=>!n[e]?.isBuildingBlock&&!n[e]?.parentGuid).length>0&&aJ(e,{name:`Component:${t.guid}`,isBuildingBlock:!0,isListItem:!1,inferReason:"component-for-orphaned-atoms"})}(c),function(e){let{node:t,tree:n,designNode:i,descendantComponentGuids:r,nodeCanBeBuildingBlock:a}=e;!n[t.guid]&&0===r.length&&t.parentGuid===i.guid&&a&&aJ(e,{name:`Component:${t.guid}`,isBuildingBlock:!0,isListItem:!1,inferReason:"component-for-uncomponentized-element"})}(c),function(e){let{node:t,designNode:n,tree:i}=e,r=i[t.guid];if(r&&r.isBuildingBlock&&t.size.y>.66*n.size.y&&r.children.length>1&&r.children.every(e=>i[e]?.isBuildingBlock)){for(let e of r.children){let t=i[e];t&&(t.parentGuid=null)}aZ(e)}}(c),function({node:e,tree:t,parentComponent:n,nodeCanBeBuildingBlock:i,descendantComponentGuids:r,designNode:a}){let s=e.childrenNodes[0];if(i&&1===e.childCount&&s&&t[s.guid]?.isBuildingBlock){let i=t[s.guid];i&&!t[e.guid]&&(t[e.guid]={isBuildingBlock:!0,name:i.name,parentGuid:n?.guid??null,isListItem:!1,inferReason:"hoisted-singleton-building-block",children:i.children}),aZ({node:s,designNode:a,tree:t,parentComponent:e,descendantComponentGuids:r,nodeCanBeBuildingBlock:!0})}}(c);let u=function({node:e,designNode:t,tree:n,parentComponent:i,descendantComponentGuids:r}){if(e.size.x<100||e.size.y<20||r.length>0||"NONE"===e.stackMode||e.childCount<=1)return[];let a=e.childrenNodes[0],s=e.childrenNodes[e.childCount-1],o=[];for(let l of[a,s]){if(l?.type!=="FRAME"||l.size.x<100||l.size.y<20)continue;let a=m.XJn.findSimilarNodes(l.guid,e.guid,!1,!1,!0),s=[l,...a.map(e=>(0,e$.UN)().get(e)).filter(e=>!!e)],d=Array.from((0,aG._i)(new Set(e.childrenGuids),new Set([l.guid,...a])));if(s.length>=2&&s.length>=e.childCount-1&&d.length<=1){let a=d[0];if(a){let t=e.childrenGuids.indexOf(a);if(t>0&&t<e.childCount-1)return[]}for(let a of s)n[a.guid]||(aJ({node:a,designNode:t,tree:n,parentComponent:n[e.guid]?e:i,descendantComponentGuids:r,nodeCanBeBuildingBlock:!1},{isBuildingBlock:!1,name:`Component:${a.guid}`,isListItem:!0,inferReason:"similar-sublayers"}),o.push(a.guid))}}return o}(c);return r[t.guid]?[t.guid,...d,...u]:[...d,...u]}(i,e,t,n);return n}(e.frame,e);if(!t)return[];let{suggestedComponentTree:n,node:i}=function(e,t){let n=m.XJn.detachDesignForComponentize(e.guid,Object.keys(t)),i={};for(let[e,r]of Object.entries(t)){let t=n.get(e),a={...r,parentGuid:r.parentGuid?n.get(r.parentGuid)??r.parentGuid:null,children:r.children.map(e=>n.get(e)??e)};t?i[t]=a:i[e]=a}let r=n.get(e.guid);if(!r)throw Error("Failed to detach design");let a=(0,e$.UN)().get(r);if(!a)throw Error("Failed to detach design");return e.parentNode&&e.parentNode.appendChild(a),a.x=e.x,a.y=e.y,e.removeSelfAndChildren(),{suggestedComponentTree:i,node:a}}(e.frame,t);return Array.from(Object.entries(n)).filter(([e])=>e!==i.guid).map(([e,t])=>({guid:e,name:t.name,isBuildingBlock:t.isBuildingBlock}))}function a$(){let[e,t]=a.useState({loaded:0,total:0}),n=a.useContext(aX.x),i=n?.getSuggestedComponents;return{submit:a.useCallback(async(e,n,r,a)=>{let s=e.filter(e=>("FRAME"===e.type||"INSTANCE"===e.type)&&!e.isStateGroup),o=(0,aq.Y6)(),{nodes:l,nodeMappings:d}=iC.l7.user("clone-nodes",()=>(function(e,t){let n=[],i={x:(0,aq.NY)(t.copiedDesigns).right()+aq.CN,y:aq.CN},r=new Map;for(let a of e){let e=m.XJn.cloneNodeForComponentize(a.guid),s=e.get(a.guid);if(!s)continue;let o=(0,e$.UN)().get(s);o&&(t.copiedDesigns.appendChild(o),n.push(o),o.relativeTransform={...o.relativeTransform,m02:i.x,m12:i.y},i.x+=o.size.x+aq.FL,r=new Map([...r,...e]))}return(0,aq.Vl)(t),{nodes:n,nodeMappings:r}})(s,o));for(let e of(t({loaded:1,total:l.length}),az()(l,10))){let s=await (0,aW.Z)(i?i(e):a0(e,n),r);if(r.aborted)return{};for(let e of s)if(e){if(a?.remapNodeIdsForTest)for(let[t,n]of d.entries()){let i=e.components[t];i&&(e.components[n]=i,delete e.components[t])}iC.l7.user("componentize",()=>{!function(e,t){let n=(0,e$.UN)();if(!n.getCurrentPage())return;let i=(0,aq.NY)(t.buildingBlocks),r=(0,aq.NY)(t.atoms),a={x:i.right()+aq.CN,y:aq.CN},s={x:r.right()+aq.CN,y:aq.CN},o={};for(let{guid:i,name:r,isBuildingBlock:l}of e){let e=n.get(function(e,t){for(;t[e];)e=t[e];return e}(i,o));if(!e||"FRAME"!==e.type&&"INSTANCE"!==e.type||("FRAME"===e.type&&(0,aq.MR)(e,t.icons),!e.isAlive))continue;let d=m.XJn.findSimilarNodes(e.guid,t.buildingBlocks.guid,!1,!0,!0).concat(m.XJn.findSimilarNodes(e.guid,t.atoms.guid,!1,!0,!0)),c=d[0]?n.get(d[0]):null;if(!c){if("FRAME"===e.type)(c=n.createComponentFromNode(e.clone())).name=r;else{if(!(c=n.get(e.clone())))throw Error("Failed to clone instance");(0,aY.T)(c)}l?(t.buildingBlocks.appendChild(c),c.relativeTransform={...c.relativeTransform,m02:a.x,m12:a.y},a.y+=c.size.y+aq.FL):(t.atoms.appendChild(c),c.relativeTransform={...c.relativeTransform,m02:s.x,m12:s.y},s.y+=c.size.y+aq.FL)}let u=(0,aq.w8)(e,c);if(u)for(let[e,t]of u?.entries()){let i=n.get(t),r=i?.overrideKey;r&&(o[e]=r)}}(0,aq.Vl)(t)}(aQ(e),o)})}t(t=>({loaded:Math.min(t.loaded+e.length,t.total),total:t.total}))}return ia.Y5.commit(),{}},[i]),progress:e}}async function a0(e,t){let n=await Promise.all(e.map(async e=>{let t=await (0,rj.gC)(e);return{imageB64:t.base64,jsx:t.jsx}}));return(await e1.Ay.design.firstDraftComponentize({requests:n},(0,rI.sF)({clientLifecycleId:t}))).responses.map((t,n)=>{let i=e[n];return t&&i?{frame:i,isMobileDesign:t.isMobileDesign,components:t.components.reduce((e,t)=>(e[t.guid]=t.name,e),{})}:null})}var a1=n(263325),a2=n(452921),a5=(e=>(e[e.COMPONENTIZE=0]="COMPONENTIZE",e[e.ADD_PROPS=1]="ADD_PROPS",e[e.LINT=2]="LINT",e[e.ALL=3]="ALL",e))(a5||{}),a4=(e=>(e.INITIAL="initial",e.COMPONENTIZE="componentize",e.ADD_PROPS="add_props",e.LINT="lint",e.ALL="all",e))(a4||{});function a3(e){return e.filter(e=>"FRAME"===e.type).length}function a6(e){let[t,n]=a.useState("initial"),i=[{step:3,title:(0,U.t)("first_draft.make_kit.all_steps.title"),description:(0,U.t)("first_draft.make_kit.all_steps.description")},{step:0,title:(0,U.t)("first_draft.make_kit.componentize_step.title"),description:(0,U.t)("first_draft.make_kit.componentize_step.description")},{step:1,title:(0,U.t)("first_draft.make_kit.add_props_step.title"),description:(0,U.t)("first_draft.make_kit.add_props_step.description")},{step:2,title:(0,U.t)("first_draft.make_kit.lint_step.title"),description:(0,U.t)("first_draft.make_kit.lint_step.description")}],s=(0,a.useCallback)(e=>{switch(e){case 0:n("componentize");break;case 1:n("add_props");break;case 2:n("lint");break;case 3:n("all")}},[]),o=e=>(0,r.jsx)(a2.B.Item,{primaryAction:{onAction:()=>{s(e.step)}},children:(0,r.jsxs)("div",{className:K.s.flex.flexColumn.p4.wFull.$,children:[(0,r.jsx)("div",{className:K.s.font13.wFitContent.$,children:e.title}),(0,r.jsx)("div",{className:K.s.font11.colorTextSecondary.lh16.wFitContent.$,children:e.description})]})},e.step);switch(t){case"initial":return(0,r.jsxs)(es.n,{hideActionPanel:!0,children:[(0,r.jsx)(es.n.Header,{children:(0,r.jsxs)("div",{className:K.s.wFull.flex.flexColumn.p8.$,children:[(0,r.jsxs)("div",{className:K.s.wFull.flex.gap4.$,children:[(0,r.jsx)("div",{className:K.s.h24.$,children:(0,r.jsx)(rq.K,{recordingKey:rr.Pt(e.recordingKey,"backButton"),onClick:e.onBack,"aria-label":(0,U.t)("qa.go_back"),children:(0,r.jsx)(rJ.C,{})})}),(0,r.jsx)("div",{className:K.s.colorText.textBodyLarge.$,children:(0,U.tx)("fullscreen_actions.quick_actions.first-draft-make-kit")})]}),(0,r.jsx)("div",{className:K.s.wFull.flex.font11.$,children:(0,U.tx)("first_draft.make_kit.description")})]})}),(0,r.jsx)(es.n.Body,{children:(0,r.jsxs)(a2.B,{resultCount:i.length,maxVisibleResults:i.length,children:[o(i[0]),(0,r.jsx)(a2.B.Section,{header:"Individual steps",children:i.slice(1).map(o)})]})})]});case"componentize":return(0,r.jsx)(a9,{});case"add_props":return(0,r.jsx)(se,{});case"lint":return(0,r.jsx)(i1.zY,{});case"all":return(0,r.jsx)(st,{})}}let a7=async({params:{submit:e,selectedNodes:t},abortController:n,clientLifecycleId:i})=>{await e(t,i,n.signal)};function a9(e){let{close:t}=(0,M.cq)(),n=(0,ig.RL)($.JT.FIRST_DRAFT_COMPONENTIZE,a7),{start:i,stop:s,state:o,aiTrackingContext:l}=n,{submit:d,progress:c}=a$(),u=(0,a.useCallback)(async()=>{let e=(0,e$.UN)().getCurrentPage();if(!e)return;let t=e.directlySelectedNodes;0!==t.length&&await i({selectedNodes:t,submit:d})},[i,d]),p=a.useCallback(()=>{s(),t()},[t,s]),h=a.useCallback(()=>{m.glU.triggerActionInUserEditScope("undo",{}),t()},[t]),f=e.overrides?.state??o,g=e.overrides?.progress??c;switch(f){case ig.qy.INITIAL:return(0,r.jsx)(iQ.AE,{action:$.JT.FIRST_DRAFT_COMPONENTIZE,actionLabel:(0,U.tx)("first_draft.make_kit.componentize_step.title"),actionIcon:(0,r.jsx)(eq.P,{}),onPerform:e.overrides?.perform??u,instructionAction:{type:"learn_more",url:"https://figma.com"},aiTrackingContext:l,getCustomSelectedNodesAmount:a3,children:(0,U.tx)("first_draft.make_kit.componentize_step.instructions")});case ig.qy.RUNNING:return(0,r.jsx)(iF.F,{recordingKey:rr.Pt(e.recordingKey,"componentizeRunning"),aiTrackingContext:l,onStop:p,secondaryMessage:g.total?(0,U.t)("first_draft.make_kit.x_of_y_frames",{loaded:g.loaded,total:g.total}):void 0,children:(0,U.tx)("first_draft.make_kit.componentize_step.running")});case ig.qy.DONE:return(0,r.jsx)(rO.Oq,{iterateOptions:[{type:rO.is.UNDO,callback:h}],aiTrackingContext:{...l,iteration_view_type:rN.$J.DEFAULT_SUCCESS}});case ig.qy.CANCELLED:return null;case ig.qy.ERROR:return(0,r.jsx)(iD.Eb,{error:"error"in n?n.error:Error(),recordingKey:rr.Pt(e.recordingKey,"error"),buttons:[{type:iD.ft.OK,callback:t}],aiTrackingContext:l});default:(0,F.xb)(f)}}let a8=async({params:{submit:e,selectedNodes:t},abortController:n,clientLifecycleId:i})=>{await e(i,n.signal,t)};function se(e){let{close:t}=(0,M.cq)(),{submit:n,progress:i}=(0,a1.iK)(),s=(0,ig.RL)($.JT.FIRST_DRAFT_SUGGEST_PROPS,a8),{start:o,stop:l,state:d,aiTrackingContext:c}=s,u=(0,a.useCallback)(async()=>{let e=(0,e$.UN)().getCurrentPage();if(!e)return;let t=e.directlySelectedNodes;0!==t.length&&await o({selectedNodes:t,submit:n})},[o,n]),p=a.useCallback(()=>{l(),t()},[t,l]),h=a.useCallback(()=>{m.glU.triggerActionInUserEditScope("undo",{}),t()},[t]),f=e.overrides?.state??d,g=e.overrides?.progress??i;switch(f){case ig.qy.INITIAL:return(0,r.jsx)(iQ.AE,{action:$.JT.FIRST_DRAFT_SUGGEST_PROPS,actionLabel:(0,U.tx)("first_draft.make_kit.add_props_step.add_props_button"),actionIcon:(0,r.jsx)(eq.P,{}),onPerform:u,instructionAction:{type:"learn_more",url:"https://figma.com"},aiTrackingContext:c,children:(0,U.tx)("first_draft.make_kit.add_props_step.instructions")});case ig.qy.RUNNING:return(0,r.jsx)(iF.F,{recordingKey:rr.Pt(e.recordingKey,"suggestPropsRunning"),aiTrackingContext:c,onStop:p,secondaryMessage:g.total?(0,U.t)("first_draft.make_kit.x_of_y_components",{loaded:g.loaded,total:g.total}):void 0,children:(0,U.tx)("first_draft.make_kit.add_props_step.running")});case ig.qy.DONE:return(0,r.jsx)(rO.Oq,{iterateOptions:[{type:rO.is.UNDO,callback:h}],aiTrackingContext:{...c,iteration_view_type:rN.$J.DEFAULT_SUCCESS}});case ig.qy.CANCELLED:return null;case ig.qy.ERROR:return(0,r.jsx)(iD.Eb,{error:"error"in s?s.error:Error(),recordingKey:rr.Pt(e.recordingKey,"error"),buttons:[{type:iD.ft.OK,callback:t}],aiTrackingContext:c});default:(0,F.xb)(f)}}function st(e){let{submit:t,progress:n}=a$(),{start:i,state:s}=(0,ig.RL)($.JT.FIRST_DRAFT_COMPONENTIZE,a7),{submit:o,progress:l}=(0,a1.iK)(),{start:d,state:c}=(0,ig.RL)($.JT.FIRST_DRAFT_SUGGEST_PROPS,a8),u=(0,a.useCallback)(async()=>{let e=(0,e$.UN)().getCurrentPage();if(!e)return;let n=e.directlySelectedNodes;0!==n.length&&(await i({selectedNodes:n,submit:t}),await d({submit:o}))},[i,t,d,o]);switch(s){case ig.qy.INITIAL:case ig.qy.RUNNING:case ig.qy.CANCELLED:case ig.qy.ERROR:return(0,r.jsx)(a9,{overrides:{state:s,progress:n,perform:u}});case ig.qy.DONE:switch(c){case ig.qy.INITIAL:case ig.qy.RUNNING:case ig.qy.CANCELLED:case ig.qy.ERROR:return(0,r.jsx)(se,{overrides:{state:c,progress:l}});case ig.qy.DONE:return(0,r.jsx)(i1.zY,{});default:(0,F.xb)(c)}default:(0,F.xb)(s)}}async function sn(e,t){return(await Promise.all(t.map(async t=>{let n=await (0,rj.gC)(t),i=e.replace("{{jsx}}",n.jsx),r=await e1.Ay.openai.completeChat({model:"gpt-4o-2024-08-06",temperature:.5,n:1,messages:[{role:"system",content:i},{role:"user",content:[{type:"image_url",image_url:{url:n.base64}}]}],use_cache:!1,response_format:{type:"json_object"}}),a=r.choices[0]?.message.content;return a?{...function(e){if(!e)throw Error("No content detected in GPT response");let t=JSON.parse(e.replace(/```json\n|```/g,"")),n=ro.AR.parse(t);return{isMobileDesign:n.isMobileDesign,components:n.components.reduce((e,t)=>(e[t.guid]=t.name,e),{})}}(a),frame:t}:null}))).filter(e=>null!==e)}async function si(e,t){return(await Promise.all(t.map(async t=>{let n=await (0,rj.gC)(t),i=e.replace("{{jsx}}",n.jsx),r=await e1.Ay.openai.completeChat({model:"gpt-4o-2024-08-06",temperature:.5,n:1,messages:[{role:"system",content:i},{role:"user",content:[{type:"image_url",image_url:{url:n.base64}}]}],use_cache:!1,response_format:{type:"json_object"}}),a=r.choices[0]?.message.content;return a?{component:t,...JSON.parse(a)}:null}))).filter(e=>null!==e)}let sr=e=>{let t=new Set;return!function e(n){if(n.name.startsWith("[COMPONENT]")&&t.add(n.guid),"childrenNodes"in n)for(let t of n.childrenNodes)e(t)}(e),t},sa=(e,t)=>{let n=0,i=e;for(;i.guid!==t.guid&&n<8;){if(n+=1,!i.parentNode)throw Error("Node is not a child of root, distance: "+n);i=i.parentNode}return n},ss=async({componentizePromptOverride:e,dispatch:t})=>{let n=(0,e$.UN)().getCurrentPage();if(!n)return;let i=n.directlySelectedNodes;if(0===i.length){t(x.F.enqueue({type:"eval-componentize",message:"No selected nodes"}));return}for(let e of i){if("FRAME"!==e.type){t(x.F.enqueue({type:"eval-componentize",message:"Selected node is not a frame"}));return}if(e.name.startsWith("[TEST]")){t(x.F.enqueue({type:"eval-componentize",message:`Selected node ${e.name} is already a test node`}));return}}for(let n of i){let i;if(n.name=`[TEST] ${n.name}`,!(i=e?(await sn(e,[n]))[0]:(await a0([n],""))[0])){t(x.F.enqueue({type:"eval-componentize",message:`Failed to get suggested components for ${n.name}`}));return}for(let e of aQ(i))(0,e$.UN)().get(e.guid).name=`[COMPONENT] ${e.name}`}},so=async({componentizePromptOverride:e,dispatch:t,close:n})=>{let i=(0,e$.UN)().getCurrentPage();if(!i)return;let r=i.childrenNodes.filter(e=>"FRAME"===e.type);if(0===r.length){t(x.F.enqueue({type:"eval-componentize",message:"No frames found"}));return}n(),t(x.F.enqueue({type:"eval-componentize",message:"Starting eval"}));let a=[],s=0,o=r.filter(e=>e.name.startsWith("[TEST]"));for(let n of az()(o,5))await Promise.all(n.map(async n=>{let i;i=e?(await sn(e,[n]))[0]:(await a0([n],""))[0],a.push({node:n,components:new Set(aQ(i).map(e=>e.guid)),expectedComponents:sr(n)}),s+=1,t(x.F.enqueue({type:"eval-componentize",message:`Completed ${s} / ${o.length}`}))})),await new Promise(e=>setTimeout(e,100));let l=[];for(let e of a){let t=(0,aG._i)(e.expectedComponents,e.components).size,n=(0,aG._i)(e.components,e.expectedComponents).size,i=(0,aG.iR)(e.expectedComponents,e.components).size;l.push({falseNegativeCount:t,falsePositiveCount:n,correctCount:i,result:e})}iC.l7.ai("eval-componentize",()=>{let e=(0,e$.UN)().createNode("CANVAS");e.name=`Eval Run ${i.name} ${new Date().toISOString()}`;let t=(0,e$.UN)().createNode("FRAME");t.name="Results Frame",t.x=-1e3,t.y=-1e3,t.size={x:220,y:220},t.fills=[{type:"SOLID",color:{r:.9,g:.9,b:.9,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}];let n=(0,e$.UN)().createNode("TEXT");for(let i of(n.name="Results",m.biQ.setTextContentOnTextNode(n.guid,`False Negative Count: ${l.reduce((e,t)=>e+t.falseNegativeCount,0)}
False Positive Count: ${l.reduce((e,t)=>e+t.falsePositiveCount,0)}
Correct Count: ${l.reduce((e,t)=>e+t.correctCount,0)}`),n.x=10,n.y=10,n.size={x:200,y:200},n.fills=n.fills.concat([{type:"SOLID",color:{r:0,g:0,b:0,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}]),t.appendChild(n),e.appendChild(t),l)){let t=i.result;if(!(0,aG.yZ)(t.expectedComponents,t.components)){let n=m.XJn.cloneNodeForComponentize(t.node.guid),r=(0,e$.UN)().get(n.get(t.node.guid));if(!r)throw Error("Failed to clone node");r.name=t.node.name+` (FNC: ${i.falseNegativeCount} FPC: ${i.falsePositiveCount} CC: ${i.correctCount})`;let a=(e,t)=>{e.strokePaints={data:e.strokePaints.data.concat([{type:"SOLID",color:t,visible:!0,opacity:1,blendMode:"NORMAL"}]),blobs:e.strokePaints.blobs},e.strokeWeight=(8-sa(e,r))*2,e.strokeAlign="OUTSIDE",e.borderStrokeWeightsIndependent=!1,e.borderBottomWeight=2,e.borderTopWeight=2,e.borderLeftWeight=2,e.borderRightWeight=2},s=new Map;for(let[e,t]of n.entries())s.set(t,e);for(let e of(0,aG._i)(t.expectedComponents,t.components)){let t=n.get(e);a((0,e$.UN)().get(t),{r:1,g:0,b:0,a:1})}for(let e of(0,aG._i)(t.components,t.expectedComponents)){let t=n.get(e);a((0,e$.UN)().get(t),{r:0,g:0,b:1,a:1})}for(let e of(0,aG.iR)(t.expectedComponents,t.components)){let t=n.get(e);a((0,e$.UN)().get(t),{r:0,g:1,b:0,a:1})}e.appendChild(r)}}(0,e$.UN)().setCurrentPageAsync(e.guid)}),t(x.F.enqueue({type:"eval-componentize",message:"Finished eval"}))},sl=["componentizePrompt","suggestProps","componentizeResultMapping"];var sd=n(363691),sc=n(287736),su=n(708723),sm=n(402804),sp=n(969382),sh=n(931547),sf=n(517478),sg=n(39899),sx=n(751543),s_=n(447364),sy=n(408823),sb=n(196792),sv=n(201464),sC=n(254056),sE=n(324880),sw=n(180831),sk=n(532392),sT=n(892691);let sj={ORG:"org",ALL:"all"},sS=(0,p.E3)("firstDraftKitPickerTab",sj.ORG);function sI({aiTrackingContext:e,ParentComponent:t}){let{allUsableKitEntries:n,hasLastSelectedKit:i,setSelectedKit:s,kitsAreLoaded:o}=(0,rL.sI)(),[l,d]=a.useState(""),c=a.useRef(null);(0,sk.y)(l,c),(0,sw.z)();let{pop:u,push:m}=(0,M.cq)(),h=(0,a.useCallback)(n=>{s(n),(0,ei.SX)({...e,interaction:rN.NI.SELECT_KIT,interaction_type:rN.bp.BUTTON_CLICK}),i?u():m({name:er.Sn.FIRST_DRAFT,module:(0,r.jsx)(t,{})})},[t,e,s,i,u,m]),[f,g]=a.useState(null);a.useEffect(()=>{c.current?.focus()},[c]);let[x,_]=(0,p.fp)(sS),y=(0,tw.T5)("FirstDraftKitSelection").unwrapOr(null),b=y?.name||(0,U.t)("first_draft.kits.org_libraries.fallback"),v=b&&b.length>20,C=(0,ef.kc)().first_draft_direct_gen&&n.some(e=>e.metadata.direct_generation),E=f||n;if((0,ef.kc)().first_draft_direct_gen){if(C){let e=x===sj.ORG;E=E.filter(t=>e===t.metadata.direct_generation)}}else E=E.filter(e=>!e.metadata.direct_generation);return(0,r.jsx)(D.s3,{name:"firstDraftKitPicker",recordingKey:"firstDraftKitPicker",children:(0,r.jsx)(G.dP,{children:(0,r.jsxs)("div",{className:K.s.flex.flexColumn.gap8.pt8.$,"data-testid":"kitSelectionListContainer",children:[(0,r.jsxs)("div",{className:i9()("kit_picker_view--navContainer--bChvX",sE.Dm),children:[(0,r.jsx)("div",{className:K.s.h24.$,children:(0,r.jsx)(rq.K,{recordingKey:rr.Pt("firstDraftKitSelection","backButton"),onClick:u,"aria-label":(0,U.t)("qa.go_back"),children:(0,r.jsx)(rJ.C,{})})}),(0,r.jsx)("input",{ref:c,"aria-autocomplete":"list",className:i9()("kit_picker_view--searchInput--23Khf",sE.Dm),dir:"auto",maxLength:100,onChange:e=>{!function(e){if(d(e),0===e.length)g(null);else{let t=e.toLowerCase();g(n.filter(e=>sN(e).toLowerCase().includes(t)))}}(e.target.value)},placeholder:(0,U.t)("first_draft.kits.search_placeholder"),spellCheck:!1,type:"search",value:l}),(0,r.jsx)(sT.yi,{helpUrlVariant:$.JT.FIRST_DRAFT_MAKE_KIT})]}),o&&(0,ef.kc)().first_draft_direct_gen?(0,r.jsx)("div",{className:K.s.wFull.pl8.pr8.$,children:C?(0,r.jsxs)(el.fu,{value:x,onChange:B.lQ,numItems:2,children:[(0,r.jsx)(el.oz,{tabId:sj.ORG,onAction:()=>_(sj.ORG),recordingKey:rr.Pt("firstDraftKitSelection","orgTab"),htmlAttributes:{...v&&{"data-tooltip":b,"data-tooltip-type":eO.Ib.TEXT}},children:(0,U.tx)("first_draft.kits.org_libraries",{orgName:(0,iE.EJ)(b,20)})}),(0,r.jsx)(el.oz,{tabId:sj.ALL,onAction:()=>_(sj.ALL),recordingKey:rr.Pt("firstDraftKitSelection","allTab"),children:(0,U.tx)("first_draft.kits.all_libraries")})]}):(0,r.jsx)(sM,{})}):null,(0,r.jsx)("div",{style:{height:312},className:K.s.relative.$,"data-testid":"kitSelectionListView",children:o?(0,r.jsx)(sA,{kitsToShow:E,searchQuery:l,onKitOptionSelected:h}):null})]})})})}function sA({kitsToShow:e,searchQuery:t,onKitOptionSelected:n}){if(t&&0===e.length){let e=t.length>20?`${t.slice(0,20)}\u2026`:t;return(0,r.jsx)("div",{className:K.s.p8.selfCenter.justifyCenter.flex.flexGrow0.$,children:(0,U.tx)("first_draft.kits.no_results",{searchQuery:e})})}return(0,r.jsx)(i0.T.Provider,{value:{recordingKey:"firstDraftView"},children:(0,r.jsx)(a2.B,{primary:!0,resultCount:e.length,children:e.map((e,t)=>(0,r.jsx)(a2.B.Item,{primaryAction:{text:"Perform",shortcuts:[{key:z.Uz.ENTER}],onAction:()=>n(e)},actionLabel:!1,recordingKey:rr.Pt("firstDraftKitSelection",t,"list-item"),children:(0,r.jsxs)("div",{className:K.s.p4.gap8.flexRow.flex.itemsCenter.$,"data-testid":"fd-kit-item",children:[(0,r.jsx)("div",{className:"kit_picker_view--fileThumbnail--vfEuu",style:{backgroundImage:`url(${e.thumbnailUrl})`}}),(0,r.jsxs)("div",{className:"kit_picker_view--kitDisplayInformation---7NmP",children:[(0,r.jsx)("div",{children:sN(e)}),e.numComponents>0&&(0,r.jsx)("div",{className:"kit_picker_view--componentCountText--kMYX0",children:(0,U.tx)("first_draft.kits.components_count",{count:e.numComponents})})]})]})},t))})})}function sN(e){switch(e.dsKitKey.type){case"LOCAL":case"USER_LIBRARY":return e.name;case"1P_LIBRARY":if(e.metadata.identifier)return(0,U.t)(`first_draft.kits.${e.metadata.identifier}`)||e.name;return e.name;default:return(0,F.xb)(e.dsKitKey)}}function sM(){return(0,r.jsxs)("div",{className:"kit_picker_view--tempGettingStartedNotice--JKGh6",children:[(0,r.jsx)("div",{className:K.s.fontBold.$,children:(0,U.tx)("first_draft.direct_gen.getting_started.heading")}),(0,r.jsxs)("div",{className:K.s.inline.colorTextSecondary.flexWrap.$,children:[(0,U.tx)("first_draft.direct_gen.getting_started.notice")," ",(0,r.jsx)(sC.N,{newTab:!0,trusted:!0,href:"https://www.figma.com/blog/figma-ai-first-draft-byods/",onClick:e=>e.stopPropagation(),htmlAttributes:{"data-tooltip":(0,U.t)("qa.learn_more"),"data-tooltip-type":eO.Ib.TEXT,"data-tooltip-show-above":!0},children:(0,U.tx)("qa.learn_more")})]})]})}function sR({onClose:e,defaultPosition:t,description:n,setDescription:i}){return(0,r.jsx)(sh.bL,{width:"sm",onClose:e,defaultPosition:{bottom:window.innerHeight-t.y-16,right:window.innerWidth-t.x+16},children:(0,r.jsxs)(sf.vo,{children:[(0,r.jsx)(sf.Y9,{children:(0,r.jsx)(sf.hE,{children:(0,U.tx)("first_draft.reference_settings")})}),(0,r.jsx)(sf.nB,{padding:8,children:(0,r.jsx)(sb.v,{placeholder:(0,U.t)("first_draft.reference_settings.placeholder"),value:n,onChange:e=>{i(e.currentTarget.value)},rows:3,minHeight:64,maxHeight:64,focusOnMount:!0})})]})})}function sP({selectedNodeThumbnailsCache:e,onDelete:t,promptValue:n,setPromptValue:i}){let s=Array.from((0,sp.eb)().values()),[o,l]=a.useState(null),d=(0,a.useRef)({x:0,y:0});return(0,r.jsxs)("div",{className:K.s.p4.flex.flexRow.flexWrap.minW0.flexShrink0.$,children:[s?.map(n=>r.jsxs("div",{className:K.s.relative.$,style:{display:"flex"},children:[r.jsx(sy.vi,{thumbnailUrl:e?.get(n.guid)?.imageURL??sp.zs,altText:n.name,onClick:()=>{m.glU?.panToNode(n.guid,!1)},isUploading:e?.get(n.guid)?.promise!==null,onDelete:()=>{t(n.guid)}}),r.jsx("div",{className:K.s.absolute.colorBgSecondary.p4.$,style:{bottom:"-4px",left:"-4px",borderRadius:"0 9px 0 0"},children:r.jsx(sg.f,{onIcon:r.jsx(sx.P,{}),offIcon:r.jsx(sx.P,{}),onChange:(e,{event:t})=>{d.current={x:t.target.getBoundingClientRect().x,y:t.target.getBoundingClientRect().bottom},l(e?n.guid:null)},checked:o===n.guid,variant:"highlighted","aria-label":U.t("first_draft.reference_settings.adjust_settings")||""})})]},n.guid)),o&&(0,r.jsx)(sR,{onClose:()=>l(null),defaultPosition:d.current,description:n.attachmentMetadata?.[o]?.description??"",setDescription:e=>i({...n,attachmentMetadata:{...n.attachmentMetadata,[o]:{description:e}}})})]})}function sO({promptValue:e,setPromptValue:t,onShowKitPicker:n,selectedKit:i,handleSubmit:s,promptHistory:o,recordingKey:d,aiTrackingContext:c,selectedNodeThumbnailsCache:u,allowNodeAttachments:p}){let h;let[f]=a.useState(function(e=3,t){let n=(0,ef.kc)().first_draft_new_prompt_pills,i=[{label:(0,U.t)("first_draft.prompts.pricing_page.label"),prompt:(0,U.t)("first_draft.prompts.pricing_page.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,U.t)("first_draft.prompts.sign_in_screen.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.blog_post.label"),prompt:(0,U.t)("first_draft.prompts.blog_post.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.portfolio.label"),prompt:(0,U.t)("first_draft.prompts.portfolio.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.news_site.label"),prompt:(0,U.t)("first_draft.prompts.news_site.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.onboarding.label"),prompt:(0,U.t)("first_draft.prompts.onboarding.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,U.t)("first_draft.prompts.sign_in_screen.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.blog_post.label"),prompt:(0,U.t)("first_draft.prompts.blog_post.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.map_app_mobile.label"),prompt:(0,U.t)("first_draft.prompts.map_app_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.messaging_mobile.label"),prompt:(0,U.t)("first_draft.prompts.messaging_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.profile.label"),prompt:(0,U.t)("first_draft.prompts.profile_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.travel_app_mobile.label"),prompt:(0,U.t)("first_draft.prompts.travel_app_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.social_feed_mobile.label"),prompt:(0,U.t)("first_draft.prompts.social_feed_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.ticketing_app.label"),prompt:(0,U.t)("first_draft.prompts.ticketing_app.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.ride_sharing_mobile.label"),prompt:(0,U.t)("first_draft.prompts.ride_sharing_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.to_dos_mobile.label"),prompt:(0,U.t)("first_draft.prompts.to_dos_mobile.prompt"),type:"MOBILE"}];n&&i.push({label:(0,U.t)("first_draft.prompts.homepage.label"),prompt:(0,U.t)("first_draft.prompts.homepage.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.homepage.label"),prompt:(0,U.t)("first_draft.prompts.homepage_2.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.video_player_streaming.label"),prompt:(0,U.t)("first_draft.prompts.video_player_streaming.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.video_page_with_comments.label"),prompt:(0,U.t)("first_draft.prompts.video_page_with_comments.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.search_results_travel.label"),prompt:(0,U.t)("first_draft.prompts.search_results_travel.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.social_feed_text_heavy.label"),prompt:(0,U.t)("first_draft.prompts.social_feed_text_heavy.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.profile.label"),prompt:(0,U.t)("first_draft.prompts.profile_social_media.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.news_article.label"),prompt:(0,U.t)("first_draft.prompts.news_article.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.landing_page.label"),prompt:(0,U.t)("first_draft.prompts.landing_page_beauty.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.landing_page.label"),prompt:(0,U.t)("first_draft.prompts.landing_page_tech.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.marketing_page_football.label"),prompt:(0,U.t)("first_draft.prompts.marketing_page_football.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.shopping.label"),prompt:(0,U.t)("first_draft.prompts.shopping_hifi.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.shopping.label"),prompt:(0,U.t)("first_draft.prompts.product_details_shoes.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.admin_dashboard_saas.label"),prompt:(0,U.t)("first_draft.prompts.admin_dashboard_saas.prompt"),type:"WEB"},{label:(0,U.t)("first_draft.prompts.settings_mobile.label"),prompt:(0,U.t)("first_draft.prompts.settings_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.video_player_comments_mobile.label"),prompt:(0,U.t)("first_draft.prompts.video_player_comments_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.checkout_mobile.label"),prompt:(0,U.t)("first_draft.prompts.checkout_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.reviews_mobile.label"),prompt:(0,U.t)("first_draft.prompts.reviews_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.audio_player_mobile.label"),prompt:(0,U.t)("first_draft.prompts.audio_player_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.investing_mobile.label"),prompt:(0,U.t)("first_draft.prompts.investing_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.app_browsing_mobile.label"),prompt:(0,U.t)("first_draft.prompts.app_browsing_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.reservations_mobile.label"),prompt:(0,U.t)("first_draft.prompts.reservations_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.fitness_mobile.label"),prompt:(0,U.t)("first_draft.prompts.fitness_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.subscriptions_mobile.label"),prompt:(0,U.t)("first_draft.prompts.subscriptions_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.recipes_mobile.label"),prompt:(0,U.t)("first_draft.prompts.recipes_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.sports_mobile.label"),prompt:(0,U.t)("first_draft.prompts.sports_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.delivery_app_mobile.label"),prompt:(0,U.t)("first_draft.prompts.delivery_app_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.calendar_mobile.label"),prompt:(0,U.t)("first_draft.prompts.calendar_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.email_mobile.label"),prompt:(0,U.t)("first_draft.prompts.email_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.file_browser_mobile.label"),prompt:(0,U.t)("first_draft.prompts.file_browser_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.education_mobile.label"),prompt:(0,U.t)("first_draft.prompts.education_mobile.prompt"),type:"MOBILE"},{label:(0,U.t)("first_draft.prompts.shopping_mobile.label"),prompt:(0,U.t)("first_draft.prompts.shopping_mobile.prompt"),type:"MOBILE"});let r=i;if(t){let e=t.toLowerCase();e.includes("mobile")?r=r.filter(e=>"MOBILE"===e.type):e.includes("web")&&(r=r.filter(e=>"WEB"===e.type))}let a=rB()(r),s={};for(let t of a){if(Object.keys(s).length>=e)break;let n=rH(t.label);s[n]||(s[n]=t)}let o=Object.values(s).slice(0,e);return o.length<e?((0,e_.$D)(l.e.AI_GENERATION,Error(`Unable to generate ${e} unique presets`),{extra:{count:e,generatedCount:o.length,selectedPresetsObj:s,shuffledPresets:a}}),[]):o}(4,i?.name)),g=(0,a.useCallback)(e=>{(0,ei.SX)({...c,...(0,ei.Q0)(e),interaction:rN.NI.GENERATE}),s()},[c,s]),x=Array.from((0,sp.eb)().values()),_=(0,a.useCallback)(e=>{m.Egt?.removeFromSelection([e])},[]),y=(0,a.useCallback)(()=>0!==e.prompt.length,[e]),b=(0,ef.kc)().first_draft_direct_gen,v=(0,a.useRef)(null),C=()=>i&&(0,r.jsx)(tK.$n,{"aria-label":sN(i),iconPrefix:(0,r.jsx)(s_.i,{style:{marginLeft:2,marginRight:4}}),onClick:n,recordingKey:rr.Pt(d,"changeKit"),variant:"secondary",children:sN(i)}),E=(0,sv.o)();return h=b?{growVertically:!0,width:E-16}:{growVertically:!1},(0,r.jsxs)("div",{className:K.s.borderBox.$,style:{padding:8},"data-testid":"readyForPromptView",children:[(0,r.jsx)(rM.XG,{action:$.JT.FIRST_DRAFT,bottomContent:p&&b&&x&&u&&x.length>0&&(0,r.jsx)(sP,{promptValue:e,setPromptValue:t,selectedNodeThumbnailsCache:u,onDelete:_}),featureNameForInstrumentation:"first_draft",onChange:n=>t({...e,prompt:n}),promptHistory:b?[]:o,recordingKey:rr.Pt(d,"generate"),refocusToInput:!1,suggestion:f[0].prompt,suggestionPills:f.slice(1),textAreaRef:v,topNavContent:b?(0,r.jsx)("div",{}):(0,r.jsx)("div",{className:"first_draft_prompt_view_v2--libraryButtonContainer--YCXDr",children:C()}),value:e.prompt,...h}),(0,r.jsxs)(ea.B,{fullWidth:!0,justify:"space-between",children:[b&&C()||(0,r.jsx)("div",{}),(0,r.jsxs)(ea.B,{gap:8,children:[b&&(0,r.jsx)(rM.nj,{promptHistory:o,onChange:n=>t({...e,prompt:n}),textAreaRef:v}),(0,r.jsx)(tU.r,{shortcuts:[{key:z.Uz.ENTER,modifier:[z.xH.META]}],onAction:g,recordingKey:rr.Pt(d,"generate"),disabled:!y(),children:(0,U.tx)("first_draft.generate")})]})]})]})}var sD=n(718535),sL=n(507420);function sF({options:e,onSelect:t}){let[n,i]=a.useState(),s=a.useCallback((e,r)=>{t(e,{ev:r,prevOption:n}),i(e)},[t,n]);return(0,r.jsxs)(r0._,{children:[(0,r.jsx)(sL.t,{}),(0,r.jsx)("div",{role:"radiogroup","aria-label":(0,U.t)("first_draft.theme_previews_group"),children:(0,r.jsx)(tV.x,{columns:6,gap:13.9,padding:0,children:e.map((e,t)=>(0,r.jsx)(sB,{column:t,presetOption:e,onSelect:s,selected:n===e},t))})})]})}function sB({column:e,presetOption:t,onSelect:n,selected:i}){return(0,r.jsx)(tV.x.Item,{recordingKey:`previewTileItem-${e}`,primaryAction:{onAction:e=>n(t,e)},enableFauxFocus:!1,role:"radio",selected:i,singleClick:"always",children:(0,r.jsx)(tV.x.GridItemHighlight,{children:(0,r.jsx)("div",{className:K.s.colorBgSecondary.b1.colorBorder.wFull.flex.alignCenter.justifyCenter.$,style:{aspectRatio:"1/1",height:"56px",overflow:"hidden",borderRadius:"8px",alignItems:"flex-start"},children:(0,r.jsx)("img",{alt:(0,U.t)("first_draft.theme_preview",{index:e+1}),src:t.dataURI,className:K.s.maxWFull.$,draggable:!1})})})})}let sU=(0,p.E3)("draft_prompt_history",[]),sV="first-draft-done-feedback",sH=(0,p.Iz)(()=>(0,p.eU)({prompt:""})),sz=async({params:{selectedKit:e,promptValue:t,submitPrompt:n,shouldContinueStreamRef:i,selectedNodeIds:r,selectedNodeThumbnailsCache:a},abortController:s})=>{if(s.signal.addEventListener("abort",()=>{i.current=!1}),!e)throw Error((0,U.t)("first_draft.no_design_generated"));let o=await n(t,{designSystem:e,selectedNodeIds:r??void 0,selectedNodeThumbnailsCache:a},{shouldGenerateImages:!0,addWireframeBorder:e?.metadata.needs_border,skipSelection:(0,rw.WX)(e)});if(o.error)throw m.XJn.clearFDScene(),o.error;if(o?.success&&!o?.nodeId)throw Error((0,U.t)("first_draft.no_design_generated"));return{result:o}};function sG(){let e=(0,X.tS)(),{aiTrackingContext:t}=(0,ig.wj)($.JT.FIRST_DRAFT),n=t.clientLifecycleId,i=a.useCallback(()=>{(0,rt.sx)("First Draft: Error",{file_key:e,clientLifecycleId:n,view:"firstDraftGenerate"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[n,e]);return(0,r.jsx)(g.tH,{boundaryKey:"FirstDraft",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:l.e.AI_GENERATION},onError:i,children:(0,r.jsx)(i0.T.Provider,{value:{recordingKey:"firstDraftView"},children:(0,r.jsx)(sK,{recordingKey:"firstDraftView"})})})}function sK({recordingKey:e}){let t=(0,ig.RL)($.JT.FIRST_DRAFT,sz),{start:n,stop:i,state:o,aiTrackingContext:l}=t,d=l.clientLifecycleId,c=(0,eS.eY)(),u=(0,X.tS)(),h=(0,a.useRef)(null),f=sH(d),[g,_]=(0,p.fp)(f);if(h.current){let e=h.current;h.current=null,_(e)}let[y,b]=a.useState([]),C=a.useRef(!0),E=a.useRef(null),w=a.useRef(null),k=a.useRef(new sd.P(1)),[T,j]=a.useState(new Set),S=a.useRef({}),{kitsAreLoaded:I,hasLastSelectedKit:A,selectedKit:N}=(0,rL.sI)(),{close:R,push:P,replace:O}=(0,M.cq)(),[D,L]=a.useState(!1===A);(0,a.useEffect)(()=>{if(D||!A)return(A?P:O)({name:er.Sn.FIRST_DRAFT_KIT_PICKER,module:(0,r.jsx)(sI,{aiTrackingContext:l,ParentComponent:sG})})},[l,D,A,e,P,O]);let{promptHistory:B,addPromptToHistory:V}=(0,iI.a)(sU,e=>e),H=(0,rw.WX)(N),[z,G]=(0,a.useState)(!1),K=(0,s.wA)(),W=(0,rw.WX)(N),q=(0,sp.qi)({enabled:W}),Y=(0,sp.eb)();aN(!H&&(o===ig.qy.DONE||o===ig.qy.ERROR)),a.useEffect(()=>()=>{m.XJn.clearFDScene()},[]);let J=a.useCallback(()=>C.current,[C]),Z=a.useCallback(async(e,t,n,i)=>{if(!e||!n)return;(0,su.xF)(e);let r=!0;N&&!1===N.metadata.has_theme&&(r=!1),0===i.length&&0===Object.keys(t).length&&(r=!1),r&&b(await (0,sm.xk)(n,e,i,t))},[N]),{submitPrompt:Q,executionTrace:et,imageProgress:en}=(0,rw.TM)({shouldContinueStream:J,onInsertJSXDone:Z,clientLifecycleId:d}),ea=a.useCallback(async()=>{if(o===ig.qy.RUNNING){(0,e0.xi)("first-draft","handleSubmit called while already running");return}if(!N){(0,e0.xi)("first-draft","handleSubmit called without a selected kit");return}ee.D.dispatch(x.F.dequeue({matchType:sV})),V(g.prompt);let e=await n({selectedKit:N,promptValue:g,submitPrompt:Q,shouldContinueStreamRef:C,selectedNodeIds:W?Array.from(Y.keys()):void 0,selectedNodeThumbnailsCache:q});e?.result?.nodeId&&(E.current=e.result.nodeId)},[o,N,V,g,n,Q,W,Y,q]),es=a.useCallback(()=>{i(),R()},[R,i]),eo=(0,a.useCallback)(async(e,t)=>{void 0!==t.prevOption&&e!==t.prevOption&&(0,ei.hm)({...l,...(0,ei.zQ)(t.ev),iteration_view_type:rN.$J.SUCCESS_WITH_ITERATION,interaction:rN.sd.GALLERY_SELECT,status:rN.o2.COMPLETED,value:e.modeId||"null"}),t.ev.target?.item&&(S.current[t.ev.target.index]=t.ev.target.item),await k.current.postTask(()=>{if(E.current&&(w.current?.modeId??null)!==e.modeId){let t=(0,sm.DP)(e,E.current,T),n=c.get(t),i=n?.firstDraftData,r=i?.kit?.type??null;(0,rt.sx)("First Draft: Multiple Options Selected",{preset_name:e.modeId,clientLifecycleId:d,isLocal:r===v.AZ4.LOCAL||null,dsKitType:null!==r?r===v.AZ4.LOCAL?"LOCAL":"1P_LIBRARY":null,kitKey:i?.kit?.key??null,file_key:u},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),j(new Set([E.current,...T])),E.current=t,w.current=e}},{})},[l,T,d,c,u]),el=(0,nD.Fk)((e,t)=>{for(let n of t)if(n){let t=e.get(n);if(t)return Object.values(t.explicitVariableModes())[0]??null}},[E.current,...T]);a.useEffect(()=>{if(w.current&&void 0!==el&&w.current.modeId!==el){let e=y.findIndex(e=>e.modeId===el);S.current[e]&&(w.current=y[e],S.current[e].fauxFocus())}},[el,y]);let ed=()=>0===y.length?null:(0,r.jsx)(sF,{options:y,onSelect:eo}),ec=et&&(0,ef.kc)().cortex_execution_tracing;switch((0,a.useLayoutEffect)(()=>{o===ig.qy.DONE&&H&&(h.current={...g,attachmentMetadata:{...g.attachmentMetadata,...E.current?{[E.current]:{description:"",wasOutputOfPreviousGeneration:!0}}:{}}},ee.D.dispatch(x.F.enqueue({type:sV,icon:sc.zX.GREEN_CHECK,content:(0,r.jsx)(sD.I,{aiTrackingContext:l}),onDismiss:()=>{ee.D.dispatch(x.F.dequeue({matchType:sV}))},timeoutOverride:6e4})),m.XJn?.clearFDScene(),(0,ig.B3)($.JT.FIRST_DRAFT),E.current&&m.Egt?.addToSelection([E.current]))},[o,H,g,l]),o){case ig.qy.INITIAL:return(0,r.jsx)(sO,{aiTrackingContext:l,allowNodeAttachments:W,handleSubmit:ea,kitsAreLoaded:I,onShowKitPicker:()=>{L(!0)},promptHistory:B,promptValue:g,recordingKey:e,selectedKit:N,selectedNodeThumbnailsCache:q,setPromptValue:_});case ig.qy.RUNNING:return(0,r.jsx)(iF.F,{recordingKey:rr.Pt(e,"running"),onStop:es,aiTrackingContext:l,secondaryMessage:en.total&&en.loaded?(0,U.t)("first_draft.x_of_y_images",{loaded:en.loaded,total:en.total}):void 0,children:(0,U.tx)("first_draft.running")});case ig.qy.DONE:{let n=t.result;if(z)return(0,r.jsx)(aL,{initialRootGuid:n.result?.nodeId});let i=[];if((0,rA.KK)()&&!(0,ef.kc)().first_draft_use_gemini&&i.push({type:rO.is.MAKE_CHANGES,callback:()=>{m.XJn.clearFDScene(),G(!0)}}),ec&&(0,aA.A)(K,et),H)return null;return(0,r.jsx)(rO.Oq,{content:N?.dsKitKey.type==="USER_LIBRARY"?null:(()=>{let e=[],t=ed();return(t&&e.push(t),0===e.length)?null:(0,r.jsx)(aK.Y,{direction:"vertical",spacing:8,children:e})})(),iterateOptions:i,recordingKey:rr.Pt(e,"iterate"),aiTrackingContext:{...l,iteration_view_type:rN.$J.SUCCESS_WITH_ITERATION},stayOpen:!0})}case ig.qy.ERROR:{let{error:n}=t;return ec&&(0,aA.A)(K,et),(0,r.jsx)(iD.Eb,{error:n,recordingKey:rr.Pt(e,"error"),buttons:[{type:iD.ft.OK,callback:R}],aiTrackingContext:l})}case ig.qy.CANCELLED:return null;default:(0,F.xb)(o)}}var sW=n(720995),sq=n(264152);let sX="7f12ea1300756f144a0fb5daaf68dbfc01103a46",sY=(e,t)=>{let n=e=>{let t=e=>"number"==typeof e&&!isNaN(e);return t(e.x)&&t(e.y)&&t(e.width)&&t(e.height)};if(!n(e)||!n(t))throw Error("Invalid bounding box - all position and size properties must be valid numbers");let i=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y)),r=e.width*e.height+t.width*t.height-i;return[i,r]},sJ={intersectionOverUnion:{distanceFunction:(e,t,n)=>{let i=!0,r=n.iouDefaultCost;try{let[a,s]=sY(e.boundingBox,t.boundingBox);void 0!==n.iouThreshold&&(i=i&&(0===s?0:a/s)>n.iouThreshold),r=s-a}catch(e){return{match:!1,distance:r}}return{match:i,distance:r}},options:{iouDefaultCost:1,iouThreshold:.2,typeMismatchCost:1}}};var sZ=n(572827);function sQ(e){return e.fills.some(e=>"IMAGE"===e.type)}let s$=new Set(["VECTOR","LINE"]),s0=new Set(["VECTOR","ROUNDED_RECTANGLE","ELLIPSE","STAR","LINE","REGULAR_POLYGON"]);function s1(e){return!!(s$.has(e.type)||s0.has(e.type))||"GROUP"===e.type&&e.childrenNodes.every(e=>s1(e))}var s2=n(457479),s5=n(475300);function s4(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function s3(e){if(!e||!e.startsWith("data:")||-1===e.indexOf(";base64,"))throw Error("Invalid data URL format");let t=e.split(";base64,").pop();if(!t)throw Error("Could not extract base64 data from URL");let n=e.substring(5,e.indexOf(";"));if(!n)throw Error("Could not extract mime type from data URL");return{base64:t,mimeType:n}}function s6(e){let t=e.size,n=(0,s2._G)(new tW.Mi(t.x,t.y),e.guid,!0,void 0,!1,!0);if(!n||!n.pixels||!n.pixelSize||!n.displaySize)return null;let{base64:i,mimeType:r}=s3((0,s2.Pv)(n.pixels,n.pixelSize));return{base64:i,mimeType:r,pixelData:n.pixels,width:n.pixelSize.x,height:n.pixelSize.y}}async function s7(e,t,n,i,r,a,s,o="Image"){let l;let d=s4(a),c=await (0,iU.UD)(d,s,"image");if(iC.l7.user("create image node",()=>{(l=e.createNode("RECTANGLE")).size={x:i,y:r},l.insertImageInFillPaint(c),l.x=n.x,l.y=n.y,t.appendChild(l),l.name=o}),!l)throw Error("Failed to create node");return l}async function s9(e,t,n,i,a,s,o){let l=await s7(e,t,n,i,a,s,o,"Placeholder");return(0,rD.Vm)(l.guid,(0,r.jsx)(s5.A,{})),l}async function s8(e,t,n,i,r,a,s,o){let{node:l,issues:d}=await (0,sq.LZ)(n,{originalSize:{x:r,y:a},normalizePxToRange01:!0,excludeImageData:!0,excludeVectorData:!0,imagePlaceholderRef:sX}),c=()=>{l&&iC.l7.user("remove aborted node",()=>{l?.removeSelfAndChildren()})};if(o.signal.aborted)throw c(),new ig.lc;if(!l)throw Error(`Failed to deserialize node${d.length?`: ${d.map(e=>e.message).join(", ")}`:""}`);let u=await Promise.all(s.objects.filter(e=>"image"===e.cls||"vector"===e.cls).map(async e=>{let t=function(e,t,n,i){let r=new Uint8Array(i.width*i.height*4);for(let n=0;n<i.height;n++)for(let a=0;a<i.width;a++){let s=i.x+a,o=((i.y+n)*t+s)*4,l=(n*i.width+a)*4;r[l]=e[o]??0,r[l+1]=e[o+1]??0,r[l+2]=e[o+2]??0,r[l+3]=e[o+3]??0}return{data:r,width:i.width,height:i.height}}(function(e,t,n,i){let r=new Uint8Array(e.length);for(let a=0;a<i;a++)for(let i=0;i<n;i++){let s=(a*n+i)*4,o=t[a*n+i];r[s]=e[s]??0,r[s+1]=e[s+1]??0,r[s+2]=e[s+2]??0,r[s+3]=(e[s+3]??0)*(o??0)/255}return r}(i,function(e,t,n,i,r){let a=new Uint8Array(i*r);for(let s=0;s<r;s++)for(let o=0;o<i;o++){let l=Math.floor(o*t/i),d=Math.floor(s*n/r);a[s*i+o]=e[d*t+l]??0}return a}(e.mask,s.width,s.height,r,a),r,a),r,0,{x:e.x,y:e.y,width:e.width,height:e.height}),n=s4((function(e,t,n){let i=t*n*4;if(e.length!==i)throw Error(`Data length (${e.length}) does not match expected dimensions (${i})`);let{canvas:r,ctx:a}=function(e,t){let n=document.createElement("canvas");n.width=e,n.height=t;let i=n.getContext("2d");return{canvas:n,ctx:i}}(t,n);return function(e,t,n,i){let r=e.createImageData(t,n);r.data.set(i),e.putImageData(r,0,0)}(a,t,n,e),r.toDataURL("image/png")})(t.data,t.width,t.height).split(",")[1]),o=await (0,iU.UD)(n,"image/png","image");return{type:e.cls,x:e.x,y:e.y,width:e.width,height:e.height,imageSetForInsertion:o}}));if(o.signal.aborted)throw c(),new ig.lc;let p=function({node:e,graphics:t}){var n;let[i,r]=function(e,t){let n=[];!function e(t){if(n.push(t),t.childrenNodes)for(let n of t.childrenNodes)e(n)}(e);let i=e.absoluteRenderBounds;if(!i)return[[],[]];let r=[],a=[];return n.forEach(e=>{if(t(e)){let{relativeBounds:t,isVisible:n}=function(e,t){let n=e.absoluteBoundingBox;if(!n)return{relativeBounds:void 0,isVisible:!1};let i={x:n.x-t.x,y:n.y-t.y,width:n.w,height:n.h},r=i.x<t.width&&i.x+i.width>0&&i.y<t.height&&i.y+i.height>0;return{relativeBounds:i,isVisible:r}}(e,{x:i.x,y:i.y,width:i.w,height:i.h});n&&t&&(r.push({boundingBox:t}),a.push(e))}}),[r,a]}(e,e=>sQ(e)||s1(e)),[a,s]=function(e,t){let n=e.filter(t);return[n.map(e=>({boundingBox:{x:e.x,y:e.y,width:e.width,height:e.height}})),n]}(t,e=>"image"===e.type||"vector"===e.type),[o,l]=function(e,t,n=sJ.intersectionOverUnion){let{columnsForRow:i,rowForColumn:r}=function(e,t=!1){if(0===e.length||0===e[0].length)return{columnsForRow:[],rowForColumn:[],gain:0};let n=e.length,i=e[0].length,r=!1;if(i>n){e=e[0].map((t,n)=>e.map(e=>e[n]));let t=n;n=i,i=t,r=!0}let a=t?Math.max(...e.flat()):Math.min(...e.flat());t&&a<0&&(a=0),!t&&a>0&&(a=0),e=e.map(e=>e.map(e=>t?-e+a:e-a));let s=Array(n).fill(-1),o=Array(i).fill(-1),l=Array(i).fill(0),d=Array(n).fill(0);for(let t=0;t<i;t++){let{sink:n,predecessors:i,updatedU:r,updatedV:a}=function(e,t,n,i,r,a){let s=i.length,o=i[0].length,l=Array(s).fill(0),d=Array(o).fill(!1),c=Array(s).fill(!1),u=Array.from({length:s},(e,t)=>t),m=s,p=null,h=0,f=e,g=Array(s).fill(1/0);for(;null===p;){d[f]=!0;let e=1/0,a=-1;for(let r=0;r<m;r++){let s=u[r],o=h+i[s][f]-t[f]-n[s];o<g[s]&&(l[s]=f,g[s]=o),g[s]<e&&(e=g[s],a=r)}if(!isFinite(e))return{sink:null,predecessors:l,updatedU:t,updatedV:n};let s=u[a];c[s]=!0,m--,u.splice(a,1),h=g[s],-1===r[s]?p=s:f=r[s]}t[e]+=h;for(let n=0;n<d.length;n++)d[n]&&n!==e&&(t[n]+=h-g[a[n]]);for(let e=0;e<c.length;e++)c[e]&&(n[e]-=h-g[e]);return{sink:p,predecessors:l,updatedU:t,updatedV:n}}(t,l,d,e,s,o);if(null===n)return{columnsForRow:[],rowForColumn:[],gain:-1};l=r,d=a;let c=n;for(;;){let e=i[c];s[c]=e;let n=o[e];if(o[e]=c,c=n,e===t)break}}let c=0;for(let t=0;t<i;t++)c+=e[o[t]][t];if(t?(c=-c+a*i,l=l.map(e=>-e),d=d.map(e=>-e)):c+=a*i,r){let e=s;s=o,o=e,e=l,l=d,d=e}return{columnsForRow:s,rowForColumn:o,gain:c}}(function(e,t,n){let{distanceFunction:i,options:r}=n;if(!i)throw Error("`distanceFunction` must be set in config.");if(!r)throw Error("`options` must be set in config.");let a=Array.from({length:e.length},()=>Array(t.length).fill(0));for(let n=0;n<e.length;n++)for(let s=0;s<t.length;s++)a[n][s]=i(e[n],t[s],r).distance;return a}(e,t,n)),{distanceFunction:a,options:s}=n;for(let n=0;n<i.length;n++){let o=i[n];-1===o||a(e[n],t[o],s).match||(r[o]=-1,i[n]=-1)}return[i,r]}(i,a),d=(0,e$.UN)();return iC.l7.ai("reconcile all graphics",()=>{for(let e=0;e<i.length;e++){let t=o[e];if(void 0!==t&&-1!==t){let n=s[t],i=r[e];if(i&&n?.imageSetForInsertion){if(sQ(i))i.insertImageInFillPaint(n.imageSetForInsertion);else if(s1(i)){let e=d.createNode("RECTANGLE");e.name=i.name||i.type,e.size={x:n.width,y:n.height},e.x=i.x,e.y=i.y,e.setImageInFillPaint(n.imageSetForInsertion),i.parentNode?.appendChild(e),i.removeSelfAndChildren()}}}}}),n=r.filter(sQ),iC.l7.ai("Removing placeholder image fills",()=>{n.forEach(e=>{let t=e.fills;e.fills=t.filter(e=>!("IMAGE"===e.type&&e.image&&e.image.hash&&(0,sZ.nj)(e.image.hash)===sX))})}),e}({node:l,graphics:u});return iC.l7.user("place node",()=>{t.parentNode?.appendChild(p),p.x=t.x,p.y=t.y,e.setSelectionToSingleNode(p.guid),m.glU.showSelectionOverlayImmediately()}),p}let oe=e5.z.object({cls:e5.z.string(),x:e5.z.number(),y:e5.z.number(),width:e5.z.number(),height:e5.z.number(),mask:e5.z.instanceof(Uint8Array)}).passthrough(),ot=e5.z.object({width:e5.z.number(),height:e5.z.number(),objects:e5.z.array(oe)}).passthrough();async function on(e,t=1){let n=(await e1.Ay.design.imageToShareJsx({input:{image:e},numDesigns:t})).jsx;if(!n?.length)throw Error("No valid JSX received from server");return n.flat()}async function oi(e,t,n){let i=(await Promise.all(t.map(async e=>{try{let{node:t}=await (0,sq.LZ)(e,{originalSize:{x:n.size.x,y:n.size.y},normalizePxToRange01:!0,excludeImageData:!0,excludeVectorData:!0});if(!t)return null;iC.l7.user("place node",()=>{t.x=n.x,t.y=n.y});let i=s6(t);if(!i)return null;let r=i.base64;return iC.l7.user("hide and remove node",()=>{t.visible=!1,t.removeSelfAndChildren()}),{jsx:e,base64:r}}catch(e){return null}}))).filter(e=>null!==e);if(0===i.length)return console.warn("No valid JSX candidate thumbnails generated, defaulting to first candidate"),t[0];let r=(await e1.Ay.design.guiclip({image:e,candidates:i.map(e=>e.base64)})).bestCandidateIndex;return null==r?(console.warn("Cannot get best candidate index from server, defaulting to first valid candidate"),i[0].jsx):i[r].jsx}async function or(e){let t=await e1.Ay.design.uiParser({png_b64:e}),n={width:t.width,height:t.height,objects:t.objects.map(e=>({cls:e.cls,x:e.x,y:e.y,width:e.width,height:e.height,mask:new Uint8Array(atob(e.mask).split("").map(e=>e.charCodeAt(0)))}))},i=ot.safeParse(n);if(!i.success)throw Error("Unable to parse response from UI Parser");return i.data}let oa=async({abortController:e})=>{let t;let n=e$.UN().getCurrentPage()?.directlySelectedNodes;if(!n||1!==n.length||void 0===n[0])throw Error("No image selected");let i=n[0],r=i.size.x,a=i.size.y;try{let{base64:n,mimeType:s,pixelData:o,width:l,height:d}=function(e){let t=s6(e);if(!t)throw Error("Cannot process image");return t}(i),{node:c,location:u}=function(e,t,n){return{node:e.parentNode,location:new tW.Mi(e.x+t+(t+n)/2*.15,e.y)}}(i,l,d),m=(0,e$.UN)(),p=m.getCurrentPage();if(!p)throw Error("Cannot get current page from scene");t=await s9(m,c??p,u,r,a,n,s);let h=(0,ig.zM)((e,t)=>on(e,t),e),f=(0,ig.zM)((e,t,n)=>oi(e,t,n),e),g=(0,ig.zM)(e=>or(e),e),x=await h(n,4),_=await f(n,x,t),y=await g(n),b=(0,ig.zM)(s8,e,e=>{e&&iC.l7.user("clean up reconciled node",()=>{e.removeSelfAndChildren()})});await b(p,t,_,o,l,d,y,e)}catch(e){if(e instanceof ig.lc)return;throw e}finally{iC.l7.user("remove placeholder node",()=>{t&&t.removeSelfAndChildren()})}},os=async({abortController:e,params:t})=>{let n;let i=(t.width+t.height)/2,r=new tW.Mi(t.node.x+t.width+.15*i,t.node.y),a=(0,e$.UN)(),s=a.getCurrentPage();if(!s)throw Error("Cannot get current page from scene");let o=s6(t.node);if(!o)throw Error("Failed to get image data from node");let{base64:l,mimeType:d,pixelData:c,width:u,height:p}=o;try{n=await s9(a,t.node.parentNode??s,r,u,p,l,d);let i=await (0,sq.oy)(t.node,{normalizePxToRange01:!0,excludeImageData:!0,excludeVectorData:!0}),o=await m.bbV?.generateNodeSegmentationFromWeb(t.node.guid);if(!o)throw Error("UiParserHelpers is undefined, failed to create segmentation for node");let h={width:o.width,height:o.height,objects:o.objects.map(e=>({cls:e.cls,x:e.x,y:e.y,width:e.width,height:e.height,mask:e.mask}))};await s8(s,n,i.jsxStr,c,u,p,h,e)}catch(e){throw e}finally{iC.l7.user("remove placeholder node",()=>{n&&n.removeSelfAndChildren()})}};var oo=n(244917),ol=n(415315);function od({fileInputRef:e,onFileInputChange:t}){return(0,r.jsx)("input",{type:"file",ref:e,accept:ol.xp.join(","),onChange:t,multiple:!1,className:K.s.hidden.$})}function oc({action:e,instruction:t,onPerform:n,disableImageUpload:i=!1}){let{close:s}=(0,M.cq)(),o=(0,ig.RL)(e,oa),{state:l,stop:d,aiTrackingContext:c}=o,u=a.useRef(null),p=()=>{(0,ig.B3)(e)};switch(l){case ig.qy.INITIAL:return(0,r.jsxs)(r.Fragment,{children:[!i&&(0,r.jsx)(od,{fileInputRef:u,onFileInputChange:e=>{let t=e.target?.files;if(t&&t[0]){let e=t[0],n=new FileReader;n.onloadend=()=>{if(n.result){let t=n.result.toString(),i=new Image;i.onload=async()=>{let n=i.width,r=i.height,a=(0,e$.UN)(),s=a.getCurrentPage();if(!s)return;let o=ia.Y5.getViewportInfo(),l=new tW.Mi(o.offsetX-n/2,o.offsetY-r/2),{base64:d,mimeType:c}=s3(t),u=await s7(a,s,l,n,r,d,c,e.name);s.setSelectionToSingleNode(u.guid),m.glU.showSelectionOverlayImmediately()},i.src=t}},n.readAsDataURL(e)}}}),(0,r.jsx)(iQ.AE,{action:e,actionLabel:(0,U.tx)("image_to_design.action"),actionIcon:(0,r.jsx)(n9.m,{}),instructionAction:i?void 0:{type:"custom",label:(0,U.tx)("fragment_search.visual_search_image_upload_button"),iconPrefix:(0,r.jsx)(oo.Z,{}),onPerform:()=>u.current?.click()},aiTrackingContext:void 0,onPerform:n,children:t})]});case ig.qy.RUNNING:return(0,r.jsx)(iF.F,{onStop:()=>{d(),p(),s()},aiTrackingContext:c,children:(0,U.tx)("ai.working")});case ig.qy.DONE:return(0,r.jsx)(rO.Oq,{iterateOptions:[],aiTrackingContext:{...c,iteration_view_type:rN.$J.SUCCESS_WITH_ITERATION},showFeedbackInline:!0});case ig.qy.ERROR:return(0,r.jsx)(iD.Eb,{error:o.error,buttons:[{type:iD.ft.OK,callback:p}],aiTrackingContext:c});case ig.qy.CANCELLED:return null}}var ou=n(910990),om=n(261705),op=n(690803),oh=n(234385),of=n(342180),og=n(378811),ox=n(22048),o_=n(39171),oy=n(558840),ob=n(160849),ov=n(24867),oC=n(534366);async function oE(){let e=(0,e$.UN)(),t=e.getCurrentPage()?.directlySelectedNodes||[];if(1!==t.length)return null;let n=t[0];if(!n)throw Error("Selected node is undefined");return await ow(n.guid)}async function ow(e){if(!m.ruz)throw Error("ImageToolsBindings is not available");let t=(0,e$.UN)().get(e);if(!t)throw Error("Node not found");let n=m.ruz.getTopmostVideoIndex(t.id);if(null===n)throw Error("No video paint found in node");let i=t.fills[n];if(!i||!i.video?.hash)throw Error("Video paint or hash not found");let r=await (0,oC.f)(i.video);if(!r)throw Error("Could not get signed URL for video");return new Promise((e,t)=>{let n=document.createElement("video");n.crossOrigin="anonymous",n.muted=!0,n.playsInline=!0;let i=document.createElement("canvas"),a=i.getContext("2d");if(!a){t(Error("Could not get canvas context"));return}n.onloadedmetadata=()=>{i.width=n.videoWidth,i.height=n.videoHeight,n.currentTime=n.duration},n.onseeked=()=>{try{a.drawImage(n,0,0,i.width,i.height);let t=i.toDataURL("image/png");e(t.split(",")[1]??"")}catch(e){t(e)}},n.onerror=e=>{t(Error(`Video loading error: ${e}`))},n.src=r,n.load()})}var ok=n(985547);let oT=(0,p.E3)("make_video_prompt_history",[]),oj=a.lazy(()=>n.e(6238).then(n.bind(n,606238)));function oS({action:e,aiActionType:t,actionLabel:n,instructionLabel:i,icon:a,searchSynonyms:s}){return{action:e,tags:[nP.$.AI],flags:["edit","whiteboard"],iconType:a,searchSynonyms:s,quickAction:{beforeModuleOpen:()=>{(0,eL.Yh)(ee.D.getState().mirror.appModel,e)&&(0,ip.J7)(t)},alwaysEnabled:!0,module:{name:er.Sn.FIGJAM_AI_CONTEXTUAL_FEATURES,module:(0,r.jsx)(i$,{action:e,actionType:t,actionIcon:a,actionLabel:n,instructionLabel:i})}}}}let oI=[{callback:B.lQ,action:$.JT.TRANSLATE_TEXT,flags:["edit","design","slides","sites","cooper","whiteboard"],featureFlags:["qa_text_features"],tags:[nP.$.AI],quickAction:{beforeModuleOpen:()=>{(0,ig.B3)($.JT.TRANSLATE_TEXT)},alwaysEnabled:!0,module:{name:er.Sn.TRANSLATE,module:(0,r.jsx)(ib.K,{})}},iconType:(0,r.jsx)(nG.c,{}),searchSynonyms:["change language"]},{callback:B.lQ,action:$.JT.REWRITE_TEXT,flags:["edit","design","slides","sites","cooper","whiteboard"],featureFlags:["qa_text_features"],quickAction:{beforeModuleOpen:()=>{(0,ig.B3)($.JT.REWRITE_TEXT)},module:{name:er.Sn.REWRITE,module:(0,r.jsx)(i_.w,{})},alwaysEnabled:!0},iconType:(0,r.jsx)(nK.K,{}),tags:[nP.$.AI],searchSynonyms:["revise this","modify this","adjust tone"]},{callback:()=>{(0,ig.B3)($.JT.SLIDES_GENERATE_SPEAKER_NOTES),(0,ig.Ag)($.JT.SLIDES_GENERATE_SPEAKER_NOTES,iu.O,{source:im.f.QUICK_ACTIONS})},action:$.JT.SLIDES_GENERATE_SPEAKER_NOTES,flags:["slides"],iconType:(0,r.jsx)(nW.A,{}),tags:[nP.$.AI],searchSynonyms:["presenter notes","speaker notes","notes","draft presenter notes","draft speaker notes","draft notes"]},{callback:()=>(0,ic.mD)(ee.D.dispatch,{source:"quick_actions",toggle:!0}),action:$.JT.SLIDES_REWRITE_TEXT,flags:["slides"],iconType:(0,r.jsx)(nq.L,{}),tags:[nP.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:()=>(0,ic.mD)(ee.D.dispatch,{source:"quick_actions",toggle:!0}),action:$.JT.SLIDES_REWRITE_TEXT,flags:["edit","design"],featureFlags:["aip_tone_dial_fd"],iconType:(0,r.jsx)(nq.L,{}),tags:[nP.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:B.lQ,action:$.JT.SHORTEN_TEXT,flags:["edit","design","slides","sites","cooper","whiteboard"],featureFlags:["qa_text_features"],quickAction:{module:{name:er.Sn.SHORTEN,module:(0,r.jsx)(iy.J,{})},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)($.JT.SHORTEN_TEXT),(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.SHORTEN_TEXT)&&(0,ig.Ag)($.JT.SHORTEN_TEXT,iy.$,{featureType:$.JT.SHORTEN_TEXT,source:"quick-actions"})}},iconType:(0,r.jsx)(nX.R,{}),tags:[nP.$.AI],searchSynonyms:["make concise","condense","reduce","abbreviate","shorter"]},{callback:B.lQ,action:$.JT.FIRST_DRAFT,flags:["edit","design"],featureFlags:[],quickAction:{module:{module:(0,r.jsx)(sG,{}),name:er.Sn.FIRST_DRAFT},beforeModuleOpen:()=>{(0,ig.B3)($.JT.FIRST_DRAFT)}},iconType:(0,r.jsx)(nY,{}),tags:[nP.$.AI],searchSynonyms:["first draft","make designs","generate design","create design","let's design"]},{callback:()=>{ia.Y5.triggerActionEnum(m.rcl.START_AI_ASSISTANT)},action:$.JT.START_AI_ASSISTANT,flags:["edit","design"],featureFlags:["ai_assistant"],tags:[nP.$.AI],iconType:(0,r.jsx)(nJ.u,{}),searchSynonyms:["assistant","prompt","chat","ai"]},{callback:B.lQ,action:$.JT.MAKE_EDITS_DEBUG,flags:["edit","design","whiteboard","slides"],featureFlags:["ai_assistant","make_edits_debug"],quickAction:{module:{module:(0,r.jsx)(og.Aw,{}),name:er.Sn.MAKE_EDITS_DEBUG},beforeModuleOpen:()=>{}},iconType:(0,r.jsx)(nY,{}),searchSynonyms:["debug make edits"],tags:[nP.$.AI]},{callback:B.lQ,action:$.JT.MAKE_EDITS_DEBUG_REVIEW,flags:["edit","design","whiteboard","slides"],featureFlags:["ai_assistant","make_edits_debug"],quickAction:{module:{module:(0,r.jsx)(a.Suspense,{fallback:null,children:(0,r.jsx)(oj,{})}),name:er.Sn.MAKE_EDITS_DEBUG_REVIEW},beforeModuleOpen:()=>{}},iconType:(0,r.jsx)(nY,{}),searchSynonyms:["debug make edits review"],tags:[nP.$.AI]},{callback:B.lQ,action:$.JT.FIRST_DRAFT_FINE_TUNE,flags:["edit","design"],featureFlags:["first_draft_fine_tune"],quickAction:{module:{module:(0,r.jsx)(function(){let e=(0,a.lazy)(()=>n.e(7013).then(n.bind(n,557013))),{aiTrackingContext:t}=(0,ig.wj)($.JT.FIRST_DRAFT_FINE_TUNE),i=t.clientLifecycleId;return(0,r.jsx)(g.tH,{boundaryKey:"FirstDraftFineTune",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:i,area:l.e.AI_GENERATION},children:(0,r.jsx)(i0.T.Provider,{value:{recordingKey:"firstDraftFineTuneView"},children:(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:(0,U.t)("first_draft.make_edits.loading")}),children:(0,r.jsx)(e,{})})})})},{}),name:er.Sn.FIRST_DRAFT_FINE_TUNE},beforeModuleOpen:()=>{(0,ig.B3)($.JT.FIRST_DRAFT_FINE_TUNE)},alwaysEnabled:!0},iconType:(0,r.jsx)(nY,{}),tags:[nP.$.AI],searchSynonyms:["fine tune","first draft fine tune"]},{callback:B.lQ,action:$.JT.FIRST_DRAFT_MAKE_CHANGES,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_make_changes","first_draft_make_changes_reopen"],notFeatureFlags:["first_draft_use_gemini"],quickAction:{module:{module:(0,r.jsx)(function(){let e=rS(),[t]=a.useState(e);return(0,r.jsx)(aL,{initialRootGuid:t||null})},{}),name:er.Sn.FIRST_DRAFT_MAKE_CHANGES}},iconType:(0,r.jsx)(nY,{}),tags:[nP.$.AI],searchSynonyms:["make changes","adjust design","modify design","edit design"]},{callback:B.lQ,action:$.JT.FIRST_DRAFT_MAKE_KIT,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_make_kit"],quickAction:{module:{module:(0,r.jsx)(function(){let{pop:e}=(0,M.cq)();return(0,r.jsx)(g.tH,{boundaryKey:"FirstDraftMakeKitView",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.e.AI_GENERATION},children:(0,r.jsx)(a6,{recordingKey:"firstDraftMakeKitView",onBack:e})})},{}),name:er.Sn.FIRST_DRAFT_MAKE_KIT},beforeModuleOpen:()=>{(0,ig.B3)($.JT.FIRST_DRAFT_MAKE_KIT),(0,ig.B3)($.JT.FIRST_DRAFT_COMPONENTIZE),(0,ig.B3)($.JT.FIRST_DRAFT_SUGGEST_PROPS)}},iconType:(0,r.jsx)(nY,{}),tags:[nP.$.AI],searchSynonyms:["make kit","create kit","generate kit","design kit"]},{callback:B.lQ,action:$.JT.FIRST_DRAFT_MAKE_KIT_DEBUG,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_make_kit","first_draft_debug"],quickAction:{module:{module:(0,r.jsx)(function(){let e=(0,s.wA)(),{close:t}=(0,M.cq)(),{inputs:n,renderInput:i}=function(e,t,n){let i=a.useMemo(()=>(function(e){let t=e.reduce((e,t)=>(e[t]=e5.z.object({override:e5.z.string(),enabled:e5.z.boolean()}),e),{});return e5.z.object(t)})(e),[e]),{inputs:s,setInputs:o,handleInputChange:l,handleCheckboxChange:d}=function(e,t,n,i){let[r,s]=a.useState(()=>{let r=localStorage.getItem(t);if(r)try{let e=JSON.parse(r);if(n)return n.parse(e);return e}catch(e){console.error(`Failed to parse saved state for ${t}:`,e)}return e.reduce((e,t)=>(e[t]={override:"",enabled:i?.enabled??!1},e),{})});a.useEffect(()=>{localStorage.setItem(t,JSON.stringify(r))},[r,t]);let o=a.useCallback(e=>t=>{s(n=>({...n,[e]:{...n[e],override:t.target.value}}))},[]),l=a.useCallback(e=>t=>{s(n=>({...n,[e]:{...n[e],enabled:t.target.checked}}))},[]);return{inputs:r,setInputs:s,handleInputChange:o,handleCheckboxChange:l}}(e,t,i,void 0),c=a.useCallback(({field:e,label:t,rows:n=3,placeholder:i="Enter override"})=>(function(e,t,n,i,a,s=3,o="Enter override"){let l=e[t]||{override:"",enabled:!1};return(0,r.jsxs)(ea.B,{fullWidth:!0,justify:"space-between",children:[(0,r.jsx)("input",{type:"checkbox",checked:l.enabled,onChange:i(t)}),(0,r.jsx)("div",{style:{opacity:l.enabled?1:.5,width:"100%"},children:(0,r.jsxs)(aK.Y,{direction:"vertical",spacing:8,children:[(0,r.jsx)(eZ.E,{children:n}),(0,r.jsx)("textarea",{className:K.s.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:s,value:l.override,placeholder:o,onChange:a(t),disabled:!l.enabled})]})})]})})(s,e,t,d,l,n,i),[s,l,d]);return{inputs:s,setInputs:o,handleInputChange:l,handleCheckboxChange:d,renderInput:c}}(sl,"firstDraftMakeKitDebugState"),o=a.useMemo(()=>n.componentizeResultMapping.enabled?async()=>await function(e){if(!e||""===e.trim())return{};try{return JSON.parse(e)}catch(e){return console.warn("Failed to parse JSON:",e),{}}}(n.componentizeResultMapping.override):n.componentizePrompt.enabled?async e=>await sn(n.componentizePrompt.override,e):void 0,[n.componentizePrompt.override,n.componentizeResultMapping.override,n.componentizeResultMapping.enabled,n.componentizePrompt.enabled]),l=a.useMemo(()=>{if(n.suggestProps.enabled)return async e=>{try{return await si(n.suggestProps.override,e)}catch(e){return console.error("Failed to get suggested props:",e),[]}}},[n.suggestProps.override,n.suggestProps.enabled]),[d,c]=a.useState(!1);return d?(0,r.jsx)(aX.x.Provider,{value:{getSuggestedComponents:o,getSuggestedProps:l},children:(0,r.jsx)(st,{})}):(0,r.jsx)("div",{children:(0,r.jsxs)(aK.Y,{direction:"vertical",spacing:"auto",padding:8,children:[(0,r.jsx)(eZ.E,{fontSize:14,fontWeight:"medium",children:"Make First Draft Kit (Debug)"}),(0,r.jsxs)(aK.Y,{direction:"vertical",padding:8,width:"fill-parent",spacing:16,children:[i({field:"componentizePrompt",label:"Componentize Prompt Override",rows:3,placeholder:"Enter override, must contain {{jsx}} for substitution"}),i({field:"suggestProps",label:"Suggest Props Prompt Override",rows:3,placeholder:"Enter override, must contain {{jsx}} for substitution"}),i({field:"componentizeResultMapping",label:"Componentize Result Mapping Override",rows:3,placeholder:"Enter override, must contain {{jsx}} for substitution"})]}),(0,r.jsxs)(ea.B,{gap:8,children:[(0,r.jsx)(tK.$n,{variant:"secondary",onClick:async()=>{await so({componentizePromptOverride:n.componentizePrompt.enabled?n.componentizePrompt.override:void 0,dispatch:e,close:t})},children:"Eval componentize on page"}),(0,r.jsx)(tK.$n,{variant:"secondary",onClick:()=>c(!0),children:"Run on current selection"}),(0,r.jsx)(tK.$n,{variant:"secondary",onClick:()=>ss({componentizePromptOverride:n.componentizePrompt.enabled?n.componentizePrompt.override:void 0,dispatch:e}),children:"Generate test case from selected"})]})]})})},{}),name:er.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG},beforeModuleOpen:()=>{(0,ig.B3)($.JT.FIRST_DRAFT_MAKE_KIT),(0,ig.B3)($.JT.FIRST_DRAFT_COMPONENTIZE),(0,ig.B3)($.JT.FIRST_DRAFT_SUGGEST_PROPS)}},iconType:(0,r.jsx)(nY,{}),searchSynonyms:["debug kit","debug make kit"],tags:[nP.$.AI]},{callback:B.lQ,action:$.JT.FIRST_DRAFT_LINTING,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_publish_ux"],quickAction:{module:{module:(0,r.jsx)(i1.S6,{}),name:er.Sn.FIRST_DRAFT_LINT}},tags:[nP.$.AI]},{callback:B.lQ,action:$.JT.FIRST_DRAFT_DEBUG,flags:["edit","design"],featureFlags:["first_draft_native","first_draft_debug"],quickAction:{module:{module:(0,r.jsx)(function(){let e=(0,a.lazy)(()=>n.e(5815).then(n.bind(n,815815)));return(0,r.jsx)(g.tH,{boundaryKey:"MakeEdits",fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.e.AI_GENERATION},children:(0,r.jsx)(i0.T.Provider,{value:{recordingKey:"firstDraftDebugView"},children:(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(e,{})})})})},{}),name:er.Sn.FIRST_DRAFT_DEBUG}},tags:[nP.$.AI]},{name:$.JT.FIND_INSPIRATION,action:$.JT.FIND_INSPIRATION,displayNode:(0,U.tx)("fullscreen_actions.quick_actions.find-inspiration-verbose"),displayForQuickCommand:"find-inspiration-quick-command",args:{},tags:[nP.$.AI],flags:["design","slides","cooper"],featureFlags:(0,ef.kc)().hub_file_fragments?[]:["asset_suggestions"],callback:B.lQ,quickAction:{module:{module:(0,ef.kc)().hub_file_fragments?(0,r.jsx)(t9.z6,{isVisualSearch:!0}):(0,r.jsx)(sW.WS,{}),name:er.Sn.VISUAL_SEARCH},beforeModuleOpen:()=>(0,sW.jp)(W.G4.ACTIONS_LIST)},iconType:(0,r.jsx)(eW.A,{}),searchSynonyms:["visual search","image search","selection search","visual lookup","find matching","search for similar","find similar designs","find more like"]},{action:$.JT.REMOVE_BACKGROUND,featureFlags:[],tags:[nP.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,r.jsx)(nZ.g,{}),quickAction:{module:{module:(0,r.jsx)(om.w,{source:"quick-actions"}),name:er.Sn.REMOVE_BACKGROUND_VIEW},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.REMOVE_BACKGROUND)&&(0,il.LK)("quick-actions")}},callback:B.lQ,searchSynonyms:["clean up image","clean up picture","make transparent","delete background","erase background","eliminate background","isolate subject"]},{action:$.JT.UPSCALE_IMAGE,featureFlags:[],tags:[nP.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,r.jsx)(nQ.w,{}),quickAction:{module:{module:(0,r.jsx)(op.Q,{source:"quick-actions"}),name:er.Sn.UPSCALE_IMAGE_VIEW},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.UPSCALE_IMAGE)&&(0,il.tg)("quick-actions")}},callback:B.lQ,searchSynonyms:["boost resolution","sharpen image","sharpen picture","upscale image","scale up","enlarge image","refine image","improve image","unblur","reduce blur","increase size","increase quality","enhance clarity","crisp"]},{action:$.JT.EXPAND_IMAGE,featureFlags:["aip_expand_image"],tags:[nP.$.AI],flags:["edit","design"],iconType:(0,r.jsx)(n$.V,{}),quickAction:{module:{module:(0,r.jsx)(ou.FI,{action:$.JT.EXPAND_IMAGE,onEnabled:()=>(0,il.T4)("quick-actions")}),name:er.Sn.EXPAND_IMAGE_VIEW},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,il.CV)("quick-actions")}},callback:B.lQ,searchSynonyms:["expand image","uncrop image","extend image","fill image","change aspect ratio"]},{action:$.JT.REMOVE_OBJECT,featureFlags:["expr_ai_remove_object"],tags:[nP.$.AI],flags:["edit","design"],iconType:(0,r.jsx)(n0.i,{}),quickAction:{module:{module:(0,r.jsx)(ou.FI,{action:$.JT.REMOVE_OBJECT,onEnabled:()=>(0,il.XJ)("quick-actions")}),name:er.Sn.REMOVE_OBJECT_VIEW},beforeModuleOpen:()=>{(0,il.IH)("quick-actions")},alwaysEnabled:!0},callback:B.lQ,searchSynonyms:["remove object","erase object","delete object","remove element","erase image object","delete image object","remove image object","erase item"]},{action:$.JT.VECTORIZE_IMAGE,featureFlags:["ce_il_vectorize"],tags:[nP.$.AI],flags:["edit","design"],iconType:(0,r.jsx)(n1.b,{}),quickAction:{module:{module:(0,r.jsx)(oh.G,{source:"quick-actions"}),name:er.Sn.VECTORIZE_IMAGE_VIEW},beforeModuleOpen:()=>{(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.VECTORIZE_IMAGE)&&(0,il.HQ)("quick-actions")},alwaysEnabled:!0},callback:B.lQ,searchSynonyms:["vectorize image","convert to vector","image to vector","trace","vector trace","raster to vector"]},{action:$.JT.SEPARATE_OBJECT,featureFlags:["expr_ai_sep_layers"],tags:[nP.$.AI],flags:["edit","design"],iconType:(0,r.jsx)(n2.k,{}),quickAction:{module:{module:(0,r.jsx)(ou.FI,{action:$.JT.SEPARATE_OBJECT,onEnabled:()=>(0,il.Kt)("quick-actions")}),name:er.Sn.SEPARATE_OBJECT_VIEW},beforeModuleOpen:()=>{(0,il.vb)("quick-actions")},alwaysEnabled:!0},callback:B.lQ,searchSynonyms:["separate object","extract object","isolate object","separate layer","extract layer","isolate layer"]},{callback:B.lQ,action:$.JT.AUTO_RENAME_LAYERS,featureFlags:["eai_auto_rename_layers"],tags:[nP.$.AI],flags:["edit","design"],iconType:(0,r.jsx)(n5.d,{}),quickAction:{module:{module:(0,r.jsx)(ox.A,{source:m.uQ6.QUICK_ACTIONS}),name:er.Sn.RENAME_LAYERS_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)($.JT.AUTO_RENAME_LAYERS),(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.AUTO_RENAME_LAYERS)&&(0,ig.Ag)($.JT.AUTO_RENAME_LAYERS,is.Ay,{source:m.uQ6.QUICK_ACTIONS,overwriteNames:!1})}},searchSynonyms:["rename all layers","name layers"]},{callback:B.lQ,action:$.JT.GENERATE_IMAGE,featureFlags:[],tags:[nP.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,r.jsx)(n4.K,{}),quickAction:{module:{module:(0,r.jsx)(iM.Ay,{}),name:er.Sn.GENERATE_IMAGE},beforeModuleOpen:()=>{(0,ig.B3)($.JT.GENERATE_IMAGE)}},searchSynonyms:["generate image","make a picture","generate graphic","generate picture","generate illustration","create image"]},{callback:B.lQ,action:$.JT.EDIT_IMAGE,featureFlags:[],tags:[nP.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,r.jsx)(nK.K,{}),quickAction:{module:{module:(0,r.jsx)(iM.Tu,{}),name:er.Sn.EDIT_IMAGE},beforeModuleOpen:()=>{(0,il.E_)("quick-actions")},alwaysEnabled:!0},searchSynonyms:["edit image","edit picture","edit graphic","edit illustration","modify image","change image","style image"]},{callback:B.lQ,action:$.JT.BUZZ_PROMPT_TO_DESIGN,featureFlags:["image_to_design"],tags:[nP.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,r.jsx)(n3.H,{}),quickAction:{module:{module:(0,r.jsx)(function(){let{close:e}=(0,M.cq)(),[t,n]=(0,a.useState)(""),i=p.zl.get(ik.BT),{modelType:s,setModelType:o,allowedModelTypes:l}=(0,iO.z)({action:$.JT.GENERATE_IMAGE,persistedUserModelSelectionAtom:iM.Lt,disabledModelsConfigKey:""}),{promptHistory:d,addPromptToHistory:c}=(0,iI.a)(iX,e=>e),[u]=(0,a.useState)(()=>iz[Math.floor(Math.random()*iz.length)]),h=(0,a.useMemo)(()=>({}),[]),f=(0,ig.RL)($.JT.BUZZ_PROMPT_TO_DESIGN,iV,h),{start:g,stop:x,state:_,aiTrackingContext:y}=f,b=(0,a.useCallback)(()=>{(0,ig.B3)($.JT.BUZZ_PROMPT_TO_DESIGN)},[]),v=(0,a.useCallback)(async()=>{c(t);let e=[];for(let{referenceImageNode:t,imageData:n}of(await iY(i))){ia.Y5.triggerActionEnum(m.rcl.DESELECT_ALL);let r=(0,iR.qq)({create:!0,canvasGrid:i,size:{x:t.size.x,y:t.size.y}});iC.l7.ai("buzzPromptToDesign",()=>{r.x=t.x+t.size.x+20,r.y=t.y});let a=n?.imageBase64?B.lQ:(0,iS.qY)(t),s=(0,iS.qY)(r),o=(e,n,i)=>{iC.l7.ai("buzzPromptToDesign",()=>{t?.isAlive&&e&&(0,iN.Xo)({node:t,image:e,action:$.JT.GENERATE_IMAGE,fillIndex:0}),r.isAlive&&(0,iN.Xo)({node:r,image:n,action:$.JT.GENERATE_IMAGE,fillIndex:0}),a(),s(),iK(r,i)})},l=()=>{iC.l7.ai("buzzPromptToDesign",()=>{t&&t.isAlive&&(0,iT.zD)({node:t}),r.isAlive&&(0,iT.zD)({node:r}),a(),s()})};e.push({image:n?.imageBase64,onImageSuccess:o,onImageFailed:l})}await g({prompt:t,modelType:s,actionData:e}),ia.Y5.triggerAction("commit")},[c,t,i,g,s]),C=(0,a.useRef)(!1);switch((0,a.useEffect)(()=>{C.current||(async function(){(await iJ()).length&&v()}(),C.current=!0)},[i,v]),(0,a.useEffect)(()=>()=>{x(),(0,ig.B3)($.JT.BUZZ_PROMPT_TO_DESIGN)},[x]),_){case ig.qy.INITIAL:return(0,r.jsx)(iL.A,{action:$.JT.BUZZ_PROMPT_TO_DESIGN,aiTrackingContext:y,extraFooter:(0,r.jsx)(iP.nG,{modelType:s,setModelType:o,allowedModelTypes:l,"data-testid":"model-type-selector"}),featureNameForInstrumentation:"buzz_prompt_to_design",onChangePrompt:n,onRun:v,prompt:t,promptHistory:d,submitLabel:(0,iw.tx)("ai.make_it"),suggestion:u});case ig.qy.RUNNING:return(0,r.jsx)(iF.F,{onCancel:e,aiTrackingContext:y,children:(0,iw.tx)("image_ai.make_image.processing")});case ig.qy.DONE:return e(),null;case ig.qy.ERROR:return(0,r.jsx)(iD.Eb,{error:f.error,buttons:[{type:iD.ft.GO_BACK,callback:b}],aiTrackingContext:y});case ig.qy.CANCELLED:return null}},{}),name:er.Sn.BUZZ_PROMPT_TO_DESIGN},beforeModuleOpen:()=>{(0,ig.B3)($.JT.BUZZ_PROMPT_TO_DESIGN)},alwaysEnabled:!0},searchSynonyms:["generate buzz design","make buzz design","create buzz design","buzz design"]},{callback:B.lQ,action:$.JT.MAKE_VIDEO,featureFlags:["aip_mw_video"],tags:[nP.$.AI],flags:["edit","design","slides","cooper","sites","whiteboard"],iconType:(0,r.jsx)(n4.K,{}),quickAction:{module:{module:(0,r.jsx)(function(){let e=(0,o_.to)(),{close:t}=(0,M.cq)(),[n,i]=a.useState(""),{promptHistory:s,addPromptToHistory:o}=(0,iI.a)(oT,e=>e),l=(0,ig.RL)($.JT.MAKE_VIDEO,ok.wx),{start:d,stop:c,state:u,aiTrackingContext:m}=l,{referenceImages:p,handleFileUpload:h,createImageAttachments:f,fileInputRef:g}=(0,oy.Iu)();(0,a.useEffect)(()=>{oE().then(e=>{e&&(0,ov.wS)(e,e=>{e.imageHash&&e.image&&h({status:"success",type:"IMAGE",nodeGuid:e.nodeGuid,image:e.image,imageHash:e.imageHash,uniqueId:(0,ob.lA)()})})}).catch(e=>{console.error("Failed to get last frame:",e)})},[h]);let x=(0,a.useCallback)(async()=>{o(n),await d({prompt:n,images:(0,iM.L0)(p)})},[o,n,p,d]);switch((0,a.useEffect)(()=>()=>{c(),(0,ig.B3)($.JT.MAKE_VIDEO)},[c]),u){case ig.qy.INITIAL:return(0,r.jsx)(iL.A,{action:$.JT.MAKE_VIDEO,aiTrackingContext:m,ariaLabel:(0,U.t)("fullscreen_actions.make_video"),extraFooter:(0,r.jsx)(iM.Ti,{fileInputRef:g,disabled:p.length>=1,tooltip:p.length>=1?(0,U.t)("video_ai.make_video.initial_frame_already_set"):(0,U.t)("video_ai.make_video.set_initial_frame"),multiple:!1,onFileUpload:f}),featureNameForInstrumentation:"make_video",hardClose:e,maxLength:1024,minLength:3,onChangePrompt:i,onRun:x,prompt:n,promptHistory:s,submitLabel:(0,U.tx)("ai.make_it"),useClose:e});case ig.qy.RUNNING:return(0,r.jsx)(iF.F,{onCancel:t,aiTrackingContext:m,children:(0,U.tx)("video_ai.make_video.processing")});case ig.qy.DONE:let _={...m,iteration_view_type:rN.$J.SUCCESS_WITH_ITERATION};return(0,r.jsx)(rO.Oq,{iterateOptions:[],aiTrackingContext:_,completionString:(0,U.t)("video_ai.make_video.initial_completion"),showFeedback:!1,targets:[]});case ig.qy.ERROR:return(0,r.jsx)(iD.Eb,{error:l.error,buttons:[{type:iD.ft.GO_BACK,callback:()=>(0,ig.B3)($.JT.MAKE_VIDEO)}],aiTrackingContext:m});case ig.qy.CANCELLED:return null}},{}),name:er.Sn.MAKE_VIDEO},beforeModuleOpen:()=>{(0,ig.B3)($.JT.MAKE_VIDEO)}},searchSynonyms:["make video","generate video","create video","make animation","make film","make clip"]},{action:$.JT.MAGIC_LINK,flags:["edit","design"],featureFlags:["prototype_ai_magic_link"],tags:[nP.$.AI],quickAction:{module:{module:(0,r.jsx)(of.p,{}),name:er.Sn.MAGIC_LINK},alwaysEnabled:!0,beforeModuleOpen:()=>{ee.D.dispatch((0,io.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions"}})),(0,ig.B3)($.JT.MAGIC_LINK),(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.MAGIC_LINK)&&(0,ig.Ag)($.JT.MAGIC_LINK,id.e,{})}},iconType:(0,r.jsx)(n6.S,{}),searchSynonyms:["magic link","add prototype links","add prototype connections","connect prototype","add interactions","make prototype"]},{action:$.JT.CONTENT_FILL,featureFlags:[],tags:[nP.$.AI],flags:["edit","design","sites"],iconType:(0,r.jsx)(n7.L,{}),quickAction:{module:{module:(0,r.jsx)(ix.F,{}),name:er.Sn.REGENERATE_TEXT_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)($.JT.CONTENT_FILL)}},searchSynonyms:["fill content","content fill","lorem ipsum","rewrite placeholder text","replace duplicates","rewrite duplicates"]},{action:$.JT.AI_CHAT_DEPRECATED,featureFlags:["prt_legacy_v3"],flags:["design","slides","cooper"],tags:[nP.$.AI],iconType:(0,r.jsx)(eK.C,{}),quickAction:{module:{module:(0,r.jsx)(t0,{}),name:er.Sn.AI_CHAT_DEPRECATED},beforeModuleOpen:()=>{p.zl.set(tC,{status:tv.Idle,messages:[]})}},searchSynonyms:["chat"]},{action:$.JT.IMAGE_TO_DESIGN,featureFlags:["gen_llava_lamp"],flags:["edit","design"],tags:[nP.$.AI],iconType:(0,r.jsx)(n9.m,{}),quickAction:{module:{module:(0,r.jsx)(function(){let{start:e}=(0,ig.RL)($.JT.IMAGE_TO_DESIGN,oa);return(0,r.jsx)(oc,{action:$.JT.IMAGE_TO_DESIGN,instruction:(0,U.tx)("image_to_design.instruction"),onPerform:()=>{e({})}})},{}),name:er.Sn.IMAGE_TO_DESIGN},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)($.JT.IMAGE_TO_DESIGN),(0,eL.Yh)(ee.D.getState().mirror.appModel,$.JT.IMAGE_TO_DESIGN)&&(0,ig.Ag)($.JT.IMAGE_TO_DESIGN,oa,{})}},searchSynonyms:["convert image to layers","make image editable","convert image to design","generate design from image","screenshot to design","picture to design"]},{action:$.JT.IMAGE_TO_DESIGN_ORACLE,featureFlags:["gen_llava_lamp"],flags:["edit","design"],tags:[nP.$.AI],iconType:(0,r.jsx)(eK.C,{}),quickAction:{module:{module:(0,r.jsx)(function(){let{start:e}=(0,ig.RL)($.JT.IMAGE_TO_DESIGN_ORACLE,os);return(0,r.jsx)(oc,{action:$.JT.IMAGE_TO_DESIGN_ORACLE,instruction:(0,U.tx)("image_to_design.oracle_instruction"),disableImageUpload:!0,onPerform:()=>{let t=e$.UN().getCurrentPage()?.directlySelectedNodes;if(!t||1!==t.length||void 0===t[0])return;let n=t[0];e({node:n,width:n.size.x,height:n.size.y})}})},{}),name:er.Sn.IMAGE_TO_DESIGN_ORACLE},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ig.B3)($.JT.IMAGE_TO_DESIGN_ORACLE)}}},{callback:()=>{p.zl.set(ih.bJ)},action:$.JT.WHITEBOARD_GENERATE_CONTENT,tags:[nP.$.AI],flags:["edit","whiteboard"],iconType:(0,r.jsx)(n8.I,{}),searchSynonyms:["create content","add content","generate content","create diagram","add diagram","generate diagram","create templates and diagrams","add templates and diagrams","generate templates and diagrams"]},oS({action:$.JT.SUMMARIZE_STICKIES,aiActionType:ip.hG.SUMMARIZE_STICKIES,actionLabel:(0,U.tx)("fullscreen_actions.summarize-stickies"),instructionLabel:(0,U.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,r.jsx)(ie.x,{})}),oS({action:$.JT.SORT_STICKIES_BY_TOPIC,aiActionType:ip.hG.SORT_STICKIES_BY_TOPIC,actionLabel:(0,U.tx)("fullscreen_actions.sort-stickies-by-topic"),instructionLabel:(0,U.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,r.jsx)(it.a,{})}),oS({action:$.JT.SORT_STICKIES_BY_COLOR,aiActionType:ip.hG.SORT_STICKIES_BY_COLOR,actionLabel:(0,U.tx)("fullscreen_actions.sort-stickies-by-color"),instructionLabel:(0,U.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,r.jsx)(it.a,{})}),oS({action:$.JT.SORT_STICKIES_BY_AUTHOR,aiActionType:ip.hG.SORT_STICKIES_BY_AUTHOR,actionLabel:(0,U.tx)("fullscreen_actions.sort-stickies-by-author"),instructionLabel:(0,U.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,r.jsx)(it.a,{})}),oS({action:$.JT.SORT_STICKIES_BY_STAMP_COUNT,aiActionType:ip.hG.SORT_STICKIES_BY_STAMP_COUNT,actionLabel:(0,U.tx)("fullscreen_actions.sort-stickies-by-stamp-count"),instructionLabel:(0,U.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,r.jsx)(it.a,{})}),oS({action:$.JT.SORT_STICKIES_BY_STAMP_TYPE,aiActionType:ip.hG.SORT_STICKIES_BY_STAMP_TYPE,actionLabel:(0,U.tx)("fullscreen_actions.sort-stickies-by-stamp-type"),instructionLabel:(0,U.tx)("figjam_ai.organize_stickies.make_selection_instruction"),icon:(0,r.jsx)(it.a,{})}),oS({action:$.JT.MIND_MAP_GENERATE_IDEAS,aiActionType:ip.hG.MIND_MAP_GENERATE_IDEAS,actionLabel:(0,U.tx)("fullscreen_actions.mind-map-generate-ideas"),instructionLabel:(0,U.tx)("figjam_ai.make_mindmap_ideas.make_selection_instruction"),icon:(0,r.jsx)(ii.Q,{}),searchSynonyms:["generate new mind map ideas","generate mind map ideas","generate ideas"]})];function oA(){let e=(0,f.PE)(),t=(0,nt.V)(),n=(0,ns.Vr)(),i=(0,Q.eH)(),s=(0,eI.sZ)();return(0,a.useMemo)(()=>oI.reduce((a,o)=>{for(let e of o.featureFlags||[])if(!(0,ef.kc)()[e])return a;if(o.action===$.JT.FIND_INSPIRATION){if(!i&&!t)return a;let e={...o};return n?.name&&!n?.isSlide&&(e.displayNode=(0,U.tx)("fullscreen_actions.quick_actions.find-inspiration-with-selection",{frameName:(0,r.jsx)(eZ.E,{color:"secondary",children:n?.name})})),a.push(e),a}return o.action===$.JT.EDIT_IMAGE&&(0,ir.d)(s)||(o.action===$.JT.GENERATE_IMAGE||o.action===$.JT.EDIT_IMAGE||o.action===$.JT.UPSCALE_IMAGE||o.action===$.JT.REMOVE_BACKGROUND)&&!e||e&&a.push(o),a},[]),[e,t,n,i,s])}var oN=n(627144),oM=n(874606),oR=n(642473),oP=n(404418);function oO(e){let{submenuItem:t,path:n}=e,{push:i,close:a}=(0,M.cq)();if(!t||!t.itemPath||t.submenu&&0===t.submenu.length)return null;let s=(0,ew.TW)(t);return(0,r.jsx)(a2.B.Item,{primaryAction:{onAction:()=>{if(t.submenu){i({name:er.Sn.PLUGIN_SUBMENU_ENTRY,module:(0,r.jsx)(oD,{item:t,path:n.concat(s)})},{shouldResetSearchQuery:!0});return}let e=!t.itemParameterArgs;t.callback&&(t.callback(),e&&a())},shortcuts:[{key:z.Uz.ENTER},{key:z.Uz.TAB}]},actionLabel:!1,children:(0,r.jsxs)("div",{className:K.s.flex.justifyBetween.wFull.$,children:[(0,r.jsx)("div",{className:K.s.ml28.$,children:s}),t.submenu&&(0,r.jsx)(eh.a,{})]})},s)}function oD(e){let[t,n]=a.useState(""),[i,s]=a.useState([]),o=(0,k.Bd)(),{item:l,path:d}=e;if(a.useEffect(()=>{l.submenu&&(s(l.submenu),n(""))},[l]),!l.submenu)return null;let c=(0,r.jsx)(a2.B,{resultCount:i.length,children:i.map(e=>(0,r.jsx)(oO,{submenuItem:e,path:d},e.extensionSearchString||""))}),u=e=>{n(e),l.submenu&&s(l.submenu.filter(t=>(0,ew.TW)(t).toLowerCase().includes(e.toLowerCase())))},m=d.join(" > ");return(0,r.jsxs)(es.n,{height:$.wC,canShrinkIfNeeded:o,children:[(0,r.jsx)(eo.vj,{searchQuery:t,onSearchChange:u,onClear:()=>{u("")},placeholder:m}),(0,r.jsx)(es.n.Body,{children:c})]})}var oL=n(581774),oF=n(62489),oB=n(858849),oU=n(393463),oV=n(136393),oH=n(748181),oz=n(528856),oG=n(464244),oK=(e=>(e.PERSONAL_DRAFT="PERSONAL_DRAFT",e.WORKSPACE_OR_PLAN_DISABLED="WORKSPACE_OR_PLAN_DISABLED",e))(oK||{});let oW=[],oq=new Set([tn.nT.Design,tn.nT.Sites,tn.nT.Whiteboard,tn.nT.Cooper,tn.nT.Slides]);var oX=n(730436);function oY({title:e,subTitle:t,icon:n,onClose:i,dataTestId:a}){return(0,r.jsx)("div",{"data-testid":a,className:K.s.colorBgBrandTertiary.p8.bRadius8.$,children:(0,r.jsxs)("div",{className:K.s.flex.gap8.$,children:[n,(0,r.jsxs)("div",{className:K.s.flex.flexColumn.flexGrow1.$,children:[(0,r.jsx)("span",{className:"banner--title--b-qQY",children:e}),(0,r.jsx)("span",{className:"banner--subtitle--svmtg",children:t})]}),i?(0,r.jsx)(rq.K,{onClick:i,"aria-label":(0,U.t)("qa.dismiss"),htmlAttributes:{"data-testid":"banner-close-icon"},children:(0,r.jsx)(oX.X,{style:{"--color-icon":"var(--color-icon-secondary)"}})}):null]})})}function oJ(){let e;let{reason:t,dismissKey:n}=function(){let e=(function(){let e=(0,tw.T5)("useAIDisabledReasons").unwrapOr(null),t=(0,f.PE)(),n=(0,X.q5)(),i=!!(0,ef.kc)().ff_wsai_toggle,r=(0,oz.unwrap)(n?.sharedContainerSetting),a=i?r?.aiSetting==="disabled":!e?.aiFeaturesEnabled,s=(0,eQ.E3)();if(t||!oq.has(s)||!(0,oG.$7)("useDisabledReasons"))return oW;let o=[];return!n||n.parentOrgId||n.teamId||o.push("PERSONAL_DRAFT"),a&&o.push("WORKSPACE_OR_PLAN_DISABLED"),o})().sort((e,t)=>oZ(e)-oZ(t)),t={seen_no_ai_org_disabled:(0,oH.f)("seen_no_ai_org_disabled")};return(0,a.useMemo)(()=>{for(let n of e){let e=function(e){switch(e){case oK.WORKSPACE_OR_PLAN_DISABLED:return"seen_no_ai_org_disabled";case oK.PERSONAL_DRAFT:case null:return null;default:(0,F.xb)(e)}}(n);if(!e)return{reason:n};if(!t[e])return{reason:n,dismissKey:e}}return{reason:null}},[e,t])}(),i=(0,s.wA)();if((0,oU.sL)())return null;let o=(0,U.t)("qa.no_ai.title.not_available_here");switch(t){case null:return null;case oK.PERSONAL_DRAFT:o=(0,U.t)("qa.no_ai.title.personal_draft"),e=(0,U.t)("qa.no_ai.subtitle.personal_draft");break;case oK.WORKSPACE_OR_PLAN_DISABLED:o=(0,U.t)("qa.no_ai.title.org_disabled"),e=(0,U.t)("qa.no_ai.subtitle.org_disabled");break;default:(0,F.xb)(t)}return(0,r.jsx)("div",{className:K.s.mx8.mb8.$,children:(0,r.jsx)(oY,{title:o,subTitle:e,icon:(0,r.jsx)(tI.X,{}),dataTestId:"no-ai-banner",onClose:n?()=>i(oV.b({[n]:!0})):void 0})})}function oZ(e){switch(e){case oK.PERSONAL_DRAFT:return 1;case oK.WORKSPACE_OR_PLAN_DISABLED:return 2;case null:return 1e3;default:(0,F.xb)(e)}}var oQ=n(445062),o$=n(999153),o0=n(863412),o1=n(199610),o2=n(62606),o5=n(345782);function o4(e){let{extension:t,publishedExtension:n,canRequest:i,canRun:r}=e,a=(0,eI.sZ)(),s=(0,o5.RW)(),o=(0,o2.a)(a?.id,t.plugin_id,s.loaded?s.data?.workspaceId:void 0);if((0,eP.bH)(t)&&a&&a.name)return{text:a.name};if((0,eP.ZQ)(t)&&n&&(0,o1.AC)(n))return{text:(0,U.t)("qa.extensions.in_review"),variant:oL.x.BRAND};if((0,eP.ZQ)(t))return{text:(0,U.t)("qa.extensions.development")};if(r);else if(o)return{text:(0,U.t)("qa.extensions.approval_pending")};else if(i)return{text:(0,U.t)("qa.extensions.needs_approval")};return null}function o3({text:e,variant:t}){return(0,r.jsx)(oL.E,{variant:t,children:(0,r.jsx)(o0.G,{text:e})})}function o6(e){let{searchQuery:t,fullscreenMenuAction:n}=e,i="";n.searchSynonyms&&(i+=`Synonyms: ${n.searchSynonyms.join(", ")}`);let{details:a,score:s}=(0,nb.ou)((0,eF.x0)()).debugData(t,(0,na._g)(n).searchItem),o=`Score:${s.toFixed(2)}`;return(0,r.jsx)("div",{className:K.s.ml8.colorTextSecondary.noWrap.$,"data-tooltip":[a,i].filter(Boolean).join("\n"),"data-tooltip-type":eO.Ib.TEXT,"data-tooltip-max-width":300,"data-testid":"search-debug-info",children:o})}var o7=n(176346),o9=n(864727),o8=n(510080);let le=e=>(0,eE.Zj)(e)&&!e.hideCheckForQuickCommand,lt=()=>{};function ln({item:e,searchQuery:t,createCommonMetrics:n}){let{push:i}=(0,M.cq)(),{addFrecencyUsage:o}=(0,eF.fJ)(),d=(0,eE.Dz)(e),c=(0,s.d4)(e=>e.mirror.appModel),u=(0,s.wA)(),{close:m}=(0,M.cq)(),p=(0,eA.J2)((0,ej.UK)().showQuickCommandRankDebug),h=(0,j.V2)(),f=(0,eS.p8)("keyboardShortcuts"),g=(0,a.useCallback)(()=>{m()},[m]),x=(0,ex.A)(g,300);(0,a.useEffect)(()=>()=>{x.cancel()},[x]);let _=(0,o$.r7)(),y=a.useRef(!1),v=(0,a.useCallback)(i=>{let r=i?(0,oQ.OZ)(i):"",a={...n(),shortcutText:r};(0,eV.kp)(a),_(e),o(e,t)},[o,_,n,e,t]),C=(0,a.useCallback)((e,n)=>{if(y.current)return;y.current=!0;let a=n?.key===z.Uz.TAB?"tab":"enter";if(x.isPending()&&x.cancel(),e.disabled)return;if("plugins-menu-item"===e.name&&!h){g(),eM.R0.instance.handleUpgrade(eC.Q7.RUN_PLUGIN);return}let s=!!e.itemParameterArgs,o=(0,ek.YT)(e);if(!(s||o||"enter"===a))return;let d=null;if(e.quickAction){let t={};if(e.quickAction.retainSearchQuery&&(t.shouldResetSearchQuery=!1),e.quickAction.beforeModuleOpen){let t=(0,b._V)();e.quickAction.beforeModuleOpen(t)}i(e.quickAction.module,t),v(n);return}if(s)switch(a){case"enter":if(e.runPluginArgs&&!t){let t={...e.runPluginArgs,...e.itemParameterArgs?.command&&{command:e.itemParameterArgs.command}};d=async()=>{await eM.R0.instance.enqueue({mode:"run-forever",runPluginArgs:t})}}else if(e.parametersRequired){let t=e.itemParameterArgs;i({name:er.Sn.PLUGIN_PARAMETER_ENTRY,module:(0,r.jsx)(oP.r,{command:t.command,displayName:t.displayName,initialParameterValues:e.runPluginArgs?.parameterValues,onExitParameterEntry:B.lQ,parameterOnly:t.parameterOnly,parameters:t.parameters,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,recentlyUsedCommandName:(0,eU.EG)(e),triggeredFrom:"quick-actions"})}),v(n);return}break;case"tab":if(e.itemParameterArgs){let t=e.itemParameterArgs;i({name:er.Sn.PLUGIN_PARAMETER_ENTRY,module:(0,r.jsx)(oP.r,{command:t.command,displayName:t.displayName,initialParameterValues:e.runPluginArgs?.parameterValues,onExitParameterEntry:B.lQ,parameterOnly:t.parameterOnly,parameters:t.parameters,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,recentlyUsedCommandName:(0,eU.EG)(e),triggeredFrom:"quick-actions"})}),v(n);return}break;default:(0,F.xb)(a)}if(o){i({name:er.Sn.PLUGIN_SUBMENU_ENTRY,module:(0,r.jsx)(oD,{item:e,path:[(0,ew.TW)(e)]})}),v(n);return}e.callback&&!d?d=async()=>{e.callback&&await e.callback((0,eE.Dz)(e),e.args,u)}:e.action&&(d=async()=>{if(!e.action)return;let t=lt();if(t)return await t();eT.VU.get(e.action,"quick-actions",e.args)()}),v(n),le(e)&&!(0,eg.PN)()?x():e.keepMenuOpen||g(),d?d().catch(t=>{(0,e_.$D)(l.e.AI_ASSISTANT,t,{extra:{item:e}})}):(0,e_.$D)(l.e.AI_ASSISTANT,Error("No valid action triggered from quick actions"),{extra:{item:e}})},[y,g,x,u,i,t,v,h]),E=e.shortcutText||(0,eL.c1)(f,d),w="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,T=(0,ek.YT)(e),I=w||T,A=(0,j.cW)(),N=(0,j.ZT)();function R(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=(0,eN.DM)({idToSearch:e.pluginId,localExtensionsByFileId:void 0,publishedExtensions:{...A,...N}})),t&&!(0,eP.ZQ)(t))?(0,r.jsx)(eD.V,{className:K.s.colorIcon.w20.h20.m2.bRadius4.$,plugin:t,role:"presentation"}):(0,r.jsx)(eb.B,{className:K.s.colorIcon.w20.h20.bRadius4.$,svg:o8.A,ariaLabel:`${e.name} icon`,autosize:!0})}if(e.iconType&&"string"==typeof e.iconType){var t;return"external_link"===(t=e.iconType)?(0,r.jsx)(eb.B,{svg:o9.A,className:K.s.colorIcon.$}):"import"===t?(0,r.jsx)(ec.R,{}):"plus"===t?(0,r.jsx)(eu.$,{}):"widget"===t?(0,r.jsx)(em.C,{}):void 0}if(e.iconType&&"string"!=typeof e.iconType)return e.iconType}let P=(()=>{if(e.itemParameterArgs&&e.runPluginArgs&&!t)return(0,r.jsx)(eB._,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs});if(e.itemPath){let t=e.itemPath;return(0,r.jsx)(eB.h,{itemPath:t})}return e.displayNode?(0,r.jsx)(r.Fragment,{children:e.displayNode}):(0,r.jsx)(r.Fragment,{children:(0,eU.EG)(e)})})(),O=le(e),D=O?(0,eE.WJ)(c,e):void 0,L=(0,S.h)("plugin"),V=(0,S.h)("widget"),H=(0,eI.sZ)(),G=()=>{if("run-local-plugin"===e.menuActionType||"insert-local-widget"===e.menuActionType)return(0,r.jsx)("div",{style:ev.sx.add({maxWidth:"110px"}).$,children:(0,r.jsx)(o3,{text:(0,U.t)("fullscreen_actions.development")})});if(H&&(L.some(t=>t.plugin_id===e.pluginId)||V.some(t=>t.plugin_id===e.pluginId)))return(0,r.jsx)("div",{style:ev.sx.add({maxWidth:"110px"}).$,children:(0,r.jsx)(o3,{text:H.name})});if(p)return(0,r.jsx)(o6,{searchQuery:t,fullscreenMenuAction:e});if(e.isRepairCommand&&(0,ef.kc)().internal_only_debug_tools)return(0,r.jsx)(oL.E,{children:"REPAIR"});if(e.action===$.JT.FIRST_DRAFT&&e.disabled)return(0,r.jsx)("div",{"data-tooltip":(0,U.t)("qa.unavailable"),"data-tooltip-type":eO.Ib.TEXT,style:{"--color-icon":"var(--color-icon-disabled)"},children:(0,r.jsx)(ep.M,{})});if((0,ef.kc)().expr_ai_image_tools_new_badge&&(e.action===$.JT.EXPAND_IMAGE||e.action===$.JT.SEPARATE_OBJECT||e.action===$.JT.REMOVE_OBJECT))return(0,r.jsx)(oL.E,{variant:oL.x.UI3,children:(0,r.jsx)("p",{children:(0,U.t)("fullscreen_actions.new")})})},W=(0,eV.BB)(e),q=W&&(0,sT.OR)(e)||null,X=(0,eV.Z7)(e),Y=a.useMemo(()=>q?(0,r.jsx)(sT.yi,{helpUrlVariant:q},"ai"):X?(0,r.jsx)(oL.E,{children:(0,U.tx)("general.beta")},"beta"):null,[q,X]),J=a.useMemo(()=>E?(0,r.jsx)(ey.S,{shortcut:E}):I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:K.s.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.mr8.$,"aria-hidden":!0,id:"tab-hint",children:(0,U.tx)("whiteboard.ai_modal.hint_tab")}),(0,r.jsx)(eb.B,{svg:o7.A,className:K.s.colorIcon.$,"aria-describedby":"tab-hint"})]}):null,[E,I]),Z="go-to-page"===e.name?`go-to-page-${e.args?.pageName}`:e.name||e.action;(0,a.useEffect)(()=>{e.onRender&&e.onRender(!!t)},[e,t]);let Q=(0,k.Bd)(),ee=(0,k.uJ)(),[et,en]=a.useState(!1),ei=a.useMemo(()=>Q&&et&&q?{onAction:()=>{(0,sT.mf)(q)}}:{text:"Perform",shortcuts:ee?[{key:z.Uz.ENTER}]:[{key:z.Uz.ENTER},{key:z.Uz.TAB}],onAction:({shortcut:t})=>C(e,t)},[q,Q,et,ee,e,C]),ea=!!e.runPluginArgs,es=a.useMemo(()=>w?ea?(0,U.t)("qa.secondary_action.plugin.adjust_parameters"):(0,U.t)("qa.secondary_action.plugin.set_parameters"):T?(0,U.t)("qa.secondary_action.plugin.submenu"):void 0,[w,T,ea]),eo=I&&ee;return Q&&(W||eo)?(0,r.jsx)(a2.B.Item,{primaryAction:ei,actionLabel:!1,disabled:e.disabled,recordingKey:Z,scrollMargin:"32px 0 16px 0",shouldDisableFocusOnHover:ee,type:"container",children:(t,n,i)=>(0,r.jsx)(oB._,{badge:G(),dataTestId:Z,disabled:e.disabled,displayNode:P,icon:R(e),label:(0,eU.EG)(e),onAccessoryFauxFocusChanged:en,onPrimaryButtonClick:n,onPrimaryButtonFocus:i,primaryButtonRef:t,shouldMakeContentInert:ee,type:"container",children:(0,r.jsx)(oB.k,{activeContent:(t,n)=>W?(0,r.jsx)(sT.yi,{ref:t,helpUrlVariant:(0,sT.OR)(e),isFocused:n},"ai"):eo?(0,r.jsx)("button",{"aria-label":es,ref:t,className:K.s.bgTransparent.h24.$,onClick:()=>{C(e,{key:z.Uz.TAB})},children:(0,r.jsx)(oF.c,{active:n,borderWidth:1,children:(0,r.jsx)(eh.a,{})})}):void 0,inactiveContent:E&&(0,r.jsx)(ey.S,{shortcut:E})||null})})}):(0,r.jsx)(a2.B.Item,{primaryAction:ei,actionLabel:!1,disabled:Q?e.disabled:void 0,recordingKey:Z,scrollMargin:"32px 0 16px 0",type:Q&&O?"checkbox":"button",isChecked:!!D,shouldDisableFocusOnHover:ee,children:(0,r.jsx)(oB._,{badge:G(),checked:D,dataTestId:Z,disabled:e.disabled,displayNode:P,icon:R(e),label:(0,eU.EG)(e),shouldMakeContentInert:ee,children:(0,r.jsx)(oB.k,{activeContent:Y,inactiveContent:J})})})}function li({setActiveTab:e}){let t=(0,O.Ev)(),n=(0,p.md)(I.Lk),i=(0,p.md)(I.dd),o=(0,s.d4)(eR.l),l=(0,p.md)(I.Rt),d=(0,a.useRef)(l),c=(0,p.md)(I.Q8),u=(0,a.useDeferredValue)(c);(0,a.useEffect)(()=>{d.current=l},[l]);let h=function(){let e=(0,nF.F)(),t=oA(),n=function(){let e=(0,s.d4)(e=>e.mirror.appModel.isReadOnly),t=(0,oM.c4)(),n=function(){let e=(0,tk.wo)(),t=(0,j.cW)(),n=(0,j.ZT)(),i=(0,eQ.E3)(),r=[],a=[];return e.forEach(e=>{if(!e.extensionInfo)return;let{extensionType:i,extensionId:s}=e.extensionInfo,o=(0,eN.DM)({idToSearch:s,localExtensionsByFileId:{},publishedExtensions:{...t,...n}});o&&("plugin"===i?r.push(o):a.push(o))}),{plugins:(0,eN.AG)(i,r),widgets:(0,eN.AG)(i,a)}}();return(0,a.useMemo)(()=>(0,oN.M)({isReadOnly:e,extensionMenuProps:{...t,recentlyUsedPlugins:[...t.recentlyUsedPlugins??[],...n.plugins??[]],recentlyUsedWidgets:[...t.recentlyUsedWidgets??[],...n.widgets??[]],unboundedRecents:!0},includeDisabled:!0,filters:{showUnpurchased:!1}}),[e,t,n])}(),i=function(){let e=(0,eS.p8)("pagesList"),t=(0,nz.bG)({pagesList:e,isComparingChanges:!1});return(0,a.useMemo)(()=>(0,ef.kc)().qa_go_to_page?e.map(e=>({name:"go-to-page",args:{pageName:e.name},callback:()=>{t(e.nodeId)},iconType:(0,r.jsx)(nl,{}),displayNode:(0,r.jsx)(r.Fragment,{children:(0,U.tx)("fullscreen_actions.quick_actions.go-to-page",{pageName:(0,r.jsx)(eZ.E,{color:"secondary",children:e.name})})})})):[],[e,t])}(),o=function(){let e=(0,eQ.lg)(),t=(0,nx.V)(),n=(0,nx.J)(),i=(0,nD.Fk)(e=>{let t=e.getDirectlySelectedNodes();return{length:t.length,firstNodeName:t?.[0]?.name||""}});return a.useMemo(()=>e===nU._Y.DESIGN?t&&0!==i.length?[{...nV.Bc,displayNode:i.length>1?(0,U.tx)("fullscreen_actions.quick_actions.selection"):(0,U.tx)("fullscreen_actions.quick_actions.send-frame-to-figma-make",{frameName:(0,r.jsx)(eZ.E,{color:"secondary",children:i.firstNodeName})})}]:[]:e===nU._Y.WHITEBOARD&&0!==i.length&&n?[{...nV.rF,displayNode:(0,r.jsx)(nH,{children:(0,U.tx)("fullscreen_actions.quick_actions.create-a-prototype-with-figma-make")})}]:[],[e,i,t,n])}(),l=function(){let e=(0,nO.Zr)("send-to-buzz-from-design"),t=(0,s.d4)(X.tB),n=(0,s.d4)(tt.vx),i=(0,nD.Fk)(e=>e.getDirectlySelectedNodes().length>0),o=a.useMemo(()=>({tags:[nP.$.BETA],iconType:(0,r.jsx)(nM.h,{}),searchSynonyms:["send to buzz","export to buzz","copy to buzz","create buzz file","figma buzz","buzz"],flags:["edit","design"],callback:(e,i,r)=>{(0,nR.rN)(r,(0,nR.VY)({openFile:t,fileVersion:n}),nL.f6.SEND_TO_BUZZ_FROM_DESIGN_QA_V2_MENU)}}),[n,t]);return a.useMemo(()=>{if(!m.Mpt||!e||!t||!n)return[];let a=i?m.Mpt.getSelectedNodesToSend():m.Mpt.getTopLevelFramesToSend();if(0===a.length)return[];if(1===a.length){let e=(0,e$.UN)().get(a[0]);if(e?.isTopLevelFrame())return[{action:"send-to-buzz-from-design",...o,displayNode:(0,U.tx)("buzz.send_from_design.send_node_to_figma_buzz",{nodeName:(0,r.jsx)("span",{className:"x1n0bwc9",children:e.name})})}]}return i?[{action:"send-selection-to-buzz-from-design",...o,displayNode:(0,U.tx)("buzz.send_from_design.send_selection_to_figma_buzz",{numSelectedNodes:a.length})}]:[{action:"send-to-buzz-from-design",...o,displayNode:(0,U.tx)("buzz.send_from_design.send_frames_to_figma_buzz",{numFrames:a.length})}]},[n,e,t,i,o])}();return(0,a.useMemo)(()=>[...e,...o,...l,...n,{name:"wand-menu",callback:B.lQ,children:t},...i],[e,t,n,i,o,l])}(),g=ez(),x=nN(g,h),_=function(e,t,n,i){let o=(0,tk.wo)(),l=(0,eG.WI)(o.map(n=>{let i=t.getItem(e,n.displayName);return i&&n.runPluginArgs&&(i.runPluginArgs=n.runPluginArgs),i})).slice(0,3),{items:d}=function(e,t,n){let i=(0,f.PE)(),r=(0,nn.ZC)(i),o=function(e,t,n){let i=np(),r=t.map(e),o=function(){let e=(0,eQ.m0)(),t=(0,ni.e)(),n=X.q5()?.canEdit,i=(0,f.PE)();return t?"VARIABLES_TABLE":e?"DEV":!1===n?"DESIGN_VIEWER":n&&i?"DESIGN_EDITOR_AI":n&&!i?"DESIGN_EDITOR_NO_AI":"NONE"}(),l=function(e,t){let n=function(){let e=(0,s.d4)(e=>e.mirror?.appModel),t=np(),{frecencyByAction:n,frecencyByQuery:i}=(0,eF.fJ)(),r=(0,ng.Tv)(),o=(0,nf.C)(),l=(0,nx.V)(),d=(0,nx.J)();return(0,a.useCallback)((a,s)=>{if(s)return[];let c=a.map(e),u=[],p=(0,nb.ou)({actions:n}),h=r.filter(e=>{let t=(0,e$.UN)().get(e);return t?.isSlide}).length>0;if(0===r.length||h)return u=[$.JT.GENERATE_IMAGE,$.JT.REMOVE_BACKGROUND,$.JT.UPSCALE_IMAGE,$.JT.EDIT_IMAGE,$.JT.AUTO_RENAME_LAYERS,$.JT.CONTENT_FILL,$.JT.FIND_INSPIRATION,$.JT.FIRST_DRAFT,$.JT.FIRST_DRAFT_FINE_TUNE,$.JT.MAGIC_LINK,$.JT.MAKE_EDITS,$.JT.SLIDES_GENERATE_SPEAKER_NOTES,$.JT.SLIDES_REWRITE_TEXT,$.JT.REWRITE_TEXT,$.JT.SHORTEN_TEXT,$.JT.TRANSLATE_TEXT,$.JT.WHITEBOARD_GENERATE_CONTENT,$.JT.SUMMARIZE_STICKIES,$.JT.SORT_STICKIES_BY_TOPIC,$.JT.MIND_MAP_GENERATE_IDEAS,$.JT.MERMAID_TO_DIAGRAM],o&&u.push($.OZ),[...u].map(e=>t(c,e,!0)).filter(e=>!!e).sort((e,t)=>p.sort("",(0,na._g)(e).searchItem,(0,na._g)(t).searchItem));{let r,a,s=0;if(m.ruz){let e=m.ruz.getNodeImagePairsForEdit();e.length>1?s=1:1===e.length?s=2:m.ruz.getGenerateImageTarget()&&(s=3)}l&&u.push($.i0),d&&u.push($.Ax),u.push($.JT.CONTENT_FILL,$.JT.TRANSLATE_TEXT,$.JT.REWRITE_TEXT,$.JT.SHORTEN_TEXT,$.JT.SLIDES_GENERATE_SPEAKER_NOTES,$.JT.SLIDES_REWRITE_TEXT,$.JT.GENERATE_IMAGE,$.JT.REMOVE_BACKGROUND,$.JT.EDIT_IMAGE,$.JT.UPSCALE_IMAGE,$.JT.EXPAND_IMAGE,$.JT.REMOVE_OBJECT,$.JT.SEPARATE_OBJECT,$.JT.FIRST_DRAFT_MAKE_CHANGES,$.JT.AUTO_RENAME_LAYERS,$.JT.MAGIC_LINK,$.JT.FIND_INSPIRATION,$.JT.FIRST_DRAFT,$.JT.MAKE_EDITS,$.JT.FIRST_DRAFT_FINE_TUNE,$.JT.SUMMARIZE_STICKIES,$.JT.SORT_STICKIES_BY_TOPIC,$.JT.MIND_MAP_GENERATE_IDEAS),o&&u.push($.OZ);let h=[...u].map(e=>t(c,e)).filter(e=>!!e).filter(e=>nw(s,e)),f=h.sort((e,t)=>(function(e,t,n){if(1===e){if(nv.has(t.action??"")&&!nv.has(n.action??""))return -1;if(!nv.has(t.action??"")&&nv.has(n.action??""))return 1}else if(2===e){if(nC.has(t.action??"")&&!nC.has(n.action??""))return -1;if(!nC.has(t.action??"")&&nC.has(n.action??""))return 1}if(3===e||2===e){if(t.action===$.JT.GENERATE_IMAGE)return -1;if(n.action===$.JT.GENERATE_IMAGE)return 1}})(s,e,t)??p.sort("",(0,na._g)(e).searchItem,(0,na._g)(t).searchItem)),g=Object.values(c).filter(t=>(0,eL.Yh)(e,t.name||t.action||"")&&!h.includes(t)&&!t.searchOnly&&!(t.featureFlags&&t.featureFlags.includes("internal_only_debug_tools"))&&(0,ny.y)("",(0,n_.n)(t),{actions:n,queries:i})>0).sort((e,t)=>p.sort("",(0,na._g)(e).searchItem,(0,na._g)(t).searchItem)).filter(e=>nw(s,e));return g.length<4?(r=8-g.length,a=g.length):f.length<4?(r=f.length,a=8-f.length):(r=4,a=4),[...f.slice(0,r),...g.slice(0,a)]}},[e,t,n,i,r,o,l,d])}(),[i]=(0,a.useState)(()=>n(e,""));return i}(t,0),d=function(e,t){let n=!nA();return(0,a.useCallback)(()=>{if(n){let e=[];for(let n of t){if(!n.action||n.disabled)continue;let t=nk.get(n.action);t&&e.push([n.action,t])}return e}let i=[];for(let n of((0,eL.Yh)(e,$.JT.FIRST_DRAFT_MAKE_CHANGES)&&i.push([$.JT.FIRST_DRAFT_MAKE_CHANGES,no.b.SUGGESTIONS]),t))n.action&&!n.disabled&&i.push([n.action,no.b.SUGGESTIONS]);return i},[e,t,n])}(e,l),c=function(){let e=(0,ns.I9)(),t=(0,eS.p8)("activeCanvasEditModeType"),n=(0,nf.C)();return(0,a.useCallback)(()=>{if(!e?.length){let e=[["canvas-search-replace",no.b.SUGGESTIONS],["select-all",no.b.SUGGESTIONS],["undo",no.b.SUGGESTIONS],["toggle-rulers",no.b.COMMON_SETTINGS],["toggle-snapping-to-pixels",no.b.COMMON_SETTINGS],["toggle-sidebar",no.b.COMMON_SETTINGS],["toggle-ui",no.b.COMMON_SETTINGS],["toggle-multiplayer-cursors",no.b.COMMON_SETTINGS],["show-nudge-amount-picker",no.b.COMMON_SETTINGS],["open-shortcuts",no.b.COMMON_SETTINGS],["open-account-settings",no.b.COMMON_SETTINGS]];return n&&e.push(["copy-to-figma-slides",no.b.SUGGESTIONS]),e}if(1===e.length){let i=e[0],r=[["add-selection-ready-status",no.b.SUGGESTIONS],["republish-selected-components",no.b.SUGGESTIONS],["publish-changes-to-library",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS]],a=[["select-matching",no.b.SUGGESTIONS],["outline-stroke",no.b.SUGGESTIONS],["mask-selection",no.b.SUGGESTIONS],["flatten-selection",no.b.SUGGESTIONS],["unlock-all",no.b.SUGGESTIONS],["convert-to-raster",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS]];if(t===v.m1T.VECTOR)return[["flip-horizontal",no.b.SUGGESTIONS],["flip-vertical",no.b.SUGGESTIONS],["align-horizontal-center",no.b.SUGGESTIONS],["align-vertical-center",no.b.SUGGESTIONS]];switch(i.type){case"SYMBOL":return r;case"FRAME":if(i.isStateGroup)return r;if(i.isGroup)return a;let s=[["add-selection-ready-status",no.b.SUGGESTIONS],["select-matching",no.b.SUGGESTIONS],["stack-selection",no.b.SUGGESTIONS],["run-multi-stack-auto-layout",no.b.SUGGESTIONS],["copy-properties",no.b.SUGGESTIONS],["unlock-all",no.b.SUGGESTIONS],["convert-to-raster",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS],["replace-selected-frame-with-section",no.b.SUGGESTIONS]];return n&&s.push(["copy-to-figma-slides",no.b.SUGGESTIONS]),s;case"INSTANCE":return[["select-matching",no.b.SUGGESTIONS],["detach-instance",no.b.SUGGESTIONS],["reset-symbol",no.b.SUGGESTIONS],["convert-to-raster",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS]];case"SLICE":return[["export-selected-exportables",no.b.SUGGESTIONS],["convert-to-raster",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS]];case"WIDGET":return[["select-all-widgets",no.b.SUGGESTIONS],["convert-to-raster",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS]];case"SECTION":return[["add-selection-ready-status",no.b.SUGGESTIONS],["select-matching",no.b.SUGGESTIONS],["unlock-all",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS],["replace-selected-section-with-frame",no.b.SUGGESTIONS]];case"GROUP":return a;case"ELLIPSE":case"BOOLEAN_OPERATION":case"LINE":case"REGULAR_POLYGON":case"RECTANGLE":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return[["select-matching",no.b.SUGGESTIONS],["flip-horizontal",no.b.SUGGESTIONS],["mask-selection",no.b.SUGGESTIONS],["flatten-selection",no.b.SUGGESTIONS],["copy-properties",no.b.SUGGESTIONS],["convert-to-raster",no.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",no.b.SUGGESTIONS]];case"TEXT":return[["text-edit-hyperlink",no.b.SUGGESTIONS],["text-toggle-strikethrough",no.b.SUGGESTIONS],["copy-properties",no.b.SUGGESTIONS],["paste-properties",no.b.SUGGESTIONS],["text-font-size-increase",no.b.SUGGESTIONS],["text-font-size-decrease",no.b.SUGGESTIONS],["text-bold-increase",no.b.SUGGESTIONS],["text-bold-decrease",no.b.SUGGESTIONS]]}}let i=[["select-matching",no.b.SUGGESTIONS],["frame-selection",no.b.SUGGESTIONS],["create-symbol",no.b.SUGGESTIONS],["create-multiple-symbols",no.b.SUGGESTIONS],["toggle-locked-for-selected-nodes",no.b.SUGGESTIONS],["export-selected-exportables",no.b.SUGGESTIONS],["align-horizontal-center",no.b.SUGGESTIONS],["align-vertical-center",no.b.SUGGESTIONS]];return n&&i.push(["copy-to-figma-slides",no.b.SUGGESTIONS]),i},[e,n,t])}(),u=(0,a.useCallback)((e,t)=>{let n=i(r,e,!0);if(n)return{...n,category:t}},[i,r]),p=n.map(e=>({...e,category:no.b.RECENTS})).filter(t=>!(0,na.oG)(e,t)),h=(0,a.useCallback)(e=>{let t=e.map(([e,t])=>u(e,t));return eJ()((0,eG.WI)([...p,...t]),eU.EG)},[p,u]),g=nA(),x=(0,a.useMemo)(()=>{if(g&&!["DESIGN_EDITOR_NO_AI","DESIGN_EDITOR_AI","DEV","VARIABLES_TABLE"].includes(o)){var e;let t=(e=no.b.SUGGESTIONS,l.map(t=>({...t,category:e})));return eJ()((0,eG.WI)([...p,...t]),eU.EG)}switch(o){case"DESIGN_EDITOR_AI":return h(d());case"DEV":return h(nT);case"VARIABLES_TABLE":return h(nj);case"DESIGN_VIEWER":return h(nS);case"DESIGN_EDITOR_NO_AI":return h(c());case"NONE":return[];default:(0,F.xb)(o)}},[g,o,l,p,h,d,c]);return{suggestionMode:o,items:x}}(e,t,n),[l,d]=(0,a.useState)(o);return(0,a.useEffect)(()=>{(i!==r||0===l.items.length&&o.items.length>0||o.suggestionMode!==l.suggestionMode)&&d(o)},[i,r,l.items.length,l.suggestionMode,o]),l}(e,t,l),c=""!==n,u=(0,a.useMemo)(()=>""===n?[]:t.search(e,n).slice(0,25),[e,t,n]),h=function(e,t){let n=(0,eQ.my)()===tn.nT.Design,i=(0,X.q5)(),o=(0,nt.V)(),l=(0,ne.s)(),d=!!(0,ef.kc)().prt_legacy_v3,[c,u]=(0,p.fp)(tC),m=(0,s.d4)(Y.Eh),h=(0,Q.eH)(),f=(0,tw.T5)("useSearchFallbacks").unwrapOr(null),g=f?.name||i?.name;return(0,a.useMemo)(()=>""!==e?[{name:"ai-chat-deprecated-query",args:{searchQuery:e},callback:()=>{},displayNode:(0,U.tx)("fullscreen_actions.assistant-chat-query",{query:(0,r.jsx)(eZ.E,{color:"secondary",children:e})}),iconType:(0,r.jsx)(eK.C,{}),quickAction:{module:{module:(0,r.jsx)(t0,{}),name:er.Sn.AI_CHAT_DEPRECATED},beforeModuleOpen:e=>{p.zl.set(tC,{status:tv.Idle,messages:[]}),tE(e.searchQuery,c.messages,u,t_)}},disabled:!d},{name:"find-assets-and-community-matching",args:{searchQuery:e},callback:()=>{},displayNode:h?(0,U.tx)("fullscreen_actions.quick_actions.search-at-plan-file-and-community",{searchQuery:(0,r.jsx)(eZ.E,{color:"secondary",children:(0,U.tx)("fullscreen_actions.quick_actions.quoted-query",{searchQuery:e})}),planFileName:g}):o?(0,U.tx)("fullscreen_actions.quick_actions.find-components-matching",{searchQuery:(0,r.jsx)(eZ.E,{color:"secondary",children:e})}):(0,U.tx)("fullscreen_actions.quick_actions.find-assets-matching",{searchQuery:(0,r.jsx)(eZ.E,{color:"secondary",children:e})}),iconType:h||o?(0,r.jsx)(eW.A,{}):(0,r.jsx)(eq.P,{}),quickAction:{module:{module:h?(0,r.jsx)(t9.z6,{}):(0,r.jsx)(t8.B,{}),name:er.Sn.ASSETS_TAB_DETAIL_VIEW},beforeModuleOpen:t=>{(0,en.ES)({type:"input-text",query:t.searchQuery,assetTypeOption:{type:J.IS.ALL},isKnownLibrary:l}),i?.key&&h&&o&&(0,W.Hl)({type:"input-text",value:e,file_key:i.key},W.G4.ACTIONS_LIST,void 0,void 0,void 0,!1)},retainSearchQuery:!0},disabled:!n||!i?.canEdit},{name:"find-extensions-matching",args:{searchQuery:e},displayNode:h?(0,U.tx)("fullscreen_actions.quick_actions.search-plugins-widgets",{searchQuery:(0,r.jsx)(eZ.E,{color:"secondary",children:(0,U.tx)("fullscreen_actions.quick_actions.quoted-query",{searchQuery:e})})}):(0,U.tx)("fullscreen_actions.quick_actions.find-extensions-matching",{searchQuery:(0,r.jsx)(eZ.E,{color:"secondary",children:e})}),iconType:(0,r.jsx)(eX.x,{}),callback:()=>{t.setActiveTab(er.Jc.EXTENSIONS)},keepMenuOpen:!0,disabled:!n||!m}].filter(e=>!e.disabled):[],[e,o,n,i?.canEdit,i?.key,l,t,d,c,u,m,h,g])}(n,i);return c?eJ()([...u.slice(0,4),...h,...u.slice(4)],eU.EG):d}(g,x,u,{setActiveTab:e}),y=(0,oR.X)(_),b=_.length,C=function(e){let t=nm()(nc()(e,e=>e.category),(e,t)=>({category:Object.values(no.b).find(e=>t===e)||null,items:e})).sort((e,t)=>nh(e.category)-nh(t.category)),n=[],i=0;for(let{category:e,items:r}of t)n.push({category:e,items:r,globalIdxOfFirstItem:i}),i+=r.length;return n}(_);(0,ed.iC)({activeTab:er.Jc.ALL,query:c,resultsCount:b}),(0,a.useEffect)(()=>{n===er.Jc.ALL&&i&&t({quickActionsSessionId:i,quickActionsQueryId:d.current,searchQuery:u,numSearchResults:b,currentSelection:o,module:n,moduleFilters:null,qaVersion:R.$L,searchQueryResults:y})},[t,n,i,u,b,o,y]);let{createMetrics:E}=(0,eV.Sk)();return(0,r.jsxs)(a2.B,{primary:!0,resultCount:b,children:[(0,r.jsx)(oJ,{}),C.map(({category:e,items:t,globalIdxOfFirstItem:n})=>null!==e&&t.length>0&&C.length>1?(0,r.jsx)(a2.B.Section,{header:function(e){switch(e){case no.b.RECENTS:return(0,U.t)("qa.category.recents");case no.b.DESIGN_TOOLS:return(0,U.t)("qa.category.design_tools");case no.b.RIFFING_AND_WRITING:return(0,U.t)("qa.category.riffing_and_writing");case no.b.IMAGE_EDITING:return(0,U.t)("qa.category.image_editing");case no.b.COLLABORATION_TOOLS:return(0,U.t)("qa.category.collaboration_tools");case no.b.HANDOFF_TOOLS:return(0,U.t)("qa.category.handoff_tools");case no.b.VIEWER_TOOLS:return(0,U.t)("qa.category.viewer_tools");case no.b.SUGGESTIONS:return(0,U.t)("qa.category.suggestions");case no.b.COMMON_SETTINGS:return(0,U.t)("qa.category.common_settings");case no.b.ORGANIZE:return(0,U.t)("qa.category.organize");case no.b.TEMPLATES_AND_DIAGRAMS:return(0,U.t)("qa.category.templates_and_diagrams");default:return(0,F.xb)(e)}}(e),children:t.map((e,t)=>(0,r.jsx)(ln,{item:e,searchQuery:u,createCommonMetrics:()=>({numSearchResults:b,qaVersion:R.$L,searchQuery:u,searchPosition:n+t,item:e,moduleFilters:null,...E()})},(0,eU.EG)(e)))},e):t.map((e,t)=>(0,r.jsx)(ln,{item:e,searchQuery:u,createCommonMetrics:()=>({numSearchResults:b,qaVersion:R.$L,searchQuery:u,searchPosition:n+t,item:e,moduleFilters:null,...E()})},(0,eU.EG)(e))))]})}var lr=n(293505),la=n(20161),ls=n(732838),lo=n(315230);function ll({extensionFilter:e,setExtensionFilter:t,canViewWidgets:n}){let i=(0,eI.sZ)(),s=(0,lo.Cb)(),o=(0,a.useMemo)(()=>({[er.BY.ALL]:(0,U.t)("qa.filter.all"),[er.BY.PLUGINS]:(0,U.t)("qa.filter.plugins"),[er.BY.WIDGETS]:(0,U.t)("qa.filter.widgets"),[er.BY.FROM_ORG]:(0,U.t)("qa.filter.from_org_name",{org_name:i?.name||""}),[er.BY.DEVELOPMENT]:(0,U.t)("qa.filter.development")}),[i?.name]),l=(0,a.useMemo)(()=>{let e=!!i&&!s,t=ls.y3(),r=[];return n&&r.push({type:"checkableOption",value:er.BY.ALL,text:o[er.BY.ALL]}),r.push({type:"checkableOption",value:er.BY.PLUGINS,text:o[er.BY.PLUGINS]}),n&&r.push({type:"checkableOption",value:er.BY.WIDGETS,text:o[er.BY.WIDGETS]}),(e||t)&&r.push({type:"separator"}),e&&r.push({type:"checkableOption",value:er.BY.FROM_ORG,text:o[er.BY.FROM_ORG]}),t&&r.push({type:"checkableOption",value:er.BY.DEVELOPMENT,text:o[er.BY.DEVELOPMENT]}),r},[i,s,n,o]);return(0,r.jsx)(el.c0,{ariaLabel:(0,U.t)("qa.filter.aria_label"),buttonId:lc,displayAboveTarget:!1,id:lu,items:l,labelForSelectedItem:e=>o[e],menuId:ld,onSelectedChange:t,placeholder:"Filter",recordingKey:lu,selected:e})}let ld="extensions-filter-dropdown-menu",lc="extensions-filter-dropdown-button",lu="extensions-filter-dropdown";var lm=n(383105),lp=n(915225),lh=n(449979),lf=n(502956),lg=n(488044),lx=n(450207),l_=n(196489),ly=n(591600),lb=n(404422),lv=n(816411),lC=n(489985),lE=n(84181),lw=n(949305);let lk=e=>{(0,lC.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:"",triggeredFrom:"quick-actions"})};var lT=n(101170);function lj({augmentedExtension:e,isAccessibleIcon:t}){let{extension:n,publishedExtension:i}=e;if(!(0,eP.ZQ)(n))return(0,r.jsx)(eD.V,{"aria-hidden":t,plugin:n,className:K.s.colorIcon.w20.h20.m2.bRadius4.$});let a=i&&(0,eN.Ar)(i);return a&&a.redirect_icon_url?(0,r.jsx)(eD.V,{"aria-hidden":t,plugin:a,className:K.s.colorIcon.w20.h20.m2.bRadius4.$}):(0,r.jsx)(eb.B,{ariaHidden:t,svg:o8.A,className:K.s.colorIcon.w20.h20.m2.bRadius4.$,dataTestId:"qa2-dev-plugin-icon",autosize:!0})}var lS=n(274172),lI=n(910381),lA=n(4245),lN=n(233277),lM=n(257556),lR=n(168520),lP=n(895638),lO=n(347725),lD=n(173407),lL=n(483327),lF=n(503648);let lB="EXTENSION_OPTIONS_DROPDOWN";function lU(e){let t=(0,ah.Um)();return(0,eP.ZQ)(e)?t?.type===lB&&t?.data.extensionId===e.plugin_id&&t?.data.localFileId===e.localFileId:t?.type===lB&&t?.data.extensionId===e.plugin_id&&t?.data.localFileId===null}function lV(e){let t=(0,s.wA)(),n=lU(e);return a.useCallback(i=>{if(n)t(lx.oB());else{let n=i.getBoundingClientRect();t(lx.j7({type:lB,data:{extensionId:e.plugin_id,localFileId:(0,eP.ZQ)(e)?e.localFileId:null,targetRect:n}}))}},[t,n,e])}function lH(e){let t=lV(e);return{text:"",shortcuts:[A.Hz],onAction:e=>{let n=e.target?.element;n&&t(n)}}}function lz({extension:e,active:t,isAccessibleButton:n,isHiddenFocusable:i,buttonRefSetter:s}){let o=lV(e),l=a.useCallback(e=>{e.stopPropagation(),o(e.currentTarget)},[o]),d=(0,r.jsx)(oF.c,{active:t,borderWidth:1,children:(0,r.jsx)(lA.J,{})});return(0,r.jsx)("div",{className:"x78zum5 x1jl38hy x1n2onr6",children:n?(0,r.jsx)("button",{ref:s,"aria-label":(0,U.t)("qa.plugins_widget.more_options",{widget:e.name}),onClick:l,onPointerUp:lM.dG,"data-testid":"extension-options-button",...{0:{className:"x1md70p1 x1labf8s"},1:{className:"x1md70p1 x1labf8s xg01cxk x10l6tqk"}}[!!i<<0],children:d}):(0,r.jsx)(lN.S.div,{role:"button",tabIndex:0,onClick:l,onPointerUp:lM.dG,className:i9()(K.s.bgTransparent.h24.$),"data-testid":"extension-options-button",children:d})})}function lG(e){let{augmentedExtension:t}=e,{extension:n,publishedExtension:i,localPublishedExtension:a}=t,s=(0,ah.Um)(),o=(0,eP.ZQ)(n)?n:a,d=(0,l_.NV)(o,i,lO.k2.EDITOR),c=(0,l_.OX)(i),u=(0,l_.x2)(n,i),m=(0,l_.qu)(o),p=(0,lF.rH)(t),h=(0,l_.xZ)(t),f=(0,tF.TA)(),g=!!i&&!!f&&((0,lR.Ro)(i,f)||(0,lP.Dd)(i,f)),x=lU(n),_=(0,lL.O)({extension:t,preloadImage:x});if(!x)return null;let y=[],b=[],v=!!i;!(0,eP.ZQ)(n)&&(v?(d&&g&&y.push(d),y.push({displayText:(0,U.t)("qa.extensions.view_details"),callback:_}),u&&g&&y.push(u),m&&g&&y.push(m),h&&g&&y.push(h),p&&b.push(p),c&&g&&b.push(c)):(0,e_.$D)(l.e.EXTENSIBILITY_ECOSYSTEM,Error("[Quick Actions] Published extension is missing publishedExtension from Redux state"),{extra:{extensionId:n.plugin_id,isWidget:(0,eP.k0)(n),types:Array.from(t.types).toString()}})),(0,eP.ZQ)(n)&&(d&&y.unshift(d),v&&u&&y.push(u),!n.error&&m&&y.push(m),p&&b.push(p),c&&b.push(c));let C=y.some(Boolean)&&b.some(Boolean)?{displayText:"",separator:!0}:null;return(0,r.jsx)(lD.ms,{parentRect:s?.data.targetRect,lean:"left",minWidth:64,items:[...y,C,...b].filter(e=>!!e),dataTestId:"extensionOptionsDropdown",recordingKey:"extensionOptionsDropdown"})}function lK({augmentedExtension:e,isDropdownOpen:t=!1,submenuRef:n,onOptionsFauxFocusChanged:i,...s}){let{extension:o}=e,l=(0,eP.k0)(o)?(0,r.jsx)(eZ.E,{color:"tertiary",fontSize:11,children:(0,U.tx)("qa.extensions.widget")}):(0,r.jsx)(eZ.E,{color:"tertiary",fontSize:11,children:(0,U.tx)("qa.extensions.plugin")}),d=o4(e),c=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lj,{isAccessibleIcon:s.isAccessibleExtensionRow,augmentedExtension:e}),(0,r.jsx)("div",{className:K.s.px8.$,style:ev.sx.add({maxWidth:d?"205px":"300px"}).$,children:(0,r.jsx)(o0.G,{text:o.name})}),(0,r.jsx)(lE.lM,{augmentedExtension:e,submenuRef:n}),d&&(0,r.jsx)("div",{style:ev.sx.add({maxWidth:"110px"}).$,children:(0,r.jsx)(o3,{text:d.text,variant:d.variant})})]}),u=a2.B.Item.useIsActive(),[m,p]=a.useState(!1),h=a.useCallback(()=>{p(!0)},[]),f=a.useCallback(()=>{p(!1)},[]),g=(0,k.uJ)(),[x,_,y]=a2.B.Item.useAccessoryFocusState(u,!(0,eo.Jj)(),i),b=x||_,v=a.useMemo(()=>!!u||!!s.isAccessibleExtensionRow&&(b||m||t),[u,t,b,m,s.isAccessibleExtensionRow]);return(0,r.jsxs)("div",{className:K.s.flex.itemsCenter.justifyBetween.wFull.$,onPointerEnter:h,onPointerLeave:f,children:[s.isAccessibleExtensionRow?(0,r.jsx)("button",{ref:s.primaryButtonRef,className:K.s.flex.itemsCenter.$,onClick:s.onPrimaryButtonClick,onFocus:s.onPrimaryButtonFocus,style:ev.sx.add({background:"transparent",flexGrow:1}).$,children:c}):(0,r.jsx)("div",{className:K.s.flex.itemsCenter.$,children:c}),(0,r.jsxs)("div",{children:[(v||g)&&(0,r.jsx)(lz,{...s.isAccessibleExtensionRow&&{isAccessibleButton:!0,isHiddenFocusable:g&&!v,buttonRefSetter:y},active:b||g&&t,extension:o}),!v&&(0,r.jsx)("span",{"aria-hidden":!0,children:l})]})]})}function lW({manifestError:e}){return(0,r.jsx)("div",{className:K.s.alignLeft.font11.lh16.pl32.$,children:(0,r.jsx)(eZ.E,{color:"danger",children:e.displayText})})}function lq({extension:e}){return(0,r.jsx)(lf.R,{className:K.s.font11.alignLeft.colorTextSecondary.lh16.pl32.$,text:e.localFilePath.replace("/manifest.json","")})}function lX(e){return(0,r.jsx)(h.u9,{label:"LocalExtensionItem",children:(0,r.jsx)(lY,{...e})})}function lY({augmentedExtension:e,submenuRef:t}){let{extension:n}=e,i=(0,s.wA)(),o=lU(n),l=(0,l_.Pt)(n.error?.type,n),{onAction:d,actionText:c}=function({manifestError:e,augmentedExtension:t,submenuRef:n}){let{close:i}=(0,M.cq)(),{extension:r}=t,s=(0,lE.q8)(r),o=(0,lE.U4)(r),l=(0,lE.S3)({submenuIsShown:o,extension:r}),d=(0,lw.t)(r,s),c=lv.dR(r.plugin_id,"quick-actions"),u=(0,o$.Kp)(t),m=a.useCallback(()=>{(0,eP.k0)(r)?iC.l7.user("insert-widget",()=>lk(r)):s&&n?l(n.current):c(),s||u(),d()&&i()},[r,s,n,l,c,u,d,i]);return e?{onAction:()=>e.action(),actionText:e.displayText}:{onAction:m,actionText:(0,U.t)("qa.extensions.run")}}({manifestError:l,augmentedExtension:e,submenuRef:t}),u=a.useCallback(()=>{if(o){i(lx.oB());return}d()},[o,d,i]),m=A.H5.LOCAL,p=(0,lS.D)({source:m,text:c,onAction:u,augmentedExtension:e}),h=lH(n),f=(0,k.Bd)(),g=(0,r.jsxs)(r.Fragment,{children:[!l&&(0,r.jsx)(lq,{extension:n}),l&&(0,r.jsx)(lW,{manifestError:l})]}),x=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lE.Xq,{augmentedExtension:e}),(0,r.jsx)(lG,{augmentedExtension:e})]}),[_,y]=a.useState(!1),b=a.useCallback(e=>{y(e)},[]);return f?(0,r.jsx)(lS.p,{hasNestedButton:!0,primaryAction:_?h:p,children:(n,i,a)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:K.s.flex.flexColumn.wFull.$,children:[(0,r.jsx)(lK,{augmentedExtension:e,isAccessibleExtensionRow:!0,isDropdownOpen:o,onOptionsFauxFocusChanged:b,onPrimaryButtonClick:i,onPrimaryButtonFocus:a,primaryButtonRef:n,submenuRef:t}),g]}),x]})}):(0,r.jsxs)(lS.p,{primaryAction:_?h:p,children:[(0,r.jsxs)("div",{className:K.s.flex.flexColumn.wFull.$,children:[(0,r.jsx)(lK,{augmentedExtension:e,onOptionsFauxFocusChanged:b,submenuRef:t}),g]}),x]})}function lJ(e){return(0,r.jsx)(h.u9,{label:"PublishedExtensionItem",children:(0,r.jsx)(lZ,{...e})})}function lZ({augmentedExtension:e,submenuRef:t}){let{extension:n,canRun:i,canRequest:o}=e,l=(0,s.wA)(),d=lU(n),{onAction:c,actionText:u}=(0,lT.m)({augmentedExtension:e,submenuRef:t}),m=A.H5.PUBLISHED,p=(0,lS.D)({source:m,text:u,onAction:()=>{if(d){l(lx.oB());return}c()},augmentedExtension:e}),[h,f]=a.useState(!1),g=a.useCallback(e=>{f(e)},[]),x=lH(n),_=(0,k.Bd)();if(!i&&!o)return null;let y=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lE.Xq,{augmentedExtension:e}),(0,r.jsx)(lG,{augmentedExtension:e})]});return _?(0,r.jsx)(lS.p,{hasNestedButton:!0,primaryAction:h?x:p,children:(n,i,a)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:K.s.flex.flexColumn.wFull.$,children:(0,r.jsx)(lK,{augmentedExtension:e,isAccessibleExtensionRow:!0,isDropdownOpen:d,onOptionsFauxFocusChanged:g,onPrimaryButtonClick:i,onPrimaryButtonFocus:a,primaryButtonRef:n,submenuRef:t})}),y]})}):(0,r.jsxs)(lS.p,{primaryAction:h?x:p,children:[(0,r.jsx)(lK,{augmentedExtension:e,onOptionsFauxFocusChanged:g,submenuRef:t}),y]})}function lQ(e){let t=(0,s.wA)(),n=(0,j.QZ)(),i=(0,j.V2)();return ls.y3()&&[er.BY.DEVELOPMENT,er.BY.ALL].includes(e)?[{itemKey:"newPlugin",text:(0,U.t)("whiteboard.inserts.plugin_development_options_new_plugin"),svg:eu.$,onAction:()=>{if(!i)return eM.R0.instance.handleUpgrade(eC.Q7.MANAGE_EXTENSIONS);t(tL.Lo()),ia.Y5.dispatch((0,tL.to)({type:lb.h,data:{resourceType:ly.bD.PLUGIN}}))}},n?{itemKey:"newWidget",text:(0,U.t)("whiteboard.inserts.widget_development_options_new_widget"),svg:eu.$,onAction:()=>{if(!i)return eM.R0.instance.handleUpgrade(eC.Q7.MANAGE_EXTENSIONS);t(tL.Lo()),ia.Y5.dispatch((0,tL.to)({type:lb.h,data:{resourceType:ly.bD.WIDGET}}))}}:null,{itemKey:"importFromManifest",text:(0,U.t)("whiteboard.inserts.development_options_import"),svg:ec.R,onAction:()=>{if(!i)return eM.R0.instance.handleUpgrade(eC.Q7.MANAGE_EXTENSIONS);t((0,lg.JZ)({resourceType:"unknown"}))}}].filter(lh.Vq):[]}function l$({itemKey:e,text:t,svg:n,onAction:i}){let a=(0,lI.OX)(),s=A.H5.ACTION,o=(0,lS.D)({source:s,onAction:t=>{let{target:n}=t;(0,eV.PV)({action:e,isAi:!1,module:er.Jc.EXTENSIONS,qaVersion:R.$L,rankingAlgorithm:(0,O.eg)(er.Jc.EXTENSIONS),searchPosition:n?.index??0,isPlugin:!1,numSearchResults:a.numResults,searchQuery:a.searchQuery,moduleFilters:a.moduleFilters}),i()},augmentedExtension:null});return(0,r.jsx)(lS.p,{primaryAction:o,children:(0,r.jsx)("div",{className:K.s.flex.itemsCenter.alignLeft.wFull.justifyBetween.$,children:(0,r.jsxs)("div",{className:K.s.flex.$,children:[(0,r.jsx)(n,{}),(0,r.jsx)("div",{className:K.s.ml8.$,children:t})]})})})}var l0=n(363337),l1=n(943360);let l2="button_with_faux_focus--button--DHJvs",l5="button_with_faux_focus--icon--BYRsE",l4="button_with_faux_focus--buttonText--dw04o",l3="button_with_faux_focus--buttonContent--QX0H7",l6="button_with_faux_focus--shortcut--P5q8b",l7="button_with_faux_focus--regularSize--zXYJ7",l9="button_with_faux_focus--largeSize--QLoWw",l8="button_with_faux_focus--wideSize--21vmn",de="button_with_faux_focus--largeWideSize---kXNG",dt="button_with_faux_focus--outlineStyle--DdlFa",dn="button_with_faux_focus--fauxFocus--iL0zK",di="button_with_faux_focus--solidStyle--ImDCk",dr="button_with_faux_focus--primary--leUtt button_with_faux_focus--solidStyle--ImDCk",da="button_with_faux_focus--secondary--1T08W button_with_faux_focus--outlineStyle--DdlFa",ds="button_with_faux_focus--destructive--VfK4m button_with_faux_focus--solidStyle--ImDCk",dl="button_with_faux_focus--destructiveSecondary--06rnI button_with_faux_focus--outlineStyle--DdlFa",dd="button_with_faux_focus--signup--VMyya button_with_faux_focus--solidStyle--ImDCk",dc="button_with_faux_focus--link--yAGUF",du="button_with_faux_focus--destructiveLink--ijmWi button_with_faux_focus--link--yAGUF",dm=(0,a.forwardRef)(({active:e,children:t,size:n="regularSize",variant:a,...s},o)=>(0,r.jsx)(l1.E,{className:i9()({[l2]:!0,[i[a??"primary"]]:!0,[i[n]]:!0,[dn]:e}),...s,ref:o,children:(0,r.jsx)("span",{className:l4,children:(0,r.jsx)("span",{className:l3,children:t})})}));var dp=n(13726);function dh({action:e,children:t,dataTestId:n,variant:i}){let s=(0,a.useRef)(null),{active:o,target:l}=(0,r$.H)({ref:s,itemsPerRow:2}),d=(0,a.useMemo)(()=>({shortcuts:[{key:z.Uz.ENTER}],onAction:e}),[e]),{onClickCallback:c}=(0,r2.k)({primaryAction:d,active:o,actionLabel:!1,target:l});return(0,r.jsx)(dm,{ref:s,onClick:e=>{e.stopPropagation(),c()},htmlAttributes:{"data-testid":n},variant:i,active:o,children:t})}function df({extension:e}){let t=(0,dp.R_)(e),n=(0,dp.JB)(e);return(0,r.jsxs)("div",{className:K.s.mx8.mb8.p8.bRadius8.flex.justifyBetween.gap4.colorBgInfo.$,"data-testid":"extension-invite-row",children:[(0,r.jsxs)("div",{className:K.s.flex.gap8.itemsCenter.font11.lh16.$,children:[(0,r.jsx)(l0.H8,{user:e.creator,size:l0.Pf.MEDIUM}),(0,r.jsx)(dp.e2,{resource:e})]}),(0,r.jsxs)("div",{className:K.s.flex.gap4.$,children:[(0,r.jsx)(dh,{action:n,dataTestId:"decline-invite-button",variant:"secondary",children:(0,r.jsx)(eZ.E,{fontSize:11,children:(0,U.tx)("community.detail_view.decline")})}),(0,r.jsx)(dh,{action:t,dataTestId:"accept-invite-button",children:(0,r.jsx)(eZ.E,{fontSize:11,children:(0,U.tx)("community.detail_view.accept")})})]})]})}function dg({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){let i=function({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){switch(n){case er.BY.PLUGINS:return e;case er.BY.WIDGETS:return t;case er.BY.ALL:case er.BY.DEVELOPMENT:return[...e,...t];case er.BY.FROM_ORG:return[];default:(0,F.xb)(n)}}({invitedPlugins:e,invitedWidgets:t,selectedFilter:n});return 0===i.length?null:(0,r.jsx)("div",{"data-testid":"extension-invite-section",className:K.s.flex.flexColumn.$,children:(0,r.jsx)(a2.B.Section,{header:(0,U.t)("community.detail_view.invitations"),children:i.map(e=>(0,r.jsx)(df,{extension:e},e.id))})})}var dx=n(348841),d_=n(967088),dy=n(346524),db=n(887858),dv=n(169957),dC=n(575057);function dE({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e,i=(0,eP.k0)(t)?(0,U.tx)("qa.extensions.widget"):(0,U.tx)("qa.extensions.plugin"),a=n?.unique_run_count??0,s=n?.like_count??0,o=n?(0,r.jsx)(db.o,{publishedExtension:n,showTooltip:!1}):null,l=(0,db.g)(n);return(0,r.jsx)("div",{className:K.s.flex.flexColumn.colorTextSecondary.textBodyMedium.$,children:(0,r.jsxs)("div",{className:K.s.flex.flexRow.$,children:[i,(0,r.jsx)(dw,{}),(0,r.jsx)(eb.B,{svg:dv.A,className:K.s.mx2.colorIconSecondary.$}),(0,r.jsx)("div",{className:K.s.ml2.$,children:(0,U.t)("qa.extensions.num_users",{numUsers:a,numUsersStr:(0,iE.$M)(a)})}),(0,r.jsx)(dw,{}),(0,r.jsx)(eb.B,{svg:dC.A,className:K.s.colorIconSecondary.$,style:ev.sx.add({margin:"3px"}).$,"aria-hidden":"true"}),(0,r.jsx)(dy.E,{children:(0,U.t)("qa.extensions.num_likes_accessibility_label",{numLikes:s,numLikesStr:(0,iE.$M)(s)})}),(0,r.jsx)("div",{"aria-hidden":!0,className:K.s.ml2.$,children:(0,iE.$M)(s)}),l&&(0,r.jsx)(dw,{}),o]})})}function dw(){return(0,r.jsx)("div",{className:K.s.w1.hFull.mx6.$,style:ev.sx.add({backgroundColor:"var(--color-border-fs)"}).$,"data-testid":"divider"})}function dk({augmentedExtension:e}){let{extension:t,canRun:n,canRequest:i}=e,[s,o]=a.useState(!1),l=(0,lL.O)({extension:e,preloadImage:s}),d=A.H5.PUBLISHED_WITH_DETAILS,c=(0,lS.D)({source:d,text:(0,U.t)("qa.extensions.view_details"),onAction:l,augmentedExtension:e});if(!n&&!i)return null;let u=(0,o1.G8)(t,dx.$J);return(0,r.jsx)(lS.p,{primaryAction:c,setActive:o,children:(0,r.jsxs)("div",{className:K.s.flex.flexColumn.alignLeft.wFull.$,children:[(0,r.jsxs)("div",{className:K.s.flex.itemsCenter.overflowHidden.$,children:[(0,r.jsx)(lj,{augmentedExtension:e}),(0,r.jsx)(dT,{augmentedExtension:e})]}),(0,r.jsxs)("div",{className:K.s.flex.flexColumn.overflowHidden.ml32.$,children:[(0,r.jsx)(o0.G,{text:u,className:K.s.mb4.colorTextSecondary.textBodyMedium.$,showTooltip:d_.i.NEVER}),(0,r.jsx)(dE,{augmentedExtension:e})]})]})})}function dT({augmentedExtension:e}){let{extension:t}=e,n=o4(e);return(0,r.jsxs)("div",{className:K.s.flex.itemsCenter.ml8.$,children:[(0,r.jsx)("div",{className:K.s.pr8.colorText.textBodyLarge.$,style:ev.sx.add({maxWidth:n?"205px":"300px"}).$,children:(0,r.jsx)(o0.G,{text:t.name})}),n&&(0,r.jsx)("div",{style:ev.sx.add({maxWidth:"110px"}).$,children:(0,r.jsx)(o3,{text:n.text,variant:n.variant})})]})}function dj({augmentedExtensions:e,header:t,showExtensionDetails:n=!1,dataTestId:i}){let s=e.map(e=>{let t=a.createRef(),{key:i}=e;return(0,N.JT)(e)?(0,r.jsx)(lX,{augmentedExtension:e,submenuRef:t},i):n?(0,r.jsx)(dk,{augmentedExtension:e},i):(0,r.jsx)(lJ,{augmentedExtension:e,submenuRef:t},i)});return(0,r.jsxs)("div",{"data-testid":i,className:K.s.flex.flexColumn.$,children:[t&&(0,r.jsx)(a2.B.Section,{header:t,children:s}),!t&&s]})}function dS({actions:e}){return 0===e.length?null:(0,r.jsx)("div",{"data-testid":"extension-actions-section",className:K.s.flex.flexColumn.$,children:e.map(({itemKey:e,...t})=>(0,r.jsx)(l$,{itemKey:e,...t},e))})}function dI({extensions:e}){let t=(0,a.useMemo)(()=>[...e].sort(N.bL),[e]);return 0===t.length?null:(0,r.jsx)(dj,{augmentedExtensions:t,dataTestId:"my-extensions-section"})}function dA(){let e=(0,j.QZ)();return(0,r.jsx)("div",{className:K.s.flex.wFull.mt16.justifyCenter.alignCenter.colorTextSecondary.$,"data-testid":"no-extensions-found",children:e?(0,U.tx)("qa.no_plugins_widgets_found"):(0,U.tx)("qa.no_plugins")})}function dN({availableExtensions:e,selectedFilter:t}){let n=(0,O.Ev)(),i=(0,p.md)(I.Lk),o=(0,p.md)(I.dd),l=(0,p.md)(I.Rt),d=(0,p.md)(I.Q8),c=(0,s.d4)(eR.l),u=(0,j.f6)(),m=(0,j.wW)(),{loaded:h,extensions:f}=function(e){let t=(0,N.Oy)(),{loaded:n,extensions:i}=(0,lp.s)(),r=i.map(e=>t(e,A.Ag.COMMUNITY));return{loaded:n,extensions:(0,N.ZM)([...e,...r])}}(e),{myExtensions:g,suggestedExtensions:x,otherExtensionsFromOrg:_}=function(e,t){let n=(0,N.vA)(t),i=[],r=[],a=[];e.filter(e=>e.canRun||e.canRequest).filter(e=>n(e)).forEach(e=>{(0,N.wj)(e)?i.push(e):t===er.BY.FROM_ORG&&(0,N.jb)(e)||t!==er.BY.FROM_ORG&&(0,N.Nf)(e)?r.push(e):t===er.BY.FROM_ORG&&a.push(e)});let s=0,o=e=>{let t=[];for(let n of e){if(s>=25)break;t.push(n),s+=1}return t};return{myExtensions:o(i),suggestedExtensions:o(r),otherExtensionsFromOrg:o(a)}}(f,t),y=lQ(t),b=g.length+x.length+_.length+y.length,v=t===er.BY.DEVELOPMENT,C=t===er.BY.FROM_ORG,E=h||C||v,w=function({myExtensions:e,suggestedExtensions:t,otherExtensionsFromOrg:n,extensionActions:i}){let r=(0,O.HD)("My Extensions",e),a=(0,O.HD)("Suggested",t),s=(0,O.HD)("Other Extensions from Org",n),o=(0,O.NH)(i);return(0,O.i6)([r,a,s,o])}({myExtensions:g,suggestedExtensions:x,otherExtensionsFromOrg:_,extensionActions:y});return((0,a.useEffect)(()=>{i===er.Jc.EXTENSIONS&&o&&E&&n({quickActionsSessionId:o,quickActionsQueryId:l,searchQuery:"",numSearchResults:b,currentSelection:c,module:i,moduleFilters:t,qaVersion:R.$L,searchQueryResults:w})},[n,i,o,E,l,b,c,t,w]),(0,ed.iC)({activeTab:er.Jc.EXTENSIONS,query:d,resultsCount:b}),0===b)?(0,r.jsx)(dA,{}):(0,r.jsx)(lI.M6,{numResults:b,moduleFilters:t,children:(0,r.jsxs)(a2.B,{primary:!0,resultCount:b,dataTestId:"browseExtensions",children:[(0,r.jsx)(dg,{invitedPlugins:u,invitedWidgets:m,selectedFilter:t}),(0,r.jsx)(dI,{extensions:g}),(0,r.jsx)(dS,{actions:y}),(0,r.jsx)(dM,{extensions:x,hasLoaded:E}),C&&(0,r.jsx)(dR,{extensions:_})]})})}function dM({extensions:e,hasLoaded:t}){return t?0===e.length?null:(0,r.jsx)(dj,{augmentedExtensions:e,header:(0,U.t)("qa.suggested"),showExtensionDetails:!0}):(0,r.jsx)("div",{className:K.s.p8.$,children:(0,r.jsx)(lm.R,{})})}function dR({extensions:e}){let t=(0,eI.sZ)();return t&&0!==e.length?(0,r.jsx)(dj,{augmentedExtensions:e,header:(0,U.t)("qa.other_extensions_from_org",{org_name:t.name}),showExtensionDetails:!0}):null}var dP=n(863864),dO=n.n(dP),dD=n(955394),dL=n(402342),dF=n(391596),dB=n(912938),dU=n(749013),dV=n(923424),dH=n(857300),dz=n(793993),dG=n(502338),dK=n(52616),dW=n(893154),dq=n(538349),dX=n(996399),dY=n(729059);let dJ=dq.M4.Query({fetch:async e=>{let t={...e,limit_associations:!0,sort_by:dV.e.Search.RELEVANCY,resource_type:[dG.vt.PLUGIN,dG.vt.WIDGET],include_content:!0,consolidate_org_search:!0};return(await dY.$W.getResources({...t,caller:dz.z.EDITOR_COMMUNITY_VIEW})).data.meta},output:({data:e})=>{let{pass:t,fail:n}=(0,dB.j)(e.results,e=>(0,dU.Gk)(e.model));return{public:n.map(({model:e})=>e.content?.plugin||e.content?.widget).filter(e=>!!e),private:t.map(({model:e})=>e.content?.plugin||e.content?.widget).filter(e=>!!e)}}});function dZ(){return(0,r.jsx)("div",{className:"x78zum5 xh8yej3 xw7yly9 xl56j7k x2b8uid x1n0bwc9",children:(0,U.t)("search.error.max_query_length_exceeded")})}function dQ({availableExtensions:e,selectedFilter:t}){let n=(0,O.Ev)(),i=(0,p.md)(I.Lk),o=(0,p.md)(I.dd),d=(0,p.md)(I.Q8),[c]=(0,dD.A)(d,300),u=c.trim(),m=(0,p.md)(I.Rt),h=(0,s.d4)(eR.l),f=(0,s.wA)(),{loading:g,publicExtensions:x,privateExtensions:_,localExtensions:y}=function(e){let{status:t,results:n,errors:i}=function(e){let t=function(e){switch(e){case tn.nT.Design:case tn.nT.Illustration:return dH.k.Editors.FIGMA;case tn.nT.Whiteboard:return dH.k.Editors.FIGJAM;case tn.nT.DevHandoff:return dH.k.Editors.DEV_MODE;case tn.nT.Slides:return dH.k.Editors.SLIDES;case tn.nT.Sites:return dH.k.Editors.SITES;case tn.nT.Cooper:return dH.k.Editors.COOPER;case null:case tn.nT.Figmake:return dH.k.Editors.ALL;default:(0,F.xb)(e)}}((0,eQ.my)());(0,ef.kc)().ext_design_plugins_in_sites&&t===dH.k.Editors.SITES&&(t=dH.k.Editors.FIGMA);let n=(0,lo.U5)(),i=(0,eI.dq)()??void 0,[{status:r,data:a,errors:s}]=(0,dF.IT)(dJ({query:e.trim(),resourceEditorType:(0,dK.So)(t),orgId:n?i:void 0,maxNumResults:20}),{enabled:e.trim().length>0&&!(0,N.GX)(e.trim()),key:"searchPublishedExtensionsQuery"});return{status:r,results:a||{public:[],private:[]},errors:s}}(e),r=function(e){let t=(0,j.$1)(),n=(0,a.useMemo)(()=>Object.values(t),[t]),i=(0,a.useMemo)(()=>new dX.Ef(n,dW.Ih),[n]);return(0,a.useMemo)(()=>i.search(e),[i,e])}(e);return(0,a.useMemo)(()=>{switch(t){case"loading":return{loading:!0,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"loaded":return{loading:!1,publicExtensions:n.public,privateExtensions:n.private,localExtensions:r};case"disabled":return{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"errors":return(0,e_.$D)(l.e.EXTENSIBILITY_ECOSYSTEM,Error("[useSearchExtensions] Unable to fetch search results"),{tags:{status:t},extra:{errors:i}}),{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};default:(0,F.xb)(t)}},[n?.private,n?.public,r,t,i])}(u),b=function(e,t){let n=lQ(t),i=(0,a.useMemo)(()=>new dX.Ef(n,dW.zd),[n]);return(0,a.useMemo)(()=>i.search(e),[i,e])}(u,t);(0,a.useEffect)(()=>{let e=[...x,..._];0!==e.length&&f(dL.Qi({publishedPlugins:e,src:"Quick actions"}))},[f,_,x]);let{myExtensions:v,fromOrgExtensions:C,communityExtensions:E}=d1(function({publicExtensions:e,privateExtensions:t,localExtensions:n}){let i=(0,N.Oy)();return(0,a.useMemo)(()=>{let r=(e,t)=>e.map(e=>(0,eN.Ar)(e)).filter(e=>!!e).map(e=>i(e,t)),a=r(e,A.Ag.COMMUNITY),s=r(t,A.Ag.ORG_PRIVATE);return[...n.map(e=>i(e,A.Ag.LOCAL)),...s,...a]},[i,n,t,e])}({publicExtensions:x,privateExtensions:_,localExtensions:y}),e,t),w=v.length+C.length+E.length+b.length,k=function({myExtensions:e,actionItems:t,fromOrgExtensions:n,communityExtensions:i}){let r=(0,O.HD)("My Extensions",e),a=(0,O.NH)(t),s=(0,O.HD)("From Org",n),o=(0,O.HD)("From Community",i);return(0,O.i6)([r,a,s,o])}({myExtensions:v,actionItems:b,fromOrgExtensions:C,communityExtensions:E});return((0,a.useEffect)(()=>{i===er.Jc.EXTENSIONS&&o&&!g&&n({quickActionsSessionId:o,quickActionsQueryId:m,searchQuery:u,numSearchResults:w,currentSelection:h,module:i,moduleFilters:t,qaVersion:R.$L,searchQueryResults:k})},[h,n,i,w,o,m,t,g,k,u]),(0,ed.iC)({activeTab:er.Jc.EXTENSIONS,isLoading:g,passthroughErrorMessage:(0,N.GX)(u)?(0,U.t)("search.error.max_query_length_exceeded"):null,query:d,resultsCount:w}),g)?(0,r.jsx)(lm.R,{}):(0,N.GX)(u)?(0,r.jsx)(dZ,{}):0===w?(0,r.jsx)(dA,{}):(0,r.jsx)(lI.M6,{numResults:w,moduleFilters:t,children:(0,r.jsxs)(a2.B,{primary:!0,resultCount:w,children:[(0,r.jsx)(dI,{extensions:v}),(0,r.jsx)(dS,{actions:b}),(0,r.jsx)(d$,{extensions:C}),(0,r.jsx)(d0,{extensions:E})]})})}function d$({extensions:e}){let t=(0,eI.sZ)();if(!t||0===e.length)return null;let[n,i]=dO()(e,e=>e.types.has(A.Ag.ORG_SAVED)),a=[...n,...i];return(0,r.jsx)(dj,{augmentedExtensions:a,header:(0,U.t)("qa.from_org_name",{org_name:t.name}),showExtensionDetails:!0,dataTestId:"from-org-extensions-section"})}function d0({extensions:e}){return 0===e.length?null:(0,r.jsx)(dj,{augmentedExtensions:e,header:(0,U.t)("qa.from_community"),showExtensionDetails:!0,dataTestId:"community-extensions-section"})}let d1=(e,t,n)=>{let i=(0,N.vA)(n),r=(0,a.useMemo)(()=>new Set(e.map(e=>e.key)),[e]),s=(0,a.useMemo)(()=>{let n=[...e,...t];return(0,N.ZM)(n)},[t,e]),o=[],l=[],d=[];return s.filter(e=>e.canRun||e.canRequest).filter(e=>i(e)).filter(e=>r.has(e.key)).forEach(e=>{(0,N.wj)(e)?o.push(e):(0,N.C5)(e)?l.push(e):(0,N.Nf)(e)&&d.push(e)}),{myExtensions:o,fromOrgExtensions:l,communityExtensions:d}};function d2({hasLoadedExtensions:e,extensions:t,selectedFilter:n}){let i=(0,p.md)(I.Q8),a=(0,I.JB)(),s=(0,p.AY)(la.t);return((0,E.h)(()=>()=>{a(),s()}),e)?i.trim()?(0,r.jsx)(dQ,{availableExtensions:t,selectedFilter:n}):(0,r.jsx)(dN,{availableExtensions:t,selectedFilter:n}):(0,r.jsx)(lm.R,{})}var d5=n(821375);function d4(){!function(){let e=(0,p.md)(I.IH),t=(0,p.md)(et.f),{autoClose:n}=(0,M.cq)(),i=(0,a.useCallback)(()=>{let e=ee.D.getState();e.modalShown||e.dropdownShown||e.pickerShown||n()},[n]);!function({ref:e,handler:t,eventType:n="mousedown",eventOptions:i,recordingKey:r,enabled:s}){let o=(0,a.useCallback)(n=>{if(!(n.target instanceof Node))return;let i=n.target;i&&i.isConnected&&e&&(Array.isArray(e)?e.filter(e=>!!(e&&e.current)).every(e=>e.current&&!e.current.contains(i)):e.current&&!e.current.contains(i))&&t(n)},[e,t]),l=(0,V.rf)(r,n,o);(0,a.useEffect)(()=>{if(e&&s)return window.addEventListener(n,l,i),()=>{window.removeEventListener(n,l,i)}},[e,n,o,l,i,s])}({ref:(0,a.useMemo)(()=>[e,t],[e,t]),handler:()=>setTimeout(i,0),eventType:"mousedown",eventOptions:!0,recordingKey:"click-to-dismiss",enabled:!0})}();let{defaultViewTabsAvailable:e,defaultViewAssetsTabVisible:t}=(0,y.gB)(),[n,i]=(0,p.fp)(I.Q8),o=(0,p.Xr)(I.Rt),[l,d]=(0,p.fp)(la.t),[c,u]=(0,p.fp)(I.Lk),{loaded:m,extensions:h}=(0,p.md)(I.P_),f=(0,s.wA)();a.useEffect(()=>f(q.aq()),[f]);let g=(0,X.q5)(),x=!!(e&&g?.canEdit),_=(0,ne.s)(),b=(0,nt.V)(),v=(0,Q.eH)();(0,Z.b)({disabled:!x});let C=c===er.Jc.ASSETS,{debouncedAssetSearch:E,clearAssetSearchAndCancelDebounce:w}=(0,en.TC)({debounceWait:300}),{debouncedFragmentTextSearch:T,clearFragmentSearchAndCancelDebounce:S}=(0,d5.S)({debounceWait:300,entryPoint:W.G4.ACTIONS_ASSETS_TAB}),{debouncedFragmentTextSearch:A,clearFragmentSearchAndCancelDebounce:N}=(0,d5.S)({debounceWait:300,entryPoint:W.G4.ACTIONS_ASSETS_TAB,isCommunity:!0}),R=a.useCallback(e=>{i(e),o((0,H.g)()),(0,O.lw)(),x&&(C||0===e.length)&&(E(e,{type:J.IS.ALL}),b&&T(e),v&&A(e))},[i,o,E,T,x,C,b,v,A]),P=a.useCallback(()=>{i(""),x&&(w(),b&&S(),v&&N())},[i,x,w,S,b,v,N]),L=a.useCallback(e=>{u(e),(0,O.lw)()},[u]),G=a.useCallback(()=>{(0,t9.mX)(n,()=>L(er.Jc.ASSETS),b,v,_,W.G4.ACTIONS_ASSETS_TAB)},[n,L,b,v,_]),eo=a.useRef(null),ec=(0,lr.U)(b),eu=(0,s.d4)(Y.Eh),em=(0,j.QZ)();a.useEffect(()=>{em||l!==er.BY.ALL&&l!==er.BY.WIDGETS||d(er.BY.PLUGINS)},[em,l,d]);let ep=(0,k.U)(),eh=(0,k.Bd)(),ef=(0,k.n0)(eh&&ep);(0,D.If)(ef);let eg=a.useId(),ex=a.useId(),e_=a.useId(),ey=(0,r.jsxs)(el.fu,{value:c,onChange:B.lQ,numItems:eu?3:2,children:[(0,r.jsx)(el.oz,{tabId:er.Jc.ALL,tabPanelId:eh?eg:void 0,onAction:()=>L(er.Jc.ALL),navigatingShortcut:{key:z.Uz.KEY_1,modifier:[z.xH.ALT]},shouldHaveAccessibleAttributes:eh,children:(0,U.tx)("qa.all")}),t&&(0,r.jsx)(el.oz,{tabId:er.Jc.ASSETS,tabPanelId:eh?ex:void 0,onAction:G,navigatingShortcut:{key:z.Uz.KEY_2,modifier:[z.xH.ALT]},shouldHaveAccessibleAttributes:eh,children:(0,U.tx)("qa.assets")}),eu&&(0,r.jsx)(el.oz,{tabId:er.Jc.EXTENSIONS,tabPanelId:eh?e_:void 0,onAction:()=>L(er.Jc.EXTENSIONS),navigatingShortcut:{key:z.Uz.KEY_3,modifier:[z.xH.ALT]},shouldHaveAccessibleAttributes:eh,children:em?(0,U.tx)("qa.plugins_widgets"):(0,U.tx)("qa.plugins")})]}),eb=a.useCallback(e=>{(v||b)&&(0,t9.jk)(e)},[b,v]),ev=(0,ei._M)({action:$.JT.FIND_INSPIRATION,clientLifecycleId:void 0}),eC=v||b?(0,r.jsx)("div",{className:K.s.flex.$,children:(0,r.jsx)(t9.hc,{entryPoint:W.G4.ACTIONS_ASSETS_TAB,aiTrackingContext:ev,recordingKey:(0,V.Pt)("defaultView","visualSearchIconButton")})}):void 0,eE=c===er.Jc.EXTENSIONS,ew=a.useId();return(0,r.jsx)(es.n,{canShrinkIfNeeded:eh,height:$.wC,recordingKey:"defaultView",shouldWrapContentsInTabLoop:ef,children:(0,r.jsxs)(ed.Do,{children:[(0,r.jsx)(d3,{ref:eo,descriptorId:ew,endEnhancer:eC,hasAccessibleImprovements:eh,isAssetsTabActive:C,isUsingRealFocus:ef,onClear:P,onPaste:eb,onSearchChange:R,placeholder:ec,searchQuery:n}),eh&&(0,r.jsx)(ed.mr,{id:ew}),(x||eE)&&(0,r.jsx)("div",{className:K.s.px8.pb8.$,children:(0,r.jsxs)(ea.b,{primary:!1,gap:8,fullWidth:!0,justify:"space-between",children:[x&&ey,eE&&(0,r.jsx)(ll,{extensionFilter:l,setExtensionFilter:d,canViewWidgets:em})]})}),function(){switch(c){case er.Jc.ALL:return(0,r.jsx)(es.n.Body,{id:eh?eg:void 0,isTabPanel:!0,children:(0,r.jsx)(li,{setActiveTab:L})});case er.Jc.ASSETS:return(0,r.jsx)(es.n.Body,{id:eh?ex:void 0,isTabPanel:!0,children:(0,r.jsx)(t8.t,{searchHandle:eo})});case er.Jc.EXTENSIONS:return(0,r.jsx)(es.n.Body,{id:eh?e_:void 0,isTabPanel:!0,children:(0,r.jsx)(d2,{extensions:h,hasLoadedExtensions:m,selectedFilter:l})});default:return(0,F.xb)(c)}}()]})})}let d3=a.forwardRef(({descriptorId:e,endEnhancer:t,hasAccessibleImprovements:n,isAssetsTabActive:i,isUsingRealFocus:s,onClear:o,onPaste:l,onSearchChange:d,placeholder:c,searchQuery:u},m)=>{let p=(0,G.bh)({isDefaultFocusItem:!0}),h=a.useCallback(()=>{p?.()},[p]);return(0,r.jsx)(eo.vj,{ref:m,searchQuery:u,onSearchChange:d,onClear:o,onEnter:s?h:void 0,onPaste:l,endEnhancer:t,placeholder:n&&u||!i?void 0:c,descriptorId:n?e:void 0})});function d6(){let{current:e}=(0,M.cq)(),t=(0,I.jh)();return((0,E.h)(()=>()=>{t()}),e)?(0,r.jsx)(r.Fragment,{children:e.module}):(0,r.jsx)(d4,{})}let d7=(e,t)=>{let n=(0,P.x)();(0,O.F$)(n)&&(0,O.Mq)({...t,qaVersion:R.$L,quickActionsSessionId:e,timeToShowModal:C.sn.tryStop(R.mP)||0,module:n})};function d9(){!function(){let e=(0,p.Xr)(I.P_),t=(0,j.FG)(),n=(0,j.AR)(),{loaded:i,userPlugins:r,userWidgets:s,orgPlugins:o,orgWidgets:l}=(0,j.q3)(),d=(0,j.ll)(),c=(0,j.U6)(),u=(0,S.h)("plugin"),m=(0,S.h)("widget"),h=(0,j.$1)(),f=(0,N.Oy)(),g=(0,a.useMemo)(()=>[{extensions:t,extensionType:A.Ag.RECENT},{extensions:n,extensionType:A.Ag.RECENT},{extensions:Object.values(r),extensionType:A.Ag.USER_SAVED},{extensions:Object.values(s),extensionType:A.Ag.USER_SAVED},{extensions:Object.values(o),extensionType:A.Ag.ORG_SAVED},{extensions:Object.values(l),extensionType:A.Ag.ORG_SAVED},{extensions:Object.values(d),extensionType:A.Ag.ALLOWLIST},{extensions:Object.values(c),extensionType:A.Ag.ALLOWLIST},{extensions:u,extensionType:A.Ag.ORG_PRIVATE},{extensions:m,extensionType:A.Ag.ORG_PRIVATE},{extensions:Object.values(h),extensionType:A.Ag.LOCAL}],[t,n,r,s,o,l,d,c,u,m,h]),x=(0,a.useMemo)(()=>{let e=i?g.map(({extensions:e,extensionType:t})=>e.map(e=>f(e,t))).flat():[];return(0,N.ZM)(e)},[g,f,i]);(0,a.useEffect)(()=>{i&&x&&e({loaded:i,extensions:x})},[i,x,e])}();let e=(0,p.Xr)(I.Bu),t=(0,p.md)(I.rE),n=(0,p.md)(I.dd);(0,E.h)(()=>(e(!0),n&&d7(n,t||void 0),()=>{e(!1)}));let i=(0,p.md)(w.Kh),[s,o]=a.useState(!1),{close:l}=(0,M.cq)();return(0,a.useEffect)(()=>{d8(i)&&o(!0),s&&!d8(i)&&i!==v.NLJ.IMAGE_LASSO&&l()},[l,i,s]),(0,r.jsx)(T.s,{children:(0,r.jsx)(k.xQ,{children:(0,r.jsx)(D.s3,{name:"quickActions",recordingKey:"quickActions",children:(0,r.jsx)(L.p,{children:(0,r.jsx)(d6,{})})})})})}function d8(e){return e===v.NLJ.SELECT}var ce=n(526575),ct=n(385640);function cn(e){let t=(0,ex.A)(b.KY,e.timeoutMs),n=(0,b.el)(),[i,s]=a.useState(!1),o=a.useRef(null);return a.useEffect(()=>(i?t.cancel():t(),()=>{t.cancel()}),[t,i]),(0,a.useEffect)(()=>{n&&(t.cancel(),t())},[n,t]),(0,r.jsx)("div",{ref:o,onPointerEnter:()=>{s(!0)},onPointerLeave:()=>{s(!1)},children:e.children})}function ci(){let e=ee.D.getState(),t=(0,eR.l)(e),n=e.openFile?.key??"",i=(0,ce.v5)(e.selectedView,null),s=(0,nF.F)(),o=[...oA(),...s],l=ez(),d=nN(l,o),c=(0,b.el)(),u=c?d.list(l).find(e=>e.action===c.action):null,h=u?.action,g=u?(0,eU.ah)(u):null,x=(0,eU.J8)(u?.action,c?.payload),_=(0,eU.Hr)(u?.action),y=(0,a.useCallback)(()=>{h&&(ia.Y5.triggerAction(h,c?.payload),(0,b.KY)())},[h,c?.payload]),v=(0,p.md)(I.dd),C=(0,O.vI)(),E=(0,f.PE)(),w=(0,a.useMemo)(()=>({action:h,source:"toast",toastType:c?.payload?.source,quickActionsSessionId:v,currentSelection:t,qaVersion:R.$L,fileKey:n,productType:i,role:C,hasAiFeatureAccess:E}),[h,v,t,n,i,C,E,c?.payload?.source]),k=(0,a.useRef)(w),T=(0,b.w_)(c);(0,a.useEffect)(()=>{k.current=w},[w]),(0,a.useEffect)(()=>{h&&T&&(0,rt.sx)(R.Sq,k.current,{forwardToDatadog:!0})},[h,T]),(0,eS.f4)(e=>{c?.guid&&!e.mirror.sceneGraphSelection[c.guid]&&(0,b.KY)()});let j=(0,a.useCallback)(()=>{if(!u)return;let e=u?.action,t=[$.JT.MAGIC_LINK,$.JT.FIND_INSPIRATION].includes(e);h===$.JT.CONTENT_FILL&&m.CT8?.dismissContentFillNudge(),(0,b.KY)({dismissedAction:t?e:void 0})},[u,h]);if(!T)return null;if(!u)return console.warn("No menu item found for suggested action."),null;let S=(0,sT.OR)(u);return(0,r.jsx)(D.s3,{name:"quickActions",recordingKey:"quickActions",children:(0,r.jsx)(L.p,{children:(0,r.jsx)(es.n,{children:(0,r.jsx)(cn,{timeoutMs:1e4,children:(0,r.jsx)(ct.y,{onDismiss:j,recordingKey:"SuggestionToast",children:(0,r.jsxs)(ea.B,{justify:"space-between",align:"center",fullWidth:!0,children:[(0,r.jsxs)(ea.B,{gap:4,align:"center",children:[(0,r.jsx)("span",{style:{"--color-icon":"var(--color-icon-brand)"},children:_}),(0,r.jsxs)(ea.B,{align:"center",children:[(0,r.jsx)("span",{className:K.s.textBodyMediumStrong.$,children:(0,r.jsx)(eZ.E,{color:"brand",children:x})}),(0,eV.BB)(u)&&(0,r.jsx)(sT.yi,{helpUrlVariant:S})]})]}),(0,r.jsx)(tU.r,{variant:"secondary",shortcuts:[{key:z.Uz.ENTER,modifier:[z.xH.META]}],onAction:()=>{y(),h&&(0,O.mi)({...k.current,isAi:!0})},recordingKey:"SuggestionToast",children:g})]})})})})})})}var cr=n(749447);function ca(){let e=(0,ok.XV)(),t=(0,ok.hk)(),n=(0,ok.sF)();return e?(0,r.jsx)(D.s3,{name:"quickActions",recordingKey:"quickActions",children:(0,r.jsx)(L.p,{children:(0,r.jsx)(es.n,{children:(0,r.jsx)(ct.y,{onDismiss:t,recordingKey:"VideoToast",children:(()=>{switch(e.status){case"success":return(0,r.jsxs)(ea.B,{justify:"space-between",align:"center",fullWidth:!0,children:[(0,r.jsxs)(ea.B,{gap:4,align:"center",children:[(0,r.jsx)("span",{className:"x2lah0s",children:(0,r.jsx)(eK.C,{})}),(0,r.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,U.tx)("video_ai.make_video.success",{prompt:e.prompt})})]}),(0,r.jsx)(tU.r,{shortcuts:[{key:z.Uz.ENTER,modifier:[z.xH.META]}],onAction:n,recordingKey:"VideoToast",children:(0,U.tx)("video_ai.make_video.insert")})]});case"error":return(0,r.jsxs)(ea.B,{gap:4,align:"center",children:[(0,r.jsx)("span",{className:"x2lah0s",children:(0,r.jsx)(cr.C,{style:{"--color-icon":"var(--color-icon-danger)"}})}),(0,r.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,U.tx)("video_ai.make_video.error",{prompt:e.prompt})})]});default:return null}})()})})})}):null}function cs(e){return(0,r.jsx)(h.u9,{label:"QuickActionsV2",children:(0,r.jsx)(co,{...e})})}function co(e){let t=(0,s.wA)(),n=(0,_.I)(),i=(0,f.PE)();(0,a.useEffect)(()=>{m.glU?.handleHasDesignAIPermissionChange()},[i]);let p=(0,d.Q)({style:{position:"relative"}});if(!n)return null;let h=(0,r.jsx)(c.i,{children:(0,r.jsx)(y.QT,{value:(0,y.Ct)(e),children:(0,r.jsx)(cl,{})})}),b=o.v?.getFeatureGate("fpl_web_stacking_updates")?(0,r.jsx)(u.PM,{children:(0,r.jsx)("div",{...p,children:h})}):h;return(0,r.jsx)(g.tH,{boundaryKey:"QuickActionsV2",onError:()=>{t(x.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},team:l.e.AI_ASSISTANT,fallback:g.H4.NONE_I_KNOW_WHAT_IM_DOING,children:b})}function cl(){let e=(0,p.md)(I.Bu),t=(0,b.el)(),n=(0,ok.XV)();return e?(0,r.jsx)(d9,{}):t?(0,r.jsx)(ci,{}):n?(0,r.jsx)(ca,{}):null}},986091:(e,t,n)=>{n.d(t,{Ct:()=>r,QT:()=>s,gB:()=>o});var i=n(105652);function r(e={}){return{defaultViewTabsAvailable:e.defaultViewTabsAvailable??!1,defaultViewAssetsTabVisible:e.defaultViewAssetsTabVisible??!1,centeredInPanels:e.centeredInPanels??!1}}let a=(0,i.createContext)(r()),s=a.Provider;function o(){return(0,i.useContext)(a)}},582353:(e,t,n)=>{n.d(t,{p:()=>T});var i=n(239976),r=n(105652),a=n(445019),s=n(224542),o=n.n(s),l=n(40297),d=n(563188),c=n(977082),u=n(324880),m=n(873256),p=n(989611),h=n(581121),f=n(796439),g=n(359962),x=n(986091),_=n(362563),y=n(201464),b=n(725498),v=n(526865),C=n(616483);let E=(0,l.jz)(v.j4N),w=(0,l.jz)(v.if6);function k(e){let t=r.useRef(null),n=(0,a.Xr)(_.fq),s=(0,d.wY)(t),{centeredInPanels:l}=(0,x.gB)();(0,r.useEffect)(()=>(s?.height&&n(s.height),()=>{n(0)}),[s,n]);let f=function(){let[e]=(0,a.fp)(c.f),t=e?.current?.getBoundingClientRect(),n=!!(t&&t.height>0),i=(0,p.xn)();return(0,r.useMemo)(()=>n?{bottom:E+i+(t?.height||0)+w}:null,[i,n,t?.height])}(),[g,y]=(0,m.d)(),v=(0,r.useMemo)(()=>l?{left:g-y}:null,[l,g,y]),C={bottom:h.VQ};return(0,i.jsx)("div",{ref:t,style:{...C,...f,left:0,...v},className:o()(b.tT,u.Dm),"data-testid":"quick-actions-v2",children:(0,i.jsx)(j,{children:e.children})})}function T(e){return(0,i.jsx)(k,{children:e.children})}function j(e){let t=r.useRef(null),n=(0,a.Xr)(_.IH),{current:s}=(0,f.cq)();(0,r.useEffect)(()=>(t.current&&n(t),()=>{n(null)}),[n]);let l=(0,y.o)(),d=s&&g.wL.includes(s.name);return(0,i.jsx)("div",{ref:t,style:{maxWidth:C.X,minWidth:d?void 0:l},className:o()(b.N8,u.Dm),"data-cancel-insertable-resource-drag-and-drop":"true",children:e.children})}},622250:(e,t,n)=>{n.d(t,{$:()=>k,J:()=>T});var i=n(239976),r=n(105652),a=n(244487),s=n(836848),o=n(998367),l=n(466082),d=n(379141),c=n(445019),u=n(46844),m=n(750665),p=n(608284),h=n(581121),f=n(818350),g=n(796439),x=n(582902),_=n(362563),y=n(199689),b=n(460637),v=n(272063),C=n(643102),E=n(476920);let w=({texts:e,authInfo:t,surroundingContext:n})=>m.Ay.shared.adjustText({texts:e,action:{type:"SHORTEN"},jsonMode:e.length>1,surroundingContext:n},t),k=async({params:e,abortController:t,onTasksUpdate:n,clientLifecycleId:i})=>{let{featureType:r}=e,a=(0,p.i2)(),s={targets:(0,u.on)(a,{allowEmpty:!1,excludeDigitsAndSpecialChar:!1,excludeLockedNodes:!0}),parameters:null,selection:l.UN().getCurrentPage()?.directlySelectedNodes??[],activeNodes:a};c.zl.set(_.DZ,null),c.zl.set(_.F3,s),c.zl.set(_.Q8,""),await (0,E.GD)({params:{clientLifecycleId:i,state:s,makeCortexRequest:w,featureType:r,excludeDigitsAndSpecialChar:!1,editScopeLabel:"adjust-text"},abortController:t,onTasksUpdate:n})};function T(){let{close:e}=(0,g.cq)(),{longRunningAction:t,lastParameters:n,onRun:l,cancel:c,resetText:u,lastRun:m}=(0,E.Hd)({makeCortexRequest:w,featureType:h.JT.SHORTEN_TEXT}),{state:p,aiTrackingContext:_,tasks:k}=t,T=(0,r.useCallback)(()=>{u(),(0,f.B3)(h.JT.SHORTEN_TEXT),e()},[u,e]),j=k.length,S=k.filter(e=>e.state===f.z8.FAILED).length;switch(p){case f.qy.INITIAL:return(0,i.jsx)(b.AE,{action:h.JT.SHORTEN_TEXT,actionIcon:(0,i.jsx)(o.R,{}),actionLabel:(0,d.tx)("fullscreen_actions.quick_actions.shorten-text"),onPerform:()=>{l(null)},aiTrackingContext:_,getCustomDisabledTextFromSelectedNodes:e=>(0,E.bu)(e,{onlyAllowSingular:!0,instruction:(0,d.tx)("ai_text_tools.select_text_singular")}),instructionAction:{type:"learn_more",url:h.pY},children:(0,d.tx)("ai_text_tools.select_text_singular")});case f.qy.RUNNING:return(0,i.jsx)(C.F,{onCancel:()=>{c(),e()},aiTrackingContext:_,children:(0,d.tx)("ai_text_tools.shorten.running")});case f.qy.ERROR:let I;let{error:A}=t,N=[{type:y.ft.TRY_AGAIN,callback:()=>l(n)}],M=null;return(A instanceof E.Vz||(0,a.determineErrorReason)(A)===a.ErrorReason.CONTENT_LENGTH_LIMIT)&&(I=(0,d.tx)("ai.error.content_length_limit"),N=[]),A instanceof E.Jd&&(I=(0,d.tx)("ai_text_tools.missing_fonts"),N=[]),(0,a.determineErrorReason)(A)===a.ErrorReason.UNSAFE_OR_HARMFUL_CONTENT&&(N=[]),j>0&&S>0&&S<j&&(M=(0,d.tx)("ai_text_tools.shorten.couldnt_count",{failed:S,total:j})),(0,i.jsx)(y.Eb,{buttons:N,error:t.error,aiTrackingContext:_,customMessage:I,secondaryMessage:M});case f.qy.DONE:return(0,i.jsx)(v.Oq,{recordingKey:"shortenText",iterateOptions:[{type:v.is.UNDO,callback:T},{type:v.is.TRY_AGAIN,callback:()=>{l(n)}}],aiTrackingContext:{..._,iteration_view_type:x.$J.SUCCESS_WITH_ITERATION},targets:m?m.targets.map(e=>e.node.guid):void 0});case f.qy.CANCELLED:return null;default:(0,s.xb)(p)}}},639457:(e,t,n)=>{n.d(t,{K:()=>N});var i=n(239976),r=n(105652),a=n(244487),s=n(836848),o=n(43612),l=n(379141),d=n(39171),c=n(562418),u=n(750665),m=n(581121),p=n(430377),h=n(818350),f=n(796439),g=n(582902),x=n(199689),_=n(460637),y=n(272063),b=n(643102),v=n(184743),C=n(154963),E=n(178373),w=n(200438),k=n(452921),T=n(6393),j=n(204885);function S({items:e,onSelectItem:t,placeholder:n,showIcon:a=!0}){(0,w.If)(!1);let[s,o]=r.useState(""),[l,d]=r.useState([]);r.useEffect(()=>{d(e),o("")},[e]);let c=(0,i.jsx)(k.B,{resultCount:l.length,children:l.map(e=>(0,i.jsx)(k.B.Item,{primaryAction:{onAction:()=>t(e),shortcuts:[{key:v.Uz.ENTER}]},actionLabel:!1,recordingKey:e.label,children:(0,i.jsx)("div",{className:C.s.flex.justifyBetween.wFull.$,children:(0,i.jsx)("div",{className:C.s.ml28.$,children:e.label})})},e.label))}),u=t=>{o(t),d(e.filter(e=>e.label.toLowerCase().includes(t.toLowerCase())))},p=(0,E.Bd)();return(0,i.jsxs)(T.n,{height:m.wC,canShrinkIfNeeded:p,recordingKey:"parameterLikeList",children:[(0,i.jsx)(j.DM,{searchQuery:s,onSearchChange:u,onClear:()=>{u("")},placeholder:n,showIcon:a}),(0,i.jsx)(T.n.Body,{children:c})]})}var I=n(476920);let A=["Arabic","Urdu"];function N(){let e=(0,c.ow)(),t=[{name:"Arabic",label:(0,l.t)("ai_text_tools.translate.language.arabic")},{name:"Chinese (Simplified)",label:(0,l.t)("ai_text_tools.translate.language.chinese_simplified")},{name:"Chinese (Traditional)",label:(0,l.t)("ai_text_tools.translate.language.chinese_traditional")},{name:"Dutch",label:(0,l.t)("ai_text_tools.translate.language.dutch")},{name:"English (United Kingdom)",label:(0,l.t)("ai_text_tools.translate.language.english_uk")},{name:"English (United States)",label:(0,l.t)("ai_text_tools.translate.language.english_us")},{name:"Tagalog",label:(0,l.t)("ai_text_tools.translate.language.tagalog")},{name:"French",label:(0,l.t)("ai_text_tools.translate.language.french")},{name:"German",label:(0,l.t)("ai_text_tools.translate.language.german")},{name:"Hindi",label:(0,l.t)("ai_text_tools.translate.language.hindi")},{name:"Indonesian",label:(0,l.t)("ai_text_tools.translate.language.indonesian")},{name:"Italian",label:(0,l.t)("ai_text_tools.translate.language.italian")},{name:"Japanese",label:(0,l.t)("ai_text_tools.translate.language.japanese")},{name:"Korean",label:(0,l.t)("ai_text_tools.translate.language.korean")},{name:"Malay",label:(0,l.t)("ai_text_tools.translate.language.malay")},{name:"Polish",label:(0,l.t)("ai_text_tools.translate.language.polish")},{name:"Portuguese (Brazil)",label:(0,l.t)("ai_text_tools.translate.language.portuguese_brazil")},{name:"Portuguese (Portugal)",label:(0,l.t)("ai_text_tools.translate.language.portuguese_portugal")},{name:"Russian",label:(0,l.t)("ai_text_tools.translate.language.russian")},{name:"Spanish (Latin America)",label:(0,l.t)("ai_text_tools.translate.language.spanish_latin_america")},{name:"Spanish (Spain)",label:(0,l.t)("ai_text_tools.translate.language.spanish_spain")},{name:"Swedish",label:(0,l.t)("ai_text_tools.translate.language.swedish")},{name:"Tamil",label:(0,l.t)("ai_text_tools.translate.language.tamil")},{name:"Thai",label:(0,l.t)("ai_text_tools.translate.language.thai")},{name:"Turkish",label:(0,l.t)("ai_text_tools.translate.language.turkish")},{name:"Ukrainian",label:(0,l.t)("ai_text_tools.translate.language.ukrainian")},{name:"Urdu",label:(0,l.t)("ai_text_tools.translate.language.urdu")},{name:"Vietnamese",label:(0,l.t)("ai_text_tools.translate.language.vietnamese")}];e&&(t=t.filter(e=>!A.includes(e.name)));let n=(0,l.t)("ai_text_tools.translate.running"),v=r.useRef(null),{onRun:C,resetText:E,cancel:w,longRunningAction:k,lastRun:T}=(0,I.Hd)({makeCortexRequest:({texts:e,parameters:t,authInfo:n,surroundingContext:i})=>u.Ay.shared.adjustText({texts:e,action:{type:"TRANSLATE",language:t.language},jsonMode:e.length>1,surroundingContext:i},n),featureType:m.JT.TRANSLATE_TEXT}),{state:j,aiTrackingContext:N,tasks:M}=k,{close:R}=(0,f.cq)(),P=(0,p.s)(m.JT.TRANSLATE_TEXT),O=M.length,D=M.filter(e=>e.state===h.z8.FAILED).length,L=(0,d.to)();switch(j){case h.qy.RUNNING:return(0,i.jsx)(b.F,{onCancel:()=>{w(),R()},aiTrackingContext:N,children:n});case h.qy.INITIAL:switch(P.state){case p.w.NEEDS_INITIAL_SELECTION:case p.w.SELECTION_LOST:return(0,i.jsx)(_.AE,{action:m.JT.TRANSLATE_TEXT,actionLabel:(0,l.tx)("fullscreen_actions.quick_actions.translate-text"),actionIcon:(0,i.jsx)(o.c,{}),onPerform:()=>P.confirmInitialSelection(),getCustomDisabledTextFromSelectedNodes:e=>(0,I.bu)(e,{}),aiTrackingContext:N,instructionAction:{type:"learn_more",url:m.pY},children:(0,l.tx)("ai_text_tools.selection_instruction")});case p.w.SELECTION_OK:return(0,i.jsx)(S,{items:t,onSelectItem:e=>{let t={language:e.name};C(t),v.current=t},placeholder:(0,l.t)("ai_text_tools.translate.language"),showIcon:!L})}case h.qy.ERROR:let F;let{error:B}=k,U=null,V=[{type:x.ft.TRY_AGAIN,callback:()=>{if(v.current)C(v.current);else throw new I.ay("Last parameters is null")}}];return(B instanceof I.Vz||(0,a.determineErrorReason)(B)===a.ErrorReason.CONTENT_LENGTH_LIMIT)&&(F=(0,l.tx)("ai.error.content_length_limit"),V=[]),B instanceof I.Jd&&(F=(0,l.tx)("ai_text_tools.missing_fonts"),V=[]),(0,a.determineErrorReason)(B)===a.ErrorReason.UNSAFE_OR_HARMFUL_CONTENT&&(V=[]),O>0&&D>0&&D<O&&(U=(0,l.tx)("ai_text_tools.translate.couldnt_count",{failed:D,total:O})),(0,i.jsx)(x.Eb,{buttons:V,error:k.error,aiTrackingContext:N,customMessage:F,secondaryMessage:U});case h.qy.DONE:return(0,i.jsx)(y.Oq,{iterateOptions:[{type:y.is.UNDO,callback:()=>{E(),R()}}],recordingKey:"translateText",aiTrackingContext:{...N,iteration_view_type:g.$J.DEFAULT_SUCCESS},targets:T?T.targets.map(e=>e.node.guid):[]});case h.qy.CANCELLED:return null;default:(0,s.xb)(j)}}},969382:(e,t,n)=>{n.d(t,{ce:()=>_,eb:()=>C,qi:()=>E,yh:()=>y,zs:()=>b});var i=n(105652),r=n(298670),a=n(449979),s=n(229526),o=n(270450),l=n(405228),d=n(882268),c=n.n(d),u=n(620281),m=n(19047),p=n(553681),h=n(456556),f=n(279758);let g=l.z.object({description:l.z.string(),wasOutputOfPreviousGeneration:l.z.boolean().optional()});l.z.object({prompt:l.z.string(),attachmentMetadata:l.z.record(l.z.string(),g).optional()});let x=`User has also attached the following frames (represented as JSX) and their corresponding images, components used here can be referenced in the output:
`;function _(e){let t={};for(let n of(0,s.B)(e,{followInstances:!0})){let e=(0,r.getComponentInfoById)(n.guid,{enableTsArrays:!!(0,o.kc)().first_draft_ts_arrays,forDeprecatedFirstDraft:!0});if(!e){(0,m.xi)("first-draft","Component info not found for user-selected node",{componentGuid:n.guid},{reportAsSentryError:!0});continue}t[e.jsxName.toLowerCase()]=e}return t}async function y(e,t,n){let i=(await Promise.all(e.map(async e=>{var n;let i=await (0,p.nX)(e);if(!i)return(0,m.xi)("first-draft","Unable to get JSX for user-selected node",{nodeGuid:e.guid}),null;let r=t.get(e.guid);if(!r)return(0,m.xi)("first-draft","No image data found for user-selected node",{nodeGuid:e.guid}),null;let a=null;a=r.promise?await r.promise:r.blob;let s=await (n=a,new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>{let n=i.result;"string"==typeof n?e(n):t(Error("Failed to convert blob to Data URL"))},i.onerror=()=>{t(Error("Failed to read blob"))},i.readAsDataURL(n)}));return{guid:e.guid,jsxStr:i,imageUrl:s}}))).filter(a.Vq);return[{role:"system",content:x},{role:"user",content:c()(i.map(({guid:e,jsxStr:t,imageUrl:i},r)=>{let a=[{type:"text",text:`
ATTACHMENT #${r+1}:
`}];return n&&n[e]&&a.push({type:"text",text:`Description: ${[...n[e].wasOutputOfPreviousGeneration?["This was the output of a previous generation"]:[],n[e].description].join(" ")}
`}),t&&a.push({type:"text",text:`\`\`\`jsx
${t}
\`\`\`
`}),a.push({type:"image",image:i}),a}))}]}let b=URL.createObjectURL(new Blob(["data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="],{type:"image/gif"}));function v(e){return e.visible}function C(){let e=(0,i.useRef)(new Map),t=(0,f.Tv)();return(0,h.Fk)((t,n)=>{if(!n)return e.current=new Map,null;let i=n.map(e=>t.get(e)).filter(a.Vq).filter(v);return e.current=new Map(i.map(e=>[e.guid,e])),i.map(e=>e?.guid)},t),e.current}function E({enabled:e}){let[t,n]=i.useState(new Map),r=i.useRef(t);r.current=t;let a=i.useRef(!1),s=C();return i.useEffect(()=>{if(!e)return;let i=new Set(s.keys()),r=new Set(t.keys()),o=(0,u._i)(r,i);(0,u._i)(i,r).forEach(async e=>{let t=s.get(e);if(!t)return;let i=t.loadImagesAndExport([{imageType:"PNG"}]),r=(async()=>new Blob([await i],{type:"image/png"}))();n(t=>{let n=new Map(t);return n.set(e,{imageURL:null,blob:null,promise:r}),n});let o=await r;if(a.current)return;let l=URL.createObjectURL(o);n(t=>{let n=new Map(t);return n.set(e,{imageURL:l,blob:o,promise:null}),n})}),o.size>0&&n(e=>{let t=new Map(e);return o.forEach(e=>{if(!t.has(e))return;let n=t.get(e);n?.imageURL&&URL.revokeObjectURL(n.imageURL),t.delete(e)}),t})},[s,t,e]),i.useEffect(()=>()=>{a.current=!0,r.current.forEach(e=>{e.imageURL&&URL.revokeObjectURL(e.imageURL)})},[]),t}},311939:(e,t,n)=>{n.d(t,{YG:()=>b,sI:()=>y});var i=n(239976),r=n(105652),a=n(447364),s=n(379141),o=n(270450),l=n(445019),d=n(224542),c=n.n(d),u=n(499735),m=n(154963),p=n(170419),h=n(331811);let f=(0,l.E3)("first_draft_last_used_kit",""),g=(0,l.E3)("first_draft_reset_kit_for_byod",!0);function x(e){return"LOCAL"===e.dsKitKey.type?e.dsKitKey.pageId??"local":e.dsKitKey.key}function _({text:e}){return(0,i.jsxs)("div",{className:c()(m.s.flex.flexRow.$),children:[(0,i.jsx)(a.i,{style:{marginLeft:-2}})," ",(0,i.jsx)("span",{className:c()(m.s.pl4.$),children:e})]})}function y(e=!1){let{libraryKitsQueryStatus:t,localKits:n,libraryKits:i}=(0,p.Ml)(),[a,s]=(0,l.fp)(f),[d,c]=(0,l.fp)(g);d&&(0,o.kc)().first_draft_direct_gen&&(s(""),c(!1));let[u,m]=(0,r.useState)(null),h="loaded"===t;(0,r.useEffect)(()=>{if(h&&null===u){if(e){let e=n[0]??i[0]??null;e&&m({type:"KIT",kit:e})}else{let e=i[0]??n[0]??null;e&&m({type:"KIT",kit:e})}}},[n,i,h,u,m,e]);let _=(0,r.useMemo)(()=>[...i,...n],[i,n]),b=(0,r.useMemo)(()=>{let e=_.find(e=>x(e)===a);return h&&!e&&s(""),e??null},[a,_,s,h]);return{kitsAreLoaded:h,hasLastSelectedKit:h?!!b:!!a,selectedKit:b,setSelectedKit:r.useCallback(e=>{s(x(e))},[s]),selectedKitOption:u,setSelectedKitOption:m,allUsableKitEntries:_}}function b({items:e,kitsAreLoaded:t,selectedKitOption:n,setSelectedKitOption:r,recordingKey:a}){return(0,i.jsx)(h.m,{selected:n,onSelectedChange:r,placeholder:(0,i.jsx)(_,{text:t?(0,s.t)("first_draft.library_placeholder"):(0,s.t)("first_draft.kits_loading")}),labelForSelectedItem:e=>(0,i.jsx)(_,{text:e.kit.name}),displayAboveTarget:!0,lean:"right",items:e,recordingKey:u.Pt(a,"kitPicker"),disabled:!t})}},616431:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(865702),r=n(379141),a=n(637379),s=n(888903);function o(e,t,n=(0,r.t)("first_draft.share_trace_nudge_in_modal",{weirdOutput:(0,r.t)("first_draft.share_trace_nudge_weird_output")})){e(s.F.enqueue({type:"FIRST_DRAFT_SHOW_TRACE",message:n,button:{text:(0,r.t)("first_draft.share_trace"),action:()=>{(0,a.j)(JSON.stringify(t,null,2),"trace.json")}},onDismiss:i.lQ,timeoutOverride:2e4,timeoutType:"exact"}))}},378811:(e,t,n)=>{n.d(t,{Aw:()=>a,IO:()=>u,Ik:()=>l,Lx:()=>o,Y4:()=>s,cS:()=>c,jE:()=>d,nR:()=>i,u7:()=>r});let i=()=>Promise.resolve({}),r=()=>null,a=()=>null,s=()=>null,o=void 0,l=null,d=()=>null,c=()=>null,u=null},534366:(e,t,n)=>{n.d(t,{M:()=>f,f:()=>h});var i=n(572827),r=n(395753),a=n(194836),s=n(874476),o=n(503471),l=n(46691),d=n(21144),c=n(894710),u=n(542784),m=n(601869),p=n(450334);async function h(e){if(!e.hash)return null;let t=(0,p.tG)(),n=(0,i.nj)(e.hash);return await t.getAllVideoUrls(),t.getSignedUrls([n]).get(n)??null}async function f(e){let t=e.map(e=>new r.p({formats:[a.uS],source:new s.Ts(e)})),n=(await Promise.all(t.map(e=>Promise.all([e.getPrimaryVideoTrack(),e.getPrimaryAudioTrack()])))).filter(e=>!!e[0]&&!!e[1]),i=new o.Fl({codec:"avc",bitrate:l.m0}),p=new o.Ii({codec:"aac",bitrate:l.m0}),h=new d.k({format:new c.si,target:new u.Sn});h.addVideoTrack(i),h.addAudioTrack(p),await h.start();let f=0;for(let[e,t]of n){let n=new m.lc(e),r=new m.qw(t);for await(let e of n.samples())e.setTimestamp(e.timestamp+f),i.add(e);for await(let e of r.samples())e.setTimestamp(e.timestamp+f),p.add(e);f+=await e.computeDuration()}return(await h.finalize(),h.target.buffer)?new Uint8Array(h.target.buffer):null}},811528:(e,t,n)=>{n.d(t,{J:()=>P});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(379141),l=n(270450),d=n(224542),c=n.n(d),u=n(723850),m=n(806130),p=n(585066),h=n(709003),f=n(1007);function g(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let i=t.get(Object.keys(n)[0]);return i&&"MEDIA"===i.type?i:null}var x=n(384048),_=n(453658),y=n(772293),b=n(419312);let v=(0,_.m)(C);async function C(e){let t=await (0,x.OF)(()=>E(e),{times:10,interval:1e3});return await new Promise((n,i)=>{let r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",n),r.addEventListener("error",t=>{i(t.type+" loading the image with hash "+e)}),r.src=t}),t}async function E(e){let t=(await (0,b.Mj)([e],await y.Y5.openFilePromise())).s3_urls[e];if(!t)throw Error("Couldn't resolve image URL from server");return t}var w=n(445019),k=n(29161),T=n(355349),j=n(324880),S=n(448571),I=n(629004);let A="rich_media_overlay--loadingFallback--DsoTC",N="rich_media_overlay--croppedClipPath--WK4Dc";function M(e,t){e&&(t?(e.play(),k.Ay.safari&&(e.currentTime=.1)):(0,T.sQ)(e)?e.pause():(k.Ay.safari&&e.currentTime>.1&&(e.currentTime-=.1),e.play()))}let R=(0,r.memo)(({nodeId:e,mediaHash:t,isMaximized:n,setIsMaximized:a})=>{(0,S.RJ)(t);let s=(0,u.am)(),[o,l]=(0,r.useState)(null),[d,m,p,h]=function(){let[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(n){let e=()=>t(!0),i=()=>t(!1);return n.addEventListener("mousemove",e),n.addEventListener("mouseleave",i),()=>{n.removeEventListener("mousemove",e),n.removeEventListener("mouseleave",i)}}},[n]),[n,i,e,t]}(),f=(0,r.useRef)(null),g=(0,r.useRef)(!1),x=(0,w.md)(I.vE),[_,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!0),C=(0,r.useRef)(!1);(0,r.useEffect)(()=>{x&&s("figjam_video_started_playing",{mediaHash:t})},[s,t,x]),(0,r.useEffect)(()=>{!g.current&&d&&(g.current=!0,(0,S.mc)(f.current,d,t).then(e=>{f.current=e}))},[g,t,d]),(0,r.useEffect)(()=>{if(d)return e(),d.addEventListener("loadeddata",e),d.addEventListener("canplay",e),()=>{d.removeEventListener("loadeddata",e),d.removeEventListener("canplay",e)};function e(){d&&(2>(d.readyState||0)&&!C.current?v(!0):(C.current=!0,v(!1)))}},[d]),(0,r.useEffect)(()=>{s("figjam_video_selected",{mediaHash:t})},[s,t]);let E=(0,S.DD)(e),A=(0,S.ZU)(e),[R,P]=(0,w.fp)(I.H),{isVideoNodeHovered:O,pointerDownOnVideo:D}=R,L=(0,r.useCallback)((e,t)=>{P({isVideoNodeHovered:e,pointerDownOnVideo:t})},[P]);return(0,i.jsxs)("div",{className:"rich_media_overlay--videoContainer--30ABn",ref:l,children:[(0,i.jsx)("div",{className:c()("rich_media_overlay--clippedVideo--A6r4y",n?"rich_media_overlay--noClipPath--I1Pwk":N),children:(0,i.jsx)("video",{ref:m,crossOrigin:"anonymous",autoPlay:x&&!k.Ay.safari,className:c()("rich_media_overlay--video--oMS6X",n&&j.s4,n&&"rich_media_overlay--maximizedVideoBg--Gd3cC"),onMouseUp:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()},controls:k.Ay.isIpad&&n,onClick:function(){n&&M(d,_)}})}),(0,i.jsx)(T._L,{didAutoplayOnSelection:x,hasEnded:_,isLoading:b,isMaximized:n,isVideoHovered:p,isVideoNodeHovered:O,mediaHash:t,pointerDownOnVideo:D,setHasEnded:y,setIsMaximized:a,setIsVideoHovered:h,setVideoControls:L,shouldHideControlBar:A,shouldHidePlaybackButton:E,toggleVideoPlayback:M,videoContainerElement:o,videoElement:d})]})}),P=r.memo(function(){let e=(0,a.d4)(g);return!e||!e.richMediaInfo||(0,l.kc)().video_in_canvas_figjam&&(0,l.kc)().figjam_canvas_migrate_video_nodes&&"VIDEO"===e.richMediaInfo.richMediaType?null:(0,i.jsx)(O,{nodeGuid:e.guid,mediaHash:e.richMediaInfo.mediaHash,mediaType:e.richMediaInfo.richMediaType},e.richMediaInfo.mediaHash)}),O=r.memo(function(e){let{nodeGuid:t,mediaHash:n,mediaType:a}=e,s=r.useRef(null),o=r.useRef(null),l=(0,f._X)({subscribeToUpdates_expensive:!0}),[d,u]=r.useState(!1);return r.useEffect(()=>{let e=(0,h.EE)("rich-media",[t],e=>{o.current=e.position,B(s,l,o,d)});return o.current=e.currentNodePosition[t]?.position||null,B(s,l,o,d),()=>{(0,h.lB)("rich-media")}},[t,l,d]),(0,i.jsx)("div",{ref:s,className:c()("rich_media_overlay--richMediaOverlay--XvY-z",{"rich_media_overlay--maximizedMediaPositioner--l3U6r":d}),children:(0,i.jsx)(m.tH,{fallback:(0,i.jsx)(L,{mediaType:a,mediaHash:n}),boundaryKey:"Video",children:(0,i.jsxs)(r.Suspense,{fallback:(0,i.jsx)(D,{}),children:["ANIMATED_IMAGE"===a&&(0,i.jsx)(F,{mediaHash:n}),"VIDEO"===a&&(0,i.jsx)(R,{nodeId:t,mediaHash:n,setIsMaximized:u,isMaximized:d})]})})})});function D(){return(0,i.jsx)("div",{className:c()(A,N),children:(0,i.jsx)(p.k,{size:"lg"})})}function L({mediaHash:e,mediaType:t}){let n=(0,o.tx)("whiteboard.gif.failed_to_load");return"VIDEO"===t&&(n=(0,o.tx)("whiteboard.video.failed_to_load"),s.tHB?.isVideoBeingUploaded(e)&&(n=(0,o.tx)("whiteboard.video.still_uploading"))),(0,i.jsx)("div",{className:c()(A,N),children:(0,i.jsx)("div",{className:"rich_media_overlay--errorText--k7-OD text--fontNeg16--tWSFk text--_fontBase--VaHfk text--_negText--7Cnf0",children:n})})}function F({mediaHash:e}){let t=v.useValue(e),n=(0,u.am)();return r.useEffect(()=>{n("figjam_gif_started_playing")},[n]),(0,i.jsx)("img",{crossOrigin:"anonymous",style:{height:"100%",backgroundColor:"white",width:"100%"},src:t,alt:"",className:N})}function B(e,t,n,i){if(!e.current||!t||!n.current)return;let r=e.current;if(i)r.style.position="fixed",r.style.height="auto",r.style.width="auto",r.style.transform="none",r.style.pointerEvents="all";else{let e=n.current,i=(0,f.Yb)(t,e);r.style.height=`${i.height}px`,r.style.width=`${i.width}px`,r.style.transform=`translate(${i.x+t.x}px, ${i.y+t.y}px) ${(0,h.aZ)(e)}`,r.style.transformOrigin="top left"}}},448571:(e,t,n)=>{n.d(t,{DD:()=>C,RJ:()=>g,ZU:()=>v,mc:()=>w});var i,r=n(105652),a=n(384048),s=n(466082),o=n(575015),l=n(910136),d=n(453658),c=n(624789),u=n(772293),m=n(1007),p=n(456556),h=n(737473);let f=(0,d.m)(x,(i=(0,d.y)(6e4),(e,t)=>!t.deferred.result&&i(e,t)));function g(e){return f.useValue(e)}async function x(e){return await (0,a.OF)(()=>_(e),{times:20,interval:1e3})}async function _(e){let t=await y(e);if(!t)throw Error("Couldn't resolve video URL from server");return t}async function y(e){let t=await u.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");try{let n=await h.S.getVideosDownload({fileKey:t.fileKey,hexHash:e});if(200!==n.status||n.data.error)throw Error("api error while resolving video");return n.data.meta.signed_url}catch(t){throw console.warn(`Couldn't download video with hash ${e}`),t}}let b=1/15;function v(e){let[t,n]=(0,r.useState)(!0),i=E(e),a=(0,m.qc)((0,m._X)({subscribeToUpdates_expensive:!1}));return(0,r.useEffect)(()=>{let e=0;i&&(e=i.x*i.y),n(e/(a.height*a.width)<b)},[i,a.height,a.width]),t}function C(e,{mediaPlayBadgeRadius:t=24}={}){let[n,i]=(0,r.useState)(!0),a=E(e),s=(0,m._X)({subscribeToUpdates_expensive:!1});return(0,r.useEffect)(()=>{a&&i(a.x*s.zoomScale<4*t||a.y*s.zoomScale<4*t)},[t,a,s.zoomScale]),n}function E(e){return(0,p.wA)((e,t)=>{let n=e.get(t);return n?n.size:null},e)}async function w(e,t,n,i,r,a=0){window.VIDEOJS_NO_DYNAMIC_STYLE=!0;let d=null;if(i&&(d=s.UN().get(i)?.videoPlayback),e)return e;t.style.height="100%",t.style.width="100%",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center";let m=void 0!==t.volume?t.volume:1,p=r?.startTimeMs??d?.startTimeMs??0,h=r?.endTimeMs??d?.endTimeMs??0,f=p/1e3,g=h>0?h/1e3:null,x=await (0,c.Fe)();return new Promise(e=>{let i=r=>{let s=x.videoJs(t,{muted:t.muted??!1,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},async()=>{if((0,o.PN)()){s.src({type:"video/mp4",src:`https://static.figma.com/uploads/${n}`}),e(s);return}s.on("ready",()=>{s.volume(m),s.currentTime(f)}),s.on("timeupdate",()=>{let e=s.currentTime();null!==g&&void 0!==e&&e>=g&&(s.pause(),s.currentTime(g))});try{let t=await u.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");let i=`/api/files/${t.fileKey}/videos/${n}/manifest`;await (0,c.uz)(i,!0,s),e(s)}catch(t){try{let t=await _(n);l.k.warn("Reverting to fallback video source"),await (0,c.uz)(t,!1,s),e(s)}catch(t){r<a?(s.dispose(),setTimeout(()=>{i(r+1)},500)):e(null)}}})};i(0)})}},551821:(e,t,n)=>{n.d(t,{kL:()=>ed,kF:()=>el,Fr:()=>em});var i=n(239976),r=n(105652),a=n(20002),s=n(735786),o=n(943360),l=n(303288),d=n(563225),c=n(847923),u=n(74372),m=n(224542),p=n.n(m),h=n(141288),f=n(253983),g=n(431757),x=n(328452),_=n(282746),y=n(792026),b=n(543595),v=n(409084),C=n(450207),E=n(536378),w=n(551492),k=n(783868),T=n(720410),j=n(715307),S=n(605985),I=n(674531),A=n(362844),N=n(236410),M=n(910496),R=n(360381),P=n(397043),O=n(466082),D=n(469543);function L(e){let t=(0,a.d4)(e=>e.mirror.appModel.pagesList),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),r=(0,a.wA)();if(!t||t.length<=1)return null;let s=async e=>{await (0,O.UN)().setCurrentPageFromNodeAsync(e.nodeId)},o=t.map(e=>({displayText:e.name,disabled:!1,isChecked:n===e.nodeId,nodeId:e.nodeId}));return(0,i.jsx)(D.j,{dispatch:r,items:o,showPoint:!0,parentRect:e.dropdown.data.targetRect,onSelectItem:s,recordingKey:"pagesPicker"})}var F=n(836848),B=n(415839),U=n(798913);n(323264);var V=n(7857),H=n(27997),z=n(960210),G=n(765996),K=n(33433),W=n(562418),q=n(103392),X=n(643444),Y=n(105471),J=n(107811),Z=n(25403);let Q=(0,V._d)(r.memo(function(){let e=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),t=(0,a.d4)(e=>e.selectedView),n=(0,W.m0)(),o=(0,a.d4)(e=>(0,z.tn)(e)),l=n&&!o,d=(0,Y.g)(),c=(0,q.d)({debugMenuItems:d}),u=r.useMemo(()=>({isDesktopMenu:!1,isReadOnly:e,isSearching:!1,selectedView:t,isLimitedDevMode:l}),[e,t,l]);return 0===c.length?null:(0,i.jsx)(s.mc,{htmlAttributes:{"data-testid":"main-menu"},children:(0,i.jsx)($,{items:c,parentKey:"mainMenu",filterOptions:u})})}),"FigmaMainMenu");function $({items:e,parentKey:t,filterOptions:n}){let a=r.useMemo(()=>{let t;let i=[],r=[];for(let a of e)if((0,J.UN)(a,n)){if((0,G.k$)(a)){if(0===r.length)continue;i.push({items:r,title:t}),r=[],t=void 0}else if((0,G.gN)(a))t=a.name;else if((0,G.TV)(a)){if(!a.children||0===a.children.length||!a.children.some(e=>(0,J.UN)(e,n)))continue;r.push(a)}else r.push(a)}return r.length>0&&i.push({items:r,title:t}),i},[e,n]);return(0,i.jsx)(i.Fragment,{children:a.map((e,r)=>(0,i.jsx)(s.YJ,{children:e.items.map((e,r)=>{let a;let s=(a="",(0,G.id)(e)?a=`jsx-element-${r}`:(0,G._o)(e)?a=e.recordingKey||e.action||e.name||`action-${r}`:(0,G.TV)(e)&&(a=e.childDropdown&&e.childDropdown.recordingKey||e.name),`${t}.${a}`);return(0,i.jsx)(et,{item:e,itemKey:s,filterOptions:n},s)})},e.title||`menu-group-${r}`))})}function ee(e){return e.displayText||(0,K.A)((0,G.Dz)(e),e.args)}function et({item:e,itemKey:t,filterOptions:n}){return(0,G.id)(e)?(0,i.jsx)("div",{className:"x1nnhrsq",children:e.render()}):(0,G.TV)(e)?(0,i.jsxs)(s.g8,{children:[(0,i.jsx)(s.ZP,{recordingKey:t,children:ee(e)}),(0,i.jsx)(s.MJ,{children:(0,i.jsx)($,{items:e.children,parentKey:t,filterOptions:n})})]}):(0,G._o)(e)?(0,i.jsx)(en,{item:e,itemKey:t}):void(0,F.xb)(e)}function en({item:e,itemKey:t}){let n=(0,a.wA)(),o=(0,a.d4)(t=>e.action&&(0,M.Yh)(t.mirror.appModel,e.action)),l=r.useCallback(t=>{let n=t.mirror.appModel.keyboardShortcuts;return(0,M.c1)(n,(0,G.Dz)(e))},[e]),d=(0,a.d4)(l),c=e.shortcutText||d,u="object"==typeof e.iconType?void 0:(0,Z.QU)(e.iconType),m=(0,G.Zj)(e),p=r.useCallback(t=>m&&(0,G.WJ)(t.mirror.appModel,e),[m,e]),h=(0,a.d4)(p),f=r.useCallback(t=>{U.l7.user(`fullscreen-menu-${e.action??"non-action"}`,()=>{if(e.callback&&e.callback((0,G.Dz)(e),e.args,n,t),e.action){let i=e.action;e.loadingIndicatorString?n(H.n.set({message:e.loadingIndicatorString,callback:()=>{X.VU.get(i,e.source??"menu",e.args)(t)}})):X.VU.get(i,e.source??"menu",e.args)(t)}})},[e,n]),g=r.useCallback((e,t)=>{f(t.event)},[f]),x=r.useCallback(e=>{f(e)},[f]);return m&&!u?(0,i.jsxs)(B.H_,{checked:h,"data-onboarding-key":e["data-onboarding-key"],disabled:e.disabled||!(e.name||o),onChange:g,recordingKey:t,children:[ee(e),(0,i.jsxs)(s.Ov,{children:[e.rightIcon,c&&(0,i.jsx)(s.rm,{children:c}),e.rightText&&(0,i.jsx)(s.ME,{children:e.rightText})]})]}):(0,i.jsxs)(s.q7,{"data-onboarding-key":e["data-onboarding-key"],disabled:e.disabled||!(e.name||o),onClick:x,recordingKey:t,children:[u&&(0,i.jsx)(s.Q$,{children:u}),ee(e),(0,i.jsxs)(s.Ov,{children:[e.rightIcon,c&&(0,i.jsx)(s.rm,{children:c}),e.rightText&&(0,i.jsx)(s.ME,{children:e.rightText})]})]})}var ei=n(302711),er=n(624631),ea=n(5369),es=n(969580),eo=n(464207);let el="fullscreen_menu_visible",ed="fullscreen_menu_hidden",ec=[ei.PH.type];function eu(){return"main-menu"}let em=r.memo(function(e){return(0,I.o3)(I.nt.mainMenuFPLMigration)?(0,i.jsx)(ep,{...e}):(0,i.jsx)(eh,{...e})}),ep=r.memo(function(e){let t=(0,a.wA)(),{getTriggerProps:n,manager:u}=s.b({padding:{bottom:(0,f.Pg)()+12}}),m=(0,_.b)(),y=(0,k.$D)(),C=!(0,S.iZ)(),I=(0,T.k)(),M=(0,x.Om)(),{modalShown:P,selectedView:O}=(0,c.R)(e=>({modalShown:e.modalShown,selectedView:e.selectedView})),D=P?.type,L=D&&ec.includes(D),F="fullscreen"===O.view&&O.editorType===A.nT.Whiteboard,B=u.isOpen;if(r.useEffect(()=>{B&&(t(w.jD()),L&&t(E.ES({type:D})))},[B,t,L,D]),r.useEffect(()=>{B?(0,b.YQ)({id:el}):(0,b.YQ)({id:ed})},[B]),(0,j.eM)())return(0,i.jsx)("div",{className:ea.Z7,children:(0,i.jsx)(l.J,{})});let U=(0,i.jsxs)(o.E,{"aria-label":(0,v.t)("fullscreen_actions.main_menu"),className:p()(ea.Yd,{[ea.ET]:B}),"data-onboarding-key":er.tO,"data-tooltip":eu(),"data-tooltip-offset-x":m?8:0,"data-tooltip-show-right":m,"data-tooltip-type":N.Ib.LOOKUP,recordingKey:"figmaIconButton",...C?{onClick:()=>{F?(t(g.Ts({origin:"logged_out_main_menu_toolbar",redirectUrl:h.Ay.location.pathname,signedUpFromOpenSession:y})),t(E.to({type:R.x,data:{headerText:(0,v.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}))):I&&M("LEFT_PANEL_FIGMA_LOGO")}}:n(),children:[(0,i.jsx)(l.J,{}),!e.hideChevron&&(0,i.jsx)(d.O,{className:ea.xW})]},"toggle-menu-button");return C?U:(0,i.jsxs)(s.bL,{manager:u,children:[U,(0,i.jsx)(Q,{})]})}),eh=r.memo(function(e){let t=r.useRef(null),n=(0,a.wA)(),s=r.useMemo(()=>(0,u.g)(),[]),{dropdownShown:o,modalShown:d,user:m,selectedView:f}=(0,c.R)(e=>({dropdownShown:e.dropdownShown,modalShown:e.modalShown,user:e.user,selectedView:e.selectedView})),w=(0,k.$D)(),S=(0,T.k)(),I=(0,x.Om)();r.useEffect(()=>{(0,M.TY)(o)?(0,b.YQ)({id:el}):(0,b.YQ)({id:ed})},[o]);let O=r.useRef(null),D=(0,_.b)();return(0,j.eM)()?(0,i.jsx)("div",{className:ea.Z7,children:(0,i.jsx)(l.J,{})}):(0,i.jsxs)(y.i,{ref:t,"aria-controls":s,"aria-expanded":(0,M.TY)(o),"aria-haspopup":"menu",ariaLabel:(0,v.t)("fullscreen_actions.main_menu"),chevronRef:O,className:p()(ea.AQ,{[ea.ET]:(0,M.TY)(o)}),"data-tooltip":eu(),"data-tooltip-offset-x":D?8:0,"data-tooltip-show-right":D,"data-tooltip-type":N.Ib.LOOKUP,fallbackSvg:eo.A,id:"toggle-menu-button",isUI3:!0,onClick:()=>{let e=t.current;if(!m||m.appData&&m.appData.loggedOut){if(e){if("fullscreen"===f.view&&f.editorType===A.nT.Whiteboard)n(g.Ts({origin:"logged_out_main_menu_toolbar",redirectUrl:h.Ay.location.pathname,signedUpFromOpenSession:w})),n(E.to({type:R.x,data:{headerText:(0,v.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}));else{if(S){I("LEFT_PANEL_FIGMA_LOGO");return}n(C.j7({type:M.G,data:{targetRect:e.getBoundingClientRect()}}))}}return}if(d?.type&&ec.includes(d?.type)&&n(E.ES({type:d.type})),(0,M.TY)(o))n(C.oB());else if(e){let t={type:M.pi,data:{targetRect:e.getBoundingClientRect()},hasOwnEscKeyHandler:!0};n(C.j7(t))}},onboardingKey:er.tO,positionOnChevron:!0,recordingKey:"toggleMenuTopbarButton",showChevron:!e.hideChevron,svg:es.A,ui3Icon:(0,i.jsx)(l.J,{}),children:[(0,M.TY)(o)&&(0,i.jsx)(P.e,{id:s,"aria-labelledby":"toggle-menu-button",controlledByID:"toggle-menu-button",dropdown:o,chevronRef:O,positionOnChevron:!0},"fullscreen-menu"),(0,M.IS)(o)&&(0,i.jsx)(L,{dropdown:o})]},"toggle-menu-button")})},949808:(e,t,n)=>{n.d(t,{QY:()=>o,Zk:()=>r,xw:()=>l});var i=n(445019);let r=(0,i.eU)({seen_fj_upsell_draft_modal_1:{fileKey:void 0,sessionId:0},seen_fj_upsell_draft_modal_2:{fileKey:void 0,sessionId:0},seen_fj_upsell_draft_modal_3:{fileKey:void 0,sessionId:0},seen_fj_upsell_team_modal_1:{fileKey:void 0,sessionId:0},seen_fj_upsell_team_modal_2:{fileKey:void 0,sessionId:0},seen_fj_upsell_team_modal_3:{fileKey:void 0,sessionId:0}}),a=(0,i.eU)({showing:!1,userFlag:null}),s=(0,i.eU)(e=>e(a),(e,t,n)=>{t(a,n)}),o=(0,i.eU)(e=>e(s)),l=(0,i.eU)(null,(e,t,{showing:n,userFlag:i=null})=>{t(s,{showing:n,userFlag:i})})},405539:(e,t,n)=>{n.d(t,{s:()=>eN});var i=n(239976),r=n(7857),a=n(105652),s=n(20002),o=n(379141),l=n(445019),d=n(348149),c=n(969816),u=n(554408),m=n(536378),p=n(136393),h=n(526575),f=n(574220),g=n(550534),x=n(303740),_=n(223487),y=n(949808),b=n(224542),v=n.n(b),C=n(338630),E=n(855616);function w({name:e,onBadgeClick:t,text:n,trackingProperties:r,isLocked:a,children:s}){let o=a?"paid_status_badge_base--locked--KmuYY":e===c._Y.DEV_MODE_TRIAL?"paid_status_badge_base--devmode--c-PVs":"paid_status_badge_base--brand--VcZY8";return(0,i.jsx)(C.fu,{name:e,properties:{...r,text:e},children:(0,i.jsxs)("div",{className:"paid_status_badge_base--container---jbV1",children:[(0,i.jsx)(C.$z,{type:"button",className:"paid_status_badge_base--button--7gnVP","data-onboarding-key":E.l,onClick:t,children:(0,i.jsx)("span",{className:v()("paid_status_badge_base--badge--sDP-x text--fontPos11--rO47d text--_fontBase--VaHfk",o),children:n})}),s]})})}function k({openFile:e}){let t=(0,E.I)(e.editorType),n=function(e){let t=(0,l.md)(x.UQ),n=(0,l.md)(f.zN),{getConfig:i}=(0,d.I7)("exp_free_badge_in_drafts_plan_comparison");return a.useMemo(()=>"design"===e&&t&&"loaded"===n.status&&!1===n.data&&!!i().getValue("free_badge_visible",!1),[e,t,n.status,n.data,i])}(e.editorType),r={fileKey:e.key,productType:(0,h.pi)(e)};return t?(0,i.jsx)(T,{trackingProperties:r}):n?(0,i.jsx)(j,{trackingProperties:r}):null}function T({trackingProperties:e}){let t=(0,s.wA)(),n=(0,l.md)(y.QY),r=(0,l.Xr)(y.xw),a=(0,l.md)(y.Zk),d=(0,s.d4)(e=>e.multiplayer.sessionID),h=(0,_.tS)();return(0,i.jsx)(w,{name:c._Y.FREE,onBadgeClick:()=>{n.showing&&n.userFlag&&(r({showing:!1}),t(m.Lo()),t(p.b({[n.userFlag]:!0})),a[n.userFlag]={fileKey:h||void 0,sessionId:d}),t(m.to({type:u.V,data:{entrypoint:g.C.DRAFT_FILE_BADGE,openCheckoutInNewTab:!0}}))},text:(0,o.t)("fullscreen.filename_view.free"),trackingProperties:e})}function j({trackingProperties:e}){let t=(0,s.wA)();return(0,i.jsx)(w,{name:c._Y.FREE,onBadgeClick:()=>{t(m.to({type:u.V,data:{entrypoint:g.C.DESIGN_DRAFT_FILE_BADGE,openCheckoutInNewTab:!0}}))},text:(0,o.t)("fullscreen.filename_view.free"),trackingProperties:e})}var S=n(270450),I=n(270351),A=n(632399),N=n(109172),M=n(458792),R=n(590277),P=n(632222),O=n(877964),D=n(576787),L=n(920675),F=n(329076),B=n(832374),U=n(950850),V=n(716759),H=n(719749),z=n(493064),G=n(346942),K=n(154963),W=n(227517),q=n(130763),X=n(639184),Y=n(535996),J=n(610604),Z=n(477916),Q=n(890305),$=n(951633);let ee="file_tracker_upsell_modal--walkThroughModal--dLnNq pointer_modal--walkThroughModalAnimateFast--FxdyO pointer_modal--walkThroughModal--8YJl8 pointer_modal--pointerModal--VrJy4",et="file_tracker_upsell_modal--modalContent--HOute",en="file_tracker_upsell_modal--progressBar--r8aAI",ei="file_tracker_upsell_modal--progressDefault---jM-i",er="file_tracker_upsell_modal--progressDefaultV2--DOQ87",ea="file_tracker_upsell_modal--progressActiveV2--ZDto9 file_tracker_upsell_modal--progressDefaultV2--DOQ87",es="file_tracker_upsell_modal--progressWarningV2--aN-rP file_tracker_upsell_modal--progressDefaultV2--DOQ87",eo="file_tracker_upsell_modal--progressActive--CYoqc file_tracker_upsell_modal--progressDefault---jM-i",el="file_tracker_upsell_modal--progressWarning--4Zsdk file_tracker_upsell_modal--progressDefault---jM-i";function ed(e){let t;let{teamId:n,dismissModal:r,topPadding:a,pointerPaddingOffset:s}=e,l=(0,H.bc)(J.bel,{teamId:n}),d=(0,_.q5)(),c=(0,A.y)(n,g.C.FILE_TRACKER_MODAL),u=(0,q.E9)(),m=Y.h.useTrackingContext({trigger:Z.b.FILE_TRACKER_MODAL});if(!d||"loaded"!==l.status)return null;if(u)t=(0,z.oA)(l.data.team?.teamFileCounts?.totalFileCount)??0;else switch(d.editorType){case"design":t=l.data.team?.teamFileCounts?.designFileCount??0;break;case"whiteboard":t=l.data.team?.teamFileCounts?.whiteboardFileCount??0;break;case"slides":t=parseInt(l.data.team?.teamFileCounts?.slideFileCount??"0")}if(void 0===t||0===t)return null;let p=t<F.WW?(0,o.tx)("fullscreen.file_tracker_modal.num_files_of_max_free_files_created",{numFiles:t,maxFreeFiles:F.WW}):(0,o.tx)("fullscreen.file_tracker_modal.this_is_your_last_free_file"),f=t<F.WW?(0,o.tx)("fullscreen.file_tracker_modal.starter_plans_are_free_but_they_limit_you_to_just_max_free_files",{maxFreeFiles:F.WW}):(0,o.tx)("fullscreen.file_tracker_modal.max_free_files_already_you_are_becoming_a_pro",{maxFreeFiles:F.WW}),x=[(0,o.t)("fullscreen.file_tracker_modal.unlimited_files_pages"),(0,o.t)("fullscreen.file_tracker_modal.audio_conversations_in_files"),(0,o.t)("fullscreen.file_tracker_modal.unlimited_version_history_and_more")],y={fileTeamId:n,numFiles:t,productType:(0,h.pi)(d),...m};return(0,i.jsx)(C.fu,{name:"File Tracker Modal",properties:y,children:(0,i.jsx)($.CR,{animateQuickly:!0,className:ee,disableClickOutsideToHide:!0,dismissModal:r,pointerPaddingOffset:s,shouldCenterArrow:Q.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,targetKey:E.l,topPadding:a,width:330-2*$.uv,children:(0,i.jsxs)("div",{className:et,"data-testid":"fileTrackerUpsellModalContent",children:[(0,i.jsxs)("div",{className:en,children:[(0,i.jsx)("div",{className:v()(eo,{[el]:t>=F.WW})}),(0,i.jsx)("div",{className:v()(ei,{[eo]:t>1,[el]:t>=F.WW})}),(0,i.jsx)("div",{className:v()(ei,{[el]:t>=F.WW})})]}),(0,i.jsx)("h1",{className:"file_tracker_upsell_modal--modalTitle--IzR7f",children:p}),(0,i.jsx)("p",{className:"file_tracker_upsell_modal--modalBody--uMclL",children:f}),(0,i.jsx)("div",{className:K.s.font11.colorText.lh16.fontMedium.mb24.pr24.$,children:(0,i.jsx)(W.Y,{direction:"vertical",spacing:16,children:x.map((e,t)=>(0,i.jsxs)(W.Y,{direction:"horizontal",verticalAlignItems:"start",spacing:8,children:[(0,i.jsx)("span",{children:"\u2713"}),(0,i.jsx)("span",{children:e})]},t))})}),(0,i.jsx)(G.vd,{className:"file_tracker_upsell_modal--comparePlansButton--4zObb",onClick:()=>{r(),c()},dataTestId:"fileTrackerUpsellModalCta",trackingProperties:{trackingDescriptor:X.c.COMPARE_PLANS},children:(0,o.tx)("fullscreen.file_tracker_modal.compare_plans")})]})})})}var ec=n(942356),eu=n(454705);n(323264);var em=n(598334),ep=n(345293),eh=n(362844);function ef(e){let t;let{teamId:n,dismissModal:r,topPadding:a,pointerPaddingOffset:s}=e,l=(0,H.bc)(J.bel,{teamId:n}),d=(0,_.q5)(),c=(0,A.y)(n,g.C.FILE_TRACKER_MODAL),u=Y.h.useTrackingContext({trigger:Z.b.FILE_TRACKER_MODAL});if(!d||"loaded"!==l.status)return null;let m=d.editorType===L._Y.SITES||d.editorType===L._Y.DESIGN;switch(d.editorType){case"design":case"sites":t=(l.data.team?.teamFileCounts?.designFileCount??0)+parseInt(l.data.team?.teamFileCounts?.sitesFileCount??"0");break;case"whiteboard":t=l.data.team?.teamFileCounts?.whiteboardFileCount??0;break;case"slides":t=parseInt(l.data.team?.teamFileCounts?.slideFileCount??"0")}if(void 0===t||0===t)return null;let p=(0,o.tx)("fullscreen.file_tracker_modal.num_files_of_max_free_files_product_type_created",{numFiles:t,maxFreeFiles:F.WW,productStr:"sites"===d.editorType||"design"===d.editorType?(0,o.t)("fullscreen.file_tracker_modal.figma_design_and_figma_sites"):(0,ep.VG)((0,em.wR)(d.editorType))}),f=(0,o.tx)("fullscreen.file_tracker_modal.upgrade_your_plan_for"),x=[(0,o.t)("fullscreen.file_tracker_modal.unlimited_files_folders"),(0,o.t)("fullscreen.file_tracker_modal.advanced_prototyping"),(0,o.t)("fullscreen.file_tracker_modal.team_wide_design_library")],y={fileTeamId:n,numFiles:t,productType:(0,h.pi)(d),...u};return(0,i.jsx)(C.fu,{name:"File Tracker Modal V2",properties:y,children:(0,i.jsx)(eu.J,{brand:(0,eh.aj)(d.editorType??L._Y.DESIGN),children:(0,i.jsx)($.CR,{animateQuickly:!0,className:ee,dismissModal:r,pointerPaddingOffset:s,shouldCenterArrow:Q.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,targetKey:E.l,topPadding:a,width:260-2*$.uv,children:(0,i.jsxs)("div",{className:et,"data-testid":"fileTrackerUpsellModalContent",children:[(0,i.jsxs)("div",{className:en,children:[(0,i.jsx)("div",{className:v()(ea,{[es]:t>=F.WW})}),(0,i.jsx)("div",{className:v()(er,{[ea]:t>1,[es]:t>=F.WW})}),(0,i.jsx)("div",{className:v()(er,{[es]:t>=F.WW})})]}),(0,i.jsxs)("h1",{className:"x1j61x8r x1akne3o x1e56ztr xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:[p," ",m&&(0,i.jsx)(G.CY,{href:"https://help.figma.com/hc/articles/33543548184215",target:"_blank",trusted:!0,children:(0,o.t)("fullscreen.file_tracker_modal.learn_more")})]}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x12sbs06",children:(0,i.jsxs)(W.Y,{direction:"vertical",spacing:8,children:[(0,i.jsx)("p",{children:f}),x.map((e,t)=>(0,i.jsxs)(W.Y,{direction:"horizontal",verticalAlignItems:"start",spacing:8,children:[(0,i.jsx)("span",{children:"\u2713"}),(0,i.jsx)("span",{children:e})]},t))]})}),(0,i.jsx)(ec.IK,{onClick:()=>{r(),c()},children:(0,o.tx)("fullscreen.file_tracker_modal.view_plans")})]})})})})}function eg(e){let{teamId:t,dismissModal:n,topPadding:r,pointerPaddingOffset:a}=e,s=(0,_.q5)(),l=(0,A.y)(t,g.C.MAKE_UPSELL_MODAL),d=Y.h.useTrackingContext({trigger:Z.b.MAKE_UPSELL_MODAL});if(!s||s.editorType!==L._Y.FIGMAKE)return null;let c=(0,o.t)("figmake.make_upsell_modal.title"),u=[(0,o.t)("figmake.make_upsell_modal.3000_credits"),(0,o.t)("figmake.make_upsell_modal.importing_libraries"),(0,o.t)("figmake.make_upsell_modal.edit_make_files")],m=(0,o.t)("figmake.make_upsell_modal.upgrade_your_plan_for"),p={fileTeamId:t,productType:(0,h.pi)(s),...d};return(0,i.jsx)(C.fu,{name:"Make Upsell Modal",properties:p,children:(0,i.jsx)(eu.J,{brand:(0,eh.aj)(s.editorType??L._Y.FIGMAKE),children:(0,i.jsx)($.CR,{animateQuickly:!0,className:"make_upsell_modal--walkThroughModal--NuENz pointer_modal--walkThroughModalAnimateFast--FxdyO pointer_modal--walkThroughModal--8YJl8 pointer_modal--pointerModal--VrJy4",disableClickOutsideToHide:!0,dismissModal:n,pointerPaddingOffset:a,shouldCenterArrow:Q.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,targetKey:E.l,topPadding:r,width:260-2*$.uv,children:(0,i.jsxs)("div",{className:"xdpxx8g x1q2oy4v","data-testid":"makeUpsellModalContent",children:[(0,i.jsx)("h1",{className:"x1j61x8r x1akne3o x1e56ztr xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:c}),(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x12sbs06",children:(0,i.jsxs)(W.Y,{direction:"vertical",spacing:8,children:[(0,i.jsx)("p",{children:m}),u.map((e,t)=>(0,i.jsxs)(W.Y,{direction:"horizontal",verticalAlignItems:"start",spacing:8,children:[(0,i.jsx)("span",{children:"\u2713"}),(0,i.jsx)("span",{children:e})]},t))]})}),(0,i.jsx)(ec.IK,{onClick:()=>{n(),l()},children:(0,o.t)("fullscreen.file_tracker_modal.view_plans")})]})})})})}var ex=n(210823);function e_({dismissModal:e,teamId:t}){let n=(0,s.wA)(),r=(0,D.TN)(t);return(0,i.jsx)(C.fu,{name:"Pro trial upsell modal",properties:U.ng.getTrackingProperties(),children:(0,i.jsx)($.CR,{width:300,targetKey:E.l,dismissModal:e,shouldCenterArrow:Q.EL.FALLBACK,hideCloseButton:!0,children:(0,i.jsxs)("div",{className:"pro_trial_upsell_modal--container--bDE-t",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ex.E,{fontSize:13,fontWeight:"semi-bold",children:(0,o.tx)("fullscreen.pro_trial_upsell_modal.title",{numOfDaysLeft:r?.daysLeft})})}),(0,i.jsx)("p",{className:"pro_trial_upsell_modal--textContainer--FK6-Y",children:(0,i.jsx)(ex.E,{fontSize:11,children:(0,o.tx)("fullscreen.pro_trial_upsell_modal.description")})}),(0,i.jsx)("div",{className:"pro_trial_upsell_modal--btnContainer--gqg5v",children:(0,i.jsx)(G.vd,{trackingProperties:{trackingDescriptor:X.c.UPGRADE_FROM_FILENAME_PRO_BADGE,...U.ng.getTrackingProperties("Upgrade now")},onClick:()=>{e(),n((0,m.to)({type:u.V,data:{teamId:t,entrypoint:g.C.PRO_TRIAL_UPSELL_MODAL,openCheckoutInNewTab:!0}}))},children:(0,o.t)("fullscreen.pro_trial_upsell_modal.cta_text")})})]})})})}var ey=n(14467);let eb=(0,S.kc)().sites_design_starter_combined_file_limit;function ev(e){return(0,i.jsx)(r.u9,{label:"TeamPaidStatusBadge",children:(0,i.jsx)(eC,{...e})})}function eC({openFile:e,team:t}){let n=(0,O.FC)(),r=(0,D.TN)(t.id),o=t.restrictionsList?.includes(L.P4.LOCKED),l=(0,s.d4)(e=>e.isOpenFileLoadedFromLiveGraph),d=(0,_.MY)().errors,c=!(0,F.XX)(t)&&(0,B.canEditTeam)(t.id,n),u=t.canEdit&&e.plan?.tier===L.Ag.STARTER,[m,p]=a.useState(!1);a.useEffect(()=>{if(l&&!m){let e=setTimeout(()=>{p(!0)},100);return()=>clearTimeout(e)}},[l,m]);let f=(0,R.u8)({oldValue:c,newValue:u,newValueReady:l&&m,label:M.A.TeamPaidStatusBadge.canEditStarterTeam,enableFullRead:(0,N.DQ)(N.Pw.GROUP_8),contextArgs:{canEdit:t.canEdit,planTier:e.plan?.tier,isOpenFileLoadedFromLiveGraph:l,numOpenFileErrors:Array.isArray(d)?d.length:-1}}),g={fileKey:e.key,fileTeamId:t.id,productType:(0,h.pi)(e)};return U.ng.canSeeProTrialUxInFile(r,e)?(0,i.jsx)(ew,{trackingProperties:g,teamId:t.id}):o?(0,i.jsx)(ek,{trackingProperties:g,teamId:t.id,proTrial:r,canEditTeam:f}):f?(0,i.jsx)(eT,{openFile:e,permissionsState:n,trackingProperties:g,teamId:t.id}):null}function eE(){let[e,t]=a.useState(!1);return[e,(0,I.A)(e=>{t(e)},200,{leading:!0,trailing:!1})]}function ew({teamId:e,trackingProperties:t}){let[n,r]=eE();return(0,i.jsx)(w,{name:c._Y.PRO_TRIAL,onBadgeClick:()=>r(!0),text:(0,o.t)("fullscreen.filename_view.pro_trial"),trackingProperties:{...t,...U.ng.getTrackingProperties()},children:n&&(0,i.jsx)(e_,{teamId:e,dismissModal:()=>r(!1)})})}function ek({teamId:e,proTrial:t,trackingProperties:n,canEditTeam:r}){let a=(0,s.wA)(),l=(0,V.jn)(),d=U.ng.canSeeProTrialExpiryUx(t),p=d?c._Y.PRO_TRIAL_EXPIRED:c._Y.LOCKED,h=d?g.C.PRO_TRIAL_UPSELL_MODAL:g.C.LOCKED_TEAM_FILE_BADGE;return(0,i.jsx)(w,{name:p,onBadgeClick:()=>{if(l)return null;r&&a(m.to({type:u.V,data:{teamId:e,entrypoint:h}}))},text:d?(0,o.t)("fullscreen.filename_view.trial_expired"):(0,o.t)("fullscreen.filename_view.locked"),trackingProperties:{...n,...d?U.ng.getTrackingProperties():{}},isLocked:!0})}function eT({openFile:e,permissionsState:t,trackingProperties:n,teamId:r}){let a=(0,E.I)(e.editorType),s=(0,P.jd)(t.openFile?.project);return a&&!eb?(0,i.jsx)(eA,{trackingProperties:n,teamId:r}):s?(0,i.jsx)(ej,{openFile:e,trackingProperties:n,teamId:r}):(0,i.jsx)(eI,{openFile:e,trackingProperties:n,teamId:r})}function ej({openFile:e,trackingProperties:t,teamId:n}){let r=(0,A.y)(n,e.editorType===L._Y.FIGMAKE?g.C.MAKE_UPSELL_MODAL:g.C.STARTER_TEAM_FILE_BADGE);return(0,i.jsx)(w,{name:c._Y.FREE,onBadgeClick:()=>r(),text:(0,o.t)("fullscreen.filename_view.free"),trackingProperties:t})}let eS=[L._Y.DESIGN,L._Y.WHITEBOARD,L._Y.SLIDES,L._Y.FIGMAKE,...eb?[L._Y.SITES]:[]];function eI({openFile:e,trackingProperties:t,teamId:n}){let[r,a]=eE(),s=(0,ey.I)(),l=e.editorType===L._Y.FIGMAKE,d=(0,A.y)(n,l?g.C.MAKE_UPSELL_MODAL:g.C.STARTER_TEAM_FILE_BADGE);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{name:c._Y.FREE,onBadgeClick:()=>{e.editorType&&eS.includes(e.editorType)?a(!0):d()},text:(0,o.t)("fullscreen.filename_view.free"),trackingProperties:t}),r&&!l&&(eb?(0,i.jsx)(ef,{teamId:n,dismissModal:()=>a(!1),topPadding:4,pointerPaddingOffset:-32}):(0,i.jsx)(ed,{teamId:n,dismissModal:()=>a(!1),topPadding:4,pointerPaddingOffset:-32})),r&&l&&(0,i.jsx)(eg,{teamId:n,dismissModal:()=>a(!1),topPadding:4,pointerPaddingOffset:"shown"===s?-32:40})]})}function eA({trackingProperties:e,teamId:t}){let n=(0,A.y)(t,g.C.STARTER_TEAM_FILE_BADGE),r=(0,s.wA)(),a=(0,l.md)(y.QY),d=(0,l.Xr)(y.xw);return(0,i.jsx)(w,{name:c._Y.FREE,onBadgeClick:()=>{a.showing&&a.userFlag&&(d({showing:!1}),r(m.Lo()),r(p.b({[a.userFlag]:!0}))),n()},text:(0,o.t)("fullscreen.filename_view.free"),trackingProperties:e})}function eN({openFile:e}){return(0,i.jsx)(r.u9,{label:"FilePaidStatusBadge",children:e.team?(0,i.jsx)(ev,{openFile:e,team:e.team}):(0,i.jsx)(k,{openFile:e})})}},855616:(e,t,n)=>{n.d(t,{I:()=>l,l:()=>o});var i=n(105652),r=n(445019),a=n(574220),s=n(303740);let o="file_paid_status_badge_onboarding_key";function l(e){let t=(0,r.md)(s.UQ),n=(0,r.md)(a.zN);return i.useMemo(()=>"whiteboard"===e&&t&&"loaded"===n.status&&!1===n.data,[e,t,n.status,n.data])}},699589:(e,t,n)=>{n.d(t,{A:()=>w});var i=n(239976),r=n(462789),a=n(89776),s=n(379141),o=n(7857),l=n(477948),d=n(677181),c=n(105641),u=n(394396),m=n(920675),p=n(236410),h=n(225145),f=n(141288),g=n(184743),x=n(145652);let _="hub_file_tooltips--hubFileInfo--csLBd text--fontPos11--rO47d text--_fontBase--VaHfk",y="hub_file_tooltips--handle--VF8jW",b="hub_file_tooltips--link--8tH-p blue_link--blueLink--4ER8T",v=(0,x.ex)("hub_file_in_review",function(e){let{url:t}=e,n=(0,g.Gc)(e=>{e.preventDefault(),f.Ay.redirect(t,"_blank")});return(0,i.jsxs)(h._,{newTab:!0,trusted:!0,href:t,className:_,htmlAttributes:{onMouseDown:n},children:[(0,i.jsx)("span",{className:y,children:(0,s.tx)("community.tooltip.is_currently_in_review")}),(0,i.jsx)("div",{className:b,children:(0,s.tx)("community.permissions_modal_publish_tab.footer.view_community_page")})]})},e=>({url:e.getAttribute("data-tooltip-hub-file-url")||""})),C=(0,x.ex)("hub_file_info",function(e){let{lastPublishedAt:t,url:n}=e,r=(0,g.Gc)(e=>{e.preventDefault(),f.Ay.redirect(n,"_blank")});return(0,i.jsxs)(h._,{newTab:!0,trusted:!0,href:n,className:_,htmlAttributes:{onMouseDown:r},children:[(0,i.jsx)("span",{className:y,children:(0,s.tx)("community.tooltip.published_to_community_on_date",{date:t})}),(0,i.jsx)("div",{className:b,children:(0,s.tx)("community.permissions_modal_publish_tab.footer.view_community_page")})]})},e=>{let t=e.getAttribute("data-tooltip-hub-file-url")||"";return{lastPublishedAt:e.getAttribute("data-tooltip-hub-file-last-published-at")||"",url:t}}),E=(0,x.ex)("hub_file_info_unverified",function(e){let{verificationStatus:t}=e;return(0,i.jsx)("div",{className:_,children:(0,i.jsx)("span",{className:y,children:t})})},e=>({verificationStatus:e.getAttribute("data-tooltip-hub-file-verification-status")})),w=(0,o._d)(function({isLeftRail:e}){let t=(0,d.JT)();return t?(0,i.jsx)(k,{hubFile:t,isLeftRail:e}):null},"HubFileBacklink");function k({hubFile:e,isLeftRail:t}){let n=(0,c.Vz)(e.id);if(e.unpublishedAt)return null;let{currentHubFileVersion:o}=e,d=(0,s.t)("fullscreen.filename_view.hub_file_published_at",{publish_date:new Date(o.createdAt)}),h=e.verificationStatus===m.iS.BLOCKED?(0,s.t)("community.tooltip.this_community_file_is_currently_blocked"):e.verificationStatus===m.iS.UNVERIFIED?(0,s.t)("community.tooltip.this_community_file_is_currently_unverified"):"",f=e.verificationStatus===m.iS.BLOCKED||e.verificationStatus===m.iS.UNVERIFIED,g=e.publishingStatus===m.KB.PENDING_PUBLIC||e.publishingStatus===m.KB.PENDING_USER_VISUAL_COMPLIANCE,x={"data-testid":"filename-view-public-icon","data-tooltip":f?E:g?v:C,"data-tooltip-hub-file-last-published-at":d,"data-tooltip-hub-file-url":(0,u.X$)(e.id),"data-tooltip-hub-file-verification-status":h,"data-tooltip-interactive":!0,"data-tooltip-max-width":300,"data-tooltip-offset-y":0,"data-tooltip-type":p.Ib.SPECIAL};return t?(0,i.jsx)(l.J,{"aria-label":(0,s.t)("community.permissions_modal_publish_tab.footer.view_community_page"),htmlAttributes:{...x,"data-tooltip-show-right":!0},onClick:f?void 0:n,children:f?(0,i.jsx)(r.e,{}):(0,i.jsx)(a.V,{})}):(0,i.jsx)("div",{className:f?"hub_file_backlink--publicIconDisabled---iMmQ hub_file_backlink--publicIconBase--MQPvR":"hub_file_backlink--publicIcon--OGzNC hub_file_backlink--publicIconBase--MQPvR",onClick:f?void 0:n,...x,children:f?(0,i.jsx)(r.e,{}):(0,i.jsx)(a.V,{})})}},982147:(e,t,n)=>{n.d(t,{v7:()=>eR,Lx:()=>ej});var i=n(239976),r=n(105652),a=n(20002),s=n(943735),o=n(205073),l=n(497503),d=n(726577),c=n(563225),u=n(454705),m=n(692376),p=n(379141),h=n(445019),f=n(323264),g=n(224542),x=n.n(g),_=n(270351),y=n(40297),b=n(732838),v=n(916626),C=n(141288),E=n(723850),w=n(184743),k=n(125776),T=n(625429),j=n(253983),S=n(328452),I=n(904414),A=n(346942),N=n(933870),M=n(154963),R=n(257556),P=n(450207),O=n(733679),D=n(136393);n(783868);var L=n(720410),F=n(756043),B=n(715307),U=n(518075),V=n(223487),H=n(207436),z=n(338371),G=n(300573),K=n(994627);n(380799);var W=n(895127),q=n(236410),X=n(409380),Y=n(777276);n(926862);var J=n(664455);n(617654),n(84454);var Z=n(526865);(0,y.hG)(Z.rJv);var Q=(e=>(e.VOICE="voice",e))(Q||{}),$=n(29161),ee=n(536378);n(595609);var et=n(526575),en=n(852553),ei=n(550534);n(605985);var er=n(920675),ea=n(358109),es=n(935467),eo=n(362844),el=n(21612),ed=n(222041);n(701118);var ec=n(595969),eu=n(509566),em=n(808877),ep=(e=>(e[e.NO_CALL_STATE=0]="NO_CALL_STATE",e[e.JOIN_CALL_STATE=1]="JOIN_CALL_STATE",e[e.IN_CALL_WIDGET_OPEN=2]="IN_CALL_WIDGET_OPEN",e[e.IN_CALL_WIDGET_CLOSED=3]="IN_CALL_WIDGET_CLOSED",e))(ep||{});function eh(e){let t=(0,a.Pj)(),n=(0,V.q5)(),r=(0,a.d4)(e=>e.orgById),s=(0,a.d4)(e=>e.teams),o=(0,a.d4)(e=>e.selectedView?.editorType),l=(0,a.d4)(e=>"prototype"===e.selectedView.view),d=o===eo.nT.Design||o===eo.nT.Whiteboard||o===eo.nT.DevHandoff||o===eo.nT.Slides||o===eo.nT.Illustration,c=(0,a.wA)();if($.Ay.isIpad||!n||l||!d)return null;let u=(0,W.YL)({openFile:n,teams:s,orgById:r});if(u===W.gW.FEATURE_DISABLED)return null;if(u===W.gW.ELIGIBLE_WITH_UPGRADE)return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:em.WF,"data-onboarding-key":ea._2,onClick:()=>{let e=n.teamId&&s[n.teamId];if(!e)return;(0,et.ds)("CTA Clicked",n.key,t.getState(),{name:"Disabled Voice Call Button"});let i=o===eo.nT.Whiteboard?er._Y.WHITEBOARD:er._Y.DESIGN;c(ee.to({type:ed.DV,data:{team:e,resource:es.Bi.AUDIO,action:el.pE.USE_AUDIO,editorType:i,currentPlan:en.F.Plan.STARTER,upsellPlan:en.F.Plan.PRO,entryPoint:ei.C.AUDIO_PAYWALL}}))},children:(0,i.jsx)(ec.A.HeadphonesIcon,{className:em.tL,size:32})})});if(u!==W.gW.ELIGIBLE){let e=u===W.gW.DISABLED_BY_ORG?(0,p.t)("collaboration.voice.audio_has_been_disabled_by_your_organization"):(0,p.t)("collaboration.voice.to_use_audio_in_this_file_move_it_to_a_team_on_one_of_our_paid_plans");return(0,i.jsx)("span",{className:em.WF,"data-tooltip-type":q.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip":e,children:(0,i.jsx)(ec.A.HeadphonesIcon,{className:em.sl,size:32})})}return(0,i.jsx)("div",{className:em.Te,children:(0,i.jsx)(eu.K,{fileKey:n.key,className:em.iw,"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,p.t)("collaboration.voice.start_conversation"),hidePopover:e.hidePopover,children:(0,i.jsx)("span",{className:em.iG,children:(0,i.jsx)("span",{"data-onboarding-key":"audio-nux-key",className:em.zc,children:(0,i.jsx)(ec.A.HeadphonesIcon,{className:em.tL,size:32})})})})})}var ef=n(329983),eg=n(363198),ex=n(751642),e_=n(270450),ey=n(384795),eb=n(622043),ev=n(943866);function eC({featured:e,quickAccess:t,onUserClick:n,maxVisibleUsers:a,totalUserCount:s}){let o={ease:"easeOut",duration:.15},l=t.filter(t=>t.sessionID!==e?.sessionID);l.reverse();let d=l.length+(e?1:0),c=U.pl,u=Math.min(a,l.length+(e?1:0))*c,m=(0,ev.ZC)(s);m&&s!==m&&(o.duration=.3);let p=(0,r.useCallback)(e=>{if(0===e)return"multiplayer-observation-nux-key"},[]),h=(0,e_.kc)().spotlight_disable_fade?1:.5,f=e&&(0,i.jsx)(ey.P.span,{initial:{opacity:0,scale:h},animate:{opacity:1,scale:1},exit:{opacity:0,scale:h},transition:o,style:{pointerEvents:"all"},children:(0,i.jsx)(Y.Q,{user:e,isOverflow:!1,onUserClick:n,hasBorder:!0})}),g=l.map((e,t)=>(0,i.jsx)(ey.P.span,{style:{marginLeft:"-8px",pointerEvents:"all"},initial:{opacity:0,scale:h},animate:{opacity:1,scale:1},transition:o,layout:"position",children:(0,i.jsx)(Y.Q,{onboardingKey:p(t),user:e,isOverflow:!1,onUserClick:n,hasBorder:!0})},e.sessionID));return(0,i.jsx)("div",{style:{width:u,clipPath:void 0,position:"relative",height:"100%",pointerEvents:"none"},"data-onboarding-key":"multiplayer-avatars",children:(0,i.jsx)(ey.P.div,{style:{width:a*c,position:"absolute",right:"-8px",display:"flex",flexDirection:"row-reverse",justifyContent:d>a!=!0?"flex-start":"flex-end"},layout:!0,layoutRoot:!0,children:(0,i.jsx)(eb.N,{initial:!1,mode:"popLayout",children:(0,i.jsxs)(i.Fragment,{children:[g,f]})})})})}n(366536);let eE=new(n(996399)).KH({keys:["name"],threshold:.1});n(76354);var ew=n(603935);let ek="multiplayer-nickname-dropdown",eT=((0,B.ck)(),(0,y.jz)(Z.rJv));function ej(e,t,n,i,r,a,s){if(!r)return;let o=e.sessionID,l=o===t,d=a&&a.sessionID===t;if(l&&d)s();else if(i){let t=r.observingSessionID===o||r.sessionID===o?-1:e.sessionID,i=-1!==r.observingSessionID,a=r.observingSessionID!==o&&r.sessionID!==o;i&&n((0,G.Zh)({name:"spotlight.prototype_observation_ended",params:{multiplayerObservingSessionID:r.observingSessionID,multiplayerSessionID:r.sessionID}})),a&&(n((0,G.Zh)({name:"spotlight.prototype_observation_started",params:{multiplayerObservingSessionID:o,multiplayerSessionID:r.sessionID}})),n(D.b({aware_of_observation_mode:!0}))),n(O.J4({...r,observingSessionID:t}))}else m.h3O&&(m.h3O.observeUser(o),r.observingSessionID!==o&&r.sessionID!==o&&n(D.b({aware_of_observation_mode:!0})))}function eS(e){let{query:t,usersToSearch:n}=e,[i,a]=r.useState(n),s=r.useRef(!1),o=(0,E.am)(),l=r.useRef(!1),d=l.current,c=r.useCallback(async e=>{if(""===e)a(n);else{s.current=!1;let t=await (eE.set(n),eE.search(e));s.current||(a(t.map(e=>e.item)),d||(o("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),l.current=!0))}},[d,o,n]),u=(0,_.A)(c,200);return r.useEffect(()=>(u(t),()=>{u.cancel(),s.current=!0}),[u,t,n]),{searchResults:i}}let eI=(0,r.forwardRef)(function(e,t){let{query:n,setQuery:a}=e,s=r.useRef(null);return(0,i.jsx)("div",{ref:t,className:ew.MT,children:(0,i.jsx)(o.D,{ref:s,"aria-label":(0,p.t)("search.search_file_users"),autoFocus:!0,onChange:a,onClick:R.dG,placeholder:(0,p.t)("collaboration.spotlight.menu.search.placeholder"),spellCheck:!1,value:n})})});function eA({currentUser:e,peopleList:t,previousViewerList:n,onUserClick:s,shouldDisableSpotlight:o,spotlightDisabledReason:c,containerProps:m,multiplayer:g,orgPathPart:x,isSites:_,nominatePresenter:y,cancelPresenterNomination:v,hidePopover:E}){let S=(0,r.useRef)(null),R=(0,r.useRef)(null),[O,D]=(0,h.fp)(T.ah),[L,F]=(0,h.fp)(T.Dv),[B,V]=r.useState(310),G=(0,r.useRef)(null),[K,W]=r.useState(0),X=(0,a.wA)(),J=(0,j.Av)(),Z=Math.min(window.innerHeight-J-22,465);r.useLayoutEffect(()=>{S.current&&R.current&&V(Math.min(Z-S.current.offsetHeight-R.current.offsetHeight-16*K,310))},[Z,K]);let Q=(0,r.useCallback)(()=>{o||D(!0)},[D,o]),{start:$,cancel:ee}=(0,z.Z)(Q),et=(0,r.useCallback)(()=>{ee(),D(!1)},[ee,D]),en=(0,k.Vi)(),ei=(0,r.useCallback)(()=>{o||(en(),et(),F(!0),X(P.oB()),E())},[et,X,F,en,o,E]),er=(0,k.B4)(),ea=(0,r.useCallback)(()=>{er(),X(P.oB()),E()},[X,er,E]),es=(0,H.dR)(),eo=es&&e.sessionID===es.sessionID?(0,i.jsx)(I.pz,{onClick:ea,className:ew.BK,children:(0,p.tx)("collaboration.spotlight.button.stop")}):(0,i.jsx)(A.$$,{onClick:ei,className:ew.BK,onMouseOver:()=>{$(300)},onMouseLeave:et,disabled:o,"data-tooltip":o&&c?c:void 0,"data-tooltip-type":q.Ib.TEXT,"data-tooltip-show-below":!0,children:(0,p.tx)("collaboration.spotlight.tooltip.spotlight_me")}),el=t.length+(n?.length??0)>8,[ed,ec]=r.useState(""),{searchResults:eu}=eS({query:ed,usersToSearch:t}),{searchResults:em}=eS({query:ed,usersToSearch:n??[]}),ep=eu.length>0&&em.length>0,ef=eu.length>0||em.length>0,eg=0===eu.length&&0===em.length,e_=(0,i.jsx)("div",{className:ew.zW,children:(0,i.jsx)("div",{className:ew.me})});(0,r.useEffect)(()=>{W((el?1:0)+(""!==ed&&eg?1:0)+(ef?1:0))},[el,ed,eg,ef]);let ey=(e,t)=>{let n=(0,w.Gc)(()=>{let t=`/files${x}/user/${e.userID}`;C.Ay.redirect(t,b.eD?void 0:"_blank")}),r=[],a=g.sessionNominatedByCurrentUser===e.sessionID,l=g.presenterSessionID===e.sessionID,d=_&&!!e.sitesViewState&&(0,ex.a)(e.sitesViewState);return!t||l||o||(a?r.push({text:(0,p.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,U.AD)(e)&&v(e.sessionID,g)},key:"cancel-ask-to-spotlight"}):r.push({text:(0,p.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,U.AD)(e)&&y(e.sessionID,g)},disabled:d,key:"ask-to-spotlight"})),r.push({text:(0,p.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}),(0,i.jsx)(Y.Q,{user:e,isOverflow:!0,onUserClick:t?s:void 0,secondaryActions:r,hidePopover:E},e.sessionID)},eb=(0,i.jsxs)(u.J,{mode:"dark",children:[(0,i.jsxs)("div",{ref:S,className:ew.Km,children:[(0,i.jsx)(Y.Q,{user:e,isOverflow:!0,isCurrentUserHeaderRow:!0}),(0,i.jsxs)("div",{className:ew.Vr,children:[eo,(0,i.jsx)(eh,{hidePopover:E})]})]}),el&&(0,i.jsxs)(i.Fragment,{children:[e_,(0,i.jsx)("div",{className:ew.zK,ref:R,children:(0,i.jsx)(eI,{query:ed,setQuery:ec})})]}),""!==ed&&eg&&(0,i.jsxs)(i.Fragment,{children:[e_,(0,i.jsx)("div",{className:`${ew.hg} ${M.s.mb8.$}`,children:(0,p.tx)("fullscreen.toolbar.multiplayer.no_user_found")})]}),ef&&(0,i.jsxs)(i.Fragment,{children:[e_,(0,i.jsxs)(N.P,{width:eT-16,maxHeight:B,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:G,children:[ep&&(0,i.jsx)("h2",{className:ew.hg,children:(0,p.tx)("fullscreen.toolbar.multiplayer.currently_viewing")}),eu.length>0&&eu.map(e=>(0,i.jsx)(r.Fragment,{children:ey(e,!o)},`currentViewer-${e.userID}`)),em.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:ew.hg,children:(0,p.tx)("fullscreen.toolbar.multiplayer.previously_viewed")}),em.map(e=>(0,i.jsx)(r.Fragment,{children:ey(e,!1)},`previousViewer-${e.userID}`))]})]})]})]});return(0,i.jsx)(l.mc,{...m(f.Ay.props(eM.popoverContainer(Z,eT))),children:(0,i.jsx)(d.i,{children:eb})})}let eN={kWkggS:"xon4yw5",keoZOQ:"x7hzu26",kaIpWk:"x1mxnbhz",krdFHd:"",kfmiAY:"",kVL7Gh:"",kT0f0o:"",kIxVMA:"",ksF3WI:"",kqGeR4:"",kYm2EN:"",kmVPX3:"xf7z5ut",kg3NbH:"",kuDDbn:"",kE3dHu:"",kP0aTx:"",kpe85a:"",k8WAf4:"",kLKAdn:"",kGO01o:"",kB7OPa:"x9f619",kskxy:"x1jols5v",kzqmXN:"x5lhr3w",$$css:!0},eM={popoverContainer:(e,t)=>[eN,{"--x-maxHeight":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`),"--x-width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${t}px`)}]},eR=(0,v.w)(r.memo(function(e){let{multiplayer:t,currentUser:n,onUserClick:a,thresholdUsesContainerWidth:o}=e,d=(0,r.useRef)(null),u=(0,r.useRef)(null),f=(0,r.useRef)(null),g=(0,r.useRef)(null),_=(0,U.wF)(),y=(0,L.k)(),b=(0,S.Om)(),[v,C]=r.useState(!1),[w,j]=r.useState(!1),I=(0,ef.Oc)(),{getTriggerProps:A,getContainerProps:N}=l.fP({isOpen:v,onOpenChange:C,type:"dialog",softDismiss:!0,middleware:[(0,s.BN)({padding:8})]}),M=I?{ref:void 0}:A(),P=!I&&v,O=(0,r.useMemo)(()=>t.allUsers.filter(e=>e.sessionID!==n?.sessionID),[t.allUsers,n]),D=(0,J.WW)(),B=D?(0,p.t)("left_rail.only_available_on_canvas"):void 0,[V,z]=(0,h.fp)(T.ah);V&&!P&&z(!1);let G=d.current&&u.current?d.current.clientWidth-u.current.clientWidth:void 0,W=(0,U.Wq)(G,o),{users:Z,overflowUsers:Q}=(0,U.uC)(O,null,!1,W),$=(0,r.useMemo)(()=>[...Z,...Q].filter(e=>e&&e.userID!==n.userID),[Q,Z,n]),ee=(0,r.useMemo)(()=>_?.filter(e=>!$.some(t=>e.userID===t.userID)&&e.userID!==n.userID),[$,_,n]),et=(0,E.am)(),en=(0,r.useCallback)(e=>{(0,R.dG)(e),u.current&&(v||I||et("Multiplayer Tools Opened",{currentUserSessionID:n.sessionID,otherUserSessionsCount:$.length}))},[u,v,et,n.sessionID,$.length,I]),ei=(0,H.dR)(),er=ei&&ei.sessionID!==n.sessionID?ei:null,ea=(0,K.q)(),es=(0,k.tu)(),eo=(0,k.oJ)(),el=(0,eg.cJ)(),ed=$.length+1,ec=(0,i.jsx)(eC,{featured:er,quickAccess:Z,maxVisibleUsers:U.A8-1,onUserClick:a,totalUserCount:ed}),eu=(0,i.jsx)(X.x,{children:(0,i.jsxs)("button",{"aria-expanded":I?void 0:v,"aria-label":(0,p.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),className:x()({[ew.XE]:!0,[ew.yx]:Q.length>0,[ew.Ge]:0===Q.length,[ew.wH]:P,[ew.yo]:!P&&w&&!I}),"data-tooltip":I?void 0:(0,p.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":u.current&&g.current?u.current.offsetWidth/2-g.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":u.current&&d.current?d.current.clientHeight/2-u.current.clientHeight/2:0,"data-tooltip-type":q.Ib.TEXT,id:"multiplayer-toolbar-container",onClick:R.dG,onKeyDownCapture:e=>{(0,F.hx)({e,onClickHandler:e=>{y?b(m.rcl.FOLLOW_PRESENTER):en(e)},onEscapeHandler:()=>{u?.current?.blur()}})},onMouseDownCapture:e=>{y?b(m.rcl.FOLLOW_PRESENTER):en(e)},onMouseLeave:()=>{j(!1)},onMouseOverCapture:e=>{j(!0),(0,R.dG)(e)},...M,ref:e=>{u.current=e;let t=M.ref;t&&t(e)},children:[(0,i.jsx)("span",{ref:f,className:ew.r9,children:(0,i.jsx)(Y.Q,{user:n,isOverflow:!1},n.sessionID)},n.sessionID),(0,i.jsxs)("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:ew.rR,children:[Q.length>0&&(0,i.jsx)("span",{className:x()({[ew.zk]:!0,[ew.r9]:!0,[ew.wH]:P,[ew.yo]:!P&&w&&!I}),style:{minWidth:ed<10?8:ed<100?15:22},children:`${ed}`}),!I&&(0,i.jsx)("span",{ref:g,children:(0,i.jsx)(c.O,{className:x()({[ew.ai]:!0,[ew.wH]:P})})})]})]})});return(0,i.jsxs)("span",{className:ew.EI,ref:d,"data-onboarding-key":"multiplayer-users-container",children:[(0,i.jsxs)(i.Fragment,{children:[eu,ec]}),(0,i.jsx)(eA,{cancelPresenterNomination:eo,containerProps:N,currentUser:n,hidePopover:()=>{C(!1)},isSites:el,multiplayer:t,nominatePresenter:es,onUserClick:a,orgPathPart:ea,peopleList:$,previousViewerList:ee,shouldDisableSpotlight:D,spotlightDisabledReason:B})]})}),"MultiplayerUsersNew"),eP="multiplayer-users-dropdown"},76354:(e,t,n)=>{n.d(t,{sK:()=>S,vQ:()=>j});var i=n(239976),r=n(105652),a=n(224542),s=n.n(a),o=n(954716),l=n.n(o),d=n(40297),c=n(943866),u=n(393463),m=n(253983),p=n(207436),h=n(569693),f=n(77752),g=n(526865),x=n(603935);let _=e=>e?13:14,y=(0,d.jz)(g.Ocz),b=(0,d.jz)(g.bnr),v=e=>e?b:y,C=(0,d.jz)(g.Ko3);var E=(e=>(e.PRESENTING="presenting",e.SELECTED="selected",e.NONE="none",e))(E||{}),w=(e=>(e.PRESENTING="presenting",e.SELECTED="selected",e.DESELECTED="deselected",e.NONE="",e))(w||{});let k=e=>{let t=e.user.sessionID===e.observingSessionID,n=e.user.sessionID===e.presenterSessionID;return t?"selected":n?"presenting":"none"},T=l()([{current:"none",selected:"selected",presenting:"presenting",none:""},{current:"selected",selected:"selected",presenting:"presenting",none:"deselected"},{current:"presenting",selected:"selected",presenting:"presenting",none:""}],e=>e.current);function j(e){let t;let{user:n,tooltipOffsetY:a}=e;(0,m.Av)();let o=function({user:e,observingSessionID:t,presenterSessionID:n,nominatedSessionID:i,disableSpotlightAnimation:a}){let[s,o]=r.useState(""),l=(0,c.ZC)({user:e,observingSessionID:t,presenterSessionID:n,nominatedSessionID:i}),d=r.useMemo(()=>({user:e,observingSessionID:t,presenterSessionID:n,nominatedSessionID:i}),[t,n,e,i]);return r.useEffect(()=>{let e="";if(!a){let t=k(d);e=T[l&&k(l)||"none"][t]}o(e)},[d,l,a]),s}({user:n,observingSessionID:e.observingSessionID,presenterSessionID:e.presenterSessionID,nominatedSessionID:e.nominatedSessionID,disableSpotlightAnimation:e.disableSpotlightAnimation}),l=x.qb,d=(0,p.Ww)(),u=k(r.useMemo(()=>({user:e.user,observingSessionID:e.observingSessionID,presenterSessionID:e.presenterSessionID,nominatedSessionID:e.nominatedSessionID}),[e.observingSessionID,e.presenterSessionID,e.user,e.nominatedSessionID])),g=n.sessionID===d?.sessionID?"var(--color-bg-brand)":n.color,y=v(!0),b=_(!0);return e.hasBorder&&(t="none"===u?"outward":"inward"),(0,i.jsx)("div",{className:s()({[x.C7]:!e.horizontal,[x._L]:e.horizontal}),children:(0,i.jsxs)(f.WB,{id:e.tooltipProxyId,user:{id:n.userID,handle:n.name,sessionId:n.sessionID},tooltipOffsetY:a,children:[(0,i.jsx)("svg",{className:`multiplayer-animation-svg ${e.horizontal?"horizontal":""}`,viewBox:`0 0 ${y} ${C}`,"aria-hidden":"true",children:(0,i.jsx)("circle",{className:`multiplayer-animation-circle ${e.horizontal?"horizontal":""} ${o}`,cx:y/2,cy:C/2,r:b,fill:"none",stroke:g,strokeWidth:"2"})},"multiplayer-animation-svg"),e.showColorIndicators&&(0,i.jsx)("div",{className:`multiplayer-animation-droplet${e.horizontal?"-horizontal":""} ${o}`,"data-avatar-color-bar":!0,style:{backgroundColor:g}},"multiplayer-animation-droplet"),(0,i.jsx)("div",{className:l,children:(0,i.jsx)(h.Ro,{entity:{...n,id:n.userID},className:x.ws,borderStyle:t})})]})})}let S=r.memo(function(e){let t=v(e.isUI3),n=_(e.isUI3),r=`
  @layer css-modules {
    .multiplayer-animation-svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: ${t}px;
    }

    .multiplayer-animation-droplet {
      left: ${t/2-n/2}px;
      top: 0px;
      height: 2px;
      width: ${n}px;
      border-radius: 0px;
      position: absolute;
    }

    .multiplayer-animation-droplet-horizontal {
      left: 0px;
      top: 50%;
      transform: translateY(-50%);
      height: ${n}px;
      width: 2px;
      border-radius: 0px;
      position: absolute;
    }

    .multiplayer-animation-droplet.selected {
      animation: droplet 0.3s ease-in forwards;
    }

    .multiplayer-animation-droplet-horizontal.selected {
      animation: droplet-horizontal 0.3s ease-in forwards;
    }

    .multiplayer-animation-droplet.deselected {
      animation: droplet-reverse 0.2s ease-out 0.4s forwards;
      left: ${t/2-n/4}px;
      top: 0px;
      height: 0px;
      width: 0px;
      border-radius: 0px;
    }

    .multiplayer-animation-droplet-horizontal.deselected {
      animation: droplet-horizontal-reverse 0.2s ease-out 0.4s forwards;
      left: ${t/2-n/4}px;
      height: 0px;
      width: 0px;
      border-radius: 0px;
    }

    .multiplayer-animation-circle {
      stroke-dasharray: 400;
      stroke-dashoffset: 400;
      transform-origin: center;
      transform: rotateZ(-90deg);
    }

    .multiplayer-animation-circle.horizontal {
      transform: rotateZ(-180deg);
    }

    .multiplayer-animation-circle.selected {
      animation: draw-circle 0.15s ease-in 0.3s forwards;
    }

    .multiplayer-animation-circle-horizontal.selected {
      animation: draw-circle-horizontal 0.15s ease-in 0.3s forwards;
    }

    .multiplayer-animation-circle.deselected {
      animation: draw-circle-reverse 0.4s ease-in forwards;
    }

    .multiplayer-animation-circle.presenting {
      stroke-dasharray: 3.4;
      animation: rotating 30s linear infinite
    }

    @keyframes rotating {
      from {
        transform: rotateZ(0deg);
      }
      to {
        transform: rotateZ(360deg);
      }
    }

    @keyframes droplet {
      0% {
        top: 0px;
        height: 2px;
        width: ${n}px;
        border-radius: 0px;
      }
      20% {
        top: -3.5px;
        height: ${n/2}px;
        width:  ${n/2}px;
        border-radius: 100%;
      }
      66% {
        top: -2px;
        height: 7px;
      }
      98% {
        top: 5px;
        height: 3px;
        width: 3px;
        border-radius: 100%;
      }
      99% {
        top: 5px;
        height: 1px;
        width: 1px;
        border-radius: 100%;
      }
      100% {
        top: 5px;
        height: 0px;
        width: 0px;
        border-radius: 100%;
      }
    }

    @keyframes droplet-horizontal {
      0% {
        left: 0;
        height: ${n}px;
        width: 2px;
        border-radius: 0px;
      }
      20% {
        left: -3.5px;
        height: ${n/2}px;
        width: ${n/2}px;
        border-radius: 100%;
      }
      66% {
        left: -2px;
        width: ${n/2}px;
      }
      99% {
        left: 5px;
        height: 3px;
        width: 3px;
        border-radius: 100%;
      }
      100% {
        left: 5px;
        height: 0px;
        width: 0px;
        border-radius: 100%;
      }
    }

    @keyframes draw-circle {
      0% {
        stroke-dashoffset: 400;
      }
      100% {
        stroke-dashoffset: 300;
      }
    }

    @keyframes droplet-reverse {
      0% {
        top: 0px;
        height: 2px;
        width: 2px;
        border-radius: 0px;
      }
      100% {
        top: 0px;
        height: 2px;
        width: ${n};
        border-radius: 0px;
      }
    }

    @keyframes droplet-horizontal-reverse {
      0% {
        left: 0px;
        height: 2px;
        width: 2px;
        border-radius: 0px;
      }
      100% {
        left: 0px;
        width: 2px;
        height: ${n}px;
        border-radius: 0px;
      }
    }
  }
  `;return(0,i.jsx)("style",{nonce:(0,u.Ay)().csp_nonce,children:r})})},641653:(e,t,n)=>{n.d(t,{K:()=>m,W:()=>u});var i=n(239976),r=n(105652),a=n(379141),s=n(309742),o=n(341153),l=n(804916),d=n(915909),c=n(890305);let u="design-panel-container";function m(e){let[t,n]=r.useState(!1),m=(0,o.Z)();return((0,s.h)(()=>{queueMicrotask(async function(){let t=e.getNodeForViewportFocus?.(),i=e.getNodeToSelect();i&&"FRAME"===i.type?(await (0,d.zU)({navigate:m,guidToFocus:t?.guid,guidToSelect:i.guid}),n(!0)):e.flowDirection===d.en.FORWARD?e.onNext():e.onPrevious()})}),t)?(0,i.jsx)(l.VF,{arrowPosition:c.F_.RIGHT_BODY,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(l.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"designPanel",shouldCenterArrow:c.EL.FALLBACK,targetKey:u,title:(0,a.tx)("tooltips_plus_onboarding.design_panel.title"),trackingContextName:"Tooltips+ Design Panel Step",children:(0,a.tx)("tooltips_plus_onboarding.design_panel.description")}):null}},159861:(e,t,n)=>{n.d(t,{v:()=>eD,e:()=>eL});var i=n(239976),r=n(105652),a=n(20002),s=n(445019),o=n(136393),l=n(826151),d=n(859100),c=n(574220),u=n(223487),m=n(605985),p=n(748181),h=n(907490),f=n(215496),g=n(271625),x=n(379141),_=n(62440),y=n(639184),b=n(152140),v=n(536920),C=n(384203),E=n(920675),w=n(702417),k=n(804916),T=n(641653);function j(e){let t=(0,x.tx)("tooltips_plus_onboarding.outro.title"),n=(0,x.tx)("tooltips_plus_onboarding.outro.description");return(0,i.jsx)(k.A2,{children:(0,i.jsx)(k.xI,{dismissModal:e.onClose,title:t,trackingContextName:"Tooltips+ Outro Step",onSecondaryCtaClick:e.onSecondaryCtaClick,onPrimaryCtaClick:e.onPrimaryCtaClick,secondaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.outro.practice_more_btn"),ctaTrackingDescriptor:y.c.PRACTICE_MORE_HERE},primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.outro.start_new_file_btn"),ctaTrackingDescriptor:y.c.START_A_NEW_FILE},children:n})})}var S=n(692376),I=n(466082),A=n(309742),N=n(915909);function M(e){(0,A.h)(()=>{let t=(0,N.eN)((0,I.UN)(),"FRAME");if(e.hasUiKits&&null!=t){e.skip&&e.skip();return}});let t=(0,a.d4)(e=>e.isFullscreenDocumentLoaded);return(r.useEffect(()=>{S.glU&&t&&S.glU.triggerAction("set-tool-frame",null)},[t]),S.glU)?(0,i.jsx)("div",{"data-testid":"tooltips-plus-frames-step",children:(0,i.jsx)(k.VF,{disableHighlight:!0,dismissModal:e.onClose,hideCloseButton:e.hideCloseButton,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumStep,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:e.onPrimaryCtaClick,onSecondaryCtaClick:e.onSecondaryCtaClick?()=>{S.glU?.triggerAction("set-tool-default",null),e.onSecondaryCtaClick&&e.onSecondaryCtaClick()}:void 0,pointsTo:"toolbar",primaryCtaProps:e.primaryCtaProps,secondaryCtaProps:e.secondaryCtaProps,targetKey:"frame",title:e.hasUiKits?(0,x.tx)("tooltips_plus_onboarding.presets_frame_step.title"):(0,x.tx)("tooltips_plus_onboarding.no_nav_frames_get_started_with_a_frame"),trackingContextName:"Tooltips+ Frame Step",children:e.bodyText||(0,x.tx)("tooltips_plus_onboarding.no_nav_frames_description")})}):null}var R=n(117932);function P(e){return(r.useEffect(()=>{S.glU&&S.glU.triggerAction("set-tool-type",null)},[]),S.glU)?(0,i.jsx)(k.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:"tool-type-onboarding",title:(0,x.tx)("tooltips_plus_onboarding.text_step.title"),trackingContextName:"Tooltips+ Text Step",lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:()=>{S.glU?.triggerActionInUserEditScope("set-tool-default",null),e.onNext()},onSecondaryCtaClick:e.onPrevious,pointsTo:"toolbar",children:(0,x.tx)("tooltips_plus_onboarding.text_step.description")}):null}var O=n(27414),D=n(862390),L=n(355441);function F(e){let t=(0,a.wA)(),n=(0,x.tx)("tooltips_plus_onboarding.ui_kits_ending_step.title"),s=(0,x.tx)("tooltips_plus_onboarding.ui_kits_ending_step.description"),o="UI Kits";return e.forStartingPoints&&(n=(0,x.tx)("starting_points_onboarding.assets_step.title"),s=(0,x.tx)("starting_points_onboarding.assets_step.description",{strongAssets:(0,i.jsx)("strong",{style:{display:"contents"},children:(0,x.tx)("design_systems.assets_panel.assets")})})),(0,v.oe)()&&(n=(0,x.tx)("tooltips_plus_onboarding.assets_ending_step.title"),s=(0,x.tx)("tooltips_plus_onboarding.assets_ending_step.description",{strongAssets:(0,i.jsx)("strong",{style:{display:"contents"},children:(0,x.tx)("design_systems.assets_panel.assets")})}),o="Assets"),r.useEffect(()=>{(0,D.wr)(),t(O.FP({tab:S.xae.ASSETS}))},[t]),(0,i.jsx)(k.VF,{arrowPosition:L.F_.LEFT_TITLE,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:e.onPrimaryCtaClick,onSecondaryCtaClick:()=>{t(O.FP({tab:S.xae.LAYERS})),e.onSecondaryCtaClick()},pointsTo:"leftPanel",primaryCtaProps:e.primaryCtaProps,targetKey:v.RJ,title:n,trackingContextName:e.forStartingPoints?"Starting Points Assets Step":`Tooltips+ ${o} Ending Step`,children:s})}let B={NAV:"figma_basics_tooltips_nav_step",FRAME:"figma_basics_tooltips_frame_step",TEXT:"figma_basics_tooltips_text_step",FORMAT_TEXT:"figma_basics_tooltips_format_text_step",DESIGN_PANEL:"figma_basics_tooltips_design_panel_step",PRESETS_ENDING:"figma_basics_tooltips_presets_ending_step",UI_KITS_ENDING:"figma_basics_tooltips_ui_kits_ending_step"};function U({completeOverlay:e}){let t=(0,a.wA)(),n=(0,a.Pj)(),s=(0,p.f)("figma_basics_tooltips_onboarding"),l=(0,p.f)(B.FRAME),d=(0,p.f)(B.TEXT),c=(0,p.f)(B.FORMAT_TEXT),u=(0,p.f)(B.DESIGN_PANEL),m=(0,p.f)(B.UI_KITS_ENDING),h=!!(0,p.f)("started_figma_basics_onboarding"),f=(0,C.aV)(),[g,S]=(0,r.useState)(N.en.FORWARD),I=(0,a.d4)(e=>e.mirror.sceneGraph),{hasAnyUiKit:A}=(0,v.I7)(),O=A&&!m,D=[O].reduce((e,t)=>t?e+1:e,4),L=(e,n=N.en.FORWARD)=>{S(n),t(o.b({[e]:!0}))},U=(e,n=N.en.BACKWARD)=>{S(n),t(o.b({[e]:!1}))},V=()=>{e(),t(o.b({figma_basics_tooltips_onboarding:!0}))};return(r.useEffect(()=>{s||f||h||t(o.b({started_figma_basics_onboarding:!0}))},[f,s,t,h]),s||f)?null:l?d?c?u?O?(0,i.jsx)(F,{onPrimaryCtaClick:()=>L(A?B.UI_KITS_ENDING:B.PRESETS_ENDING),onSecondaryCtaClick:()=>U(B.DESIGN_PANEL),onClose:V,currentStepNum:5,totalNumSteps:D,primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:y.c.DONE}}):(0,i.jsx)(j,{onPrimaryCtaClick:()=>{let e=(0,b.xA)({state:n.getState(),openNewFileIn:w.ai.NEW_TAB,folderOverride:"drafts",trackingInfo:{from:w.f6.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL,selectedView:n.getState().selectedView},editorType:E._Y.DESIGN});t(_.uM(e)),V()},onSecondaryCtaClick:V,onClose:V}):(0,i.jsx)(T.K,{onNext:()=>L(B.DESIGN_PANEL),onPrevious:()=>U(B.FORMAT_TEXT),onClose:V,currentStepNum:4,totalNumSteps:D,getNodeToSelect:()=>(0,N.aD)(I),flowDirection:g}):(0,i.jsx)(R.P,{onPrimaryCtaClick:()=>L(B.FORMAT_TEXT),onSecondaryCtaClick:()=>U(B.TEXT),onClose:V,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:3,totalNumSteps:D}),skip:()=>{g===N.en.FORWARD?L(B.FORMAT_TEXT):U(B.TEXT)},getNodeToSelect:()=>(0,N.wy)(I)}):(0,i.jsx)(P,{onNext:()=>L(B.TEXT),onPrevious:()=>U(B.FRAME),onClose:V,currentStepNum:2,totalNumSteps:D}):(0,i.jsx)(M,{onPrimaryCtaClick:()=>L(B.FRAME),onClose:V,currentStepNum:1,hideCloseButton:!0,totalNumStep:D})}var V=n(279758),H=n(341153);function z({onPrimaryCtaClick:e,onSecondaryCtaClick:t,primaryCtaProps:n,secondaryCtaProps:s,onClose:l,skip:d,currentStepNum:c,totalNumSteps:u,lowerLeftText:m,title:p,bodyText:h,frameNodeMatcher:f}){let g=(0,a.wA)(),_=(0,V.Vr)(),y=f?.(I.UN())||(0,N.eN)((0,I.UN)(),"FRAME",_),b=(0,H.Z)(),[v,C]=r.useState(!1);if((0,A.h)(()=>{queueMicrotask(async function(){if(null==y){d();return}_?.type!=="FRAME"&&await (0,N.zU)({navigate:b,guidToSelect:y.guid}),C(!0),g(o.b({design_panel_step_shown:!0})),S.glU?.triggerAction("set-tool-default",null)})}),!v)return null;let E=(0,i.jsx)(k.uY,{currentStepNum:c||2,totalNumSteps:u||4,useLoadingBar:!0}),w={dismissModal:l,disableHighlight:!0,targetKey:T.W,title:p||(0,x.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),trackingContextName:"Tooltips+ Design Panel Step (No Figma Basics)",lowerLeftText:m||E,onSecondaryCtaClick:t,onPrimaryCtaClick:e,primaryCtaProps:n,secondaryCtaProps:s,arrowPosition:L.F_.RIGHT_BODY,shouldCenterArrow:L.EL.FALLBACK,pointsTo:"designPanel"};return(0,i.jsx)(k.VF,{...w,children:h||(0,x.tx)("tooltips_plus_onboarding.next_take_some_time_to_adjust_your_frames_size")})}var G=n(378721),K=n(730436),W=n(224542),q=n.n(W),X=n(393463),Y=n(346942),J=n(338630),Z=n(811804),Q=n(212198),$=n(761312),ee=n(689966),et=n(1007),en=n(157750),ei=n(488790),er=n(716890),ea=n(469983);let es="no_figma_basics_panning_and_zooming_step--selectedHeaderTitle--Cil08",eo="no_figma_basics_panning_and_zooming_step--unselectedHeaderTitle--iBMkG",el="no_figma_basics_panning_and_zooming_step--instructionRow--A7ICn",ed="no_figma_basics_panning_and_zooming_step--icon--V-ZJB",ec="no_figma_basics_panning_and_zooming_step--heavyFontWeight--K59FY",eu="no_figma_basics_panning_and_zooming_step--keyboardKeyHighlight--a6yBE";function em({markComplete:e}){let t=(0,p.f)("has_panned_in_design_file"),n=(0,p.f)("has_zoomed_in_design_file"),s=(0,p.f)("dismissed_no_figma_basics_panning_and_zooming_tooltip"),[o,l]=r.useState(()=>t||n),d=!o&&!s,[c,u]=r.useState(!1);(0,er.g)("no_figma_basics_panning_and_zooming_overlay"),(0,ei.U)("no_figma_basics_panning_and_zooming_overlay");let m=!!(0,p.f)("no_figma_basics_panning_and_zooming_overlay");r.useEffect(()=>{m&&c&&setTimeout(()=>{u(!1)},1300)},[m,u,c]);let h=(0,$.q)(),f=(0,a.d4)(e=>e.mirror.sceneGraph),g=h&&(0,N.Qf)(f),x=!!g&&g.childCount>0;if(r.useEffect(()=>{h&&null!=f&&(x&&(c||d)||e())},[x,h,c,e,f,d]),!x)return null;let _={};return m&&(_={opacity:"0",transition:"opacity",transitionDelay:"1000ms",transitionDuration:"300ms"}),(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(ef,{}),c&&(0,i.jsx)("div",{style:_,children:(0,i.jsx)(ep,{})})]})}function ep(){let e=(0,et.QU)({subscribeToUpdates_expensive:!0});return(0,i.jsx)(J.fu,{name:"Panning and Zooming Glow Overlay",children:(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--readyToDesignMoreContainer--utEin",children:[(0,i.jsx)("div",{className:"no_figma_basics_panning_and_zooming_step--readyToDesignMoreBoldText--6V-BV",children:(0,x.tx)("tooltips_plus_onboarding.ready_to_design_more")}),(0,x.tx)("tooltips_plus_onboarding.go_to_a_blank_spot_in_your_canvas"),(0,i.jsx)(Y.Kz,{multiple:3}),(0,i.jsx)("div",{style:{width:e+"px",borderRadius:e+"px"},className:"no_figma_basics_panning_and_zooming_step--blueGlow--IB6p3"})]})})}var eh=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(eh||{});function ef(){let e=(0,a.wA)(),[t,n]=r.useState("mouse");return(0,i.jsx)(J.fu,{name:"Panning and Zooming Instructions Modal",children:(0,i.jsx)(ea.wz,{children:(0,i.jsxs)("div",{"data-testid":"panning-and-zooming-hint",className:"no_figma_basics_panning_and_zooming_step--container--07Kgb",children:[(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--header--MqBpr",children:[(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--headerTabs--ZErkf",children:[(0,i.jsx)("button",{className:q()({[es]:"mouse"===t,[eo]:"mouse"!==t}),onClick:()=>n("mouse"),children:(0,x.tx)("tooltips_plus_onboarding.mouse")}),(0,i.jsx)("button",{className:q()({[es]:"trackpad"===t,[eo]:"trackpad"!==t}),onClick:()=>n("trackpad"),children:(0,x.tx)("tooltips_plus_onboarding.trackpad")})]}),(0,i.jsx)("div",{className:"no_figma_basics_panning_and_zooming_step--closeButton--bv5cT",children:(0,i.jsx)(G.K,{onClick:()=>{e(o.b({dismissed_no_figma_basics_panning_and_zooming_tooltip:!0}))},"aria-label":(0,x.t)("general.close"),htmlAttributes:{"data-testid":"close-button"},children:(0,i.jsx)(K.X,{})})})]}),(0,i.jsxs)("div",{className:"no_figma_basics_panning_and_zooming_step--body--LbF-6",children:[(0,i.jsx)(Y.Kz,{multiple:1.5}),(0,i.jsx)(ev,{peripheral:t}),(0,i.jsx)(Y.Kz,{multiple:2}),(0,i.jsx)(eC,{peripheral:t})]})]})})})}let eg=e=>"dark"===e?(0,X.ck)("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):(0,X.ck)("99d648a7ac711ba9d19976515105d6395eeb2d4c"),ex=e=>"dark"===e?(0,X.ck)("e27a5d39945685c389cd50e9f08144678edefeab"):(0,X.ck)("2357b697bfe85711b1de702dc63611ef8bb75859"),e_=e=>"dark"===e?(0,X.ck)("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):(0,X.ck)("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),ey=e=>"dark"===e?(0,X.ck)("045c7e1324e953b8ee9ec91ac4e944995662e11e"):(0,X.ck)("c764bcd0a726bf2d31f70f16808785efeae4de56"),eb=e=>"dark"===e?(0,X.ck)("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):(0,X.ck)("32f4843d9b24a4b95129bacd47f6b81fe439228f");function ev({peripheral:e}){let t=(0,Z.DP)(),n="mouse"===e?ey(t):eg(t),r=`${e} icon`,a=(0,en.J2)((0,Q.UK)().scrollWheelZoom);return(0,i.jsxs)("div",{className:el,children:[(0,i.jsx)("img",{src:n,className:ed,alt:r}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:ec,children:(0,x.tx)("tooltips_plus_onboarding.to_zoom")}),"\xa0","mouse"!==e?(0,x.tx)("tooltips_plus_onboarding.pinch_your_trackpad"):a?(0,x.tx)("tooltips_plus_onboarding.scroll_your_mouse"):(0,x.tx)("tooltips_plus_onboarding.hold_key_and_scroll",{keyboardKey:(0,i.jsx)("span",{className:eu,children:(0,x.tx)(ee.y.isMac()?"tooltips_plus_onboarding.command_key":"tooltips_plus_onboarding.control_key")})})]})]})}function eC({peripheral:e}){let t=(0,Z.DP)(),n=(0,en.J2)((0,Q.UK)().rightClickPan),r=`${e} icon`;return(0,i.jsxs)("div",{className:el,children:[(0,i.jsx)("img",{src:"mouse"!==e?ex(t):n?eb(t):e_(t),className:ed,alt:r}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:ec,children:(0,x.tx)("tooltips_plus_onboarding.to_move")}),"\xa0","mouse"!==e?(0,x.tx)("tooltips_plus_onboarding.swipe_your_trackpad_with_two_fingers"):n?(0,x.tx)("tooltips_plus_onboarding.hold_right_click_while_moving_mouse"):(0,x.tx)("tooltips_plus_onboarding.hold_space_and_left_click_while_moving_your_mouse",{spaceKey:(0,i.jsx)("span",{className:eu,children:(0,x.tx)("tooltips_plus_onboarding.space_key")})})]})]})}var eE=n(488051);function ew(e){let t=(0,a.wA)(),n=(0,eE.te)()()?(0,x.tx)("tooltips_plus_onboarding.ui_kits_and_icon_packs_step.title"):(0,x.tx)("tooltips_plus_onboarding.ui_kits_step.title"),s=(0,x.tx)("tooltips_plus_onboarding.ui_kits_step.description"),o="UI Kits";return(0,v.oe)()&&(n=(0,x.tx)("tooltips_plus_onboarding.assets_step.title"),s=(0,x.tx)("tooltips_plus_onboarding.assets_step.description"),o="Assets"),r.useEffect(()=>{t(O.FP({tab:S.xae.ASSETS}))},[t]),(0,i.jsx)(k.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:v.RJ,title:n,trackingContextName:`Tooltips+ ${o} Step`,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:()=>{t(O.FP({tab:S.xae.LAYERS})),e.onNext()},arrowPosition:L.F_.LEFT_TITLE,pointsTo:"leftPanel",children:s})}let ek={FRAME:"no_figma_basics_tooltips_frame_step",TEXT:"no_figma_basics_tooltips_text_step",FORMAT_TEXT:"no_figma_basics_tooltips_format_text_step",DESIGN_PANEL:"no_figma_basics_tooltips_design_panel_step",PRESETS:"no_figma_basics_tooltips_presets_step",PRESETS_ENDING:"no_figma_basics_tooltips_presets_ending_step",UI_KITS:"no_figma_basics_tooltips_ui_kits_step",UI_KITS_ENDING:"no_figma_basics_tooltips_ui_kits_ending_step",PANNING_AND_ZOOMING_GLOW_OVERLAY:"no_figma_basics_panning_and_zooming_overlay",PANNING_AND_ZOOMING_TOOLTIP:"dismissed_no_figma_basics_panning_and_zooming_tooltip"};function eT({completeOverlay:e}){let t=(0,a.wA)(),n=(0,p.f)("no_figma_basics_tooltips_onboarding"),s=(0,C.aV)(),[l,d]=r.useState(N.en.FORWARD),c=(0,p.f)(ek.FRAME),u=(0,p.f)(ek.TEXT),m=(0,p.f)(ek.FORMAT_TEXT),h=(0,p.f)(ek.DESIGN_PANEL),f=(0,p.f)(ek.UI_KITS),g=(0,p.f)(ek.UI_KITS_ENDING),{hasAnyUiKit:_,status:b}=(0,v.I7)(),E=_&&!f,w=_&&!g,T=[_].reduce((e,t)=>t?e+1:e,4),j=(0,V.Vr)(),S=()=>(0,N.eN)((0,I.UN)(),"TEXT",j),A=(e,n=N.en.FORWARD)=>{d(n),t(o.b({[e]:!0}))},O=(e,n=N.en.BACKWARD)=>{d(n),t(o.b({[e]:!1}))},D=(e,t)=>{l===N.en.FORWARD?A(t):O(e)},L=r.useCallback(()=>{e(),t(o.b({no_figma_basics_tooltips_onboarding:!0}))},[e,t]);return n||s||"loading"===b?null:(0,i.jsx)("div",{"data-testid":"no-figma-basics-step",children:(()=>{if(E)return(0,i.jsx)(ew,{onNext:()=>A(_?ek.UI_KITS:ek.PRESETS),onClose:L,currentStepNum:1,totalNumSteps:T,useLoadingBar:!0});if(c){if(!h)return(0,i.jsx)(z,{onPrimaryCtaClick:()=>A(ek.DESIGN_PANEL),onSecondaryCtaClick:()=>O(ek.FRAME),onClose:L,skip:()=>D(ek.FRAME,ek.DESIGN_PANEL)});if(!u)return(0,i.jsx)(P,{onNext:()=>A(ek.TEXT),onPrevious:()=>O(ek.DESIGN_PANEL),onClose:L,currentStepNum:3,totalNumSteps:T,useLoadingBar:!0});if(!m)return(0,i.jsx)(R.P,{onPrimaryCtaClick:()=>A(ek.FORMAT_TEXT),onSecondaryCtaClick:()=>O(ek.TEXT),onClose:L,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:4,totalNumSteps:T,useLoadingBar:!0}),skip:()=>{l===N.en.FORWARD?A(ek.FORMAT_TEXT):O(ek.TEXT)},getNodeToSelect:S});else if(w)return(0,i.jsx)(F,{onPrimaryCtaClick:()=>A(_?ek.UI_KITS_ENDING:ek.PRESETS_ENDING),onSecondaryCtaClick:()=>O(ek.FORMAT_TEXT),onClose:L,currentStepNum:5,totalNumSteps:T,useLoadingBar:!0,primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:y.c.DONE}});else return(0,i.jsx)(em,{markComplete:L})}{let e=_?()=>O(ek.UI_KITS):void 0;return(0,i.jsx)(M,{currentStepNum:1,totalNumStep:T,onPrimaryCtaClick:()=>A(ek.FRAME),onSecondaryCtaClick:e,onClose:L,skip:()=>{D(ek.PRESETS,ek.FRAME)},useLoadingBar:!0,hasUiKits:_})}})()})}function ej(e){let[t,n]=r.useState(!1),a=(0,H.Z)(),s=r.useRef(null),o=e.getNodeForViewportFocus?.(),l=e.getNodeToSelect();return(0,A.h)(()=>{queueMicrotask(async function(){l&&null===s.current?(await (0,N.zU)({navigate:a,guidToFocus:o?.guid,guidToSelect:l.guid}),n(!0),s.current=l):l||s.current||e.onNext()})}),(0,i.jsx)(k.TG,{arrowPosition:L.F_.LEFT_TITLE,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,pointsTo:"leftPanel",targetKey:s.current?s.current.guid:R.B,title:(0,x.tx)("starting_points_onboarding.edit_text_step.title"),trackingContextName:"Starting Points Tooltips Edit Text Step",visible:t,children:(0,x.tx)("starting_points_onboarding.edit_text_step.description")})}function eS(e){let t=(0,h.Lh)(h.D8.PAINT_PANEL_ROW,"paint-1-0");return(0,i.jsx)(k.VF,{arrowPosition:L.F_.RIGHT_BODY,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"designPanel",targetKey:t,title:(0,x.tx)("starting_points_onboarding.fills_step.title"),trackingContextName:"Starting Points Fills Step",children:(0,x.tx)("starting_points_onboarding.fills_step.description")})}var eI=n(890305);function eA(e){let[t,n]=r.useState(!1),a=(0,H.Z)();return((0,A.h)(()=>{queueMicrotask(async function(){let t=e.getNodeForViewportFocus?.(),i=e.getNodeToSelect();i&&"FRAME"===i.type?(await (0,N.zU)({navigate:a,guidToFocus:t?.guid,guidToSelect:i.guid}),n(!0)):e.flowDirection===N.en.FORWARD?e.onNext():e.onPrevious()})}),t)?(0,i.jsx)(k.VF,{arrowPosition:eI.F_.RIGHT_BODY,disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"designPanel",targetKey:"design-panel-container",title:(0,x.tx)("starting_points_onboarding.properties_step.title"),trackingContextName:"Starting Points Properties Step",children:(0,x.tx)("starting_points_onboarding.properties_step.description")}):null}let eN=(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.207 5.793a1 1 0 0 0-1.414 0l-2 2a1 1 0 0 0 0 1.414l2 2a1 1 0 0 0 1.414 0l2-2a1 1 0 0 0 0-1.414zM6.5 8.5l.707.707.586.586.707.707.707-.707.586-.586.707-.707-.707-.707-.586-.586L8.5 6.5l-.707.707-.586.586zm9 2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5M17 8.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M15.5 13a.5.5 0 0 1 .5.5V15h1.5a.5.5 0 1 1 0 1H16v1.5a.5.5 0 1 1-1 0V16h-1.5a.5.5 0 0 1 0-1H15v-1.5a.5.5 0 0 1 .5-.5m-6 0h-2A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13M7 14.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})});var eM=n(122970);function eR(e){return(0,i.jsx)(k.VF,{disableHighlight:!0,dismissModal:e.onClose,lowerLeftText:(0,i.jsx)(k.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onPrimaryCtaClick:e.onNext,onSecondaryCtaClick:e.onPrevious,pointsTo:"toolbar",shouldCenterArrow:L.EL.BEST_EFFORT,targetKey:eM.aE,title:(0,x.tx)("starting_points_onboarding.toolbar_step.title"),trackingContextName:"Tooltips+ Text Step",children:(0,x.tx)("starting_points_onboarding.toolbar_step.description",{actionsSvg:(0,i.jsx)("span",{style:{display:"inline-block",height:"16px",width:"21px"},children:(0,i.jsx)(eN,{})}),strongActions:(0,i.jsx)("strong",{children:(0,x.tx)("qa.extensions.tooltip_actions")})})})}let eP={EDIT_TEXT:"starting_points_tooltips_edit_text_step",PROPERTIES:"starting_points_tooltips_properties_step",FILLS:"starting_points_tooltips_fills_step",TOOLBAR:"starting_points_tooltips_toolbar_step",ASSETS:"starting_points_tooltips_assets_step"};function eO({completeOverlay:e}){let t=(0,a.wA)(),n=(0,p.f)("seen_starting_points_tooltips_onboarding"),s=(0,p.f)(eP.EDIT_TEXT),l=(0,p.f)(eP.PROPERTIES),d=(0,p.f)(eP.FILLS),c=(0,p.f)(eP.TOOLBAR),u=(0,p.f)(eP.ASSETS),m=!!(0,p.f)("started_figma_basics_onboarding"),h=(0,C.aV)(),[f,g]=(0,r.useState)(N.en.FORWARD),_=(0,a.d4)(e=>e.mirror.sceneGraph),b=(e,n=N.en.FORWARD)=>{g(n),t(o.b({[e]:!0}))},v=(e,n=N.en.BACKWARD)=>{g(n),t(o.b({[e]:!1}))},E=()=>{e(),t(o.b({seen_starting_points_tooltips_onboarding:!0}))};return(r.useEffect(()=>{n||h||m||t(o.b({started_figma_basics_onboarding:!0}))},[h,n,t,m]),n||h)?null:(0,i.jsx)("div",{children:s?l?d?c?u?void 0:(0,i.jsx)(F,{onPrimaryCtaClick:()=>b(eP.ASSETS),onSecondaryCtaClick:()=>v(eP.TOOLBAR),onClose:E,currentStepNum:5,totalNumSteps:5,primaryCtaProps:{ctaText:(0,x.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:y.c.DONE},forStartingPoints:!0}):(0,i.jsx)(eR,{onNext:()=>b(eP.TOOLBAR),onPrevious:()=>v(eP.FILLS),onClose:E,currentStepNum:4,totalNumSteps:5}):(0,i.jsx)(eS,{onNext:()=>b(eP.FILLS),onPrevious:()=>v(eP.PROPERTIES),onClose:E,currentStepNum:3,totalNumSteps:5}):(0,i.jsx)(eA,{onNext:()=>b(eP.PROPERTIES),onPrevious:()=>v(eP.EDIT_TEXT),onClose:E,currentStepNum:2,totalNumSteps:5,getNodeToSelect:()=>(0,N.nt)(_),flowDirection:f}):(0,i.jsx)(ej,{onNext:()=>b(eP.EDIT_TEXT),onClose:E,currentStepNum:1,totalNumSteps:5,getNodeToSelect:()=>(0,N.l7)(_)})})}let eD="tooltips_plus_onboarding_reset_onboarding";function eL(){let e=(0,a.wA)(),t=(0,m.iZ)(),n=u.q5()?.canEditCanvas,x=(0,s.md)(c.NT),_=(0,s.md)(c.g5),{isShowing:y,complete:b,show:v,uniqueId:C}=(0,d.e)({overlay:g.WD4,priority:f.N.OVERRIDING_MODAL},[_,x]),E=!!(0,p.f)("editor_onboarded"),w=!!(0,p.f)("figma_basics_tooltips_onboarding"),k=!!(0,p.f)("no_figma_basics_tooltips_onboarding"),T=!!(0,p.f)("seen_starting_points_tooltips_onboarding"),j=!!(0,p.f)("started_figma_basics_onboarding"),S=(0,u.Cq)({useSinatraType:!0}),I=(0,h.WO)(t?.id,S,[N.d4]),[A,M]=r.useState(!1),[R,P]=r.useState(!1);(0,l.E)(C,["Reset Onboarding",eD],()=>{if(!t||!S)return;let n=I?{figma_basics_tooltips_onboarding:!1,[B.NAV]:!1,[B.FRAME]:!1,[B.TEXT]:!1,[B.FORMAT_TEXT]:!1,[B.DESIGN_PANEL]:!1,[B.PRESETS_ENDING]:!1,[B.UI_KITS_ENDING]:!1}:{no_figma_basics_tooltips_onboarding:!1,[ek.FRAME]:!1,[ek.TEXT]:!1,[ek.FORMAT_TEXT]:!1,[ek.DESIGN_PANEL]:!1,[ek.PRESETS]:!1,[ek.PRESETS_ENDING]:!1,[ek.VISUAL_ASSETS]:!1,[ek.UI_KITS]:!1,[ek.UI_KITS_ENDING]:!1,[ek.PANNING_AND_ZOOMING_GLOW_OVERLAY]:!1,[ek.PANNING_AND_ZOOMING_TOOLTIP]:!1,design_panel_step_shown:!1,format_text_step_shown:!1,started_figma_basics_onboarding:!1};e(o.b(n))}),(0,l.E)(C,"starting_points_template_inserted",()=>{M(!0)}),(0,l.E)(C,"starting_points_basics_template_inserted",()=>{P(!0)});let O=r.useCallback(()=>{t&&S&&n&&!w&&(I||!j&&!k&&!T&&!E)&&(y||v())},[t,S,n,w,E,I,y,T,v,j,k]);return(r.useEffect(()=>{O()},[O]),y)?I||R?(0,i.jsx)("div",{"data-testid":"figma-basics-tooltips-onboarding",children:(0,i.jsx)(U,{completeOverlay:b})}):A?(0,i.jsx)("div",{"data-testid":"starting-points-tooltips-onboarding",children:(0,i.jsx)(eO,{completeOverlay:b})}):(0,i.jsx)("div",{"data-testid":"no-basics-file-tooltips-onboarding",children:(0,i.jsx)(eT,{completeOverlay:b})}):null}},302711:(e,t,n)=>{n.d(t,{PH:()=>ex});var i,r=n(239976),a=n(105652),s=n(20002),o=n(836848),l=n(864549),d=n(517478),c=n(245814),u=n(655793),m=n(454705),p=n(379141),h=n(224542),f=n.n(h),g=n(338630),x=n(166734),_=n(677451),y=n(641172),b=n(526575),v=n(223487),C=n(105641),E=n(938241),w=n(591600),k=n(835585),T=n(747079),j=n(942356),S=n(874554),I=n(920675),A=n(619832),N=n(254056),M=n(943360),R=n(928095),P=n(154963),O=n(136393),D=n(748181),L=n(594997);let F="_team_templates_browse",B="seen_figjam_make_tmpl_category";function U({selectedCategory:e,selectCategory:t,categoryTitles:n,categoryIds:i,triggeredFrom:o,makeSomethingCategoryId:l,subcategories:d}){let c=(0,s.wA)(),u=(0,v.tS)(),m=(0,_.Gi)(),h=(0,D.f)("figjam_editor_onboarded"),f=(0,D.f)(B),g=i.filter(e=>d.every(t=>!t.categoryIds.includes(e)));(0,a.useEffect)(()=>{"makeSomething"!==o&&h&&!f&&(t(l),c(O.b({[B]:!0})))},[c,h,f,l,t,o]);let x=e=>{t(e),(0,b.Cu)({fileKey:u,categoryName:e},"template_modal_category_selected")},y=t=>t.map(t=>{let i=n[t];return i?(0,r.jsx)(V,{text:i,isSelected:e===t,onClick:()=>x(t)},t):null});return(0,r.jsxs)("ul",{className:L.pz,children:[(0,r.jsx)(V,{text:(0,p.t)("browse_templates_modal.all_templates"),onClick:()=>t(void 0),isSelected:!e}),m&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(V,{text:(0,p.t)("browse_templates_modal.header_name_templates",{entityName:m.name||""}),onClick:()=>x(F),isSelected:e===F,"data-testid":"org-templates"})}),y(g),d.map(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)("div",{className:P.s.minH16.p0.$}),(0,r.jsx)("h2",{className:L.vC,children:e.title}),(0,r.jsx)("ul",{children:y(e.categoryIds)})]},e.id)),(0,r.jsx)("li",{className:P.s.minH8.$}),(0,r.jsxs)("li",{className:L.D5,children:[(0,r.jsx)(R.N,{className:L.wP}),(0,r.jsx)(N.N,{href:"/community/figjam",newTab:!0,onClick:()=>{(0,b.Cu)({fileKey:u,uiSelectedView:"browse_more_sidebar_link",name:"Templates Modal Browse More"},"cta_clicked")},children:(0,p.tx)("browse_templates_modal_sidebar.see_more_in_community")})]})]})}function V(e){return(0,r.jsx)("li",{children:(0,r.jsx)(M.E,{className:e.isSelected?L.X6:L.Mo,onClick:e.onClick,"aria-current":e.isSelected,children:e.text})})}U.displayName="BrowseTemplatesModalSidebar",V.displayName="TemplatesPickerSidebarItem";var H=n(684291),z=n(754633);function G(e){let t=(0,_.tS)(),n=(0,s.d4)(e=>e.hubFiles),i=(0,v.tS)(),o=a.useMemo(()=>X(e.templates),[e.templates]),l=a.useRef(null);a.useEffect(()=>{l.current?.scrollTo(0,0)},[e.selectedCategory]);let d=null;if(e.selectedCategory){let t=(e.templates[e.selectedCategory]||[]).map(e=>n[e]);d=(0,r.jsx)(W,{templates:t.filter(e=>!!e).map(e=>({template:e,type:E.n.HubFile})),categoryTitle:e.categoryTitles[e.selectedCategory],category:e.selectedCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile})}else d=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.O9,{},"team_template_announcement"),t&&(0,r.jsx)(K,{onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory}),e.categoryIds.map(t=>{let i=(o[t]||[]).map(e=>n[e]).filter(e=>!!e);return(0,r.jsx)(W,{category:t,categoryTitle:e.categoryTitles[t],templates:i.map(e=>({template:e,type:E.n.HubFile,category:t})),templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile},`templates_category_preview:${t}`)})]});return(0,r.jsxs)("div",{className:L.rb,ref:l,children:[d,(0,r.jsx)(H.tJ,{url:e.enterCommunityUrl,fileKey:i||null})]})}function K(e){let{templates:t,isLoading:n,templateBrowseEntity:i}=(0,_.wv)(I._Y.WHITEBOARD,3);return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.G3,{}),(0,r.jsx)(H.G3,{}),(0,r.jsx)(H.G3,{shouldFade:!0})]}):t.length&&i?(0,r.jsx)(W,{category:F,categoryTitle:(0,p.t)("browse_templates_modal.header_name_templates",{entityName:i.name}),templates:t,selectCategory:e.selectCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate}):null}function W(e){let t=e.selectCategory;return(0,r.jsxs)("div",{className:L.xQ,children:[(0,r.jsxs)("div",{className:L.w0,children:[(0,r.jsx)("h2",{className:L.$I,children:e.categoryTitle}),t&&(0,r.jsx)(j.$n,{variant:"link",onClick:()=>t(e.category),"aria-label":(0,p.t)("browse_templates_modal.see_all_category_title",{categoryTitle:e.categoryTitle}),children:(0,p.tx)("browse_templates_modal.see_all")})]}),(0,r.jsx)(q,{templates:e.templates,templateInsertionLocation:e.templateInsertionLocation,previewHubFile:e.previewHubFile,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate})]})}function q(e){let t=(0,S.fG)(),{previewHubFile:n}=e;return(0,r.jsxs)(H.iq,{children:[e.templates.map(i=>{let{primaryKey:a}=t(i);return(0,r.jsx)(H.AF,{template:i,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.onInsertTemplate(i),isInsertingTemplate:e.isInsertingTemplate(a),onPreview:i.type===E.n.HubFile&&n?()=>n(i.template.id):void 0},a)}),(0,r.jsx)(A.hT,{numResources:e.templates.length,maxResources:3})]})}G.displayName="BrowseTemplatesModalContent",W.displayName="TemplatesPickerCategorySection";let X=(e,t=3)=>{let n={};return Object.keys(e).forEach(i=>{e[i]&&(n[i]=e[i].slice(0,t))}),n};var Y=n(509682),J=n(348841),Z=n(319349),Q=n(191893),$=n(864538),ee=n(605985),et=n(526865);(e=>{function t(e){return(0,r.jsx)("div",{className:"resource_detail_view_header--subtitleContainer--PfVpD",children:e.children})}e.SmallStickyTopBar=function(e){let n=(0,ee.iZ)()?{}:{top:et.avG};return(0,r.jsx)("div",{className:e.className||"resource_detail_view_header--headerContainer_Small--XbA0d resource_detail_view_header--headerContainerBase--Ig3OO",style:n,children:(0,r.jsxs)("div",{className:"resource_detail_view_header--headerElementsContainer_Small--AYmfu resource_detail_view_header--headerElementsContainerBase--eQzwl detail_view--container--XKc-q detail_view--_container--Hdy8K text--fontPos14--QJNQC text--_fontBase--VaHfk",children:[(0,r.jsxs)("div",{className:"resource_detail_view_header--headerLeft--ZZdZk",children:[(0,r.jsxs)("div",{className:"resource_detail_view_header--titleContainer--Q4bIz",children:[(0,r.jsx)("h1",{className:"resource_detail_view_header--nameShrunk--jBwol text--fontPos18--FkHj- text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",children:e.name}),e.titleBadge]}),(0,r.jsx)(t,{children:(0,r.jsxs)("div",{className:"resource_detail_view_header--subtitleItem--GFW2s text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,r.jsx)($.L,{publishers:e.resource.community_publishers.accepted}),(0,r.jsx)($.I,{publishers:e.resource.community_publishers.accepted})]})})]}),(0,r.jsxs)("div",{className:"resource_detail_view_header--headerRight--U-xy2 detail_view--headerRight--NjTpr",children:[(0,r.jsx)("div",{className:"resource_detail_view_header--secondaryCTAContainer--cuJLj detail_view--likesContainer--78HQt",children:e.secondaryCTAButton}),(0,r.jsx)("div",{className:"resource_detail_view_header--rowReverse--a1-cM detail_view--rowReverse--1Uuvl",children:e.mainCTAButton})]})]})})}})(i||(i={}));var en=n(144118);function ei(e){let t=(0,s.wA)(),n=(0,s.d4)(e=>e.hubFiles),a=n[e.templateId],o=(0,C.a6)(a);if(!a)return null;let l=(0,r.jsx)(en.i,{insertTemplate:()=>e.insertTemplate({type:E.n.HubFile,template:a}),isInsertingTemplate:e.isInsertingTemplate,children:(0,C.Ve)(e.templateInsertionLocation)}),d=e.moreTemplateIds.filter(t=>t!==e.templateId).map(e=>n[e]);return(0,r.jsxs)("div",{className:"browse_templates_modal_resource_preview--resourcePreview--IOeuF",children:[(0,r.jsx)(i.SmallStickyTopBar,{resource:a,name:o.name,mainCTAButton:l,secondaryCTAButton:(0,r.jsx)(r.Fragment,{}),className:"browse_templates_modal_resource_preview--headerContainer--uAtOx",openCreatorsInNewTab:!0}),(0,r.jsxs)("div",{className:"browse_templates_modal_resource_preview--container--fGGkd hub_file_detail_view--container--hiyUQ",children:[(0,r.jsx)("div",{className:"browse_templates_modal_resource_preview--embedContainer--zAk42 hub_file_detail_view--embedContainer--qa388 detail_view--embedContainer--a5RR5",children:(0,r.jsx)(Q.Z,{containerClassName:"browse_templates_modal_resource_preview--embedContainerInner--SPpmS hub_file_detail_view--iframeContainer--P-7PH",disableClickToExpand:!0,disableComments:!0,disableFullscreen:!0,dispatch:t,fixedSize:!0,fullscreenState:Z.G4.DEFAULT,hubFile:a,profileIdToAdminResourceAs:null},a.id)}),(0,r.jsxs)("div",{className:"browse_templates_modal_resource_preview--metadataContainer--mCYYD",children:[(0,r.jsxs)("div",{className:"browse_templates_modal_resource_preview--description--GO6uG",children:[(0,J.$J)(o.description).trim().length>0&&(0,r.jsx)(Y.R,{fallback:null,errorFallback:null,value:o.description}),(0,r.jsx)("div",{className:P.s.mt16.$,children:(0,r.jsx)(N.N,{href:`/community/file/${e.templateId}`,newTab:!0,children:(0,p.tx)("browse_templates_modal.see_more_details_in_community")})})]}),(0,r.jsx)("div",{className:"browse_templates_modal_resource_preview--moreTemplatesHeader--C6IEU text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,p.tx)("browse_templates_modal.more_templates_like_this")}),(0,r.jsx)("div",{className:"browse_templates_modal_resource_preview--moreTemplatesGrid--PEmRY",children:d.slice(0,6).map(t=>(0,r.jsx)(H.Pr,{hubFileId:t.id,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.insertTemplate({type:E.n.HubFile,template:t}),isInsertingTemplate:e.isInsertingTemplate,previewHubFile:()=>e.selectTemplate(t.id)},t.id))})]})]})]})}ei.displayName="BrowseTemplatesModalResourcePreview";var er=n(777457),ea=n(863748),es=n(525793);function eo({searchQuery:e,hubFileResultIds:t,isInsertingTemplate:n,onInsertTemplate:i,onPreviewHubFileTemplate:s}){let o=(0,v.tS)(),l=a.useRef(null),d=(0,_.tS)(),[c,u]=(0,a.useState)(!d),{templates:m,requestLoadMore:h,isLoading:f}=(0,y.Ou)(e,d,I._Y.WHITEBOARD);(0,a.useEffect)(()=>{u(!d),"function"==typeof l.current?.scroll&&l.current.scroll({top:0,behavior:"smooth"})},[e,d]);let g=`/community/search?resource_type=files&editor_type=figjam&query=${e}`;return 0!==t.length||0!==m.length||f?f&&0===m.length?(0,r.jsx)(H.Cm,{}):(0,r.jsxs)("section",{className:P.s.wFull.p24.overflowYScroll.$,ref:l,children:[(0,r.jsxs)(H.iq,{children:[d&&m.map(e=>(0,r.jsx)(H.AF,{template:{template:e,type:E.n.TeamTemplate},isInsertingTemplate:n(e.file_key),onInsert:()=>i({template:e,type:E.n.TeamTemplate})},`team-template-${e.file_key}`)),c&&t.map(e=>(0,r.jsx)(H.Pr,{hubFileId:e,onInsert:i,isInsertingTemplate:n(e),previewHubFile:()=>s(e)},`hub-file-template-${e}`))]}),d&&!f&&(0,r.jsx)(er.a,{onIntersectionChange:({isIntersecting:e})=>{e&&!h()&&u(!0)}}),!f&&(0,r.jsx)("div",{className:P.s.mt24.$,children:(0,r.jsx)(H.tJ,{url:g,fileKey:o})})]}):(0,r.jsx)(ea._,{illustration:es.A,resourceTypeDisplayString:"templates",query:e,cta:(0,r.jsx)(N.N.Button,{href:g,newTab:!0,variant:"secondary",children:(0,p.tx)("browse_templates_modal.browse_more_in_community")})})}var el=n(378721),ed=n(205073),ec=n(64939);function eu(e){return(0,r.jsx)(d.Y9,{children:e.previewTemplateId?(0,r.jsx)(el.K,{"aria-label":(0,p.t)("general.back"),onClick:e.goBack,children:(0,r.jsx)(ec.C,{})}):(0,r.jsx)("div",{className:L.KF,children:(0,r.jsx)(ed.D.Lazy,{value:e.searchQuery,onChange:e.setSearchQuery,placeholder:(0,p.t)("browse_templates_modal.search_templates"),"aria-label":(0,p.t)("browse_templates_modal.search_templates"),"aria-description":(0,p.t)("general.search_will_update"),autoFocus:!0,size:"lg"})})})}eu.displayString="BrowseTemplatesModalTopBar";var em=n(851189),ep=n(496572),eh=n(387870);function ef(e){let t;let{onTemplateInsertedCurrentFile:n,onTemplateInsertedNewFile:i,onClose:c}=e,u=a.useRef(null),{templates:m,categoryTitles:h,duplicateFile:g,fileKey:b,searchQuery:v,searchTemplatesResult:T,setSearchQuery:j,categoryIds:S,subcategories:I}=(0,eh.bg)({source:"browse-templates-modal"}),{templates:A,categoryIds:N}=(0,eh.bg)({templatesShelfType:w.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER}),M={...A,...m},R=(0,_.Gi)(),P={};N.reduce((e,t)=>(e[t]=(0,p.t)("browse_templates_modal_sidebar.get_started"),e),P);let O={...h,...P},[D,B]=a.useState(),[V,H]=a.useState(),z=(0,l.Im)(M),K=D&&Object.values(M).find(e=>e.includes(D))||[],{insertTemplate:W,isInsertingTemplate:q}=(0,y.Fz)(),X=(0,s.d4)(e=>D?e.hubFiles[D]:null),Y=a.useCallback(()=>{n?n():c()},[n,c]);a.useEffect(()=>{let t=S.filter(t=>h[t]===e.initiallySelectedCategoryTitle);1===t.length&&H(t[0])},[S,h,e.initiallySelectedCategoryTitle]),a.useEffect(()=>{u.current?.scrollTo(0,0),D&&X&&(0,x._)("resource_previewed",{fileKey:b,resourceType:"template",resourceName:(0,C.a6)(X).name,resourceId:D,triggeredFrom:"browse-templates-modal",templateType:E.n.HubFile})},[D,b,X]);let J=!v,Z=(0,y.b4)(),Q=(0,y.WS)(),$=e=>q(e)||Q(e),ee=t=>{if(e.templateInsertionLocation===C.RD.CURRENT_FILE)W({template:t,onSuccess:Y,triggeredFrom:"browse-templates-modal"});else{switch(t.type){case E.n.HubFile:g(t.template.id);break;case E.n.TeamTemplate:Z({templateIdentifier:{type:k.vt.TeamTemplate,file_key:t.template.file_key},templateName:t.template.name,openInNewTab:!0});break;case E.n.TeamTemplateLg:Z({templateIdentifier:{type:k.vt.TeamTemplate,file_key:t.template.fileKey},templateName:t.template.name,openInNewTab:!0});break;default:(0,o.xb)(t)}i?.()}};if(D)t=(0,r.jsx)(ei,{templateId:D,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:ee,isInsertingTemplate:$(D),moreTemplateIds:K,selectTemplate:B}),J=!1;else if(v)t=(0,r.jsx)(eo,{searchQuery:v,hubFileResultIds:T,isInsertingTemplate:$,onInsertTemplate:ee,onPreviewHubFileTemplate:B});else if(V===F)switch(R?.type){case"org":t=(0,r.jsx)(em.yB,{insertTemplate:ee,isInsertingTemplate:$,templateInsertionLocation:e.templateInsertionLocation});break;case"team":t=(0,r.jsx)(ep.z,{teamId:R.entity.id,teamName:R.name,onInsert:ee,isInsertingTemplate:$,templateInsertionLocation:e.templateInsertionLocation});break;default:t=(0,r.jsx)(r.Fragment,{})}else t=z?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(G,{categoryIds:S,categoryTitles:O,enterCommunityUrl:"/community/figjam",isInsertingTemplate:$,onInsertTemplate:ee,previewHubFile:B,selectCategory:H,selectedCategory:V,templateInsertionLocation:e.templateInsertionLocation,templates:M});return(0,r.jsxs)(d.Wk,{className:f()({[L.hW]:"newFile"===e.triggeredFrom}),children:[(0,r.jsx)(eu,{searchQuery:v,setSearchQuery:j,previewTemplateId:D,goBack:()=>B(void 0)}),(0,r.jsxs)("div",{className:L.jE,ref:u,children:[J&&(0,r.jsx)(U,{categoryIds:S,categoryTitles:O,selectedCategory:V,selectCategory:H,makeSomethingCategoryId:N[0]??"",triggeredFrom:e.triggeredFrom,subcategories:I}),t]})]})}function eg(e){let{properties:t,name:n}=(0,g.j6)(),{onClose:i}=e,s=a.useCallback(()=>{i(),(0,b.Cu)({...t,trackingContext:n,text:"Templates Close Button"})},[t,n,i]),o=c.hS({...e,onClose:s});return(0,r.jsx)(m.J,{brand:"whiteboard",children:(0,r.jsx)(u.bL,{width:888,manager:o,children:(0,r.jsx)(ef,{...e})})})}let ex=(0,T.Ju)(function(e){let t=(0,v.tS)();return(0,r.jsx)(g.fu,{name:"template_modal_shown",properties:{fileKey:t,source:e.triggeredFrom},children:(0,r.jsx)(eg,{...e})})},"BrowseTemplatesModal")},846803:(e,t,n)=>{n.d(t,{y:()=>C,G:()=>v});var i=n(239976),r=n(105652),a=n(20002),s=n(732108),o=n(692376),l=n(379141),d=n(328452),c=n(536378),u=n(639184),m=n(720410),p=n(805248),h=n(105641),f=n(236410),g=n(302711),x=n(796557),_=n(338630);let y=(0,r.memo)((0,r.forwardRef)(function({tooltip:e,isActive:t,onClick:n,recordingKey:r,dataElementTarget:a,onboardingKey:s,disabled:o,dataTestId:l,children:d},c){return(0,i.jsx)(x.d,{ref:c,"aria-expanded":t,htmlAttributes:{"data-tooltip-type":e.type,"data-testid":l,"data-tooltip":e.type===f.Ib.TEXT?e.text:e.key,"data-element-target":a,"data-fullscreen-intercept":!0,"data-onboarding-key":s},onClick:n,recordingKey:r,"aria-label":e.type===f.Ib.TEXT?e.text:e.ariaLabel,disabled:o,children:d})})),b=(0,_.tf)(y),v="templates_toolbar";function C(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.modalShown?.type===g.PH.type),n=(0,m.k)(),x=(0,d.Om)(),_=(0,r.useCallback)(()=>{if(n){x("SHOW_TEMPLATES_MODAL");return}t?e(c.Ce()):(p.oW.trigger("action",o.KWd.CLEAR),e(c.$O({type:g.PH.type,data:{triggeredFrom:"toolbar",templateInsertionLocation:h.RD.CURRENT_FILE}})))},[n,x,e,t]),y=(0,l.t)("whiteboard.inserts.templates");return(0,i.jsx)(b,{tooltip:{type:f.Ib.TEXT,text:y},isActive:t,onClick:_,trackingProperties:{trackingDescriptor:u.c.TEMPLATES_TOOLBAR_ITEM_CLICKED},onboardingKey:v,children:(0,i.jsx)(s.X,{})})}},684291:(e,t,n)=>{n.d(t,{AF:()=>B,Cm:()=>X,G3:()=>q,Kt:()=>W,Pr:()=>U,iq:()=>O,mS:()=>D,tJ:()=>V});var i=n(239976),r=n(20002),a=n(836848),s=n(424364),o=n(943360),l=n(346524),d=n(254056),c=n(379141),u=n(224542),m=n.n(u),p=n(923500),h=n(141288),f=n(719749),g=n(7857),x=n(620030),_=n(154963),y=n(585066),b=n(490549),v=n(450207),C=n(526575),E=n(874554),w=n(83792),k=n(964731),T=n(105641),j=n(610604),S=n(938241),I=n(606932),A=n(397344),N=n(144118),M=n(619832),R=n(387870),P=n(594997);function O(e){return(0,i.jsx)("ul",{className:P.sk,children:e.children})}function D(e){return(0,i.jsx)(g.u9,{label:"TemplatesContextMenu",children:(0,i.jsx)(L,{...e})})}function L({template:e}){let t=(0,k.Um)(),{primaryKey:n}=(0,E.fG)()(e);return t?.type===R.hx&&t?.data?.templatePrimaryKey===n&&t.data?.position?(0,i.jsx)(F,{template:e,position:t.data.position}):null}function F({template:e,position:t}){let n=(0,r.wA)(),{viewSourceFileUrl:a,duplicateLink:s,primaryKey:o}=(0,E.fG)()(e),l=e.type===S.n.TeamTemplate,d=(0,f.bc)(j.sMs,{key:o},{enabled:l});return(0,i.jsxs)(x.ms,{style:{...t,position:"fixed"},children:[(0,i.jsx)(x.c$,{onClick:()=>{n(v.oB()),n(b.S({url:s}))},children:(0,c.tx)("browse_templates_modal.context_menu.copy_link")}),a&&l&&(0,i.jsx)(x.c$,{onClick:()=>{n(v.oB()),h.Ay.redirect(a,"_blank")},disabled:"loading"===d.status||"disabled"===d.status||!d.data?.file?.hasPermission,children:(0,i.jsxs)(p.Y1,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8,children:[(0,i.jsx)("span",{children:(0,c.tx)("browse_templates_modal.context_menu.view_original_file")}),(0,i.jsx)("span",{className:_.s.if("loading"!==d.status,_.s.invisible).$,children:(0,i.jsx)(y.k,{})})]})})]})}function B(e){let{clientMeta:t,imageUrl:n,thumbnailIsSet:r,isWhiteboard:a,name:s,publishers:d,hubFileId:u,resizedThumbnailUrls:m}=(0,E.fG)()(e.template),p=(0,R.jq)(e.template),h=(0,A.Td)();return(0,i.jsxs)("li",{children:[(0,i.jsx)(I.zq,{onContextMenu:p,image:(0,i.jsxs)(I.FK,{backgroundColor:(0,w.Cn)(t),children:[(0,i.jsx)(I.zx.Cover,{children:(0,i.jsx)(o.E,{className:P.n_,onClick:e.onInsert,disabled:e.isInsertingTemplate||h,"aria-label":(0,T.QE)(s,e.templateInsertionLocation),children:null})}),(0,i.jsx)(I.zx.Center,{children:(0,i.jsxs)(N.i,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0,children:[(0,T.Ve)(e.templateInsertionLocation),(0,i.jsx)(l.E,{children:s})]})}),(0,i.jsx)(M.Ho,{image:n,isSet:r,isWhiteboard:a,hubFileId:u,alt:"",resizedThumbnailUrls:m})]}),bottomRow:(0,i.jsx)(I.Wf.FullMetadata,{name:s,publishers:d,hoverText:e.onPreview?(0,c.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview})}),(0,i.jsx)(D,{template:e.template})]})}function U(e){let t=(0,r.d4)(t=>t.hubFiles[e.hubFileId]);return(0,i.jsx)(B,{template:{template:t,type:S.n.HubFile},onInsert:()=>e.onInsert({template:t,type:S.n.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function V({url:e,fileKey:t}){return(0,i.jsx)(d.N.Button,{href:e,newTab:!0,onClick:()=>{(0,C.Cu)({fileKey:t,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")},variant:"secondary",children:(0,c.tx)("browse_templates_modal_content.see_more_in_community")})}function H(){return(0,i.jsx)("div",{className:_.s.flex.itemsCenter.h40.my8.wFull.$,children:(0,i.jsx)(z,{})})}function z(){return(0,i.jsx)("div",{className:m()(_.s.w100.h16.bRadius3.$,P.Mm)})}function G({lightness:e="normal"}){let t=function(e){switch(e){case"normal":return P.Mm;case"light":return P.EQ;case"lightest":return P.Y;default:(0,a.xb)(e)}}(e);return(0,i.jsx)(I.zq,{image:(0,i.jsx)(I.FK,{removeBorder:!0,children:(0,i.jsx)("div",{className:m()(t,_.s.wFull.hFull.$)})}),bottomRow:(0,i.jsx)("div",{className:m()(t,_.s.h16.w100.bRadius3.$)})})}function K({shouldFade:e}){return(0,i.jsx)(i.Fragment,{children:(0,s.y1)(3).map(t=>{let n="normal";return e&&(n=2===t?"lightest":1===t?"light":"normal"),(0,i.jsx)(G,{lightness:n},t)})})}function W(){return(0,i.jsxs)("div",{className:_.s.px24.$,children:[(0,i.jsx)(H,{}),(0,i.jsxs)(O,{children:[(0,i.jsx)(K,{}),(0,i.jsx)(K,{}),(0,i.jsx)(K,{shouldFade:!0})]})]})}function q({shouldFade:e}){return(0,i.jsxs)("div",{className:_.s.pb20.$,children:[(0,i.jsx)("div",{className:_.s.h24.mb16.$,children:(0,i.jsx)(z,{})}),(0,i.jsx)(O,{children:(0,i.jsx)(K,{shouldFade:e})})]})}function X(){return(0,i.jsx)(p.Y1,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center",children:(0,i.jsx)(y.k,{size:"lg"})})}},754633:(e,t,n)=>{n.d(t,{Ht:()=>_,O9:()=>y});var i=n(239976),r=n(105652),a=n(20002),s=n(379141),o=n(127446),l=n(154963),d=n(714778),c=n(464239),u=n(136393),m=n(503530),p=n(677451),h=n(748181),f=n(157933);let g="team_template_card_view_count",x=()=>{if(!o.x4)return;let e=parseInt(o.x4.getItem(g)||"0");o.x4.setItem(g,""+ ++e)};function _({fullWidth:e=!1}){return(0,i.jsxs)("div",{className:l.s.flex.flexColumn.itemsCenter.mxAuto.gap12.alignCenter.justifyCenter.$,style:{width:e?"100%":"360px",paddingTop:"100px"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(f.$z,{size:f.IX.MEDIUM,useCurrentFileAsThumbnail:!1})}),(0,i.jsx)("div",{className:l.s.font13.fontSemiBold.$,children:(0,s.tx)("whiteboard.inserts.custom_templates_header")}),(0,i.jsx)("div",{children:(0,s.tx)("whiteboard.inserts.custom_templates_description")}),(0,i.jsx)(d.pW,{newTab:!0,href:m.A,children:(0,s.tx)("whiteboard.inserts.learn_more")})]})}function y({applyInsertStyling:e,applyNarrowStyling:t}){let n=(0,h.f)("dismissed_team_template_announcement_card"),s=(0,a.wA)(),l=(0,p.tS)(),d=(0,r.useCallback)(()=>{s(u.b({dismissed_team_template_announcement_card:!0})),localStorage.removeItem(g)},[s]),c=parseInt(o.x4?.getItem(g)||"0");return((0,r.useEffect)(()=>{!n&&c>=10&&d()},[n,c,d]),l&&c<10&&!n)?(0,i.jsx)(b,{applyInsertStyling:e,applyNarrowStyling:t,onDismiss:d}):null}function b({applyInsertStyling:e,applyNarrowStyling:t,onDismiss:n}){return(0,r.useEffect)(()=>{x()},[]),(0,i.jsxs)("div",{className:l.s.bRadius5.flex.flexRow.itemsStart.gap12.itemsCenter.p18.colorBgSecondary.mb20.if(e,l.s.m20).if(t,l.s.m12.p12.pt16.mb12).$,"data-testid":"teamplates-announcement-card",children:[(0,i.jsx)("div",{children:(0,i.jsx)(f.$z,{size:t?f.IX.SMALL:f.IX.MEDIUM,useCurrentFileAsThumbnail:!1})}),(0,i.jsxs)("div",{className:l.s.flex.flexColumn.justifyBetween.$,children:[(0,i.jsx)("div",{className:l.s.font13.fontSemiBold.pb8.$,children:(0,s.tx)("whiteboard.inserts.custom_templates_header")}),(0,i.jsx)("div",{children:(0,s.tx)("whiteboard.inserts.custom_templates_description")}),(0,i.jsxs)("div",{className:l.s.flex.gap8.pt16.$,children:[(0,i.jsx)(d.pW,{newTab:!0,href:m.A,children:(0,s.tx)("whiteboard.inserts.learn_more")}),(0,i.jsx)(c.V,{onClick:n,children:(0,s.tx)("whiteboard.inserts.dismiss")})]})]})]})}},851189:(e,t,n)=>{n.d(t,{DL:()=>M,Z0:()=>P,fc:()=>R,yB:()=>O});var i=n(239976),r=n(105652),a=n(787049),s=n(735786),o=n(415839),l=n(942356),d=n(116695),c=n(379141),u=n(270450),m=n(224542),p=n.n(m),h=n(777457),f=n(259714),g=n(154963),x=n(227517),_=n(677451),y=n(874554),b=n(816505),v=n(920675),C=n(629876),E=n(72865),w=n(754633),k=n(684291),T=n(496572),j=n(664608),S=n(400754),I=n(594997),A=n(225622),N=n(334272);function M({filterOptions:e,selectedIds:t,isMyTeamsOnly:n,onFilterChange:r,userTeamOrWorkspaceIds:d,showWorkspaces:u,rightAlignOptions:m=!0}){let p=new Set(t||e.map(e=>e.id)),h=[],f=[],y=[],b=!1;for(let t of e)p.has(t.id)&&y.push(t),(0,_.qI)(t)?b=!0:d.has(t.id)?h.push(t):f.push(t);(0,a.KQ)(h,"name"),(0,a.KQ)(f,"name");let v=h.filter(e=>p.has(e.id)),C=f.filter(e=>p.has(e.id)),w=function({filterOptionsCount:e,userMemberFilterOptionsSelected:t,userNonMemberFilterOptionsSelected:n,isMyTeamsOnly:i,showWorkspaces:r,unassignedTeamsSelected:a}){let s=[...t,...n],o=s.length+(a?1:0);return 0===o?(0,c.t)("browse_templates_modal.none_selected"):o===e?r?i?(0,c.t)("browse_templates_modal.my_teams_only"):(0,c.t)("browse_templates_modal.all_workspaces"):(0,c.t)("browse_templates_modal.all_teams"):1===o?a?(0,c.t)("browse_templates_modal.other_teams"):s[0].name:(0,c.t)("browse_templates_modal.first_name_count_more",{count:o-1,firstName:s[0].name})}({filterOptionsCount:e.length,userMemberFilterOptionsSelected:v,userNonMemberFilterOptionsSelected:C,showWorkspaces:u,isMyTeamsOnly:n,unassignedTeamsSelected:p.has(E.s)}),k=(e,t)=>{r({ids:e?y.reduce((e,n)=>n.id===t.id?e:[...e,n.id],[]):[...y.map(e=>e.id),t.id],myTeamsOnly:n})},T=(e,t)=>{let i=new Set(p);e.forEach(e=>{t?i.add(e.id):i.delete(e.id)}),r({ids:Array.from(i),myTeamsOnly:n})},{getTriggerProps:j,manager:S}=s.b({initialPosition:m?"bottom-end":"bottom-start"}),I=[];if(u){if(I.push(...[...h,...f].filter(e=>!!e.id).map(e=>{let t=p.has(e.id);return(0,i.jsx)(o.H_,{checked:t,onChange:()=>k(t,e),children:e.name},e.id||e.name)})),I.length&&I.unshift((0,i.jsx)(s.wv,{},"my-teams-only-separator")),I.unshift((0,i.jsx)(o.H_,{checked:n,onChange:()=>r({ids:t,myTeamsOnly:!n}),children:(0,c.tx)("browse_templates_modal.my_teams_only")},"my-teams-only")),b){let e=p.has(E.s);I.push((0,i.jsx)(s.wv,{},"unassigned-teams-separator")),I.push((0,i.jsx)(o.H_,{checked:e,onChange:()=>k(e,{id:E.s}),children:(0,c.tx)("browse_templates_modal.other_teams")},"unassigned-teams"))}}else h.length>0&&I.push((0,i.jsx)(o.H_,{checked:h.length===v.length,mixed:h.length>v.length&&v.length>0,onChange:()=>{T(h,v.length<h.length)},children:(0,c.tx)("browse_templates_modal.my_teams")},"my-teams")),I.push(...h.map(e=>{let t=p.has(e.id);return(0,i.jsx)(o.H_,{checked:t,onChange:()=>k(t,e),children:e.name},e.id||e.name)})),h.length>0&&f.length>0&&I.push((0,i.jsx)(s.wv,{},"other-teams-separator")),f.length>0&&I.push((0,i.jsx)(o.H_,{checked:f.length===C.length,mixed:f.length>C.length&&C.length>0,onChange:()=>{T(f,C.length<f.length)},children:(0,c.tx)("browse_templates_modal.all_others")},"other-teams")),I.push(...f.map(e=>{let t=p.has(e.id);return(0,i.jsx)(o.H_,{checked:t,onChange:()=>k(t,e),children:e.name},e.id||e.name)}));return I.length?(0,i.jsxs)(x.Y,{spacing:0,width:"hug-contents",children:[(0,i.jsx)("span",{className:g.s.colorTextSecondary.$,children:(0,c.tx)("browse_templates_modal.published_from")}),(0,i.jsxs)(s.bL,{manager:S,children:[(0,i.jsx)(l.$n,{...j(),variant:"ghost","aria-label":(0,c.t)("browse_templates_modal.filter_templates_by_publisher"),children:w}),(0,i.jsx)(s.mc,{children:I})]})]}):null}function R(e){let[t,n]=(0,r.useState)(!0),a=(0,r.useRef)(null),s=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{!0!==s.current||t||a.current?.scrollIntoView()},[t]),(0,i.jsxs)("section",{children:[(0,i.jsx)("button",{className:p()(g.s.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,I.MY),onClick:()=>n(!t),ref:a,children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(f.B,{className:g.s.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:t?A.A:N.A}),e.workspaceName&&(0,i.jsxs)("span",{className:g.s.colorTextSecondary.fontNormal.$,children:[e.workspaceName," /"," "]}),e.teamName]})}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:g.s.if(e.minimalSpacing,g.s.px0.mb0,g.s.px24.mb20).$,children:e.children}),(0,i.jsx)(h.a,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:t})=>{t&&e.onRequestLoadMoreForTeam(e.teamId)}})]}),(0,i.jsx)(h.a,{onIntersectionChange:({isIntersecting:e})=>{s.current=e}})]})}function P(e){return(0,i.jsxs)("section",{children:[(0,i.jsxs)(d.bL,{className:S.H6,children:[(0,i.jsxs)("h2",{className:S.bV,children:[e.workspaceName&&(0,i.jsxs)("span",{className:g.s.colorTextSecondary.fontNormal.$,children:[e.workspaceName," /"," "]}),e.teamName]}),(0,i.jsx)(d.gZ,{className:S.jy,children:(0,i.jsx)(l.$n.Link,{onClick:e.onSeeAllClick,children:(0,c.tx)("whiteboard.inserts.see_all")})})]}),(0,i.jsx)("div",{className:g.s.if(e.minimalSpacing,g.s.px0.mb0,g.s.px24.mb20).$,children:e.children})]})}function O(e){let t=(0,r.useRef)(null),n=(0,b.sZ)(),a=(0,C.G7)(n),{filterOptions:s,selectedTeamOrWorkspaceOrLicenseGroupIds:o,isMyTeamsOnly:l,onFilterChange:d,requestLoadMore:m,requestLoadMoreForTeam:p,templatesByTeam:f,userTeamOrWorkspaceIds:E,isLoadingTeamTemplates:S}=(0,_.GR)(n,v._Y.WHITEBOARD),{filterOptions:I,selectedIds:A,isMyTeamsOnly:N,onFilterChange:O,requestLoadMoreForOrg:D,teamTemplates:L,userTeamOrWorkspaceIds:F,isLoading:B}=(0,_.L_)({orgId:n.id,areWorkspacesEnabled:a,editorType:v._Y.WHITEBOARD,numTemplatesPerTeam:6}),U=(0,u.kc)().pro_templates_lg,[V,H]=(0,r.useState)(null);if(V)return(0,i.jsx)(T.z,{teamId:V.teamId,teamName:V.name,templateInsertionLocation:e.templateInsertionLocation,isInsertingTemplate:e.isInsertingTemplate,onInsert:e.insertTemplate,onBackClick:()=>H(null)});let z=U?O:d,G=U?D:m,K=U?B:S,W=U?L:f;return(0,i.jsxs)("div",{className:g.s.wFull.$,children:[(0,i.jsxs)(x.Y,{horizontalAlignItems:"space-between",height:j.k,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default",children:[(0,i.jsx)("div",{className:g.s.font13.fontMedium.$,children:(0,c.tx)("browse_templates_modal.published_by_current_org_name",{orgName:n.name})}),(0,i.jsx)(M,{filterOptions:U?I:s,selectedIds:U?A:o,isMyTeamsOnly:U?N:l,onFilterChange:e=>{"function"==typeof t.current?.scroll&&t.current.scroll({top:0,behavior:"smooth"}),z(e)},userTeamOrWorkspaceIds:new Set(U?F:E),showWorkspaces:a})]}),0===W.length?U?B:K?(0,i.jsx)(k.Kt,{}):(0,i.jsx)(w.Ht,{}):(0,i.jsxs)("section",{className:g.s.overflowYScroll.$,ref:t,style:{height:`calc(100% - ${j.k}px)`},children:[W.map(({teamId:t,teamName:n,workspaceName:r,templates:s,totalTemplatesByTeam:o})=>{let l=(0,i.jsx)(k.iq,{children:s.map(t=>(0,i.jsx)(k.AF,{templateInsertionLocation:e.templateInsertionLocation,template:t,onInsert:()=>e.insertTemplate(t),isInsertingTemplate:e.isInsertingTemplate((0,y.gp)(t))},(0,y.gp)(t)))});return U?(0,i.jsx)(P,{teamName:n??"",workspaceName:a?r??"":null,teamId:t,onSeeAllClick:o>6?()=>{H({teamId:t,name:n??""})}:void 0,children:l},t):(0,i.jsx)(R,{teamName:n??"",workspaceName:a?r??"":null,teamId:t,onRequestLoadMoreForTeam:p,children:l},t)}),(0,i.jsx)(h.a,{"data-testid":"load-more-teams",className:g.s.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&G()}})]})]})}},496572:(e,t,n)=>{n.d(t,{z:()=>x});var i=n(239976),r=n(378721),a=n(64939),s=n(379141),o=n(29161),l=n(777457),d=n(154963),c=n(227517),u=n(677451),m=n(920675),p=n(938241),h=n(754633),f=n(684291),g=n(664608);function x({teamId:e,teamName:t,templateInsertionLocation:n,onInsert:x,isInsertingTemplate:_,onBackClick:y}){let{requestLoadMoreForTeam:b,templatesByTeam:v}=(0,u.li)({teamId:e,editorType:m._Y.WHITEBOARD});return v?(0,i.jsxs)("div",{className:d.s.wFull.$,children:[(0,i.jsxs)(c.Y,{horizontalAlignItems:"start",height:g.k,strokeWidth:{bottom:1},strokeColor:"default",padding:{left:24,right:24},children:[y&&(0,i.jsx)(r.K,{"aria-label":(0,s.t)("general.back"),actionOnPointerDown:o.Ay.isIpad,onClick:y,children:(0,i.jsx)(a.C,{})}),(0,i.jsx)("div",{className:d.s.font13.fontMedium.$,children:(0,s.tx)("browse_templates_modal.published_by_current_org_name",{orgName:t})})]}),(0,i.jsxs)("section",{className:d.s.overflowYScroll.$,style:{height:`calc(100% - ${g.k}px)`},children:[(0,i.jsx)("div",{className:d.s.px24.my20.$,children:(0,i.jsx)(f.iq,{children:v.templates.map(e=>(0,i.jsx)(f.AF,{templateInsertionLocation:n,template:{template:e,type:p.n.TeamTemplateLg},onInsert:()=>x({template:e,type:p.n.TeamTemplateLg}),isInsertingTemplate:_(e.fileKey)},e.fileKey))})}),(0,i.jsx)(l.a,{className:d.s.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&b()}})]})]}):(0,i.jsx)(h.Ht,{})}},387870:(e,t,n)=>{n.d(t,{hx:()=>b,jq:()=>v,bg:()=>y});var i=n(105652),r=n(20002),a=n(60021),s=n(379141),o=n(393463);n(184743);var l=n(409084),d=n(416923),c=n(987732),u=n(450207);n(166734);var m=n(526575),p=n(874554),h=n(223487),f=n(105641);n(920675);var g=n(908756),x=n(996399);n(938241);var _=n(591600);function y(e){let{templatesShelfType:t,source:n,isCmtyShelvesV2Enabled:u=!1}=e,p=(0,r.wA)(),[y]=i.useState(()=>new x.Ef([],{keys:["name"]})),b=t||_.cS.FIGJAM_TEMPLATES_PICKER,v=d.sz.loadingKeyForPayload({shelfType:b}),C=(0,g.oh)(v),E=(0,g.mC)(v),w=(0,r.d4)(e=>e.hubFiles),k=(0,r.d4)(e=>e.communityHub.shelves[b]),T=(0,h.tS)(),j=o.Ay().user_data?.id,[S,I]=i.useState(""),[A,N]=i.useState([]),M=i.useMemo(()=>(k||[]).reduce((e,t)=>({...e,[t.id]:t.shelf_content.map(e=>e.id)}),{}),[k]),R=i.useMemo(()=>(k||[]).reduce((e,t)=>({...e,[t.id]:(0,l.Yd)(t.i18n_meta.title,t.title)}),{}),[k]),P=i.useMemo(()=>(k||[]).map(({id:e})=>e),[k]),O=i.useCallback(e=>{let t=w[e],i=(0,f.a6)(t);p(c.rL({hubFileId:e,hubFileName:i.name||"this file",openInNewTab:!0,source:n}))},[p,w,n]);return i.useEffect(()=>{C||E||(u?p(d.sr({shelfType:b})):p(d.sz({shelfType:b})))},[p,E,C,b,u]),i.useEffect(()=>{let e=Object.keys(M).reduce((e,t)=>[...e,...M[t]],[]).map(e=>(0,f.a6)(w[e]));y.set(e)},[M,w,y]),i.useEffect(()=>{let e;S?(e=[...new Set(e=y.search(S).map(e=>e.hub_file_id))],(0,m.Cu)({userId:j,fileKey:T,entry_point:"templates_modal",scope:"Templates Modal",files:0,private_plugins:0,private_widgets:0,public_plugins:0,public_widgets:0,projects:0,teams:0,users:0},"search_query_result")):e=[],N(e)},[S,j,T,y]),{templates:M,categoryTitles:R,hubFiles:w,isLoading:C,duplicateFile:O,fileKey:T,userId:j,setSearchQuery:i.useCallback((0,a.s)(I,300),[]),searchQuery:S,searchTemplatesResult:A,categoryIds:P,subcategories:i.useMemo(()=>{if(!k)return[];let e={activity:(0,s.t)("browse_templates_modal.subcategory.activity"),role:(0,s.t)("browse_templates_modal.subcategory.role")},t=[];return k.forEach(n=>{if(!n.shelf_meta.category)return;let i=n.shelf_meta.category,r=t.find(e=>e.id===i);r?r.categoryIds.push(n.id):t.push({id:i,title:e[i]||i,categoryIds:[n.id]})}),t},[k])}}n(499205);let b="templates_context_menu";function v(e){let t=(0,r.wA)(),{primaryKey:n}=(0,p.fG)()(e);return i.useCallback(e=>{e.preventDefault();let i={templatePrimaryKey:n,position:{top:e.clientY,left:e.clientX}};t(u.j7({type:b,data:i}))},[t,n])}},664608:(e,t,n)=>{n.d(t,{k:()=>i});let i=56},342377:(e,t,n)=>{n.d(t,{H:()=>h,_:()=>f});var i=n(239976),r=n(836848),a=n(146361),s=n(854225),o=n(466082),l=n(224542),d=n.n(l),c=n(763561),u=n(613675),m=n(599490),p=n(841052);function h({children:e,initialViewerSize:t,isDeviceFrameShown:n,shouldHide:r}){let a;return n&&(a=o.UN().getCurrentPage()?.prototypeDevice),(0,i.jsx)(f,{initialViewerSize:t,isDeviceFrameShown:n,prototypeDevice:a,isInlinePreview:!0,shouldHide:r,children:e})}function f({children:e,initialViewerSize:t,isDeviceFrameShown:n,prototypeDevice:o,isInlinePreview:l,onDeviceFrameLoaded:h,shouldHide:f}){let g="data:,",x="",_={},y=!1,b=1,v=!1;if(n){(0,r.B1)(o,"prototypeDevice should be set when device frame is shown");let{presetIdentifier:e,rotation:n}=o,i=c.hY[e];if(l){let e=i?.inlinePreviewInfo;(0,r.B1)(e,"inlinePreviewDeviceData should exist since device is supported for inline preview")}g=i.url,y=(0,a.devicePresetHasOverlyRoundedCorners)(e),v=n===s.xOL.CCW_90;let d=i.getI18nDeviceName(),m=i.getI18nStyleName();x=`${d} (${m})`;let{idealDeviceSize:p,framePresetSize:h,offset:f}=(0,u.is)(e,n),C=(0,u.Ho)(t,h,p);b=C.x/C.y;let E=(0,u.Ho)(t,h,f),w={x:t.x/C.x*100,y:t.y/C.y*100},k={x:E.x/C.x*100,y:E.y/C.y*100};_={position:"absolute",width:`${w.x}%`,height:`${w.y}%`,left:`${k.x}%`,top:`${k.y}%`}}let C=n?p.qW:m.Wc,E=d()({[m.Wc]:!0,[p.Cb]:n,[p.Q$]:y});return(0,i.jsxs)("div",{className:d()(C,{[m.R]:f}),children:[n&&(v?(()=>{let e=1/b;return(0,i.jsx)("div",{style:{aspectRatio:b},children:(0,i.jsx)("img",{src:g,className:d()(p.Q0,p.mT,p.M4),style:{width:`${100*e}%`},alt:x,"data-testid":"inline-preview-device-image",onLoad:h})})})():(0,i.jsx)("img",{src:g,className:p.M4,alt:x,"data-testid":"inline-preview-device-image",onLoad:h})),(0,i.jsx)("div",{style:_,className:E,children:e})]})}},832269:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(105652),r=n(207474),a=n(692376),s=n(798913),o=n(2227),l=n(370487),d=n(522568),c=n(772293);function u({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:n,trackingOptions:u,shouldUseEyedropperStyleCreationFlow:m}){let[p,h]=i.useState(null),f=i.useRef(!1),g=s.nc.user("create-style",()=>{if(f.current=!0,a.Pt4&&p){let{key:e,version:t}=p,n=a.Pt4.getSoftDeletedStyleNodeId(e,t);return c.Y5.restoreSoftDeletedNode(n),(0,d.sx)("Style Created",{styleType:u.styleType,styleKey:p.key,styleVersion:p.version}),n}});return i.useEffect(()=>{let i=s.l7.system("create-soft-deleted-style",()=>(function({initialStyleCreationPaint:e,isCreatingFromSelection:t,inheritStyleKeyField:n,shouldUseEyedropperStyleCreationFlow:i}){if(i)return a.OmW?.createSoftDeletedStyleForEyedropper()??null;if(!e)return a.glU?.createSoftDeletedStyle(n,"","",t)??null;{let t=(0,l.GP)(e);return a.Osy?.createSoftDeletedStyleFromPaintData(t,"")??null}})({initialStyleCreationPaint:t,inheritStyleKeyField:e,isCreatingFromSelection:n,shouldUseEyedropperStyleCreationFlow:m}));if(!i){h(null);return}return h(i),()=>{a.glU?.selectStyle(r.n3.INVALID,r.IA.INVALID),s.l7.system("style-creation-cleanup",()=>{if(a.Pt4&&a.glU&&i&&!f.current){let t=a.Pt4.getSoftDeletedStyleNodeId(i.key,i.version);a.glU.applyStyleToSelection(e,o.AD,!0),a.glU.hardDeleteSoftDeletedNode(t)}})}},[t,e,n,m]),{styleRef:p,createStyle:g}}},595969:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(239976),r=n(93604);let a=(0,n(105652).memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M13 7v1.879l1-1V7a2 2 0 1 0-4 0v4.879l1-1V7a1 1 0 1 1 2 0m.996 5.125-1.87 1.871a2 2 0 0 0 1.87-1.87M8.5 12c0 .413.071.809.203 1.176l-.764.764A4.5 4.5 0 0 1 7.5 12v-.5a.5.5 0 0 1 1 0zm2.324 3.297-.764.764c.444.213.93.355 1.44.412V18h-2a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-2v-1.527a4.5 4.5 0 0 0 4-4.473v-.5a.5.5 0 0 0-1 0v.5a3.5 3.5 0 0 1-4.676 3.297m7.03-8.443a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708z",clipRule:"evenodd"})})});var s=n(909552),o=n(379141),l=n(410462);let d="voice_svg--voiceAudioBar--k3yKG",c="voice_svg--voiceAudioBarStroke--5ZTV8 voice_users--voiceAudioBarStroke--X-1Qx",u="voice_svg--mutedLine--fvnym",m={Unmuted:()=>(0,i.jsx)(r.C,{}),Muted:()=>(0,i.jsx)(a,{}),UnmutedBars:({volume:e,className:t,alwaysShowVoiceBars:n,userName:r})=>{if((e||0)<l.q){if(!0!==n)return null;e=0}let a=[7*(e=Math.pow(e||0,.5))*.4,7*e,7*e*.4].map(e=>.8*e+e*(.4*Math.random()-.2));return(0,i.jsxs)("svg",{width:"24",viewBox:"-5 -8 18 16",fill:"none",className:t,"aria-label":(0,o.t)("collaboration.voice.unmuted_user",{user_name:r}),children:[(0,i.jsx)("line",{className:c,x1:"1",y1:0,x2:"7",y2:0,strokeWidth:"5",color:"red",strokeLinecap:"round"}),(0,i.jsx)("line",{className:c,x1:"1",y1:-a[0],x2:"1",y2:a[0],strokeWidth:"4",strokeLinecap:"round"}),(0,i.jsx)("line",{className:d,x1:"1",y1:-a[0],x2:"1",y2:a[0],stroke:"#1BC47D",strokeWidth:"2",strokeLinecap:"round"}),(0,i.jsx)("line",{className:c,x1:"4",y1:-a[1],x2:"4",y2:a[1],strokeWidth:"4",strokeLinecap:"round"}),(0,i.jsx)("line",{className:d,x1:"4",y1:-a[1],x2:"4",y2:a[1],stroke:"#1BC47D",strokeWidth:"2",strokeLinecap:"round"}),(0,i.jsx)("line",{className:c,x1:"7",y1:-a[2],x2:"7",y2:a[2],strokeWidth:"4",strokeLinecap:"round"}),(0,i.jsx)("line",{className:d,x1:"7",y1:-a[2],x2:"7",y2:a[2],stroke:"#1BC47D",strokeWidth:"2",strokeLinecap:"round"})]})},HeadphonesIcon:({className:e})=>(0,i.jsx)(s.M,{className:e}),MutedMini:({userName:e})=>(0,i.jsxs)("svg",{width:"13",height:"16",viewBox:"0 0 13 16",fill:"none","aria-label":(0,o.t)("collaboration.voice.muted_user",{user_name:e}),children:[(0,i.jsx)("path",{className:"voice_svg--iconBorder--MvpXX",d:"M4 6V4.5C4 2.567 5.567 1 7.5 1H10C11.1046 1 12 1.89543 12 3V5C12.5523 5 13 5.44772 13 6V8.75736C13 9.55301 12.6839 10.3161 12.1213 10.8787L11 12V14C11 14.5523 10.5523 15 10 15H5C4.44772 15 4 14.5523 4 14V13L1.20711 10.2071C0.816583 9.81658 0.816582 9.18342 1.20711 8.79289L4 6Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.33306 3.25234C8.09478 3.09295 7.8083 3 7.5001 3C6.67168 3 6.0001 3.67157 6.0001 4.5V5.58529L6.40341 5.18198L8.33306 3.25234ZM5.47386 10.3542L6.1952 9.63284C6.57505 9.86573 7.0219 10 7.50011 10C8.88081 10 10.0001 8.88074 10.0001 7.50003V7H11.0001V7.50003C11.0001 9.26326 9.69624 10.722 8.0001 10.9646V12H9.0001V13H7.5001H6.0001V12H7.0001V10.9646C6.437 10.884 5.91714 10.6694 5.47386 10.3542ZM6.93722 8.89081L9.0001 6.82793V7.5C9.0001 8.32843 8.32853 9 7.5001 9C7.30104 9 7.11103 8.96122 6.93722 8.89081Z",fill:"#F24822",className:u}),(0,i.jsx)("path",{d:"M10.5009 2.49847L11.2081 3.20558L3.92834 10.4853L3.22123 9.77819L10.5009 2.49847Z",fill:"#F24822",className:u})]})}},701118:(e,t,n)=>{n.d(t,{Y:()=>u});var i=n(239976),r=n(105652),a=n(378721),s=n(379141),o=n(410462),l=n(297613),d=n(236410),c=n(595969);function u({userId:e,onMuteButtonClickCallback:t,disabled:n}){let u=o.h.getInstance(),[m,p]=(0,r.useState)(null),h=(0,l.TI)(e,u),f=(0,r.useCallback)(async()=>{!n&&void 0!==h&&u&&(await t(h,u),p(h?"unmute":"mute"))},[h,t,p,u,n]);r.useEffect(()=>{p(null)},[h]);let g=()=>n?(0,s.t)("collaboration.voice.check_your_microphone_permissions_to_start_chatting"):h?(0,s.t)("collaboration.voice.click_to_unmute"):(0,s.t)("collaboration.voice.click_to_mute");return(0,i.jsx)(a.K,{onClick:f,"data-tooltip-type":d.Ib.TEXT,"data-tooltip":g(),"data-tooltip-timeout-delay":n?50:void 0,"aria-label":g(),"data-fullscreen-intercept":!0,disabled:n,children:n||"unmute"!==m&&("mute"===m||h)?(0,i.jsx)(c.A.Muted,{}):(0,i.jsx)(c.A.Unmuted,{})})}},367458:(e,t,n)=>{n.d(t,{S:()=>l,i:()=>d});var i=n(239976),r=n(297613),a=n(579416),s=n(595969),o=n(976285),l=(e=>(e[e.NONE=0]="NONE",e[e.DEFAULT=2]="DEFAULT",e[e.MINI=1]="MINI",e))(l||{});function d({userId:e,userName:t,microphoneStyle:n,call:r,volumeIconMutedState:l,alwaysShowVoiceBars:d,className:u}){return n===a.bU.HEADPHONES?(0,i.jsx)(s.A.HeadphonesIcon,{size:24,className:o.AL}):n!==a.bU.NONE&&r?(0,i.jsx)(c,{userId:e,call:r,className:u,volumeIconMutedState:l||0,alwaysShowVoiceBars:d,userName:t}):(0,i.jsx)(i.Fragment,{})}function c({userId:e,call:t,volumeIconMutedState:n,alwaysShowVoiceBars:a,className:l,userName:d}){let c=(0,r.Wl)(e,t);if(!c)return null;if(c.isMuted){if(2===n)return(0,i.jsx)(s.A.Muted,{});if(1===n){let e=o.Nn;return l&&(e+=" "+l),(0,i.jsx)("span",{className:e,children:(0,i.jsx)(s.A.MutedMini,{userName:d})})}return null}return(0,i.jsx)(s.A.UnmutedBars,{alwaysShowVoiceBars:a,className:l,volume:c?.volumeLevel,userName:d})}},509566:(e,t,n)=>{n.d(t,{K:()=>u});var i=n(239976),r=n(20002),a=n(942356),s=n(943360),o=n(595609),l=n(526575),d=n(223487),c=n(410462);function u(e){let t=(0,r.wA)(),n=(0,r.Pj)(),u=(0,r.d4)(e=>e.voice.showWidget),m=(0,d.q5)(),p=(0,r.d4)(t=>!!t.voice.activeCall[e.fileKey]),h=!!m&&!!p,f={onClick:async()=>{e.hidePopover&&e.hidePopover(),u&&h?u&&t(o.jT()):((0,l.ds)("Context Viewed",e.fileKey,n.getState(),{name:"should-close-open-audio-nux"}),await c.h.createInstance(),h&&(0,l.ds)("voice_widget_minimized_toggle",e.fileKey,n.getState(),{minimized:!1}),t(o.Pp(!0)))},"data-tooltip-show-below":!0,"data-dropdown-tooltip":e["data-tooltip"],"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],"aria-label":e["data-tooltip"],"data-fullscreen-intercept":!0};if(e.isJoinWidget){let{onClick:t,"aria-label":n,...r}=f;return(0,i.jsx)("div",{"data-onboarding-key":e["data-onboarding-key"],children:(0,i.jsx)(a.$n,{onClick:t,"aria-label":n,variant:"signup",htmlAttributes:{...r},children:e.children})})}return(0,i.jsx)(s.E,{...f,className:e.className,children:e.children})}},453658:(e,t,n)=>{n.d(t,{m:()=>a,y:()=>s});var i=n(597551),r=n(625788);function a(e,t){let n={};return n.useValue=function(a){if(t&&n[a]&&t(a,n[a])&&delete n[a],!n[a]){let t=(0,i.v)();e(a).then(e=>t.resolve(e)).catch(e=>t.reject(e)),n[a]={deferred:t,created:Date.now()}}let{deferred:s}=n[a];switch(s.status){case"pending":throw(0,r.WE)(s.promise),Error("unreachable");case"rejected":throw s.error;case"resolved":return s.result}},n}function s(e){return(t,n)=>Date.now()-n.created>e}},882082:(e,t,n)=>{n.d(t,{A:()=>i});class i{get current(){return{url:"/_sandbox"}}addPopStateListener(){}addRefreshListener(){}push(){}forward(){}back(){}refresh(){}}},492567:(e,t,n)=>{n.d(t,{Cc:()=>a,_9:()=>s});var i=n(105652),r=n(692376);function a(){return null}function s(){return i.useMemo(()=>({label:"Smart Animate",tab:r.FAf.METRONOME,analyticsName:"smart-animate"}),[])}(0,n(445019).eU)(!1)},730476:(e,t,n)=>{n.d(t,{o:()=>i});let i=(0,n(322519).bt)(e=>e.mirror.appModel.isReadOnly)},682641:(e,t,n)=>{n.d(t,{J:()=>c,p:()=>d});var i=n(105652),r=n(692376),a=n(445019),s=n(77349),o=n(354269),l=n(157750);function d(){let e=(0,a.Xr)(s.E);return(0,i.useCallback)(t=>{r.Ez5&&r.Egt&&(e(""),r.Ez5.singleSlideView().isFocusedNodeViewEnabled()?r.Ez5.singleSlideView().focusNodeInFocusedNodeView(t,!0):r.Ez5.singleSlideView().panToNode(t,.6),r.Egt.replaceSelection([t],!0))},[e])}function c(){let e=(0,a.Xr)(s.E),t=(0,l.ut)(r.Ez5?.cooperFocusView().focusedNodeId,""),n=(0,o.kG)();return(0,i.useCallback)(i=>{if(r.Ez5&&r.Egt){if(e(""),n){if(t===i){r.Egt.replaceSelection([i],!0);return}r.Ez5.cooperFocusView().focusNodeInFocusedNodeView(i,!0),r.Egt.replaceSelection([i],!0)}else r.Ez5.cooperFocusView().panToNode(i,.6);r.Egt.replaceSelection([i],!0)}},[e,t,n])}},463916:(e,t,n)=>{n.d(t,{e:()=>d,v:()=>c});var i=n(239976),r=n(105652);n(323264);var a=n(421914),s=n(162251),o=n(596611);let l={type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1,blendMode:"NORMAL"};function d(e){let[t]=(0,s.lJ)("dividedSwatchColors");return(0,r.useMemo)(()=>(0,a.hS)(e)&&e&&e.color?[e.color]:Array.isArray(t)&&t.length>1?t:[{r:1,g:1,b:1,a:1}],[t,e])}function c({colors:e,paint:t,showTransparentBorder:n=!1,forceNonInteractive:r=!1}){if(!(e.length>1))return(0,i.jsx)(o.J,{...{0:{className:"x6jxa94 x1v9usgg x1cum3z5"},1:{className:"x6jxa94 x1v9usgg x1cum3z5 xmkeg23 x1y0btm7 xgejvvm"}}[!!n<<0],hideBorderShadow:n,paint:t??l,allowMouseDownPropagation:!0,forceNonInteractive:r});{let t=e[0],n=e.find(e=>e.r!==t.r||e.g!==t.g||e.b!==t.b)??t;return(0,i.jsxs)("div",{className:"x1n2onr6 x1kky2od xlup9mm",tabIndex:r?-1:void 0,children:[(0,i.jsx)("span",{className:"x10l6tqk x1kky2od xlup9mm xu96u03 x13vifvy x1f869rl",children:(0,i.jsx)(o.J,{className:"x6jxa94 x1v9usgg x1cum3z5",paint:{type:"SOLID",color:t,opacity:1,blendMode:"NORMAL"},allowMouseDownPropagation:!0,forceNonInteractive:r})}),(0,i.jsx)("span",{className:"x10l6tqk x1kky2od xlup9mm xu96u03 x13vifvy x103kmln",children:(0,i.jsx)(o.J,{className:"x6jxa94 x1v9usgg x1cum3z5",paint:{type:"SOLID",color:n,opacity:1,blendMode:"NORMAL"},allowMouseDownPropagation:!0,forceNonInteractive:r})})]})}}},401254:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(445019);let r=(0,n(640753).Wh)(()=>(0,i.eU)(null))},106333:(e,t,n)=>{n.d(t,{o:()=>i});let i=(0,n(840864).H)({codeSnapshotKey:null,files:{},isLoading:!1,error:!1,lastAttemptedKey:null})},925546:(e,t,n)=>{n.d(t,{VC:()=>a,Xt:()=>s,kV:()=>o});var i=n(105652),r=n(445019);let a=(0,n(840864).q)(),s=e=>(0,r.md)(a(e||"")),o=e=>{let t=(0,r.Xr)(a(e||""));return(0,i.useCallback)(()=>{t(void 0)},[t])}},934985:(e,t,n)=>{n.d(t,{E:()=>S,q:()=>I});var i=n(105652),r=n(895807),a=n(607696),s=n(146119),o=n(846779),l=n(295870),d=n(854225),c=n(798913),u=n(466082),m=n(270450),p=n(445019),h=n(955394),f=n(129416),g=n(772293),x=n(223487),_=n(840864),y=n(200498),b=n(106333),v=n(594242),C=n(211464),E=n(417643),w=n(563467),k=n(379196),T=n(696002);let j=(0,_.H)({files:{}});function S(e,t,n,r){let l=e?.guid||"",c=(0,x.q5)(),u=c?.key||null,[f,g]=(0,p.fp)((0,b.o)(l)),[_,y]=(0,p.fp)(j(l)),E=t.chatSdkState?.threadId??null,S=i.useRef(null),I=(0,T.cf)(),A=n===a.lV.FIGMAKE,N=A?I:e,M=(0,k.IO)(N),R=t.getMessages(),P=function(e,t){let[n,{flush:r}]=(0,h.A)(e,500),a=Object.keys(e).length,s=Object.keys(n).length,o=i.useRef(t);return i.useEffect(()=>{a!==s&&r()},[a,s,r]),i.useEffect(()=>{!0===o.current&&!1===t&&r(),o.current=t},[t,r]),n}(_.files,r?.isExchangeActive);i.useEffect(()=>{if(!u){g({codeSnapshotKey:null,files:{},isLoading:!1,error:!0,lastAttemptedKey:null}),S.current=null;return}let e=function(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n.type===d.K$p.ASSISTANT_MESSAGE)return(0,a.lr)(n,!!(0,m.kc)().make_chat_contents_cache).codeSnapshot;if(n.type===d.K$p.SYSTEM_MESSAGE){let e=(0,a.U1)(n,!!(0,m.kc)().make_chat_contents_cache);if(e?.type==="manual_edit"||e?.type==="restore")return e.codeSnapshot}}}(R),i=p.zl.get((0,b.o)(l));if(!e){i.codeSnapshotKey&&(g({codeSnapshotKey:null,files:{},isLoading:!1,error:!0,lastAttemptedKey:null}),S.current=null);return}let{codeSnapshotKey:r,blobstoreContentKey:s}=e;r&&S.current!==r&&(i.codeSnapshotKey!==r||i.error)&&(!i.error||i.lastAttemptedKey!==r)&&(async()=>{S.current=r,g({codeSnapshotKey:r,files:{},isLoading:!0,error:!1,lastAttemptedKey:r});try{let{files:e}=await (0,v.lm)({fileKey:u,codeSnapshotKey:r,blobstoreArgs:{threadId:E,blobstoreContentKey:s},featureType:n,chatSdkPhase1Enabled:t.chatSdkPhase1Enabled});S.current===r&&(g({codeSnapshotKey:r,files:e,isLoading:!1,error:!1,lastAttemptedKey:r}),S.current=null)}catch(e){console.warn("Failed to fetch snapshot files:",e),S.current===r&&(g({codeSnapshotKey:null,files:{},isLoading:!1,error:!0,lastAttemptedKey:r}),S.current=null)}})()},[R,u,g,l,E,n,t.chatSdkPhase1Enabled]),i.useEffect(()=>{if(!e){y({files:{}});return}let t=(0,C.z)("multi_file_code_layers"),i={multi_file_code_layers:t,bake_canvas:(0,C.z)("bake_canvas")},r=(0,s.Pq)(n,e,i),a=A?(0,o.qx)():(t||(0,C.z)("bake_canvas"))&&e.codeFilePath?(0,o.qx)(r):(0,o.qx)(),l={};a.forEach(e=>{let t=e.codeFileFullPathWithoutScheme;r&&(t=t.replace(r+"/","")),l[t]=e.sourceCode||""}),y({files:l})},[e,A,M,y,n]);let[O,D]=i.useState([]),[L,F]=i.useState(!1),[B,U]=i.useState(!1),[V,H]=i.useState(!1);return i.useEffect(()=>{f.isLoading?(H(!0),F(null!==f.codeSnapshotKey),U(!1)):f.error||!f.codeSnapshotKey?(U(f.error),H(!1),D([])):async function(){try{let e=await (0,w.ft)(f.files,P,r?.shouldIncludeFile);D(e),F(!0),H(!1),U(!1)}catch(e){U(!0),H(!1)}}()},[P,f.codeSnapshotKey,f.error,f.files,f.isLoading,r?.shouldIncludeFile]),{changedFiles:O,isLoading:V,error:B,hasBaseline:L}}function I({chatMessagesNodeGuid:e,featureType:t}){let[n]=(0,p.fp)((0,b.o)(e)),d=(0,x.tS)(),m=e=>{let t=E.O.get(e.guid);t&&(t.hasSystemEdited=!0)};return{restoreFile:(0,i.useCallback)(i=>{if(e&&n.codeSnapshotKey&&n.files[i]&&d)return()=>{let d=(0,u.UN)().get(e);if(!d)return;let h=n.files[i];if(!h){console.error("No baseline content found for file:",i);return}let x=(0,C.z)("multi_file_code_layers");c.l7.user("restore-individual-file",()=>{let e={multi_file_code_layers:x,bake_canvas:(0,C.z)("bake_canvas")},n=(0,s.Pq)(t,d,e),c=t===a.lV.FIGMAKE?(0,o.$d)():(x||(0,C.z)("bake_canvas"))&&d.codeFilePath?(0,o.$d)(n):(0,o.$d)(),u=(0,r.m0)(n,i),{codeFile:_}=(0,s.Ur)(c,n,u,h,void 0,{trackSystemEditedSession:m,reportErrorToSentry:e=>{(0,f.$D)(l.e.MAKE,e)}});_&&(_.sourceCode=h,p.zl.set((0,y.Nm)(d.guid),"user")),g.Y5.commit()})}},[n.files,n.codeSnapshotKey,e,t,d])}}},938832:(e,t,n)=>{n.d(t,{En:()=>d,Ic:()=>c,Pe:()=>u,gC:()=>l});var i=n(105652),r=n(445019),a=n(640753);let s=(0,a.Wh)(()=>(0,r.eU)([])),o=(0,a.Wh)(()=>(0,r.eU)(new Map));function l(){let e=r.zl.get(o);r.zl.set(s,Array.from(e.values()))}function d(){r.zl.set(o,new Map)}function c(){r.zl.set(s,[])}function u(){let[e,t]=(0,r.fp)(o),[n,a]=(0,r.fp)(s),l=i.useCallback(()=>{a([])},[a]);return{communityAttribution:e,addCommunityAttribution:i.useCallback((e,n)=>{t(t=>{let i=new Map(t);return i.set(e,n),i})},[t]),communityAttributionDisplay:n,clearCommunityAttributionDisplay:l}}},820198:(e,t,n)=>{n.d(t,{GM:()=>u,Qk:()=>m,R1:()=>h,RB:()=>g,fk:()=>c});var i=n(105652),r=n(363638),a=n(607696),s=n(446724),o=n(836848),l=n(405228);let d=0;function c(){return`todo-${d++}`}function u(){return!r.v.getFeatureGate("make_todo_list_ui")}function m(e){return e.map(e=>({content:e,status:"todo"}))}function p(e){return e.map(e=>({id:c(),status:"todo",content:e}))}function h({todoStatusMap:e,addTodosResult:t,toolCallId:n,editedTodosState:r,initialTodos:a}){let s=function({todoStatusMap:e,addTodosResult:t,editedTodos:n}){return(0,i.useMemo)(()=>e?Array.from(e.entries()).map(([e,t])=>({id:e,content:t.content,status:t.status})):t?.success===!0?t.todos.map(e=>({...e,id:c()})):n,[e,t,n])}({todoStatusMap:e,addTodosResult:t,editedTodos:(0,i.useMemo)(()=>r?.toolCallId===n?r.todos.map(e=>({id:c(),status:"todo",content:e})):void 0,[r,n])}),[l,d]=i.useState(s??p(a)),u=i.useRef(a);return i.useEffect(()=>{s&&d(s)},[s]),i.useEffect(()=>{let n=u.current;(a.length!==n.length||a.some((e,t)=>e!==n[t]))&&!e&&void 0===t&&(d(p(a)),u.current=a)},[a,e,t]),{todos:l,setTodos:i.useCallback(n=>{e||void 0!==t?(0,o.KF)(!1,"Trying to edit todos when todosStatusMap or addTodosResult is defined"):d(n)},[e,t])}}function f(e){e.todoMetadata||(e.todoMetadata={todoStatusMap:new Map,orphanedExchangeTodos:[]})}function g(e,t){if(r.v.getFeatureGate("make_todo_list_ui")&&("todo_list_tool"===e.toolName||"add_todos_tool"===e.toolName)){let n=(0,a.Xy)(e);n&&function(e,t){if("add_todos_tool"===e.toolName){let n=l.Ip.safeParseJsonOrObject(s.vn,e.result);if(n?.success&&n.todos){f(t);let i=new Map;n.todos.forEach(e=>{i.set(e.content,e)}),t.todoMetadata.todoStatusMap.set(e.toolCallId,i),t.todoMetadata.currentTodoId=e.toolCallId}}else if("todo_list_tool"===e.toolName){let n=l.Ip.safeParseJsonOrObject(s.vR,e.result);if(n?.success&&n.updatedTodo){f(t);let e=n.updatedTodo,i=t.todoMetadata;if(i.currentTodoId){let t=i.todoStatusMap.get(i.currentTodoId);if(t){let n=t.get(e.content);n&&(n.status=e.status)}}else t.todoMetadata.orphanedExchangeTodos.push(e)}}}(n,t)}}},515066:(e,t,n)=>{n.d(t,{IO:()=>d,Zi:()=>o,xD:()=>l});var i=n(607696),r=n(692376),a=n(854225),s=n(528856);function o(e,t,n){let o=(0,i.ic)(a.K$p.SYSTEM_MESSAGE,e.id,()=>((0,s.assert)(void 0!==r.glU,"Fullscreen must be defined"),r.glU.generateUniqueID()));return o.textContent=(0,i.J6)({type:"restore",codeSnapshot:t,plainText:"",title:n}),o}function l(e,t,n,o){let l=(0,i.ic)(a.K$p.SYSTEM_MESSAGE,e.id,()=>((0,s.assert)(void 0!==r.glU,"Fullscreen must be defined"),r.glU.generateUniqueID()));return l.textContent=(0,i.J6)({type:"manual_edit",changedFiles:t,codeSnapshot:n,plainText:"",title:o}),l}function d(e,t){let n=(0,i.ic)(a.K$p.SYSTEM_MESSAGE,e.id,()=>((0,s.assert)(void 0!==r.glU,"Fullscreen must be defined"),r.glU.generateUniqueID()));return n.textContent=(0,i.J6)({type:"duplicated_file",fileKeyHash:t,plainText:""}),n}},594242:(e,t,n)=>{n.d(t,{Oy:()=>h,lm:()=>f,IW:()=>g,Lt:()=>x});var i=n(607696),r=n(989127),a=n(411074),s=n(606042),o=n(405228),l=n(766274);let d=o.z.object({files:o.z.record(o.z.string(),o.z.string()),entrypoint:o.z.string().optional()}),c=new class{constructor(){this.CreateCodeSnapshotValidator=(0,l.vh)(),this.GetCodeSnapshotValidator=(0,l.vh)()}createCodeSnapshot(e){return this.CreateCodeSnapshotValidator.validate(async({xr:t})=>(d.parse(e.codeFiles),await t.put(`/api/code/${e.fileKey}/snapshot`,{code_files:e.codeFiles})))}getCodeSnapshot(e){return this.GetCodeSnapshotValidator.validate(async({xr:t})=>await t.get(`/api/code/${e.fileKey}/snapshot/${e.codeSnapshotKey}`))}},u=o.z.record(o.z.string(),o.z.string()),m=new class{constructor(){this.CreateCodeSnapshotValidator=(0,l.vh)(),this.GetCodeSnapshotValidator=(0,l.vh)()}createCodeSnapshot(e){return this.CreateCodeSnapshotValidator.validate(async({xr:t})=>(u.parse(e.codeFiles),await t.post(`/api/rev/${e.fileKey}/code_snapshot`,{code_files:e.codeFiles,entrypoint:e.entrypoint})))}getCodeSnapshot(e){return this.GetCodeSnapshotValidator.validate(async({xr:t})=>await t.get(`/api/rev/${e.fileKey}/code_snapshot/${e.codeSnapshotKey}`))}},p=new r.f;async function h({fileKey:e,codeFiles:t,featureType:n}){if(n===i.lV.FIGMAKE_IN_DESIGN){let{code_snapshot_key:n}=(await c.createCodeSnapshot({fileKey:e,codeFiles:t})).data.meta;return{codeSnapshotKey:n}}let{code_snapshot_key:r}=(await m.createCodeSnapshot({fileKey:e,codeFiles:t.files,entrypoint:t.entrypoint})).data.meta;return{codeSnapshotKey:r}}async function f(e){let{fileKey:t,codeSnapshotKey:n,blobstoreArgs:r,featureType:o,chatSdkPhase1Enabled:l}=e,{threadId:d,blobstoreContentKey:h}=r,f=JSON.stringify(e);return await p.run(f,async()=>{if(l&&h){if(!d)throw Error("No thread ID, cannot fetch code snapshot from blobstore");let e=await s.M.fetchBlob(t,d,h);try{let t=JSON.parse(await e.text()),n=u.parse(t);return(0,a.nH)(`Fetched code snapshot from blobstore: ${h}`),{files:n}}catch(e){throw Error(`Invalid code snapshot files for fetch: ${e instanceof Error?e.message:String(e)}`)}}return o===i.lV.FIGMAKE_IN_DESIGN?(await c.getCodeSnapshot({fileKey:t,codeSnapshotKey:n})).data.meta.code_files:{files:(await m.getCodeSnapshot({fileKey:t,codeSnapshotKey:n})).data.meta.code_files}})}function g(e){let t=e[e.length-1];return t?.type==="summary"||t?.type==="visible_message"?t.codeSnapshot:void 0}function x(e){return"system"===e.type&&"codeSnapshotKey"in e?{codeSnapshotKey:e.codeSnapshotKey,blobstoreContentKey:e.blobstoreContentKey,fileVersionId:e.fileVersionId}:"assistant"===e.type?g(e.messages):void 0}},445602:(e,t,n)=>{n.d(t,{L:()=>l});var i=n(363638),r=n(713503),a=n(445019),s=n(771160),o=n(272453);function l(){let e=(0,s.lg)(),t=(0,a.md)(o.CJ),n=(0,a.md)(o.$1);if(e){if(i.v.getFeatureGate("internal_make_model_id_override")&&n)return n;switch(t){case o.pB.EXPERIMENTAL:case o.pB.GOOGLE_GEMINI_3_PRO:return r.tF;case o.pB.GOOGLE_GEMINI_3_FLASH:return r.iP;case o.pB.DEFAULT:default:return}}}},66892:(e,t,n)=>{n.d(t,{u:()=>r});var i=n(846779);function r(e,t,n){let r={rawUserMessage:e,attachments:[]};if(t.length>0&&t.forEach(e=>{r.attachments.push({type:e.type,nodeGuid:e.guid,label:"",imageSize:e.image?.length})}),n){let e=(0,i._J)(n[0].fullFilePath);r.attachments.push({type:"inspectedElement",nodeGuid:e?.guid||"",label:"",inspectedElementSources:n})}return r}},351572:(e,t,n)=>{n.d(t,{v:()=>eT});var i=n(895807),r=n(25378),a=n(291061),s=n(607696),o=n(146119),l=n(846779),d=n(988083),c=n(446724);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m{configure(e){this.callbacks=e.callbacks,this.deltaReducer=e.deltaReducer}async cancel(e="cancelled"){await this.callbacks?.onCancel?.(e),this.abortController.abort()}async abortIfClientCancelled(){this.callbacks?.shouldCancel?.()&&await this.cancel()}async consume(e){let t,n,i;try{n=e.getReader();let r=async e=>{try{null==t&&(t=performance.now(),this.callbacks?.onFirstDelta?.());let n=this.deltaReducer?.(e);n&&void 0!==n&&await this.callbacks?.onDeltaApplied?.(e,n)}catch(e){throw console.warn("[DeltaStreamController] Error in handleDelta:",e),e}};try{for(;;){let e=await Promise.race([n.read(),this.cancelPromise]);if(this.abortController.signal.aborted||this.callbacks?.shouldCancel?.()){i=this.callbacks?.getCancelReason?.(),await n.cancel(),await this.callbacks?.onCancel?.(i??"aborted");return}let{done:t,value:a}=e;if(a&&await r(a),t)break}}catch(e){throw console.error("[DeltaStreamController] Error in consume:",e),e}}catch(e){console.error("[DeltaStreamController] Error in consume method:",e),this.callbacks?.onError?.(e,{}),n&&await n.cancel()}finally{this.callbacks?.onDone?.()}}constructor(){u(this,"abortController",void 0),u(this,"cancelPromise",void 0),u(this,"deltaReducer",void 0),u(this,"callbacks",void 0),this.abortController=new AbortController,this.cancelPromise=new Promise(e=>{this.abortController.signal.addEventListener("abort",()=>{e()},{once:!0})})}}var p=n(692376),h=n(466082),f=n(798913),g=n(836848),x=n(603901),_=n(590730),y=n(946142),b=n(496059),v=n(134670),C=n(244487),E=n(295870),w=n(854225),k=n(379141),T=n(270450),j=n(445019),S=n(74372),I=n(528856),A=n(945040),N=n(274574),M=n(411074),R=n(393463),P=n(7995),O=n(129416),D=n(750665),L=n(680912),F=n(809012),B=n(772293),U=n(100464),V=n(304903),H=n(223487),z=n(394396),G=n(538349),K=n(910567),W=n(788995),q=n(881562),X=n(824851),Y=n(826722),J=n(682499),Z=n(183290),Q=n(401254),$=n(200498),ee=n(628266),et=n(726735),en=n(182299),ei=n(160849),er=n(973407),ea=n(925546),es=n(938832),eo=n(454766),el=n(417643),ed=n(718343),ec=n(857309),eu=n(51697),em=n(223976),ep=n(379196),eh=n(947700),ef=n(838213),eg=n(652870),ex=n(640753);let e_=(0,ex.Wh)(()=>(0,j.eU)("")),ey=(0,ex.Wh)(()=>(0,j.eU)(""));var eb=n(515066),ev=n(594242),eC=n(211464);async function eE({chatMessagesNode:e,user:t,userMessageContent:n,chatFeatureType:i,chatSdkPhase1Enabled:r}){if(r&&i===s.lV.FIGMAKE&&e&&t&&n){let i={id:"optimistic-user-message",type:w.K$p.USER_MESSAGE,userId:t.id,textContent:(0,s.J6)(n),toolCalls:[],toolResults:[],sentAt:Date.now(),sentAt64:Date.now().toString()},r=(0,Z.A5)(e.guid);r?(0,Z.YZ)({...r,messages:[...r.messages,i]}):(0,Z.YZ)({node:e.guid,messages:[i],fileUpdates:[],isTyping:!1}),await new Promise(e=>setTimeout(e,0))}}var ew=n(740414);class ek{constructor(e){this.chatMessagesNode=e.chatMessagesNode,this.fileKey=e.fileKey,this.userMessageContent=e.userMessageContent,this.preventInputRestoreOnAbort=e.preventInputRestoreOnAbort,this.setInput=e.setInput,this.instanceNode=e.instanceNode,this.onFinishCallback=e.onFinish,this.featureType=e.featureType,this.chatController=e.chatController,this.inProgressMakeIdentifier=e.inProgressMakeIdentifier,this.currentUserCanHandleResumableMake=e.currentUserCanHandleResumableMake,this.isResumableMake=!!e.inProgressMakeIdentifier,this.userFlow=e.userFlow,this.chatSdkWebBindings=e.chatSdkWebBindings,this.canUseMcpConnectors=e.canUseMcpConnectors,this.mcpConnectorsInstalledCount=e.mcpConnectorsInstalledCount,this.model=e.model,this.persistentEntityId=(0,W.qE)(e.fileKey||"",e.chatMessagesNode?.guid||""),(0,I.assert)(void 0!==p.glU,"Fullscreen must be defined"),this.userMessageId=e.autoFixingUserMessageId||p.glU.generateUniqueID(),this.userFlow.addContext({persistentEntityId:this.persistentEntityId,userMessageId:this.userMessageId}),this.streamController=new m,this.webCallbacks={onSetupComplete:this.webCallbackOnSetupComplete.bind(this),onSystemEditedSession:this.webCallbackOnSystemEditedSession.bind(this),onNodeBuilderError:this.webCallbackOnNodeBuilderError.bind(this),onStreamError:this.webCallbackOnStreamError.bind(this),onDelta:this.webCallbackOnDelta.bind(this),onDone:this.webCallbackOnDone.bind(this)},this.translationFns={getChatCommunityAttributionComment:this.translationFnGetChatCommunityAttributionComment.bind(this)},this.translatedStrings={figmakeChatUnsplashAttributionAttributionComment:(0,k.t)("figmake.chat.unsplash_attribution.attribution_comment"),figmakeChatShadcnAttributionAttributionComment:(0,k.t)("figmake.chat.shadcn_attribution.attribution_comment")},this.cancel={getCancelReason:this.cancelGetCancelReason.bind(this),onCancelCleanup:this.cancelOnCancelCleanup.bind(this)}}cleanupAbortedRequest(){this.chatMessagesNode&&((0,Z.wi)(this.chatMessagesNode.guid,{switchTo:"preview"}),this.userMessageContent&&!this.preventInputRestoreOnAbort&&this.setInput(this.userMessageContent.plainText),(0,ei.WH)(),(0,ew.ep)())}async getInProgressMakeStatus(){return(await D.Ay.shared.getResumableMakeStatus({},L.Ay())).status?.requestStatus??null}async cleanUpPotentiallyAbortedResumableMake(){if(this.isResumableMake&&!this.currentUserCanHandleResumableMake&&"COMPLETE"!==await this.getInProgressMakeStatus()){if(this.chatMessagesNode){let e=j.zl.get((0,Z.Z3)(this.chatMessagesNode.guid));e?.abort()}this.cleanupAbortedRequest()}}webCallbackOnSetupComplete(e,t){(0,Z.YZ)({node:e,messages:t,fileUpdates:[],isTyping:!1})}webCallbackOnSystemEditedSession(e){let t=el.O.get(e.guid);t&&(t.hasSystemEdited=!0)}webCallbackOnNodeBuilderError(e,t){(0,O.$D)(E.e.MAKE,e,t)}isFoundryEnabled(){return(0,l.ft)()>=1}webCallbackOnStreamError(e){let{error:t}=e;(0,en.Ho)(t,this.featureType,en.a5.SEND_MESSAGE),(0,W.rW)(t,this.userFlow,this.isResumableMake,{foundry_enabled:this.isFoundryEnabled(),make_chat_sdk:this.chatController.chatSdkPhase1Enabled,mcp_client_enabled:this.canUseMcpConnectors,resumable_make_enabled:e.resumableMakeEnabled},this.userFlow.getContext().chatStats?.isPowerUser,this.model,{mcp_connectors_installed:this.mcpConnectorsInstalledCount}),this.chatMessagesNode&&(P.J.addAction("make_send_message.stream_error",E.e.MAKE,a.$b.ERROR,{error:t.message,cortexClientGeneratedRequestUuid:e.clientLifecycleId,persistentEntityId:e.persistentEntityId,clientLifecycleId:e.clientLifecycleId,featureType:this.featureType.toString()}),t instanceof v.G1||t instanceof C.CortexErrorV2?j.zl.set((0,er.QK)(this.chatMessagesNode.guid),{error:t,cortexClientGeneratedRequestUuid:e.clientLifecycleId}):j.zl.set((0,er.QK)(this.chatMessagesNode.guid),{error:t}),this.cleanupAbortedRequest()),this.fileKey&&j.zl.set(J.m1,J.vO.ERROR)}webCallbackOnDone(e){(0,eC.z)("bake_max_steps_error_handling")&&"tool-calls"===e.finishReason&&!e.toolCalls.some(e=>(0,c.Eb)(e.toolName))&&this.chatMessagesNode&&j.zl.set((0,ea.VC)(this.chatMessagesNode.guid),e.finishReason);let t=this.calculateMcpMetrics(e.toolCalls);(0,W.oL)(e,t),this.fileKey&&j.zl.set(J.m1,J.vO.AWAITING_COMMIT)}calculateMcpMetrics(e){let t=e.filter(e=>e.toolName.startsWith(s.lh)),n=new Set;for(let e of t){let{serverName:t}=(0,c.Tr)(e.toolName);n.add(t)}return{mcp_connectors_installed:this.mcpConnectorsInstalledCount,mcp_servers_used_count:n.size,mcp_tools_used_count:t.length}}webCallbackOnDelta(e,t,n,i){if("requestLockToken"===e.type){this.startRequestLockHeartbeat({threadId:e.aiChatThreadId,lockToken:e.lockToken});return}t.planTitle&&j.zl.set(Q.n,t.planTitle),t.artifact&&function(e,t,n,i){let r=t.guid,a=(0,et.l)(r);if("code"===e.type){let t=e.file;j.zl.set(a,{type:"code",fullFilePath:t})}else if("toolCall"===e.type)j.zl.set(a,e);else if("toolCallDelta"===e.type){let e=i.getCurrentToolCall();e&&j.zl.set(a,{...e})}else"message"===e.type||"summary"===e.type||"visible_message"===e.type?j.zl.set(a,null):"plan"===e.type?(j.zl.set(a,null),e.title&&!(0,eC.z)("bake_title")&&j.zl.set(Q.n,e.title)):"editedFiles"===e.type&&j.zl.set(a,{type:"editedFiles",files:e.files})}(e,n,this.featureType,i),(0,Z.YZ)({node:n.guid,messages:t.messages,fileUpdates:Object.entries(t.fileUpdates).map(([e,t])=>({name:e,contents:t,isDeleted:!1})),isTyping:!1})}translationFnGetChatCommunityAttributionComment(e){return(0,k.t)("figmake.chat.community_attribution.attribution_comment",{creatorName:e.creatorName,hubFileName:e.hubFileName,hubFileLink:`${(0,R.Ay)().figma_url}${(0,z.X$)(e.hubFileId)}`,licenseName:"CC BY 4.0",licenseLink:"https://creativecommons.org/licenses/by/4.0/"})}cancelGetCancelReason(){let e;let t=j.zl.get(H.ze);if(this.chatMessagesNode){let n=j.zl.get((0,Z.Z3)(this.chatMessagesNode.guid));n?.signal.aborted?e="user_cancelled":t!==this.fileKey?e="user_left":this.chatMessagesNode.isAlive||(e="node_missing")}else e="node_missing";return this.userFlow.addContext({reason:e,status:"cancelled"}),e}cancelOnCancelCleanup(){this.chatMessagesNode&&this.userFlow.measureDuration("cancelCleanup",()=>{(0,Z.wi)(this.chatMessagesNode.guid,{switchTo:"preview"}),this.userMessageContent&&!this.preventInputRestoreOnAbort&&this.setInput(this.userMessageContent.plainText),(0,ei.WH)(),(0,ew.ep)()})}generateUniqueId(){return(0,I.assert)(void 0!==p.glU,"Fullscreen must be defined"),p.glU.generateUniqueID()}generateRequestUuid(){return(0,R.b5)()?(0,S.g)():void 0}selectFile(e){(0,q.nU)(e)}setCodeChatArtifact(e){this.chatMessagesNode&&j.zl.set((0,et.l)(this.chatMessagesNode.guid),{type:"code",fullFilePath:e})}async clearImportData(){let e=(0,d.S_)(this.chatController.getMessages(),!!(0,T.kc)().make_chat_contents_cache);if(0===e.length||!this.fileKey)return;let t=await (0,N.cK)({fileKey:this.fileKey,threadId:this.chatController.chatSdkState?.threadId});f.l7.ai("code-chat-clear-import-data",()=>{this.chatController.editMessages(e,t)})}getSources(){if(!this.chatMessagesNode)return{};let e=this.featureType===s.lV.FIGMAKE?void 0:(0,o.Pq)(this.featureType,this.chatMessagesNode,{multi_file_code_layers:(0,eC.z)("multi_file_code_layers"),bake_canvas:(0,eC.z)("bake_canvas")});return(0,i.Uu)((0,r.N)(),{objectPath:e})}async initSupabase(){let e=j.zl.get(H.ze);if(!e)return;let{connectedProject:t,isConnectedNonOwner:n}=await G.M4.fetch((0,eh.TT)({fileKey:e})),i=t?.secrets?.map(e=>e.name),r={projectId:t?.id,publicAnonKey:t?.public_anon_key,makeNamespace:t?.make_namespace,isConnectedNonOwner:!!n,secrets:i};if(r?.projectId&&r?.publicAnonKey&&r?.makeNamespace){var a,s;!function(e,t,n,i){let r=(0,h.UN)();if(!r.getInternalCanvas())return;let a=(0,l._J)(eg.EZ),s=(0,l._J)(eg.wo),o=(0,l._J)(eg._p);f.Hq.system("create-supabase-starter-files",()=>{if(s)i.checkProjectChanged()&&(s.sourceCode=(0,eg.OP)(e,t));else{let n=r.createNewCodeFile({path:eg.wo.slice(1),sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:i.reportErrorToSentry});if(!n)return;let a=r.get(n);if(!a)return;a.sourceCode=(0,eg.OP)(e,t)}if(!a){let t=r.createNewCodeFile({path:eg.EZ.slice(1),sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:i.reportErrorToSentry});if(!t)return;let a=r.get(t);if(!a)return;a.sourceCode=(0,eg._u)(n,e)}if(!o){let e=r.createNewCodeFile({path:eg._p.slice(1),sourceCode:"",entryPoint:null,isEntrypointCodeFile:!1,onError:i.reportErrorToSentry});if(!e)return;let t=r.get(e);if(!t)return;t.sourceCode=(0,eg.mE)(n)}p.glU?.commit(),i.updateProject(e,t)})}(a=r.projectId,s=r.publicAnonKey,r.makeNamespace,{checkProjectChanged:()=>j.zl.get(e_)!==a||j.zl.get(ey)!==s,updateProject:(e,t)=>{j.zl.set(e_,e),j.zl.set(ey,t)},reportErrorToSentry:e=>(0,O.$D)(E.e.MAKE,e)})}return(0,ef.r)(),r}async flushAndGetSequenceNumber(){try{return await (0,U.c)({blockOnJoin:!0})}catch(t){let e=Error(er.T_.MULTIPLAYER_NOT_CONNECTED);throw this.chatMessagesNode&&(j.zl.set((0,er.QK)(this.chatMessagesNode.guid),{error:e}),this.cleanupAbortedRequest()),this.fileKey&&j.zl.set(J.m1,J.vO.ERROR),e}}get preview(){return j.zl.get(J.mK)}getStreamFn(e,t){return function(e,t){let n;switch(e){case s.lV.FIGMAKE:n=t?D.Ay.shared.retrieveInProgressMake:D.Ay.shared.generateFigMake;break;case s.lV.FIGMAKE_IN_DESIGN:case s.lV.CODE_IN_SITES:case s.lV.ANIMATION_PRESET:case s.lV.AI_ASSISTANT:n=D.Ay.shared.generateLivingDesigns;break;default:(0,g.xb)(e)}return(e,t,i)=>n(e,t,i)}(e,t)}onTitle(e){j.zl.set(Q.n,e)}onDescription(e){if(this.chatMessagesNode){let t=(0,h.UN)().getCurrentPage();t&&f.l7.user("auto-set-description",()=>{p.glU?.setWebMetadata({description:e.trim()},[t.guid])})}}async onBegin(e,t){this.fileKey&&j.zl.set(J.m1,J.vO.IN_PROGRESS),(0,X.zy)()&&e.context.instanceNode&&await (0,ed.L)(e.context.instanceNode);let n="userMessageContent"in e?e.userMessageContent:void 0,i="userMessageContent"in e?e.rawUserChatDetails:void 0,r=e instanceof s.zx,a=t.getMessages(),{user:o,changedFiles:l}=e.context;this.fileKey&&!r&&l&&l.length>0&&await this.createManualEditSystemMessage({user:o,changedFiles:l,chatMessagesNode:this.chatMessagesNode,chatController:this.chatController,featureType:this.featureType,fileKey:this.fileKey});let d=!!(0,eC.z)("bake_m2d")&&(0,em.Q3)(this.userMessageContent),c=i?(0,s.am)(i):void 0;this.userFlow.addContext({nodeId:this.instanceNode?.guid,featureType:this.featureType.toString(),clientLifecycleId:e.clientLifecycleId,persistentEntityId:this.persistentEntityId,containsRoundtripNode:d,messageLength:c?.inputMessageLength,designAttachmentCount:c?.designAttachmentCount,imageAttachmentCount:c?.imageAttachmentCount,minAttachmentImageSize:c?.minAttachmentImageSize,chatStats:function(e){let t={numMessages:0,numToolCalls:0,numToolResults:0,numUserMessages:0,numAssistantMessages:0,numSystemMessages:0,numToolMessages:0,numActiveUsers:0,chatDaysOld:0,isPowerUser:!1},n=e.getMessages();if(n.length<1)return t;let i=new Set;for(let e of n)t.numMessages+=1,t.numToolCalls+=e.toolCalls.length,t.numToolResults+=e.toolResults.length,e.type===w.K$p.USER_MESSAGE?(t.numUserMessages+=1,i.add(e.userId)):e.type===w.K$p.ASSISTANT_MESSAGE?t.numAssistantMessages+=1:e.type===w.K$p.SYSTEM_MESSAGE?t.numSystemMessages+=1:e.type===w.K$p.TOOL_MESSAGE&&(t.numToolMessages+=1);t.numActiveUsers=i.size;let r=n[0];try{let e=Date.now()-parseInt(r.sentAt64);t.chatDaysOld=Math.round(e/864e5)}catch(e){t.chatDaysOld=-1}return t.numUserMessages>=230&&t.chatDaysOld>=30&&(t.isPowerUser=!0),t}(this.chatController)}),(0,W.rH)(this.featureType,a.length,this.persistentEntityId,e.clientLifecycleId,this.fileKey,d,this.isResumableMake,c,{foundry_enabled:this.isFoundryEnabled(),make_chat_sdk:this.chatController.chatSdkPhase1Enabled,mcp_client_enabled:this.canUseMcpConnectors,resumable_make_enabled:e.context.featureFlags.resumable_make},n?.origin,this.userFlow.getContext().chatStats?.isPowerUser,this.model,e.context.sandboxId??void 0,{mcp_connectors_installed:this.mcpConnectorsInstalledCount}),(0,I.assert)(void 0!==p.glU,"Fullscreen must be defined"),(0,es.Ic)(),this.instanceNode&&this.userFlow.measureDuration("update_code_snapshot_state",()=>{V.u.updateCodeSnapshotState(this.instanceNode.guid,w.Lxv.LLM_IN_PROGRESS,!0,0,!1),this.instanceNode.startLlmInProgressState()})}releaseRequestLock(){if(!this.requestLockHandle)return;let{threadId:e,lockToken:t}=this.requestLockHandle,n=async()=>{let n;for(let i=0;i<3;i++){try{await D.Ay.shared.figmakeRequestLock({operation:"release",aiChatThreadId:e,lockToken:t},(0,L.Ay)()),n=void 0;break}catch(e){n=e}await new Promise(e=>setTimeout(e,500+500*Math.random()))}if(n)throw n};this.stopRequestLockHeartbeat(),(0,eC.z)("make_thread_request_lock")&&n().catch(t=>{this.reportErrorToSentry(new M.Tv("Failed to release request lock"),{fileKey:this.fileKey,threadId:e,error:t instanceof Error?t.message:String(t)})})}startRequestLockHeartbeat(e){!this.requestLockHeartbeatInterval&&(0,eC.z)("make_thread_request_lock")&&(this.requestLockHandle=e,this.requestLockHeartbeatInterval=setInterval(()=>{if(!this.requestLockHandle){this.stopRequestLockHeartbeat();return}D.Ay.shared.figmakeRequestLock({operation:"heartbeat",aiChatThreadId:e.threadId,lockToken:e.lockToken},(0,L.Ay)()).catch(e=>{console.warn("Failed to heartbeat request lock",e)})},3e3))}stopRequestLockHeartbeat(){this.requestLockHeartbeatInterval&&(clearInterval(this.requestLockHeartbeatInterval),this.requestLockHeartbeatInterval=void 0),this.requestLockHandle=void 0}async commit(e){if(!this.fileKey){console.warn("Cannot commit messages without a file key");return}let t=!0;this.inProgressMakeIdentifier&&this.isResumableMake&&!await this.getInProgressMakeStatus()&&(t=!1);let n=await (0,N.cK)({fileKey:this.fileKey,threadId:this.chatController.chatSdkState?.threadId}),r=e.exchangedMessages.find(e=>e.type===w.K$p.USER_MESSAGE);if(r){let e=(0,s.MK)(r,!1);e.requestUuid&&(0,d.G2)(this.chatController,e.requestUuid,d.cF)&&(t=!1)}if(t){this.isFoundryEnabled()&&Object.keys(e.fileUpdates).length>0&&(0,ee.aM)();let{expectedCodeSnapshotKey:t,fullscreenCommitSeqNum:r}=function({exchangedMessages:e,chatMessagesNode:t,chatController:n,chatCompressions:r,fileUpdates:a,fileKey:c,featureType:u,featureFlags:m,clientDependencies:v,modelConfigVersion:C,codeLibraryFormat:E,syncResult:w}){let k;let T=Object.keys(a).length>0,j=u===s.lV.FIGMAKE?"":m.multi_file_code_layers||m.bake_canvas?(0,i.og)(t.codeFileFullPathWithoutScheme):"",S=u===s.lV.FIGMAKE?(0,l.$d)():(m.multi_file_code_layers||m.bake_canvas)&&t.codeFilePath?(0,l.$d)(j):(0,l.$d)(),I=(0,s.Li)(e,!1),A=f.Hq.ai("update-source-code-and-chat-messages",()=>{for(let[e,i]of((0,g.vA)(void 0!==p.glU,"Fullscreen must be defined"),n.appendMessages(I,w),Object.entries(a))){let{codeFile:n}=(0,o.Ur)(S,j,e,i,C,v);n&&(n.sourceCode=i,v.setCodeLastEditedBy(t.guid))}return p.glU.commit()});if(f.Hq.ai("set-chat-compression-state",()=>{for(let e of r)(0,s.yZ)(t,e)}),c&&T){let e={files:{},entrypoint:void 0};Object.entries(S).forEach(([t,n])=>{e.files[(0,i.m0)(j,t)]=n.sourceCode,n.isEntrypointCodeFile&&(e.entrypoint=(0,i.m0)(j,t))}),Object.entries(a).forEach(([t,n])=>{e.files[t]=n}),k=(0,y.$)(e,u),(0,s.Us)({messages:I,codeFiles:e,fileKey:c,featureType:u,enableCache:!1,clientDependencies:{createCodeSnapshot:v.createCodeSnapshot}}).then(({enrichedMessages:e,codeSnapshot:t})=>{if(f.Hq.ai("enrich-exchange-messages-with-code-snapshots",()=>{n.editMessages(e,w)}),t&&m.make_chat_sdk_phase1){let{codeSnapshotKey:e}=t;e===k?v.chatSdkWebBindings?.logChatSdk("Saved code snapshot to S3",{codeSnapshotKey:e}):v.reportErrorToSentry(new b.T("Code Snapshot key mismatch: TypeScript and Sinatra computed a different code snapshot key"),{fileKey:c,expectedCodeSnapshotKey:k,actualCodeSnapshotKey:e})}}).catch(e=>{v.reportErrorToSentry(Error(`Failed to generate code snapshot: ${e}`))})}if(u===s.lV.FIGMAKE){(0,_.z9)(n.getMessages(),{mirrorCommunityAttributionDisplay:v.mirrorCommunityAttributionDisplay,clearCommunityAttribution:v.clearCommunityAttribution,translationFns:v.translationFns,translatedStrings:v.translatedStrings,reportErrorToSentry:v.reportErrorToSentry,codeLibraryFormat:E},m.make_chat_contents_cache??!1);let e=(0,h.UN)(),t=(0,s.VH)(e),r=(0,o.iB)();if(t&&Object.keys(a).some(e=>(0,i.Fd)(e)===(0,i.Fd)(r))){let e=(0,d.Ac)(t);e&&f.l7.system("override-hide-preview-for-make-kit-creation",()=>{e.shouldHidePreviewForMakeKitCreation=!1})}T&&(0,x.J)(t)}return{expectedCodeSnapshotKey:k,fullscreenCommitSeqNum:A}}({exchangedMessages:e.exchangedMessages,chatMessagesNode:this.chatMessagesNode,chatController:this.chatController,chatCompressions:e.aiChatCompressions,fileUpdates:e.fileUpdates,fileKey:this.fileKey,featureType:this.featureType,featureFlags:{multi_file_code_layers:(0,eC.z)("multi_file_code_layers"),bake_canvas:(0,eC.z)("bake_canvas"),make_chat_sdk_phase1:this.chatController.chatSdkPhase1Enabled,make_chat_contents_cache:(0,eC.z)("make_chat_contents_cache")},clientDependencies:this,modelConfigVersion:e.modelConfigVersion,codeLibraryFormat:this.featureType===s.lV.FIGMAKE?(0,l.ft)():void 0,syncResult:n});this.fileKey&&j.zl.set(J.m1,J.vO.COMMITTED),this.chatSdkWebBindings&&!(0,eC.z)("make_chat_sdk_commit_serverside")&&await this.commitMessagesToDatabase({aiChatMessages:e.exchangedAiChatMessages,aiChatCompressions:e.aiChatCompressions,expectedCodeSnapshotKey:t,fullscreenCommitSeqNum:r})}}async commitMessagesToDatabase({aiChatMessages:e,aiChatCompressions:t,expectedCodeSnapshotKey:n,fullscreenCommitSeqNum:i}){if(!this.chatSdkWebBindings)throw Error("Cannot call commitMessagesToDatabase with chatSdkWebBindings as undefined");let r=this.chatSdkWebBindings.aiChatThreadId,a=!1;try{if(e){if(n){var s;s=e,e=structuredClone(s).map(e=>("assistant"!==e.role||e.content.push({type:"code-chat-legacy-s3-code-snapshot",codeSnapshotKey:n}),e))}a=await this.chatSdkWebBindings.commitMessagesToDatabase({aiChatMessages:e,fullscreenCommitSeqNum:i})}a&&t.length>0&&(a=await this.chatSdkWebBindings.commitCompressions(t))}catch(t){let e=t instanceof Error?t.message:String(t);this.reportErrorToSentry(new M.Tv(`Failed to commit messages or compressions to database: ${e}`),{fileKey:this.fileKey,threadId:r});return}a&&(0,eC.z)("make_chat_sdk_trigger_validations")&&this.chatSdkWebBindings.triggerValidations().catch(e=>{this.reportErrorToSentry(new M.Tv("Failed to trigger validations"),{fileKey:this.fileKey,threadId:r,error:e instanceof Error?e.message:String(e)})})}async onComplete(e){this.releaseRequestLock(),"success"===e.status&&(this.userFlow.addContext({numFileUpdates:Object.keys(e.fileUpdates).length,status:"success"}),(0,W.No)({featureType:this.featureType,clientLifecycleId:e.clientLifecycleId,persistentEntityId:this.persistentEntityId,fileUpdates:e.fileUpdates}),this.isFoundryEnabled()||(0,eo.x)(this.chatMessagesNode?.guid),e.shouldClearConsoleMessages&&(0,ep.px)(),K.H.setUserFlag("has_prompted_in_figma_make",!0)),("success"===e.status||"aborted"===e.status)&&(await this.cleanUpPotentiallyAbortedResumableMake(),function(e){if(!(0,X.zy)()){(0,Z.wi)(e,{switchTo:"preview"});return}let t=(0,Z.A5)(e);if(t){let n=t.messages.slice().reverse().find(e=>e.type===w.K$p.USER_MESSAGE);if(n?.textContent){let t=(0,s.MK)(n,!1),i=t?.inspectedComponent?.filePath,r=t?.inspectedLibrary?.folderPath;if(i){let t=(0,l._J)(i);if(t){(0,Z.wi)(e,{switchTo:"code"}),(0,q.nU)(t,!0);return}}else if(r){(0,Z.wi)(e,{switchTo:"code"}),j.zl.set(Y.ww,r);return}}}(0,Z.wi)(e,{switchTo:"preview"})}(this.chatMessagesNode?.guid||""),j.zl.set((0,$.o0)(this.chatMessagesNode?.guid||""),!1)),this.instanceNode&&V.u.markCodeNodesDirty(new Set([this.instanceNode.guid])),this.onFinishCallback?.(),setTimeout(()=>{this.fileKey&&j.zl.set(J.m1,J.vO.IDLE)},0)}async createManualEditSystemMessage(e){let t;let{user:n,changedFiles:r,chatMessagesNode:c,chatController:u,featureType:m,fileKey:p}=e,h=u.getMessages();if(0===h.length)return;let g=(0,d.eB)(h)||j.zl.get(H.yV)?.name,x=(0,eC.z)("multi_file_code_layers"),_=(0,eC.z)("bake_canvas"),y=(0,o.Pq)(m,c,{multi_file_code_layers:x,bake_canvas:_}),b=m===s.lV.FIGMAKE?(0,l.$d)():(x||_)&&c.codeFilePath?(0,l.$d)(y):(0,l.$d)(),v={files:{},entrypoint:void 0};Object.entries(b).forEach(([e,t])=>{v.files[(0,i.m0)(y,e)]=t.sourceCode,t.isEntrypointCodeFile&&(v.entrypoint=(0,i.m0)(y,e))});let C=P.J.startUserFlow({name:"make_commit_manual_edit",team:E.e.MAKE,priority:a.bx.P1});try{t=await (0,ev.Oy)({fileKey:p,codeFiles:v,featureType:m})??void 0}catch(e){console.warn("Failed to create code snapshot for manual edit message:",e)}let w=(0,eb.xD)(n,r,t,g),k=await (0,N.cK)({fileKey:p,threadId:u.chatSdkState?.threadId}),T=f.Hq.ai("add-manual-edit-system-message",()=>(u.appendMessages([w],k),B.Y5.commit()));await (0,N.Ui)({commitContext:"manual_edit",nodeChatMessages:[w],chatController:u,fileKey:p,syncResult:k,fullscreenCommitSeqNum:T,userFlow:C}),C.end()}getClientLifecycleId(e,t,n){return(0,W.Pd)(e,t,n)}getCodeLibraryComponents(){return(0,o.f3)({bake_ds_import_l3a:(0,eC.z)("bake_ds_import_l3a"),make_kits:(0,eC.z)("make_kits"),make_kits_plan_key:(0,eC.z)("make_kits_plan_key")})}trackSystemEditedSession(e){let t=el.O.get(e.guid);t&&(t.hasSystemEdited=!0)}setCodeLastEditedBy(e){j.zl.set((0,$.Nm)(e),"assistant")}async createCodeSnapshot(e){return await (0,ev.Oy)(e)}reportErrorToSentry(e,t){(0,O.$D)(E.e.MAKE,e,t)}mirrorCommunityAttributionDisplay(){(0,es.gC)()}clearCommunityAttribution(){(0,es.En)()}}async function eT({userMessageContent:e,clientSideToolResults:t,user:n,chatMessagesNode:i,chatController:r,rawUserChatDetails:o,featureType:l,setInput:d,fileKey:c,autoFixingUserMessageId:u,onFinish:m,canUseSupabase:p,todoAutoAccept:h,changedFiles:f,model:g,instanceNode:x,requestInitiator:_,mcpPreferences:y,inProgressMakeIdentifier:b,isResumableMakeEnabled:v,preventInputRestoreOnAbort:C,currentUserCanHandleResumableMake:w,canUseMcpConnectors:k}){if(r.isInitialized||console.error("Chat controller is not initialized. If you're seeing this message, please add a check to safely wait for chatController.isInitialized before calling handleSubmitMessage."),!n||!i)throw Error("handleSubmitMessage must take either a user or a chatMessagesNode");let T=y?Object.keys(y.serverPreferences).length:0;await eE({chatMessagesNode:i,user:n,userMessageContent:e,chatFeatureType:l,chatSdkPhase1Enabled:r.chatSdkPhase1Enabled});let S=!!r.chatSdkState?.isOldFile,I=P.J.startUserFlow({name:"make_send_message",team:E.e.MAKE,priority:a.bx.P1,context:{featureType:l.toString(),messageLength:e?.plainText.length,hidden:e?.hidden,modelConfigVersion:e?.modelConfigVersion,requestInitiator:_,model:g,attachmentsCount:o?.attachments?.length,chatSdk:{isOldFile:!!S}}}),R=function(e,t,n,i){let r=t.chatSdkState?.threadId??null,a=t.chatSdkState?.isOldFile,s=n&&r;if(t.chatSdkPhase1Enabled&&s){let e=j.zl.get(F.J)??0;i.addContext({aiChatThreadId:r,chatSdkIsOldFile:!!a}),(0,M.nH)("handleSubmitMessage()",{threadId:r,startFileSeqNum:e,isOldFile:a});let s={fileKey:n,threadId:r,userFlow:i};return{aiChatThreadId:r,isOldFile:!!a,logChatSdk:M.nH,commitMessagesToDatabase:(0,N.aF)({...s,commitContext:"send_message",chatController:t,startFileSeqNum:e}),uploadContentToBlobstore:(0,A._J)(s),createPendingMessageParts:(0,N.Z0)(s),commitCompressions:(0,N.FO)({...s,isOldFile:!!a}),triggerValidations:(0,N.Nl)({...s,isOldFile:!!a})}}t.chatSdkPhase1Enabled&&(0,M.fL)(new M.Tv("handleSubmitMessage called with missing aiChatThreadId or fileKey. Falling back to non-Chat-SDK mode."),"handle_submit_message",{featureType:e.toString(),fileKey:n,threadId:r,isOldFile:a})}(l,r,c,I),O=j.zl.get(eu.Fq),D=O?.state===ec.TT.PROVISIONED?O.sandboxId:null,B=new ek({chatMessagesNode:i,fileKey:c,userMessageContent:e,preventInputRestoreOnAbort:C??!1,setInput:d,instanceNode:x,onFinish:m,featureType:l,chatController:r,inProgressMakeIdentifier:b,currentUserCanHandleResumableMake:w,userFlow:I,chatSdkWebBindings:R,canUseMcpConnectors:k,mcpConnectorsInstalledCount:T,model:g,autoFixingUserMessageId:u});i&&j.zl.set((0,Z.Z3)(i.guid),B.streamController.abortController),j.zl.set(Z.st,B.userMessageId);try{let a={user:n,chatMessagesNode:i,chatController:r,featureType:l,fileKey:c,canUseSupabase:p,todoAutoAccept:h,changedFiles:f,model:g,instanceNode:x||void 0,featureFlags:{multi_file_code_layers:(0,eC.z)("multi_file_code_layers"),bake_canvas:(0,eC.z)("bake_canvas"),bake_canvas_server_files_client:(0,eC.z)("bake_canvas_server_files_client"),bake_description:(0,eC.z)("bake_description"),bake_ds_import_l3a:(0,eC.z)("bake_ds_import_l3a"),bake_smooth_chat_streaming:(0,eC.z)("bake_smooth_chat_streaming"),bake_title:(0,eC.z)("bake_title"),make_chat_sdk_phase1:r.chatSdkPhase1Enabled,make_chat_sdk_commit_serverside:(0,eC.z)("make_chat_sdk_commit_serverside"),make_chat_sdk_last_msg_only:(0,eC.z)("make_chat_sdk_last_msg_only"),make_attach_snapshot:(0,eC.z)("make_attach_snapshot"),ai_assistant_blobstore:(0,eC.z)("ai_assistant_blobstore"),resumable_make:v,make_chat_sdk_sites_and_design:(0,eC.z)("make_chat_sdk_sites_and_design"),make_chat_sdk_trigger_validations:(0,eC.z)("make_chat_sdk_trigger_validations"),make_chat_contents_cache:(0,eC.z)("make_chat_contents_cache"),make_chat_sdk_tool_results_as_refs:(0,eC.z)("make_chat_sdk_tool_results_as_refs")},cortexAuth:(0,L.Ay)(),dependencies:B,requestInitiator:_,mcpPreferences:y,inProgressMakeIdentifier:b,getInProgressMakeStatus:b&&B.getInProgressMakeStatus?()=>B.getInProgressMakeStatus():void 0,sandboxId:D},d=t&&t.length>0?new s.eh(a,t):u?new s.zx(a,e,o,u):new s._X(a,e,o);return await (0,s.Oz)(d)}finally{i&&j.zl.set((0,Z.Z3)(i.guid),void 0),I.end()}}},268037:(e,t,n)=>{n.d(t,{_:()=>A});var i=n(239976),r=n(105652),a=n(378721),s=n(888830),o=n(658426),l=n(167746),d=n(396126),c=n(270166),u=n(466082),m=n(379141),p=n(445019);n(323264);var h=n(791428),f=n(82131),g=n(933870),x=n(880197),_=n(257279),y=n(882681),b=n(696002),v=n(924278),C=n(569926),E=n(682499),w=n(504550),k=n(379196);let T="devtools_code_console--tabPanelScrollContainer--JIX-G";function j(){let[e]=(0,k.jT)(),[t]=(0,v.PM)(),n=(0,p.md)(E.Cb),a=(0,r.useMemo)(()=>(e??[]).concat(t.map(e=>{let t=parseInt(e.timestamp);return{type:"error",sender:"system",phase:k.S4.RUNTIME,message:`${C.f.SUPABASE} ${e.event_message}`,timestamp:isNaN(t)?0:t}})),[e,t]),s=(0,r.useMemo)(()=>(function(e){let t=e.sort((e,t)=>e.timestamp-t.timestamp),n=[];for(let e of t){if(0===n.length){n.push({...e,count:1});continue}let t=n[n.length-1];t&&e.type===t.type&&e.message===t.message?t.count=t.count+1:n.push({...e,count:1})}return n})(a.filter(e=>e.message.includes(n))),[a,n]),[o,l]=(0,r.useState)(s),d=(0,r.useMemo)(()=>(0,f.n)(20,e=>{l(e)}),[]);return((0,r.useEffect)(()=>{d(s)},[d,s]),o)?(0,i.jsx)("div",{tabIndex:-1,children:o.map((e,t)=>(0,i.jsxs)(r.Fragment,{children:[0!==t&&(0,i.jsx)(N,{}),(0,i.jsx)(M,{consoleMessage:e})]},t))}):null}function S({value:e,onChange:t}){let n=r.useRef(null);return(0,i.jsxs)("label",{className:"devtools_code_console--filter--JO1PJ",children:[(0,i.jsx)(l.S,{className:"devtools_code_console--filterIcon--alyCJ"}),(0,i.jsx)("input",{className:"devtools_code_console--filterInput--HQ1wu",type:"text",value:e,onChange:e=>t(e.target.value),ref:n,placeholder:(0,m.t)("sites.code_component.console.filter")})]})}function I(){let[e,t]=(0,k.jT)(),[n,r]=(0,p.fp)(E.Cb);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S,{value:n,onChange:r}),(0,i.jsx)("div",{}),(0,i.jsx)(a.K,{"aria-label":(0,m.t)("sites.code_component.console.clear"),htmlAttributes:{"data-tooltip":(0,m.t)("sites.code_component.console.clear"),"data-tooltip-type":"text"},onClick:()=>{t([]),(0,v.ZO)()},children:(0,i.jsx)(d.J,{})})]})}function A({codeSelectionToRender:e,windowRef:t,showPropertiesTab:n=!0}){let[o,l]=(0,p.fp)(E.Vo),[d,f]=(0,p.fp)(E.rO),[v,C]=(0,r.useState)(void 0);r.useEffect(()=>{let e=()=>{t?.current&&C(.4*t.current.clientHeight)};e();let n=new ResizeObserver(e);return t?.current&&n.observe(t.current),()=>{n.disconnect()}},[t]);let[k,S,A]=s.t.useManagedTabs({properties:n,console:!0},o,e=>l(e)),{figmakeInFullscreen:N}=(0,b.Ve)(),M=n?(0,m.t)("sites.code_component.drawer.hide"):(0,m.t)("sites.code_component.drawer.hide_console_only"),[R,P]=(0,p.fp)(E.YD),O=e?.type==="instance",D=e?.type==="behavior",L=D?e.targetNodeGuid:void 0,F=O?e.allCodeInstanceNodeIds:L?[L]:[],B=D?u.UN().get(e.codeBehaviorNodeGuid)?.codeComponentId??"":"",U=(0,y.xN)(B,F),{assignmentValuesByDefId:V}=(0,_.an)(F,x.OE.ASSIGNMENT,!0);return(0,i.jsx)(i.Fragment,{children:R&&!N&&(0,i.jsxs)(h.G,{className:"devtools_code_console--panel--a7-dr",side:"top",maxSize:v,onDragEnd:e=>{f(e)},minSize:80,defaultSize:d,children:[(0,i.jsxs)("div",{className:"devtools_code_console--headerRow--hn0ns",children:[(0,i.jsx)("div",{className:"devtools_code_console--headerRowTabs--3SXGl",children:(0,i.jsxs)(s.t.TabStrip,{manager:A,children:[(0,i.jsx)(s.t.Tab,{...k.properties,children:(0,m.tx)("sites.code_component.properties")}),(0,i.jsx)(s.t.Tab,{...k.console,children:(0,m.tx)("sites.code_component.console")})]})}),(0,i.jsxs)("div",{className:"devtools_code_console--headerRowIcons--WhKCG",children:["console"===A.activeTab&&(0,i.jsx)(I,{}),(0,i.jsx)(a.K,{"aria-label":M,htmlAttributes:{"data-tooltip":M,"data-tooltip-type":"text"},onClick:()=>{P(!1)},children:(0,i.jsx)(c.A,{})})]})]}),(0,i.jsxs)("div",{className:"devtools_code_console--tabPanelContainer--I0HSW",children:[0===Object.keys(U?.typedPropDefs??V).length?(0,i.jsx)(s.t.TabPanel,{...S.properties,height:"fill",children:(0,i.jsx)(w.F,{})}):(0,i.jsx)(s.t.TabPanel,{...S.properties,height:"fill",children:(0,i.jsx)(g.P,{className:T,useBottomPinning:!0,children:(0,i.jsx)(w.D,{guids:F,hideVariableBinding:e?.type==="behavior",recordingKey:"codeWindowPropertiesPanel",entrypoint:"code-editor",windowRef:t,behaviorPropAssignmentHelpers:U})})}),(0,i.jsx)(s.t.TabPanel,{...S.console,height:"fill",children:(0,i.jsx)(g.P,{className:T,useBottomPinning:!0,children:(0,i.jsx)(j,{})})})]})]})})}function N(){return(0,i.jsx)("div",{className:"xjm9jq1 x2i9t41 xrxpjvj x176lpz5"})}function M({consoleMessage:e}){let t=e.message,n="error"===e.type,r="warn"===e.type;n?t=`\u274C ${t}`:r&&(t=`\u26A0\uFE0F ${t}`);let a=e.count>1;return(0,i.jsxs)("div",{...{0:{className:"xwjs1nl x1k6wstc x1diqk0a xtd9kr2 x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7"},2:{className:"xwjs1nl x1k6wstc x1diqk0a x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7 x172n1ly"},1:{className:"xwjs1nl x1k6wstc x1diqk0a x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7 x12fzf0q"},3:{className:"xwjs1nl x1k6wstc x1diqk0a x1hx0egp x1vvkbs x1yn0g08 x126k92a x78zum5 x1cy8zhl x1nfngrj x77yl0c xm5cgt7 x12fzf0q"}}[!!n<<1|!!r<<0],"data-testid":"console-message",children:[a&&(0,i.jsx)(o.F,{...{0:{className:"x19y5rnk x176lpz5 x1n0bwc9"},2:{className:"x19y5rnk x3yuajn x172n1ly"},1:{className:"x19y5rnk x1mt81i5 x12fzf0q"},3:{className:"x19y5rnk x1mt81i5 x12fzf0q"}}[!!n<<1|!!r<<0],children:(0,i.jsx)("span",{className:"xuxw1ft xlyipyv x1w7y96w x1ti5iz4",children:e.count})}),(0,i.jsx)("span",{children:t})]})}},542948:(e,t,n)=>{n.d(t,{m:()=>i2});var i=n(239976),r=n(105652),a=n(466082),s=n(323264),o=n(102462),l=n(585066),d=n(526575),c=n(286183),u=n(39684),m=n(25378),p=n(836848),h=n(270450),f=n(445019),g=n(522568),x=n(223487),_=n(790016),y=n(892804),b=n(682499),v=n(200498),C=n(628266),E=n(865449),w=n(454766),k=n(373703),T=n(612788),j=n(949484),S=n(379196),I=n(329983),A=n(322944),N=n(447419);function M({isFullscreen:e,codeSelectionToRender:t}){let n=(0,f.md)(k.p_),i=(0,f.md)(k.l6),a=(0,f.md)(k.Xs),s=(0,f.md)(k.xJ),o=(0,f.md)(k.UL),l=(0,f.md)(k.iK),d=t.codeInstanceNodeGuid,c=t?.type==="behavior"?t.targetNodeGuid:void 0;return(0,r.useMemo)(()=>({id:d,size:e?i:n,breakpoint:e?s:a,clipContents:e?!!l:!!o,behaviorTargetId:c}),[e,i,n,s,a,l,o,d,c])}var R=n(846779),P=n(270307),O=n(295870),D=n(692376),L=n(129416),F=n(665679),B=n(204950);async function U({instanceSwapPropertyGuids:e,nodeId:t,codeBehaviorTargetNodeId:n,perfTracker:i}){let r=Object.values(e).concat(t?[t]:[],n?[n]:[]);i.record("preview_website_bundle_start");let{bundle:a,assetInstructions:s}=await (0,B.LE)(r,{skipCodeFilesystem:!n,skipInstanceUpdate:!0});i.record("preview_website_bundle_stop"),i.record("asset_generation_start");let o=await (0,F.Ct)(s);return a.files={...a.files,...o},i.record("asset_generation_stop"),a}var V=n(882082),H=n(934903),z=n(395221);class G{constructor(e,t,n,i){this.sitesPreview=null,this.readyIframe=null,this.isPreviewDirty=!0,this.instanceSwapPropertyGuids={},this.designToCodeGenerating=!0,this.chatMessageInProgress=!1,this.iframeElement=null,this.shouldRenderWhenIframeReady=!1,this.previewHistory=new V.A,this.requiresBuild=!1,this.requiresConsoleClear=!1,this.dirtyTimeout=void 0,this.codeBundle=null,this.hasTriggeredRecovery=!1,this.productType=e,this.setIframeKey=i,this.perfTracker=t,this.previewUpdateTracker=n,this.sitePreviewIframeManager=new A.fj({productType:e,previewSurfaceForLogging:"component_preview"})}mountIframe(e){this.iframeElement!==e&&(this.sitesPreview&&this.unmount(),this.iframeElement=e,this.sitesPreview=this.sitePreviewIframeManager.createSitesPreview({history:this.previewHistory,skipSetPreviewedNode:!0,options:{skipPreviewUpdateListener:!0,generateFullAssets:!0,withBaseStyles:this.withBaseStyles,usingSandbox:!1,labs:{runtimeDebugTools:!1}}}),this.sitePreviewIframeManager.attachHandlers({onIframeReady:()=>{this.readyIframe=e,this.onReadyIframe?.(e),((0,R.ft)()>=1&&(0,h.kc)().make_foundry||this.shouldRenderWhenIframeReady)&&(this.shouldRenderWhenIframeReady=!1,this.render())},onBuildError:e=>{this.onError?.(e,S.S4.BUILD)},onRuntimeError:e=>{this.onError?.(e,S.S4.RUNTIME)},onHMRBeforeUpdate:()=>{(0,S.px)()},onHMRAfterUpdate:()=>{this.onUpdate?.()},onConsoleLog:(e,t,n)=>this.onConsoleLog?.(e,t,n),onInspectElementEvent:e=>{this.sitesPreview?.directManipulationEditor.processEvent(e,this.codeBundle??null)},onImportModuleStart:()=>{this.perfTracker.record("import_module_start")},onImportModuleEnd:()=>{this.perfTracker.record("import_module_stop")},onIframeRecoveryNeeded:(e,t)=>{if((0,h.kc)().sts_iframe_recovery){if(this.hasTriggeredRecovery){(0,h.kc)().internal_only_debug_tools&&console.warn(`[Sites Preview] iframe ${e} occurred but recovery already attempted`);return}(0,L.$D)(O.e.SITES_WEB_RUNTIME,t??Error(`iframe recovery triggered due to ${e}`),{extra:{errorType:e}}),this.hasTriggeredRecovery=!0,this.previewUpdateTracker.triggerReload("error-recovery-triggered-reload"),this.setIframeKey(e=>e+1)}}}),this.onSitesPreview?.(this.sitesPreview),this.sitePreviewIframeManager.mountIframe(e,{useReactDev:!0}))}unmount(){this.sitePreviewIframeManager.reset(),this.readyIframe=null,this.onReadyIframe?.(null),this.sitesPreview=null,this.onSitesPreview?.(null)}dispose(){this.dirtyTimeout&&(clearTimeout(this.dirtyTimeout),this.dirtyTimeout=void 0),this.onSitesPreview=void 0,this.onReadyIframe=void 0,this.onError=void 0,this.onUpdate=void 0,this.onConsoleLog=void 0,this.onConsoleClear=void 0,this.onBuildStart=void 0,this.onBuildResult=void 0,this.onRenderComplete=void 0,this.onPreviewDirty=void 0,this.unmount()}async build(){try{this.onBuildStart?.(),this.perfTracker.record("code_bundle_start");let e=this.getNode(),t=(0,S.gz)({node:e,tailwind:!0,jsxDev:this.jsxDev??!1,shadcn:this.shadcn??!1,noWrapper:this.noWrapper??!1,bundleFlags:{attachJSXSource:!!(0,h.kc)().bake_m2d_roundtrip,pointAndEdit:"make"===this.sitePreviewIframeManager.productType&&!!(0,h.kc)().bake_point_and_edit}}),n=await t.finally(()=>this.perfTracker.record("code_bundle_stop"));this.codeBundle=n,this.codeBehaviorTargetNodeId&&await this.validateCodeBehaviorDataForCodeBundle(),this.referencedWebsiteBundle=await U({instanceSwapPropertyGuids:this.instanceSwapPropertyGuids,nodeId:this.nodeId,codeBehaviorTargetNodeId:this.codeBehaviorTargetNodeId,perfTracker:this.perfTracker});let i=D.z6l?.getCodeLibrarySizeMetadata();return this.perfTracker.setBuildMetadata({isBuildSuccessful:!0,bundleJsLength:n?.esm?.length,bundleCssLength:n?.css?.length,...i??{}}),this.onConsoleClear?.(),n&&this.onBuildResult?.(n),!0}catch(t){this.onConsoleClear?.(),this.onError?.(t,S.S4.BUILD),this.previewUpdateTracker.handleBuildError(t instanceof Error?t:Error(String(t))),this.isPreviewDirty&&(this.isPreviewDirty=!1,this.onPreviewDirty?.(this.isPreviewDirty));let e=D.z6l?.getCodeLibrarySizeMetadata();return this.perfTracker.setBuildMetadata({isBuildSuccessful:!1,errorMessage:t.toString?.(),...e??{}}),!1}}async render(){let e=this.codeBundle;if(!this.readyIframe||!this.sitesPreview)return"not_ready";if(!e||!this.referencedWebsiteBundle)return"invalid_build";let t=e.esm,n=e.css;if(!t||!this.codeExportName)return"invalid_build";this.isPreviewDirty&&(this.isPreviewDirty=!1,this.onPreviewDirty?.(this.isPreviewDirty)),this.perfTracker.record("render_start");try{let i=await this.sitesPreview?.renderComponent({nodeId:this.nodeId,entrypoint:{type:"local",code:t},codeBuildId:e.codeBuildId,codeBehaviorTargetNodeId:this.codeBehaviorTargetNodeId,codeExportName:this.codeExportName,props:this.props??{},styles:n,withBaseStyles:this.withBaseStyles,instanceSwapPropertyGuids:this.instanceSwapPropertyGuids,referencedWebsiteBundle:this.referencedWebsiteBundle,activeBreakpoint:this.activeBreakpoint,clipContents:this.clipContents,allowScaling:this.allowScaling,scaleLinearly:this.scaleLinearly,width:this.width,height:this.height});this.previewUpdateTracker.setSourceCodeHash((0,m.N)().getSourceCodeHash()),this.previewUpdateTracker.completeRender(i),i.success?this.onRenderComplete?.({type:y.m.SUCCESS,timedOut:i.timedOut||!1}):(this.onError?.(i.error,S.S4.RUNTIME),this.onRenderComplete?.({type:y.m.FAILED,timedOut:!1,phase:i.phase}))}catch(t){let e=t instanceof Error?t:Error(String(t));this.previewUpdateTracker.setSourceCodeHash((0,m.N)().getSourceCodeHash()),this.previewUpdateTracker.completeRender({success:!1,error:e,phase:"render"}),this.onError?.(e,S.S4.RUNTIME),this.onRenderComplete?.({type:y.m.FAILED,timedOut:!1,phase:"render"})}return this.perfTracker.record("render_stop"),"rendered"}forceRefresh(){this.iframeElement=null,this.requiresBuild=!0}updateOptions(e){let t=new Set(this.imagePropAssetHashes),n=e.imagePropAssetHashes?.every(e=>t.has(e));this.requiresBuild=this.requiresBuild||this.buildNumber!==e.buildNumber||this.nodeId!==e.nodeId||!(0,P.c2)(this.instanceSwapPropertyGuids,e.instanceSwapPropertyGuids)||!n||void 0!==this.codeBehaviorTargetNodeId&&!(0,P.c2)(this.props,e.props),this.requiresConsoleClear=this.nodeId!==e.nodeId,this.requiresBuild&&!this.isPreviewDirty&&(this.isPreviewDirty=!0,this.onPreviewDirty?.(this.isPreviewDirty)),this.sitesPreview&&e.onSitesPreview&&!this.onSitesPreview&&e.onSitesPreview(this.sitesPreview),this.onSitesPreview=e.onSitesPreview,this.onReadyIframe=e.onReadyIframe,this.onPreviewDirty=e.onPreviewDirty,this.onError=e.onError,this.onUpdate=e.onUpdate,this.onConsoleLog=e.onConsoleLog,this.onConsoleClear=e.onConsoleClear,this.onBuildStart=e.onBuildStart,this.onBuildResult=e.onBuildResult,this.onRenderComplete=e.onRenderComplete;let i=e=>({buildNumber:e.buildNumber,nodeId:e.nodeId,codeBehaviorTargetNodeId:e.codeBehaviorTargetNodeId,codeExportName:e.codeExportName,props:e.props,instanceSwapPropertyGuids:e.instanceSwapPropertyGuids,imagePropAssetHashes:e.imagePropAssetHashes,activeBreakpoint:e.activeBreakpoint,clipContents:e.clipContents,withBaseStyles:e.withBaseStyles,jsxDev:e.jsxDev,shadcn:e.shadcn,noWrapper:e.noWrapper,allowScaling:e.allowScaling,scaleLinearly:e.scaleLinearly,width:e.width,height:e.height,designToCodeGenerating:e.designToCodeGenerating,chatMessageInProgress:e.chatMessageInProgress});JSON.stringify(i(this))!==JSON.stringify(i(e))&&(this.buildNumber=e.buildNumber,this.nodeId=e.nodeId,this.codeBehaviorTargetNodeId=e.codeBehaviorTargetNodeId,this.codeExportName=e.codeExportName,this.props=e.props,this.instanceSwapPropertyGuids=e.instanceSwapPropertyGuids,this.imagePropAssetHashes=e.imagePropAssetHashes,this.activeBreakpoint=e.activeBreakpoint,this.clipContents=e.clipContents,this.withBaseStyles=e.withBaseStyles,this.jsxDev=e.jsxDev,this.shadcn=e.shadcn,this.noWrapper=e.noWrapper,this.allowScaling=e.allowScaling,this.scaleLinearly=e.scaleLinearly,this.width=e.width,this.height=e.height,this.designToCodeGenerating=e.designToCodeGenerating,this.chatMessageInProgress=e.chatMessageInProgress,this.requiresConsoleClear&&this.onConsoleClear?.(),this.dirtyTimeout&&(clearTimeout(this.dirtyTimeout),this.dirtyTimeout=void 0),this.chatMessageInProgress&&this.previewUpdateTracker.cancelCurrentUpdate(),!this.requiresBuild||this.designToCodeGenerating||this.chatMessageInProgress?this.render():(this.previewUpdateTracker.bundleChanged({isMakeEmpty:(0,H.A)((0,m.N)())}),this.dirtyTimeout=setTimeout(()=>{this.dirtyTimeout=void 0,this.requiresBuild=!1,this.build().then(e=>e?this.readyIframe?this.render():(this.shouldRenderWhenIframeReady=!0,"not_ready"):"invalid_build").then(()=>{this.perfTracker.trackFigmentEvent()})},1e3)))}getNode(){if(!this.nodeId)throw Error("Node ID is not set");let e=(0,a.UN)().get(this.nodeId);if(!e||!e.isAlive)throw Error("Node no longer exists in the scene");return e}async validateCodeBehaviorDataForCodeBundle(){if(this.sitesPreview&&this.codeBundle?.esm){let{exportedCodeComponents:e}=await this.sitesPreview.analyzeCodeFile({code:this.codeBundle.esm,codeBuildId:this.codeBundle.codeBuildId});for(let t of e)t.hasInteractionDataSymbol&&(0,z.K)(t.codeBehaviorData)}}}var K=n(46629),W=n.n(K);let q=5*6e4;class X{constructor({fileKey:e,surface:t,planTier:n}){this.fileKey=null,this.firstUpdate=!0,this.currentUpdate=null,this.nextTriggeredUpdateReason=null,this.fileKey=e,this.surface=t,this.planTier=n}get codeLibraryFormat(){return(0,R.ft)()}cancelCurrentUpdate(){this.resetCurrentUpdate()}triggerReload(e){this.nextTriggeredUpdateReason=e}bundleChanged({isMakeEmpty:e}){if(this.currentUpdate)return;let t=this.nextTriggeredUpdateReason;this.nextTriggeredUpdateReason=null,this.currentUpdate={updateType:this.firstUpdate?"initial-live":t||"bundle-change-triggered-rerender",startedAt:new Date,isMakeEmpty:e,triggeredUpdateTimeoutId:setTimeout(()=>{this.trackMetricFailure("triggered-update-timeout"),this.resetCurrentUpdate()},q)},this.firstUpdate=!1}handleBuildError(e){this.currentUpdate&&this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"build",errorMessage:e.message},{completedAt:new Date})}setSourceCodeHash(e){this.currentUpdate&&(this.currentUpdate.sourceCodeHash=e)}completeRender(e){if(this.currentUpdate){if(e.success)this.flushCurrentUpdate({success:!0,hitRenderTimeout:e.timedOut??!1,failedStep:void 0},{completedAt:new Date});else switch(e.phase){case"import":this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"build",errorMessage:e.error.message},{completedAt:new Date});break;case"render":this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"render",errorMessage:e.error.message},{completedAt:new Date});break;default:(0,p.S9)(e.phase,null,"Unknown iframe render result phase"),this.flushCurrentUpdate({success:!1,hitRenderTimeout:!1,failedStep:"unknown"},{completedAt:new Date})}}}flushCurrentUpdate(e,{completedAt:t}){if(!this.currentUpdate)return;if(!this.currentUpdate.updateType){this.trackMetricFailure("missing-update-type"),this.resetCurrentUpdate();return}let n=t.getTime()-this.currentUpdate.startedAt.getTime(),i=(()=>{switch(this.currentUpdate.updateType){case"initial-cached":return"initial-cached";case"initial-live":return"initial-live";case"hmr-triggered-update":return"hmr-update";case"hmr-triggered-reload":case"user-triggered-reload":case"user-error-triggered-reload":case"error-recovery-triggered-reload":case"bundle-change-triggered-rerender":case"initial-transition-to-live":return"reload";default:return(0,p.S9)(this.currentUpdate.updateType,"reload","Unknown update type")}})();g.az.trackDefinedMetric("foundry.preview_update",{...e,updateType:this.currentUpdate.updateType,isMakeEmpty:this.currentUpdate.isMakeEmpty,fileKey:this.fileKey??void 0,surface:this.surface,engine:"esbuild",codeLibraryFormat:this.codeLibraryFormat.toString(),sourceCodeHash:this.currentUpdate.sourceCodeHash,planTier:this.planTier}),g.az.trackDefinedMetric("foundry.preview_update_latency",{...W()(e,["success","hitRenderTimeout"]),updateType:i,isMakeEmpty:this.currentUpdate.isMakeEmpty,fileKey:this.fileKey??void 0,surface:this.surface,engine:"esbuild",codeLibraryFormat:this.codeLibraryFormat.toString(),durationMs:n??0,planTier:this.planTier}),this.resetCurrentUpdate()}trackMetricFailure(e){g.az.trackDefinedEvent("foundry.preview_update_tracking_failure",{fileKey:this.fileKey??void 0,surface:this.surface,reason:e,engine:"esbuild",codeLibraryFormat:this.codeLibraryFormat.toString(),planTier:this.planTier})}resetCurrentUpdate(){this.currentUpdate?.triggeredUpdateTimeoutId&&clearTimeout(this.currentUpdate.triggeredUpdateTimeoutId),this.currentUpdate=null}}var Y=n(693613),J=n(379141),Z=n(276571),Q=n(613472),$=n(805242),ee=n(495004),et=n(125578),en=n(20002),ei=n(563188),er=n(888903),ea=n(230135),es=n(456556),eo=n(676670),el=n(66945),ed=n(8128),ec=n(942356),eu=n(389252),em=n(771740),ep=n(116223),eh=n(994572),ef=n(234055),eg=n(323981),ex=n(421914),e_=n(236410),ey=n(213214),eb=n(250730),ev=n(432318),eC=n(890049);function eE({children:e,menuRef:t}){let n=(0,eb.Mj)(t);return(0,i.jsx)("div",{"data-is-figmake":"true",className:eC.xE,children:(0,i.jsx)(ev.W1,{menuRef:n,darkModePreferred:!0,editorTheme:"seascape",children:e})})}let ew=r.createContext(null);function ek(){let e=r.useContext(ew);if(!e)throw Error("useToolbarContext must be used within a ToolbarProvider");return e}function eT({children:e,...t}){return(0,i.jsx)(ew.Provider,{value:t,children:e})}var ej=n(943735),eS=n(497503),eI=n(691661);function eA({target:e,children:t}){let{directManipulationEditor:n}=ek(),[a,s]=(0,et.XH)(n),{getContainerProps:o,getTriggerProps:l}=eS.fP({type:"menu",isOpen:a,onOpenChange:s,softDismiss:!0,placement:"bottom",middleware:[(0,ej.cY)({mainAxis:16}),(0,ej.UU)({padding:16}),(0,ej.BN)()]}),d=r.cloneElement(e,{...l()});return(0,i.jsxs)("div",{children:[(0,i.jsx)(eI.R,{children:d}),(0,i.jsx)(eS.mc,{...o(),children:t})]})}let eN={scrubbableInputIconWrapper:{kfzvcC:"x47corl",$$css:!0}},eM=["border-radius","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","border-start-start-radius","border-start-end-radius","border-end-start-radius","border-end-end-radius"];function eR(){let{directManipulationEditor:e}=ek(),[t]=(0,et.XH)(e);return(0,i.jsx)(eA,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.corner_radius"),tooltip:(0,J.t)("figmake.toolbar.corner_radius"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:t,children:(0,i.jsx)(eu.a,{})}),children:(0,i.jsx)(eP,{})})}function eP(){let{classNameEditingController:e,directManipulationEditor:t}=ek(),n=(0,en.wA)(),a=(0,f.md)(t.selectedElementComputedStylesWithLocalEdits),o=parseInt(a["border-top-left-radius"]??"0",10),l=parseInt(a["border-top-right-radius"]??"0",10),d=parseInt(a["border-bottom-left-radius"]??"0",10),c=parseInt(a["border-bottom-right-radius"]??"0",10),u=r.useMemo(()=>({"top-left":o,"top-right":l,"bottom-left":d,"bottom-right":c}),[o,l,d,c]),m=(0,et.zV)(t,eM),p=r.useCallback(()=>{e.resetClassNamesForPropertiesAndCommitToCode(eM,"border-radius")},[e]),h=u["top-left"]===u["top-right"]&&u["top-left"]===u["bottom-left"]&&u["top-left"]===u["bottom-right"],g=h?u["top-left"]:ex.oV,[x,_]=r.useState(!h),y=r.useMemo(()=>(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltip:(0,J.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltipType:e_.Ib.TEXT,isActive:x,onClick:()=>_(e=>!e),children:(0,i.jsx)(em.Q,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),[x]),b=r.useCallback((t,n)=>{let i=function(e){let t=e["top-left"]===e["top-right"],n=e["bottom-left"]===e["bottom-right"],i=e["top-left"]===e["bottom-left"],r=e["top-right"]===e["bottom-right"];if(e["top-left"]===e["top-right"]&&e["top-left"]===e["bottom-left"]&&e["top-left"]===e["bottom-right"]){let t=e["top-left"],n=`${t}px`;return[{className:`rounded-[${t}px]`,cssRules:[{property:"border-radius",propertiesExpandedFromShorthand:["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius"],value:n,computedStylesValue:n}]}]}return t&&n?["top","bottom"].map(t=>{let n=e[`${t}-left`],i=`${n}px`,r=t[0];return{className:`rounded-${r}-[${n}px]`,cssRules:[{property:`border-${t}-left-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i},{property:`border-${t}-right-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}}):i&&r?["left","right"].map(t=>{let n=e[`top-${t}`],i=`${n}px`,r=t[0];return{className:`rounded-${r}-[${n}px]`,cssRules:[{property:`border-top-${t}-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i},{property:`border-bottom-${t}-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}}):Object.entries(e).map(([e,t])=>{let n=e.split("-").map(e=>e[0]).join(""),i=`${t}px`;return{className:`rounded-${n}-[${t}px]`,cssRules:[{property:`border-${e}-radius`,propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}})}(t);e.addClassesToInspectedElements(i,n,"border-radius")},[e]),v=r.useCallback((e,t)=>{b({...u,...e},t)},[u,b]),C=r.useMemo(()=>(0,i.jsx)(ec.$n,{variant:"secondary",disabled:!m,onClick:p,children:(0,J.t)("figmake.toolbar.reset")}),[m,p]);return(0,i.jsx)(eE,{children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z x9f619 x1dz1jew",children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x167g77z",children:x?(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 xm8sf7i",children:[(0,i.jsx)(ey.gq,{value:u["top-left"],dispatch:n,onValueChange:(e,t)=>{v({"top-left":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.top_left"),children:(0,i.jsx)(eu.a,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:u["top-right"],dispatch:n,onValueChange:(e,t)=>{v({"top-right":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.top_right"),children:(0,i.jsx)(ep.$,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),y,C,(0,i.jsx)(ey.gq,{value:u["bottom-left"],dispatch:n,onValueChange:(e,t)=>{v({"bottom-left":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.bottom_left"),children:(0,i.jsx)(eh.w,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:u["bottom-right"],dispatch:n,onValueChange:(e,t)=>{v({"bottom-right":e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.bottom_right"),children:(0,i.jsx)(ef.t,{...s.Ay.props(eN.scrubbableInputIconWrapper)})})]}):(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 x1yv05lk",children:[(0,i.jsx)(ey.gq,{bigNudgeAmount:10,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius"),"data-tooltip-type":e_.Ib.TEXT,dispatch:n,onValueChange:(e,t)=>{v({"top-left":e,"top-right":e,"bottom-left":e,"bottom-right":e},t)},smallNudgeAmount:1,value:g,children:(0,i.jsx)(em.Q,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),y,C]})})})})}var eO=n(847923),eD=n(545593),eL=n(185044),eF=n(212198),eB=n(603163),eU=n(748765),eV=n(592545),eH=n(291027);function ez(e){let{classNameEditingController:t,directManipulationEditor:n}=ek(),a=(0,f.md)(n.selectedElementComputedStylesWithLocalEdits),[s]=(0,et.XH)(n),o=a[e.property],l=r.useMemo(()=>{let t;if(o&&!t)try{let e=(0,eD.Ay)(o).rgba();t={type:"SOLID",color:{r:e[0]/255,g:e[1]/255,b:e[2]/255,a:e[3]},opacity:e[3]}}catch(t){g.az.trackDefinedEvent("figmake.color_control_parse_error",{color:o,property:e.property,error:t instanceof Error?t.message:String(t)})}return t},[e.property,o]),d=r.useCallback((n,i=eU.zk.YES)=>{let r="bg-";"color"===e.property?r="text-":"border-color"===e.property&&(r="border-");let a=Math.round(255*n.r),s=Math.round(255*n.g),o=Math.round(255*n.b),l=1===n.a?`rgb(${a}, ${s}, ${o})`:`rgba(${a}, ${s}, ${o}, ${n.a})`,d=`${r}[${l.replace(/ /g,"")}]`;t.addClassesToInspectedElements([{className:d,cssRules:[{property:e.property,propertiesExpandedFromShorthand:[],value:l,computedStylesValue:l}]}],i,e.property)},[t,e.property]),c=function(e){switch(e){case"color":return(0,J.t)("figmake.toolbar.font_color");case"background-color":return(0,J.t)("figmake.toolbar.background_color");case"border-color":return(0,J.t)("figmake.toolbar.border_color");default:(0,p.xb)(e)}}(e.property);return(0,i.jsx)(eA,{target:(0,i.jsx)(eg.ar,{"aria-label":c,tooltip:c,tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:s,children:(0,i.jsx)(eL.A,{paint:l})}),children:(0,i.jsx)(eG,{onColorChange:d,paint:l})})}function eG({paint:e,onColorChange:t}){return(0,i.jsx)(eE,{children:(0,i.jsx)(eW,{paint:e,onChange:t})})}let eK={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};function eW({paint:e,onChange:t}){let n=e?(0,ex.gl)(e)?eK:e:eK,a=(0,eB.Ou)(n),s=(0,eF.Ku)(),{currentTool:o,dropdownShown:l}=(0,eO.R)(e=>({currentTool:e.mirror.appModel.currentTool,dropdownShown:e.dropdownShown})),d=(0,en.wA)(),c=r.useRef(null);return a?(0,i.jsx)("div",{className:eH.n1,ref:c,children:(0,i.jsx)(eV.S7,{canAcceptStyles:!1,canAcceptVariables:!1,color:a.color,colorFormat:s,containerRef:c,currentTool:o,dispatch:d,dropdownShown:l,dropperDisabled:!0,onColorChange:t,theme:"dark"})}):null}var eq=n(33877),eX=n(563225),eY=n(854225),eJ=n(798913),eZ=n(309742),eQ=n(27414),e$=n(407393),e0=n(995064),e1=n(862390),e2=n(666534),e5=n(725511),e4=n(604687),e3=n(951312),e6=n(292066),e7=n(943360);let e9=r.forwardRef(function({children:e,iconSuffix:t,...n},r){return(0,i.jsx)(e7.E,{ref:r,...n,...{0:{className:"xxk0z11 x19y5rnk x16qho6y xv2f06h xfn42iu xng3xce x1r7ld26 x8rdmch xctkrei"},2:{className:"xxk0z11 x19y5rnk xu5wzci xfn42iu xng3xce x1r7ld26 x8rdmch xctkrei"},1:{className:"xxk0z11 x19y5rnk x16qho6y xv2f06h xfn42iu xng3xce x1r7ld26 x8rdmch"},3:{className:"xxk0z11 x19y5rnk xu5wzci xfn42iu xng3xce x1r7ld26 x8rdmch"}}[!!n["aria-expanded"]<<1|!!t<<0],children:(0,i.jsxs)("div",{className:"xz16r55 x78zum5 x6s0dn4",children:[e,t]})})});var e8=n(526136),te=n(578148),tt=n(834163);let tn="rev-font-family-picker";function ti(){let{container:e,classNameEditingController:t,directManipulationEditor:n,componentPreview:a}=ek(),s=(0,f.md)(n.selectedElementComputedStylesWithLocalEdits),[l,d]=(0,et.XH)(n),c=r.createRef(),u=(0,en.d4)(e=>e.fonts),m=r.useMemo(()=>(0,e5.pn)(u),[u]),p=(0,en.wA)(),h=(0,e2.Xo)(),g="sans-serif",x=s["font-family"],_=x?(0,e8.m$)(x,g):g,y=Object.keys(u).some(e=>e.toLocaleLowerCase()===_?.toLocaleLowerCase())?_:"sans-serif",b=r.useCallback((t,n)=>{if(c.current){let{x:i,y:r}=(0,e4.VZ)(c.current,n),a=e.getBoundingClientRect();i<a.left?i=a.left:i+n>a.left+e.clientWidth&&(i=a.left+e.clientWidth-n),p(eQ.u1({id:t,initialX:i,initialY:r+16}))}},[e,p,c]),v=r.useCallback(()=>{p(eQ.XE())},[p]),C=r.useCallback(()=>{d(!l),l?v():b(tn,300)},[v,l,b,d]);(0,eZ.h)(()=>{h&&h.id===tn&&v()}),(0,r.useEffect)(()=>{(!h||h.id!==tn)&&l&&d(!1)},[l,h,d]);let E=r.useRef(null);(0,tt.Y)(v,{closeOnEsc:!0,ignore:e=>!!(E.current&&E.current.contains(e))});let w=r.useRef(null),k=r.useCallback(async(e,n,i=eU.zk.YES)=>{let r=(0,e8.DY)(e,u);if(r){let n;if(r.fontSource===eY.jXp.GOOGLE){let e=`${te.FF}/${r.fontId}`;n={family:r.fontFamily,style:r.styleName,italic:r.style?.italic??!1,source:"url",url:e}}else{let e=o.D.getState(),t=new Blob([await (0,e$.M1)({source:r.fontSource,id:r.fontId,postscriptName:r.style.postscript,fileKey:e.openFile?.key,teamId:e.currentTeamId,orgId:e.currentUserOrgId})],{type:"font/woff2"});n={family:r.fontFamily,style:r.styleName,italic:r.style?.italic??!1,source:"blob",blob:t}}a.sendMessage("injectFontLoadingCSS",n),t.addClassesToInspectedElements([{className:`font-[${e.replace(/ /g,"_")}]`,cssRules:[{property:"font-family",propertiesExpandedFromShorthand:[],value:e,computedStylesValue:e}]}],i,"font-family"),(0,e1.dZ)(i)&&eJ.l7.user("direct-manipulation",()=>{(0,e8.HL)(r,w)})}},[t,a,u]),T=(0,e6.UG)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eI.R,{children:(0,i.jsx)(e9,{"aria-label":(0,J.t)("figmake.toolbar.font_family"),iconSuffix:(0,i.jsx)(eX.O,{}),onClick:C,ref:c,children:(0,i.jsx)("div",{className:"x1f4nttd xuxw1ft xb3r6kr xlyipyv x1dmp6jm",children:y})})}),(0,i.jsx)("div",{ref:E,className:"x1f4nttd x11yfylt",children:(0,i.jsx)(e3.Cn,{currentFont:y,dispatch:p,dropdown:null,fonts:u,googleFontPreviews:T,onFontChange:k,pickerId:tn,pickerShown:h,recordingKey:tn,restrictedFontSet:e0.Qr.GOOGLE_FONTS,selectedNodeIds:[],versionsForStyles:m})})]})}var tr=n(418379),ta=n(75962),ts=n(231925),to=n(415315),tl=n(24867);let td={kKwaWg:"x1e87kdn",$$css:!0},tc={imagePreviewWrapper:{kVAEAm:"x1n2onr6",kzqmXN:"x1oysuqx",kZKoxP:"xhjk10j",k1xSpc:"x78zum5",kaIpWk:"x1sxf85j",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",kVAM5u:"x7z60cl",kjj79g:"xl56j7k",kGNEyG:"x6s0dn4",kogj98:"x1hlb6i2",kSiTet:"x197sbye",$$css:!0},imagePreviewWrapperWithBackground:e=>[td,{"--x-backgroundImage":`url('${e}')`}]};function tu(){let{imageSwapEnabled:e,directManipulationEditor:t}=ek(),n=(0,f.md)(t.selectedElementInfoAtom),[a]=(0,et.XH)(t),[s,o]=r.useState(),l=s??n?.thumbnailSrc??n?.imgSrc,d=e?{}:{"--color-icon":Y.Tj.iconDisabled};return(0,i.jsx)(eA,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.image"),tooltip:(0,J.t)("figmake.toolbar.image"),tooltipType:e_.Ib.TEXT,showCaret:!0,caretStyle:d,isActive:a,disabled:!e,children:(0,i.jsx)("div",{className:"xvy4d1p x78zum5 xl56j7k x6s0dn4 xy3p2pi x9f619 xb3r6kr x18xcxx1 xmkeg23 x1y0btm7 x1co876m",children:l?(0,i.jsx)(ta.oW,{src:l,alt:(0,J.t)("figmake.toolbar.image"),...{0:{className:"xh8yej3 xl1xv1r x1y5e3q9"},1:{className:"xh8yej3 xl1xv1r x1y5e3q9 xifi7vn x1ks1olk"}}[!e<<0]}):(0,i.jsx)(tr.T,{...{0:{},1:{className:"xge78cn"}}[!e<<0]})})}),children:(0,i.jsx)(tm,{currentImage:l,setCurrentImage:o})})}function tm({currentImage:e,setCurrentImage:t}){let{imageEditingController:n,directManipulationEditor:a}=ek(),o=r.useRef(null),l=(0,r.useCallback)(async e=>{if(e.image){let i=await n.updateImage(e,a.bundledSourceCode,a.codeFileNodeIdsWithRecentlyAddedImageAssetImports,"upload");if(i.success)for(let n of(t(e.image),i.modifiedCodeFileNodeIds))a.codeFileNodeIdsWithRecentlyAddedImageAssetImports.add(n)}},[n,t,a]),d=r.useCallback(async e=>{let t=e.target.files?.[0];t&&(await (0,tl.zF)(t,l),o.current&&(o.current.value=""))},[l]);return(0,i.jsxs)(eE,{children:[(0,i.jsxs)("div",{...s.Ay.props(tc.imagePreviewWrapper,tc.imagePreviewWrapperWithBackground((0,ts.A)())),children:[(0,i.jsx)("input",{type:"file",ref:o,accept:to.xp.join(","),onChange:d,className:"x1s85apg"}),(0,i.jsx)(ta.oW,{src:e,alt:(0,J.t)("figmake.toolbar.upload_alt"),className:"x193iq5w xmz0i5r x19kjcj4 x1tbiz1a x1xsqp64 xiy17q3"})]}),(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c xur7f20 x1hc1fzr x78zum5 xl56j7k x1o2pa38 x6s0dn4",children:(0,i.jsx)(ec.$n,{variant:"primary",onClick:()=>{o.current?.click()},type:"submit",children:(0,J.t)("figmake.toolbar.upload")})})]})}var tp=n(865702),th=n(727640),tf=n(733200),tg=n(13782),tx=n(394738);let t_={disabledIcon:{"--color-icon":"xz8z4lq",$$css:!0},selectedIcon:{"--color-icon":"x1aue78i",kWkggS:"xcr9a89",kaIpWk:"x4pvk5x",kGVxlE:"xx9uh04",$$css:!0}};function ty({value:e,setValue:t,disabled:n}){let r=(0,i.jsx)("div",{...s.Ay.props(n?t_.disabledIcon:"style"===e?t_.selectedIcon:t_.disabledIcon),children:(0,i.jsx)(tg.J,{})}),a=(0,i.jsx)("div",{...s.Ay.props(n?t_.disabledIcon:"prompt"===e?t_.selectedIcon:t_.disabledIcon),children:(0,i.jsx)(tx.K,{})});return(0,i.jsx)(eI.R,{children:(0,i.jsxs)(th.bL,{value:e,onChange:n?tp.lQ:t,legend:(0,i.jsx)(tf.q,{children:(0,J.t)("figmake.toolbar.toggle_style")}),children:[(0,i.jsx)(th.c$,{value:"style",icon:r,"aria-label":n?(0,J.t)("figmake.toolbar.classnameEditingDisabled"):(0,J.t)("figmake.toolbar.toggle_style")}),(0,i.jsx)(th.c$,{value:"prompt",icon:a,"aria-label":n?(0,J.t)("figmake.toolbar.classnameEditingDisabled"):(0,J.t)("figmake.toolbar.toggle_prompt")})]})})}var tb=n(299609);function tv(){let{directManipulationEditor:e}=ek(),t=(0,f.md)(e.editingSnippetAtom,{deferToFrame:!0}).snippet,n=(0,r.useCallback)(()=>{e.goToSource()},[e]);return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.goToSource"),tooltip:(0,J.t)("figmake.toolbar.goToSource"),tooltipType:e_.Ib.TEXT,onClick:n,disabled:!t,children:(0,i.jsx)(tb.I,{})})})}var tC=n(139783),tE=n(902208),tw=n(141934),tk=n(984348),tT=n(503563),tj=n(962255),tS=n(828530),tI=n(837721);function tA(){let{directManipulationEditor:e}=ek(),[t]=(0,et.XH)(e);return(0,i.jsx)(eA,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.spacing"),tooltip:(0,J.t)("figmake.toolbar.spacing"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:t,children:(0,i.jsx)(tC.R,{})}),children:(0,i.jsx)(tR,{})})}let tN=["padding-top","padding-right","padding-bottom","padding-left","padding-inline-start","padding-inline-end","padding-block-start","padding-block-end"],tM=["margin-top","margin-right","margin-bottom","margin-left","margin-inline-start","margin-inline-end","margin-block-start","margin-block-end"];function tR(){let{classNameEditingController:e,directManipulationEditor:t}=ek(),n=(0,f.md)(t.selectedElementComputedStylesWithLocalEdits),a=parseInt(n["padding-inline-start"]??"0",10),o=parseInt(n["padding-inline-end"]??"0",10),l=parseInt(n["padding-block-start"]??"0",10),d=parseInt(n["padding-block-end"]??"0",10),c=parseInt(n["margin-inline-start"]??"0",10),u=parseInt(n["margin-inline-end"]??"0",10),m=parseInt(n["margin-block-start"]??"0",10),p=parseInt(n["margin-block-end"]??"0",10),h={left:a,right:o,top:l,bottom:d},g={left:c,right:u,top:m,bottom:p},x=h.left===h.right,_=h.top===h.bottom,y=x?h.left:ex.oV,b=_?h.top:ex.oV,v=g.left===g.right,C=g.top===g.bottom,E=v?g.left:ex.oV,w=C?g.top:ex.oV,[k,T]=r.useState(!x||!_),[j,S]=r.useState(!v||!C),I=(0,et.zV)(t,tN),A=r.useCallback(()=>{e.resetClassNamesForPropertiesAndCommitToCode(tN,"padding")},[e]),N=(0,et.zV)(t,tM),M=r.useCallback(()=>{e.resetClassNamesForPropertiesAndCommitToCode(tM,"margin")},[e]),R=r.useMemo(()=>(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.padding.individual_paddings"),tooltip:(0,J.t)("figmake.toolbar.padding.individual_paddings"),tooltipType:e_.Ib.TEXT,isActive:k,onClick:()=>T(e=>!e),children:(0,i.jsx)(tE.s,{})}),[k]),P=r.useMemo(()=>(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.margin.individual_margins"),tooltip:(0,J.t)("figmake.toolbar.margin.individual_margins"),tooltipType:e_.Ib.TEXT,isActive:j,onClick:()=>S(e=>!e),children:(0,i.jsx)(tE.s,{})}),[j]),O=r.useCallback((t,n,i)=>{let r=function(e,t){let n=t.left===t.right,i=t.top===t.bottom,r=n&&i&&t.left===t.top,a="padding"===e?"p":"m";if(r){let n=t.left,i=`${n}px`;return[{className:`${a}-[${n}px]`,cssRules:[{property:e,propertiesExpandedFromShorthand:[`${e}-block-start`,`${e}-block-end`,`${e}-inline-start`,`${e}-inline-end`],value:i,computedStylesValue:i}]}]}return n&&i?["x","y"].map(n=>{let i="x"===n,r=i?t.left:t.top,s=`${r}px`;return{className:`${a}${n}-[${r}px]`,cssRules:[{property:i?`${e}-inline-start`:`${e}-block-start`,propertiesExpandedFromShorthand:[],value:s,computedStylesValue:s},{property:i?`${e}-inline-end`:`${e}-block-end`,propertiesExpandedFromShorthand:[],value:s,computedStylesValue:s}]}}):["top","right","bottom","left"].map(n=>{let i=t[n],r=`${i}px`,s=n[0];return{className:`${a}${s}-[${i}px]`,cssRules:[{property:`${e}-${n}`,propertiesExpandedFromShorthand:[],value:r,computedStylesValue:r}]}})}(t,n);e.addClassesToInspectedElements(r,i,t)},[e]),D=r.useCallback((e,t,n,i)=>{O(n,{...e,...t},i)},[O]),L=(0,en.wA)();return(0,i.jsx)(eE,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z xafpxmx x9f619",children:[(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsxs)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:[(0,J.t)("figmake.toolbar.padding"),(0,i.jsx)(ec.$n,{variant:"secondary",disabled:!I,onClick:A,children:(0,J.t)("figmake.toolbar.reset")})]}),k?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(ey.gq,{value:h.left,dispatch:L,onValueChange:(e,t)=>{D(h,{left:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.padding.left"),children:(0,i.jsx)(tT.R,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:h.top,dispatch:L,onValueChange:(e,t)=>{D(h,{top:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.padding.top"),children:(0,i.jsx)(tj.z,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),R,(0,i.jsx)(ey.gq,{value:h.right,dispatch:L,onValueChange:(e,t)=>{D(h,{right:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.padding.right"),children:(0,i.jsx)(tS.M,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:h.bottom,dispatch:L,onValueChange:(e,t)=>{D(h,{bottom:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.padding.bottom"),children:(0,i.jsx)(tI.v,{...s.Ay.props(eN.scrubbableInputIconWrapper)})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(ey.gq,{value:y,dispatch:L,onValueChange:(e,t)=>{D(h,{left:e,right:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.padding.horizontal"),children:(0,i.jsx)(tw.y,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:b,dispatch:L,onValueChange:(e,t)=>{D(h,{top:e,bottom:e},"padding",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.padding.vertical"),children:(0,i.jsx)(tk.K,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),R]})]}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsxs)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:[(0,J.t)("figmake.toolbar.margin"),(0,i.jsx)(ec.$n,{variant:"secondary",disabled:!N,onClick:M,children:(0,J.t)("figmake.toolbar.reset")})]}),j?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(ey.gq,{value:g.left,dispatch:L,onValueChange:(e,t)=>{D(g,{left:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.margin.left"),children:(0,i.jsx)(tT.R,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:g.top,dispatch:L,onValueChange:(e,t)=>{D(g,{top:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.margin.top"),children:(0,i.jsx)(tj.z,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),P,(0,i.jsx)(ey.gq,{value:g.right,dispatch:L,onValueChange:(e,t)=>{D(g,{right:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.margin.right"),children:(0,i.jsx)(tS.M,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:g.bottom,dispatch:L,onValueChange:(e,t)=>{D(g,{bottom:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.margin.bottom"),children:(0,i.jsx)(tI.v,{...s.Ay.props(eN.scrubbableInputIconWrapper)})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(ey.gq,{value:E,dispatch:L,onValueChange:(e,t)=>{D(g,{left:e,right:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.margin.horizontal"),children:(0,i.jsx)(tw.y,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),(0,i.jsx)(ey.gq,{value:w,dispatch:L,onValueChange:(e,t)=>{D(g,{top:e,bottom:e},"margin",t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.margin.vertical"),children:(0,i.jsx)(tk.K,{...s.Ay.props(eN.scrubbableInputIconWrapper)})}),P]})]})]})})}var tP=n(194061),tO=n(328289),tD=n(827628),tL=n(698387),tF=n(464799);function tB(){let{classNameEditingController:e,directManipulationEditor:t}=ek(),n=(0,f.md)(t.selectedElementComputedStylesWithLocalEdits),[a]=(0,et.XH)(t),s=r.useMemo(()=>({LEFT:{label:(0,J.t)("fullscreen.type_panel.align_left"),icon:()=>(0,i.jsx)(tP.h,{})},CENTER:{label:(0,J.t)("fullscreen.type_panel.align_center"),icon:()=>(0,i.jsx)(tO.N,{})},RIGHT:{label:(0,J.t)("fullscreen.type_panel.align_right"),icon:()=>(0,i.jsx)(tD.K,{})},JUSTIFIED:{label:(0,J.t)("inspect_panel.properties.justify"),icon:()=>(0,i.jsx)(tL.h,{})}}),[]),o=n["text-align"],l="LEFT";switch(o){case"left":default:l="LEFT";break;case"center":l="CENTER";break;case"right":l="RIGHT";break;case"justified":l="JUSTIFIED"}let d=r.useCallback(t=>{let n=t.toLowerCase();e.addClassesToInspectedElements([{className:function(){switch(t){case"LEFT":return"text-left";case"CENTER":return"text-center";case"RIGHT":return"text-right";case"JUSTIFIED":return"text-justify"}}(),cssRules:[{property:"text-align",propertiesExpandedFromShorthand:[],value:n,computedStylesValue:n}]}],eU.zk.YES,"text-align")},[e]);return(0,i.jsx)(eA,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("whiteboard.inline_menu.text_alignment"),tooltip:(0,J.t)("whiteboard.inline_menu.text_alignment"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:a,children:l?(0,ex.gl)(l)?(0,i.jsx)(tP.h,{}):s[l].icon():(0,i.jsx)(tP.h,{})}),children:(0,i.jsx)(tU,{horizontalAlignment:l,horizontalAlignmentOptions:s,updateHorizontalAlignment:d})})}function tU({horizontalAlignment:e,horizontalAlignmentOptions:t,updateHorizontalAlignment:n}){return(0,i.jsx)(eE,{children:(0,i.jsx)(tF.W,{maxColumns:4,children:(0,i.jsx)(tV,{alignment:e,alignmentOptions:t,onAlignmentChanged:e=>n(e,eU.zk.YES)})})})}function tV({alignment:e,alignmentOptions:t,onAlignmentChanged:n}){let a=r.useMemo(()=>Object.entries(t),[t]);return(0,i.jsx)(i.Fragment,{children:a.map(([t,{label:r,icon:a}])=>(0,i.jsx)(eg.ar,{"aria-label":r,isActive:(0,ex.hS)(e)&&e===t,onClick:()=>n(t),children:a()},t))})}var tH=n(291327),tz=n(543864),tG=n(704234);function tK(){let{classNameEditingController:e,directManipulationEditor:t}=ek(),n=(0,f.md)(t.selectedElementComputedStylesWithLocalEdits)["font-weight"],a=!!(n&&("bold"===n||parseInt(n,10)>600)),s=r.useCallback(()=>{let t=!a;e.addClassesToInspectedElements([{className:t?"font-bold":"font-normal",cssRules:[{property:"font-weight",propertiesExpandedFromShorthand:[],value:t?"bold":"normal",computedStylesValue:t?"700":"400"}]}],eU.zk.YES,"font-weight")},[e,a]);return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("cooper.inline_menu.bold"),tooltip:"toggle-bold",tooltipType:e_.Ib.LOOKUP,isActive:a,onClick:s,children:(0,i.jsx)(tH.j,{})})})}function tW(){let{classNameEditingController:e,directManipulationEditor:t}=ek(),n="italic"===(0,f.md)(t.selectedElementComputedStylesWithLocalEdits)["font-style"],a=r.useCallback(()=>{let t=!n,i=t?"italic":"normal";e.addClassesToInspectedElements([{className:t?"italic":"not-italic",cssRules:[{property:"font-style",propertiesExpandedFromShorthand:[],value:i,computedStylesValue:i}]}],eU.zk.YES,"font-style")},[e,n]);return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("cooper.inline_menu.italic"),tooltip:"text-toggle-italic",tooltipType:e_.Ib.LOOKUP,isActive:n,onClick:a,children:(0,i.jsx)(tz.s,{})})})}function tq(){let{classNameEditingController:e,directManipulationEditor:t}=ek(),n=(0,f.md)(t.selectedElementComputedStylesWithLocalEdits)["text-decoration"],a=n?.indexOf("underline")!==-1,s=r.useCallback(()=>{let t=!a,n=t?"underline":"none";e.addClassesToInspectedElements([{className:t?"underline":"no-underline",cssRules:[{property:"text-decoration-line",propertiesExpandedFromShorthand:[],value:n,computedStylesValue:n}]}],eU.zk.YES,"text-decoration")},[e,a]);return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("type_settings.decoration.underline"),tooltip:"text-toggle-underline",tooltipType:e_.Ib.LOOKUP,isActive:a,onClick:s,children:(0,i.jsx)(tG.W,{})})})}var tX=n(482390),tY=n(318584),tJ=n(565699);function tZ({size:e,onSizeChanged:t}){let n=r.useRef((0,ex.gl)(e)?null:new t2(e));r.useEffect(()=>{(0,ex.gl)(e)?n.current=null:(n.current||(n.current=new t2(e)),n.current.onCurrentValueUpdated(e))},[e,n]);let a=r.useCallback(()=>{n.current&&t(n.current.prevValue())},[t,n]),s=r.useCallback(()=>{n.current&&t(n.current.nextValue())},[t,n]),o="cooperInlineMenuFontSize";return(0,i.jsxs)("div",{className:"text_size_nudge_input--nudgeInputContainer--aKKh6","data-testid":"cooper-inline-text-size-control",children:[(0,i.jsx)(e7.E,{className:"text_size_nudge_input--decrementButton--4b3ED text_size_nudge_input--nudgeButtonBase--u1ajT",onClick:a,disabled:(0,ex.gl)(e)||e<=t1,"aria-label":(0,J.t)("cooper.inline_menu.decrease_input"),recordingKey:`${o}.decrease`,children:(0,i.jsx)(tX.O,{width:16,height:16})}),(0,i.jsx)("div",{className:"text_size_nudge_input--valueDisplayContainer--7AZUU",children:(0,i.jsx)(tQ,{size:e,onSizeChanged:t,recordingKey:o})}),(0,i.jsx)(e7.E,{className:"text_size_nudge_input--incrementButton--Iszxf text_size_nudge_input--nudgeButtonBase--u1ajT",onClick:s,disabled:(0,ex.gl)(e),"aria-label":(0,J.t)("cooper.inline_menu.increase_input"),recordingKey:`${o}.increase`,children:(0,i.jsx)(tY.e,{width:16,height:16})})]})}function tQ({size:e,onSizeChanged:t,recordingKey:n}){let a=r.createRef(),[s,o]=r.useState(t$(e));return r.useEffect(()=>{o(t$(e))},[e]),(0,i.jsx)(tJ.i,{ref:a,className:"text_size_nudge_input--textSizeInput--HO01n",type:"text",value:s,recordingKey:n,onFocus:()=>{a.current?.select()},onChange:e=>{o(e.target.value)},onBlur:()=>{let n=parseFloat(s);if(isNaN(n)||n<t1){o(t$(e));return}t(parseFloat(n.toFixed(2)))},onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()}})}function t$(e){return(0,ex.gl)(e)?(0,J.t)("common.mixed"):String(Math.round(e))}let t0=[7,8,9,10,11,12,13,14,15,16,20,24,32,36,40,48,64,96,128],t1=1;class t2{constructor(e){this.currentValue=0,this.prevValueIndex=void 0,this.nextValueIndex=void 0,this.currentValue=e,this.textSizePresetsLookup={},t0.forEach((e,t)=>{this.textSizePresetsLookup[e]=t})}onCurrentValueUpdated(e){if(e<1)throw Error(`Text size cannot be less than 1, got ${e}`);this.currentValue=e;let t=this.textSizePresetsLookup[this.currentValue];if(void 0!==t){let e=t-1;this.prevValueIndex=e<0?void 0:e;let n=t+1;this.nextValueIndex=n>=t0.length?void 0:n}else{let[e,t]=this.findClosestIndices(t0,this.currentValue);this.prevValueIndex=e,this.nextValueIndex=t}}nextValue(){if(void 0!==this.prevValueIndex&&void 0!==this.nextValueIndex)return t0[this.nextValueIndex];if(void 0!==this.prevValueIndex&&void 0===this.nextValueIndex)return this.currentValue+32;if(void 0===this.prevValueIndex&&void 0!==this.nextValueIndex){let e=t0[0];if(this.currentValue===e)return t0[this.nextValueIndex];let t=this.currentValue+1;return t>=e?e:t}throw Error("Both next and prev value indices are undefined. Check that you have called onCurrentValueUpdated at least once")}prevValue(){if(void 0!==this.prevValueIndex&&void 0!==this.nextValueIndex)return t0[this.prevValueIndex];if(void 0!==this.prevValueIndex&&void 0===this.nextValueIndex){let e=t0[t0.length-1];if(this.currentValue===e)return t0[this.prevValueIndex];let t=this.currentValue-32;return t<=e?e:Math.max(t,t1)}if(void 0===this.prevValueIndex&&void 0!==this.nextValueIndex)return Math.max(this.currentValue-1,t1);throw Error("Both next and prev value indices are undefined. Check that you have called onCurrentValueUpdated at least once")}findClosestIndices(e,t){let n=0,i=e.length-1;if(t<e[n])return[void 0,0];if(t>e[i])return[i,void 0];for(;n<=i;){let r=Math.floor((n+i)/2);if(e[r]===t)return[r,r];e[r]<t?n=r+1:i=r-1}return[i,n]}}function t5(){let{directManipulationEditor:e,classNameEditingController:t}=ek(),n=(0,f.md)(e.selectedElementComputedStylesWithLocalEdits)["font-size"],a=n?parseInt(n,10):16,s=r.useCallback(e=>{t.addClassesToInspectedElements([{className:`text-[${e}px]`,cssRules:[{property:"font-size",propertiesExpandedFromShorthand:[],value:`${e}px`,computedStylesValue:`${e}px`}]}],eU.zk.YES,"font-size")},[t]);return(0,i.jsx)(eI.R,{children:(0,i.jsx)(tZ,{size:a,onSizeChanged:s})})}var t4=n(607696),t3=n(524326),t6=n(378721),t7=n(441498),t9=n(35940),t8=n(17147),ne=n(207436),nt=n(605985),nn=n(395823),ni=n(183290),nr=n(368417),na=n(973407),ns=n(934985),no=n(820198),nl=n(445602),nd=n(66892),nc=n(351572),nu=n(203250),nm=n(484131),np=n(723401);function nh({disabled:e,codeNodeId:t}){let[n,s]=r.useState(""),{selectedElement:o,selectedElementCodeSnippet:l}=(0,et.fl)(),[d,c]=(0,S.jT)(),{setChatError:u,clearChatError:m}=(0,na.tk)(t),{isOrWasRecentlyComposing:p,handleCompositionStart:g,handleCompositionEnd:_}=(0,np.T)(),y=(0,nt.iZ)(),v=(0,x.tS)(),C=(0,nn.Xu)(),E=(0,no.GM)(),w=r.useMemo(()=>(0,a.UN)().get(t),[t]),k=(0,nr.KF)({chatMessagesNode:w}),T=(0,I.Oc)(),j=T?t4.lV.FIGMAKE:t4.lV.CODE_IN_SITES,{changedFiles:A}=(0,ns.E)(w,k,j,{shouldIncludeFile:T?R.ru:void 0}),N=(0,nl.L)(),M=j===t4.lV.FIGMAKE?N:void 0,P=(e,t)=>{let i=e.plainText;i||(i=e.hidden?"":n);let r={...e,plainText:i};return s(""),(0,nc.v)({featureType:j,userMessageContent:r,user:y,chatMessagesNode:w,chatController:k,rawUserChatDetails:t,setInput:s,fileKey:v,canUseSupabase:C,todoAutoAccept:E,changedFiles:A,model:M,autoFixingUserMessageId:null,requestInitiator:t4.bG.USER,canUseMcpConnectors:!1})},O=async({message:e,errors:t,hidden:n})=>{if(!D&&(e||n))try{m();let i=o&&l?(0,nm.F)(o,l):void 0,r=(0,nd.u)(e||"",[],o?.elementAndParentSources);await P({plainText:e,inspectedElement:i,errors:t,hidden:n},r),t&&c([])}catch(e){u(e instanceof Error?{error:e}:{error:Error("Unknown error")})}},D=(0,nu.ry)(),L=(0,f.md)(b.mK),F=(0,ne.KP)(),{exchange:B,user:U}=(0,ni.$W)(t),V=void 0!==B&&B.messages.length>0,H=U?.sessionID===F,z=r.useRef(null),G=!(0,t8.jN)(n)&&!V&&k.isInitialized,K=(0,f.md)((0,ni.Z3)(t)),W=r.useCallback(()=>{if(z&&"current"in z&&z.current){let e=z.current;e.style.height="auto";let t=Math.min(e.scrollHeight,32);e.style.height=`${t}px`,e.style.overflowY=t>=32?"auto":"hidden"}},[]);r.useEffect(()=>{W()},[n,W]);let q=r.useCallback(e=>{let t=e.target;W(),s(t.value)},[s,W]),X=({message:e,errors:t})=>O({message:e??n,errors:t}),Y=V?(0,i.jsx)("div",{...{0:{className:"x16rqkct x2lah0s xgbcquw"},1:{className:"x16rqkct x2lah0s xu5wzci"}}[!!G<<0],children:(0,i.jsx)(t6.K,{"aria-label":(0,J.t)("living_designs.chat.stop_button.alt_text"),onClick:()=>{K&&K.abort((0,t3.NK)(t3.XD.USER_ABORTED))},disabled:!H,children:(0,i.jsx)(t9.Q,{className:"xwa2v1s"})})}):(0,i.jsx)("div",{...{0:{className:"x16rqkct x2lah0s xgbcquw"},1:{className:"x16rqkct x2lah0s xu5wzci"}}[!!G<<0],children:(0,i.jsx)(t6.K,{type:"submit","aria-label":(0,J.t)("living_designs.chat.send_button.alt_text"),onClick:()=>{X({}),(0,h.kc)().bake_point_and_edit||L?.setDirectManipulationEnabled({enabled:!1})},disabled:!G,children:(0,i.jsx)(t7.W,{className:"xwa2v1s"})})});return(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),G&&O({})},children:(0,i.jsxs)("div",{className:"x1vqgdyp x1n2onr6 xrvj5dj x52fmzj xb3r6kr x6s0dn4",children:[(0,i.jsx)("div",{className:"xrvj5dj x6s0dn4",children:(0,i.jsx)("textarea",{ref:z,rows:1,className:"xtt52l0 x1hshjfz xt970qd xdqyycr xfifm61 x1dz1jew xjbqb8w x1f4nttd",disabled:D||e,maxLength:5e3,onChange:q,onCompositionEnd:_,onCompositionStart:g,onKeyDown:e=>{e.stopPropagation(),!p(e)&&("Enter"!==e.key||e.shiftKey||(e.preventDefault(),G&&(X({}),(0,h.kc)().bake_point_and_edit||L?.setDirectManipulationEnabled({enabled:!1}))))},placeholder:(0,J.t)("living_designs.chat.placeholder.iterate"),value:n})}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xt970qd xaope02",children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0},children:(0,i.jsx)("div",{style:{flexShrink:0},children:Y})})})]})})}var nf=n(446375),ng=n(646673),nx=n(644912),n_=n(19047),ny=n(62566),nb=n(830260);let nv="image_";class nC{constructor(e,t,n){this.componentPreview=e,this.displayErrorVisualBell=t,this.forceRefresh=n}async updateImage(e,t,n,i){let r=this.componentPreview.directManipulationEditor,s=f.zl.get(r.selectedElementInfoAtom);if(!s)return(0,n_.x1)("direct_manipulation","No element found to update image"),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]};let o=e.image;if(!o)return(0,n_.x1)("direct_manipulation","No image found to update image"),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]};let l=await r.fetchNewCodeSnippets();if(!l)return(0,n_.x1)("direct_manipulation","Unable to edit the image"),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]};let d=(0,a.UN)(),{folderPath:c,fileName:u}=l,m=(0,ng.$v)(d,c,u),h={success:!1},g={success:!1};if(m){let a=l.editingInfo.srcAttribute,c=s.imgSrc;if(!d.getInternalCanvas())return{success:!1,modifiedCodeFileNodeIds:[]};let u=d.get(e.nodeGuid);if(!u)return{success:!1,modifiedCodeFileNodeIds:[]};let f=u.fills.find(e=>"IMAGE"===e.type)?.image;if(!f||!f.hash||!f.name)return{success:!1,modifiedCodeFileNodeIds:[]};let x=(0,eB.qg)({hash:f.hash}),_={hash:x,name:f.name},y=`${nv}${x}`,b=!1;return((0,ny.a)(()=>{eJ.l7.user("direct-manipulation",()=>{let e=!1;switch(a.type){case"static":{let e=a.isWithinInitializerBraces?y:`{${y}}`,t="string"===a.staticValueType&&(0,nb.W)(m,l.collaborativeSourceCodeVersion,a.valueIncludingQuotesStartIndex,a.valueIncludingQuotes,e);h={success:t,codeFileNode:m,message:t?`Replaced image ${a.value} with ${y}`:`Failed to replace image ${a.value} with ${y}`},b=!0;break}case"dynamic-identifier":if(a.isConstFromImport){let t=(0,nb.W)(m,l.collaborativeSourceCodeVersion,a.valueStartIndex,a.value,y);h={success:t,codeFileNode:m,message:t?`Replaced image ${a.value} with ${y}`:`Failed to replace image ${a.value} with ${y}`},e=!1,b=!0;break}e=!0;break;case"dynamic":e=!0;break;case"not-set":case"unknown":h={success:!1,message:`Cannot handle image src type ${a.type}`};break;default:(0,p.xb)(a)}if(e&&c){let e=nE({selectedElementCodeFileNode:m,codeFileNodeIdsWithRecentlyAddedImageAssetImports:n,scenegraph:d,bundledSourceCode:t,previousElementUrl:c});if(null!==e){let{stringLiteralOccurrences:t,collaborativeSourceCodeVersion:n,codeFileNodeGuid:i,previousImage:r}=e,a=d.get(i);if(a){let e;for(let i of(t.reverse(),t)){let{startIndex:t,matchedString:r}=i;if(!(0,nb.W)(a,n,t,r,y)){e=`Failed to replace image ${r} with ${y}`;break}}h=e?{success:!1,message:e}:{success:!0,codeFileNode:a,message:`Replaced image ${r.type} with ${y}`}}}}let i=h.codeFileNode,r=i?.collaborativeSourceCode;if(h.success&&i&&r){let e=(0,t4.r9)({imageHash:x,imageVariableName:y,extension:"png"})+"\n";i.setImageImports([_]);let t=r.createInsertionOp(0,e.length,e,0);g={success:t,addedImportLine:!0,message:t?`Updated import statement to include ${y}`:`Failed to update import statement to include ${y}`}}else g={success:!0,message:`Import statement already includes ${y}`}})}),h.success&&g.success)?(c||b?this.componentPreview.sendMessage("editInspectedElementImage",{hash:x,previousElementUrl:c,dataUrl:o,sourceCodeJSXCallId:b?l.sourceCodeJSXCallId:void 0}):this.forceRefresh(),r.updateAnalyticsRecordImageSwappedFromSource(i),{success:!0,modifiedCodeFileNodeIds:[]}):((0,n_.x1)("direct_manipulation","Failed to update image",{inspectedElementInfo:s,status:h,importStatus:g}),this.displayErrorVisualBell("on_save"),{success:!1,modifiedCodeFileNodeIds:[]})}return{success:!1,modifiedCodeFileNodeIds:[]}}}function nE({selectedElementCodeFileNode:e,codeFileNodeIdsWithRecentlyAddedImageAssetImports:t,scenegraph:n,bundledSourceCode:i,previousElementUrl:r}){let a=function(e){let t=e.match(/#filename=([a-zA-Z0-9]+)(?:\.[^?#]+)?/);if(t?.[1]){let e=t[1];return{type:"asset",assetId:e,assetVariableName:`${nv}${e}`}}return{type:"url",url:e}}(r);function s({previousImage:e,...t}){switch(e.type){case"asset":return function({sourceCode:e,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}){let r=(function(e,t){let n=(0,nx.eY)(t),i=RegExp(`\\b${n}\\b`,"g"),r=i.exec(e);if(!r)return[];let a=[];do{let e=r.index,n=e+r[0].length;a.push({startIndex:e,endIndex:n,matchedString:t})}while(r=i.exec(e))return a})(e,i.assetVariableName).filter(t=>!function(e,t){let n=t;for(;n>0&&10!==e.charCodeAt(n-1);)n--;return/^\s*import\b/.test(e.slice(n))}(e,t.startIndex));return r.length>0?{stringLiteralOccurrences:r,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}:null}({previousImage:e,...t});case"url":return function({sourceCode:e,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}){let r=[nw(e,`"${i.url}"`),nw(e,`'${i.url}'`)].flatMap(e=>e);return r.length>0?{stringLiteralOccurrences:r,codeFileNodeGuid:t,collaborativeSourceCodeVersion:n,previousImage:i}:null}({previousImage:e,...t});default:(0,p.xb)(e)}}let o=e.collaborativeSourceCode;if(o){let t=s({sourceCode:o.computeCurrentText(),codeFileNodeGuid:e.guid,collaborativeSourceCodeVersion:o.getCurrentVersionAsString(),previousImage:a});if(t)return t}if("asset"===a.type)for(let i of t){if(i===e.guid)continue;let t=n.get(i),r=t?.collaborativeSourceCode;if(!t||!r)continue;let o=s({sourceCode:r.computeCurrentText(),codeFileNodeGuid:t.guid,collaborativeSourceCodeVersion:r.getCurrentVersionAsString(),previousImage:a});if(o)return o}if(i)for(let e of new nf.M(i).listFiles()){if(!e.metadata?.guid||!e.metadata?.collaborativeVersion)continue;let t=s({sourceCode:e.contents.toString(),codeFileNodeGuid:e.metadata.guid,collaborativeSourceCodeVersion:e.metadata.collaborativeVersion,previousImage:a});if(t)return t}return null}function nw(e,t){let n;let i=[],r=0;for(;-1!==(n=e.indexOf(t,r));){let e=n,a=e+t.length;i.push({startIndex:e,endIndex:a,matchedString:t}),r=n+1}return i}let nk={kMwMTN:"x1uw1ob",kGuDYH:"x17akokd",k63SB2:"xopfts3",kZKoxP:"xg7h5cd",kLqNvP:"",kt4wiu:"",kLWn49:"xno9bf3",kmVPX3:"x1mh6rdz",kg3NbH:"",kuDDbn:"",kE3dHu:"",kP0aTx:"",kpe85a:"",k8WAf4:"",kLKAdn:"",kGO01o:"",kfzvcC:"x67bb7w",kVAEAm:"xixxii4",kzqmXN:"xeq5yr9",kY2c9j:"x4smtjo",$$css:!0},nT={container:e=>[nk,{kbCHJM:null!=e.left?"xgq9j65":e.left,k87sOh:null!=e.top?"xjbys53":e.top,$$css:!0},{"--x-left":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.left),"--x-top":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.top)}]};function nj(e,t,n){let i=n.getBoundingClientRect(),r=i.width/n.offsetWidth,a=t.current?.getBoundingClientRect(),s=a?.width||0,o=a?.height||0,l=e.top-o,d=i.x+e.left+e.width/2-s/2;return(l=i.y+e.top+e.height+12)+o>i.height+i.y&&(l=i.y+i.height-o-36),l<i.y&&(l=i.y+12),d<i.x&&(d=i.x),d+s>i.width+i.x&&(d=i.x+i.width-s),d*=r,{top:l*=r,left:d}}function nS({elementBoundingBox:e,container:t,elementInfo:n,chatNodeId:a,codeInstanceNodeId:o,preview:l,refreshPreview:d}){let c=r.useRef(null),u=r.useRef(null),m=r.useRef(null),p=r.useRef(null),h=r.useRef(null),g=r.useRef(null),[x,_]=r.useState("style"),y=n.tagName.toLowerCase(),b=r.useMemo(()=>(function(e,t){let n=(0,eq.S)(e,t),r=function(e){let t=[];e.forEach(e=>{switch(e){case eq.m.Text:t.push(nI);break;case eq.m.Image:t.push(nR);break;case eq.m.Border:t.push(nN);break;case eq.m.Spacing:t.push(nM);break;case eq.m.Container:t.push(nA);case eq.m.Shadow:}});let n=[];for(let[e,r]of t.entries())0!==e&&n.push((0,i.jsx)(ea.c,{},e)),n.push((0,i.jsx)(r,{},r.name));return n}(n);return{controlTypes:n,components:r}})(y,n.isTextContainer),[y,n.isTextContainer]),v=function(e,t){let n=(0,f.md)(e.directManipulationEnabledAtom),i=(0,f.md)(e.editingSnippetAtom,{deferToFrame:!0});return n?i.snippet?(0,eo.$5)(i.snippet)&&t.length>0?ed.D.Enabled:ed.D.Disabled:i.isLoading?ed.D.Loading:ed.D.Disabled:ed.D.Disabled}(l.directManipulationEditor,b.components),C=(0,f.md)(l.directManipulationEditor.editingSnippetAtom,{deferToFrame:!0}).snippet,E=r.useRef(!1),w=(0,en.wA)(),k=r.useCallback(e=>{if(E.current)return;E.current=!0;let t="on_selection"===e?(0,J.t)("figmake.toolbar.error.inconsistency"):(0,J.t)("figmake.toolbar.error.save");w(er.F.enqueue({message:t,error:!0,button:{action:()=>{d()},text:(0,J.t)("figmake.refresh")}}))},[w,d]),T=(0,r.useMemo)(()=>new el.q(l.directManipulationEditor,async(e,t)=>{let n=await l.sendMessage("editInspectedElementClassNames",e);l.directManipulationEditor.updateAnalyticsRecordClassNameEditResult(e,n,t)},k),[l,k]),j=(0,r.useMemo)(()=>new nC(l,k,d),[l,k,d]),[S,I]=r.useState(nj(e,c,t)),[A,N]=r.useState(null);(0,ei.wY)(c,()=>{I(nj(e,c,t)),N(c.current)}),r.useLayoutEffect(()=>{c.current&&(I(nj(e,c,t)),N(c.current))},[e,t]);let M=v===ed.D.Enabled,R=(0,es.Fk)((e,t,n,i)=>t.includes(eq.m.Image)&&function(e,t,n,i,r){if(!t)return!1;let{folderPath:a,fileName:s}=t,o=(0,ng.$v)(e,a,s);if(!o)return!1;let l=t.editingInfo.srcAttribute;return"static"===l.type||"dynamic-identifier"===l.type&&!!l.isConstFromImport||(("dynamic-identifier"===l.type||"dynamic"===l.type)&&n?null!==nE({selectedElementCodeFileNode:o,codeFileNodeIdsWithRecentlyAddedImageAssetImports:r,scenegraph:e,bundledSourceCode:i,previousElementUrl:n}):("not-set"===l.type||l.type,!1))}(e,n,i,l.directManipulationEditor.bundledSourceCode,l.directManipulationEditor.codeFileNodeIdsWithRecentlyAddedImageAssetImports),b.controlTypes,C,n.imgSrc,o,l.directManipulationEditor);l.directManipulationEditor.updateAnalyticsSelectedElementCanEditImage(R,n.figmaFiberId);let P=M?x:"prompt";return v===ed.D.Loading?null:(0,i.jsx)("div",{...s.Ay.props(nT.container(S)),children:(0,i.jsx)(eT,{classNameEditingController:T,classNameEditingEnabled:v,componentPreview:l,container:t,directManipulationEditor:l.directManipulationEditor,imageEditingController:j,imageSwapEnabled:R,toolbar:A,children:(0,i.jsxs)(eE,{menuRef:c,children:[(0,i.jsx)("div",{ref:u,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 xilkfi8",children:(0,i.jsx)(ty,{disabled:!M,value:P,setValue:_})}),(0,i.jsx)(ea.c,{}),(0,i.jsx)("div",{style:{width:`${("style"===P?h:g).current?.offsetWidth}px`},className:"xffdob0 x13w7htt xrvj5dj x1xe40qn",children:(0,i.jsx)("div",{ref:m,style:{marginTop:"style"===P?"0px":"-60px"},className:"x1vqgdyp x1on81qs xt4q7o6",children:(0,i.jsxs)("div",{style:{width:`${("style"===P?h:g).current?.offsetWidth}px`},className:"xffdob0 x13w7htt xg7h5cd x6ikm8r",children:[(0,i.jsx)("div",{ref:h,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp",children:b.components}),(0,i.jsx)("div",{ref:g,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp",children:(0,i.jsx)(nh,{disabled:"prompt"!==P,codeNodeId:a})})]})})}),(0,i.jsx)(ea.c,{}),(0,i.jsx)("div",{ref:p,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 x1cmmqis",children:(0,i.jsx)(tv,{})})]},`toolbar-${n.figmaFiberId}`)})},`container-${n.figmaFiberId}`)}function nI(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xl56j7k xt970qd xfn1xvj",children:(0,i.jsxs)("div",{className:"xxk0z11 x78zum5 x1q0g3np x6s0dn4 xl56j7k xy6u8y9 x4pvk5x",children:[(0,i.jsx)(ti,{}),(0,i.jsx)("div",{className:"x5yr21d x1i1rx1s xq5lo5s"}),(0,i.jsx)("div",{className:"x1x862rh",children:(0,i.jsx)(ez,{property:"color"})})]})}),(0,i.jsx)(ea.c,{}),(0,i.jsx)(t5,{}),(0,i.jsx)(ea.c,{}),(0,i.jsx)(tK,{}),(0,i.jsx)(tW,{}),(0,i.jsx)(tq,{}),(0,i.jsx)(ea.c,{}),(0,i.jsx)(tB,{})]})}function nA(){return(0,i.jsx)(ez,{property:"background-color"})}function nN(){return(0,i.jsx)(eR,{})}function nM(){return(0,i.jsx)(tA,{})}function nR(){return(0,i.jsx)(tu,{})}let nP={boundingBox:{kVAEAm:"x10l6tqk",kfzvcC:"x47corl",kB7OPa:"x9f619",$$css:!0},boundingBoxSelected:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"x1va2ikv",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},boundingBoxHovered:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"x1y0btm7",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"xbes0tg",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},boundingBoxSelectedSimilar:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"xbsl7fq",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"xbes0tg",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kSiTet:"x18km98s",kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},boundingBoxHoveredSimilar:{kMzoRj:"xmkeg23",kjGldf:null,k2ei4v:null,kZ1KPB:null,ke9TFa:null,kWqL5O:null,kLoX6v:null,kEafiO:null,kt9PQ7:null,ksu8eU:"xbsl7fq",kJRH4f:null,kVhnKS:null,k4WBpm:null,k8ry5P:null,kSWEuD:null,kDUl1X:null,kPef9Z:null,kfdmCh:null,kVAM5u:"xbes0tg",kzOINU:null,kGJrpR:null,kaZRDh:null,kBCPoo:null,k26BEO:null,k5QoK5:null,kLZC3w:null,kL6WhQ:null,kSiTet:"xbyyjgo",kmVPX3:"x1i3ajwb",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0},tagNameLabel:{kVAEAm:"x10l6tqk",k87sOh:"xcrr8yc",kbCHJM:"x1ojtbga",kMwMTN:"x140t73q",k8WAf4:"xj8oexa",kg3NbH:"xfn1xvj",kGuDYH:"x4z9k3i",k63SB2:"x117nqv4",kIxVMA:"x2b5lcy",ksF3WI:"x1lzl9kk",kYm2EN:"xjppbhk",kqGeR4:"xfrllxf",kP9fke:"x1kyqaxf",$$css:!0},tagNameLabelSelected:{kWkggS:"xf2r6mj",$$css:!0},tagNameLabelHovered:{kWkggS:"x1g19c89",$$css:!0}},nO={selected:nP.boundingBoxSelected,hovered:nP.boundingBoxHovered,selectedSimilar:nP.boundingBoxSelectedSimilar,hoveredSimilar:nP.boundingBoxHoveredSimilar},nD={selected:nP.tagNameLabelSelected,hovered:nP.tagNameLabelHovered,selectedSimilar:void 0,hoveredSimilar:void 0};function nL({rect:e,selectionType:t,tagName:n}){return!e||0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height)||isNaN(e.left)||isNaN(e.top)?null:(0,i.jsx)("div",{...s.xk(nP.boundingBox,nO[t]),style:{left:e.left,top:e.top,width:e.width,height:e.height},children:!!n&&["selected","hovered"].includes(t)&&(0,i.jsx)("div",{...s.xk(nP.tagNameLabel,nD[t]),children:n})})}function nF({preview:e,isVisible:t,refreshPreview:n,chatNodeId:a,codeInstanceNodeId:s}){let o=e.iframe,l=e.directManipulationEditor,d=(0,f.md)(l.latestInspectedElementUIEvent),c=(0,f.md)(ee.sH),u=(0,f.md)(ee.gn),m=null!==d,p=m&&!!o,[h,g]=r.useState(!0);if(r.useEffect(()=>{if(o&&!m&&g(!0),!p)return;let t=()=>{g(!0)},n=()=>{g(!1)},i=t=>{if("Escape"===t.key&&!(0,et.pn)(e.directManipulationEditor)){e.setDirectManipulationEnabled({enabled:!1}),g(!0);return}e.directManipulationEditor.handleKeyDown(t)};return o.addEventListener("mouseenter",t),o.addEventListener("mouseleave",n),document.addEventListener("keydown",i),()=>{o.removeEventListener("mouseenter",t),o.removeEventListener("mouseleave",n),document.removeEventListener("keydown",i)}},[p,o,m,e,e.directManipulationEditor]),!p)return null;let x=o.getBoundingClientRect().width/o.offsetWidth;u&&(x/=c);let _=e=>e?{width:Math.floor(e.width*x),height:Math.floor(e.height*x),left:e.left*x,top:e.top*x}:null,{hoveredElement:y,selectedElement:b,selectedSimilarElements:v,hoveredSimilarElements:C}=d,E=_(b?.rect??null);return(0,i.jsxs)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x47corl xb3r6kr x1vjfegm",children:[h&&C.map((e,t)=>(0,i.jsx)(nL,{rect:_(e),selectionType:"hoveredSimilar"},`hoveredSimilar-${t}`)),v.map((e,t)=>(0,i.jsx)(nL,{rect:_(e),selectionType:"selectedSimilar"},`selectedSimilar-${t}`)),h&&y&&(0,i.jsx)(nL,{rect:_(y.rect),selectionType:"hovered",tagName:y.tagName},"hovered"),b&&E&&(0,i.jsxs)(i.Fragment,{children:[t&&(0,$.createPortal)((0,i.jsx)(nS,{elementBoundingBox:E,elementInfo:b,chatNodeId:a,codeInstanceNodeId:s,container:o,preview:e,refreshPreview:n},"toolbar"),document.body),(0,i.jsx)(nL,{rect:E,selectionType:"selected",tagName:b.tagName},"selected")]})]})}var nB=n(287736),nU=n(375836),nV=n(736213),nH=n(409084),nz=n(551492);function nG({children:e}){let t=(0,eb.Mj)();return(0,i.jsx)("div",{"data-is-figmake":"true",className:eC.xE,children:(0,i.jsx)(ev.W1,{menuRef:t,darkModePreferred:!0,editorTheme:"seascape",children:e})})}function nK({target:e,children:t}){let[n,a]=r.useState(!1),{getContainerProps:s,getTriggerProps:o}=eS.fP({type:"menu",isOpen:n,onOpenChange:a,softDismiss:!0,placement:"bottom",middleware:[(0,ej.cY)({mainAxis:16}),(0,ej.UU)({padding:16}),(0,ej.BN)()]}),l=r.cloneElement(e,{...o()});return(0,i.jsxs)("div",{children:[(0,i.jsx)(eI.R,{children:l}),(0,i.jsx)(eS.mc,{...s(),children:t})]})}function nW(){let[e]=r.useState(!1);return(0,i.jsx)(nK,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.corner_radius"),tooltip:(0,J.t)("figmake.toolbar.corner_radius"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:e,children:(0,i.jsx)(eu.a,{})}),children:(0,i.jsx)(nq,{})})}function nq(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)(),{topLeft:a,topRight:s,bottomLeft:o,bottomRight:l}=t?.borderRadius??{},d=(0,en.wA)(),c=a===s&&a===o&&a===l,u=c?a:ex.oV,[m,p]=r.useState(!c),h=r.useMemo(()=>(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltip:(0,J.t)("figmake.toolbar.corner_radius.individual_corner_radius"),tooltipType:e_.Ib.TEXT,isActive:m,onClick:()=>p(e=>!e),children:(0,i.jsx)(em.Q,{className:"x47corl"})}),[m]),f=r.useCallback((i,r)=>{r&&n&&e({type:"commandExec",command:{type:"borderRadius",instanceId:n,newValue:{...t?.borderRadius,...i},oldValue:t?.borderRadius}})},[e,n,t]),g=r.useCallback((e,t)=>{f({topLeft:e,topRight:e,bottomLeft:e,bottomRight:e},t)},[f]);return(0,i.jsx)(nG,{children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z xafpxmx x9f619",children:(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x167g77z",children:m?(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 xbyi07e",children:[(0,i.jsx)(ey.gq,{value:a,dispatch:d,onValueChange:(e,t)=>{f({topLeft:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.top_left"),children:(0,i.jsx)(eu.a,{className:"x47corl"})}),(0,i.jsx)(ey.gq,{value:s,dispatch:d,onValueChange:(e,t)=>{f({topRight:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.top_right"),children:(0,i.jsx)(ep.$,{className:"x47corl"})}),h,(0,i.jsx)(ey.gq,{value:o,dispatch:d,onValueChange:(e,t)=>{f({bottomLeft:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.bottom_left"),children:(0,i.jsx)(eh.w,{className:"x47corl"})}),(0,i.jsx)(ey.gq,{value:l,dispatch:d,onValueChange:(e,t)=>{f({bottomRight:e},t)},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius.bottom_right"),children:(0,i.jsx)(ef.t,{className:"x47corl"})})]}):(0,i.jsxs)("div",{className:"xrvj5dj x167g77z x6s0dn4 x619ttb xh8yej3 x16zb2db",children:[(0,i.jsx)(ey.gq,{bigNudgeAmount:10,"data-tooltip":(0,J.t)("figmake.toolbar.corner_radius"),"data-tooltip-type":e_.Ib.TEXT,dispatch:d,onValueChange:g,smallNudgeAmount:1,value:u,children:(0,i.jsx)(em.Q,{className:"x47corl"})}),h]})})})})}let nX={r:0,g:0,b:0,a:1};function nY(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)(),a=t?.color??nX,s=r.useCallback((i,r=eU.zk.YES)=>{r&&n&&e({type:"commandExec",command:{type:"color",instanceId:n,newValue:i,oldValue:t?.color}})},[e,n,t]);return(0,i.jsx)(nZ,{initialColor:a,label:(0,J.t)("figmake.toolbar.font_color"),onColorChange:s})}function nJ(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)(),a=t?.backgroundColor??nX,s=r.useCallback((t,i=eU.zk.YES)=>{i&&n&&e({type:"commandExec",command:{type:"backgroundColor",instanceId:n,newValue:t,oldValue:a}})},[e,n,a]);return(0,i.jsx)(nZ,{initialColor:a,label:(0,J.t)("figmake.toolbar.background_color"),onColorChange:s})}function nZ({initialColor:e,label:t,onColorChange:n}){let[a]=r.useState(!1),s=r.useMemo(()=>{let t;return e&&!t&&(t={type:"SOLID",color:e,opacity:e.a}),t},[e]);return(0,i.jsx)(nK,{target:(0,i.jsx)(eg.ar,{"aria-label":t,tooltip:t,tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:a,children:(0,i.jsx)(eL.A,{paint:s})}),children:(0,i.jsx)(nG,{children:(0,i.jsx)(nQ,{color:e,onChange:n})})})}function nQ({color:e,onChange:t}){let n=(0,eF.Ku)(),{currentTool:a,dropdownShown:s}=(0,eO.R)(e=>({currentTool:e.mirror.appModel.currentTool,dropdownShown:e.dropdownShown})),o=(0,en.wA)(),l=r.useRef(null);return(0,i.jsx)("div",{className:eH.n1,ref:l,children:(0,i.jsx)(eV.S7,{canAcceptStyles:!1,canAcceptVariables:!1,color:e,colorFormat:n,containerRef:l,currentTool:a,dispatch:o,dropdownShown:s,dropperDisabled:!0,onColorChange:t,theme:"dark"})})}let n$=(0,n(393463).CZ)("font"),n0="point-and-edit-font-family-picker",n1=[];function n2(){let e=(0,en.wA)(),[t,n]=r.useState(!1),[a,s]=r.useState(null),{control:o,selectedFeatures:l,selectedInstanceId:d,toolbarRef:c}=(0,nV.jK)(),u=r.useRef(null),m=(0,en.d4)(e=>e.fonts),p=(0,e6.UG)(),h=r.useMemo(()=>(0,e5.pn)(m),[m]),f=(0,e2.Xo)(),g=r.useCallback((t,n)=>{if(u.current&&c){let{x:i,y:r}=(0,e4.VZ)(u.current,n),a=c.getBoundingClientRect();i<a.left?i=a.left:i+n>a.right&&(i=a.right-n),e(eQ.u1({id:t,initialX:i,initialY:r+16}))}},[c,e]),x=r.useCallback(()=>{e(eQ.XE())},[e]),_=r.useCallback(()=>{n(!t),t?x():g(n0,300)},[x,t,g]);(0,eZ.h)(()=>{f&&f.id===n0&&x()}),(0,r.useEffect)(()=>{(!f||f.id!==n0)&&t&&n(!1)},[f,n]);let y=r.useRef(null);(0,tt.Y)(x,{closeOnEsc:!0,ignore:e=>!!(y.current&&y.current.contains(e))});let b=r.useRef(l);b.current=l;let v=r.useCallback((e,t,n=eU.zk.YES)=>{if(n&&d){let t=(0,e8.DY)(e,m),n=`${n$}/${t?.fontId}`;o({type:"commandExec",command:{type:"fontFamily",instanceId:d,newValue:{fontFamily:e,style:t?.styleName,url:n},oldValue:b.current?.fontFamily}})}},[o,m,d]);return(r.useEffect(()=>{let e="sans-serif",t=l?.fontFamily?.fontFamily??e;s(Object.keys(m).some(e=>e.toLocaleLowerCase()===t?.toLocaleLowerCase())?t:e)},[m,l?.fontFamily?.fontFamily]),d&&m&&a)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eI.R,{children:(0,i.jsx)(n5,{"aria-label":(0,J.t)("figmake.toolbar.font_family"),iconSuffix:(0,i.jsx)(eX.O,{}),onClick:_,ref:u,children:(0,i.jsx)("div",{className:"x1f4nttd xuxw1ft xb3r6kr xlyipyv x1dmp6jm",children:a})})}),f?.id===n0&&(0,$.createPortal)((0,i.jsx)("div",{ref:y,"data-point-and-edit-tool":!0,className:"x1f4nttd x11yfylt xixxii4 x3uc4y2",children:(0,i.jsx)(e3.Cn,{currentFont:a,dispatch:e,dropdown:null,fonts:m,googleFontPreviews:p,onFontChange:v,pickerId:n0,pickerShown:f,recordingKey:n0,restrictedFontSet:e0.Qr.GOOGLE_FONTS,selectedNodeIds:n1,versionsForStyles:h})}),document.body)]}):null}let n5=r.forwardRef(function({children:e,iconSuffix:t,...n},r){return(0,i.jsx)(e7.E,{ref:r,...n,...{0:{className:"xxk0z11 x19y5rnk x16qho6y xv2f06h xfn42iu xng3xce x1r7ld26 x8rdmch xctkrei"},2:{className:"xxk0z11 x19y5rnk xu5wzci xfn42iu xng3xce x1r7ld26 x8rdmch xctkrei"},1:{className:"xxk0z11 x19y5rnk x16qho6y xv2f06h xfn42iu xng3xce x1r7ld26 x8rdmch"},3:{className:"xxk0z11 x19y5rnk xu5wzci xfn42iu xng3xce x1r7ld26 x8rdmch"}}[!!n["aria-expanded"]<<1|!!t<<0],children:(0,i.jsxs)("div",{className:"xz16r55 x78zum5 x6s0dn4",children:[e,t]})})});var n4=n(582300),n3=n(550507);let n6={kKwaWg:"x1e87kdn",$$css:!0},n7={imagePreviewWrapper:{kVAEAm:"x1n2onr6",kzqmXN:"x1oysuqx",kZKoxP:"xhjk10j",k1xSpc:"x78zum5",kaIpWk:"x1sxf85j",kMzoRj:"xmkeg23",ksu8eU:"x1y0btm7",kVAM5u:"x7z60cl",kjj79g:"xl56j7k",kGNEyG:"x6s0dn4",kogj98:"x1hlb6i2",kSiTet:"x197sbye",$$css:!0},imagePreviewWrapperWithBackground:e=>[n6,{"--x-backgroundImage":`url('${e}')`}]};function n9(){let{control:e,selectedAttributes:t,selectedInstanceId:n}=(0,nV.jK)(),s=t?.src,[o]=r.useState(!1),[l,d]=r.useState();r.useEffect(()=>{(async()=>{if(s?.startsWith("blob:")){let e=s.split("#")[1]?.split("=")[1]?.split(".")[0];if(!e)return;let t=await function(e){let t=(0,a.UN)();return new Promise((n,i)=>{(0,n4.hV)(t.getRoot(),t=>{t.fills.forEach(t=>{if("IMAGE"===t.type&&t.image?.hash&&(0,eB.qg)({hash:t.image.hash})===e)return n(t)})}),n(void 0)})}(e);if(t){let e=await (0,n3.I)(t);e&&d(`data:image/png;base64,${(0,t8.H9)(e)}`)}}else d(s)})()},[s,d]);let c=(0,r.useCallback)(t=>{if(!t.image||!n)return;let i=function(e){let t=(0,a.UN)().get(e.nodeGuid);if(!t)return;let n=t.fills.find(e=>"IMAGE"===e.type)?.image;if(!n||!n.hash||!n.name)return;let i=(0,eB.qg)({hash:n.hash});return{variableName:`image_${i}`,path:(0,t4.XQ)({imageHash:i,extension:"png"})}}(t);i&&(e({type:"commandExec",command:{type:"imageSource",instanceId:n,newValue:{name:i.variableName,path:i.path,liveValue:t.image}}}),d(t.image))},[e,d,n]);return n?(0,i.jsx)(nK,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.image"),tooltip:(0,J.t)("figmake.toolbar.image"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:o,children:(0,i.jsx)("div",{className:"xvy4d1p x78zum5 xl56j7k x6s0dn4 xy3p2pi x9f619 xb3r6kr x18xcxx1 xmkeg23 x1y0btm7 x1co876m",children:l?(0,i.jsx)(ta.oW,{src:l,alt:(0,J.t)("figmake.toolbar.image"),className:"xh8yej3 xl1xv1r x1y5e3q9"}):(0,i.jsx)(tr.T,{className:"xge78cn"})})}),children:(0,i.jsx)(n8,{currentImage:l,updateImage:c})}):null}function n8({currentImage:e,updateImage:t}){let n=r.useRef(null),a=r.useCallback(async e=>{let i=e.target.files?.[0];i&&(await (0,tl.zF)(i,t),n.current&&(n.current.value=""))},[t]);return(0,i.jsxs)(nG,{children:[(0,i.jsxs)("div",{...s.Ay.props(n7.imagePreviewWrapper,n7.imagePreviewWrapperWithBackground((0,ts.A)())),children:[(0,i.jsx)("input",{type:"file",ref:n,accept:to.xp.join(","),onChange:a,className:"x1s85apg"}),(0,i.jsx)(ta.oW,{src:e,alt:(0,J.t)("figmake.toolbar.upload_alt"),className:"x193iq5w xmz0i5r x19kjcj4 x1tbiz1a x1xsqp64 xiy17q3"})]}),(0,i.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c xur7f20 x1hc1fzr x78zum5 xl56j7k x1o2pa38 x6s0dn4",children:(0,i.jsx)(ec.$n,{variant:"primary",onClick:()=>{n.current?.click()},type:"submit",children:(0,J.t)("figmake.toolbar.upload")})})]})}function ie({value:e,setValue:t}){let n=(0,i.jsx)("div",{...{0:{className:"xz8z4lq"},1:{className:"x1aue78i xcr9a89 x4pvk5x xx9uh04"}}[!("style"!==e)<<0],children:(0,i.jsx)(tg.J,{})}),r=(0,i.jsx)("div",{...{0:{className:"xz8z4lq"},1:{className:"x1aue78i xcr9a89 x4pvk5x xx9uh04"}}[!("prompt"!==e)<<0],children:(0,i.jsx)(tx.K,{})});return(0,i.jsx)(eI.R,{children:(0,i.jsxs)(th.bL,{value:e,onChange:e=>t(e),legend:(0,i.jsx)(tf.q,{children:(0,J.t)("figmake.toolbar.toggle_style")}),children:[(0,i.jsx)(th.c$,{value:"style",icon:n,"aria-label":(0,J.t)("figmake.toolbar.toggle_style")}),(0,i.jsx)(th.c$,{value:"prompt",icon:r,"aria-label":(0,J.t)("figmake.toolbar.toggle_prompt")})]})})}var it=n(591408);function ii({showPadding:e,showMargin:t}){let[n]=r.useState(!1);return(0,i.jsx)(nK,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.spacing"),tooltip:(0,J.t)("figmake.toolbar.spacing"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:n,children:(0,i.jsx)(tC.R,{})}),children:(0,i.jsx)(ir,{showPadding:e,showMargin:t})})}function ir({showPadding:e,showMargin:t}){let{control:n,selectedFeatures:a,selectedInstanceId:s}=(0,nV.jK)(),{padding:o,margin:l}=a??{},d=r.useCallback(function({previousValues:e,newValues:t,shouldCommit:i,propertyName:r}){i&&s&&n({type:"commandExec",command:{type:r,instanceId:s,newValue:{...e,...t},oldValue:e}})},[n,s]),c={button:(0,J.t)("figmake.toolbar.padding.individual_paddings"),header:(0,J.t)("figmake.toolbar.padding"),horizontal:(0,J.t)("figmake.toolbar.padding.horizontal"),vertical:(0,J.t)("figmake.toolbar.padding.vertical"),left:(0,J.t)("figmake.toolbar.padding.left"),top:(0,J.t)("figmake.toolbar.padding.top"),right:(0,J.t)("figmake.toolbar.padding.right"),bottom:(0,J.t)("figmake.toolbar.padding.bottom")},u={button:(0,J.t)("figmake.toolbar.margin.individual_margins"),header:(0,J.t)("figmake.toolbar.margin"),horizontal:(0,J.t)("figmake.toolbar.margin.horizontal"),vertical:(0,J.t)("figmake.toolbar.margin.vertical"),left:(0,J.t)("figmake.toolbar.margin.left"),top:(0,J.t)("figmake.toolbar.margin.top"),right:(0,J.t)("figmake.toolbar.margin.right"),bottom:(0,J.t)("figmake.toolbar.margin.bottom")};return(0,i.jsx)(nG,{children:(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf xc7ga6q xy13l1i x167g77z xafpxmx x9f619",children:[e&&(0,i.jsx)(ia,{values:o,changeValue:d,labels:c,propertyName:"padding"}),t&&(0,i.jsx)(ia,{values:l,changeValue:d,labels:u,propertyName:"margin"})]})})}function ia({values:e,changeValue:t,labels:n,propertyName:a}){let s=(0,en.wA)(),o=e?.left===e?.right,l=e?.top===e?.bottom,d=o?e?.left:ex.oV,c=l?e?.top:ex.oV,[u,m]=r.useState(!o||!l),p=r.useMemo(()=>(0,i.jsx)(eg.ar,{"aria-label":n.button,tooltip:n.button,tooltipType:e_.Ib.TEXT,isActive:u,onClick:()=>m(e=>!e),children:(0,i.jsx)(tE.s,{})}),[u,n.button]);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x167g77z",children:[(0,i.jsx)("div",{className:"x1l7klhg xh8yej3 x1f4nttd x78zum5 x1qughib x6s0dn4",children:n.header}),u?(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(ey.gq,{value:e?.left,dispatch:s,onValueChange:(n,i)=>{t({previousValues:e,newValues:{left:n},shouldCommit:i,propertyName:a})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":n.left,children:(0,i.jsx)(tT.R,{className:"x47corl"})}),(0,i.jsx)(ey.gq,{value:e?.top,dispatch:s,onValueChange:(n,i)=>{t({previousValues:e,newValues:{top:n},shouldCommit:i,propertyName:a})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":n.top,children:(0,i.jsx)(tj.z,{className:"x47corl"})}),p,(0,i.jsx)(ey.gq,{value:e?.right,dispatch:s,onValueChange:(n,i)=>{t({previousValues:e,newValues:{right:n},propertyName:a,shouldCommit:i})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":n.right,children:(0,i.jsx)(tS.M,{className:"x47corl"})}),(0,i.jsx)(ey.gq,{value:e?.bottom,dispatch:s,onValueChange:(n,i)=>{t({previousValues:e,newValues:{bottom:n},propertyName:a,shouldCommit:i})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":n.bottom,children:(0,i.jsx)(tI.v,{className:"x47corl"})})]}):(0,i.jsxs)("div",{className:"xrvj5dj xbyi07e x167g77z x6s0dn4 x619ttb xh8yej3",children:[(0,i.jsx)(ey.gq,{value:d,dispatch:s,onValueChange:(n,i)=>{t({previousValues:e,newValues:{left:n,right:n},shouldCommit:i,propertyName:a})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":n.horizontal,children:(0,i.jsx)(tw.y,{className:"x47corl"})}),(0,i.jsx)(ey.gq,{value:c,dispatch:s,onValueChange:(n,i)=>{t({previousValues:e,newValues:{top:n,bottom:n},shouldCommit:i,propertyName:a})},smallNudgeAmount:1,bigNudgeAmount:10,"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":n.vertical,children:(0,i.jsx)(tk.K,{className:"x47corl"})}),p]})]})}var is=n(682864);function io(){let{control:e,selectedInstanceId:t}=(0,nV.jK)(),n=r.useCallback(()=>{t&&e({type:"commandExec",command:{type:"isDeleted",instanceId:t,newValue:!0,oldValue:!1}})},[e,t]);return t?(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.delete_element"),tooltip:(0,J.t)("figmake.toolbar.delete_element"),tooltipType:e_.Ib.TEXT,onClick:n,children:(0,i.jsx)(is.i,{})})}):null}var il=n(413324),id=n(881562);function ic(){let{selectedJsxSource:e}=(0,nV.jK)(),[t,n]=(0,f.fp)(b.JL),{fileGuid:r,filePath:s,pos:o,len:l}=e??{};return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("figmake.toolbar.goToSource"),tooltip:(0,J.t)("figmake.toolbar.goToSource"),tooltipType:e_.Ib.TEXT,onClick:()=>(function(e,t,n,i,r){if(void 0===n||void 0===i)return;if(e){let t=(0,a.UN)().get(e),s=t?.codeFilePath;s&&((0,il.ci)(s),(0,id.nU)(t,!0)),D.Ez5?.openCodeWindowForNode(e),r({codeFileGuid:e,fromCharIndex:n,toCharIndex:n+i});return}if(!t)return;let s=t.split("/"),o=s.length>1?s.slice(0,-1).join("/"):"",l=s[s.length-1];if(l){o&&(0,il.ci)(o);try{let e=(0,a.UN)(),t=(0,ng.$v)(e,o,l);if(!t)return;(0,id.nU)(t,!0),D.Ez5?.openCodeWindowForNode(t.guid),r({codeFileGuid:t.guid,fromCharIndex:n,toCharIndex:n+i})}catch(e){(0,n_.x1)("Failed to go to source:",e)}}})(r,s,o,l,n),children:(0,i.jsx)(tb.I,{})})})}function iu(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)();if(!n)return null;let r=t?.fontWeight==="bold";return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("cooper.inline_menu.bold"),tooltip:"toggle-bold",tooltipType:e_.Ib.LOOKUP,isActive:r,onClick:()=>{e({type:"commandExec",command:{type:"fontWeight",instanceId:n,newValue:r?"normal":"bold",oldValue:r?"bold":"normal"}})},children:(0,i.jsx)(tH.j,{})})})}function im(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)();if(!n)return null;let r=t?.fontStyle==="italic";return(0,i.jsx)(eI.R,{children:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("cooper.inline_menu.italic"),tooltip:"text-toggle-italic",tooltipType:e_.Ib.LOOKUP,isActive:r,onClick:()=>{e({type:"commandExec",command:{type:"fontStyle",instanceId:n,newValue:r?"normal":"italic",oldValue:r?"italic":"normal"}})},children:(0,i.jsx)(tz.s,{})})})}function ip(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)(),[a]=r.useState(!1),s=r.useMemo(()=>[{textAlign:"left",label:(0,J.t)("fullscreen.type_panel.align_left"),icon:()=>(0,i.jsx)(tP.h,{})},{textAlign:"center",label:(0,J.t)("fullscreen.type_panel.align_center"),icon:()=>(0,i.jsx)(tO.N,{})},{textAlign:"right",label:(0,J.t)("fullscreen.type_panel.align_right"),icon:()=>(0,i.jsx)(tD.K,{})},{textAlign:"justify",label:(0,J.t)("inspect_panel.properties.justify"),icon:()=>(0,i.jsx)(tL.h,{})}],[]);if(!n)return null;let o=s.find(e=>e.textAlign===t?.textAlign)??s[0];return(0,i.jsx)(nK,{target:(0,i.jsx)(eg.ar,{"aria-label":(0,J.t)("whiteboard.inline_menu.text_alignment"),tooltip:(0,J.t)("whiteboard.inline_menu.text_alignment"),tooltipType:e_.Ib.TEXT,showCaret:!0,isActive:a,children:o.icon()}),children:(0,i.jsx)(nG,{children:(0,i.jsx)(tF.W,{maxColumns:4,children:s.map(({textAlign:t,label:r,icon:a})=>(0,i.jsx)(eg.ar,{"aria-label":r,isActive:o.textAlign===t,onClick:()=>e({type:"commandExec",command:{type:"textAlign",instanceId:n,newValue:t,oldValue:o.textAlign}}),children:a()},t))})})})}function ih(){let{control:e,selectedFeatures:t,selectedInstanceId:n}=(0,nV.jK)();if(!n)return null;let r=t?.fontSize??16;return(0,i.jsx)(eI.R,{children:(0,i.jsx)(tZ,{size:r,onSizeChanged:t=>{e({type:"commandExec",command:{type:"fontSize",instanceId:n,newValue:t,oldValue:r}})}})})}let ig={kMwMTN:"x1uw1ob",kGuDYH:"x17akokd",k63SB2:"xopfts3",kZKoxP:"xg7h5cd",kLqNvP:"",kt4wiu:"",kLWn49:"xno9bf3",kmVPX3:"x1mh6rdz",kg3NbH:"",kuDDbn:"",kE3dHu:"",kP0aTx:"",kpe85a:"",k8WAf4:"",kLKAdn:"",kGO01o:"",kfzvcC:"x67bb7w",kVAEAm:"xixxii4",kzqmXN:"xeq5yr9",kY2c9j:"x4smtjo",k3aq6I:"xuuh30",k3nNDw:"x1g0ag68",$$css:!0},ix={container:e=>[ig,{kbCHJM:null!=e.left?"xgq9j65":e.left,k87sOh:null!=e.top?"xjbys53":e.top,$$css:!0},{"--x-left":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.left),"--x-top":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e.top)}]};function i_({overlayContainerRef:e}){let t=(0,en.wA)(),n=r.useRef(null),a=r.useRef(null),o=r.useRef(null),[l,d]=r.useState({left:-9999,top:-9999}),{iframe:c,mode:u,editMode:m,setEditMode:p,selectedControls:h,selectedElementRect:f,toolbarRef:g,setToolbarRef:x}=(0,nV.jK)(),_=r.useCallback(e=>{x(e)},[x]);if(r.useEffect(()=>{let t;let n=()=>{g&&c&&f&&d(function(e,t,n,i){let r=n.getBoundingClientRect(),a=r.width/n.offsetWidth,s=i.getBoundingClientRect(),o=t.getBoundingClientRect(),l=o?.width||0,d=o?.height||0,c=r.x+(e.x+e.width/2)*a,u=r.y+(e.y+e.height+12)*a;return u+d>s.height+s.y&&(u=s.y+s.height-d-36),u<s.y&&(u=s.y+12),c-l/2<s.x&&(c=s.x+l/2),c+l/2>s.width+s.x&&(c=s.x+s.width-l/2),{top:u,left:c}}(f,g,c,e?.current??c)),t=requestAnimationFrame(n)};return t=requestAnimationFrame(n),()=>{t&&cancelAnimationFrame(t)}},[e,f,g,c]),r.useEffect(()=>{if("prompt"===m.type&&m.showTooltip&&g){let e=g.getBoundingClientRect();t(nz.eB({target:{kind:e_.Ui.TEXT,text:(0,nH.t)("figmake.toolbar.dynamic_content_tooltip")},targetRect:e,position:e_.Zj.BELOW,hideAfterDelay:3e3}))}else t(nz.jD())},[t,m,g]),"comments"===u||!h||!f)return null;let y=h.includes("text"),b=h.includes("image"),v=!y&&h.includes("border"),C=h.includes("margin"),E=h.includes("padding"),w=C||E;return(0,i.jsx)("div",{ref:_,"data-point-and-edit-tool":!0,...s.Ay.props(ix.container(l)),children:(0,i.jsxs)(nG,{children:[(0,i.jsx)("div",{className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 xilkfi8",children:(0,i.jsx)(ie,{value:m.type,setValue:e=>p({type:e})})}),(0,i.jsx)(ea.c,{}),(0,i.jsx)("div",{style:{width:`${("style"===m.type?a:o).current?.offsetWidth}px`},className:"xffdob0 x13w7htt xrvj5dj x1xe40qn",children:(0,i.jsx)("div",{ref:n,style:{marginTop:"style"===m.type?"0px":"-60px"},className:"x1vqgdyp x1on81qs xt4q7o6",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{ref:a,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp","aria-live":"polite",children:"style"===m.type&&(0,i.jsxs)(i.Fragment,{children:[b&&(0,i.jsx)(iy,{}),y&&(0,i.jsx)(ib,{}),!y&&!b&&(0,i.jsx)(iv,{}),v&&(0,i.jsx)(iE,{}),w&&(0,i.jsx)(iC,{showPadding:E,showMargin:C})]})}),(0,i.jsx)("div",{ref:o,className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp",children:"prompt"===m.type&&(0,i.jsx)(it.df,{initialPrompt:m.prompt})})]})})}),(0,i.jsxs)("div",{className:"x78zum5 xc26acl xeq5yr9 x1vqgdyp x9f619 x1cmmqis",children:[(0,i.jsx)(ic,{}),(0,i.jsx)(ea.c,{}),(0,i.jsx)(io,{})]})]})},"point-and-edit-toolbar")}function iy(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n9,{}),(0,i.jsx)(ea.c,{})]})}function ib(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 xl56j7k xt970qd xfn1xvj",children:(0,i.jsxs)("div",{className:"xxk0z11 x78zum5 x1q0g3np x6s0dn4 xl56j7k xy6u8y9 x4pvk5x",children:[(0,i.jsx)(n2,{}),(0,i.jsx)("div",{className:"x5yr21d x1i1rx1s xq5lo5s"}),(0,i.jsx)("div",{className:"x1x862rh",children:(0,i.jsx)(nY,{})})]})}),(0,i.jsx)(ea.c,{}),(0,i.jsx)(ih,{},"font-size"),(0,i.jsx)(ea.c,{}),(0,i.jsx)(iu,{},"font-weight"),(0,i.jsx)(im,{},"font-style"),(0,i.jsx)(ip,{},"text-align"),(0,i.jsx)(ea.c,{})]})}function iv(){return(0,i.jsx)(nJ,{})}function iC({showPadding:e,showMargin:t}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ii,{showPadding:e,showMargin:t}),(0,i.jsx)(ea.c,{})]})}function iE(){return(0,i.jsx)(nW,{})}function iw({chatNodeId:e,preview:t,sandbox:n,overlayContainerRef:a}){let s=(0,en.wA)(),o=(0,nV.lA)(),[l,d]=r.useState({type:"style"}),[c,u]=r.useState(null),m=r.useCallback(e=>{d(e)},[]),p=r.useCallback(async e=>await t.pointAndEditControl(e),[t]),h=r.useMemo(()=>({chatNodeId:e,control:p,editMode:l,setEditMode:m,iframe:t.iframe,mode:o.mode,selectedAttributes:o.selectedAttributes,selectedControls:o.selectedControls,selectedElementRect:o.selectedElementRect,selectedFeatures:o.selectedFeatures,selectedInstanceId:o.selectedInstanceId,selectedJsxSource:o.selectedJsxSource,toolbarRef:c,setToolbarRef:u}),[e,p,l,m,t.iframe,o.mode,o.selectedAttributes,o.selectedControls,o.selectedElementRect,o.selectedFeatures,o.selectedInstanceId,o.selectedJsxSource,c,u]);return r.useEffect(()=>(f.zl.set(nV.E,{control:p}),()=>{f.zl.set(nV.E,null)}),[p]),r.useEffect(()=>(t.attachHandlers({onPointAndEditInspectorEvent:async e=>{switch(e.type){case"commitEdits":{let t=await (0,nU.fT)(e.edits);t.error&&(s(er.F.enqueue({type:"point-and-edit-commit-error",message:(0,J.t)("figmake.point_and_edit.commit_error"),icon:nB.zX.EXCLAMATION,error:!0,timeoutOverride:5e3})),(0,n_.x1)("point_and_edit","Failed to commit edits",t,{reportAsSentryError:!0})),n?.flushSandboxSyncer?.(),p({type:"commitResult",inspectorId:e.inspectorId,result:t});break}case"setEditMode":m(e.mode);break;case"state":(0,nV.wG)(e.state);break;case"surrenderFocus":window.blur(),h.iframe?.focus();break;case"error":"no_instance_id"===e.error?(m({type:"prompt"}),s(er.F.enqueue({type:"point-and-edit-error",message:(0,J.t)("figmake.point_and_edit.error.no_instance_id"),icon:nB.zX.EXCLAMATION,error:!0,timeoutOverride:5e3})),(0,n_.x1)("point_and_edit","No instance ID found for target",{},{reportAsSentryError:!0})):s(er.F.enqueue({type:"point-and-edit-error",message:(0,J.t)("figmake.point_and_edit.error.unknown"),icon:nB.zX.EXCLAMATION,error:!0,timeoutOverride:5e3}));break;case"fullscreenUndoRedo":D.glU?.triggerActionEnum("undo"===e.action?D.rcl.UNDO:D.rcl.REDO,{})}}}),()=>{t.attachHandlers({onPointAndEditInspectorEvent:null})}),[p,s,t,n,m,h.iframe]),r.useEffect(()=>{let e=t.iframe;if(!e)return;let n=()=>{(0,nV.wG)({mode:"inactive"})},i=()=>{p({type:"appPointerEnter"})},r=()=>{p({type:"appPointerLeave"})},a=e=>{"Escape"===e.key&&p({type:"appEscape"})},s=e=>{e.target instanceof Element&&function(e){let t=e;for(;t;){if(t.hasAttribute&&(t.hasAttribute("data-point-and-edit-tool")||t.hasAttribute("data-floating-ui-portal"))||!t.isConnected)return!0;t=t.parentElement}return!1}(e.target)||t.pointAndEditControl({type:"elementSelect",element:void 0})};return"inactive"!==o.mode&&(document.addEventListener("keydown",a),document.addEventListener("pointerenter",i),document.addEventListener("pointerleave",r),document.addEventListener("pointerdown",s)),e.addEventListener("load",n),()=>{document.removeEventListener("keydown",a),document.removeEventListener("pointerenter",i),document.removeEventListener("pointerleave",r),document.removeEventListener("pointerdown",s),e.removeEventListener("load",n)}},[p,o.mode,t]),(0,i.jsx)(nV.ZW.Provider,{value:h,children:"inactive"!==h.mode&&(0,$.createPortal)((0,i.jsx)(i_,{overlayContainerRef:a},"point-and-edit-toolbar"),document.body)})}var ik=n(661441),iT=n(978165);function ij({state:e,sitesPreview:t,sandbox:n,chatNodeId:r,codeSelectionToRender:a,isVisible:s,onRefresh:o,overlayContainerRef:l}){let d=(0,iT.Ae)();return e===E.d.BUILD_ERROR||e===E.d.RUNTIME_ERROR?d?(0,i.jsx)("div",{className:"xh8yej3 x47corl",children:(0,i.jsx)(ik.ks,{})}):(0,i.jsx)("div",{className:"xh8yej3 x47corl",children:(0,i.jsx)(ik.rH,{})}):t&&r&&"instance"===a.type?(0,h.kc)().bake_point_and_edit?s?(0,i.jsx)(iw,{chatNodeId:r,preview:t,sandbox:n,overlayContainerRef:l}):null:(0,i.jsx)(nF,{preview:t,isVisible:s,refreshPreview:o,chatNodeId:r,codeInstanceNodeId:a.codeInstanceNodeGuid}):null}function iS({codeSelectionToRender:e,state:t,sitesPreview:n,sandbox:a,isVisible:s,disablePointerEvents:o,chatNodeId:l,dirty:d,hasInitialRender:c,iframeReady:u,iframeKey:m,iframeSrc:p,onIframeRef:h,onRefresh:f,onIframeLoad:g,overlayContainerRef:x}){let _=(0,I.Oc)(),y=(0,Q.P)(),b=(0,r.useRef)(h);b.current=h;let v=(0,r.useCallback)(e=>{b.current(e)},[]),C=(0,Z._6)(),w="fullscreen"===C.view?C.previewRoute:void 0;return(0,r.useEffect)(()=>{n&&w&&n.sendMessage("navigateToUrl",{url:w})},[n,w]),(0,i.jsx)("div",{className:"x78zum5 xdt5ytf x5yr21d xh8yej3 x1n2onr6",style:{backgroundColor:_?Y.Tj.bg:Y.Tj.bgSecondary},children:(0,i.jsx)("div",{className:"x5yr21d xh8yej3 x1n2onr6",children:(0,i.jsxs)("div",{className:"x10l6tqk x13vifvy x3m8u43 x1ey2m1c xu96u03 x9f619",style:{display:"flex",transition:"opacity 0.2s ease-in-out, filter 0.2s ease-in-out",filter:d?"blur(2px)":"none",pointerEvents:d?"none":"auto",opacity:u?1:0},children:[(0,i.jsx)(ij,{state:t,sitesPreview:n,sandbox:a,chatNodeId:l,codeSelectionToRender:e,isVisible:s,onRefresh:f,overlayContainerRef:x}),(0,i.jsx)("iframe",{title:(0,J.t)("sites.code_component.preview_title"),src:p,ref:v,allow:y,onLoad:g,...{0:{className:"x1bpp3o7 xh8yej3 x5yr21d x1lliihq"},4:{className:"x1bpp3o7 xh8yej3 x5yr21d x1lliihq x47corl"},2:{className:"x1bpp3o7 xh8yej3 x5yr21d x1s85apg"},6:{className:"x1bpp3o7 xh8yej3 x5yr21d x47corl x1s85apg"},1:{className:"x1bpp3o7 xh8yej3 x5yr21d x1s85apg"},5:{className:"x1bpp3o7 xh8yej3 x5yr21d x47corl x1s85apg"},3:{className:"x1bpp3o7 xh8yej3 x5yr21d x1s85apg"},7:{className:"x1bpp3o7 xh8yej3 x5yr21d x47corl x1s85apg"}}[!!o<<2|!!(t===E.d.BUILD_ERROR||t===E.d.RUNTIME_ERROR)<<1|!c<<0]},m)]})})})}function iI({state:e,disablePointerEvents:t,props:n,codeFileGuid:s,codeExportName:o,withBaseStyles:l,showViewOptions:d=!1,codeSelectionToRender:c,chatNodeId:u,instanceSwapPropertyGuids:R,imagePropAssetHashes:P,onChangePreviewState:O,jsxDev:D=!1,isFullscreen:L=!1,isVisible:F,onError:B,onBuild:U,productType:V,onRegisterIframeRefresh:H,onRegisterSitesPreview:z,surface:K,overlayContainerRef:W}){let q=(0,I.Oc)(),Y=(0,r.useRef)(null),J=(0,r.useRef)(null),[Z,Q]=(0,f.fp)(k.Y_),$=(0,f.md)(A.jD),ee=M({isFullscreen:L,codeSelectionToRender:c}),et="instance"===c.type?(0,a.UN)().get(c.codeInstanceNodeGuid):(0,a.UN)().get(c.codeBehaviorNodeGuid),en=(0,S.DM)(et),ei=(0,S.IO)(et),[,er]=(0,S.jT)(),[ea,es]=(0,f.fp)((0,v.df)(et?.guid??"")),eo=(0,f.md)(x.ze),el=(0,_.No)(),ed=el.unwrapOr(null)?.tier,[ec,eu]=(0,r.useState)(0),[em]=(0,r.useState)(()=>new G(V,new T.b({isFoundry:!1,surface:K}),new X({fileKey:eo,surface:K,planTier:ed}),eu)),[ep,eh]=(0,r.useState)(em.sitesPreview),[ef,eg]=(0,r.useState)(em.readyIframe),[ex,e_]=(0,r.useState)(em.isPreviewDirty),[ey,eb]=(0,r.useState)(!1);(0,r.useEffect)(()=>()=>{em.dispose()},[em]);let ev=(0,r.useCallback)(e=>{eg(e)},[]),eC=(0,r.useCallback)(()=>{O(E.d.BUILDING),(0,h.kc)().bake_point_and_edit||ep?.setDirectManipulationEnabled({enabled:!1}),U?.()},[O,U,ep]),eE=(0,r.useCallback)(e=>{O(E.d.LOADED),es(Date.now()),J.current=e},[O,es]),ew=(0,r.useCallback)(e=>{let t=()=>{let t=e.type!==y.m.FAILED,n=(0,m.N)().getSourceCodeHash();g.az.trackDefinedMetric("foundry.preview_render_result",{success:t,fileKey:eo??"",hitRenderTimeout:e.timedOut,isCachedPreview:!1,sourceCodeHash:n,productType:V,errorPhase:e.phase??"n/a",planTier:ed??void 0,buildType:"local",codeLibraryFormat:"0"})};switch(e.type){case y.m.FAILED:(0,C.lc)(),t();return;case y.m.SUCCESS:(0,C.GM)()&&((0,C.lc)(),(0,w.x)(u??void 0));break;default:(0,p.S9)(e.type,"Unknown iframe render result type")}eb(!0),O(E.d.LOADED),t()},[O,eo,V,ed,u]),ek=(0,r.useCallback)(e=>{f.zl.set(b.mK,e),eh(e)},[eh]),eT=(0,r.useCallback)(async(e,t)=>{t===S.S4.BUILD&&es(Date.now()),O(t===S.S4.BUILD?E.d.BUILD_ERROR:E.d.RUNTIME_ERROR);let n={type:"error",sender:"system",message:e.stack?J.current?.sourceMap?await (0,j.H)(e.stack,J.current.sourceMap):e.stack:`${e.name}: ${e.message}`,phase:t,timestamp:Date.now()},i=[...(0,S.Yb)(),n];er(e=>[...e,n]);let r=i.filter(e=>"error"===e.type).map(e=>e.message);B?.(e,t,r)},[J,ea,O,er,B,es]),ej=(0,r.useCallback)(async(e,t,n)=>{let i;"error"===e?i=(n=J.current?.sourceMap?await (0,j.H)(n,J.current.sourceMap):n).startsWith("Warning:")?{type:"warn",sender:t,message:n,timestamp:Date.now()}:{type:"error",sender:t,message:n,phase:S.S4.RUNTIME,timestamp:Date.now()}:(!(0,N.q)(n)||(0,N.D)())&&(i={type:e,sender:t,message:n,timestamp:Date.now()}),i&&er(e=>[...e||[],i])},[J,er]),eS=(0,r.useCallback)(()=>{er([])},[er]),eI=q||!(0,h.kc)().code_layers_zoom_controls,eA=(0,k.Wn)(s),eN=(0,f.md)(b.m1),eM=(()=>{switch(eN){case b.vO.IN_PROGRESS:case b.vO.AWAITING_COMMIT:return!0;case b.vO.COMMITTED:case b.vO.ERROR:case b.vO.IDLE:return!1;default:return(0,p.S9)(eN,!1,"Unknown chat message state")}})();(0,r.useLayoutEffect)(()=>{em.updateOptions({designToCodeGenerating:eA,chatMessageInProgress:eM,buildNumber:ei,nodeId:ee.id,codeBehaviorTargetNodeId:ee.behaviorTargetId,codeExportName:o,props:n,instanceSwapPropertyGuids:R,imagePropAssetHashes:P,activeBreakpoint:ee.breakpoint,clipContents:ee.clipContents,withBaseStyles:l,jsxDev:D,shadcn:eI,noWrapper:eI,allowScaling:!eI||void 0!==ee.behaviorTargetId,scaleLinearly:d&&Z,width:eI?void 0:ee.size?.x,height:eI?void 0:ee.size?.y,onSitesPreview:ek,onReadyIframe:ev,onPreviewDirty:e_,onError:eT,onConsoleLog:ej,onConsoleClear:eS,onBuildStart:eC,onBuildResult:eE,onRenderComplete:ew})},[eA,eM,ei,c.codeInstanceNodeGuid,o,n,R,P,ee,l,D,eI,ek,ev,e_,eT,ej,eS,eC,eE,ew,Z,d,em]);let eR=r.useCallback(e=>{Y.current=e,e?em.mountIframe(e):em.unmount()},[em]),eP=(0,r.useRef)(en),eO=(0,r.useRef)(O),eD=(0,r.useRef)(em);eP.current=en,eO.current=O,eD.current=em;let eL=(0,r.useCallback)(()=>{eD.current.previewUpdateTracker.triggerReload("user-triggered-reload"),eP.current(),eO.current(E.d.BUILDING),eD.current.forceRefresh(),eb(!1),(0,S.px)(),Y.current&&eu(e=>e+1)},[]);return(0,r.useEffect)(()=>{H&&H(eL)},[H,eL]),(0,r.useEffect)(()=>{z&&z(ep)},[z,ep]),(0,i.jsx)(iS,{chatNodeId:u,codeSelectionToRender:c,dirty:ex,disablePointerEvents:t,hasInitialRender:ey,iframeKey:ec.toString(),iframeReady:!!ef&&ef===Y.current,iframeSrc:$,isVisible:F,onIframeRef:eR,onRefresh:en,overlayContainerRef:W,sandbox:null,sitesPreview:ep,state:e})}var iA=n(895807),iN=n(943866),iM=n(63047),iR=n(857309),iP=n(51697),iO=n(569926),iD=n(673333),iL=n.n(iD),iF=n(575203),iB=n(366200),iU=n(117298),iV=n.n(iU),iH=n(963245);let iz=["The above error occurred in",`${iO.f.VITE} Failed to reload`],iG=[iO.f.NPM],iK=["system"],iW="preview_sandbox-loading",iq="preview_sandbox-error";function iX(e,t){return{type:"error",sender:"system",message:function(e){let t=e.stack??"";if(!((e.stack?.split("\n")??[])[0]??"").includes(e.message)){let n=e.name&&"Error"!==e.name?`${e.name}: ${e.message}`:e.message;t=`${n}
${t}`}return t.trim()}(e),phase:t,timestamp:Date.now()}}function iY({overlayContainerRef:e,state:t,disablePointerEvents:n,props:s,codeExportName:o,codeFileExportName:l,withBaseStyles:d,showViewOptions:c=!1,codeSelectionToRender:u,chatNodeId:_,instanceSwapPropertyGuids:v,onChangePreviewState:C,isFullscreen:w=!1,isVisible:T,sandbox:j,onError:P,onBuild:F,productType:B,onRegisterIframeRefresh:H,onRegisterSitesPreview:z}){let G=(0,I.Oc)(),K=(0,R.ft)(),W=(0,en.wA)(),q=M({isFullscreen:w,codeSelectionToRender:u}),X=(0,r.useRef)(null),Y=(0,x.tS)(),Z=(0,r.useRef)(null),Q=(0,f.md)(A.jD),[$,ee]=(0,r.useState)(!1),[et,ei]=(0,r.useState)(0),ea=j.perfTracker,eo=j.previewUpdateTracker,[,el]=(0,S.jT)(),ed=(0,f.md)(ni.Qt),[ec,eu]=(0,r.useState)(!1),em=(0,iM.Bg)(iW),ep=(0,iM.Bg)(iq),eh=(0,iN.ZC)(j.state),[ef,eg]=(0,r.useState)(null),[ex,e_]=(0,f.fp)(k.Y_),[ey,eb]=(0,r.useState)(null),ev=G||!(0,h.kc)().code_layers_zoom_controls,eC=(0,r.useRef)(null),eE=function({instanceSwapPropertyGuids:e,nodeId:t,codeBehaviorTargetNodeId:n,perfTracker:i}){let[a,s]=(0,r.useState)(null),o=(0,iB.w)(i),l=(0,iH.fh)(e,iV()),{imageHashes:d,fontKeys:c}=(0,es.wA)(e=>{let t=(0,t4.zN)(e);return{imageHashes:t?.imageImports?.map(e=>e.hash)??[],fontKeys:(D.t8O?.getLocalTextStyleFontInfo()||[]).map(e=>`${e.family}:${e.style}`).sort()}});return(0,r.useEffect)(()=>{U({instanceSwapPropertyGuids:l,nodeId:t,codeBehaviorTargetNodeId:n,perfTracker:o.current}).then(e=>{s({success:!0,bundle:e})}).catch(e=>{s({success:!1,error:e instanceof Error?e:Error(e?.toString()??"Unknown error")})})},[o,l,d,c,t,n]),a}({instanceSwapPropertyGuids:v,nodeId:q.id,codeBehaviorTargetNodeId:q.behaviorTargetId,perfTracker:ea}),ew=(0,r.useCallback)(()=>{Z.current&&ei(e=>e+1)},[]),ek=(0,r.useCallback)(()=>{eo.triggerReload("user-triggered-reload"),ew(),(0,S.px)()},[ew,eo]),eT=(0,r.useCallback)((e,t)=>{if(j.state===iR.TT.CACHED_PREVIEW){Y&&g.az.trackDefinedEvent("foundry.cache_preview_render",{fileKey:Y,sourceCodeHash:(0,m.N)().getSourceCodeHash(),success:!1,codeLibraryFormat:K.toString()});return}C(t===S.S4.BUILD?E.d.BUILD_ERROR:E.d.RUNTIME_ERROR);let n=iX(e,t),i=[...(0,S.Yb)(),n];el(e=>[...e,n]);let r=i.filter(e=>"error"===e.type).map(e=>e.message);P?.(e,t,r)},[C,el,P,j,Y,K]),ej=(0,r.useCallback)(()=>{ee(!0),(0,S.px)({prefixesToKeep:iG,sendersToKeep:iK})},[]),eS=(0,r.useCallback)(e=>{eo.handleBuildError(e),eT?.(e,S.S4.BUILD)},[eT,eo]),eI=(0,r.useCallback)(e=>{eo.handleRuntimeError(e),eT?.(e,S.S4.RUNTIME)},[eT,eo]),eA=(0,r.useCallback)((e,t)=>{let n=(0,a.UN)().get(q.id);n&&n.isAlive&&X.current&&(j.state===iR.TT.PROVISIONED||j.state===iR.TT.REPROVISIONING)&&t?.directManipulationEditor.processEvent(e,{objectPath:iA.og(n.codeFileFullPath),entries:m.N().asTransferableEntries(),codeBuildId:X.current})},[q.id,j.state]),eN=(0,r.useCallback)(()=>{eC.current&&eC.current.getTime()+1e3>Date.now()||(eo.startHMRUpdate(),(0,S.px)({prefixesToKeep:iG,sendersToKeep:iK}))},[eo]),eM=(0,r.useCallback)(({codeBuildId:e})=>{if(eC.current&&eC.current.getTime()+1e3>Date.now()){eC.current=null;return}eo.completeHMRUpdate(),C(E.d.LOADED),X.current=e},[C,eo]),eR=(0,r.useCallback)((e,t,n)=>{let i=(()=>{switch(e){case"debug":case"log":case"warn":if("system"===t&&!(0,N.D)())return null;return{type:e,sender:t,message:n,timestamp:Date.now()};case"error":if("user"===t)return{type:"error",sender:t,message:n,phase:S.S4.RUNTIME,timestamp:Date.now()};if(n.startsWith("Warning:"))return{type:"warn",sender:t,message:n,timestamp:Date.now()};if(/^\[vite\] \w*Error:/.test(n)){eC.current=new Date;let e=Error(n.replace(iO.f.VITE,"").trim());return e.stack=void 0,eT(e,S.S4.BUILD),null}if(iz.some(e=>n.startsWith(e)))return null;return{type:"error",sender:t,message:n,phase:S.S4.RUNTIME,timestamp:Date.now()};default:return(0,p.S9)(e,"Unknown console log type"),null}})();i&&el(e=>[...e,i])},[el,eT]),eP=(0,r.useCallback)(()=>{ea.record("import_module_start")},[ea]),eO=(0,r.useCallback)(()=>{ea.record("import_module_stop")},[ea]),eD=(0,r.useCallback)(()=>{ea.record("cached_preview_iframe_load_start")},[ea]),{attachIframeRenderer:eL,detachIframeRenderer:eF,sitesPreview:eB}=function({entrypoint:e,websiteBundleResult:t,codeNodeInfo:n,hideCodeLayersZoomControls:i,showViewOptions:a,codeExportName:s,codeFileExportName:o,withBaseStyles:l,scaleLinearly:d,props:c,instanceSwapPropertyGuids:u,renderHandlers:m,iframeHandlers:g,productType:x}){let[_,v]=(0,r.useState)(null),C=(0,iF.MF)(new A.fj({productType:x,previewSurfaceForLogging:"component_preview"})),[E,w]=(0,r.useState)(C.sitesPreview),k=(0,iB.w)(m),T=(0,iB.w)(g),j=(0,r.useRef)(!1),S=(0,r.useRef)(!1),[I,N]=(0,r.useState)(!1),M=(0,r.useCallback)(()=>{E&&(N(!1),v(new y.A(E)),T.current.onReady?.())},[E,T]),R=(0,r.useCallback)((e,t)=>{if((0,h.kc)().sts_iframe_recovery){if(j.current){(0,h.kc)().internal_only_debug_tools&&console.warn(`${iO.f.SITES_PREVIEW} iframe ${e} occurred but recovery already attempted`);return}(0,L.$D)(O.e.SITES_WEB_RUNTIME,t??Error(`iframe recovery triggered due to ${e}`),{extra:{errorType:e}}),j.current=!0,T.current.onIframeRecoveryNeeded?.(e,t)}},[T]),P=(0,r.useCallback)(e=>{T.current.onInspectElementEvent?.(e,E)},[T,E]),D=(0,r.useCallback)(({codeBuildId:e})=>{S.current?(S.current=!1,T.current.onIframeDirty("error-requiring-refresh")):T.current.onHMRAfterUpdate?.({codeBuildId:e})},[T]),F=(0,r.useCallback)(()=>{C.attachHandlers({...iL()(T.current,"onIframeDirty"),onIframeReady:M,onIframeRecoveryNeeded:R,onInspectElementEvent:P,onHMRAfterUpdate:D})},[T,M,P,D,R,C]),B=(0,r.useCallback)(({iframe:e})=>{N(!1),C.reset(),C.mountIframe(e,{useReactDev:!0});let t=C.createSitesPreview({history:new V.A,skipSetPreviewedNode:!0,options:{skipPreviewUpdateListener:!0,generateFullAssets:!0,withBaseStyles:l,usingSandbox:!0,labs:{runtimeDebugTools:!1}}});F(),w(t)},[F,w,C,l]),U=(0,r.useCallback)(()=>{v(null),C.reset(),w(null)},[v,C,w]);return(0,r.useEffect)(()=>{F()},void 0),(0,r.useEffect)(()=>{if(_){if(e){if(t){if(t.success){let r=!i||void 0!==n.behaviorTargetId,m=i?void 0:n.size?.x,h=i?void 0:n.size?.y;_.update({primitives:{nodeId:n.id,codeBehaviorTargetNodeId:n.behaviorTargetId,codeExportName:s,codeFileExportName:o,withBaseStyles:l,clipContents:n.clipContents,allowScaling:r,scaleLinearly:a&&d,width:m,height:h},deepEqual:{props:c??{},instanceSwapPropertyGuids:u,activeBreakpoint:n.breakpoint},pure:{referencedWebsiteBundle:t.bundle}},{deepEqual:{entrypoint:e}}),_?.render({onlyIfChanged:!0,onRenderStart:({reason:e})=>k.current.onRenderStart({reason:e})}).then(e=>{switch(I||e.type!==y.m.FAILED||(S.current=!0),e.type===y.m.SUCCESS&&N(!0),e.type){case y.m.NO_CHANGES:case y.m.NOT_INITIALIZED:case y.m.CANCELED:break;case y.m.SUCCESS:case y.m.FAILED:k.current.onRenderComplete(e);break;default:p.S9(e,null,"Unknown iframe render result type")}})}else _.update(t.error)}else _.update(null)}else _.update(null)}},void 0),(0,r.useEffect)(()=>{f.zl.set(b.mK,E)},[E]),(0,r.useEffect)(()=>()=>{_?.destroy()},[_]),{attachIframeRenderer:B,detachIframeRenderer:U,sitesPreview:E}}({entrypoint:ef,websiteBundleResult:eE,codeNodeInfo:q,hideCodeLayersZoomControls:ev,showViewOptions:c,codeExportName:o,codeFileExportName:l,withBaseStyles:d,scaleLinearly:ex,props:s,instanceSwapPropertyGuids:v,productType:B,renderHandlers:{onRenderStart:({reason:e})=>{ea.record("render_start"),eo.startTriggeredUpdate({isCachedPreview:ef?.type==="snapshot",reason:e}),(0,h.kc)().bake_point_and_edit||eB?.setDirectManipulationEnabled({enabled:!1}),F?.()},onRenderComplete:e=>{switch(eo.completeTriggeredUpdate(e),e.type){case y.m.SUCCESS:ea.setBuildMetadata({isBuildSuccessful:!0}),ea.record("render_stop"),ea.trackFigmentEvent(),g.az.trackDefinedMetric("foundry.preview_render_result",{success:!0,fileKey:Y??"",hitRenderTimeout:e.timedOut??!1,isCachedPreview:e.isCachedPreview,sourceCodeHash:e.sourceCodeHash,productType:B,errorPhase:"n/a",buildType:"foundry",codeLibraryFormat:K.toString(),planTier:j.previewUpdateTracker.getPlanTier()}),X.current=e.codeBuildId,eb(e.isCachedPreview?"snapshot":"sandbox"),C(E.d.LOADED);break;case y.m.FAILED:ea.setBuildMetadata({isBuildSuccessful:!1}),ea.record("render_stop"),ea.trackFigmentEvent(),g.az.trackDefinedMetric("foundry.preview_render_result",{success:!1,fileKey:Y??"",hitRenderTimeout:!1,isCachedPreview:e.isCachedPreview,sourceCodeHash:e.sourceCodeHash,productType:B,planTier:j.previewUpdateTracker.getPlanTier(),errorPhase:e.phase,buildType:"foundry",codeLibraryFormat:K.toString()}),eT?.(e.error,S.S4.BUILD);break;default:(0,p.S9)(e,"Unknown iframe render result type")}}},iframeHandlers:{onReady:ej,onBuildError:eS,onRuntimeError:eI,onHMRBeforeUpdate:eN,onHMRAfterUpdate:eM,onConsoleLog:eR,onImportModuleStart:eP,onImportModuleEnd:eO,onCachedPreviewIframeLoadStart:eD,onCachedPreviewIframeLoadEnd:(0,r.useCallback)(()=>{ea.record("cached_preview_iframe_load_stop")},[ea]),onInspectElementEvent:eA,onIframeRecoveryNeeded:(0,r.useCallback)(()=>{eo.triggerReload("error-recovery-triggered-reload"),ew()},[ew,eo]),onIframeDirty:(0,r.useCallback)(e=>{"error-requiring-refresh"===e?eo.triggerReload("user-error-triggered-reload"):(0,p.S9)(e,"Unknown iframe dirty reason"),ew()},[ew,eo])}}),eU=(0,r.useMemo)(()=>eB?.directManipulationEditor.directManipulationEnabledAtom??(0,f.eU)(!1),[eB]),eV=(0,f.md)(eU),eH=r.useCallback(e=>{Z.current!==e&&(C(E.d.BUILDING),eb(null),ee(!1),eF(),Z.current=e,e&&eL({iframe:e}))},[eL,eF,C]),ez=r.useCallback(()=>{C(E.d.BUILDING),ee(!1)},[C]);(0,r.useEffect)(()=>{(0,S.px)()},[q.id]),(0,r.useEffect)(()=>{H&&H(ek)},[H,ek]),(0,r.useEffect)(()=>{z&&z(eB)},[z,eB]),(0,r.useEffect)(()=>{switch(j.state){case iR.TT.FAILED:case iR.TT.PROVISIONING:case iR.TT.REPROVISIONING:eg(null);break;case iR.TT.CACHED_PREVIEW:eg({type:"snapshot",jsUrl:j.cachedPreview.jsUrl,cssUrl:j.cachedPreview.cssUrl});break;case iR.TT.PROVISIONED:eg({type:"sandbox",jsUrl:j.url}),(eh===iR.TT.REPROVISIONING||eh===iR.TT.FAILED)&&ew();break;default:(0,p.S9)(j,"Unknown sandbox state")}},[j,eh,ew]),(0,r.useEffect)(()=>(function({lifecycle:e,onError:t,onRecovery:n}){let i=e.on("vite_server_error",({data:e})=>{t(e)}),r=e.on("vite_server_recovered",()=>{n()});return()=>{i(),r()}})({lifecycle:eo.lifecycle,onError:({viteServerError:e,npmInstallError:t})=>{(0,S.px)(),t&&el(e=>[...e,iX(t,S.S4.BUILD)]),eT(e,S.S4.BUILD)},onRecovery:ew}),[eo,eT,ew,el]),(0,r.useEffect)(()=>{if(ec)return;let e=(0,m.N)(),t=()=>{eu(!0)};return e.on("change",t),()=>{e.off("change",t)}},[ec]);let eG=ec||ed||eV;return(0,r.useEffect)(()=>{switch(j.state){case iR.TT.PROVISIONING:break;case iR.TT.FAILED:em&&W(er.F.dequeue({matchType:iW})),!ep&&K>iP.tT&&W(er.F.enqueue({type:iq,message:(0,J.t)("figmake.error.live.preview"),button:{text:(0,J.t)("figmake.errors.retry"),action:()=>{j.reinitialize()}},preventDismissal:!0,timeoutOverride:1/0}));break;case iR.TT.REPROVISIONING:em&&W(er.F.dequeue({matchType:iW})),ep&&W(er.F.dequeue({matchType:iq}));break;case iR.TT.PROVISIONED:em&&"sandbox"===ey&&W(er.F.dequeue({matchType:iW})),ep&&"sandbox"===ey&&W(er.F.dequeue({matchType:iq}));break;case iR.TT.CACHED_PREVIEW:!em&&eG&&W(er.F.enqueue({type:iW,message:(0,J.t)("figmake.loading.live.preview"),icon:nB.zX.SPINNER,preventDismissal:!0,timeoutOverride:1/0}));break;default:(0,p.S9)(j,"Unknown sandbox state")}},[eG,j,ey,em,ep,K,W]),(0,r.useEffect)(()=>()=>{W(er.F.dequeue({matchType:iW})),W(er.F.dequeue({matchType:iq}))},[W]),(0,i.jsx)(iS,{chatNodeId:_,codeSelectionToRender:u,dirty:!1,disablePointerEvents:n,hasInitialRender:!!ey,iframeKey:et.toString(),iframeReady:$,iframeSrc:Q,isVisible:T,onIframeLoad:ez,onIframeRef:eH,onRefresh:ek,overlayContainerRef:e,sandbox:j,sitesPreview:eB,state:t})}function iJ(e){return e.sandbox?(0,i.jsx)(iY,{...e,sandbox:e.sandbox,surface:e.surface}):(0,i.jsx)(iI,{...e,surface:e.surface})}var iZ=n(268037);let iQ=(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5m-9-1A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm1.646 4.146a.5.5 0 0 0 0 .708L10.293 12l-1.147 1.146a.5.5 0 0 0 .708.708l1.5-1.5a.5.5 0 0 0 0-.708l-1.5-1.5a.5.5 0 0 0-.708 0M12.5 13a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var i$=n(382367);function i0(){let[e]=(0,S.jT)(),t=e?.filter(e=>"error"===e.type),[n,a]=(0,f.fp)(b.YD),s=(0,f.Xr)(b.Vo),[o,l]=r.useState(!1);return n||!t||0===t.length||o?null:(0,i.jsxs)("button",{className:"x10l6tqk x191j7n5 x1nrll8i xuuh30 x78zum5 xl56j7k x6s0dn4 x1jnr06f x1ihmbg5 xxvmw7z x1sxf85j xt970qd xfn1xvj x3brusf",onClick:()=>{s("console"),a(!0)},children:[(0,i.jsx)(iQ,{}),(0,i.jsx)("div",{children:(0,J.t)("living_designs.chat.errors.error_count",{count:t.length})}),(0,i.jsx)("button",{className:"x1ljf5od xjbqb8w",onClick:e=>{e.stopPropagation(),l(!0)},children:(0,i.jsx)(i$.f,{})})]})}function i1(){return(0,i.jsx)("div",{className:"x10l6tqk x10a8y8t x1vjfegm x78zum5 xl56j7k x6s0dn4 x47corl","data-testid":"html-preview-loading-overlay",children:(0,i.jsx)(l.k,{})})}function i2({overlayContainerRef:e,codeSelectionToRender:t,chatNodeId:n,jsxDev:s=!1,onPreviewStateChange:l,showViewOptions:c=!1,windowRef:m,isFullscreen:p,useProgressBarWhenLoading:h,isVisible:f,sandbox:g,onError:x,onBuild:_,disableDrawer:y=!1,disablePointerEvents:b=!1,onRegisterIframeRefresh:v,onRegisterSitesPreview:C,surface:w}){let k=t?.type==="instance"?t.codeInstanceNodeGuid:t?.type==="behavior"?t.codeInstanceNodeGuid:null,{componentPreviewState:T,setComponentPreviewState:j}=(0,E.k)(k),A=t?"instance"===t.type?(0,a.UN)().get(t.codeInstanceNodeGuid):(0,a.UN)().get(t.codeBehaviorNodeGuid):null,N=A?.isCodeComponent?A:A?.backingCodeComponent,M=A?.isCodeFile?A:N?.exportedFromCodeFile,R=M?(0,u.n)(g,M):void 0,{properties:P,instanceSwapPropertyGuids:O}=(0,S.Aw)(t),D=(0,r.useCallback)(e=>{j(e),l?.(e)},[l,j]);(0,S.pO)();let L=(0,I.Oc)(),F=(0,r.useMemo)(()=>{let e=[];for(let t of Object.values(P))"object"==typeof t&&"image"in t&&void 0!==t.image&&(e.push(t.image),void 0!==t.animatedImage&&e.push(t.animatedImage));return e},[P]),B=(0,r.useRef)(null),U=o.D.getState(),V=(0,d.v5)(U.selectedView,null);if((0,S.jS)(A),!t||!A)return null;let H=(0,u.d)(A);return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d xh8yej3 x1n2onr6",ref:B,children:[(0,i.jsx)(iJ,{chatNodeId:n,codeExportName:H,codeFileExportName:R,codeFileGuid:M?.guid,codeSelectionToRender:t,disablePointerEvents:b,imagePropAssetHashes:F,instanceSwapPropertyGuids:O,isFullscreen:p,isVisible:f,jsxDev:s,onBuild:_,onChangePreviewState:D,onError:x,onRegisterIframeRefresh:v,onRegisterSitesPreview:C,overlayContainerRef:e,productType:V,props:P,sandbox:g,showViewOptions:c,state:T,surface:w,withBaseStyles:!L}),(0,i.jsx)(i5,{codeSelectionToRender:t,componentPreviewState:T,disableDrawer:y,isFigmake:L,useProgressBarWhenLoading:h,windowRef:m})]})}function i5({codeSelectionToRender:e,componentPreviewState:t,disableDrawer:n,isFigmake:r,useProgressBarWhenLoading:a,windowRef:s}){let o=t===E.d.INITIAL||t===E.d.BUILDING;return(0,i.jsxs)(i.Fragment,{children:[!r&&!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(iZ._,{codeSelectionToRender:e,windowRef:s}),(0,i.jsx)(i0,{})]}),o&&(a?(0,i.jsx)(c.g,{}):(0,i.jsx)(i1,{}))]})}},504550:(e,t,n)=>{n.d(t,{D:()=>g,F:()=>x});var i=n(239976),r=n(105652),a=n(759370),s=n(466082),o=n(379141);n(323264);var l=n(499735),d=n(875253),c=n(880197),u=n(257279),m=n(946536),p=n(959382),h=n(870141),f=n(882681);function g({guids:e,recordingKey:t,hideVariableBinding:n,entrypoint:o="default",windowRef:g,behaviorPropAssignmentHelpers:x}){let _=(0,h.l)(),{typedPropDefsExcludingHidden:y,assignmentValuesByDefId:b}=(0,u.an)(e,c.OE.ASSIGNMENT,!0),{propAssignments:v,typedPropDefs:C,submitBehaviorAssignment:E,clearBehaviorVariableBinding:w,behaviorAssignmentInfo:k}=x??{propAssignments:b,typedPropDefs:y,submitBehaviorAssignment:void 0,clearBehaviorVariableBinding:void 0,behaviorAssignmentInfo:void 0};x&&(0,f.hZ)(C);let T=n||!!x,[j,S]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{S(!0)},[]),j)?(0,i.jsx)("div",{className:"x87ps6o",children:(0,i.jsx)(m.c,{assignmentValues:v,behaviorAssignmentInfo:k,clearBehaviorVariableBinding:w,containerWidth:c.O2.RESIZABLE_SIDEBAR,entrypointForInstanceSwapPicker:p.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL,forBubbledProps:!1,getInstanceSwapPickerPosition:(e,t,n,i)=>{let r=g?.current?.getBoundingClientRect(),a=e.getBoundingClientRect();return new d.Mi(a.left-(r?.left??0),a.top-(r?.top??0)+a.height+8)},guids:x?[]:e,hideBindingButton:T,hideIcon:T,instanceSwapPickerIdPrefix:"code-editor"===o?"code-editor-instance-swap-prop-assignment-picker-":void 0,recordingKey:l.Pt(t,"propDefs",a.uN.TYPED),sceneGraph:(0,s.UN)(),submitBehaviorAssignment:E,typedPropDefs:C,viewOnly:_})}):null}function x(){return(0,i.jsx)("div",{className:"xh8yej3 x5yr21d xl56j7k x78zum5 x6s0dn4 x1n0bwc9 x2b8uid",children:(0,o.t)("sites.code_component.drawer.properties_empty_state")})}},949484:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(434250);async function r(e,t){if(!e||!t)return e;try{let n=JSON.parse(t),r=await new i.SourceMapConsumer(n),a=e.split("\n").map(e=>{let t;let n=(t=e.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/))?{fnName:t[1],fileName:t[2],lineNumber:parseInt(t[3],10),columnNumber:parseInt(t[4],10)}:(t=e.match(/at\s+?(.+?):(\d+):(\d+)/))?{fnName:void 0,fileName:t[1],lineNumber:parseInt(t[2],10),columnNumber:parseInt(t[3],10)}:null;if(!n)return e;let i=r.originalPositionFor({line:n.lineNumber,column:n.columnNumber});return i.source&&null!==i.line?n.fnName?`    at ${n.fnName} (${i.source}:${i.line}:${i.column||0}${i.name?` [${i.name}]`:""})`:`    at ${i.source}:${i.line}:${i.column||0}${i.name?` [${i.name}]`:""}`:null}).filter(e=>null!==e),s=a.findIndex(e=>e.includes("figma:react-base"));if(-1!==s)return a.slice(0,s).join("\n");return a.join("\n")}catch(t){return console.warn("Error applying sourcemap:",t),e}}},629648:(e,t,n)=>{n.d(t,{Ld:()=>x,Mq:()=>E,R$:()=>_,Wg:()=>b,hg:()=>v,jy:()=>C});var i=n(105652),r=n(20002),a=n(445019),s=n(522568),o=n(304315),l=n(640753),d=n(682499),c=n(597562),u=n(865449),m=n(211464),p=n(736213),h=n(495004),f=n(696002),g=n(329983);let x=300,_=500,y=(0,l.Wh)(()=>(0,a.eU)(!1)),b=(0,a.eU)(x);function v(){let e=(0,a.md)(h.gn),t=(0,a.md)(h.u3),n=(0,a.md)(h.P1),r=(0,a.md)(h.sH);return i.useCallback(({initialWindowWidth:i,initialWindowHeight:a,clientX:s,clientY:o})=>{let l=i,d=a,c=e?r:1,u=s*c,m=o*c;return e&&null!==n&&(l=n.width,d=n.height,u+=(l-t)/2,m+=32),{windowWidth:l,windowHeight:d,mouseX:u,mouseY:m}},[e,r,t,n])}function C(){let e=(0,g.Oc)(),[t,n]=(0,a.fp)(y),s=(0,r.wA)(),l=(0,f.cf)(),h=(0,a.md)(d.mK),x=(0,a.md)(p.E),_=(0,m.z)("bake_point_and_edit"),b=i.useCallback(e=>{if(_){x?.control({type:"mode",mode:e?"comments":"inactive"});return}l&&h&&h.setDirectManipulationEnabled({enabled:e,codeInstanceGuid:l.guid,isCommentMode:!0})},[l,x,h,_]),v=i.useCallback(e=>{t&&b(e)},[b,t]),C=i.useCallback(()=>{e&&(b(!1),v(!0),n(!0))},[e,b,v,n]),E=i.useCallback(()=>{v(!1),s(o.js()),n(!1)},[s,n,v]),{componentPreviewState:w}=(0,u.k)(l?.guid),k=(0,a.md)(c.J),T=w===u.d.LOADED&&k.fileSequenceNumber>0;return i.useMemo(()=>({canEnableComments:T,isCommentModeActive:t,enableComments:C,disableComments:E,setPointAndEditCommentsActive:v}),[T,t,C,E,v])}let E=(e,t)=>({trackAddEvent:i.useCallback(()=>{s.az.trackDefinedEvent("comments.comment_screenshot_added",{fileKey:e,productType:t})},[e,t]),trackDeleteEvent:i.useCallback(()=>{s.az.trackDefinedEvent("comments.comment_screenshot_deleted",{fileKey:e,productType:t})},[e,t]),trackSubmitEvent:i.useCallback(()=>{s.az.trackDefinedEvent("comments.comment_submitted_with_screenshot",{fileKey:e,productType:t})},[e,t])})},66945:(e,t,n)=>{n.d(t,{q:()=>m});var i=n(646673),r=n(836848),a=n(798913),s=n(466082),o=n(19047),l=n(862390),d=n(62566),c=n(676670),u=n(830260);class m{constructor(e,t,n){this.editor=e,this.sendEditToPreview=t,this.displayErrorVisualBell=n}async addClassesToInspectedElements(e,t,n){this.editor.addLocalComputedStyleEditToSelectedNodes(e);let i=(0,l.dZ)(t),r=await this.editor.getCachedOrFetchCodeSnippets(!i);if(null===r){(0,o.x1)("direct_manipulation","No snippets found for addClassToInspectedElements",{},{reportAsSentryError:!0}),this.displayErrorVisualBell(i?"on_save":"on_selection");return}for(let t of r){let r=null;for(let i of e)r=this.addClassToInspectedElementAndPreview(i,t,r,n);i&&null!==r&&(r=(0,c.OI)({classNames:r,classToStyles:this.editor.selectedElementsClassToStyles}),await this.commitToCode({classNames:r,snippet:t}),this.editor.updateAnalyticsRecordClassNameEdit(n))}}addClassToInspectedElementAndPreview(e,t,n,i){if(null===n){let e=t.editingInfo.classNameAttribute;switch(e.type){case"static":n=e.value;break;case"not-set":n="";break;case"dynamic":case"dynamic-identifier":case"unknown":return(0,o.x1)("direct_manipulation","Unsupported jsx for addClassToInspectedElement",{type:e.type},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save"),n;default:(0,r.xb)(e)}}n=(0,c.t8)({existingClassNames:n,classToStyles:this.editor.selectedElementsClassToStyles,classToAdd:e});let a={};for(let t of e.cssRules){let e=t.property,n={property:e,value:t.value};for(let i of t.propertiesExpandedFromShorthand.length>0?t.propertiesExpandedFromShorthand:[e])a[i]=n}this.editor.addClassStyleFromLocalEdit(e.className,{className:e.className,styles:a,hasUnsupportedStyles:!1,type:"tailwind"});let s={};for(let t of e.cssRules)for(let e of t.propertiesExpandedFromShorthand.length>0?t.propertiesExpandedFromShorthand:[t.property])s[e]=t.computedStylesValue;let l={sourceCodeClassNames:n,sourceCodeJSXCallId:t.sourceCodeJSXCallId,classNameToInject:e.className,cssToInject:(0,c.L_)(e),expectedCSSProperties:Object.keys(s).length>0?s:void 0,analyticsPropertyName:i};return this.sendEditToPreview(l,!1),n}async commitToCode({classNames:e,allowedRetries:t=1,snippet:n}){let{folderPath:l,fileName:c}=n,m=(0,i.$v)((0,s.UN)(),l,c),p=!1;if(m){let t=n.editingInfo.classNameAttribute;(0,d.a)(()=>{a.l7.user("direct-manipulation",()=>{switch(t.type){case"static":(0,u.W)(m,n.collaborativeSourceCodeVersion,t.valueStartIndex,t.value,e)||(p=!0);break;case"not-set":{let i=` className="${e}"`;(0,u.W)(m,n.collaborativeSourceCodeVersion,t.insertIndex,"",i)||(p=!0);break}case"dynamic":case"dynamic-identifier":case"unknown":(0,o.x1)("direct_manipulation","Unsupported jsx for commitToCode",{type:t.type},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");break;default:(0,r.xb)(t)}})})}if(p){if(t>0){let n=await this.editor.getCachedOrFetchCodeSnippets(!1),i=n?.find(e=>e.sourceCodeJSXCallId==e.sourceCodeJSXCallId);if(!i){(0,o.x1)("direct_manipulation","Could not refresh snippet for commitToCode retry",{},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");return}await this.commitToCode({classNames:e,allowedRetries:t-1,snippet:i})}else(0,o.x1)("direct_manipulation","Unsuccessful code edit",{},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save")}else setTimeout(()=>{this.editor.fetchNewCodeSnippets()},0)}async resetClassNamesForPropertiesAndCommitToCode(e,t){let n=await this.editor.getCachedOrFetchCodeSnippets(!1);if(null===n){(0,o.x1)("direct_manipulation","No snippet found for resetClassNames",{},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");return}for(let i of n){let n=null,a=i.editingInfo.classNameAttribute;switch(a.type){case"static":n=a.value;break;case"not-set":n="";break;case"dynamic":case"dynamic-identifier":case"unknown":(0,o.x1)("direct_manipulation","Unsupported jsx for resetClassNames",{type:a.type},{reportAsSentryError:!0}),this.displayErrorVisualBell("on_save");return;default:(0,r.xb)(a)}let s={sourceCodeClassNames:n=(0,c.Lh)({existingClassNames:n,classToStyles:this.editor.selectedElementsClassToStyles,propertiesToReset:e}),sourceCodeJSXCallId:i.sourceCodeJSXCallId,classNameToInject:void 0,cssToInject:void 0,expectedCSSProperties:void 0,analyticsPropertyName:t};this.sendEditToPreview(s,!0),await this.commitToCode({classNames:n,snippet:i})}this.editor.clearLocalComputedStyleEditForSelectedNodes(e)}}},33877:(e,t,n)=>{n.d(t,{S:()=>l,m:()=>i});var i=(e=>(e.Text="text",e.Container="container",e.Border="border",e.Image="image",e.Spacing="spacing",e.Shadow="shadow",e))(i||{});let r=["p","h1","h2","h3","h4","h5","h6","span","label","button","a","input","textarea","select","option","ul","ol","li"],a=["body","div","header","footer","main","section","nav","article"],s=["img","video"],o={image:[...s],text:[...r],container:[...a,"button"],border:[...a,...s,"button","input","textarea"],spacing:[...r,...a,...s],shadow:[...a,...s]};function l(e,t){let n=[];return Object.entries(o).forEach(([i,r])=>{(r.includes(e.toLowerCase())||t&&"text"===i)&&n.push(i)}),n}},484131:(e,t,n)=>{n.d(t,{F:()=>i});function i(e,t){return{filePath:t.fullFilePath,snippetStartLine:t.jsxSnippet.snippetStartLine,tagLine:t.jsxSnippet.tagLine,snippet:t.jsxSnippet.code,tagName:e.tagName,fileImports:t.imports,componentHeader:t.componentHeader}}},526136:(e,t,n)=>{n.d(t,{DY:()=>u,HL:()=>c,m$:()=>m,xF:()=>d});var i=n(105652),r=n(20002),a=n(692376),s=n(854225),o=n(466082),l=n(725511);function d(){let e=(0,r.d4)(e=>e.fonts);return(0,i.useMemo)(()=>{let t={};for(let[n,i]of Object.entries(e)){let e=Object.fromEntries(Object.entries(i).filter(([e,t])=>t.source===s.jXp.GOOGLE));Object.keys(e).length>0&&(t[n]=e)}return t},[e])}function c(e,t){if(t.current){if(t.current.fontName?.family===e.fontFamily)return;t.current.removeSelfAndChildren(),t.current=null}let n=a.t8O?.getLocalTextStyleFontInfo();if(n){for(let t of n)if(t.family===e.fontFamily&&t.style===e.styleName)return}let i=(0,o.UN)().createStyle("TEXT");i.fontName={family:e.fontFamily,style:e.styleName,postscript:e.style.postscript},i.name=e.fontFamily,t.current=i}function u(e,t){let n=t[e];if(!n)return;let i=(0,l.a)(n);if(void 0===i)return;let r=n[i];if(!r)return;let a="Regular",s=r.styles[a];if(!s&&(a=Object.keys(r.styles)[0])&&(s=r.styles[a]),s&&a&&s.id)return{fontFamily:e,fontVersion:i,styleName:a,style:s,fontId:s.id,fontSource:r.source}}function m(e,t){let n=e.match(/("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[^,]+)/g);return n&&0!==n.length&&n.map(e=>e.trim().replace(/^["']|["']$/g,""))[0]||t}},723401:(e,t,n)=>{n.d(t,{T:()=>r});var i=n(105652);function r(){let[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null),[r,a]=(0,i.useState)(!1),s=(0,i.useCallback)(()=>{t(!0),a(!1),n.current&&(clearTimeout(n.current),n.current=null)},[]),o=(0,i.useCallback)(()=>{t(!1),a(!0),n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{a(!1),n.current=null},30)},[]),l=(0,i.useCallback)(t=>e||t.nativeEvent.isComposing||r,[e,r]);return(0,i.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),{isOrWasRecentlyComposing:l,handleCompositionStart:s,handleCompositionEnd:o}}},223976:(e,t,n)=>{n.d(t,{FH:()=>u,K6:()=>p,Q3:()=>h,X0:()=>f,dt:()=>m});var i=n(798913),r=n(466082),a=n(445019),s=n(522568),o=n(490894),l=n(640753);let d="figmake";async function c(e){return await (0,o.qV)(e)}async function u(e){let t=(0,r.UN)().get(e.sourceNodeGuid);if(!t)return;let n=await c(e.sourceFileKey);i.l7.system("set-plugin-data",()=>{let i=JSON.stringify({copyId:e.copyId,sourceFileKey:e.sourceFileKey,persistentEntityId:e.persistentEntityId,fileKeyHash:n});t.setPluginData(d,"m2d_track",i)})}let m=(0,l.Wh)(()=>(0,a.eU)(new Set));async function p(e,t){let n=(0,r.UN)().get(e);if(!n)return!1;let i=n.getPluginData(d,"m2d_node");return!!i&&i===await c(t)}function h(e){if(!e?.imports)return!1;let t=a.zl.get(m);return e.imports.some(e=>!!("node"===e.type&&t.has(e.guid)))}function f(e){let t=performance.now(),n=t,i={},r=!1,a=()=>{r||(r=!0,e.onPageHide())},o={once:!0};window.addEventListener("pagehide",a,o),window.addEventListener("beforeunload",a,o);let l=e=>{r?(0,s.sx)("html2design.html_to_design_performance",e,{sendAsBeacon:!0}):s.az.trackDefinedEvent("html2design.html_to_design_performance",e)};return{track:(t,r)=>{let a=performance.now(),s=a-n;n=a,r&&Object.assign(i,r),l({step:t,elapsedTimeMs:s,fileKey:e.fileKey,h2dSessionId:e.h2dSessionId,mode:e.mode,featureType:e.featureType,...i})},trackFromStart:(n,r)=>{let a=performance.now();r&&Object.assign(i,r),l({step:n,elapsedTimeMs:a-t,fileKey:e.fileKey,h2dSessionId:e.h2dSessionId,mode:e.mode,featureType:e.featureType,...i})},trackError:(n,r)=>{let a=performance.now(),s=r instanceof Error?r.message:String(r);l({step:n,elapsedTimeMs:a-t,fileKey:e.fileKey,h2dSessionId:e.h2dSessionId,mode:e.mode,featureType:e.featureType,...i,error:!0,errorMessage:s})},removeEventListeners:()=>{window.removeEventListener("pagehide",a),window.removeEventListener("beforeunload",a)}}}},375836:(e,t,n)=>{n.d(t,{dq:()=>d,fT:()=>o});var i=n(25378),r=n(298388),a=n(466082),s=n(563467);async function o(e){let t={applyEditsOptions:[],clearEditIds:[]};try{for(let n of e.reduce((e,t)=>{if(!t.filePath)throw Error("File path is required for edit");if(!t.fileVersion)throw Error(`File version is required for edit: ${t.filePath}`);if(!t.fileGuid)throw Error(`File GUID is required for edit: ${t.filePath}, version: ${t.fileVersion}`);let n=e.find(e=>e.filePath===t.filePath&&e.fileVersion===t.fileVersion&&e.fileGuid===t.fileGuid);return n?n.fileEdits.push(t):e.push({fileGuid:t.fileGuid,filePath:t.filePath,fileVersion:t.fileVersion,fileEdits:[t]}),e},[]))await l(n.fileGuid,n.filePath,n.fileVersion,n.fileEdits,t)}catch(n){t.clearEditIds=e.map(e=>e.editId).filter(Boolean),n instanceof Error?t.error={message:n.message,stack:n.stack}:t.error={message:String(n)}}return t}async function l(e,t,n,o,l){let d={fileGuid:e,filePath:t,fileVersion:n,code:"",edits:o,validateOutput:!0};l.applyEditsOptions.push(d);let c=(0,a.UN)().get(e);if(!c)throw Error(`commitEdits code file node not found: ${e}`);d.code=c.sourceCode;let u=await (0,s.ct)(d);if(u.errors&&u.errors.length>0)throw Error("Source code update failed: "+u.errors[0].message);u.hasChanges?c.sourceCode=u.code:l.clearEditIds.push(...o.map(e=>e.editId).filter(Boolean)),u.globalStyleEdit&&function(e,t){let{globalStyleEdit:n}=e;if(!n)return;let i=t.listFiles({extensions:["css"]}).find(e=>e.path.endsWith("globals.css"));if(i||(i=new r.$("styles/globals.css","",{guid:"globals.css",collaborativeVersion:"1",assetVersion:"1",isEntrypoint:!0,isUsedEntrypoint:!0})),!i||!i.metadata.guid){console.error("commitEdits globals.css file not found");return}let s=i.metadata.guid,o=(0,a.UN)().get(s);if(!o){console.error(`commitEdits code file node not found: ${s}`);return}let l=o.collaborativeSourceCode;if(!l){console.error(`commitEdits collaborative source code not found: ${s}`);return}let d=l.textLengthInWideChars();l.startBatch(),l.createInsertionOp(d,n.length,n,0),l.endBatch()}(u,(0,i.N)())}function d(e){try{if(!e)return null;let t=(0,a.UN)().get(e);if(!t)return console.error(`commitEdits code file node not found: ${e}`),null;let n=t.collaborativeSourceCode;if(!n)return console.error(`commitEdits collaborative source code not found: ${e}`),null;return n}catch(e){return console.error("getCollaborativeCodeNode error",e),null}}},591408:(e,t,n)=>{n.d(t,{Fo:()=>R,df:()=>M,uA:()=>P});var i=n(239976),r=n(105652),a=n(607696),s=n(846779),o=n(524326),l=n(378721),d=n(441498),c=n(35940),u=n(466082),m=n(379141),p=n(445019);n(323264);var h=n(17147),f=n(223487),g=n(207436),x=n(605985),_=n(395823),y=n(682499),b=n(183290),v=n(368417),C=n(973407),E=n(934985),w=n(820198),k=n(445602),T=n(351572),j=n(203250),S=n(329983),I=n(375836),A=n(736213),N=n(441740);function M({initialPrompt:e}){let[t,n]=r.useState(e??""),{chatNodeId:I,selectedJsxSource:M}=(0,A.jK)(),{setChatError:O,clearChatError:D}=(0,C.tk)(I),L=(0,x.iZ)(),F=(0,f.tS)(),B=(0,_.Xu)(),U=(0,w.GM)(),V=r.useMemo(()=>(0,u.UN)().get(I),[I]),H=(0,v.KF)({chatMessagesNode:V}),z=(0,S.Oc)(),G=z?a.lV.FIGMAKE:a.lV.CODE_IN_SITES,{changedFiles:K}=(0,E.E)(V,H,G,{shouldIncludeFile:z?s.ru:void 0}),W=(0,k.L)(),q=G===a.lV.FIGMAKE?W:void 0,X=async()=>{if(!Y&&M)try{D();let e=R(M);if(!e)return;let i=P(M,t);n(""),await (0,T.v)({featureType:G,userMessageContent:{plainText:t,inspectedElement:e},user:L,chatMessagesNode:V,chatController:H,rawUserChatDetails:i,setInput:n,fileKey:F,canUseSupabase:B,todoAutoAccept:U,changedFiles:K,model:q,autoFixingUserMessageId:null,requestInitiator:a.bG.USER,canUseMcpConnectors:!1})}catch(e){O(e instanceof Error?{error:e}:{error:Error("Unknown error")})}},Y=(0,j.ry)(),J=(0,p.md)(y.mK),Z=(0,g.KP)(),{exchange:Q,user:$}=(0,b.$W)(I),ee=void 0!==Q&&Q.messages.length>0,et=$?.sessionID===Z,en=r.useRef(null);r.useEffect(()=>{if(window.focus(),en.current){en.current.focus();let e=en.current.value.length;en.current.setSelectionRange(e,e)}},[]);let ei=!(0,h.jN)(t)&&!ee&&H.isInitialized,er=(0,p.md)((0,b.Z3)(I)),ea=Y||!M,es=r.useCallback(()=>{if(en&&"current"in en&&en.current){let e=en.current;e.style.height="auto";let t=Math.min(e.scrollHeight,32);e.style.height=`${t}px`,e.style.overflowY=t>=32?"auto":"hidden"}},[]);r.useEffect(()=>{es()},[t,es]);let eo=r.useCallback(e=>{let t=e.target;es(),n(t.value)},[n,es]),el=ee?(0,i.jsx)("div",{...{0:{className:"x16rqkct x2lah0s xgbcquw"},1:{className:"x16rqkct x2lah0s xu5wzci"}}[!!ei<<0],children:(0,i.jsx)(l.K,{"aria-label":(0,m.t)("living_designs.chat.stop_button.alt_text"),onClick:()=>{er&&er.abort((0,o.NK)(o.XD.USER_ABORTED))},disabled:!et,children:(0,i.jsx)(c.Q,{className:"xwa2v1s"})})}):(0,i.jsx)("div",{...{0:{className:"x16rqkct x2lah0s xgbcquw"},1:{className:"x16rqkct x2lah0s xu5wzci"}}[!!ei<<0],children:(0,i.jsx)(l.K,{type:"submit","aria-label":(0,m.t)("living_designs.chat.send_button.alt_text"),onClick:X,disabled:!ei,children:(0,i.jsx)(d.W,{className:"xwa2v1s"})})});return(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),ei&&X()},children:(0,i.jsxs)("div",{className:"x1vqgdyp x1n2onr6 xrvj5dj x52fmzj xb3r6kr x6s0dn4",children:[(0,i.jsxs)("div",{className:"xrvj5dj x6s0dn4",children:[(0,i.jsx)("label",{htmlFor:"code-chat-chat-box",className:N.Q,children:(0,m.t)("living_designs.chat.placeholder.iterate")}),(0,i.jsx)("textarea",{id:"code-chat-chat-box",rows:1,ref:en,className:"xtt52l0 x1hshjfz xt970qd xdqyycr xfifm61 x1dz1jew xjbqb8w x1f4nttd",disabled:ea,maxLength:5e3,onChange:eo,onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),ei&&(X(),J?.pointAndEditControl({type:"mode",mode:"inactive"})))},placeholder:(0,m.t)("living_designs.chat.placeholder.iterate"),value:t})]}),(0,i.jsx)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 xt970qd xaope02",children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0},children:(0,i.jsx)("div",{style:{flexShrink:0},children:el})})})]})})}function R(e){if(!e)return;let t=(0,I.dq)(e.fileGuid);if(!t){console.warn(`collaborative source code not found for file: ${e.fileGuid}`);return}let n=t.computeCurrentText().substring(e.pos,e.pos+e.len);return{filePath:e.filePath,snippetStartLine:e.line,tagLine:e.line+1,snippet:n,tagName:"element"===e.type?e.name:""}}function P(e,t){return{rawUserMessage:t,attachments:[{type:"inspectedElement",nodeGuid:e?.fileGuid||"",label:"",inspectedElementSources:[{sourceCodeJSXCallId:e?.sourceId||"",fullFilePath:e?.filePath||"",unstrippedFullFilePath:e?.filePath||"",line:e?.line||0,column:e?.column||0,displayName:e?.type==="element"?e.name:""}]}]}}},495004:(e,t,n)=>{n.d(t,{L9:()=>T,P1:()=>E,WW:()=>g,Yd:()=>S,Yh:()=>k,dD:()=>b,fw:()=>w,g_:()=>j,gn:()=>_,sH:()=>C,u3:()=>v});var i=n(239976),r=n(105652),a=n(20002),s=n(730436),o=n(454705),l=n(379141),d=n(445019);n(323264);var c=n(237494),u=n(964731),m=n(640753),p=n(181516),h=n(248046),f=(e=>(e.ANDROID_COMPACT="ANDROID_COMPACT",e.ANDROID_MEDIUM="ANDROID_MEDIUM",e.CUSTOM="CUSTOM",e.IPHONE_16="IPHONE_16",e.IPHONE_16_PRO="IPHONE_16_PRO",e.IPHONE_16_PRO_MAX="IPHONE_16_PRO_MAX",e.IPHONE_16_PLUS="IPHONE_16_PLUS",e.IPHONE_SE="IPHONE_SE",e))(f||{});let g={ANDROID_COMPACT:{width:412,height:917},ANDROID_MEDIUM:{width:700,height:840},CUSTOM:{width:void 0,height:void 0},IPHONE_16:{width:393,height:852},IPHONE_16_PRO:{width:402,height:874},IPHONE_16_PRO_MAX:{width:440,height:956},IPHONE_16_PLUS:{width:430,height:932},IPHONE_SE:{width:320,height:568}},x="IPHONE_16",_=(0,m.rt)(!1),y=(0,m.rt)(x),b=(0,m.rt)(g[x].height||852),v=(0,m.rt)(g[x].width||393),C=(0,m.rt)(1),E=(0,m.rt)(null),w=320,k=320,T=3e3,j=3e3;function S(){let e=(0,a.wA)(),[t,n]=(0,d.fp)(_),[m,f]=(0,d.fp)(b),[C,E]=(0,d.fp)(v),[S,I]=(0,d.fp)(y),A=(0,u.Um)(),N=(0,i.jsx)(s.X,{className:"x52n8ys"}),M=r.useCallback(e=>{e&&f(Math.min(Math.max(e,w),T))},[f]),R=r.useCallback(e=>{e&&E(Math.min(Math.max(e,k),j))},[E]),P=r.useCallback(e=>{I(e);let t=g[e];R(t?.width),M(t?.height)},[M,R,I]);if(r.useEffect(()=>{C!==g[S]?.width&&P("CUSTOM")},[S,C,P]),!t)return null;let O={ANDROID_COMPACT:(0,l.t)("figmake.mobile_preview.options.android_compact"),ANDROID_MEDIUM:(0,l.t)("figmake.mobile_preview.options.android_medium"),CUSTOM:(0,l.t)("figmake.mobile_preview.options.custom"),IPHONE_16:(0,l.t)("figmake.mobile_preview.options.iphone_16"),IPHONE_16_PRO:(0,l.t)("figmake.mobile_preview.options.iphone_16_pro"),IPHONE_16_PRO_MAX:(0,l.t)("figmake.mobile_preview.options.iphone_16_pro_max"),IPHONE_16_PLUS:(0,l.t)("figmake.mobile_preview.options.iphone_16_plus"),IPHONE_SE:(0,l.t)("figmake.mobile_preview.options.iphone_se")};return(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1n2onr6 x1qughib xxk0z11 x1yjdb4r xso031l x1y0btm7 x7z60cl xe8ttls","data-testid":"mobile-preview-toolbar",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1i9suas x1ncir08 x2lah0s",children:(0,i.jsx)(h.l6,{dispatch:e,dropdownAlignment:"left",dropdownShown:A,dropdownWidth:240,formatter:{format:e=>O[e??x]},id:"mobile-preview-option",neverConstrain:!0,onChange:e=>{P(e)},openBelowTarget:!0,property:S??x,children:Object.entries(g).map(([e])=>{let t=g[e].width,n=g[e].height;return(0,i.jsx)(h.c$,{value:e,selected:S===e,children:(0,i.jsxs)("div",{className:"x11r6d5e xh8yej3 x140o2bo",children:[(0,i.jsx)("div",{className:"x1n9xxwz xxymvpz xb3r6kr xlyipyv xuxw1ft xygnafs",children:O[e]}),t&&n?(0,i.jsx)(o.J,{mode:"dark",children:(0,i.jsx)("div",{className:"x1n9xxwz xxymvpz x1hr2gdg x1n0bwc9 xuxw1ft",children:(0,l.t)("figmake.mobile_preview.labels.aspect_ratio",{width:t,height:n})})}):null]})},e)})})}),(0,i.jsxs)("div",{className:"x10l6tqk x1nrll8i xwa60dl x11lhmoz x78zum5 x167g77z x1vjfegm",children:[(0,i.jsxs)("div",{className:"x1n2onr6 x29ncy0 x1rg5ohu",children:[(0,i.jsx)("span",{className:"x10l6tqk xncym2f x19up5dg xwa60dl x1cb1t30 x52n8ys x47corl x1j6dyjg x1vjfegm",children:(0,l.t)("figmake.mobile_preview.labels.width")}),(0,i.jsx)(p.Q7,{className:"xd3ty66 x1v8gsql xmkeg23 x1y0btm7 x9r1u3d x3sae66 xl0cjzi",property:C,formatter:new c.KD,allowEmpty:!1,autoFocus:!1,disabled:!1,onChange:e=>{R(e)}})]}),(0,i.jsxs)("div",{className:"x1n2onr6 x29ncy0 x1rg5ohu",children:[(0,i.jsx)("span",{className:"x10l6tqk xncym2f x19up5dg xwa60dl x1cb1t30 x52n8ys x47corl x1j6dyjg x1vjfegm",children:(0,l.t)("figmake.mobile_preview.labels.height")}),(0,i.jsx)(p.Q7,{className:"xd3ty66 x1v8gsql xmkeg23 x1y0btm7 x9r1u3d x3sae66 xl0cjzi",property:m,formatter:new c.KD,allowEmpty:!1,autoFocus:!1,disabled:!1,onChange:e=>{M(e)}})]})]}),(0,i.jsx)("button",{className:"x78zum5 x6s0dn4 xl56j7k x1td3qas x10w6t97 x2lah0s xjbqb8w xv2f06h x12oqio5 x1t3whoi",onClick:()=>n(!1),children:N})]})}},661441:(e,t,n)=>{n.d(t,{UA:()=>c,ks:()=>d,rH:()=>l,w7:()=>u});var i=n(239976),r=n(813928),a=n(693613),s=n(379141);n(323264);var o=n(346942);function l(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1udnhko",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,s.tx)("figmake.error_overlay.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,s.tx)("figmake.error_overlay.subtitle")})]})]})}function d(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(p,{}),(0,i.jsx)(o.Kz,{direction:"y",multiple:2.5}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1udnhko",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,s.tx)("figmake.error_overlay.private_npm_package.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,s.tx)("figmake.error_overlay.private_npm_package.subtitle")})]})]})}function c(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1udnhko",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,s.tx)("figmake.error_overlay.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,s.tx)("figmake.error_overlay.subtitle_library")})]})]})}function u(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f xl56j7k x5yr21d xh8yej3",children:[(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1jnr06f x1udnhko",children:[(0,i.jsx)("div",{className:"xiqqdae xkezfkh",children:(0,s.tx)("figmake.embed.error_overlay.header")}),(0,i.jsx)("div",{className:"x17akokd x1n0bwc9 x2b8uid",children:(0,s.tx)("figmake.embed.error_overlay.subtitle")})]})]})}function m(){return(0,i.jsx)("div",{className:"x1n2onr6 x1jn9k7v x1llg2sp",children:(0,i.jsxs)("svg",{className:"x10l6tqk x41qcxd xbzw7ph",width:"417",height:"423",viewBox:"0 0 417 423",fill:"none",children:[(0,i.jsx)("path",{d:"M1 1V32H32V1H1ZM1 289V320H32V289H1ZM33 289V320H64V289H33ZM65 289V320H96V289H65ZM97 289V320H128V289H97ZM129 289V320H160V289H129ZM161 289V320H192V289H161ZM193 289V320H224V289H193ZM225 289V320H256V289H225ZM257 289V320H288V289H257ZM289 289V320H320V289H289ZM321 289V320H352V289H321ZM353 289V320H384V289H353ZM385 289V320H416V289H385ZM1 257V288H32V257H1ZM33 257V288H64V257H33ZM65 257V288H96V257H65ZM97 257V288H128V257H97ZM129 257V288H160V257H129ZM161 257V288H192V257H161ZM193 257V288H224V257H193ZM225 257V288H256V257H225ZM257 257V288H288V257H257ZM289 257V288H320V257H289ZM321 257V288H352V257H321ZM353 257V288H384V257H353ZM385 257V288H416V257H385ZM1 225V256H32V225H1ZM33 225V256H64V225H33ZM65 225V256H96V225H65ZM97 225V256H128V225H97ZM129 225V256H160V225H129ZM161 225V256H192V225H161ZM193 225V256H224V225H193ZM225 225V256H256V225H225ZM257 225V256H288V225H257ZM289 225V256H320V225H289ZM321 225V256H352V225H321ZM353 225V256H384V225H353ZM385 225V256H416V225H385ZM1 193V224H32V193H1ZM33 193V224H64V193H33ZM65 193V224H96V193H65ZM97 193V224H128V193H97ZM129 193V224H160V193H129ZM161 193V224H192V193H161ZM193 193V224H224V193H193ZM225 193V224H256V193H225ZM257 193V224H288V193H257ZM289 193V224H320V193H289ZM321 193V224H352V193H321ZM353 193V224H384V193H353ZM385 193V224H416V193H385ZM1 161V192H32V161H1ZM33 161V192H64V161H33ZM65 161V192H96V161H65ZM97 161V192H128V161H97ZM129 161V192H160V161H129ZM161 161V192H192V161H161ZM193 161V192H224V161H193ZM225 161V192H256V161H225ZM257 161V192H288V161H257ZM289 161V192H320V161H289ZM321 161V192H352V161H321ZM353 161V192H384V161H353ZM385 161V192H416V161H385ZM1 129V160H32V129H1ZM33 129V160H64V129H33ZM65 129V160H96V129H65ZM97 129V160H128V129H97ZM129 129V160H160V129H129ZM161 129V160H192V129H161ZM193 129V160H224V129H193ZM225 129V160H256V129H225ZM257 129V160H288V129H257ZM289 129V160H320V129H289ZM321 129V160H352V129H321ZM353 129V160H384V129H353ZM385 129V160H416V129H385ZM1 97V128H32V97H1ZM33 97V128H64V97H33ZM65 97V128H96V97H65ZM97 97V128H128V97H97ZM129 97V128H160V97H129ZM161 97V128H192V97H161ZM193 97V128H224V97H193ZM225 97V128H256V97H225ZM257 97V128H288V97H257ZM289 97V128H320V97H289ZM321 97V128H352V97H321ZM353 97V128H384V97H353ZM385 97V128H416V97H385ZM1 65V96H32V65H1ZM33 65V96H64V65H33ZM65 65V96H96V65H65ZM97 65V96H128V65H97ZM129 65V96H160V65H129ZM161 65V96H192V65H161ZM193 65V96H224V65H193ZM225 65V96H256V65H225ZM257 65V96H288V65H257ZM289 65V96H320V65H289ZM321 65V96H352V65H321ZM353 65V96H384V65H353ZM385 65V96H416V65H385ZM1 33V64H32V33H1ZM33 33V64H64V33H33ZM65 33V64H96V33H65ZM97 33V64H128V33H97ZM129 33V64H160V33H129ZM161 33V64H192V33H161ZM193 33V64H224V33H193ZM225 33V64H256V33H225ZM257 33V64H288V33H257ZM289 33V64H320V33H289ZM321 33V64H352V33H321ZM353 33V64H384V33H353ZM385 33V64H416V33H385ZM33 32H64V1H33V32ZM65 32H96V1H65V32ZM97 32H128V1H97V32ZM129 32H160V1H129V32ZM161 32H192V1H161V32ZM193 32H224V1H193V32ZM225 32H256V1H225V32ZM257 32H288V1H257V32ZM289 32H320V1H289V32ZM321 32H352V1H321V32ZM353 32H384V1H353V32ZM385 32H416V1H417V321H0V0H416V1H385V32Z",fill:"url(#paint0_radial_11338_118262)"}),(0,i.jsx)("rect",{x:"141.5",y:"114.5",width:"133",height:"91",rx:"13.5",fill:a.Tj.bg,stroke:a.Tj.bgDesktopFullscreenDisabled,strokeDasharray:"4 4"}),(0,i.jsx)("rect",{x:"150",y:"131",width:"116",height:"66",rx:"5",fill:a.Tj.bgSecondary}),(0,i.jsx)("rect",{x:"198.233",y:"183.723",width:"3.7211",height:"7.44221",transform:"rotate(-90 198.233 183.723)",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"205.676",y:"183.723",width:"3.7211",height:"7.44221",transform:"rotate(-90 205.676 183.723)",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"195.443",y:"152.094",width:"3.7211",height:"13.9541",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"214.979",y:"158.605",width:"3.7211",height:"7.44221",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"188",y:"147.443",width:"3.7211",height:"3.7211",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"191.722",y:"143.721",width:"3.7211",height:"3.7211",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"195.443",y:"140",width:"3.7211",height:"3.7211",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"221.49",y:"150.231",width:"3.7211",height:"3.7211",transform:"rotate(90 221.49 150.231)",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"217.769",y:"146.51",width:"3.7211",height:"3.7211",transform:"rotate(90 217.769 146.51)",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"225.211",y:"150.23",width:"3.7211",height:"3.7211",transform:"rotate(90 225.211 150.23)",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"228.933",y:"146.51",width:"3.7211",height:"3.7211",transform:"rotate(90 228.933 146.51)",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("circle",{cx:"153",cy:"125",r:"2",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("circle",{cx:"160",cy:"125",r:"2",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("circle",{cx:"167",cy:"125",r:"2",fill:a.Tj.bgDisabledSecondary}),(0,i.jsx)("rect",{x:"257.5",y:"101.5",width:"33",height:"33",rx:"16.5",fill:a.Tj.bg}),(0,i.jsx)("rect",{x:"257.5",y:"101.5",width:"33",height:"33",rx:"16.5",stroke:a.Tj.bgDesktopFullscreenDisabled,strokeDasharray:"4 4"}),(0,i.jsx)("path",{d:"M272.359 111.938C273.131 110.763 274.869 110.763 275.641 111.938L275.715 112.059L280.592 120.73L280.657 120.854C281.271 122.142 280.336 123.663 278.878 123.663H269.123C267.618 123.663 266.67 122.042 267.408 120.73L272.286 112.059L272.359 111.938ZM274.844 112.55C274.474 111.892 273.527 111.892 273.157 112.55L268.28 121.221C267.94 121.826 268.328 122.564 268.988 122.654L269.123 122.663H278.878L279.013 122.654C279.629 122.57 280.008 121.921 279.78 121.343L279.721 121.221L274.844 112.55ZM274.001 119.763C274.301 119.763 274.544 120.007 274.545 120.307C274.545 120.608 274.301 120.852 274.001 120.852C273.7 120.852 273.456 120.608 273.456 120.307C273.456 120.007 273.7 119.763 274.001 119.763ZM274.001 114.421C274.277 114.421 274.5 114.645 274.501 114.921V118.307C274.501 118.583 274.277 118.807 274.001 118.807C273.724 118.807 273.501 118.583 273.501 118.307V114.921C273.501 114.645 273.725 114.421 274.001 114.421Z",fill:a.Tj.bgDesktopFullscreenDisabled}),(0,i.jsx)("defs",{children:(0,i.jsxs)("radialGradient",{id:"paint0_radial_11338_118262",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(201.861 160.5) rotate(90.346) scale(138.026 214.208)",children:[(0,i.jsx)("stop",{stopColor:a.Tj.iconSecondary,stopOpacity:"0.4"}),(0,i.jsx)("stop",{offset:"1",stopColor:a.Tj.bg,stopOpacity:"0"})]})})]})})}function p(){return(0,i.jsx)("div",{className:"x1n2onr6 x78zum5 x6s0dn4 xl56j7k",children:(0,i.jsxs)("div",{className:"x1n2onr6 x78zum5 x1q0g3np x6s0dn4 x1qughib x883omv x7z7khe x1yjdb4r xov4sik xbsl7fq x1dqav3q x9j24ef",children:[(0,i.jsx)("div",{className:"x77xole x1uf090u x1qm6cem x1kogg8i"}),(0,i.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x138qzmi x1uf090u x182awcm x1kogg8i",children:(0,i.jsx)(r.i,{className:"x14qfxbe xc9qbxq xmauxvm"})})]})})}},924278:(e,t,n)=>{n.d(t,{GA:()=>u,PM:()=>h,ZO:()=>p});var i=n(105652),r=n(445019),a=n(391596),s=n(223487),o=n(640753),l=n(395823),d=n(947700),c=n(997129);let u=(0,o.Wh)(()=>(0,r.eU)("")),m=(0,o.Wh)(()=>(0,r.eU)([]));function p(){r.zl.set(m,[])}function h(){let e=(0,s.tS)(),t=(0,l.Xu)(),[n,o]=(0,r.fp)(m),p=(0,r.md)(u),{connectedProject:h}=(0,c.GC)(),[f]=(0,a.IT)((0,d.gZ)({fileKey:e,functionName:"make-server"}),{enabled:!!h&&t});return(0,i.useEffect)(()=>{if(!f.data||0===f.data.length)return;let e=f.data.filter(e=>void 0!==e.version).map(e=>parseInt(e.version)).filter(e=>!isNaN(e)),t=e.length>0?Math.max(...e):-1,n=parseInt(p);isNaN(n)||(t=Math.max(n,t)),o(e=>[...e,...f.data].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id)).filter(e=>{let n=parseInt(e.timestamp);return(isNaN(n)||n>Date.now()-3e5)&&(!e.version||e.version===t.toString()||-1===t)}))},[f,p,o]),[n,o]}},905843:(e,t,n)=>{n.d(t,{J:()=>l,T:()=>d});var i=n(105652),r=n(270450),a=n(592802),s=n(581121),o=n(818350);function l(){let{isSlidesAiEnabled:e}=(0,a.u4)();return e&&(0,r.kc)().piper_outline_to_deck}function d(){i.useEffect(()=>()=>{(0,o.B3)(s.JT.SLIDES_GENERATE_OUTLINE),(0,o.B3)(s.JT.SLIDES_OUTLINE_TO_DECK)},[])}},6971:(e,t,n)=>{n.d(t,{Jh:()=>s,QD:()=>a,Ro:()=>i,jK:()=>r});let i=["auto","pitch","product_showcase","product_management","sales","proposal","research_report","knowledge","meeting","portfolio"],r=[5,10,15,20,25],a=["minimal","concise","detailed","extensive"],s={usecase:"auto",slideCount:5,textDensity:"concise"}},351195:(e,t,n)=>{n.d(t,{EG:()=>m,JY:()=>p,mG:()=>c,sH:()=>h,wd:()=>u});var i=n(105652),r=n(445019),a=n(640753),s=n(368227);let o={step:"NOT_STARTED",data:{deckOptions:n(6971).Jh}},l=(0,a.Wh)(()=>(0,r.um)(o,(e,t)=>{switch(t.type){case"SET_STEP":if(!function(e,t){let n="GENERATION_LOADING"===e.step||"DONE"===e.step;switch(t){case"NOT_STARTED":case"OUTLINE":return!n;case"GENERATION_LOADING":return e.data?.outline!==void 0;case"GENERATION_ON_CANVAS":return"GENERATION_LOADING"===e.step;case"DONE":return"GENERATION_LOADING"===e.step||"GENERATION_ON_CANVAS"===e.step}}(e,t.step))return e;if("NOT_STARTED"===t.step)return o;return{...e,step:t.step};case"SET_PROMPT":if(!d(e))return e;return{...e,data:{...e.data,prompt:t.prompt}};case"SET_OUTLINE":if(!d(e))return e;return{...e,data:{...e.data,outline:t.outline}};case"SET_TEMPLATE_LIBRARY_KEY":if(!d(e))return e;return{...e,data:{...e.data,templateLibraryKey:t.templateLibraryKey}};case"SET_USECASE":return{...e,data:{...e.data,deckOptions:{...e.data?.deckOptions,usecase:t.usecase}}};case"SET_SLIDE_COUNT":return{...e,data:{...e.data,deckOptions:{...e.data?.deckOptions,slideCount:t.slideCount}}};case"SET_TEXT_DENSITY":return{...e,data:{...e.data,deckOptions:{...e.data?.deckOptions,textDensity:t.textDensity}}}}}));function d(e){return"OUTLINE"===e.step}function c(){return(0,r.md)(l).step}function u(){switch(c()){case"NOT_STARTED":case"GENERATION_ON_CANVAS":case"DONE":return!1;case"OUTLINE":case"GENERATION_LOADING":return!0}}function m(){return(0,r.md)(l).data}function p(){let[e,t]=(0,r.fp)(l),n=i.useCallback(()=>{t({type:"SET_STEP",step:"OUTLINE"})},[t]),a=i.useCallback(()=>{t({type:"SET_STEP",step:"GENERATION_LOADING"})},[t]),s=i.useCallback(()=>{t({type:"SET_STEP",step:"GENERATION_ON_CANVAS"})},[t]),o=i.useCallback(()=>{t({type:"SET_STEP",step:"DONE"})},[t]),d=i.useCallback(()=>{t({type:"SET_STEP",step:"NOT_STARTED"})},[t]),c=i.useCallback(e=>{t({type:"SET_PROMPT",prompt:e})},[t]),u=i.useCallback(e=>{t({type:"SET_TEMPLATE_LIBRARY_KEY",templateLibraryKey:e})},[t]),m=i.useCallback(e=>{t({type:"SET_OUTLINE",outline:e})},[t]),p=i.useCallback(e=>{t({type:"SET_USECASE",usecase:e})},[t]),h=i.useCallback(e=>{t({type:"SET_SLIDE_COUNT",slideCount:e})},[t]),f=i.useCallback(e=>{t({type:"SET_TEXT_DENSITY",textDensity:e})},[t]);return{step:e.step,data:e.data,start:n,createDeck:a,showDeckGenerationOnCanvas:s,finish:o,reset:d,setPrompt:c,setOutline:m,setTemplateLibraryKey:u,setUsecase:p,setSlideCount:h,setTextDensity:f}}function h(){let{data:e,setTemplateLibraryKey:t}=p(),n=e?.templateLibraryKey,r=(0,s.WS)(),a=r.data||[],o="loaded"===r.status&&a.length>0,l=a[0],d=(0,s.S7)();return n?d=n:o&&l&&(d=l.library_key),i.useEffect(()=>{d!==n&&t(d)},[d,n,t]),d}},682636:(e,t,n)=>{n.d(t,{Gd:()=>C,g2:()=>j,M0:()=>E,Hn:()=>w,Wb:()=>T,v0:()=>k});var i=n(239976),r=n(105652),a=n(854225),s=n(2227),o=n(445019),l=n(785496),d=n(223487),c=n(581121),u=n(818350),m=n(545242),p=n(433708),h=n(18775),f=n(368227),g=n(224542),x=n.n(g),_=n(811804);function y(){let e="dark"===(0,_.DP)();return(0,i.jsx)("div",{className:x()("slides_ai_shimmer_overlay--shimmer--ugK5X",e?"slides_ai_shimmer_overlay--shimmerDark--2iv31":"slides_ai_shimmer_overlay--shimmerLight--vm2Qh")})}var b=n(82788),v=n(493130);function C(e){if(e)return e.pageGuids;let t=o.zl.get(p.V6);return(()=>{switch(t.type){case p.i6.ALL:return t.allPages;case p.i6.SINGLE:return[t.page];default:return[]}})().map(e=>e.guid)}function E(e){let t=(0,o.md)(p.bY).figjamEntryPointData,n=t?.figjamFileKey||e,i=t?.selectedGuids;return(0,r.useCallback)(()=>{if(n)return(0,v.R)({fileKey:n,selectedGuids:i})},[n,i])}function w(e){let t=(0,f.yt)(e[0]),n=(0,r.useRef)(!1);return(0,r.useCallback)(()=>{if(!o.zl.get(d.ze))return;let i=o.zl.get(l.BT);if(!n.current&&0===i.flat().length&&e.length>0){n.current=!0;let i=e[0];if(!i)return;t(i,{row:0,col:0},a.zkO.USER,"figjam-board-to-deck-default-slide",h.Ji.BOARD_TO_DECK)}},[t,e])}function k(){let e=function(){let e=(0,o.md)(p.ux),t=(0,f.WS)(),n=t.data||[],i="loaded"===t.status&&n.length>0,r=n[0],a=(0,f.S7)();return e||(i&&r?r.library_key:a)}(),t=(0,f.NG)(e),n="loaded"===t.status;return{areSlidePresetsLoaded:n,slidePresetModules:n?t.data:[]}}function T(){let e=(0,r.useRef)(null),t=(0,r.useRef)(new Set);return{showPlaceholderOverlay:(0,r.useCallback)(n=>{if(n&&n!==s.AD&&e.current!==n){for(let e of t.current)(0,m.ks)(e);e.current=n,t.current.add(n),(0,m.Vm)(n,(0,i.jsx)(y,{}))}},[]),removeAllPlaceholderOverlays:(0,r.useCallback)(()=>{for(let e of t.current)(0,m.ks)(e);t.current.clear(),e.current=null},[])}}function j(){(0,r.useEffect)(()=>()=>{let{state:e}=(0,u.pP)(c.JT.BOARD_TO_DECK);e===u.qy.RUNNING&&(0,u.cT)(c.JT.BOARD_TO_DECK),(0,b.$K)()},[])}},761826:(e,t,n)=>{n.d(t,{D:()=>B});var i=n(105652),r=n(20002),a=n(692376),s=n(379141),o=n(445019),l=n(910136),d=n(17453),c=n(223487),u=n(581121),m=n(818350),p=n(530979),h=n(311667),f=n(433708),g=n(682636),x=n(597048),_=n(854225),y=n(798913),b=n(466082),v=n(367904),C=n(750665),E=n(650473),w=n(809012),k=n(303740),T=n(100290),j=n(493130),S=n(18775),I=n(450255),A=n(82788);async function N({slidePresetModules:e,abortController:t,batchSize:n=2,dispatch:i}){let r=[],s=[];a.Zdr?.createHiddenFrameForPresets();for(let a=0;a<e.length;a+=n){if(t.signal.aborted)return s;for(let t of e.slice(a,a+n))try{let e=new Promise(e=>{(0,S.Zx)({module:t,editScopeType:_.zkO.USER,editScopeLabel:"use-slides-ai-preset-selection",callback:t=>{s.push(t),e()},dispatch:i})});r.push(e)}catch(e){l.k.error("Failed to insert preset",e)}Promise.allSettled(r).then(()=>{t.signal.aborted&&F(s)}),await L(Promise.allSettled(r),t.signal)}return t.signal.aborted||a.Zdr?.selectPresetsFromTemplate(),s}async function M({figjamFileKey:e,selectedGuids:t=[],pageGuids:n=[],abortController:i}){if(!a.Zdr)return[];let r=await L((0,j.R)({fileKey:e,selectedGuids:t.slice(0,x.S)}),i.signal);return i.signal.aborted?[]:JSON.parse(a.Zdr.getCanvasDataJsonFromBuffer(r,n))}class R{constructor(e,t,n){this.currentItem=void 0,this.hasRenamedFile=!1,this.lastSlideGuid="",this.abortController=e,this.showPlaceholderOverlay=t,this.getNextItem=n,this.intervalId=this.start()}start(){return setInterval(()=>this.update(),100)}isActive(){return 0!==this.intervalId}update(){if(!a.Zdr)return;if(this.abortController.signal.aborted||!o.zl.get(c.ze)){this.cancel();return}if(this.currentItem||(this.currentItem=this.getNextItem(),!this.currentItem))return;let e=a.Zdr.generateSlides(this.currentItem.slideItem);if(!this.abortController.signal.aborted){if(this.showPlaceholderOverlay(a.Zdr.getPlaceholderNodeId()),e.length>0){e.unshift(this.lastSlideGuid);for(let t=0;t<e.length-1;++t){let n=e[t];n&&D(O(n))}let t=e[e.length-1];t&&(this.lastSlideGuid=t)}this.currentItem.resolve(),this.currentItem=void 0}}cancel(){this.isActive()&&(this.cleanUp(),(0,A.Y)())}completeSuccessfully(){this.cleanUp(),(0,A.Sk)()}processError(e){this.cleanUp(),(0,A.D1)(e)}cleanUp(){this.isActive()&&(clearInterval(this.intervalId),this.intervalId=0)}}async function P({canvasData:e,processTitle:t,showPlaceholderOverlay:n,abortController:i}){let r=[],a=new R(i,n,()=>r.shift());try{let n=await C.Ay.slides.createSlides({version:"1.1",data:e},{orgId:o.zl.get(E._s),teamId:o.zl.get(c.As)||null,fileKey:o.zl.get(c.ze)||null,fileSeq:o.zl.get(w.J)?.toString()||null,userId:o.zl.get(k.kS)||null,trackingSessionId:(0,v.fF)()});if(i.signal.aborted||!o.zl.get(c.ze)){n.cancel();return}let s=[],l=!1;for await(let e of new C.c6(n)){if(!a.isActive())return;let n=e;l||"TITLE"!==n.slideType||(l=!0,t(n.content.find(e=>"h1"===e.type)?.content||"")),s.push(new Promise(e=>{r.push({slideItem:n,resolve:e})}))}if(await L(Promise.allSettled(s),i.signal),i.signal.aborted)return;a.completeSuccessfully()}catch(e){a.processError(e)}}let O=(0,I.nh)(e=>{if(!e)return[];let t=(0,b.UN)().get(e);if(!t)return[];let n=[];return t.childrenNodes.forEach(e=>{(function e(t,n){t&&("TEXT"===t.type?n.push(t):t.childrenNodes.forEach(t=>e(t,n)))})(e,n)}),n}),D=(0,I.nh)(e=>{y.l7.user("figjam-to-slide-deck-text-opacity",()=>{e.forEach(e=>{e.opacity>0||e.setOpacityWithAnimation(1,T._E.forLinear(.5),"slides-ai-animate-slide-text")})}),e.length=0});async function L(e,t){if(!t)return e;if(t.aborted)throw Error("Aborted");let n=new Promise((e,n)=>{let i=()=>{n(Error("Aborted"))};t.addEventListener("abort",i),t.addEventListener("abort",()=>{t.removeEventListener("abort",i)})});return await Promise.race([e,n])}function F(e){e&&y.l7.user("remove-hidden-preset-nodes",()=>{for(let t of e){let e=(0,b.UN)().get(t);if(e)try{e.removeSelfAndChildren()}catch(e){console.warn("Failed to remove preset",e)}}})}function B(){let e=(0,o.md)(f.oQ)??void 0,t=(0,o.md)(f.bY),n=t?.figjamEntryPointData,a=n?.figjamFileKey??e,{areSlidePresetsLoaded:s,slidePresetModules:l}=(0,g.v0)(),d=(0,g.Hn)(l),{showPlaceholderOverlay:_,removeAllPlaceholderOverlays:y}=(0,g.Wb)(),b=(0,r.wA)(),v=(0,o.md)(c.ze),C=t?.source??x.E.SLIDES_TEMPLATE;(0,o.Xr)(p.zF)(C);let E=(0,h.D)(l[0]?.library_key),w=(0,i.useMemo)(()=>({figjamFileKey:a,figjamEntryPointData:n,areSlidePresetsLoaded:s,slidePresetModules:l,addFirstPresetToEmptyDeck:d,showPlaceholderOverlay:_,removeAllPlaceholderOverlays:y,dispatch:b,openFileKey:v,subscribeToLibrary:E}),[a,n,s,l,d,_,y,b,v,E]),k=(0,m.RL)(u.JT.BOARD_TO_DECK,U,{figjamFileKey:a});return{startAction:(0,i.useCallback)(()=>{(0,m.B3)(u.JT.BOARD_TO_DECK),k.start(w)},[w,k]),figjamFileKey:a}}let U=async({abortController:e,params:t})=>{let{figjamFileKey:n,figjamEntryPointData:i,areSlidePresetsLoaded:r,slidePresetModules:u,addFirstPresetToEmptyDeck:m,showPlaceholderOverlay:p,removeAllPlaceholderOverlays:h,dispatch:f,openFileKey:x,subscribeToLibrary:_}=t,y=(0,g.Gd)(i),b=i?.selectedGuids,v=!n;if(e.signal.aborted||v||!r||!x)return;u?.length||l.k.warn("No slide preset modules found...");let C=[];try{if(a.Ez5&&a.Ez5.uiState().leftPanelCollapsedUI3.set(!0),(0,A.tO)(),!a.Zdr)return;a.Zdr.showLoadingState();let t=a.Zdr.getPlaceholderNodeId();p(t);let[i,r]=await L(Promise.allSettled([M({figjamFileKey:n,selectedGuids:b,pageGuids:y,abortController:e}),N({slidePresetModules:u,abortController:e,dispatch:f})]),e.signal);if("rejected"===r.status){l.k.error("Failed to ingest templates",r.reason),(0,A.D0)((0,s.t)("slides.present_summary.visual_bells.error_unknown"));return}if(C=r.value,"rejected"===i.status){l.k.error("Failed to fetch canvas data from file",i.reason),(0,A.D0)((0,s.t)("slides.present_summary.visual_bells.error_unknown"));return}_&&_(),await P({canvasData:i.value,processTitle:e=>{e&&f(d.Nw({file:{key:x},name:`${e} ${(0,s.t)("slides.templates.presentation")}`}))},showPlaceholderOverlay:p,abortController:e})}catch(t){if(e.signal.aborted){(0,A.Y)();return}(0,A.D0)((0,s.t)("slides.present_summary.visual_bells.error_unknown")),l.k.error("Failed to generate slides",t)}finally{h(),x!==o.zl.get(c.ze)||m(),a.Zdr?.finishDeckGeneration(),F(C)}}},82788:(e,t,n)=>{n.d(t,{$K:()=>x,D0:()=>v,D1:()=>E,Sk:()=>C,Y:()=>b,tO:()=>_});var i=n(239976),r=n(134670),a=n(244487),s=n(379141),o=n(910136),l=n(102462),d=n(888903),c=n(287736),u=n(581121),m=n(818350),p=n(367372);let h="slides-ai-generation-started",f="slides-ai-generation-error",g="slides-ai-generation-completed";function x(){l.D.dispatch(d.F.dequeue({matchType:h})),l.D.dispatch(d.F.dequeue({matchType:f})),l.D.dispatch(d.F.dequeue({matchType:g}))}function _(){l.D.dispatch(d.F.enqueue({message:(0,s.t)("slides.present_summary.visual_bells.loading"),type:h,icon:c.zX.SPINNER,button:{text:(0,s.t)("slides.present_summary.visual_bells.stop"),action:()=>{l.D.dispatch(d.F.dequeue({matchType:h})),(0,m.cT)(u.JT.BOARD_TO_DECK)}},timeoutOverride:3e5}))}function y(e,t,n){l.D.dispatch(d.F.dequeue({matchType:h})),l.D.dispatch(d.F.enqueue({message:e,type:n,icon:t,timeoutOverride:3e3}))}function b(){y((0,s.t)("slides.present_summary.visual_bells.canceled_indirectly"),c.zX.EXCLAMATION,"slides-ai-generation-canceled")}function v(e){y(e,c.zX.EXCLAMATION,f)}function C(){l.D.dispatch(d.F.dequeue({matchType:h})),l.D.dispatch(d.F.enqueue({type:g,icon:c.zX.GREEN_CHECK,content:(0,i.jsx)(p.ZO,{}),onDismiss:()=>{l.D.dispatch(d.F.dequeue({matchType:g}))},timeoutOverride:6e4}))}function E(e){o.k.error(e);let t={content_length_limit_exceeded:(0,s.t)("slides.present_summary.visual_bells.error_content_limit_exceeded"),rate_limit_exceeded:(0,s.t)("slides.present_summary.visual_bells.error_rate_limited"),service_issue:(0,s.t)("slides.present_summary.visual_bells.error_vendor"),offline:(0,s.t)("slides.present_summary.visual_bells.error_offline"),unsafe_or_harmful_content:(0,s.t)("slides.present_summary.visual_bells.content_moderation"),unauthorized:(0,s.t)("slides.present_summary.visual_bells.error_unknown"),generic:(0,s.t)("slides.present_summary.visual_bells.error_unknown"),ai_opt_out_error:(0,s.t)("slides.present_summary.visual_bells.error_opt_out"),meter_exceeded:(0,s.t)("slides.present_summary.visual_bells.error_meter_exceeded"),create_slides_out_of_date:(0,s.t)("slides.present_summary.visual_bells.error_out_of_date"),not_implemented:(0,s.t)("ai.error.not_implemented")},n="generic";if(e instanceof a.CortexErrorV2)a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e)?n="content_length_limit_exceeded":a.ProviderRateLimitExceededError.isInstance(e)||a.ProviderOverloadedError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e)?n="rate_limit_exceeded":a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e)?n="service_issue":a.OutOfDateFeatureVersionError.isInstance(e)?"create_slides"===e.featureName&&(n="create_slides_out_of_date"):a.MeterExceededError.isInstance(e)?n="meter_exceeded":a.OfflineError.isInstance(e)?n="offline":a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e)?n="unsafe_or_harmful_content":a.UnauthorizedError.isInstance(e)?n="unauthorized":a.NotImplementedError.isInstance(e)?n="not_implemented":e?.statusCode===404?n="service_issue":e?.statusCode===429||e?.statusCode===529?n="rate_limit_exceeded":e?.statusCode===403&&(n="ai_opt_out_error");else if(e instanceof r.G1)switch(e.type){case"content_length_limit_exceeded":case"rate_limit_exceeded":case"service_issue":case"create_slides_out_of_date":case"meter_exceeded":case"offline":case"unsafe_or_harmful_content":case"unauthorized":n=e.type;break;default:switch(e.data?.status){case 404:n="service_issue";break;case 429:n="rate_limit_exceeded";break;case 403:n="ai_opt_out_error"}}v(t[n]??(0,s.t)("slides.present_summary.visual_bells.error_unknown"))}},212989:(e,t,n)=>{n.d(t,{G:()=>y,V:()=>b});var i=n(239976),r=n(105652),a=n(943360),s=n(563225),o=n(255398),l=n(798913),d=n(466082),c=n(379141),u=n(445019),m=n(239620);n(323264);var p=n(154963),h=n(236410),f=n(273444),g=n(252891),x=n(433708),_=n(368227);let y="carousel-add-slide-button",b=r.forwardRef(function({recordingKey:e,...t},n){let{toggleTemplatePicker:r,closeTemplatePicker:b}=(0,_.uu)(),v=(0,u.md)(x.Ei),C=l.nc.user("ssv-carousel",()=>{b();let e=(0,d.UN)();(0,f.oY)(e,"carousel_add_slide_button")});return(0,i.jsxs)("div",{"data-element-target":y,className:"xh8yej3 xxk0z11 x78zum5 xl56j7k",children:[(0,i.jsxs)(a.E,{ref:n,...{0:{className:"x1icplyp x1yjdb4r x78zum5 xl56j7k x6s0dn4 x1iyjqo2 x9f619 x5yr21d x71s49j xmkeg23 x1y0btm7 x7z60cl xgfja2r x11pwa6s xd3ty66 x1blczqt x1a2w583 xjppbhk x1bqy6mi"},1:{className:"x1icplyp x78zum5 xl56j7k x6s0dn4 x1iyjqo2 x9f619 x5yr21d x71s49j xmkeg23 x1y0btm7 x7z60cl xgfja2r x11pwa6s xd3ty66 x1blczqt x1a2w583 xjppbhk x1bqy6mi x30nh5c"}}[!!v<<0],onClick:r,htmlAttributes:{"data-fullscreen-intercept":!0,"data-tooltip":(0,c.t)("slides.carousel.add-slide-from-template"),"data-tooltip-type":h.Ib.TEXT,"data-onboarding-key":g.MB},"aria-label":(0,c.t)("slides.carousel.add-slide-from-template"),recordingKey:(0,m.Pt)(e,"newSlideButton"),...t,children:[(0,i.jsx)("p",{className:p.s.noWrap.$,children:(0,c.t)("slides.carousel.new_slide")}),(0,i.jsx)(s.O,{})]}),(0,i.jsx)(a.E,{className:"x1yjdb4r x15cczae x1icplyp xmkeg23 x1y0btm7 x7z60cl x78zum5 x6s0dn4 x1ia1hqs xgs1500 x828b17 xfrllxf",onClick:C,recordingKey:(0,m.Pt)(e,"addSlideButton"),htmlAttributes:{"data-fullscreen-intercept":!0,"data-tooltip":(0,c.t)("slides.carousel.add-blank-slide"),"data-tooltip-type":h.Ib.TEXT,"data-tooltip-shortcut-key":"create-slide","data-testid":"addSlideButton"},"aria-label":(0,c.t)("slides.carousel.add-blank-slide"),children:(0,i.jsx)(o.$,{})})]})})},73975:(e,t,n)=>{n.d(t,{_:()=>B,i:()=>U});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(379141),l=n(445019),d=n(102462),c=n(309742),u=n(393463),m=n(667431),p=n(346942),h=n(450207),f=n(136393),g=n(639184),x=n(859100),_=n(574159),y=n(574220),b=n(772293),v=n(215496),C=n(795867),E=n(193487),w=n(289252),k=n(322691),T=n(527205),j=n(355441),S=n(656694),I=n(271625),A=n(17248),N=n(425775),M=n(433708),R=n(483088),P=n(920675),O=n(947467),D=n(75962);function L(){return(0,i.jsx)(D.oW,{src:(0,u.ck)("b5ff672e289f44685a5e04d3de9f17f154fb2455"),alt:"Figma Slides carousel",width:332})}var F=n(252891);function B(){let e=(0,l.Xr)(M.VZ),t=(0,A.jY)(),n=(0,S.Bk)(),{show:a,isShowing:s,complete:o}=(0,x.e)({overlay:I.Yqi,priority:v.N.HIGH_PRIORITY_MODAL}),d=(0,r.useMemo)(()=>n?[U,V,H,z,G,K]:[U,V,H,z,K],[n]),{currentStep:u,next:m}=(0,_.A)({numSteps:d.length,onComplete:o}),p=r.useMemo(()=>{let a=()=>{m(),e(!0)},l=d.map((e,i)=>r.createElement(e,{onClickPrimaryCta:t||0!==i?m:a,onClickSecondaryCta:o,isShowing:s,totalSteps:n?5:4,isOnboarding:!0}));return t||l.splice(1,0,(0,i.jsx)(N.g,{})),l},[d,t,m,e,o,s,n]);return((0,c.h)(()=>{a()}),s&&p)?(0,i.jsx)(E.U,{currentStep:u,isShowing:s,children:p}):null}function U({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,isOnboarding:s}){let c;let x=(0,l.Xr)(M.VZ),_=(0,l.md)(y.d2),b=function(){let{getPlanAndPlanUser:e}=(0,O.wH)(),{plan:t,planUser:n}=e(P.G_.SLIDES);return t?.tier!==P.Ag.STARTER&&t?.tier!==P.Ag.STUDENT&&(n?.seatTypeLicenseTypes?.includes(P.G_.SLIDES)??!1)}(),v=(0,a.wA)(),E=_.data===C.qo.ORG,w=d.D.getState().openFile,T=!w||!w.canEdit,j=(0,u.sL)(),S=(0,m.y)(),I="/sub-processors/",A="/ssa/",N="ja"===(0,u.mm)()[0]?(0,o.tx)("slides.onboarding.welcome.title.jp"):(0,o.tx)("slides.onboarding.welcome.title");c=b?(0,o.tx)("slides.onboarding.ga.billable_seat.welcome.description"):(0,o.tx)("slides.onboarding.ga.welcome.description");let R=E?S?(0,o.tx)("slides.onboarding.welcome.org.footer.no_ai",{services_agreement:(0,i.jsx)(p.CY,{href:A,target:"_blank",trusted:!0,children:(0,o.tx)("slides.onboarding.services_agreement")})}):(0,o.tx)("slides.onboarding.welcome.org.footer.ai",{subprocessors:(0,i.jsx)(p.CY,{href:I,target:"_blank",trusted:!0,children:(0,o.tx)("slides.onboarding.subprocessors")}),services_agreement:(0,i.jsx)(p.CY,{href:A,target:"_blank",trusted:!0,children:(0,o.tx)("slides.onboarding.services_agreement")})}):S?void 0:(0,o.tx)("slides.onboarding.welcome.starter.footer",{subprocessors:(0,i.jsx)(p.CY,{href:I,target:"_blank",trusted:!0,children:(0,o.tx)("slides.onboarding.subprocessors")})});(0,r.useEffect)(()=>{s&&!j&&v?.(f.b({seen_slides_onboarding:!1}))});let D=()=>{e(),v?.(f.b({seen_slides_onboarding:!0,...!j&&{agreed_to_slides_ai_terms:!0}})),s&&x(!0)},F=()=>{if(j){D();return}v?.(h.sf({view:"recentsAndSharing"})),t()};return T?null:(0,i.jsx)(k._l,{description:(0,i.jsx)("span",{style:{whiteSpace:"pre-line"},children:c}),disclaimerFooter:j?void 0:R,isShowing:n,media:(0,i.jsx)(L,{}),onClose:F,preventUserClose:!j,primaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.welcome.primary_cta"),onClick:D,ctaTrackingDescriptor:g.c.NEXT},secondaryCta:j?void 0:{type:"button",label:(0,o.tx)("slides.onboarding.welcome.secondary_cta"),onClick:F,ctaTrackingDescriptor:g.c.CLOSE},title:N,trackingContextName:"Slides Onboarding > Welcome"})}function V({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){return(0,i.jsx)(T.rq,{arrowPosition:j.F_.BOTTOM,description:(0,o.tx)("slides.onboarding.new_slide.description"),isShowing:n,media:(0,i.jsx)(w.y,{src:(0,u.ck)("2811dcf7f07f10fbc8543106336765058bc83266"),alt:"slides template picker",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.next"),onClick:e,ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:g.c.CLOSE},shouldDisableAnimation:!0,stepCounter:{stepNum:1,totalNumSteps:r},targetKey:F.MB,title:(0,o.tx)("slides.onboarding.new_slide.title"),trackingContextName:"Slides Onboarding > New Slide"})}function H({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){return(0,i.jsx)(T.rq,{description:(0,o.tx)("slides.onboarding.views.description"),isShowing:n,media:(0,i.jsx)(w.y,{src:(0,u.ck)("8ad8b13cac28f9fb6eaaed9cad7c621684fadd6b"),alt:"Grid view in Slides",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.next"),onClick:()=>{b.Y5.triggerAction("enter-focus-view"),e()},ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:g.c.CLOSE},shouldDisableAnimation:!0,stepCounter:{stepNum:2,totalNumSteps:r},targetKey:F.b_,title:(0,o.tx)("slides.onboarding.views.title"),trackingContextName:"Slides Onboarding > Views"})}function z({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){let a=(0,S.Bk)(),l=(0,R.E)();return(0,i.jsx)(T.rq,{description:(0,o.tx)("slides.onboarding.nondesigner.tools.description"),isShowing:n,media:(0,i.jsx)(w.y,{src:(0,u.ck)("aca6af2d36ffc1a4f65a12247f598a7598a530b7"),alt:"Apps in Slides",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),a&&l(s.nQ7.DESIGN)},ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:g.c.CLOSE},shouldCenterArrow:j.EL.BEST_EFFORT,shouldDisableAnimation:!0,shouldHideArrow:!0,stepCounter:{stepNum:3,totalNumSteps:r},targetKey:F.hx,title:(0,o.tx)("slides.onboarding.nondesigner.tools.title"),trackingContextName:"Slides Onboarding > Tools"})}function G({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){let a=(0,R.E)();return(0,i.jsx)(T.rq,{description:(0,o.tx)("slides.onboarding.designer.tools.description"),isShowing:n,media:(0,i.jsx)(w.y,{src:(0,u.ck)("5064800f3f60febf8b2ad2ad8ba4efdd6167eeaa"),alt:"Design tool toggle",aspectRatio:240/135}),onClose:t,primaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),a(s.nQ7.DESIGN)},ctaTrackingDescriptor:g.c.NEXT},secondaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:g.c.CLOSE},shouldCenterArrow:j.EL.BEST_EFFORT,shouldDisableAnimation:!0,shouldHideArrow:!0,stepCounter:{stepNum:4,totalNumSteps:r},targetKey:F.uy,title:(0,o.tx)("slides.onboarding.designer.tools.title"),trackingContextName:"Slides Onboarding > Design Mode"})}function K({onClickSecondaryCta:e,isShowing:t,totalSteps:n}){return(0,i.jsx)(T.rq,{description:(0,o.tx)("slides.onboarding.share.description"),isShowing:t,media:(0,i.jsx)(w.y,{src:(0,u.ck)("a3ed241305c3e13d9ec5cab6e9a88db7572695c5"),alt:"presenter mode in Slides",aspectRatio:240/135}),onClose:e,onTargetLost:e,primaryCta:{type:"button",label:(0,o.tx)("slides.onboarding.callout.done"),onClick:e,ctaTrackingDescriptor:g.c.DONE},shouldDisableAnimation:!0,stepCounter:{stepNum:n,totalNumSteps:n},targetKey:F.J5,title:(0,o.tx)("slides.onboarding.share.title"),trackingContextName:"Slides Onboarding > Present"})}},795892:(e,t,n)=>{n.d(t,{AC:()=>h,D0:()=>x,Mp:()=>_,Z4:()=>g,sQ:()=>f,tx:()=>m,xl:()=>p});var i=n(105652),r=n(20002),a=n(854225),s=n(522568),o=n(421914),l=n(223487),d=n(576116),c=n(767157);function u(){let e=(0,l.tS)()??"",t=(0,c.Jb)()??"",n=(0,r.d4)(d.AF);return{fileKey:e,slideId:t,nodeId:n?.guid}}function m(){let e=u();return i.useCallback((t,n)=>{s.az.trackDefinedEvent("slides.modify_object_animation.type",{...e,oldValue:t,newValue:n})},[e])}function p(){let e=u();return i.useCallback((t,n)=>{s.az.trackDefinedEvent("slides.modify_object_animation.duration",{...e,oldValue:t,newValue:n})},[e])}function h(){let e=u();return i.useCallback((t,n)=>{let i=e=>void 0===e?void 0:(0,o.gl)(e)?"MIXED":e===a.luZ.TRIGGER?"TRIGGER":"AFTER_PREVIOUS";s.az.trackDefinedEvent("slides.modify_object_animation.start_condition",{...e,oldValue:i(t),newValue:i(n)})},[e])}function f(){let e=u();return i.useCallback((t,n)=>{s.az.trackDefinedEvent("slides.modify_object_animation.phase",{...e,oldValue:t,newValue:n})},[e])}function g(){let e=u();return i.useCallback(()=>{s.az.trackDefinedEvent("slides.reorder_object_animation",e)},[e])}function x(){let e=u();return i.useCallback(()=>{s.az.trackDefinedEvent("slides.delete_object_animation",e)},[e])}function _(){let e=u();return i.useCallback(t=>{s.az.trackDefinedEvent("slides.preview_object_animation",{...e,numAnimations:t})},[e])}},67147:(e,t,n)=>{n.d(t,{eB:()=>m,hT:()=>u,kP:()=>i,uc:()=>p});var i,r=n(436512),a=n(449979),s=n(295870),o=n(692376),l=n(854225),d=n(2227),c=n(129416),u=(e=>(e.SECTION_HEADER="section header",e.ANIMATION="animation",e))(u||{});function m(e){return"section header"===e.type}function p(e){return"animation"===e.type}(e=>{let t="CUSTOM_CUBIC",n=[.17,0,.2,1];function i(e,t){let n=t??(0,d.sH)(o.glU?.generateUniqueID());if(!n)throw Error("Failed to generate unique ID for object animation interaction");return{id:n,event:{interactionType:"ON_CLICK"},actions:e}}e.fromPrototypeInteractions=function(e){let i=[],r=0;for(let s of e){if(!s.id)continue;let e=s.id,o=(s.actions||[]).map(e=>"OBJECT_ANIMATION"===e.connectionType&&e.transitionNodeID&&void 0!==e.animationType&&"NONE"!==e.animationType?{connectionType:e.connectionType,transitionNodeID:e.transitionNodeID,transitionDuration:e.transitionDuration??.3,animationType:e.animationType,animationPhase:e.animationPhase??"IN",easingType:e.easingType??t,easingFunction:e.easingFunction??n}:null).filter(a.Vq);0!==o.length&&(o.forEach((t,n)=>{0===n?(i.push({type:"section header",interactionIndex:r}),i.push({type:"animation",action:t,startCondition:l.luZ.TRIGGER,interactionId:e,interactionIndex:r})):i.push({type:"animation",action:t,startCondition:l.luZ.AFTER_PREVIOUS,interactionId:e,interactionIndex:r})}),r++)}return i.length>0&&i.push({type:"section header",interactionIndex:r}),i},e.toPrototypeInteractions=function(e){let t=[],n=null;for(let u of function(e){let t=new Set,n=new Set;return e.map(e=>{if(m(e))return null;if("OBJECT_ANIMATION"!==e.action.connectionType||!e.action.transitionNodeID)return(0,c.$D)(s.e.SLIDES,Error("Invalid object animation action"),{extra:{action:e.action}}),null;let n=(0,r.Gu)(e.action.transitionNodeID);return n?t.has(n)?((0,c.$D)(s.e.SLIDES,Error("Duplicate object animation transition node ID found:"),{extra:{action:e.action}}),null):(t.add(n),e):null}).filter(a.Vq).map((e,t)=>{if(0===t&&e.startCondition!==l.luZ.TRIGGER){let t=(0,d.sH)(o.glU?.generateUniqueID());if(!t)throw Error("Failed to generate unique ID for object animation interaction");return{...e,startCondition:l.luZ.TRIGGER,interactionId:t,interactionIndex:0}}if(e.startCondition!==l.luZ.TRIGGER)return e;{let t=(0,r.Gu)(e.interactionId);if(!(!t||n.has(t)))return n.add(t),e;{let t=(0,d.sH)(o.glU?.generateUniqueID());if(!t)throw Error("Failed to generate unique ID for object animation interaction");return{...e,interactionId:t}}}})}(e))if(u.startCondition===l.luZ.TRIGGER)n=i([u.action],u.interactionId),t.push(n);else{if(!n)throw Error("Expected current interaction to be non-null");n.actions?.push(u.action)}return t},e.createBaseInteraction=i,e.createTestAction=function(e){return{connectionType:"OBJECT_ANIMATION",transitionNodeID:(0,d.sH)(e),transitionDuration:.3,animationType:"FADE",animationPhase:"IN",easingType:t,easingFunction:n}}})(i||(i={}))},513001:(e,t,n)=>{n.d(t,{E:()=>x,l:()=>_});var i=n(239976),r=n(20002),a=n(436512),s=n(735786),o=n(854225),l=n(798913),d=n(847923),c=n(324880),u=n(33433),m=n(772293),p=n(397043),h=n(795892),f=n(67147),g=n(915807);function x({boundingRect:e,selectedView:t,targetObjectAnimation:n}){let a=(0,r.wA)(),{appModel:s,sceneGraph:o,sceneGraphSelection:l}=(0,d.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),{slideId:u,targetNodeId:m}=n,h=y({sceneGraph:o,slideId:u,targetNodeId:m}),f={left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height,width:e.width,height:e.height};return(0,i.jsx)("div",{className:c.Dm,children:(0,i.jsx)(p.Q,{appModel:s,dispatch:a,lean:"left",menuItems:h,recordingKey:"slidesAnimationContextMenu",removeDisabledItems:!0,sceneGraph:o,sceneGraphSelection:l,selectedView:t,showPoint:!1,targetRect:f})})}function _({targetObjectAnimation:e,manager:t}){let{sceneGraph:n}=(0,d.R)(e=>({sceneGraph:e.mirror.sceneGraph})),{slideId:r,targetNodeId:a}=e,o=y({sceneGraph:n,slideId:r,targetNodeId:a});return(0,i.jsx)(s.bL,{manager:t,children:(0,i.jsx)(s.mc,{children:o.map(e=>(0,i.jsx)(s.q7,{onClick:()=>{e.callback&&e.callback()},children:(0,u.A)(e.name)},e.name))})})}function y({sceneGraph:e,slideId:t,targetNodeId:n}){let i=[],r=e.get(t),s=r?.objectAnimations??[],d=f.kP.fromPrototypeInteractions(s),c=(0,h.Z4)(),u=(0,h.D0)(),p=d.findIndex(e=>(0,f.uc)(e)&&(0,a.Gu)(e.action.transitionNodeID)===n);if(p<0)return i;let x=d[p];if(!r||!x)return i;let _=d[p-1],y=d[p+1];if(_&&(0,f.eB)(_)){let e=d[p-2];e&&(0,f.uc)(e)&&i.push({name:"slides-merge-object-animation-with-above",callback:()=>{l.l7.user("slides-merge-object-animation-with-above",()=>{let t=(0,g.Eo)(x,e,_,d);t&&(c(),r.objectAnimations=t)})}})}if(x.startCondition===o.luZ.TRIGGER&&y&&(0,f.eB)(y)){let e=d[p+2];e&&(0,f.uc)(e)&&i.push({name:"slides-merge-object-animation-with-below",callback:()=>{l.l7.user("slides-merge-object-animation-with-below",()=>{let t=(0,g.Eo)(x,y,e,d);t&&(c(),r.objectAnimations=t)})}})}return x.startCondition===o.luZ.AFTER_PREVIOUS&&(!y||(0,f.eB)(y))&&i.push({name:"slides-separate-object-animation",callback:()=>{l.l7.user("slides-separate-object-animation",()=>{let e=(0,g.zQ)(x,{type:f.hT.SECTION_HEADER,interactionIndex:x.interactionIndex+1},d);e&&(c(),r.objectAnimations=e)})}}),i.push({name:"slides-delete-object-animation",callback:()=>{l.l7.user("slides-delete-object-animation",()=>{u(),r.removeObjectAnimation(n),m.Y5.commit()})},recordingKey:"delete"}),i}},915807:(e,t,n)=>{n.d(t,{Eo:()=>c,zQ:()=>d});var i=n(270307),r=n(854225),a=n(2227),s=n(19047),o=n(67147);function l(e,t){if(!e&&!t)return!0;if(e&&t){if((0,o.uc)(e)&&(0,o.uc)(t))return(0,i.c2)(e.action.transitionNodeID,t.action.transitionNodeID);if((0,o.eB)(e)&&(0,o.eB)(t))return e.interactionIndex===t.interactionIndex}return!1}function d(e,t,n){let i=[];for(let s of n)l(s,e)||(l(s,t)?(i.push({...e,startCondition:r.luZ.TRIGGER,interactionId:a.Hr}),i.push(t)):i.push(s));let s=i.map((e,t,n)=>{let i=t-1>=0&&n[t-1]&&(0,o.eB)(n[t-1]);return(0,o.uc)(e)&&i?{...e,startCondition:r.luZ.TRIGGER}:e});return o.kP.toPrototypeInteractions(s)}function c(e,t,n,i){if(l(e,t)||l(e,n))return o.kP.toPrototypeInteractions(i);if(!function(e,t,n){let i=n.findIndex(t=>l(t,e)),r=n.findIndex(e=>l(e,t));return void 0===e&&0===r||void 0===t&&i===n.length-1||-1!==i&&-1!==r&&i+1===r}(t,n,i))return(0,s.x1)("Slides reorder object animations","prevItem and nextItem are not in the correct order",{prevItem:t,nextItem:n,oldItems:i},{reportAsSentryError:!0}),null;for(let e=0;e<i.length;e++)if(l(i[e],t)){if(!l(i[e+1],n))return null;break}let a=[];for(let s of i)l(s,e)||(t&&l(s,t)?(a.push(t),a.push({...e,startCondition:(0,o.uc)(t)?r.luZ.AFTER_PREVIOUS:r.luZ.TRIGGER})):n&&l(s,n)&&(0,o.uc)(n)?a.push({...n,startCondition:r.luZ.AFTER_PREVIOUS}):a.push(s));return o.kP.toPrototypeInteractions(a)}},916349:(e,t,n)=>{n.d(t,{$3:()=>T,Ay:()=>j,dk:()=>w,gv:()=>S,k0:()=>k});var i=n(105652),r=n(134670),a=n(244487),s=n(798913),o=n(2227),l=n(466082),d=n(379141),c=n(445019),u=n(102462),m=n(943866),p=n(888903),h=n(287736),f=n(680912),g=n(581121),x=n(818350),_=n(644857),y=n(483878);class b extends Error{constructor(){super(),this.reportToSentry=!1,this.name="SwitchedSlideError",this.type="switched_slide"}}class v extends Error{constructor(){super(),this.reportToSentry=!1,this.name="SwitchedToGridViewError",this.type="switched_to_grid_view"}}class C extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NotEnoughContentError",this.type="not_enough_content"}}class E extends Error{constructor(){super(),this.reportToSentry=!1,this.name="UneditedSlideError",this.type="unedited_slide"}}let w=[b,C,E,r.G1,a.CortexErrorV2];function k(e,t){let n=function(e){if(e instanceof b)return(0,d.t)("slides.speaker_notes.error.switched-slides");if(e instanceof v)return(0,d.t)("slides.speaker_notes.error.switched-to-grid-view");if(e instanceof C)return(0,d.t)("slides.speaker_notes.error.add-more-content");if(e instanceof E)return(0,d.t)("slides.speaker_notes.error.unmodified_slide");if(!(e instanceof r.G1||e instanceof a.CortexErrorV2))return(0,d.t)("slides.speaker_notes.error.default");if(e instanceof a.PayloadTooLargeError)return(0,d.t)("slides.speaker_notes.error.payload_too_large");let t={offline:(0,d.t)("slides.speaker_notes.error.connection"),rate_limit_exceeded:(0,d.t)("slides.speaker_notes.error.rate_limit"),text_tool_no_text:(0,d.t)("slides.speaker_notes.error.add-more-content"),content_length_limit_exceeded:(0,d.t)("slides.speaker_notes.error.token_limit"),payload_too_large:(0,d.t)("slides.speaker_notes.error.payload_too_large"),unsafe_or_harmful_content:(0,d.t)("slides.speaker_notes.error.inappropriate_input"),service_issue:(0,d.t)("slides.speaker_notes.error.openai_down"),ai_opt_out_error:(0,d.t)("slides.speaker_notes.error.opt_out"),unauthorized:(0,d.t)("slides.speaker_notes.error.default"),generic:(0,d.t)("slides.speaker_notes.error.default"),not_implemented:(0,d.t)("ai.error.not_implemented")};if((0,f._0)(e)){let t=(0,f.PI)(e);return t?(0,d.t)("slides.speaker_notes.error.meter_limit",{resetDate:t}):(0,d.t)("slides.speaker_notes.error.rate_limit")}return t[function(e){if(e instanceof a.CortexErrorV2){if(a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e))return"content_length_limit_exceeded";if(a.MeterExceededError.isInstance(e))return"meter_exceeded";if(a.ProviderRateLimitExceededError.isInstance(e)||a.ProviderOverloadedError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e))return"rate_limit_exceeded";if(a.ClientNoTextSelectedError.isInstance(e))return"text_tool_no_text";else if(a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e))return"service_issue";else if(a.OfflineError.isInstance(e))return"offline";else if(a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e))return"unsafe_or_harmful_content";else if(a.UnauthorizedError.isInstance(e))return"unauthorized";else if(a.NotImplementedError.isInstance(e))return"not_implemented";else if(e?.statusCode===404)return"service_issue";else if(e?.statusCode===429||e?.statusCode===529)return"rate_limit_exceeded";else if(e?.statusCode===403)return"ai_opt_out_error"}else if(e instanceof r.G1)switch(e.type){case"content_length_limit_exceeded":case"payload_too_large":case"meter_exceeded":case"rate_limit_exceeded":case"text_tool_no_text":case"service_issue":case"offline":case"unsafe_or_harmful_content":case"ai_opt_out_error":case"unauthorized":return e.type;case"generic":switch(e.data?.status){case 404:return"service_issue";case 429:return"rate_limit_exceeded";case 403:return"ai_opt_out_error"}}return"generic"}(e)]||(0,d.t)("slides.speaker_notes.error.default")}(e),i=function(e){switch(e.type){case"meter_exceeded":case"content_length_limit_exceeded":case"payload_too_large":case"service_issue":case"ai_opt_out_error":case"unsafe_or_harmful_content":case"switched_slide":case"switched_to_grid_view":case"not_enough_content":case"unedited_slide":return!1;default:return!0}}(e);u.D.dispatch(p.F.enqueue({icon:h.zX.CLOSE_FILLED,message:n,type:"speaker-notes-visual-bell",button:i&&t?{text:(0,d.t)("slides.speaker_notes.draft_again"),action:()=>t()}:void 0,onDismiss:()=>{}}))}function T(e){let t=(0,l.UN)().get(e);if(t&&t.editInfo&&t?.editInfo?.createdAt===t?.editInfo?.lastEditedAt)throw new E}function j(e){if(0===e.length)throw new C}function S(e,t){let n=(0,m.ZC)(e),r=n!==e&&(0,o.fn)((0,o.sH)(e))&&(0,o.fn)((0,o.sH)(n)),a=(0,m.ZC)(t)!==t&&!t;(0,i.useEffect)(()=>{(0,x.pP)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES).state===x.qy.RUNNING&&n&&(r?I(new b,n):a&&I(new v,n))},[a,r,n])}function I(e,t){(0,x.cT)(g.JT.SLIDES_GENERATE_SPEAKER_NOTES),k(e);let n=c.zl.get(_.TD);if(t&&n){let e=JSON.stringify(n.toJSON());s.l7.ai("generate-slide-speaker-notes",()=>{(0,y.lq)(t,e)})}}},423808:(e,t,n)=>{n.d(t,{O:()=>T});var i=n(295870),r=n(692376),a=n(854225),s=n(466082),o=n(379141),l=n(270450),d=n(445019),c=n(102462),u=n(129416),m=n(888903),p=n(46844),h=n(750665),f=n(680912),g=n(772293),x=n(581121),_=n(818350),y=n(530979),b=n(644857),v=n(623854),C=n(916349),E=n(796970),w=n(483878);let k=e=>{let t=(0,p.mz)(),n=(0,s.UN)().get(e);if(!n)return t;let i=n.absoluteTransform.m12,r=n.absoluteBoundingBox.h,a=.1*r,o=i+a,l=i+r-a;return t.filter(e=>(0,w.O)(e,24,o,l))},T=async({params:e,abortController:t,clientLifecycleId:n})=>{let{source:s}=e,p=c.D.getState().openFile?.key,j=d.zl.get(b.ed),S=d.zl.get(b.hD);if(!S){(0,u.$D)(i.e.AI_PRODUCTIVITY,Error("Editor is null when trying to generate speaker notes"));return}let I=S.getEditorState();d.zl.set(b.TD,I);let A=(r.Ez5?.editorPreferences().speakerNotesHeight.getCopy()??0)===0;(0,E.x)({eventName:"started",fileKey:p,slideId:j,source:s});let N=!1;try{let e;(0,C.$3)(j),r.Ez5?.singleSlideView()&&A&&(0,w.ud)(a.CNR?.initialSpeakerNotesHeightInViewport()??0),S.setEditorState(S.getEditorState());let i={...(0,f.Ay)(),clientLifecycleId:n},s=k(j);(0,C.Ay)(s),(0,w.gH)();let d=s.map(e=>({text:e.characters,x:e.absoluteTransform.m02,y:e.absoluteTransform.m12}));(0,l.kc)().figjam_ai_piper_speaker_notes_image_filtering?(0,v.yU)(j)&&(e=await (0,w.Yu)(j),N=!0):(e=await (0,w.Yu)(j),N=!0);let u={texts:d,image:e},x=await h.Ay.slides.speakerNotes(u,i),_=new h.c6(x);if(t.signal.aborted){(0,E.x)({eventName:"stopped",fileKey:p,slideId:j,imageIncluded:N});return}let y="";for await(let e of _){if(t.signal.aborted){(0,E.x)({eventName:"stopped",fileKey:p,slideId:j,imageIncluded:N});return}y+=e.delta,(y=y.replace(/(.) -/g,"$1\n -")).length>0&&(0,w.hp)(y,"history-merge")}g.Y5.commit(),c.D.dispatch(m.F.enqueue({message:(0,o.t)("slides.speaker_notes.draft_generated"),role:"status",type:"speaker-notes-generated",timeoutOverride:2e3})),(0,E.x)({eventName:"finished",fileKey:p,slideId:j,imageIncluded:N});return}catch(e){S.setEditorState(I),(0,C.k0)(e,()=>{(function(){let e=E.f.TRY_AGAIN;d.zl.set(y.zF,e),(0,_.B3)(x.JT.SLIDES_GENERATE_SPEAKER_NOTES),(0,_.Ag)(x.JT.SLIDES_GENERATE_SPEAKER_NOTES,T,{source:e})})()}),(0,E.x)({eventName:"failed",fileKey:p,slideId:j,imageIncluded:N,errorType:e.type||e.marker}),(0,_.cT)(x.JT.SLIDES_GENERATE_SPEAKER_NOTES),C.dk.some(t=>e instanceof t)||(0,u.$D)(i.e.AI_PRODUCTIVITY,Error(`Unexpected error encountered while generating speaker notes: ${e.message}`));return}}},796970:(e,t,n)=>{n.d(t,{f:()=>a,x:()=>s});var i=n(295870),r=n(522568),a=(e=>(e.QUICK_ACTIONS="quick_actions",e.EDITOR_PLACEHOLDER="editor_placeholder",e.TRY_AGAIN="try_again",e))(a||{});function s(e){(0,r.sx)("slides_generate_speaker_notes_event",e,{addToRUM:!0,teamName:i.e.SLIDES})}},483878:(e,t,n)=>{n.d(t,{B_:()=>b,Hk:()=>C,O:()=>w,Yu:()=>k,ap:()=>y,gH:()=>_,hp:()=>g,k8:()=>v,lq:()=>x,ud:()=>E});var i=n(105652),r=n(295870),a=n(692376),s=n(412974),o=n(466082),l=n(480866),d=n(493083),c=n(445019),u=n(600643),m=n(19047),p=n(581121),h=n(818350),f=n(644857);function g(e,t="history-push"){let n=c.zl.get(f.hD);n&&n.update(()=>{(0,l.Wn)(e,[l.mK,l.NB])},{tag:t})}function x(e,t){let n=(0,o.UN)().get(e);if(n)try{n.slideSpeakerNotes=t}catch(e){(0,m.x1)(r.e.SLIDES,"Failed to set slide speaker notes",{error:e})}}function _(){let e=c.zl.get(f.hD);e&&e.dispatchCommand(u.SK,void 0)}function y(){let[e]=(0,d.DF)(),t=(0,c.Xr)(f.hD);return(0,i.useEffect)(()=>{t(e)},[e,t]),null}function b(){let[e]=(0,d.DF)(),t=v();return(0,i.useEffect)(()=>{t?e.setEditable(!1):e.setEditable(!0)},[e,t]),null}function v(){return(0,h.wj)(p.JT.SLIDES_GENERATE_SPEAKER_NOTES).state===h.qy.RUNNING}function C(){a.Ez5?.editorPreferences().speakerNotesHeight.set(0)}function E(e){a.Ez5?.editorPreferences().speakerNotesHeight.set(e)}function w(e,t,n,i){let r=e.absoluteTransform.m12>n&&e.absoluteTransform.m12+e.absoluteBoundingBox.h<i,a=e.fontSize>t;return e.visible&&(a||r)}async function k(e){let t=(0,o.UN)().get(e);if(t)return await (0,s.vr)(t)}},136503:(e,t,n)=>{n.d(t,{yx:()=>E,YQ:()=>w,oJ:()=>C,gu:()=>v,v8:()=>y,kM:()=>b});var i=n(239976),r=n(105652),a=n(445019),s=n(224542),o=n.n(s),l=n(985836),d=n(154963),c=n(433708),u=n(18775),m=n(368227),p=n(769752),h=n(680519);let f="loading_state--container--bmXPu";var g=n(868646);function x(){let e=(0,m.r$)(),t=(0,a.md)(c.bY),n=(0,u.sL)(),r=o()({[g.C9]:e===u.Ji.OVERLAY_MODAL,[g._P]:!n&&(e===u.Ji.PICKER||e===u.Ji.OUTLINE_TO_DECK),[g.mf]:n&&(e===u.Ji.PICKER||e===u.Ji.OUTLINE_TO_DECK),[g.cb]:t.type===c.Vf.TEMPLATE_PICKER,[d.s.m8.$]:!n,[d.s.m4.$]:n});return(0,i.jsx)(l.Qp,{className:r,animationType:l.JR.LIGHT_SHIMMER})}function _(){let e=(0,m.r$)(),t=o()({[g.XD]:e===u.Ji.PICKER||e===u.Ji.OUTLINE_TO_DECK,[g.I8]:e===u.Ji.OVERLAY_MODAL});return(0,i.jsx)(l.Qp,{className:t,animationType:l.JR.LIGHT_SHIMMER})}function y(){let e=(0,u.sL)();return(0,i.jsx)(l.Qp,{className:o()("loading_state--title--13aTN",{[d.s.m8.$]:!e,[d.s.m4.$]:e}),animationType:l.JR.LIGHT_SHIMMER})}function b({removePadding:e=!1,numSections:t=3,numTemplates:n}){let s=(0,a.md)(c.bY).type===c.Vf.TEMPLATE_PICKER?3:4,m=(0,u.sL)();return(0,i.jsx)("div",{className:o()("loading_state--loadingStateContainer--IE20z",{[d.s.px8.$]:!e}),children:Array.from({length:t}).map((e,t)=>(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(y,{}),(0,i.jsx)(p.p9,{children:Array.from({length:n??s}).map((e,t)=>(0,i.jsxs)("div",{className:d.s.flex.flexColumn.$,children:[(0,i.jsx)(x,{}),(0,i.jsx)(l.Wi,{className:o()(d.s.h16.w100.$,{[d.s.mx8.$]:!m,[d.s.mx4.$]:m}),animationType:l.JR.LIGHT_SHIMMER})]},t))})]},t))})}function v(){return(0,i.jsx)("div",{className:f,children:(0,i.jsx)(p.p9,{children:Array.from({length:14}).map((e,t)=>(0,i.jsx)(x,{},t))})})}function C(){return(0,i.jsx)("div",{className:f,children:(0,i.jsx)(p.y0,{children:Array.from({length:16}).map((e,t)=>(0,i.jsx)(_,{},t))})})}function E(){return(0,i.jsx)("div",{className:o()(h.Vg,d.s.px16.pb16.pt8.gap16.overflowHidden.hFull.$),children:Array.from({length:11}).map((e,t)=>(0,i.jsx)(w,{},t))})}function w(){return(0,i.jsxs)("div",{className:d.s.flex.flexColumn.gap4.$,children:[(0,i.jsx)(l.Qp,{className:"loading_state--file--pz5Df",animationType:l.JR.LIGHT_SHIMMER}),(0,i.jsx)(l.Wi,{className:"loading_state--fileTitle--Ux73C",animationType:l.JR.LIGHT_SHIMMER}),(0,i.jsx)(l.Wi,{className:"loading_state--fileSubtitle--L8VWW",animationType:l.JR.LIGHT_SHIMMER})]})}},249016:(e,t,n)=>{n.d(t,{Y:()=>a});var i=n(239976),r=n(154963);function a({children:e,dataTestId:t}){return(0,i.jsx)("div",{className:r.s.flex.flexColumn.hFull.$,"data-testid":t,children:e})}},831626:(e,t,n)=>{n.d(t,{q:()=>eB});var i=n(239976),r=n(105652),a=n(445019),s=n(677451),o=n(433708),l=n(379141),d=n(224542),c=n.n(d),u=n(393463),m=n(933870),p=n(154963),h=n(223487),f=n(351195),g=n(136503),x=n(249016),_=n(267688),y=n(692376),b=n(854225),v=n(798913),C=n(769752),E=n(702e3);function w({closePicker:e}){let t=t=>{v.l7.user("create-new-slide-with-default-theme",()=>{y.Ez5?.slideThemeLibBindings().insertDefaultLocalTheme(t,null)}),e()};return(0,i.jsxs)(C.MR,{title:(0,l.t)("slides.templates.dev_environment_only"),children:[(0,i.jsx)(E.FA,{thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,l.t)("slides.templates.light"),thumbnailUrl:(0,u.ck)("4a01804a5d4ad3a2d38ea604c0d8d63520e9b97b"),onPointerDown:()=>t(b.zMY.LIGHT)},"light"),(0,i.jsx)(E.FA,{thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,l.t)("slides.templates.dark"),thumbnailUrl:(0,u.ck)("01a1fc814ce18d9da3ba738aef79acc82c752ab7"),onPointerDown:()=>t(b.zMY.DARK)},"dark")]})}var k=n(519866),T=n(18775),j=n(368227),S=n(700954),I=n(20002),A=n(942356),N=n(409084),M=n(641172),R=n(526575),P=n(920675),O=n(908756),D=n(157750),L=n(194467),F=n(835585),B=n(198289),U=n(151015);function V({onSeeAllClick:e}){return(0,i.jsx)("button",{className:c()("see_all_button--seeAllButton--ZPU-C",p.s.font11.fontMedium.fontInter.flexShrink0.$),onClick:e,children:(0,l.tx)("slides.templates.view_type.see_all")})}var H=n(134146);function z({currentTeam:e}){let t=(0,j.fK)(),n=(0,a.Xr)(o.bY),{templates:r,isLoading:d,templateBrowseEntity:c,...u}=(0,s.wv)(P._Y.SLIDES,t);if(d||!c||"team"!==c.type||!r.length)return null;let m="numTemplatesForTeam"in u&&u.numTemplatesForTeam>t;return(0,i.jsx)(q,{title:(0,l.tx)("slides.templates.template_picker.header_with_name",{orgOrTeamName:e.name}),previewData:r,onSeeAllClick:m?()=>n({type:o.Vf.TEAM,teamId:e.id,displayName:e.name}):void 0})}function G({currentOrg:e}){let t=(0,j.fK)(),{templates:n,isLoading:r,templateBrowseEntity:d}=(0,s.wv)(P._Y.SLIDES,t),c=(0,a.Xr)(o.bY);if(r||!n.length||!d||"org"!==d.type)return null;let u=n&&n.length>=t?()=>c({type:o.Vf.ORG}):void 0;return(0,i.jsx)(q,{title:(0,l.tx)("slides.templates.theme_picker.org_template_header",{orgName:e.name}),previewData:n,onSeeAllClick:u})}function K(){let{shelves:e,status:t}=(0,H.v)(),n=(0,a.Xr)(o.bY),r=(0,j.fK)();return"loading"===t?(0,i.jsx)(g.kM,{removePadding:!0,numSections:2}):e&&0!==e.length?(0,i.jsx)(i.Fragment,{children:e.map(({shelfId:e,shelf:t,templates:a})=>{let s=a.slice(0,r);return 0===s.length?null:(0,i.jsx)(q,{title:(0,N.Yd)(t.i18n_meta.title,t.title),previewData:s,onSeeAllClick:a.length>r?()=>n({type:o.Vf.HUB_FILE,shelfId:t.id}):void 0},e)})}):null}function W(){let e=(0,M.eE)(F.$A.Slides),t=(0,L.TI)(F.$A.Slides),n=(0,j.fK)(),r=(0,I.wA)(),a=(0,h.q5)(),o=(0,s.J3)(),d=(0,s.JU)(o),c=o===s.kN.FILE_IN_DRAFTS,u=0===(0,D.ut)(y.Ez5?.canvasGrid()?.canvasGridArray,[]).length,m=(0,O.oh)(B.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:F.$A.Slides}));return 0===t?null:m||!a?(0,i.jsx)(g.kM,{numSections:1,numTemplates:t,removePadding:!0}):(0,i.jsx)(q,{title:(0,l.t)("slides.templates.recents"),previewData:e.slice(0,n),onPublishTemplateClick:d&&!u?()=>{(0,U.ZW)({dispatch:r,file:{key:a.key,name:a.name,folder_id:a.folderId,team_id:a.teamId,editor_type:a.editorType,parent_org_id:a.parentOrgId},source:"template-picker",fileNeedsMovingBeforePublish:c}),(0,R.Cu)({name:"publish-template-template-modal",fileKey:a.key})}:void 0})}function q({title:e,previewData:t,onSeeAllClick:n,onPublishTemplateClick:r}){let a=n?(0,i.jsx)(V,{onSeeAllClick:n}):r?(0,i.jsx)(A.$n,{onClick:r,recordingKey:"template-picker-publish-template",variant:"secondary",children:(0,l.tx)("slides.templates.button.publish_template")}):void 0;return(0,i.jsx)(C.MR,{title:e,rightHeaderCta:a,children:t.map(e=>(0,i.jsx)(E.AK,{template:e},e.template.id))})}var X=n(777457),Y=n(259714),J=n(874554),Z=n(312620);function Q({isSearchQueryLoading:e,trimmedSearchQuery:t,searchQueryResult:n,requestLoadMore:r}){let{onShowSeparatorScroll:a}=(0,j.gH)();return e&&0===n.length?(0,i.jsx)("div",{className:p.s.p8.$,children:(0,i.jsx)(g.gu,{})}):0===n.length?(0,i.jsxs)("div",{className:p.s.p10.flex.flex1.flexColumn.itemsCenter.alignCenter.textBodyMedium.colorTextDisabled.$,children:[(0,i.jsx)(Y.B,{className:p.s.h200.$,svg:Z.A,useOriginalSrcFills_DEPRECATED:!0}),(0,i.jsx)("div",{children:(0,l.tx)("slides.templates.search.empty",{searchTerm:(0,i.jsx)("span",{className:p.s.fontBold.$,children:t})})}),(0,i.jsx)("div",{children:(0,l.tx)("slides.templates.search.empty.tip")})]}):(0,i.jsx)(m.P,{className:p.s.px8.hFull.$,onScroll:a,children:(0,i.jsxs)("div",{className:p.s.pt8.$,children:[(0,i.jsx)(C.p9,{children:n.map(e=>(0,i.jsx)(E.AK,{template:e},(0,J.NH)(e)))}),(0,i.jsx)(X.a,{onIntersectionChange:({isIntersecting:e})=>{e&&r()}})]})})}var $=n(680519);function ee({closePicker:e}){let{loading:t}=(0,S.mp)(),n=(0,j.r$)(),{scrollPosition:l,scrollRef:d,onScroll:c,resetScrollTop:x}=(0,j.d$)(o.Vf.ALL),{onShowSeparatorScroll:_}=(0,j.gH)(),y=(0,a.md)(o.q7),b=(0,h.tS)(),v=(0,s.Gi)(),{start:C}=(0,f.JY)(),E=(0,a.Xr)(o.bY);return((0,r.useEffect)(()=>()=>x([o.Vf.ALL]),[x]),t||y&&!b)?(0,i.jsx)(g.kM,{}):(0,i.jsxs)(m.P,{className:p.s.px8.hFull.$,scrollContainerRef:d,initialScrollTop:l,onScroll:(e,t)=>{c(e,t),_(e,t)},children:[n===T.Ji.OVERLAY_MODAL&&(0,i.jsx)(k.v,{onStartFromFigJamSelected:function(){E({type:o.Vf.FILE_PICKER,parentType:o.Vf.ALL})},onStartFromTextOutlineSelected:function(){C()}}),(0,i.jsx)(W,{}),v?.type==="org"&&(0,i.jsx)(G,{currentOrg:v.entity}),v?.type==="team"&&(0,i.jsx)(z,{currentTeam:v.entity}),(0,i.jsx)(K,{}),(0,u.IX)()&&(0,i.jsx)(w,{closePicker:e})]})}function et({closePicker:e,showCloseButton:t}){let{trimmedSearchQuery:n,searchQuery:r,setSearchQuery:a,isSearchQueryLoading:s,searchQueryResult:o,requestLoadMore:d}=(0,j.$N)(),{showSeparator:u}=(0,j.gH)();return(0,i.jsxs)(x.Y,{children:[(0,i.jsx)("div",{className:c()({[$.me]:u}),children:(0,i.jsx)(_.tJ,{searchQuery:r,setSearchQuery:a,showCloseButton:!!t,placeholder:(0,l.t)("slides.templates.search_templates")})}),n?(0,i.jsx)(Q,{isSearchQueryLoading:s,trimmedSearchQuery:n,searchQueryResult:o,requestLoadMore:d}):(0,i.jsx)(ee,{closePicker:e})]})}var en=n(538349),ei=n(938241),er=n(273807),ea=n(797600);function es({shelfId:e}){let[{data:t,status:n}]=(0,en.IT)((0,ea.Q)(e)),r=(0,a.Xr)(o.bY),{scrollPosition:s,scrollRef:l,onScroll:d}=(0,j.d$)(o.Vf.HUB_FILE),c=()=>r({type:o.Vf.ALL});return"loading"===n?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{isLoading:!0,title:"",onClick:c}),(0,i.jsx)(g.kM,{})]}):t?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{title:(0,N.Yd)(t.i18n_meta.title,t.title),onClick:c}),(0,i.jsx)(m.P,{className:p.s.px8.pt16.hFull.$,scrollContainerRef:l,initialScrollTop:s,onScroll:d,children:(0,i.jsx)(C.p9,{children:t.shelf_content.map(t=>(0,i.jsx)(E.AK,{template:{type:ei.n.HubFile,category:e,template:t}},t.id))})})]}):null}var eo=n(865702),el=n(295870),ed=n(19047),ec=n(888903),eu=n(287736),em=n(293345),ep=n(183276),eh=n(623854);function ef({libraryKey:e}){let t=(0,j.NG)(e),[n,s]=(0,a.fp)(o.bY),l=null===(0,h.tS)(),d=(0,j.r$)(),c=(0,j.S7)(),u=(0,a.Xr)(o.ux),m=(0,a.Xr)(o.oQ);return((0,r.useEffect)(()=>{l||["loading","loaded"].includes(t.status)||(0,ed.Lo)(el.e.SLIDES,`Query result status has unexpected value: ${t.status}`)},[l,t.status]),"loading"===t.status||l)?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{title:"",isLoading:!0,onClick:()=>{s(n.type===o.Vf.TEMPLATE?n.parentView:{type:o.Vf.ALL}),u(null),m(null)},showSeparator:!1}),(0,i.jsx)("div",{className:p.s.px16.overflowHidden.$,children:(0,i.jsx)(g.oJ,{})}),d===T.Ji.OVERLAY_MODAL&&!c&&(0,i.jsx)(em.PW,{createOutline:eo.lQ,addAllSlides:eo.lQ,disabled:!0})]}):(0,i.jsx)(eg,{libraryKey:e,modules:t.data||[]})}function eg({libraryKey:e,modules:t}){let n=(0,j.r$)(),[s,d]=(0,a.fp)(o.bY),c=(0,a.Xr)(o.ux),u=(0,a.Xr)(o.oQ),{showSeparator:m}=(0,j.gH)(),p=(0,I.wA)(),h=t&&t.length>0,f=(0,eh.e)(),g=(0,ep.E)({libraryKey:e,modules:t??[]}),_=s.type===o.Vf.TEMPLATE&&s.shouldRemoveSourceLibraryKeyOnFail,y=(0,j.BX)(f);if((0,r.useEffect)(()=>{if(!h&&s.type===o.Vf.TEMPLATE){if(_){y(),d({type:o.Vf.ALL});return}e?((0,ed.x1)(el.e.SLIDES,"Expected to find at least one module in slides template",{libraryKey:e},{reportAsSentryError:!0}),p(ec.F.enqueue({type:"slides-template",message:(0,l.t)("slides.templates.toast.no_longer_available"),error:!0,icon:eu.zX.EXCLAMATION}))):(0,ed.x1)(el.e.SLIDES,"No library key found for slides template",{},{reportAsSentryError:!0}),d({type:o.Vf.ALL})}},[p,h,e,t,y,d,_,s.type]),!h)return null;let b=t[0],v=b.file_name||"",E=b.publisher_name;return(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{title:v,publisherName:E,onClick:()=>{d(s.type===o.Vf.TEMPLATE?s.parentView:{type:o.Vf.ALL}),c(null),u(null)},showSeparator:m,children:(0,i.jsx)(ex,{addAllSlides:g})}),(0,i.jsx)(C.Dh,{modules:t}),n===T.Ji.OVERLAY_MODAL&&(0,i.jsx)(em.PW,{createOutline:()=>{c(b.library_key),d({type:o.Vf.FILE_PICKER,parentType:o.Vf.TEMPLATE})},addAllSlides:g})]})}function ex({addAllSlides:e}){return(0,j.r$)()===T.Ji.PICKER?(0,i.jsx)(e_,{children:(0,i.jsx)(A.$n,{variant:"secondary",onClick:e,children:(0,l.tx)("slides.templates.add_all_slides")})}):null}function e_({children:e}){return(0,i.jsx)("div",{className:p.s.mr8.mlAuto.$,children:e})}var ey=n(270450),eb=n(46865),ev=n(629876);function eC({title:e,templates:t,onRequestMore:n,onSeeAllClick:r}){return(0,i.jsxs)(C.MR,{title:e,rightHeaderCta:r?(0,i.jsx)(V,{onSeeAllClick:r}):void 0,children:[t.map(e=>(0,i.jsx)(E.AK,{template:e},(0,J.gp)(e))),(0,i.jsx)(X.a,{onIntersectionChange:n})]})}function eE({currentOrg:e}){let{isLoadingTeamTemplates:t,templatesByTeam:n,requestLoadMore:l,requestLoadMoreForTeam:d}=(0,s.GR)(e,P._Y.SLIDES),c=(0,ev.G7)(e),u=(0,j.fK)(),{teamTemplates:h,isLoading:f,requestLoadMoreForOrg:_}=(0,s.e2)({orgId:e.id,areWorkspacesEnabled:c,numTemplatesPerTeam:u,editorType:P._Y.SLIDES,filterByIds:null}),y=(0,ey.kc)().pro_templates_lg,b=y?h:n,v=(0,a.Xr)(o.bY),{scrollPosition:C,scrollRef:E,onScroll:w}=(0,j.d$)(o.Vf.ORG),k=b?.[b.length-1]?.teamId??null,T=(0,r.useRef)(null);(0,eb.X)({containerRef:E,targetRef:T,targetKey:k,onIntersectionChange:y?_:l});let S=()=>v({type:o.Vf.ALL});return(y?f:t)?(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{isLoading:!0,title:"",onClick:S}),(0,i.jsx)(g.kM,{})]}):(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{title:e.name,onClick:S}),(0,i.jsx)(m.P,{className:p.s.px8.hFull.$,scrollContainerRef:E,initialScrollTop:C,onScroll:w,children:b.map(t=>(0,i.jsx)("div",{ref:k===t.teamId?T:null,children:(0,i.jsx)(eC,{title:t.teamName??e.name,templates:t.templates,onRequestMore:()=>{y||d(t.teamId)},onSeeAllClick:y&&t.totalTemplatesByTeam>u?()=>v({type:o.Vf.TEAM,teamId:t.teamId,displayName:t.teamName??e.name}):void 0},t.teamId)},t.teamId))})]})}var ew=n(816505);function ek({templates:e,scrollContainerRef:t,onRequestMore:n}){let a=e?.[e.length-1]?.id,s=(0,r.useRef)(null);return(0,eb.X)({containerRef:t,targetRef:s,targetKey:a,onIntersectionChange:n}),(0,i.jsx)(C.MR,{children:e.map(e=>(0,i.jsx)("div",{ref:e.id===a?s:void 0,children:(0,i.jsx)(E.AK,{template:{type:ei.n.TeamTemplateLg,template:e}},e.id)},e.id))})}function eT({teamId:e,displayName:t}){let{requestLoadMoreForTeam:n,templatesByTeam:r}=(0,s.li)({teamId:e,editorType:P._Y.SLIDES}),l=(0,a.Xr)(o.bY),{scrollPosition:d,scrollRef:c,onScroll:u}=(0,j.d$)(o.Vf.TEAM),h=(0,ew.dq)();return(0,i.jsxs)(x.Y,{children:[(0,i.jsx)(er.Z,{title:t,onClick:()=>{h?l({type:o.Vf.ORG}):l({type:o.Vf.ALL})}}),r?(0,i.jsx)(m.P,{className:p.s.p8.hFull.$,scrollContainerRef:c,initialScrollTop:d,onScroll:u,children:(0,i.jsx)(ek,{scrollContainerRef:c,templates:r.templates,onRequestMore:n})}):(0,i.jsx)("div",{className:p.s.p8.$,children:(0,i.jsx)(g.gu,{})})]})}var ej=n(634413),eS=n(732108),eI=n(575015),eA=n(391596);function eN({showCloseButton:e}){let{searchQuery:t,setSearchQuery:n}=(0,j.$N)(),[r,s]=(0,a.fp)(o.bY),d=!!(r.type===o.Vf.TEMPLATE_PICKER&&r.figjamEntryPointData),c=(0,I.d4)(e=>e.mirror.appModel.multiplayerSessionState===y.kul.JOINED)||(0,eI.nl)();return(0,i.jsxs)(x.Y,{dataTestId:"template-picker-view",children:[d?(0,i.jsx)(_.tJ,{searchQuery:t,setSearchQuery:n,showCloseButton:!0,placeholder:(0,l.t)("slides.templates.search_templates")}):(0,i.jsx)(_.ui,{searchQuery:t,setSearchQuery:n,onBack:function(){s({type:o.Vf.FILE_PICKER,parentType:o.Vf.TEMPLATE_PICKER})},showCloseButton:!!e,placeholder:(0,l.t)("slides.templates.template_picker.search_templates")}),c?(0,i.jsx)(eM,{footer:e=>(0,i.jsx)(em.wJ,{templateSelected:e})}):(0,i.jsx)(g.kM,{removePadding:!0})]})}function eM({footer:e}){let{trimmedSearchQuery:t,isSearchQueryLoading:n,searchQueryResult:r,requestLoadMore:s}=(0,j.$N)(),d=(0,a.md)(o.ux),{showSeparator:u}=(0,j.gH)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:c()(p.s.p16.flex.flexColumn.gap2.$,{[$.me]:t&&u}),children:(0,i.jsx)(_._8,{icon:(0,i.jsx)("div",{style:{"--color-icon":"var(--color-icon-menu-onselected)"},className:p.s.colorBgBrand.h14.w14.bRadius2.flex.alignCenter.itemsCenter.$,children:(0,i.jsx)(eS.X,{})}),title:(0,l.t)("slides.templates.template_picker.title"),subtitle:(0,l.t)("slides.templates.template_picker.subtitle")})}),t?(0,i.jsx)(Q,{isSearchQueryLoading:n,trimmedSearchQuery:t,searchQueryResult:r,requestLoadMore:s}):(0,i.jsx)(eP,{}),e(!!d)]})}var eR=(e=>(e[e.RECENTS=1]="RECENTS",e[e.HUB_FILE=2]="HUB_FILE",e[e.ORG=3]="ORG",e))(eR||{});function eP(){let e=(0,ew.sZ)(),[t,n]=r.useState([]),[a,s]=r.useState(null),[{data:d}]=(0,eA.IT)((0,ea._)()),u=(0,M.eE)(F.$A.Slides),{scrollPosition:m,scrollRef:h,onScroll:f}=(0,j.d$)(o.Vf.TEMPLATE_PICKER),{showSeparator:g,onShowSeparatorScroll:x}=(0,j.gH)(),_=r.useCallback((e,t)=>{f(e,t),x(e,t)},[f,x]);(0,r.useEffect)(()=>{let t=[];if(u.length>0&&t.push({type:1,id:"recents",label:(0,l.t)("slides.templates.recents")}),d)for(let e of d)t.push({type:2,shelf:e,id:`hub-${e.id}`,label:e.title});e&&t.push({type:3,id:"org",label:(0,l.t)("slides.templates.org_templates")}),n(t),t.length>0&&s(t[0].id)},[u,e,d]);let y=e=>()=>{s(e)},b={scrollContainerRef:h,initialScrollTop:m,onScroll:_},v=t.find(e=>e.id===a);return v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:c()(p.s.flex.flexRow.gap6.alignCenter.itemsCenter.px16.pb16.$,{[$.me]:g}),children:t.map(e=>(0,i.jsx)("button",{className:c()(p.s.textBodyMedium.colorText.spacingWide.alignCenter.px8.h24.$,{[$.eg]:a===e.id,[p.s.textBodyMediumStrong.$]:a===e.id,[p.s.colorTextSecondary.$]:a!==e.id}),onClick:y(e.id),children:2===e.type?(0,N.Yd)(e.shelf.i18n_meta.title,e.shelf.title):e.label},e.id))}),(t=>{switch(t.type){case 2:return(0,i.jsx)(eF,{shelf:t.shelf,...b});case 1:return(0,i.jsx)(eO,{...b});case 3:if(!e)throw Error("Something went wrong in tab calculation");return(0,i.jsx)(eL,{currentOrg:e,...b})}})(v)]}):null}function eO({scrollContainerRef:e,initialScrollTop:t,onScroll:n}){let r=(0,M.eE)(F.$A.Slides);return 0===r.length?null:(0,i.jsx)(m.P,{className:p.s.px8.hFull.$,scrollContainerRef:e,initialScrollTop:t,onScroll:n,children:(0,i.jsx)(C.p9,{children:r.map(e=>(0,i.jsx)(E.AK,{template:e},(0,J.NH)(e)))})})}function eD({teamId:e,displayName:t,onBackClick:n}){let{requestLoadMoreForTeam:a,templatesByTeam:o}=(0,s.li)({teamId:e,editorType:P._Y.SLIDES}),l=(0,r.useRef)(null);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.Z,{title:t,onClick:n,showSeparator:!1}),o?(0,i.jsx)(m.P,{scrollContainerRef:l,className:p.s.px8.hFull.$,children:(0,i.jsx)(ek,{scrollContainerRef:l,templates:o.templates,onRequestMore:a})}):(0,i.jsx)(g.gu,{})]})}function eL({currentOrg:e,scrollContainerRef:t,initialScrollTop:n,onScroll:a}){let{isLoadingTeamTemplates:o,templatesByTeam:l,requestLoadMore:d,requestLoadMoreForTeam:c}=(0,s.GR)(e,P._Y.SLIDES),u=(0,ev.G7)(e),{teamTemplates:h,isLoading:f,requestLoadMoreForOrg:x}=(0,s.e2)({orgId:e.id,areWorkspacesEnabled:u,numTemplatesPerTeam:6,editorType:P._Y.SLIDES,filterByIds:null}),_=(0,ey.kc)().pro_templates_lg,y=_?h:l,b=y?.[y.length-1]?.teamId??null,v=(0,r.useRef)(null);(0,eb.X)({containerRef:t,targetRef:v,targetKey:b,onIntersectionChange:_?x:d});let[C,E]=r.useState(null);return C?(0,i.jsx)(eD,{teamId:C,displayName:e.name,onBackClick:()=>E(null)}):(_?f:o)?(0,i.jsx)(g.kM,{}):(0,i.jsx)(m.P,{className:p.s.px8.hFull.$,scrollContainerRef:t,initialScrollTop:n,onScroll:a,children:y.map(t=>(0,i.jsx)("div",{ref:b===t.teamId?v:null,children:(0,i.jsx)(eC,{title:t.teamName??e.name,templates:t.templates,onRequestMore:()=>{_||c(t.teamId)},onSeeAllClick:_&&t.totalTemplatesByTeam>6?()=>{E(t.teamId)}:void 0},t.teamId)},t.teamId))})}function eF({shelf:e,scrollContainerRef:t,initialScrollTop:n,onScroll:r}){let[{status:a}]=(0,eA.IT)((0,ea._)());if("loading"===a)return(0,i.jsx)(g.kM,{});let s=e.id;return(0,i.jsx)(m.P,{className:p.s.px8.hFull.$,scrollContainerRef:t,initialScrollTop:n,onScroll:r,children:(0,i.jsx)(C.p9,{children:e.shelf_content.map(e=>{let t={type:ei.n.HubFile,category:s,template:e};return(0,i.jsx)(E.AK,{template:t},e.id)})})})}function eB({showCloseButton:e}){let t=(0,a.md)(o.bY),n=(0,a.Xr)(o.VZ),l=(0,a.Xr)(o.Ei),d=(0,a.Xr)(o.OR),c=(0,a.Xr)(o.xw),u=(0,s.Gi)();switch((0,r.useEffect)(()=>()=>{d(""),c()},[c,d]),t.type){case o.Vf.ALL:return(0,i.jsx)(et,{showCloseButton:e,closePicker:()=>{l(!1),n(!1)}});case o.Vf.ORG:if(u?.type!=="org")throw Error("User is not allowed to browse org templates");return(0,i.jsx)(eE,{currentOrg:u.entity});case o.Vf.TEAM:if(!u)throw Error("User is not allowed to browse team templates");return(0,i.jsx)(eT,{teamId:t.teamId,displayName:t.displayName});case o.Vf.TEMPLATE:return(0,i.jsx)(ef,{libraryKey:t.libraryKey});case o.Vf.HUB_FILE:return(0,i.jsx)(es,{shelfId:t.shelfId});case o.Vf.FILE_PICKER:return(0,i.jsx)(ej.gT,{showCloseButton:e});case o.Vf.TEMPLATE_PICKER:return(0,i.jsx)(eN,{showCloseButton:e});default:return null}}},293345:(e,t,n)=>{n.d(t,{PW:()=>b,X_:()=>C,jc:()=>E,wJ:()=>y});var i=n(239976),r=n(942356),a=n(915653),s=n(271650),o=n(379141),l=n(445019),d=n(224542),c=n.n(d),u=n(154963),m=n(581121),p=n(892691),h=n(761826),f=n(433708),g=n(700954),x=n(533774),_=n(680519);function y({templateSelected:e}){let{startAction:t,figjamFileKey:n}=(0,h.D)();return(0,i.jsx)(w,{children:(0,i.jsx)(r.$n,{iconPrefix:(0,i.jsx)(a.m,{}),variant:"primary",onClick:t,disabled:!n,children:(0,o.tx)(e?"slides.templates.template_picker.submit.button.with_template":"slides.templates.template_picker.submit.button.without_template")})})}function b({createOutline:e,addAllSlides:t,disabled:n}){let{isCreateSlidesOutlineEnabled:a}=(0,g.mp)();return(0,i.jsxs)("div",{className:c()(u.s.flex.itemsCenter.justifyEnd.py8.pr16.gap8.$,_.qr),children:[a&&(0,i.jsx)(r.$n,{iconPrefix:(0,i.jsx)(s.C,{}),variant:"secondary",onClick:e,disabled:n,children:(0,o.tx)("slides.templates.outline_with_template.button")}),(0,i.jsx)(r.$n,{variant:"secondary",onClick:t,disabled:n,children:(0,o.tx)("slides.templates.add_all_slides")})]})}function v({children:e}){return(0,i.jsx)(w,{children:(0,i.jsxs)("div",{className:u.s.flex.gap8.itemsCenter.$,children:[(0,i.jsx)(x.B,{}),e]})})}function C(){let e=(0,l.md)(f.V6),{startAction:t,figjamFileKey:n}=(0,h.D)();return(0,i.jsx)(v,{children:(0,i.jsx)(r.$n,{iconPrefix:(0,i.jsx)(a.m,{}),variant:"primary",onClick:t,disabled:!n||e.type===f.i6.NONE,children:(0,o.tx)("slides.templates.file_picker.submit_button.generate")})})}function E(){let e=(0,l.md)(f.V6),t=(0,l.Xr)(f.bY),n=(0,l.md)(f.oQ);return(0,i.jsx)(v,{children:(0,i.jsx)(r.$n,{variant:"primary",onClick:()=>{t({type:f.Vf.TEMPLATE_PICKER})},disabled:!n||e.type===f.i6.NONE,children:(0,o.tx)("slides.templates.file_picker.submit_button.pick_template")})})}function w({children:e}){return(0,i.jsxs)("div",{className:c()(u.s.flex.itemsCenter.justifyBetween.pl12.pr8.py8.$,_.qr),children:[(0,i.jsx)("div",{className:u.s.flex.itemsCenter.justifyStart.gap8.$,children:(0,i.jsx)(p.yi,{helpUrlVariant:m.JT.BOARD_TO_DECK})}),e]})}},769752:(e,t,n)=>{n.d(t,{Dh:()=>u,MR:()=>p,p9:()=>m,y0:()=>h});var i=n(239976),r=n(379141),a=n(224542),s=n.n(a),o=n(933870),l=n(154963),d=n(368227),c=n(702e3);function u({modules:e}){let{onShowSeparatorScroll:t}=(0,d.gH)();if(!e.length)return null;let n=e[0].library_key;return(0,i.jsx)(o.P,{className:l.s.px16.hFull.$,onScroll:t,children:(0,i.jsx)(h,{children:e.map((t,n)=>(0,i.jsx)(c.ag,{module:t,"aria-label":(0,r.t)("slides.templates.template_picker.slide_button.aria_label",{index:n+1,total:e.length})},t.id))},n)})}function m({children:e}){return(0,i.jsx)("div",{className:l.s.flex.flexWrap.pb8.gap0.$,children:e})}function p({title:e,children:t,rightHeaderCta:n}){let r=e||!!n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:s()({[l.s.flex.justifyBetween.alignLeft.itemsCenter.pt16.pb8.px8.$]:r}),children:[e&&(0,i.jsx)("div",{className:l.s.font13.colorText.fontSemiBold.fontInter.noWrap.overflowHidden.ellipsis.pr4.$,children:e}),n]}),(0,i.jsx)(m,{children:t})]})}function h({children:e}){return(0,i.jsx)("div",{className:l.s.flex.flexWrap.pb16.gap8.$,children:e})}},267688:(e,t,n)=>{n.d(t,{_8:()=>g,tJ:()=>h,ui:()=>f});var i=n(239976),r=n(224542),a=n.n(r),s=n(617960),o=n(154963),l=n(368227),d=n(378721),c=n(270166),u=n(379141);function m({onClick:e}){return(0,i.jsx)(d.K,{"aria-label":(0,u.t)("common.close"),onClick:e,children:(0,i.jsx)(c.A,{})})}var p=n(680519);function h({searchQuery:e,setSearchQuery:t,showCloseButton:n,placeholder:r}){let{canDismiss:d,maybeUseLightTemplateOnDismiss:c}=(0,l.vN)();return(0,i.jsxs)("div",{className:o.s.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$,children:[(0,i.jsx)(s.IW,{className:a()(p.ON,o.s.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,placeholder:r,focusOnMount:!0,withSmallXIcon:!0}),n&&d&&(0,i.jsx)(m,{onClick:c})]})}function f({searchQuery:e,setSearchQuery:t,onBack:n,showCloseButton:r,placeholder:d}){let{canDismiss:c,maybeUseLightTemplateOnDismiss:u}=(0,l.vN)();return(0,i.jsxs)("div",{className:a()(o.s.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$),children:[(0,i.jsx)(s.RE,{className:a()(p.ON,o.s.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,onBack:n,placeholder:d,focusOnMount:!0,withSmallXIcon:!0}),r&&c&&(0,i.jsx)(m,{onClick:u})]})}function g({icon:e,title:t,subtitle:n}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:o.s.flex.flexRow.gap6.lh24.itemsCenter.$,children:[e,(0,i.jsx)("h1",{className:o.s.colorText.fontInter.font14.fontNormal.fontSemiBold.spacingCompact.$,children:t})]}),(0,i.jsx)("h2",{className:o.s.colorTextSecondary.textBodyMedium.$,children:n})]})}},533774:(e,t,n)=>{n.d(t,{B:()=>g});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(379141),l=n(445019),d=n(575015),c=n(971340),u=n(154963),m=n(964731),p=n(248046),h=n(682636),f=n(433708);function g(){let e=(0,a.wA)(),t=(0,m.Um)(),n=(0,l.md)(f.oQ),[c,g]=r.useState([]),[_,y]=(0,l.fp)(f.V6),b=(0,h.M0)(n);return(r.useEffect(()=>{!(0,d.nl)()&&n&&(y({type:f.i6.NONE}),(async()=>{let e=await b();if(!e)return;let t=s.Zdr?.getPagesFromBuffer(e)??[],n=t[0];n&&(g(t.map(e=>({guid:e.guid,name:e.name}))),y({type:f.i6.SINGLE,page:{guid:n.guid,name:n.name}}))})())},[n,y,b]),n)?_.type===f.i6.NONE?(0,i.jsx)(x,{}):(0,i.jsx)("div",{"data-testid":"page-selector",children:(0,i.jsxs)(p.l6,{ariaLabel:(0,o.t)("slides.templates.file_picker.page_selector.label"),className:"slides_template_page_selector--pageSelector--cVYnW",dispatch:e,dropdownShown:t,dropdownWidth:208,formatter:{format:e=>{switch(e.type){case f.i6.SINGLE:return e.page.name;case f.i6.ALL:return(0,o.t)("slides.templates.file_picker.page_selector.all_pages");default:return""}},isEqual:(e,t)=>e.type===t.type&&(e.type!==f.i6.SINGLE||t.type!==f.i6.SINGLE||e.page.guid===t.page.guid&&e.page.name===t.page.name)},id:"slides-ai-file-picker-page-select",inputClassName:u.s.fontMedium.colorText.ellipsis.alignTop.maxW150.$,onChange:e=>{y(e)},property:_,children:[(0,i.jsx)(p.c$,{value:{type:f.i6.NONE},disabled:!0,ignoreCheck:!0,children:(0,o.t)("slides.templates.file_picker.page_selector.label")}),c.map(e=>(0,i.jsx)(p.c$,{value:{type:f.i6.SINGLE,page:e},children:e.name},e.guid)),(0,i.jsx)(p.sK,{}),(0,i.jsx)(p.c$,{value:{type:f.i6.ALL,allPages:c},children:(0,o.t)("slides.templates.file_picker.page_selector.all_pages")},-1)]})}):null}function x(){return(0,i.jsxs)("div",{className:"slides_template_page_selector--pageSelectorLoadingState--maN98",children:[(0,i.jsx)("div",{className:u.s.fontMedium.overflowHidden.colorTextSecondary.$,children:(0,o.t)("slides.templates.file_picker.page_selector.loading")}),(0,i.jsx)(c.kt,{})]})}},805878:(e,t,n)=>{n.d(t,{x:()=>f});var i=n(239976),r=n(693613),a=n(379141),s=n(324753),o=n(943360),l=n(870948),d=n(363754),c=n(323264);function u(e){let{index:t,item:n,label:r,buttonId:a,showCellOutline:l,actionOnPointerDown:d,onActivateItem:c,renderItem:u}=e;return(0,i.jsx)(s.fh,{...{0:{},1:{className:"x1lliihq xeuugli x1de99jn xaatb59 x1uczgqu x8wkva7"}}[!!l<<0],children:(0,i.jsx)(o.E,{type:"button","aria-label":r,onClick:c?e=>c(n,t,e):void 0,actionOnPointerDown:d,className:"x1lliihq xh8yej3 x16tdsg8 xjbqb8w xc342km xng3xce x9r1u3d x1717udv x1ypdohk",children:u({item:n,index:t,active:!1,id:a})})})}function m(e){let{items:t,renderItem:n,getItemLabel:r,labelledById:a,columns:s=3,gridGap:o,onActivateItem:m,actionOnPointerDown:h,idPrefix:f="template-picker-grid",containerStyle:g,ariaLabel:x,showCellOutline:_=!0}=e;return(0,i.jsx)(d.bL,{"aria-label":a?void 0:x,"aria-labelledby":a||void 0,...c.Ay.props(p.grid,g),children:(()=>{let e=function(e,t){let n=[];for(let i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}(t,s),a=e.length>1;return e.map((e,t)=>(0,i.jsx)(l.fI,{className:"xrvj5dj xh8yej3 x1nfngrj x15r87gk",style:{gridTemplateColumns:`repeat(${s}, minmax(0, 1fr))`,...o&&{gap:o},...o&&a&&t>0&&{marginBlockStart:o}},children:e.map((e,a)=>{let o=t*s+a,l=r(e,o),d=`${f}-cell-${o}`;return(0,i.jsx)(u,{index:o,item:e,label:l,buttonId:d,showCellOutline:_,actionOnPointerDown:h,onActivateItem:m,renderItem:n},`cell-${o}`)})},`row-${t}`))})()})}let p={grid:{k3XXqK:"x1t137rt",kzqmXN:"xh8yej3",$$css:!0}};var h=n(874554);function f(e){return"getItemLabel"in e?(0,i.jsx)(m,{gridGap:r.jH.spacer3,...e}):(0,i.jsx)(m,{gridGap:r.jH.spacer3,getItemLabel:e=>(0,a.t)("slides.templates.view_template.aria_label",{templateName:(0,h.gY)(e)}),...e})}},702e3:(e,t,n)=>{n.d(t,{AK:()=>H,FA:()=>U,ag:()=>B});var i=n(239976),r=n(105652),a=n(20002),s=n(865702),o=n(943360),l=n(692376),d=n(854225),c=n(798913),u=n(22291),m=n(379141),p=n(445019);n(323264);var h=n(224542),f=n.n(h),g=n(312884),x=n(875253),_=n(75962),y=n(971340),b=n(154963),v=n(152148),C=n(257556),E=n(526575),w=n(874554),k=n(223487),T=n(732400),j=n(562792),S=n(605985),I=n(535782),A=n(144118),N=n(644857),M=n(311667),R=n(76608),P=n(433708),O=n(18775),D=n(368227),L=n(868646);let F=(0,v.f)();function B({module:e,...t}){let n=(0,S.TA)(),s=(0,D.r$)(),o=(0,p.Xr)(P.VZ),u=(0,p.Xr)(P.Ei),m=(0,p.md)(N.v2),h=(0,k.tS)(),_=(0,a.wA)(),y="insert-slide-module",v=(0,M.D)(e.library_key),C=c.nc.user(y,(t,n,i)=>{(0,O.CH)({module:e,viewType:s,getGridCoord:l.Ez5?.getInsertGridCoord??(()=>({row:0,col:0})),dispatch:_,subscribeToLibrary:v})(t,n,i)}),{onInsertableResourcePointerDown:w,dragState:I}=(0,j.j)({resource:e,isList:!1,sourceForTracking:"slides-templates-panel",clickToInsert_DEPRECATED:!0,insertAsChildOfCanvas:!0,insertionCallback:C,afterSuccessfulInsert:()=>{u(!1),o(!1)},selectAfterInsert:!1}),A=c.nc.user(y,w),R=r.useMemo(()=>m?new x.Mi(d.CNR?.singleSlideThumbnailWidth()??0,d.CNR?.singleSlideThumbnailHeight()??0):void 0,[m]),B=r.useMemo(()=>{let t=e.thumbnail_url;if(t)return n?(0,g.NQ)(t,"fuid",n):t},[e.thumbnail_url,n]);return(0,i.jsxs)("div",{className:f()(b.s.flex.alignCenter.justifyCenter.gap8.$,{[L.e4]:s===O.Ji.PICKER||s===O.Ji.OUTLINE_TO_DECK,[L.pz]:s===O.Ji.OVERLAY_MODAL,[L.a3]:!m}),children:[(0,i.jsx)(T.q,{dragState:s===O.Ji.PICKER?I:null,isList:!1,overrideDragPreviewSize:R}),(0,i.jsx)(U,{thumbnailUrl:B,onPointerDown:t=>{A(t),(0,E.Cu)({moduleId:e.id,moduleFileKey:F(e),fileKey:h,name:"slide_template_tile",productType:"slides"})},"aria-label":t["aria-label"]},e.node_id)]})}function U({name:e,thumbnailUrl:t,thumbnailWidth:n,thumbnailHeight:r,onPointerDown:a,showLoadingSpinner:s=!1,disabled:l=!1,removeBorder:d=!1,...c}){return(0,i.jsxs)(o.E,{className:f()(b.s.flex.flexColumn.itemsStart.hFull.wFull.$,L.ln),onClick:l?void 0:a,actionOnPointerDown:!0,"aria-label":c["aria-label"],htmlAttributes:{"data-testid":"insertableSlideTile"},children:[(0,i.jsxs)("div",{...{0:{className:"x78zum5 x1n2onr6 xb3r6kr xl56j7k x6s0dn4"},1:{className:"x78zum5 x1n2onr6 xb3r6kr xl56j7k x6s0dn4 x9f619 xmkeg23 x1y0btm7 x7z60cl x1sxf85j"}}[!d<<0],style:{width:n??"100%",height:r??"100%"},children:[s&&(0,i.jsx)(y.kt,{className:L.S}),(0,i.jsx)(_.oW,{onDragStart:C.wo,className:L.uP,src:t,alt:e,loading:"lazy"})]}),e&&(0,i.jsx)("div",{className:b.s.font11.fontInter.colorTextSecondary.$,children:e})]})}function V({text:e,dataTestId:t,onPointerDown:n,imageContainerContent:r,additionalClassname:a,showSelectedState:s=!1}){let o=(0,D.r$)(),l=(0,p.md)(P.bY);return(0,i.jsx)("div",{"data-testid":t,className:f()(b.s.p8.$,a),children:(0,i.jsx)(I.sU,{image:(0,i.jsx)("div",{onPointerDown:n,children:(0,i.jsx)(I.WM,{className:f()({[L.zs]:o===O.Ji.PICKER||o===O.Ji.OUTLINE_TO_DECK,[L.$y]:o===O.Ji.OVERLAY_MODAL,[L.VY]:l.type===P.Vf.TEMPLATE_PICKER,[L.iH]:s}),removeBorder:!0,backgroundColor:"none",children:r})}),bottomRow:(0,i.jsx)(I.dY.MetadataContainer,{children:(0,i.jsx)(I.dY.TextMetadataLayout,{onClick:n,primaryText:(0,i.jsx)("div",{className:b.s.font11.colorText.ellipsis.overflowHidden.$,children:e})})}),bottomRowClassName:f()({[L.y5]:o===O.Ji.PICKER||o===O.Ji.OUTLINE_TO_DECK,[L.gx]:o===O.Ji.OVERLAY_MODAL})})})}function H({template:e}){return(0,p.md)(P.bY).type===P.Vf.TEMPLATE_PICKER?(0,i.jsx)(z,{template:e}):(0,i.jsx)(G,{template:e})}function z({template:e}){let{name:t,imageUrl:n,libraryKey:r}=(0,w.fG)()(e),[a,s]=(0,p.fp)(P.ux);if(!r)return null;let o=()=>s((0,u.l)(r));return(0,i.jsx)(V,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:o,imageContainerContent:(0,i.jsx)(U,{thumbnailUrl:n,onPointerDown:o,removeBorder:a===(0,u.l)(r)},t),additionalClassname:L.JB,showSelectedState:a===(0,u.l)(r)})}function G({template:e}){let{name:t,imageUrl:n,libraryKey:r}=(0,w.fG)()(e),a=(0,D.r$)(),o=(0,R.N)();if(!r)return null;let l=t=>{t.stopPropagation(),o(e)},d=a===O.Ji.OUTLINE_TO_DECK?"Select template":(0,m.tx)("slides.templates.view_template");return(0,i.jsx)(V,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:l,imageContainerContent:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Wh.Cover,{children:(0,i.jsx)("div",{className:L.n_})}),(0,i.jsx)(I.Wh.Center,{children:(0,i.jsx)(A.i,{insertTemplate:s.lQ,isInsertingTemplate:!1,shouldUseOpaqueBackground:!0,children:d})}),(0,i.jsx)(U,{thumbnailUrl:n,onPointerDown:l},t)]})})}},519866:(e,t,n)=>{n.d(t,{v:()=>v});var i=n(239976),r=n(105652),a=n(940901),s=n(255398),o=n(429315),l=n(732108),d=n(379141),c=n(943360),u=n(224542),m=n.n(u),p=n(338630),h=n(526575);function f({buttons:e,editorType:t,wrapperStyle:n}){return(0,i.jsx)("div",{className:m()("template_picker_start_from_row--startFromRowWrapper--v0HhS",n),children:e.map(e=>(0,i.jsx)(p.fu,{name:`${t}_template_start_from_button.${e.id}`,children:(0,i.jsx)(g,{onClick:e.onClick,title:e.title,subtitle:e.subtitle,icon:e.icon,buttonStyle:e.buttonStyle,iconStyle:e.iconStyle,dataTestId:e.dataTestId,editorType:t,id:e.id})},e.id))})}function g({onClick:e,title:t,subtitle:n,icon:r,buttonStyle:a,iconStyle:s,dataTestId:o,editorType:l,id:d}){let u=(e=>{if("dashedBorder"===e)return"template_picker_start_from_row--dashedBorder--Uo3Ce"})(a),p=(e=>{switch(e){case"startFromOutlineIcon":return"template_picker_start_from_row--startFromOutlineIcon--SCl1I";case"startFromScratchIcon":return"template_picker_start_from_row--startFromScratchIcon--xSQWt";case"makeATemplate":return"template_picker_start_from_row--makeATemplate--2n7q6";default:return}})(s);return(0,i.jsxs)(c.E,{className:m()("template_picker_start_from_row--startFromRowButton--NxCjy",u),onClick:()=>{(0,h.Cu)({name:`${l}.templates.${d}`,triggeredFrom:`${l}_template_modal`}),e()},"data-testid":o,children:[(0,i.jsx)("span",{className:p,children:r}),(0,i.jsxs)("div",{className:"template_picker_start_from_row--textContainer--VimhP",children:[(0,i.jsx)("p",{className:"template_picker_start_from_row--titleText--xEcLG",children:t}),(0,i.jsx)("p",{className:"template_picker_start_from_row--subtitleText--0bn1r",children:n})]})]})}var x=n(677451),_=n(905843),y=n(368227),b=n(700954);function v({onStartFromFigJamSelected:e,onStartFromTextOutlineSelected:t,usePadding:n=!0}){let{isCreateSlidesOutlineEnabled:c}=(0,b.mp)(),u=(0,_.J)(),{canDismiss:m,maybeUseLightTemplateOnDismiss:p}=(0,y.vN)(),{setUserDraftTemplateKeyForCurrentFile:h}=(0,y.Iv)(),g=(0,x.J3)(),v=(0,x.JU)(g),C=(0,r.useMemo)(()=>{let n=[];return(m&&n.push({id:"start_from_scratch",onClick:p,icon:(0,i.jsx)(s.$,{}),title:(0,d.t)("slides.templates.start_from.scratch.title"),subtitle:(0,d.t)("slides.templates.start_from.scratch.subtitle"),buttonStyle:"dashedBorder",iconStyle:"startFromScratchIcon",dataTestId:"start-from-scratch"}),u?n.push({id:"outline_to_deck",onClick:t,icon:(0,i.jsx)(o.R,{}),title:(0,d.t)("slides.templates.start_from.outline.title"),subtitle:(0,d.t)("slides.templates.start_from.outline_to_deck.subtitle"),iconStyle:"startFromOutlineIcon",dataTestId:"outline-to-deck"}):c&&n.push({id:"start_from_outline",onClick:e,icon:(0,i.jsx)(o.R,{}),title:(0,d.t)("slides.templates.start_from.outline.title"),subtitle:(0,d.t)("slides.templates.start_from.outline.subtitle"),iconStyle:"startFromOutlineIcon",dataTestId:"start-from-outline"}),v&&n.push({id:"make_a_template",onClick:()=>{p(),h()},icon:(0,i.jsx)(l.X,{}),title:(0,d.t)("slides.templates.make_a_template.title"),subtitle:(0,d.t)("slides.templates.make_a_template.subtitle"),iconStyle:"makeATemplate",dataTestId:"make-a-template"}),1===n.length&&n[0]?.id==="start_from_scratch")?[]:n},[m,u,c,p,e,t,v,h]);return(0,i.jsx)(f,{buttons:C,editorType:a.EditorType.SLIDES,wrapperStyle:n?"start_from_row--wrapper--PZTps":void 0})}},273807:(e,t,n)=>{n.d(t,{Z:()=>p,z:()=>i});var i,r=n(239976),a=n(378721),s=n(64939),o=n(379141),l=n(224542),d=n.n(l),c=n(154963),u=n(136503),m=n(680519);function p({title:e,onClick:t,children:n,isLoading:l,publisherName:p,showSeparator:h=!0}){return(0,r.jsxs)("div",{className:d()(c.s.borderBox.flex.flexRow.itemsCenter.p8.minH48.$,{[m.me]:h}),children:[(0,r.jsx)(a.K,{"aria-label":(0,o.t)("slides.templates.back"),onClick:t,children:(0,r.jsx)(s.C,{"data-not-draggable":!0,"data-does-not-dismiss-modal":!0})}),(0,r.jsxs)("div",{className:m.Tn,children:[l?(0,r.jsx)(u.v8,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.TemplateTitle,{title:e}),p&&(0,r.jsx)(i.MetadataPublisher,{publisherName:p})]}),n]})]})}(e=>{e.TemplateTitle=function({title:e}){return(0,r.jsxs)("div",{className:m.GM,children:[(0,o.tx)("slides.templates.templates_modal.templates_title"),(0,r.jsx)("span",{className:m.HE,children:" / "}),e]})},e.MetadataPublisher=function({publisherName:e}){return(0,r.jsx)("div",{className:m.m_,children:(0,o.tx)("slides.templates.templates_modal.published_by",{publisherName:e})})}})(i||(i={}))},183276:(e,t,n)=>{n.d(t,{E:()=>C});var i=n(105652),r=n(20002),a=n(692376),s=n(798913),o=n(2227),l=n(379141),d=n(270450),c=n(875253),u=n(987732),m=n(17453),p=n(422572),h=n(772293),f=n(223487),g=n(157750),x=n(311667),_=n(727074),y=n(18775),b=n(368227),v=n(623854);function C({libraryKey:e,modules:t}){let n=(0,f.q5)(),C=(0,b.r$)(),E=(0,b.m4)(),w=(0,r.wA)(),k=(0,v.e)(),T=(0,g.ut)(a.Ez5?.canvasGrid().canvasGridArray,[]),j=(0,x.D)(e);return(0,i.useCallback)(()=>{let e=t[0];if(!t.length||!e)return;let i=function({focusedNodeId:e,canvasGrid:t}){let n={row:0,col:0},i=t.flat().length>0,r=a.Ez5?.getInsertGridCoord({x:-1/0,y:-1/0})??n;if(e&&e!==o.AD){let t=a.Ez5?.canvasGrid().coordForChild(e)??n;r={row:t.row,col:t.col+1}}else r=i?{row:(a.Ez5?.canvasGrid().getLastChildCoord()??n).row+1,col:0}:n;return r}({focusedNodeId:k,canvasGrid:T});E(),w((0,p.yy)({modules:t,canvasPosition:new c.Mi,percentageOffset:new c.Mi,insertAsChildOfCanvas:!0,afterSlideModulesInsertion:(e,t)=>{s.l7.user("add-all-slides",()=>{e.forEach((e,n)=>{(0,y.h0)({module:e,insertedItems:t[n]??[],viewType:C,getGridCoord:()=>({row:i.row,col:i.col+n}),subscribeToLibrary:j})});let n=t[0]?.[0];n&&(0,_.fL)(n),h.Y5.commit()})}})),s.l7.user("add-all-slides",()=>{a.Ez5?.slideThemeLibBindings().setDocumentTemplateLibraryKey(e.library_key)}),function({dispatch:e,openFile:t,firstModule:n,hasSlides:i}){(0,d.kc)().piper_auto_rename&&t?.key&&n?.file_name&&!i&&t.name===(0,l.t)("fullscreen.fullscreen_view_selector.untitled")&&e(m.Nw({file:{key:t.key},name:n.file_name}))}({openFile:n,firstModule:e,hasSlides:!!T.flat().length,dispatch:w}),function({dispatch:e,firstModule:t}){t?.isHubFile&&t?.hub_file_id&&e((0,u.k8)({hubFileId:t.hub_file_id})),(0,y.qm)(e,t)}({dispatch:w,firstModule:e})},[k,T,E,w,t,C,j,n])}},76608:(e,t,n)=>{n.d(t,{N:()=>m});var i=n(105652),r=n(22291),a=n(445019),s=n(526575),o=n(874554),l=n(351195),d=n(433708),c=n(18775),u=n(368227);let m=()=>{let e=(0,o.fG)(),t=(0,u.r$)(),[n,m]=(0,a.fp)(d.bY),p=(0,l.JY)(),h=(0,a.Xr)(d.DM);return(0,i.useCallback)(i=>{let{libraryKey:a}=e(i);a&&((0,s.Cu)({fileKey:a,name:"template_cover_tile",productType:"slides"}),t===c.Ji.OUTLINE_TO_DECK?(p.setTemplateLibraryKey((0,r.l)(a)),h(!1)):m({type:d.Vf.TEMPLATE,libraryKey:a,parentView:n}))},[e,t,n,p,m,h])}},134146:(e,t,n)=>{n.d(t,{v:()=>o});var i=n(105652),r=n(391596),a=n(938241),s=n(797600);function o(){let[{data:e,status:t}]=(0,r.IT)((0,s._)());return{shelves:(0,i.useMemo)(()=>e&&"loaded"===t?e.map(e=>{let t=e.shelf_content.map(t=>({type:a.n.HubFile,template:t,category:e.id}));return{shelfId:e.id,shelf:e,templates:t}}):[],[e,t]),status:t}}},622309:(e,t,n)=>{n.d(t,{DY:()=>K,Fr:()=>ee,Q7:()=>eu,yq:()=>J});var i=n(239976),r=n(105652),a=n(20002),s=n(942356),o=n(888830),l=n(702990),d=n(915653),c=n(927774),u=n(692376),m=n(379141),p=n(445019),h=n(323264),f=n(391596),g=n(980438),x=n(46865),_=n(677451),y=n(641172),b=n(874554),v=n(223487),C=n(920675),E=n(908756),w=n(262891),k=n(938241),T=n(835585),j=n(198289),S=n(581121),I=n(892691),A=n(761826),N=n(136503),M=n(267688),R=n(533774),P=n(805878),O=n(433708),D=n(797600),L=n(368227),F=n(634413),B=n(682336),U=n(225022),V=n(746802),H=n(179172),z=n(987447);let G={filePickerGridContainer:{kmVPX3:"xf7z5ut",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,$$css:!0}};function K(){return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x5yr21d",children:[(0,i.jsx)(W,{}),(0,i.jsx)(q,{})]})}function W(){return(0,i.jsx)("div",{className:"xi4r6k5 xpezlj7",children:(0,i.jsx)(M._8,{icon:(0,i.jsx)(g.w4,{size:16,type:g.y1.WHITEBOARD}),title:(0,m.t)("slides.templates.file_picker.title"),subtitle:(0,m.t)("slides.templates.file_picker.subtitle")})})}function q(){let{debouncedSearchQuery:e,status:t,files:n}=(0,L._8)(C._Y.WHITEBOARD);return!function({figFileSearchStatus:e}){let t=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===u.kul.JOINED),n=null===(0,v.tS)();return e===L.J_.LOADING||!t||!!n}({figFileSearchStatus:t})?t!==L.J_.SUCCESS?(0,i.jsx)(Y,{query:e,figFileSearchStatus:t}):(0,i.jsx)(l.P,{fill:!0,theme:{content:h.Ay.classNames(G.filePickerGridContainer)},children:(0,i.jsx)("div",{className:"xc8icb0 xrvj5dj x15vz560 x12lumcd",children:n.map(e=>(0,i.jsx)(F.xL,{file:e},e.key))})}):(0,i.jsx)(X,{})}function X(){return(0,i.jsxs)("div",{className:"xc8icb0 xrvj5dj x15vz560 x12lumcd xf7z5ut x1i71x30",children:[Array.from({length:6}).map((e,t)=>(0,i.jsx)(N.YQ,{},t)),(0,i.jsx)(N.YQ,{})]})}function Y({query:e,figFileSearchStatus:t}){let n=null;switch(t){case L.J_.NO_QUERY_RESULTS:n=(0,m.tx)("slides.templates.file_picker.no_files_match",{searchQuery:(0,i.jsx)("p",{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly x1akne3o",children:e})});break;case L.J_.NO_RECENT_FILES:n=(0,m.tx)("slides.templates.file_picker.no_recent_files")}return(0,i.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x78zum5 x6s0dn4 xl56j7k xh8yej3 x1m3v4wt x1sdyfia",children:n})}function J({parentViewType:e}){return e===O.Vf.TEMPLATE?(0,i.jsx)(Z,{}):(0,i.jsx)(Q,{})}function Z(){let e=(0,p.md)(O.V6),{startAction:t,figjamFileKey:n}=(0,A.D)();return(0,i.jsx)($,{children:(0,i.jsx)(s.$n,{iconPrefix:(0,i.jsx)(d.m,{}),variant:"primary",onClick:t,disabled:!n||e.type===O.i6.NONE,children:(0,m.t)("slides.templates.file_picker.submit_button.generate")})})}function Q(){let e=(0,p.md)(O.V6),t=(0,p.Xr)(O.bY),n=(0,p.md)(O.oQ),a=r.useCallback(()=>{t({type:O.Vf.TEMPLATE_PICKER})},[t]);return(0,i.jsx)($,{children:(0,i.jsx)(s.$n,{variant:"primary",onClick:a,disabled:!n||e.type===O.i6.NONE,children:(0,m.tx)("slides.templates.file_picker.submit_button.pick_template")})})}function $({children:e}){return(0,i.jsxs)(em,{children:[(0,i.jsx)(R.B,{}),e]})}function ee(){let{trimmedSearchQuery:e}=(0,L.$N)(),[t,n]=(0,p.fp)(O.ux),a=r.useCallback(e=>{n(t=>!e||t&&t===e?null:e)},[n]);return e?(0,i.jsx)(et,{selectedTemplateLibraryKey:t,toggleSelectedTemplateKey:a}):(0,i.jsx)(en,{selectedTemplateLibraryKey:t,toggleSelectedTemplateKey:a})}function et({selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t}){let n=(0,b.fG)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ei,{}),(0,i.jsx)(l.P,{fill:!0,theme:{content:h.Ay.classNames(z.D.content)},children:(0,i.jsx)(B.j,{renderTemplateTile:({item:t})=>(0,i.jsx)(ed,{template:t,selectedTemplateKey:e}),onTemplateSelected:e=>t(n(e).libraryKey)})})]})}function en({selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t}){let n=function(){let e=(0,y.eE)(T.$A.Slides),[{data:t}]=(0,f.IT)((0,D._)()),{type:n,name:i}=(0,_.Gi)()??{};return r.useMemo(()=>{let r={};if(e.length>0&&(r["recents-tab"]={type:1,label:(0,m.t)("slides.templates.recents")}),t)for(let e of t)r[`hub-${e.id}-tab`]={type:2,shelf:e,label:e.title};return n&&i&&(r[n]={type:3,label:(0,m.t)("slides.templates.template_picker.header_with_name",{orgOrTeamName:i})}),r},[e,t,n,i])}(),a=r.useMemo(()=>Object.fromEntries(Array.from(Object.keys(n)).map(e=>[e,!0])),[n]),[s,l,d]=o.t.useTabs(a),{scrollPosition:c,scrollRef:u,onScrollFpl:p}=(0,L.d$)(O.Vf.TEMPLATE_PICKER);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er,{tabPropsMap:s,tabManager:d,tabs:n}),(0,i.jsx)(ea,{selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t,tabPanelPropsMap:l,tabs:n,scrollPosition:c,scrollRef:u,onScrollFpl:p})]})}function ei({children:e}){return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"xi4r6k5 xpezlj7",children:(0,i.jsx)(M._8,{icon:(0,i.jsx)("span",{className:"x1v9usgg x6jxa94 x78zum5 x6s0dn4 xl56j7k x7vbk4z xu5wzci",children:(0,i.jsx)(c.Q,{})}),title:(0,m.t)("slides.templates.template_picker.title"),subtitle:(0,m.t)("slides.templates.template_picker.subtitle")})}),e]})}function er({tabPropsMap:e,tabManager:t,tabs:n}){return(0,i.jsx)(ei,{children:(0,i.jsx)("div",{className:"xbfr8j9 x1vamu9a",children:(0,i.jsx)(o.t.TabStrip,{manager:t,children:Array.from(Object.entries(e)).map(([e,t])=>n[e]?(0,r.createElement)(o.t.Tab,{...t,key:e},n[e].label):null)})})})}function ea({selectedTemplateLibraryKey:e,toggleSelectedTemplateKey:t,tabPanelPropsMap:n,tabs:a,scrollPosition:s,scrollRef:l,onScrollFpl:d}){return(0,i.jsx)(i.Fragment,{children:Array.from(Object.entries(a).map(([a,c])=>{if(!n[a])return null;let u=null;switch(c.type){case 1:u=(0,i.jsx)(es,{selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:s,scrollRef:l,onScrollFpl:d});break;case 2:u=(0,i.jsx)(eo,{shelf:c.shelf,selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:s,scrollRef:l,onScrollFpl:d});break;case 3:u=(0,i.jsx)(el,{selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:s,scrollRef:l,onScrollFpl:d})}return(0,r.createElement)(o.t.TabPanel,{...n[a],key:a},u)}))})}function es({selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:n,scrollRef:r,onScrollFpl:a}){let s=(0,y.eE)(T.$A.Slides),{numColumns:o}=(0,z.d)(),d=(0,b.fG)(),c=(0,E.oh)(j.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:T.$A.Slides}));return(0,i.jsx)(l.P,{fill:!0,ref:r,defaultScrollTop:n,onScroll:a,theme:{content:h.Ay.classNames(z.D.content)},children:c?(0,i.jsx)(U.H,{}):(0,i.jsx)(P.x,{items:s,columns:o,renderItem:({item:t})=>(0,i.jsx)(ed,{template:t,selectedTemplateKey:e}),onActivateItem:e=>t(d(e).libraryKey)})})}function eo({shelf:e,selectedTemplateKey:t,onTemplateKeySelected:n,scrollPosition:a,scrollRef:s,onScrollFpl:o}){let{numColumns:d}=(0,z.d)(),c=(0,b.fG)(),u=r.useMemo(()=>e.shelf_content.map(t=>({type:k.n.HubFile,category:e.id,template:t})),[e]);return(0,i.jsx)(l.P,{fill:!0,ref:s,defaultScrollTop:a,onScroll:o,theme:{content:h.Ay.classNames(z.D.content)},children:(0,i.jsx)(P.x,{items:u,columns:d,renderItem:({item:e})=>(0,i.jsx)(ed,{template:e,selectedTemplateKey:t}),onActivateItem:e=>n(c(e).libraryKey)})})}function el({selectedTemplateKey:e,onTemplateKeySelected:t,scrollPosition:n,scrollRef:a,onScrollFpl:s}){let{numColumns:o}=(0,z.d)(),d=(0,b.fG)(),{templatesByTeam:c,isLoading:u,requestLoadMoreTemplates:m}=(0,w.c)({templateSize:10,teamSize:4}),p=r.useRef(null);return((0,x.X)({containerRef:a,targetRef:p,onIntersectionChange:({isIntersecting:e})=>{e&&m()}}),c)?(0,i.jsxs)(l.P,{fill:!0,ref:a,defaultScrollTop:n,onScroll:s,theme:{root:h.Ay.classNames(z.D.content)},children:[u&&0===c.length?(0,i.jsx)(U.H,{}):c.map(n=>(0,i.jsx)(V.W,{sectionHeaderTitle:n.teamName??"",children:(0,i.jsx)(P.x,{columns:o,items:n.templates,renderItem:({item:t})=>(0,i.jsx)(H.al,{template:t,borderStyle:e===d(t).libraryKey?"brand":void 0},t.template.id),onActivateItem:e=>t(d(e).libraryKey)})},n.teamId)),(0,i.jsx)("div",{ref:p})]}):null}function ed({template:e,selectedTemplateKey:t}){let n=(0,b.fG)();return(0,i.jsx)(H.al,{template:e,borderStyle:t===n(e).libraryKey?"brand":void 0},e.template.id)}var ec=(e=>(e[e.RECENTS=1]="RECENTS",e[e.HUB_FILE=2]="HUB_FILE",e[e.TEAM_TEMPLATES=3]="TEAM_TEMPLATES",e))(ec||{});function eu(){let e=(0,p.md)(O.ux),{startAction:t,figjamFileKey:n}=(0,A.D)(),r=(0,m.t)(e?"slides.templates.template_picker.submit.button.with_template":"slides.templates.template_picker.submit.button.without_template");return(0,i.jsx)(em,{children:(0,i.jsx)(s.$n,{iconPrefix:(0,i.jsx)(d.m,{}),variant:"primary",onClick:t,disabled:!n,children:r})})}function em({children:e}){return(0,i.jsxs)("div",{className:"xh8yej3 x78zum5 x6s0dn4 x1qughib",children:[(0,i.jsx)(I.yi,{helpUrlVariant:S.JT.BOARD_TO_DECK}),(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1nfngrj",children:e})]})}},676502:(e,t,n)=>{n.d(t,{M:()=>eu,j:()=>em});var i=n(239976),r=n(105652),a=n(517478),s=n(445019),o=n(323264),l=n(7857),d=n(433708),c=n(702990),u=n(391596),m=n(938241),p=n(805878),h=n(76608),f=n(797600),g=n(368227),x=n(225022),_=n(179172),y=n(987447);function b({shelfId:e}){let[{data:t,status:n}]=(0,u.IT)((0,f.Q)(e)),{numColumns:r}=(0,y.d)(),a=(0,h.N)(),{scrollPosition:s,scrollRef:l,onScrollFpl:b}=(0,g.d$)(d.Vf.HUB_FILE);return(0,i.jsx)(c.P,{fill:!0,theme:{content:o.Ay.classNames(y.D.content)},ref:l,defaultScrollTop:s,onScroll:b,children:"loading"!==n&&t?(0,i.jsx)(p.x,{columns:r,items:t.shelf_content.map(t=>({type:m.n.HubFile,category:e,template:t})),renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:a},e):(0,i.jsx)(x.H,{numItems:3*r,showTitlePlaceholder:!0})})}var v=n(46865),C=n(262891),E=n(746802);function w(){let{pickerViewType:e,numColumns:t,numTemplatesToPreview:n}=(0,y.d)(),{templatesByTeam:a,isLoading:l,requestLoadMoreTemplates:u}=(0,C.U)(e.type===d.Vf.TEAM?{queryType:"team",teamId:e.teamId}:{queryType:"org",numTemplatesPerTeam:n,filterByIds:null,includeMyTeamsOnly:!1}),m=(0,h.N)(),f=(0,r.useRef)(null),{scrollPosition:b,scrollRef:w,onScrollFpl:k}=(0,g.d$)(e.type);(0,v.X)({containerRef:w,targetRef:f,onIntersectionChange:({isIntersecting:e})=>{e&&u()}});let T=(0,s.Xr)(d.bY),j=r.useCallback((e,t)=>{T({type:d.Vf.TEAM,teamId:e,displayName:t})},[T]);return l?(0,i.jsx)(c.P,{theme:{content:o.Ay.classNames(y.D.content)},fill:!0,ref:w,defaultScrollTop:b,onScroll:k,children:(0,i.jsx)(x.H,{numItems:3*t,showTitlePlaceholder:e.type===d.Vf.ORG})}):a?(0,i.jsxs)(c.P,{fill:!0,ref:w,defaultScrollTop:b,onScroll:k,theme:{content:o.Ay.classNames(y.D.content)},children:[a.map(r=>{let a=e.type===d.Vf.ORG?r.teamName:void 0,s=r.totalTemplatesByTeam>n?()=>j(r.teamId,r.teamName??""):void 0;return(0,i.jsx)(E.W,{sectionHeaderTitle:a,sectionHeaderOnClick:s,children:(0,i.jsx)(p.x,{columns:t,items:r.templates,renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:m})},r.teamId)}),(0,i.jsx)("div",{ref:f})]},e.type):null}var k=n(20002),T=n(692376),j=n(854225),S=n(798913),I=n(379141),A=n(875253),N=n(152148),M=n(526575),R=n(223487),P=n(732400),O=n(562792),D=n(644857),L=n(311667),F=n(18775);function B({libraryKey:e}){let{numColumns:t,viewType:n}=(0,y.d)(),a=(0,g.NG)(e),{scrollPosition:s,scrollRef:l,onScrollFpl:u}=(0,g.d$)(d.Vf.TEMPLATE),m=r.useRef(new Map),h=r.useCallback(e=>t=>{void 0!==e&&(t?m.current.set(e,t):m.current.delete(e))},[]),f=r.useMemo(()=>a.data??[],[a.data]);return(0,i.jsx)(c.P,{fill:!0,ref:l,defaultScrollTop:s,onScroll:u,theme:{content:o.Ay.classNames(y.D.content)},children:"loading"===a.status?(0,i.jsx)(x.H,{numItems:3*t,showTitlePlaceholder:!1}):(0,i.jsx)(p.x,{columns:t,items:f,renderItem:({item:e})=>(0,i.jsx)(U,{ref:h(e.id),module:e,viewType:n}),onActivateItem:(e,t,n)=>{e.id&&m.current.get(e.id)?.onActivate(n)},actionOnPointerDown:!0,getItemLabel:(e,t)=>(0,I.t)("slides.templates.template_picker.slide_button.aria_label",{index:t+1,total:f.length})})})}let U=r.forwardRef(function({module:e,viewType:t},n){let{onModuleTileActivated:a,dragState:o}=function({module:e,viewType:t}){let n=(0,k.wA)(),i=(0,R.tS)(),a=(0,L.D)(e.library_key),o=function(){let e=(0,s.Xr)(d.VZ),t=(0,s.Xr)(d.Ei);return r.useCallback(()=>{e(!1),t(!1)},[e,t])}(),l=r.useCallback((i,r,s)=>{S.l7.user(V,()=>{(0,F.CH)({module:e,viewType:t,getGridCoord:T.Ez5?.getInsertGridCoord??(()=>({row:0,col:0})),dispatch:n,subscribeToLibrary:a})(i,r,s)})},[n,e,t,a]),{onInsertableResourcePointerDown:c,dragState:u}=(0,O.j)({resource:e,isList:!1,sourceForTracking:"slides-templates-panel",clickToInsert_DEPRECATED:!0,insertAsChildOfCanvas:!0,insertionCallback:l,afterSuccessfulInsert:o,selectAfterInsert:!1,allowKeyboardInsert:!0});return{onModuleTileActivated:r.useCallback(t=>S.l7.user(V,()=>{c(t),(0,M.Cu)({moduleId:e.id,moduleFileKey:(0,N.f)()(e),fileKey:i,name:"slide_template_tile",productType:"slides"})}),[c,e,i]),dragState:u}}({module:e,viewType:t}),l=t===F.Ji.PICKER,c=function(){let e=(0,s.md)(D.v2);return r.useMemo(()=>e?new A.Mi(j.CNR?.singleSlideThumbnailWidth()??0,j.CNR?.singleSlideThumbnailHeight()??0):void 0,[e])}();return r.useImperativeHandle(n,()=>({onActivate:a})),(0,i.jsxs)(i.Fragment,{children:[l?(0,i.jsx)(P.q,{dragState:o,isList:!1,overrideDragPreviewSize:c}):null,(0,i.jsx)(_._0,{module:e,showAddModuleOverlay:!o})]})}),V="insert-slide-module";var H=n(409084),z=n(677451),G=n(920675),K=n(351195),W=n(136503),q=n(519866),X=n(134146),Y=n(682336),J=n(942356),Z=n(641172),Q=n(908756),$=n(157750),ee=n(194467),et=n(835585),en=n(198289),ei=n(151015);function er({onClickTemplateCoverTile:e}){let{numColumns:t}=(0,y.d)(),n=(0,Z.eE)(et.$A.Slides),a=(0,ee.TI)(et.$A.Slides),s=(0,Q.oh)(en.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:et.$A.Slides})),o=n.slice(0,4),l=function(){let e=(0,k.wA)(),t=(0,R.q5)(),n=(0,z.J3)(),i=(0,z.JU)(n),a=n===z.kN.FILE_IN_DRAFTS,s=0===(0,$.ut)(T.Ez5?.canvasGrid()?.canvasGridArray,[]).length,o=r.useCallback(()=>{t&&(0,ei.ZW)({dispatch:e,file:{key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType,parent_org_id:t.parentOrgId},source:"template-picker",fileNeedsMovingBeforePublish:a})},[e,t,a]);if(i&&!s)return o}(),d=l?(0,i.jsx)(J.$n,{onClick:l,recordingKey:"template-picker-publish-template",variant:"secondary",children:(0,I.t)("slides.templates.button.publish_template")}):void 0;return 0===a?null:(0,i.jsx)(E.W,{sectionHeaderTitle:(0,I.t)("slides.templates.recents"),sectionHeaderActions:d,children:s?(0,i.jsx)(x.H,{}):(0,i.jsx)(p.x,{columns:t,items:o,renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:e})})}function ea(){let{scrollPosition:e,scrollRef:t,onScrollFpl:n,resetScrollTop:a}=(0,g.d$)(d.Vf.ALL);return(0,r.useEffect)(()=>()=>a([d.Vf.ALL]),[a]),(0,i.jsx)(c.P,{fill:!0,theme:{content:o.Ay.classNames(y.D.content)},ref:t,defaultScrollTop:e,onScroll:n,children:(0,i.jsx)(es,{})})}function es(){let{numColumns:e,numTemplatesToPreview:t,viewType:n}=(0,y.d)(),r=(0,h.N)(),a=(0,s.Xr)(d.bY),{start:o}=(0,K.JY)(),{trimmedSearchQuery:l}=(0,g.$N)();return"loading"===status?(0,i.jsx)(W.kM,{removePadding:!0}):l?(0,i.jsx)(Y.j,{renderTemplateTile:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onTemplateSelected:r}):(0,i.jsxs)(i.Fragment,{children:[n===F.Ji.OVERLAY_MODAL&&(0,i.jsx)("div",{className:"xp6roeo",children:(0,i.jsx)(q.v,{onStartFromFigJamSelected:function(){a({type:d.Vf.FILE_PICKER,parentType:d.Vf.ALL})},onStartFromTextOutlineSelected:function(){o()},usePadding:!1})}),(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf x1i71x30",children:[(0,i.jsx)(er,{onClickTemplateCoverTile:r}),(0,i.jsx)(eo,{numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:r}),(0,i.jsx)(el,{numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:r})]})]})}function eo({numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:n}){let a=(0,s.Xr)(d.bY),{templates:o,isLoading:l,templateBrowseEntity:c,...u}=(0,z.wv)(G._Y.SLIDES,t),m=(u&&"numTemplatesForTeam"in u?u.numTemplatesForTeam:o.length)>=t,h=(0,r.useCallback)(()=>{if(c)switch(c.type){case"team":a({type:d.Vf.TEAM,teamId:c.entity.id,displayName:c.entity.name});break;case"org":a({type:d.Vf.ORG})}},[c,a]);return!l&&o.length&&c?(0,i.jsx)(E.W,{sectionHeaderTitle:c.entity.name,sectionHeaderOnClick:m?h:void 0,children:l?(0,i.jsx)(x.H,{}):(0,i.jsx)(p.x,{columns:e,items:o,renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:n})}):null}function el({numColumns:e,numTemplatesToPreview:t,onClickTemplateCoverTile:n}){let{shelves:r,status:a}=(0,X.v)(),o=(0,s.Xr)(d.bY);return"loaded"!==a?null:(0,i.jsx)(i.Fragment,{children:r.map(({shelf:r,templates:s})=>(0,i.jsx)(E.W,{sectionHeaderTitle:(0,H.Yd)(r.i18n_meta.title,r.title),sectionHeaderOnClick:s.length>t?()=>{o({type:d.Vf.HUB_FILE,shelfId:r.id})}:void 0,children:"loaded"!==a?(0,i.jsx)(x.H,{}):(0,i.jsx)(p.x,{columns:e,items:s.slice(0,t),renderItem:({item:e})=>(0,i.jsx)(_.al,{template:e},e.template.id),onActivateItem:n})},`shelf-${r.id}`))})}var ed=n(622309);function ec(){let e=(0,s.md)(d.bY);switch(e.type){case d.Vf.ALL:return(0,i.jsx)(ea,{});case d.Vf.TEMPLATE:return(0,i.jsx)(B,{libraryKey:e.libraryKey});case d.Vf.TEAM:case d.Vf.ORG:return(0,i.jsx)(w,{});case d.Vf.HUB_FILE:return(0,i.jsx)(b,{shelfId:e.shelfId});case d.Vf.FILE_PICKER:return(0,i.jsx)(ed.DY,{});case d.Vf.TEMPLATE_PICKER:return(0,i.jsx)(ed.Fr,{});default:return null}}function eu(){let e=(0,r.useRef)(null);return(0,i.jsx)(l.u9,{label:"SlidesTemplateModalPickerBody",children:(0,i.jsx)(a.nB,{scrolling:"manual",padding:0,ref:e,children:(0,i.jsx)(ec,{})})})}function em(){return(0,i.jsx)(l.u9,{label:"SlidesTemplateSidebarPickerBody",children:(0,i.jsx)("div",{className:"x5yr21d",children:(0,i.jsx)(ec,{})})})}},682336:(e,t,n)=>{n.d(t,{j:()=>x});var i=n(239976),r=n(105652),a=n(702990),s=n(310955),o=n(379141),l=n(323264),d=n(46865),c=n(259714),u=n(929646),m=n(805878),p=n(368227),h=n(179172),f=n(987447),g=n(312620);function x({renderTemplateTile:e,onTemplateSelected:t}){let{trimmedSearchQuery:n,isSearchQueryLoading:a,searchQueryResult:s,requestLoadMore:o}=(0,p.$N)(),{numColumns:l}=(0,f.d)();return((0,r.useEffect)(()=>{n&&!a&&u.Lj.announceTemplatesSearchResults(s.length,n)},[a,s.length,n]),a&&0===s.length)?null:0===s.length?(0,i.jsx)(y,{searchQuery:n}):(0,i.jsx)(_,{templates:s,numColumns:l,requestLoadMore:o,onTemplateSelected:t,renderTemplateTile:e})}function _({templates:e,numColumns:t,requestLoadMore:n,onTemplateSelected:s}){let o=e[e.length-1]?.template?.id,l=r.useRef(null),c=r.useRef(null);return(0,d.X)({containerRef:c,targetRef:l,targetKey:o,onIntersectionChange:n}),(0,i.jsx)(a.P,{fill:!0,ref:c,children:(0,i.jsx)(m.x,{columns:t,items:e,renderItem:({item:e})=>(0,i.jsx)(h.al,{template:e}),onActivateItem:e=>s(e)})})}function y({searchQuery:e}){return(0,i.jsxs)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x78zum5 x1iyjqo2 xdt5ytf x6s0dn4 xl56j7k x2b8uid xge78cn",children:[(0,i.jsx)(b,{}),(0,i.jsx)("div",{children:(0,o.tx)("slides.templates.search.empty",{searchTerm:(0,i.jsx)("span",{...l.Ay.props(s.g.textBodyMediumStrong),children:e})})}),(0,i.jsx)("div",{children:(0,o.tx)("slides.templates.search.empty.tip")})]})}function b(){return(0,i.jsx)(c.B,{className:"x1m3v4wt",svg:g.A,useOriginalSrcFills_DEPRECATED:!0})}},853788:(e,t,n)=>{n.d(t,{u:()=>v});var i=n(239976),r=n(105652),a=n(517478),s=n(445019),o=n(183276),l=n(433708),d=n(18775),c=n(368227),u=n(622309),m=n(942356),p=n(271650),h=n(379141),f=n(224542),g=n.n(f),x=n(154963),_=n(700954),y=n(680519);function b({createOutline:e,addAllSlides:t,disabled:n}){let{isCreateSlidesOutlineEnabled:r}=(0,_.mp)();return(0,i.jsxs)("div",{className:g()(x.s.flex.itemsCenter.justifyEnd.gap8.wFull.$,y.qr),children:[r&&(0,i.jsx)(m.$n,{iconPrefix:(0,i.jsx)(p.C,{}),variant:"secondary",onClick:e,disabled:n,children:(0,h.tx)("slides.templates.outline_with_template.button")}),(0,i.jsx)(m.$n,{variant:"secondary",onClick:t,disabled:n,children:(0,h.tx)("slides.templates.add_all_slides")})]})}function v(){let e=(0,s.md)(l.bY),t=(0,c.r$)(),n=null;switch(e.type){case l.Vf.TEMPLATE:t===d.Ji.OVERLAY_MODAL&&(n=(0,i.jsx)(C,{libraryKey:e.libraryKey}));break;case l.Vf.FILE_PICKER:n=(0,i.jsx)(u.yq,{parentViewType:e.parentType});break;case l.Vf.TEMPLATE_PICKER:n=(0,i.jsx)(u.Q7,{})}return null===n?null:(0,i.jsx)(a.wi,{children:n})}function C({libraryKey:e}){let t=(0,s.Xr)(l.bY),n=(0,s.Xr)(l.ux),a=(0,c.NG)(e),d=r.useMemo(()=>a.data||[],[a.data]),u=(0,o.E)({libraryKey:e,modules:d}),m=r.useCallback(()=>{d.length>0&&d[0]&&(n(d[0].library_key),t({type:l.Vf.FILE_PICKER,parentType:l.Vf.TEMPLATE}))},[d,n,t]),p="loading"===a.status,h=d.length>0;return(0,i.jsx)(b,{createOutline:m,addAllSlides:u,disabled:p||!h})}},727147:(e,t,n)=>{n.d(t,{du:()=>S,SE:()=>j});var i=n(239976),r=n(105652),a=n(517478),s=n(942356),o=n(378721),l=n(205073),d=n(839733),c=n(379141),u=n(445019),m=n(323264),p=n(409084),h=n(842582);function f(e){let{title:t,headingId:n,headingLevel:r=2,onBack:a,backAriaLabel:s,actions:l,description:c,containerStyle:u,contentStyle:p,headerStyle:f,titleStyle:g,backButtonStyle:x,backButtonTrackingProperties:_,titleProps:y}=e,b=`h${r}`;return(0,i.jsxs)("div",{...m.Ay.props(u),children:[(0,i.jsxs)("div",{...m.Ay.props(p),children:[(0,i.jsxs)("div",{...m.Ay.props(f),children:[a&&(0,i.jsx)("div",{...m.Ay.props(x),children:_?(0,i.jsx)(h.Me,{"aria-label":s||"",onClick:a,trackingProperties:_,children:(0,i.jsx)(d.t,{})}):(0,i.jsx)(o.K,{type:"button","aria-label":s??"",onClick:a,children:(0,i.jsx)(d.t,{})})}),(0,i.jsx)(b,{id:n,...y,...m.Ay.props(g),children:t})]}),l]}),c]})}var g=n(677451),x=n(816505),_=n(920675),y=n(538349),b=n(273807),v=n(183276),C=n(433708),E=n(797600),w=n(18775),k=n(368227),T=n(987447);function j(){return(0,i.jsx)("div",{className:"xf7z5ut xso031l x1q0q8m5 xertd99",children:(0,i.jsx)(I,{showCloseButton:!1})})}function S(){return(0,i.jsx)(a.Y9,{children:(0,i.jsx)(I,{showCloseButton:!0})})}function I({showCloseButton:e}){let{pickerViewType:t}=(0,T.d)();switch(t.type){case C.Vf.ALL:return(0,i.jsx)(A,{showCloseButton:e});case C.Vf.ORG:return(0,i.jsx)(N,{});case C.Vf.TEAM:return(0,i.jsx)(M,{title:t.displayName});case C.Vf.TEMPLATE:return(0,i.jsx)(R,{libraryKey:t.libraryKey});case C.Vf.HUB_FILE:return(0,i.jsx)(P,{shelfId:t.shelfId});case C.Vf.FILE_PICKER:return(0,i.jsx)(O,{showCloseButton:e});case C.Vf.TEMPLATE_PICKER:return(0,i.jsx)(D,{showCloseButton:e});default:return null}}function A({showCloseButton:e}){let{searchQuery:t,setSearchQuery:n}=(0,k.$N)();return(0,i.jsx)(F,{searchQuery:t,setSearchQuery:n,showCloseButton:e,placeholder:(0,c.t)("slides.templates.search_templates")})}function N(){let e=(0,g.Gi)(),t=(0,u.Xr)(C.bY);return(0,i.jsx)(L,{title:e?.name??"",onBack:()=>t({type:C.Vf.ALL})})}function M({title:e}){let t=(0,x.dq)(),n=(0,u.Xr)(C.bY);return(0,i.jsx)(L,{title:e,onBack:()=>{t?n({type:C.Vf.ORG}):n({type:C.Vf.ALL})}})}function R({libraryKey:e}){let{viewType:t,pickerViewType:n}=(0,T.d)(),r=(0,u.Xr)(C.bY),a=(0,u.Xr)(C.ux),o=(0,u.Xr)(C.oQ),l=(0,k.NG)(e),d=(0,v.E)({libraryKey:e,modules:l.data??[]}),m=l.data??[];return(0,i.jsx)(L,{title:m[0]?.file_name??"",publisherName:m[0]?.publisher_name,onBack:()=>{r(n.type===C.Vf.TEMPLATE?n.parentView:{type:C.Vf.ALL}),a(null),o(null)},actions:t===w.Ji.PICKER?(0,i.jsx)(s.$n,{variant:"secondary",onClick:d,children:(0,c.tx)("slides.templates.add_all_slides")}):void 0})}function P({shelfId:e}){let t=(0,u.Xr)(C.bY),[{data:n,status:r}]=(0,y.IT)((0,E.Q)(e));return n&&"loaded"===r?(0,i.jsx)(L,{title:(0,p.Yd)(n.i18n_meta.title,n.title),onBack:()=>t({type:C.Vf.ALL})}):(0,i.jsx)(L,{title:"",onBack:()=>t({type:C.Vf.ALL})})}function O({showCloseButton:e}){let{pickerViewType:t}=(0,T.d)(),n=(0,u.Xr)(C.bY),{searchQuery:r,setSearchQuery:a}=(0,k._8)(_._Y.WHITEBOARD),s=(0,u.Xr)(C.oQ),[o,l]=(0,u.fp)(C.ux);return(0,i.jsx)(F,{searchQuery:r,setSearchQuery:a,placeholder:(0,c.t)("slides.templates.file_picker.search_files"),showCloseButton:e,onBack:()=>{t.type===C.Vf.FILE_PICKER&&(a(""),o&&t.parentType===C.Vf.TEMPLATE?n({type:C.Vf.TEMPLATE,libraryKey:o,parentView:{type:C.Vf.ALL}}):(n({type:C.Vf.ALL}),l(null),s(null)))}})}function D({showCloseButton:e}){let{trimmedSearchQuery:t,searchQuery:n,setSearchQuery:a}=(0,k.$N)(),s=(0,u.Xr)(C.bY),{pickerViewType:o}=(0,T.d)(),l=!!(o.type===C.Vf.TEMPLATE_PICKER&&o.figjamEntryPointData),d=r.useCallback(()=>{t&&a(""),s({type:C.Vf.FILE_PICKER,parentType:C.Vf.TEMPLATE_PICKER})},[s,t,a]);return r.useEffect(()=>{a("")},[a]),(0,i.jsx)(F,{searchQuery:n,setSearchQuery:a,placeholder:(0,c.t)("slides.templates.search_templates"),showCloseButton:e,onBack:l?void 0:d})}function L({title:e,publisherName:t,onBack:n,actions:r}){return(0,i.jsx)(f,{actions:r,backAriaLabel:(0,c.t)("slides.templates.back"),backButtonStyle:B.backButton,containerStyle:B.container,contentStyle:B.content,headerStyle:B.header,headingId:"slides-template-header-v2",onBack:n,title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.z.TemplateTitle,{title:e}),!!t&&(0,i.jsx)(b.z.MetadataPublisher,{publisherName:t})]}),titleStyle:B.headerTitle})}function F({searchQuery:e,setSearchQuery:t,onBack:n,showCloseButton:r,placeholder:a}){return(0,i.jsxs)("div",{className:"xh8yej3 x9f619 x78zum5 x1q0g3np x6s0dn4 x1nfngrj xiifnmf xeuugli",children:[!!n&&(0,i.jsx)(o.K,{size:"md",variant:"ghost",onClick:n,"aria-label":(0,c.t)("slides.templates.back"),children:(0,i.jsx)(d.t,{})}),(0,i.jsx)("div",{...{0:{className:"x1iyjqo2"},1:{className:"x1iyjqo2 x1cmmqis"}}[!!r<<0],children:(0,i.jsx)(l.D,{id:"slides-template-search-bar",value:e,onChange:t,placeholder:a,size:"lg"})})]})}let B={container:{kzqmXN:"xh8yej3",kB7OPa:"x9f619",$$css:!0},content:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kjj79g:"x1qughib",kOIVth:"x1nfngrj",khm7nJ:null,k1C7PZ:null,$$css:!0},header:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kOIVth:"x1nfngrj",khm7nJ:null,k1C7PZ:null,kzQI83:"xiifnmf",k7Eaqz:"xeuugli",$$css:!0},headerTitle:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kg5iWk:"xlyipyv",khDVqt:"xuxw1ft",$$css:!0},backButton:{k1xSpc:"x78zum5",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,$$css:!0}}},225022:(e,t,n)=>{n.d(t,{H:()=>l});var i=n(239976),r=n(105652),a=n(805878),s=n(179172),o=n(987447);function l({numItems:e,showTitlePlaceholder:t=!0}){let{numColumns:n}=(0,o.d)(),l=r.useMemo(()=>Array.from({length:e??n},(e,t)=>t+1),[e,n]);return(0,i.jsx)(a.x,{columns:n,items:l,renderItem:()=>(0,i.jsx)(s.YH,{showTitlePlaceholder:t}),getItemLabel:e=>`${e}`})}},746802:(e,t,n)=>{n.d(t,{W:()=>c});var i=n(239976),r=n(323264),a=n(943360),s=n(114734),o=n(524924),l=n(842582);function d(e){let{title:t,onClick:n,recordingKey:d,actions:c,leading:u,trackingProperties:m,ariaLabel:p,headingLevel:h=3,chevron:f="large",containerStyle:g,headerStyle:x,buttonStyle:_,titleStyle:y,iconStyle:b}=e,v=`h${h}`;if(!n)return(0,i.jsxs)("div",{...r.Ay.props(g),children:[(0,i.jsxs)("div",{...r.Ay.props(x),children:[u,(0,i.jsx)(v,{...r.Ay.props(y),children:t})]}),c]});let C="small"===f?s.R:o.a;return(0,i.jsxs)("div",{...r.Ay.props(g),children:[m?(0,i.jsxs)(l.e6,{onClick:n,recordingKey:d,...r.Ay.props(_),trackingProperties:m,"aria-label":p,children:[u,(0,i.jsx)(v,{...r.Ay.props(y),children:t}),(0,i.jsx)(C,{...r.Ay.props(b)})]}):(0,i.jsxs)(a.E,{type:"button",onClick:n,"aria-label":p,...r.Ay.props(_),children:[u,(0,i.jsx)(v,{...r.Ay.props(y),children:t}),(0,i.jsx)(C,{...r.Ay.props(b)})]}),c]})}function c(e){let{sectionHeaderTitle:t,sectionHeaderActions:n,sectionHeaderOnClick:r,children:a}=e;return(0,i.jsxs)("div",{className:"x78zum5 xdt5ytf",children:[t?(0,i.jsx)(d,{title:t,headingLevel:2,titleStyle:u.headerTitle,containerStyle:u.headerContainer,headerStyle:u.headerStyle,buttonStyle:u.buttonStyle,onClick:r,actions:n}):null,a]})}let u={headerContainer:{k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kjj79g:"x1qughib",koQZXg:"x1bvt8p6",keTefX:null,k71WvV:null,kGO01o:"xp6roeo",kpe85a:"xctkrei",kZCmMZ:null,kwRFfy:null,$$css:!0},headerTitle:{kMv6JI:"xxrns5j",kGuDYH:"x1q8tae1",k63SB2:"x1vg90ec",kLWn49:"x1eab18d",kb6lSQ:"x1yyillh",kE3dHu:"x8rdmch",kZCmMZ:null,kwRFfy:null,kMwMTN:"x1akne3o",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kg5iWk:"xlyipyv",khDVqt:"xuxw1ft",$$css:!0},buttonStyle:{k1xSpc:"x78zum5",kZKoxP:"x10w6t97",kB7OPa:"x9f619",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kWkggS:"xv2f06h xcwp83q",kzqmXN:"xeq5yr9",ks0D6T:"x193iq5w",$$css:!0},headerStyle:{k1xSpc:"x78zum5",kZKoxP:"x10w6t97",kB7OPa:"x9f619",kGNEyG:"x6s0dn4",kzqmXN:"xh8yej3",$$css:!0}}},179172:(e,t,n)=>{n.d(t,{YH:()=>_,_0:()=>h,al:()=>p});var i=n(239976),r=n(105652),a=n(255398),s=n(379141),o=n(323264),l=n(312884),d=n(75962),c=n(257556),u=n(874554),m=n(605985);function p(e){let{template:t,...n}=e,{imageUrl:r,name:a}=(0,u.fG)()(t);return(0,i.jsx)(f,{imgUrl:r??void 0,name:a,overlay:(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xu5wzci x1tk3asg x19y5rnk xf67zum",children:(0,s.t)("slides.templates.view_template")}),fallback:(0,i.jsx)("div",{className:"xh8yej3 x5yr21d x78zum5 x6s0dn4 xl56j7k x1v8gsql"}),...n})}function h(e){let{module:t,showAddModuleOverlay:n,...r}=e;return(0,i.jsx)(f,{imgUrl:t.thumbnail_url,overlay:n?(0,i.jsx)(a.$,{className:"xwa2v1s"}):void 0,appendCurrentUserId:!0,...r})}function f({imgUrl:e,name:t,borderStyle:n="default",overlay:a,fallback:s,appendCurrentUserId:u=!1}){let p=(0,m.TA)(),[h,f]=r.useState(!1),_=r.useMemo(()=>{if(e)return p&&u?(0,l.NQ)(e,"fuid",p):e},[e,p,u]);r.useEffect(()=>{f(!1)},[_]);let y=r.useCallback(()=>{f(!0)},[]),b=(!_||h)&&s;return(0,i.jsxs)("div",{className:"xh8yej3 x78zum5 xdt5ytf x1cy8zhl x1nfngrj",children:[(0,i.jsxs)("div",{...o.Ay.props(g.imageContainer,x[n]),children:[b?s:(0,i.jsx)(d.oW,{className:"xh8yej3 x5yr21d",onDragStart:c.wo,onError:y,src:_,alt:t,loading:"lazy"}),a&&(0,i.jsx)("div",{className:"template_cover_tile--imageOverlay--8hMRv",children:a})]}),t?(0,i.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o xb3r6kr xlyipyv xuxw1ft xh8yej3",children:t}):null]})}let g={imageContainer:{kB7OPa:"x9f619",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kMeerF:"x1qgsegg",k3XXqK:"xaatb59",kjBf7l:"xru40mv",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kVAEAm:"x1n2onr6",kzqmXN:"xh8yej3",kOBAk4:"x186iv6y",$$css:!0}},x={default:{kjBf7l:"xru40mv",$$css:!0},brand:{kMeerF:"x1de99jn",kjBf7l:"x166z8dh",$$css:!0}};function _({showTitlePlaceholder:e=!0}){return(0,i.jsxs)("div",{className:"xh8yej3 x78zum5 xdt5ytf x1cy8zhl x1nfngrj",children:[(0,i.jsx)("div",{className:"x19y5rnk x1v8gsql xh8yej3 x186iv6y"}),e&&(0,i.jsx)("div",{className:"xlup9mm x3hqpx7 x1v8gsql"})]})}},987447:(e,t,n)=>{n.d(t,{D:()=>d,d:()=>l});var i=n(105652),r=n(445019);n(323264);var a=n(433708),s=n(18775),o=n(368227);function l(){let e=(0,o.r$)(),t=(0,r.md)(a.bY),n=(0,o.r$)()===s.Ji.OVERLAY_MODAL?4:2,l=(0,o.fK)();return(0,i.useMemo)(()=>({viewType:e,numColumns:n,pickerViewType:t,numTemplatesToPreview:l}),[e,n,t,l])}let d={content:{kmVPX3:"x1nn34kk",kg3NbH:null,kuDDbn:null,kE3dHu:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kB7OPa:"x9f619",$$css:!0}}},425775:(e,t,n)=>{n.d(t,{g:()=>ee,h:()=>Q});var i=n(239976),r=n(105652),a=n(20002),s=n(692376),o=n(445019),l=n(224542),d=n.n(l),c=n(7857),u=n(19047),m=n(416923),p=n(324880),h=n(338630),f=n(111273),g=n(19637),x=n(634224),_=n(837033),y=n(384203),b=n(223487),v=n(816505),C=n(157750),E=n(591600),w=n(835585),k=n(198289),T=n(581121),j=n(818350),S=n(271625),I=n(351195),A=n(17248),N=n(212989),M=n(252891),R=n(55690),P=n(834163),O=n(831626),D=n(245814),L=n(655793),F=n(517478),B=n(40297),U=n(154963),V=n(717096),H=n(676502),z=n(853788),G=n(727147),K=n(368227),W=n(526865);function q({children:e}){let{canDismiss:t,maybeUseLightTemplateOnDismiss:n}=(0,K.vN)();return(0,i.jsx)(V.d_,{className:d()("slides_template_modal--templateModal--WR5Zt",p.Qx),size:(0,B.hG)(W.uRR),onHide:n,tintedModalBackground:!0,disableClickOutsideToHide:!t,enableEscapeToClose:t,"data-testid":"slides-template-modal",children:(0,i.jsx)("div",{className:U.s.overflowHidden.$,style:{height:"600px"},children:e})})}function X(){let{maybeUseLightTemplateOnDismiss:e}=(0,K.vN)(),t=D.wQ({defaultOpen:!0,onClose:e});return(0,i.jsx)(L.bL,{width:(0,B.hG)(W.uRR),height:"fixed",manager:t,"data-testid":"slides-template-modal",children:(0,i.jsxs)(F.vo,{style:{height:600},children:[(0,i.jsx)(G.du,{}),(0,i.jsx)(H.M,{}),(0,i.jsx)(z.u,{})]})})}var Y=n(433708),J=n(18775),Z=n(680519);function Q(){return(0,i.jsx)(c.u9,{label:"SlidesTemplatePicker",children:(0,i.jsx)($,{})})}function $(){let[e,t]=(0,o.fp)(Y.Ei),{top:n,left:s,height:l,width:c}=(0,J.do)(),f=(0,a.wA)(),g=(0,v.sZ)(),x=(0,b.q5)(),y=r.useRef(null),C=(0,J.sL)();(0,P.Y)(()=>{C||t(!1)},{closeOnEsc:!0,ignore:[y,(0,_.Tc)("slides-template-button"),(0,_.Tc)(N.G),(0,_.Tc)(R.l)]});let T=r.useRef(!1);return((0,r.useEffect)(()=>{if(!T.current&&(g?.id||x?.teamId)){T.current=!0;try{f(k.cd.fetchTemplatesMetadata({key:w.$A.Slides,orgId:g?.id,teamId:x?.teamId}))}catch(e){(0,u.x1)("SlidesTemplatePicker","Failed to fetch templates metadata",{error:e},{reportAsSentryError:!0})}}f(m.sz({shelfType:E.cS.SLIDES_TEMPLATE_MODAL}))},[g?.id,x?.teamId,f]),!e||C)?null:(0,i.jsx)(h.fu,{name:"Slides Template Picker",children:(0,i.jsx)("div",{className:d()(Z.ij,p.Dm),style:{top:n,left:s,width:c,height:l},ref:y,"data-testid":"slides-template-picker",children:(0,i.jsx)(K.Jn.Provider,{value:J.Ji.PICKER,children:(0,i.jsx)(O.q,{})})})})}function ee(){let e=(0,y.p8)("isReadOnly"),t=(0,A.jY)(),n=!!(0,K.S7)(),r=(0,C.ut)(s.Ez5?.canvasGrid().canvasGridArray,[]).flat().length>0,a=(0,o.md)(Y.q7),l=(0,A.EI)(),d=(0,o.md)(g.D),c=(0,o.md)((0,x.r1)(M.Kt)).data,u=(0,o.md)(Y.VZ),m=(0,o.md)(f.u2),{state:p}=(0,j.wj)(T.JT.BOARD_TO_DECK),_=(0,b.tS)(),v=(0,I.wd)(),E=(0,J.sL)();return a||m&&m.fileKey&&!a||e||!c||v||!l||t||n||r||d&&d!==S.DFF.id&&!u||p===j.qy.RUNNING?null:(0,i.jsx)(h.fu,{name:"Slides Template Overlay Modal",properties:{productType:"slides",fileKey:_},children:(0,i.jsx)(K.Jn.Provider,{value:J.Ji.OVERLAY_MODAL,children:E?(0,i.jsx)(X,{}):(0,i.jsx)(q,{children:(0,i.jsx)(O.q,{showCloseButton:!0})})})})}},634413:(e,t,n)=>{n.d(t,{gT:()=>j,xL:()=>A});var i=n(239976),r=n(20002),a=n(692376),s=n(379141),o=n(445019),l=n(224542),d=n.n(l),c=n(719749),u=n(7857),m=n(980438),p=n(933870),h=n(154963),f=n(223487),g=n(605985),x=n(920675),_=n(610604),y=n(936238),b=n(136503),v=n(249016),C=n(293345),E=n(267688),w=n(433708),k=n(368227),T=n(680519);function j(e){return(0,i.jsx)(u.u9,{label:"FilePickerView",children:(0,i.jsx)(S,{...e})})}function S({showCloseButton:e}){let[t,n]=(0,o.fp)(w.bY),{files:r,searchQuery:a,debouncedSearchQuery:l,setSearchQuery:c,status:u}=(0,k._8)(x._Y.WHITEBOARD),[p,f]=(0,o.fp)(w.ux),g=(0,o.Xr)(w.oQ),{showSeparator:_}=(0,k.gH)();return t.type!==w.Vf.FILE_PICKER?null:(0,i.jsxs)(v.Y,{dataTestId:"file-picker-view",children:[(0,i.jsx)(E.ui,{searchQuery:a,setSearchQuery:c,onBack:function(){t.type===w.Vf.FILE_PICKER&&(p&&t.parentType===w.Vf.TEMPLATE?n({type:w.Vf.TEMPLATE,libraryKey:p,parentView:{type:w.Vf.ALL}}):(n({type:w.Vf.ALL}),f(null),g(null)))},showCloseButton:!!e,placeholder:(0,s.t)("slides.templates.file_picker.search_files")}),(0,i.jsx)("div",{className:d()(h.s.pt16.pb24.px16.flex.flexColumn.gap2.$,{[T.me]:_}),children:(0,i.jsx)(E._8,{icon:(0,i.jsx)(m.w4,{size:16,type:m.y1.WHITEBOARD}),title:(0,s.t)("slides.templates.file_picker.title"),subtitle:(0,s.t)("slides.templates.file_picker.subtitle")})}),(0,i.jsx)(I,{status:u,debouncedSearchQuery:l,files:r}),t.parentType===w.Vf.TEMPLATE?(0,i.jsx)(C.X_,{}):(0,i.jsx)(C.jc,{})]})}function I({status:e,debouncedSearchQuery:t,files:n}){let{scrollPosition:s,scrollRef:o,onScroll:l}=(0,k.d$)(w.Vf.FILE_PICKER),{onShowSeparatorScroll:c}=(0,k.gH)(),u=(0,r.d4)(e=>e.mirror.appModel.multiplayerSessionState===a.kul.JOINED),m=null===(0,f.tS)();return e===k.J_.LOADING||!u||m?(0,i.jsx)(b.yx,{}):e!==k.J_.SUCCESS?(0,i.jsx)("div",{className:h.s.flex.itemsCenter.justifyCenter.hFull.wFull.colorText.textBodyLarge.pre.$,children:(0,i.jsx)(M,{debouncedSearchQuery:t,status:e})}):(0,i.jsx)(p.P,{className:d()(h.s.px8.hFull.$),onScroll:(e,t)=>{l(e,t),c(e,t)},scrollContainerRef:o,initialScrollTop:s,children:(0,i.jsx)("div",{className:d()(T.Vg,h.s.pb12.$),children:n.map(e=>(0,i.jsx)(A,{file:e},e.key))})})}function A(e){return(0,i.jsx)(u.u9,{label:"FileTile",children:(0,i.jsx)(N,{...e})})}function N({file:e}){let t=(0,g.iZ)(),[n,r]=(0,o.fp)(w.oQ),{disabled:a,tooltipText:l}=function(e){let t=(0,c.bc)(_.bgg,{fileKey:e});if("loaded"!==t.status)return{disabled:!0,tooltipText:void 0};if(t.data.file?.viewerExportRestricted&&t.data.file?.canEdit===!1)return{disabled:!0,tooltipText:(0,s.t)("slides.template.file_picker.viewer_export_restricted_disabled")};let n=t.data.file?.org,i=t.data.file?.sharedContainerSetting?.aiSetting==="enabled";if(null!=n&&(n?.k12GoogleOrg||!i))return{disabled:!0,tooltipText:(0,s.t)("slides.template.file_picker.ai_disabled.org")};let r=t.data.file?.team;return r?.aiFeaturesDisabledAt?{disabled:!0,tooltipText:(0,s.t)("slides.template.file_picker.ai_disabled.team")}:{disabled:!1,tooltipText:void 0}}(e.key);return(0,i.jsx)("div",{className:d()(h.s.pt8.px8.$,T.Fj),children:(0,i.jsx)(y.GQ,{activeFileUsers:[],currentUser:t,disableIconOverlays:!0,disabled:a,file:e,isSelected:!a&&n===e.key,onClick:t=>{t.stopPropagation(),a||r(e.key)},overrideOnClick:!0,subtitle:(0,i.jsx)(y.lJ,{file:e}),titleFontSize:11,tooltipText:l})})}function M({debouncedSearchQuery:e,status:t}){return t===k.J_.NO_QUERY_RESULTS?(0,s.tx)("slides.templates.file_picker.no_files_match",{searchQuery:(0,i.jsx)("p",{className:h.s.colorText.textBodyLargeStrong.$,children:e})}):t===k.J_.NO_RECENT_FILES?(0,i.jsx)("h1",{className:h.s.colorText.textBodyLarge.$,children:(0,s.tx)("slides.templates.file_picker.no_recent_files")}):null}},55690:(e,t,n)=>{n.d(t,{R:()=>h,l:()=>p});var i=n(239976),r=n(105652),a=n(942356),s=n(255398),o=n(379141),l=n(445019),d=n(730476),c=n(236410),u=n(252891),m=n(368227);let p="toolbar-add-slide-button",h=r.forwardRef(function(e,t){let n=(0,l.md)(d.o),{toggleTemplatePicker:r}=(0,m.uu)();return n?null:(0,i.jsx)(a.$n,{ref:t,onClick:r,iconPrefix:(0,i.jsx)(s.$,{}),variant:"secondary",recordingKey:"toolbar.addSlideButton",htmlAttributes:{"data-testid":"addSlideButton","data-element-target":p,"data-onboarding-key":u.MB,"data-tooltip":(0,o.t)("slides.carousel.add-slide-from-template"),"data-tooltip-type":c.Ib.TEXT,"data-fullscreen-intercept":!0},...e,children:(0,o.tx)("slides.carousel.new_slide")})})},833477:(e,t,n)=>{n.d(t,{qM:()=>L,RS:()=>R,cR:()=>O,FT:()=>M});var i=n(239976),r=n(105652),a=n(295870),s=n(378721),o=n(943360),l=n(942356),d=n(64939),c=n(730436),u=n(692376),m=n(379141),p=n(445019),h=n(224542),f=n.n(h),g=n(836182),x=n(723850),_=n(499735),y=n(346942),b=n(977082),v=n(154963),C=n(324880),E=n(526575),w=n(837033),k=n(772293),T=n(819475),j=n(236410),S=n(493130),I=n(834163);let A="slides_insert_embed_modal--sectionContainer--btiTk",N="slides_insert_embed_modal--recentPrototypeThumbnail--ZsOr3",M=(0,p.eU)(-1),R="slide-insert-embed-modal-button";async function P({fileKey:e,nodeId:t}){let n=await (0,S.R)({fileKey:e});return n&&u.DCy?.getPrototypeFileStructureData(e,n,t)||{}}function O(){let e=(0,x.U)(),[t,n]=(0,p.fp)(M),s=(0,r.useRef)(null),o=(0,r.useCallback)((e=!1)=>{e&&k.Y5.triggerAction("set-tool-default",null),n(-1)},[n]);(0,I.Y)(()=>o(!0),{closeOnEsc:!0,ignore:[s,(0,w.Tc)(R)]});let[l,d]=(0,r.useState)(0),c=(0,r.useCallback)(async t=>{let n=(0,T.pb)(t),i=(0,T.zU)(t);if(!n)return;let r=await P({fileKey:n,nodeId:i});e("embedded_prototype_file_structure_data",{fileKey:n,nodeId:i,...r},{addToRUM:!0,teamName:a.e.SLIDES})},[e]),u=(0,r.useCallback)(e=>{k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"EMBED",url:e}),o(),c(e)},[o,c]),h=(0,g.O8)(),f=0===l?(0,m.t)("slides.flapp.embed.widget_modal_title"):(0,m.t)("slides.flapp.embed.prototype_modal_title");return(0,i.jsx)(L,{closeWidow:o,ref:s,center:t,children:(0,i.jsx)(F,{title:f,showBackButton:0!==l,onBackClicked:()=>d(0),onCloseClicked:o,children:0===l?(0,i.jsx)(B,{closeModal:o,navigateToPrototypeStep:()=>d(1)}):(0,i.jsx)(V,{recentPrototypes:h,onAddPrototypeRequested:u})})})}var D=(e=>(e[e.LANDING=0]="LANDING",e[e.PROTOTYPE=1]="PROTOTYPE",e))(D||{});let L=(0,r.forwardRef)(function(e,t){let[n]=(0,p.fp)(b.f),a=n?.current?.getBoundingClientRect(),s=(a?.height??0)>0,o=(0,r.useMemo)(()=>s?{bottom:window.innerHeight-(a?.y??0)+8}:{bottom:72},[s,a?.y]);return(0,i.jsx)("div",{ref:t,style:{position:"fixed",width:"fit-content",margin:"auto",left:e.center,transform:"translateX(-50%)",...o},className:f()("slides_insert_embed_modal--dockedToolbeltWindow--kqvyF text--fontPos13--5OfL8 text--_fontBase--VaHfk",C.Dm),children:(0,i.jsx)("div",{style:{minWidth:e.minWidth??a?.width??396},children:e.children})})});function F({children:e,title:t,showBackButton:n,onBackClicked:r,onCloseClicked:a}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:f()("slides_insert_embed_modal--headerContainer--AKeDJ",n?v.s.pl8.$:v.s.pl16.$),children:[(0,i.jsxs)("div",{className:v.s.textBodyMediumStrong.flex.itemsCenter.$,children:[n?(0,i.jsx)(s.K,{onClick:r,"aria-label":(0,m.t)("general.back"),children:(0,i.jsx)(d.C,{})}):null,(0,i.jsx)("p",{children:t})]}),(0,i.jsx)(s.K,{"aria-label":(0,m.t)("common.close"),onClick:a,children:(0,i.jsx)(c.X,{})})]}),(0,i.jsx)(z,{}),(0,i.jsx)("div",{className:"slides_insert_embed_modal--contentContainer--hXh5e",children:e})]})}function B({closeModal:e,navigateToPrototypeStep:t}){let r=t=>{t(),e()},a="liveInteractionModal";return(0,i.jsxs)("div",{className:"slides_insert_embed_modal--widgetContainer--SZSvs",children:[(0,i.jsx)("div",{className:v.s.textBodyMedium.colorTextSecondary.pb16.$,children:(0,m.tx)("slides.flapp.embed.widget_modal_description")}),(0,i.jsxs)("div",{className:"slides_insert_embed_modal--widgetGrid--F-p-x",children:[(0,i.jsx)(U,{thumbnail:n(947615),title:(0,m.t)("slides.flapp.embed.widget_poll"),onSelected:()=>r(()=>k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"POLL"})),recordingKey:_.Pt(a,"poll")}),(0,i.jsx)(U,{thumbnail:n(795595),title:(0,m.t)("slides.flapp.embed.widget_stamps"),onSelected:()=>r(()=>k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"FACEPILE"})),recordingKey:_.Pt(a,"facepile")}),(0,i.jsx)(U,{thumbnail:n(317240),title:(0,m.t)("slides.flapp.embed.widget_alignment"),onSelected:()=>r(()=>k.Y5.triggerActionInUserEditScope("insert-interactive-element-into-active-slide",{type:"ALIGNMENT"})),recordingKey:_.Pt(a,"alignment")}),(0,i.jsx)(U,{thumbnail:n(377832),title:(0,m.t)("slides.flapp.embed.widget_prototype"),onSelected:t,recordingKey:_.Pt(a,"prototype")})]})]})}function U({thumbnail:e,title:t,onSelected:n,recordingKey:r}){return(0,i.jsxs)(o.E,{className:v.s.flex.flexColumn.gap8.$,onClick:n,recordingKey:r,children:[(0,i.jsx)("img",{className:"slides_insert_embed_modal--widgetThumbnail--i2Pul",src:e,alt:t,draggable:!1}),(0,i.jsx)("p",{className:v.s.wFull.textBodyMediumStrong.alignLeft.$,children:t})]})}function V({recentPrototypes:e,onAddPrototypeRequested:t}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G,{}),(0,i.jsx)(W,{prototypes:e,maxCount:3,onPrototypeClick:t}),(0,i.jsx)(K,{onAddPrototypeUrlClicked:t})]})}function H({prototypeUrl:e,onClick:t}){let n=(0,T.Ik)(e),r=n||!e?void 0:(0,m.t)("slides.flapp.embed.add_button_invalid_link_tooltip");return(0,i.jsx)("div",{"data-tooltip-type":j.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,children:(0,i.jsx)(l.$n,{variant:"primary",disabled:!n,onClick:()=>{e&&t(e.trim())},children:(0,m.tx)("slides.flapp.embed.add_button_label")})})}function z(){return(0,i.jsx)("div",{className:v.s.wFull.colorBgTertiary.h1.$})}function G(){return(0,i.jsx)("div",{className:f()(v.s.colorTextSecondary.textBodyMedium.$,A),children:(0,m.tx)("slides.flapp.embed.modal_description")})}function K({onAddPrototypeUrlClicked:e}){let[t,n]=(0,r.useState)(),a=(0,m.t)("slides.flapp.embed.add_prototype_link_hint",{prototype_link_prefix:(0,T.qS)()});return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:v.s.textBodyMediumStrong.$,children:(0,m.tx)("slides.flapp.embed.add_prototype_link_header")}),(0,i.jsxs)("div",{className:"slides_insert_embed_modal--prototypePasteContainer--mGpMp",children:[(0,i.jsx)(y.ks,{className:"slides_insert_embed_modal--prototypeLinkInput--aXWTm",type:"url",onChange:e=>{n(e.target.value)},value:t,placeholder:a}),(0,i.jsx)(H,{prototypeUrl:t,onClick:()=>{t&&((0,E.Cu)({name:"slides.flapps.embed.add_prototype_link_button_clicked",fileKey:(0,T.pb)(t),productType:"slides"}),e(t))}})]})]})}function W({prototypes:e,maxCount:t,onPrototypeClick:n}){let a=(0,r.useMemo)(()=>e.data?.slice(-t)?.reverse(),[e,t]);return!a||a.length<1?null:(0,i.jsx)("div",{className:A,children:(0,i.jsxs)("div",{className:v.s.textBodyMediumStrong.$,children:[(0,m.tx)("slides.flapp.embed.recent_prototypes_header"),a.map(e=>(0,i.jsx)(q,{thumbnailUrl:e.thumbnail_url,title:e.name,subtitle:e.fig_file.name,onClick:()=>{(0,E.Cu)({name:"slides.flapps.embed.recent_prototype_tile_clicked",fileKey:e.file_key,productType:"slides"}),n(e.url)}},`${e.name}_${e.file_key}`))]})})}function q({thumbnailUrl:e,title:t,subtitle:n,onClick:r}){return(0,i.jsxs)(o.E,{className:"slides_insert_embed_modal--recentPrototypeTileContainer--qGyca",onClick:r,children:[e?(0,i.jsx)("img",{className:N,alt:"Prototype thumbnail",src:e,loading:"lazy",draggable:!1}):(0,i.jsx)("div",{className:N}),(0,i.jsxs)("div",{className:v.s.alignLeft.$,children:[(0,i.jsx)("p",{className:v.s.textBodyMediumStrong.$,children:t}),(0,i.jsx)("p",{className:v.s.textBodySmall.colorTextSecondary.$,children:n})]})]})}},307998:(e,t,n)=>{n.d(t,{Ix:()=>h,bs:()=>m,zF:()=>p});var i=n(239976),r=n(105652),a=n(445019),s=n(529663),o=n(154963),l=n(837033),d=n(772293),c=n(834163),u=n(833477);let m=(0,a.eU)(-1),p="slide-insert-shape-modal-button";function h({activateTool:e,activeToolId:t,areAnyShapesActive:n,shapes:h}){let[f,g]=(0,a.fp)(m),x=(0,r.useCallback)((e=!1)=>{e&&d.Y5.triggerAction("set-tool-default",null),g(-1)},[g]),_=(0,r.useRef)(null);return(0,c.Y)(()=>x(!n),{closeOnEsc:!0,ignore:[_,(0,l.Tc)(p)]}),(0,i.jsx)(u.qM,{closeWidow:x,ref:_,minWidth:152,center:f,children:(0,i.jsx)("div",{className:o.s.flex.flexWrap.p8.itemsCenter.contentCenter.gap8.$,style:{width:152},children:h.map(n=>(0,i.jsx)(s.$V,{tooltipText:n.text,tooltipShortcut:n.shortcutText,isActive:t===n.toolId,onMouseDown:()=>e(n.toolId),recordingKey:`slides-shape-${n.toolId}`,children:n.icon},n.toolId))})})}},483088:(e,t,n)=>{n.d(t,{E:()=>x});var i=n(20002),r=n(692376),a=n(854225),s=n(445019),o=n(577225),l=n(929532),d=n(450207),c=n(27414),u=n(526575),m=n(862390),p=n(223487),h=n(656694),f=n(833477),g=n(307998);function x({logToggle:e}={}){let t=function(){let e=(0,i.wA)(),t=(0,s.Xr)(f.FT),n=(0,s.Xr)(g.bs);return()=>{e(d.oB()),e(c.XE()),e(c.Uv()),t(-1),n(-1)}}(),n=(0,h.Bk)(),_=(0,p.tS)(),{Sprig:y}=(0,o.A)();return i=>{(n||i!==r.nQ7.DESIGN)&&(t(),function(e){let t=s.zl.get(l.Kh);e===r.nQ7.DESIGN&&((0,m.NT)(r.FAf.DESIGN),t===a.NLJ.COMMENTS&&r.glU?.triggerAction("set-tool-default",null))}(i),i===r.nQ7.DESIGN?r.glU?.triggerAction("enter-slides-design-mode",null):r.glU?.triggerAction("enter-slides-mode",null),e&&i===r.nQ7.DESIGN?((0,u.Cu)({trackingContext:"slides_toggle_back_to_slides",productType:"slides",fileKey:_}),y("track","slides_toggle_back_to_slides")):e&&i===r.nQ7.SELF&&(0,u.Cu)({trackingContext:"slides_toggle_design",productType:"slides",fileKey:_}))}}},855638:(e,t,n)=>{function i(){return null}n.d(t,{V_:()=>l,Te:()=>s,Ab:()=>r,Ug:()=>o,oI:()=>a}),n(970508),n(214514),new(n(119301)).b({name:"string_management",dependencies:[],exports:{"./components":"./components.ts","./ast":"./ast.ts","./ast/schema":"./ast/schema.ts","./public_helpers":"./public_helpers.ts","./public_hooks":"./public_hooks.ts","./public_types":"./public_types.ts"},sideEffects:!1,friendFiles:[]});let r=i,a=i,s=i,o=i,l=i},566779:(e,t,n)=>{n.d(t,{J7:()=>f,bY:()=>g,hG:()=>m,hQ:()=>p});var i=n(239976),r=n(105652),a=n(836848),s=n(692376),o=n(445019),l=n(19047),d=n(428158),c=n(630260),u=n(276344),m=(e=>(e[e.NONE=0]="NONE",e[e.SUMMARIZE_STICKIES=1]="SUMMARIZE_STICKIES",e[e.SORT_STICKIES_BY_TOPIC=2]="SORT_STICKIES_BY_TOPIC",e[e.SORT_STICKIES_BY_COLOR=3]="SORT_STICKIES_BY_COLOR",e[e.SORT_STICKIES_BY_AUTHOR=4]="SORT_STICKIES_BY_AUTHOR",e[e.SORT_STICKIES_BY_STAMP_COUNT=5]="SORT_STICKIES_BY_STAMP_COUNT",e[e.SORT_STICKIES_BY_STAMP_TYPE=6]="SORT_STICKIES_BY_STAMP_TYPE",e[e.MIND_MAP_GENERATE_IDEAS=7]="MIND_MAP_GENERATE_IDEAS",e))(m||{});let p=(0,o.eU)(0),h=(0,o.eU)(null,(e,t,n)=>{t(p,n)});function f(e){o.zl.set(h,e)}function g(){let[e,t]=(0,o.fp)(p),n=(0,r.useRef)(null),m=function(){let{summarizeCanvasSelection:e}=(0,u.ss)(s.cfv.ABOVE,void 0,"QUICK_ACTION"),t=(0,d.PX)(),{expandSelectedMindmapNode:n}=(0,c.S)();return i=>{switch(i){case 0:(0,l.xi)("AI Actions",'Unexpected AI action "none" requested');break;case 1:e();break;case 2:case 3:case 4:case 5:case 6:{let e=function(e){switch(e){case 2:return d.Uj.CLUSTER;case 3:return d.Uj.CLUSTER_BY_COLOR;case 4:return d.Uj.CLUSTER_BY_AUTHOR;case 5:return d.Uj.CLUSTER_BY_STAMP_COUNT;case 6:return d.Uj.CLUSTER_BY_STAMP_TYPE;default:return}}(i);if(!e){(0,l.xi)("AI Actions","Unexpected AI action requested",{action:i});return}t({type:e,disabled:!1,displayText:""});break}case 7:n();break;default:(0,a.xb)(i)}}}();return(0,r.useEffect)(()=>{(async()=>{if(0!==e&&e!==n.current){n.current=e;try{m(e),await new Promise(e=>setTimeout(e,1e3))}finally{t(0),n.current=null}}})()},[e,t,m]),(0,i.jsx)(i.Fragment,{})}},203044:(e,t,n)=>{n.d(t,{Cw:()=>C,Su:()=>b,v:()=>y});var i=n(239976),r=n(105652),a=n(865702),s=n(379141),o=n(445019),l=n(338630),d=n(859100),c=n(1007),u=n(215496),m=n(795867),p=n(139850),h=n(395050),f=n(355441),g=n(951633),x=n(271625),_=n(428158);let y=(0,o.eU)(!1),b="organize";function v({onClose:e}){let t=(0,_.Cb)(),n=(0,c.LE)({subscribeToUpdates_expensive:t});return r.useEffect(()=>{t||e()},[t,e]),(0,i.jsx)("div",{style:{opacity:n?0:1,transition:"ease-in-out 0.1s all"},children:(0,i.jsx)(g.Dv,{targetType:"dom",targetKey:b,topPadding:-6,isBold:!0,fixedWidth:316,arrowPosition:f.F_.BOTTOM,onTargetLost:a.lQ,children:(0,i.jsx)(h.mI,{bodyText:(0,i.jsx)("span",{style:{maxWidth:184},children:(0,s.tx)("whiteboard.organize_menu.onboarding_text_base",{boldText:(0,i.jsx)("b",{children:(0,s.tx)("whiteboard.organize_menu.onboarding_text_bold_text")})})}),buttonText:(0,s.tx)("whiteboard.organize_menu.onboarding_dismiss_button_text"),onButtonClick:()=>{e()}})})})}function C(){let[e,t]=(0,o.fp)(y),{show:n,isShowing:a,complete:s}=(0,d.e)({overlay:x.YiU,priority:u.N.SECONDARY_MODAL});return r.useEffect(()=>{n({canShow:()=>e})},[e,n]),(0,i.jsx)(p.M,{isShowing:a,testId:"FigJamAISummarizationEntrpointPointerOverlay",children:(0,i.jsx)(l.fu,{name:m.e0.AI_INLINE_MENU_ORGANIZE_SUMMARY_TOOLTIP,children:(0,i.jsx)(v,{onClose:()=>{t(!1),s()}})})})}},447e3:(e,t,n)=>{n.d(t,{S:()=>C,o:()=>v});var i=n(239976),r=n(105652),a=n(159773);let s=(0,r.memo)(function(e){return(0,a.O)()?(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M12 4.5a7.5 7.5 0 0 0-7.484 7A.527.527 0 0 1 4 12a.48.48 0 0 1-.486-.5A8.5 8.5 0 0 1 19 7.177V5.5a.5.5 0 0 1 1 0v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1h1.845A7.5 7.5 0 0 0 12 4.5M7.5 16H5.655a7.5 7.5 0 0 0 13.829-3.5c.018-.275.24-.5.516-.5s.502.224.485.5A8.5 8.5 0 0 1 5 16.823V18.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1m2-7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0V10h1.5v4H11a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-.5v-4H14v.5a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})}):(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.5 4A7.5 7.5 0 0 0 4 11.5c0 .27-.213.5-.484.5h-.032A.477.477 0 0 1 3 11.53v-.03a8.5 8.5 0 0 1 16-4.004V5.5a.5.5 0 1 1 1 0v3a.5.5 0 0 1-.5.5h-3a.5.5 0 1 1 0-1h1.635A7.5 7.5 0 0 0 11.5 4m-4 12h-2a7.501 7.501 0 0 0 13.439-3.532.53.53 0 0 1 .515-.468.48.48 0 0 1 .484.53A8.501 8.501 0 0 1 5 16.978V18.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1m2-7a.5.5 0 0 0-.5.5v.8a.5.5 0 0 0 1 0V10h1v3h-.3a.5.5 0 1 0 0 1h1.6a.5.5 0 0 0 0-1H12v-3h1v.3a.5.5 0 1 0 1 0v-.8a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})})});var o=n(692376),l=n(854225),d=n(798913),c=n(379141),u=n(270450),m=n(445019),p=n(6236),h=n(421914),f=n(162251),g=n(242064),x=n(279758),_=n(659871),y=n(432318),b=n(300622);function v(e){let t=(0,x.uQ)()||"",n=(0,f.kl)("embedData"),i=decodeURIComponent(h.E7(n)?.originalText||""),a=(0,p.tq)(n),s=(0,m.Xr)(g.n);return r.useCallback(()=>{i&&(a(p.yc.CONVERT_TO_TEXT),s({type:"MINIMIZE"}),(0,d.l7)(e,"convert-embed-to-text",()=>o.glU?.replaceNodeWithText(t,i)))},[i,a,s,t,e])}function C(e){let t=(0,m.md)(g.n),n=(0,x.uQ)()||"",r=(0,f.kl)("embedData"),a=decodeURIComponent(h.E7(r)?.originalText||""),o=v(l.zkO.USER);return r&&n&&a&&(!t||e.inModal)?(0,u.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(_.V,{variant:"button",tooltip:(0,c.t)("whiteboard.embeds.inline_menu.change_back_to_text"),ariaLabel:(0,c.t)("whiteboard.embeds.inline_menu.change_back_to_text"),onClick:o,recordingKey:"embedConvertToTextControl",children:(0,i.jsx)(s,{})}):(0,i.jsx)(y.K0,{svg:b.A,active:"NONE",tooltip:(0,c.t)("whiteboard.embeds.inline_menu.change_back_to_text"),onClick:o,recordingKey:"embedConvertToTextControl"}):null}},560772:(e,t,n)=>{n.d(t,{e:()=>b,f:()=>y});var i=n(239976),r=n(105652),a=n(20002),s=n(365094),o=n(379141),l=n(270450),d=n(445019),c=n(199301),u=n(6236),m=n(421914),p=n(162251),h=n(242064),f=n(659871),g=n(432318),x=n(154549);let _=()=>{let e=(0,p.kl)("embedData");return decodeURIComponent(m.E7(e)?.url||m.E7(e)?.srcUrl||"")};function y(){let e=(0,a.wA)(),t=_(),n=(0,p.kl)("embedData"),i=(0,u.tq)(n);return r.useCallback(()=>{t&&(i(u.yc.OPEN_PREVIEW),e((0,c.RK)({rawInput:t})))},[t,e,i])}function b(e){let t=(0,d.md)(h.n),n=_(),r=y();return n&&(e.inModal||!t)?(0,l.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(f.V,{variant:"button",tooltip:(0,o.t)("whiteboard.embeds.inline_menu.open_link"),ariaLabel:(0,o.t)("whiteboard.embeds.inline_menu.open_link"),onClick:r,recordingKey:"embedOpenExternalControl",children:(0,i.jsx)(s.V,{})}):(0,i.jsx)(g.K0,{svg:x.A,active:"NONE",tooltip:(0,o.t)("whiteboard.embeds.inline_menu.open_link"),onClick:r,recordingKey:"embedOpenExternalControl"}):null}},595964:(e,t,n)=>{n.d(t,{nG:()=>z,tT:()=>q});var i=n(239976),r=n(105652),a=n(20002),s=n(865702),o=n(735786),l=n(423407),d=n(429921),c=n(533472);let u=(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M5.5 5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5M4 5.5A1.5 1.5 0 0 1 5.5 4h4A1.5 1.5 0 0 1 11 5.5v4A1.5 1.5 0 0 1 9.5 11h-4A1.5 1.5 0 0 1 4 9.5zm12.015 7.94L15.5 15.5l-2.06.515c-.505.126-.505.844 0 .97l2.06.515.515 2.06c.126.505.844.505.97 0l.515-2.06 2.06-.515c.505-.126.505-.844 0-.97L17.5 15.5l-.515-2.06c-.126-.505-.844-.505-.97 0M9.5 14h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5m-4-1A1.5 1.5 0 0 0 4 14.5v4A1.5 1.5 0 0 0 5.5 20h4a1.5 1.5 0 0 0 1.5-1.5v-4A1.5 1.5 0 0 0 9.5 13zm9-8h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5m-1.5.5A1.5 1.5 0 0 1 14.5 4h4A1.5 1.5 0 0 1 20 5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4A1.5 1.5 0 0 1 13 9.5z",clipRule:"evenodd"})})});var m=n(379141),p=n(270450),h=n(445019);n(323264);var f=n(74372),g=n(224542),x=n.n(g),_=n(141288),y=n(552315),b=n(969816),v=n(259714),C=n(154963),E=n(210823),w=n(136393),k=n(338630),T=n(634224),j=n(236410),S=n(248046),I=n(382682);function A(){return(0,i.jsx)(l.E,{variant:"defaultFilled",size:"md",children:(0,m.tx)("qa.ai")})}var N=n(883706),M=n(85531),R=n(203044),P=n(659871),O=n(428158),D=n(432318),L=n(149712),F=n(880462),B=n(734146),U=n(448633),V=n(362053);let H="figjam_organize_sort_stickies_sub_menu",z="https://help.figma.com/hc/articles/16822138920343-Use-AI-tools-in-Figma",G="used_figjam_ai_quick_actions",K=(0,T.r1)(G);function W(e){switch(e){case O.Uj.SUMMARIZE:return"summarize";case O.Uj.CLUSTER:return"sort stickies";case O.Uj.CREATE_FIGMA_SLIDES_OUTLINE:return"copy to slides";case O.Uj.SEND_TO_MAKE_FROM_FIGJAM:return"send to make";case O.Uj.CLUSTER_BY_AUTHOR:return"sort by author";case O.Uj.CLUSTER_BY_COLOR:return"sort by color";case O.Uj.CLUSTER_BY_STAMP_COUNT:return"sort by stamp count";case O.Uj.CLUSTER_BY_STAMP_TYPE:return"sort by stamp type";case O.Uj.OPEN_CLUSTER_BY_MORE_MENU:return"sort by more dropdown button";case O.Uj.TIDY_UP:return"tidy up";case O.Uj.WRAP_IN_SECTION:return"wrap in section";default:return"other organize action"}}function q(){let e=(0,O.Yh)(),t=e.filter(e=>!e?.disabled&&!e?.isInClusterSubmenu),n=e.filter(e=>e?.disabled&&!e?.isInClusterSubmenu),s=(0,f.g)(),u=(0,O.PX)(),[g,x]=(0,h.fp)(O.Y),_=(0,O.Wb)(),y=(0,O.Pn)();r.useEffect(()=>_,[_]),r.useEffect(()=>{g||y()},[g,y]);let b=(0,O.z1)(),v=function(){let e=(0,O.Yh)(),t=(0,O.QL)(),n=(0,O.E0)(),i=[...e];for(let e of(n&&(i=[...i,...t]),i))if(e&&O.IW[e.type])return!0;return!1}(),E=(0,m.t)("whiteboard.inline_menu.organize_dropdown_options_aria_label"),T=[...t,...n],{getTriggerProps:S,manager:I}=o.b({allowScrimPassthrough:!0}),N=(0,a.wA)(),R=r.useCallback(e=>{u(e)},[u]),D=(0,M.CI)(),B=(0,h.md)(K).data;return(0,p.kc)().figjam_a11y_inline_toolbar?(0,i.jsx)(k.fu,{name:"organize_menu_dropdown",children:(0,i.jsxs)(o.bL,{manager:I,children:[(0,i.jsx)(P.V,{variant:"menu",getTriggerProps:()=>S({onClick:()=>{v&&N(w.b({[G]:!0}))}}),tooltip:(0,m.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label"),ariaLabel:(0,m.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label"),dataTestId:"inline_menu_organize_dropdown_button",recordingKey:"inline_menu_organize_dropdown_button",trackingProperties:{text:"organize dropdown button"},isMenuOpen:I.isOpen,children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f",children:[(0,i.jsx)(c.t,{}),(0,m.tx)("whiteboard.inline_menu.organize_button_text"),!B&&D&&(0,i.jsx)(k.fu,{name:"organize_actions_onboarding_badge",children:(0,i.jsx)(l.E,{variant:"brandFilled",children:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2")})})]})}),(0,i.jsxs)(o.mc,{children:[(0,i.jsx)(o.YJ,{children:T.map(e=>{if(!e)return null;let{type:t,disabled:n,displayText:r,fplIcon:a,disabledTooltipText:s,tooltipOverrides:l}=e,c=l?.tooltip||(n&&s?s:void 0),u=l?.tooltipType||j.Ib.TEXT,m=(0,O.Ef)(e);return t===O.Uj.OPEN_CLUSTER_BY_MORE_MENU?(0,i.jsx)($,{disabled:n},t):(0,i.jsxs)(o.q7,{disabled:n,onClick:()=>R(e),recordingKey:Z(t),"data-testid":Z(t),"aria-label":r,htmlAttributes:{"data-tooltip":c,"data-tooltip-type":u,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,"data-tooltip-tip-align-left":!0},children:[a&&(0,i.jsx)(o.Q$,{children:(0,i.jsx)("div",{className:"x30jfuo",children:a})}),r,m&&(0,i.jsx)(o.Ov,{children:(0,i.jsx)(d.o,{eventListeners:["onClick","onPointerUp","onMouseUp"],children:(0,i.jsx)(A,{})})})]},t)})}),(0,i.jsx)(o.N_,{href:z,newTab:!0,trusted:!0,children:(0,i.jsx)(F._,{})})]})]})}):(0,i.jsx)(k.fu,{name:"organize_menu_dropdown",children:(0,i.jsx)(L.Fn,{OptionWrapper:function({children:e}){return(0,i.jsx)("div",{className:"organize_actions_control--flexColumn--bYAxY","aria-label":E,id:s,role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0,children:e})},additionalContentsBottom:(0,i.jsx)("div",{className:C.s.mt4.$}),additionalContentsTop:(0,i.jsx)("div",{className:C.s.mt4.$}),onChange:(e,t)=>{t.preventDefault(),t.stopPropagation(),u(e)},options:T,overrideMenuOpenState:{isOpenOverride:g,setIsOpenOverride:x},popoverClassName:"organize_actions_control--popover--ZJnPY",positionX:e=>e.x,renderButton:({onClick:e,onKeyDown:t,ref:n})=>(0,i.jsx)(X,{disabled:!1,onClick:e,onKeyDown:e=>b(e,t),buttonRef:n,ariaWrapperId:s,trackingProperties:{text:"organize dropdown button"},dropdownContainsAiOption:v}),renderOption:J,value:void 0})})}let X=(0,k.tf)(function({onClick:e,onKeyDown:t,buttonRef:n,ariaWrapperId:o,disabled:l,dropdownContainsAiOption:d}){let c=(0,a.wA)(),u=(0,h.md)(K).data,p=(0,M.CI)(),[f,g]=r.useState(0),_=(0,m.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label");return(0,i.jsx)(D.$n,{ref:n,ariaControls:o,ariaLabel:_,buttonChildrenStyle:{justifyContent:"initial",width:"initial"},buttonStyle:{width:"auto",paddingRight:24},caret:"down",disabled:l,onClick:l?s.lQ:()=>{e(),d&&c(w.b({[G]:!0}))},onKeyDown:t,onboardingKey:R.Su,recordingKey:"inline_menu_organize_dropdown_button",role:"combobox",testId:"inline_menu_organize_dropdown_button",tooltip:l?I.w:void 0,tooltipType:l?j.Ib.SPECIAL:void 0,children:(0,i.jsxs)("div",{className:"organize_actions_control--withBadge--6MYFY",children:[(0,i.jsx)("div",{className:"organize_actions_control--buttonIconContainer--JIHKA",children:(0,i.jsx)(v.B,{svg:V.A,className:x()("organize_actions_control--svgIcon---FcLd",{"organize_actions_control--svgIconDisabled--T699g":l})})}),(0,m.tx)("whiteboard.inline_menu.organize_button_text"),!u&&p&&(0,i.jsx)(k.fu,{name:"organize_actions_onboarding_badge",children:(0,i.jsx)("div",{style:{paddingLeft:8},ref:e=>{g(e?.offsetWidth||f)},children:(0,i.jsx)(b.Ex,{text:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2"),color:b.zE.FIGJAM,size:b.vj.SMALL,className:"organize_actions_control--onboardingBadge--rVvxT",dataTestId:"figjam_ai_quick_actions_onboarding_badge"})})})]})})});function Y({isFocused:e}){let t=(0,M.v1)(),n=(0,O.PX)(),a=(0,O.QL)(),o=(0,h.md)(O.u3),[l,d]=(0,h.fp)(O.UI),[c,u]=(0,h.fp)(O.kw),[p,f]=r.useState(!1);return(r.useEffect(()=>{let e=setTimeout(()=>{f(!0)},200);return()=>{clearTimeout(e)}},[f]),r.useEffect(()=>{e?u(!0):u(!1)},[e,u]),t)?(0,i.jsxs)("div",{onMouseEnter:()=>{p&&d(!0)},onMouseLeave:()=>{d(!1)},"data-testid":"whiteboard_organize_sort_sub_menu_wrapper",children:[(0,i.jsx)(Q,{ariaLabel:(0,m.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),disabled:!1,displayText:(0,m.t)("whiteboard.inline_menu.sort_by_dropdown_button_text_2"),id:`${O.Uj.OPEN_CLUSTER_BY_MORE_MENU}-menu-option`,isAiOption:!1,isFocused:e,isSubMenu:!0,onClick:()=>{l||d(!l)},onKeyDown:()=>{d(!l)},svgSrc:B.A,trackingProperties:{text:W(O.Uj.OPEN_CLUSTER_BY_MORE_MENU)},type:O.Uj.OPEN_CLUSTER_BY_MORE_MENU},`${O.Uj.OPEN_CLUSTER_BY_MORE_MENU}-menu-option`),l&&(0,i.jsx)(k.fu,{name:H,children:(0,i.jsx)("div",{className:"organize_actions_control--submenuPopover--tKoXK",children:(0,i.jsx)("div",{className:"organize_actions_control--submenuContainer--Aa6Pb",children:(0,i.jsx)(D.W1,{children:(0,i.jsx)("div",{className:C.s.flex.flexColumn.py6.w200.$,"aria-label":(0,m.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0,children:a.map((e,t)=>J({value:e,onClick:()=>n(e),onKeyDown:s.lQ,isSelected:!1,isFocused:o===t}))})})})})})]}):null}let J=e=>{let{value:t,onClick:n,id:r,isFocused:a,onKeyDown:s}=e;if(!t)return null;let o=(0,O.Ef)(t),{type:l,disabled:d,displayText:c,svgSrc:u,disabledTooltipText:m,tooltipOverrides:p}=t,h=W(l);return l===O.Uj.OPEN_CLUSTER_BY_MORE_MENU?(0,i.jsx)(Y,{isFocused:a},O.Uj.OPEN_CLUSTER_BY_MORE_MENU):(0,i.jsx)(Q,{disabled:d,disabledTooltipText:m,displayText:c,id:r,isAiOption:o,isFocused:a,onClick:n,onKeyDown:s,svgSrc:u,tooltipOverrides:p,trackingProperties:{text:h},type:l},`${l}-menu-option`)};function Z(e){return`inline_menu_organize_option-${e}`}let Q=(0,k.tf)(function({id:e,type:t,displayText:n,svgSrc:r,disabledTooltipText:a,disabled:o,onClick:l,onKeyDown:c,isFocused:u,tooltipOverrides:m,isAiOption:p,isSubMenu:h,ariaLabel:f}){let g=m?.tooltip||(o&&a?a:""),b=m?.tooltipType||j.Ib.TEXT;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-label":f??n,"aria-selected":"false",className:x()("organize_actions_control--optionContainer--YYLj2",{"organize_actions_control--optionContainerDisabled--vJsWb":o,"organize_actions_control--optionContainerIsFocused--Yv1Uu":u}),"data-tooltip":g,"data-tooltip-offset-x":6,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-type":b,id:e,role:"option",tabIndex:-1,children:(0,i.jsx)(S.c$,{children:(0,i.jsxs)("div",{className:C.s.flex.justifyBetween.itemsCenter.gap8.$,children:[(0,i.jsx)(E.E,{truncate:!0,children:n}),p&&(0,i.jsx)(d.o,{eventListeners:["onClick","onPointerUp","onMouseUp"],children:(0,i.jsx)(N.v,{location:"INLINE_TOOLBAR",hoverStyleClassName:x()({"organize_actions_control--aiBetaBadge--t-jiw":!o}),onPointerUp:()=>{(0,y.Lf)(z)||_.Ay.unsafeRedirect(z,"_blank")}})}),h&&(0,i.jsx)("span",{className:C.s.pl4.mr0.$,children:(0,i.jsx)(v.B,{svg:U.A})})]}),additionalStylesClassName:void 0,"data-testid":Z(t),dataTestId:Z(t),disabled:o,fullWidth:!0,height:32,ignoreCheck:!0,onKeyDown:o?s.lQ:c,onMouseUp:o?s.lQ:l,recordingKey:Z(t),selected:!1,style:{width:"95%",marginBottom:0},svg:r,value:t},`option-${t}`)})})});function $({disabled:e}){let t=(0,M.v1)(),n=(0,O.QL)(),r=(0,O.PX)();return t?(0,i.jsx)(k.fu,{name:H,children:(0,i.jsxs)(o.g8,{children:[(0,i.jsxs)(o.ZP,{disabled:e,recordingKey:Z(O.Uj.OPEN_CLUSTER_BY_MORE_MENU),"data-testid":Z(O.Uj.OPEN_CLUSTER_BY_MORE_MENU),"aria-label":(0,m.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),children:[(0,i.jsx)(o.Q$,{children:(0,i.jsx)("div",{className:"x30jfuo",children:(0,i.jsx)(u,{})})}),(0,m.t)("whiteboard.inline_menu.sort_by_dropdown_button_text_2")]}),(0,i.jsx)(o.MJ,{children:(0,i.jsx)(o.YJ,{children:n.map(e=>{if(!e)return null;let{type:t,disabled:n,displayText:a,svgSrc:s}=e,l=(0,O.Ef)(e);return(0,i.jsxs)(o.q7,{disabled:n,onClick:()=>r(e),recordingKey:Z(t),"data-testid":Z(t),"aria-label":a,children:[s&&(0,i.jsx)(o.Q$,{children:(0,i.jsx)("div",{className:"x30jfuo",children:(0,i.jsx)(v.B,{svg:s})})}),a,l&&(0,i.jsx)(o.Ov,{children:(0,i.jsx)(d.o,{eventListeners:["onClick","onPointerUp","onMouseUp"],children:(0,i.jsx)(A,{})})})]},t)})})})]})}):null}},72816:(e,t,n)=>{n.d(t,{p:()=>m});var i=n(239976),r=n(105652),a=n(730436),s=n(379141);n(323264);var o=n(224542),l=n.n(o),d=n(859727),c=n(842582),u=n(338630);let m=(0,r.memo)(function(e){let{leftContent:t,content:n,rightContent:r,trackingContext:o="DLT Banner",onClose:m,isFloatingBanner:f,shouldHide:g}=e;return(0,d.h8)({isFigjamDLTBanner:!0,bannerType:e.bannerType}),(0,i.jsx)(u.fu,{name:o,children:(0,i.jsxs)("div",{className:l()(f?"dlt_banner--floatingBanner--6qBJS":"dlt_banner--banner--wqN2G",{"dlt_banner--hide--nB1wg":g}),children:[(0,i.jsx)(p,{leftContent:t}),(0,i.jsx)(h,{content:n}),r,r&&m&&(0,i.jsx)("div",{className:"x1xc55vz"}),m?(0,i.jsx)(c.Me,{"aria-label":(0,s.t)("common.close"),onClick:m,recordingKey:"dltBannerCloseButton",htmlAttributes:{"data-testid":"dltBannerCloseButton"},trackingEventName:"dlt_banner_closed",children:(0,i.jsx)(a.X,{})}):null]})})}),p=(0,r.memo)(function(e){let{icon:t,text:n}=e.leftContent??{},r=t&&(0,i.jsx)("div",{className:"dlt_banner--icon--9Bj-b",children:t}),a=n&&(0,i.jsx)("b",{children:n});return(0,i.jsxs)("div",{className:l()("dlt_banner--leftContent--8JZ1- text--fontPos12--oWc5z text--_fontBase--VaHfk",n&&t?"dlt_banner--leftContentIconAndText--2dKE-":n?"dlt_banner--leftContentOnlyText--oIb3C":t?"dlt_banner--leftContentOnlyIcon--H0EmC":"dlt_banner--leftContentEmpty--UUfqh"),children:[r,a]})}),h=(0,r.memo)(function(e){let{content:t}=e;return(0,i.jsx)("div",{className:"dlt_banner--mainContent--CQNpM text--fontPos12--oWc5z text--_fontBase--VaHfk",children:t})})},967553:(e,t,n)=>{n.d(t,{X:()=>J,O:()=>en});var i=n(239976),r=n(105652),a=n(20002),s=n(865702),o=n(692376),l=n(379141),d=n(270450),c=n(445019),u=n(224542),m=n.n(u),p=n(309742),h=n(29161),f=n(136393),g=n(859100),x=n(574159),_=n(574220),y=n(634224),b=n(772293),v=n(212198),C=n(384203),E=n(215496),w=n(193487),k=n(991915),T=n(798302),j=n(397344),S=n(847923),I=n(450207),A=n(761312),N=n(964731),M=n(910496),R=n(527205),P=n(890305),O=n(624631);function D({dismissModal:e,targetKey:t=O.oi.ZOOM}){let n=(0,a.wA)(),s=(0,S.R)(({mirror:{appModel:e}})=>e.showUi),d=(0,N.Um)(),c=(0,r.useRef)(!1),u=(0,A.q)(),m=(0,r.useCallback)(()=>{e(),n(I.oB())},[e,n]);return(0,r.useEffect)(()=>{c.current&&!(0,M.TY)(d)&&e()},[e,d]),(0,r.useEffect)(()=>{if(u&&!c.current){if((0,M.TY)(d))n(I.ho({type:M.pi,data:{selectionToUpdate:o.m7W.PREFERENCES}}));else{let e=s?42:0;n(I.j7({type:M.pi,data:{targetRect:{top:0,right:e,bottom:e,left:0,width:e,height:e},togglePreferences:!0},hasOwnEscKeyHandler:!0}))}c.current=!0}},[n,d,u,s]),(0,i.jsx)(R.rq,{isShowing:!0,trackingContextName:"new_user_pan_zoom_pref_tooltip",onClose:m,targetKey:t,emphasized:!0,title:(0,l.tx)("mouse_controls_modal.new_user.title"),description:(0,l.tx)("mouse_controls_modal.new_user.description"),arrowPosition:P.F_.LEFT_TITLE})}var L=n(271625),F=n(72816);function B(){return(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.80079 15.0786V10.2857H5.80079V15.0786L6.94724 13.9322L7.65434 14.6393L5.30079 16.9928L2.94724 14.6393L3.65434 13.9322L4.80079 15.0786Z",fill:"#8638E5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.80077 20.2071V25H4.80077V20.2071L3.65433 21.3536L2.94722 20.6464L5.30077 18.2929L7.65433 20.6464L6.94722 21.3536L5.80077 20.2071Z",fill:"#8638E5"}),(0,i.jsx)("path",{d:"M8.22183 11.7644C7.44078 10.9834 7.44078 9.71705 8.22183 8.93601C9.00288 8.15496 10.2692 8.15496 11.0503 8.93601L18.8284 16.7142L16 19.5426L8.22183 11.7644Z",fill:"white"}),(0,i.jsx)("path",{d:"M8.57538 11.4109C7.9896 10.8251 7.9896 9.87535 8.57538 9.28956C9.16117 8.70377 10.1109 8.70377 10.6967 9.28956L18.1213 16.7142L16 18.8355L8.57538 11.4109Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M13.171 12.4716C12.39 11.6905 12.39 10.4242 13.171 9.64316C13.9521 8.86211 15.2184 8.86211 15.9995 9.64316L20.9492 14.5929L18.1208 17.4213L13.171 12.4716Z",fill:"white"}),(0,i.jsx)("path",{d:"M13.5246 12.118C12.9388 11.5322 12.9388 10.5825 13.5246 9.99671C14.1104 9.41093 15.0601 9.41093 15.6459 9.99671L20.2421 14.5929L18.1208 16.7142L13.5246 12.118Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M15.9992 11.0574C15.2181 10.2764 15.2181 9.01002 15.9992 8.22897C16.7802 7.44793 18.0466 7.44793 18.8276 8.22897L23.0702 12.4716L20.2418 15.3L15.9992 11.0574Z",fill:"white"}),(0,i.jsx)("path",{d:"M16.3527 10.7038C15.7669 10.1181 15.7669 9.16831 16.3527 8.58253C16.9385 7.99674 17.8883 7.99674 18.474 8.58253L22.3631 12.4716L20.2418 14.5929L16.3527 10.7038Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M19.5353 10.3502C18.7543 9.5692 18.7543 8.30287 19.5353 7.52182C20.3164 6.74077 21.5827 6.74077 22.3637 7.52182L25.1922 10.3502L22.3637 13.1787L19.5353 10.3502Z",fill:"white"}),(0,i.jsx)("path",{d:"M19.8889 9.9967C19.3031 9.41091 19.3031 8.46116 19.8889 7.87538C20.4746 7.28959 21.4244 7.28959 22.0102 7.87538L24.4851 10.3502L22.3637 12.4716L19.8889 9.9967Z",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0144L25.8992 22.3711C29.0234 19.2469 29.0234 14.1816 25.8992 11.0574L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.4619 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0143L28.0205 20.2498C29.9732 18.2972 29.9732 15.1313 28.0205 13.1787L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.4619 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0143L28.0205 20.2498C29.9732 18.2972 29.9732 15.1313 28.0205 13.1787L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.462 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897ZM17.3246 19.6318L25.1921 11.7644L27.3134 13.8858C28.8755 15.4479 28.8755 17.9806 27.3134 19.5427L24.7125 22.1436L24.7101 22.1445L24.2113 22.6433C22.0103 24.008 19.3228 24.3498 16.8477 23.5758L10.9742 21.7391C11.4561 20.7767 12.5552 20.2721 13.6117 20.5555L15.8649 21.16C16.8504 21.4244 17.5982 20.4627 17.3246 19.6318Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("rect",{x:"15.292",y:"17.4214",width:"2",height:"4",transform:"rotate(-45 15.292 17.4214)",fill:"white"}),(0,i.jsx)("path",{d:"M16.2617 18.3853C16.7382 18.8834 17.3334 19.5012 17.3555 19.7388L17.7643 19.562L16.2617 18.3853Z",fill:"white"}),(0,i.jsx)("rect",{x:"17.4141",y:"15.3",width:"2",height:"4",transform:"rotate(-45 17.4141 15.3)",fill:"white"}),(0,i.jsx)("rect",{x:"19.5352",y:"13.1787",width:"2",height:"4",transform:"rotate(-45 19.5352 13.1787)",fill:"white"}),(0,i.jsx)("rect",{x:"23.0703",y:"13.8859",width:"2",height:"4",transform:"rotate(-45 23.0703 13.8859)",fill:"white"}),(0,i.jsx)("rect",{x:"21.6562",y:"11.0574",width:"2",height:"4",transform:"rotate(-45 21.6562 11.0574)",fill:"white"}),(0,i.jsx)("path",{d:"M20.9492 20.2498L28.0203 13.1787V13.1787C29.9729 15.1313 29.9729 18.2971 28.0203 20.2498L25 23.27L24.5 23.5L20.9492 20.2498Z",fill:"white"}),(0,i.jsx)("path",{d:"M27.3137 13.8858C27.509 14.0811 27.8256 14.0811 28.0208 13.8858C28.2161 13.6906 28.2161 13.374 28.0208 13.1787L27.3137 13.8858ZM24.4853 11.0574L27.3137 13.8858L28.0208 13.1787L25.1924 10.3503L24.4853 11.0574Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.8514 23.4906L24.0517 23.882L23.6121 22.9839L24.4118 22.5924L24.8514 23.4906Z",fill:"white"}),(0,i.jsx)("path",{d:"M24.8516 23.4907C25.0996 23.3693 25.2022 23.0698 25.0808 22.8218C24.9594 22.5738 24.6599 22.4711 24.4119 22.5926L24.8516 23.4907ZM24.0519 23.8822L24.8516 23.4907L24.4119 22.5926L23.6122 22.984L24.0519 23.8822Z",fill:"black",fillOpacity:"0.9"})]})}function U(){return(0,i.jsxs)("svg",{width:"17",height:"24",viewBox:"0 0 17 24",fill:"none",children:[(0,i.jsx)("rect",{width:"16.8",height:"24",rx:"8.4",fill:"white"}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"15.8",height:"23",rx:"7.9",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("rect",{x:"6",y:"4.80005",width:"4.8",height:"8.4",rx:"2.4",fill:"#9747FF"}),(0,i.jsx)("rect",{x:"6.5",y:"5.30005",width:"3.8",height:"7.4",rx:"1.9",stroke:"black",strokeOpacity:"0.9"})]})}function V(){return(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,i.jsx)("rect",{width:"16.8007",height:"24",rx:"8.40036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 25.2197 6.58252)",fill:"white"}),(0,i.jsx)("rect",{x:"-0.61236",y:"0.353557",width:"15.8007",height:"23",rx:"7.90036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 24.1074 6.43607)",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("path",{d:"M14.0391 15.7617L21.5291 17.7686L23.2014 14.0238L22.377 9.61005L19.7149 6.10149L16.8341 5.32959L14.0391 15.7617Z",fill:"#9747FF"}),(0,i.jsx)("rect",{x:"-0.61236",y:"0.353557",width:"15.8007",height:"23",rx:"7.90036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 24.1074 6.43607)",stroke:"black",strokeOpacity:"0.9"}),(0,i.jsx)("rect",{width:"4.8002",height:"8.4",rx:"2.4001",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 18.1826 9.66602)",fill:"white"}),(0,i.jsx)("rect",{x:"-0.61236",y:"0.353557",width:"3.8002",height:"7.4",rx:"1.9001",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 17.0703 9.51957)",stroke:"black",strokeOpacity:"0.9"})]})}function H(){return(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3535 6.50001H19V7.50001H21.3535L20.2071 8.64645L20.9142 9.35356L23.2677 7.00001L20.9142 4.64645L20.2071 5.35356L21.3535 6.50001Z",fill:"#8638E5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64649 6.50001H10V7.50001H7.64649L8.79293 8.64645L8.08583 9.35356L5.73227 7.00001L8.08583 4.64645L8.79293 5.35356L7.64649 6.50001Z",fill:"#8638E5"}),(0,i.jsx)("path",{d:"M11 8C11 6.89543 11.8954 6 13 6V6C14.1046 6 15 6.89543 15 8V19H11V8Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 18V8C14 7.44772 13.5523 7 13 7C12.4477 7 12 7.44772 12 8V18H14ZM13 6C11.8954 6 11 6.89543 11 8V19H15V8C15 6.89543 14.1046 6 13 6Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M8 13.8C8 13.3582 8.35817 13 8.8 13C10.5673 13 12 14.4327 12 16.2V27H10L8.71523 23.7881C8.24275 22.6069 8 21.3464 8 20.0742V13.8Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 26V16.2C11 15.0524 10.1213 14.11 9 14.009V20.0742C9 21.2192 9.21848 22.3536 9.64371 23.4167L10.677 26H11ZM10 27L8.71523 23.7881C8.24275 22.6069 8 21.3464 8 20.0742V13.8C8 13.3582 8.35817 13 8.8 13C10.5673 13 12 14.4327 12 16.2V27H10Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M14 6C14 4.89543 14.8954 4 16 4V4C17.1046 4 18 4.89543 18 6V19H14V6Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 18V6C17 5.44772 16.5523 5 16 5C15.4477 5 15 5.44772 15 6V18H17ZM16 4C14.8954 4 14 4.89543 14 6V19H18V6C18 4.89543 17.1046 4 16 4Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M17 13C17 11.8954 17.8954 11 19 11V11C20.1046 11 21 11.8954 21 13V19H17V13Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 18V13C20 12.4477 19.5523 12 19 12C18.4477 12 18 12.4477 18 13V18H20ZM19 11C17.8954 11 17 11.8954 17 13V19H21V13C21 11.8954 20.1046 11 19 11Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M20 15C20 13.8954 20.8954 13 22 13V13C23.1046 13 24 13.8954 24 15V19H20V15Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 18V15C23 14.4477 22.5523 14 22 14C21.4477 14 21 14.4477 21 15V18H23ZM22 13C20.8954 13 20 13.8954 20 15V19H24V15C24 13.8954 23.1046 13 22 13Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M11 19H24V21.7689C24 22.5866 23.8997 23.4011 23.7014 24.1943L23 27H11V19Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 20H12V26H22.2192L22.7313 23.9518C22.9098 23.2379 23 22.5048 23 21.7689V20ZM23 27H11V19H24V21.7689C24 22.5866 23.8997 23.4011 23.7014 24.1943L23 27Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M11 19H22V27H11V19Z",fill:"white"}),(0,i.jsx)("path",{d:"M15 17C15 17.2761 14.7761 17.5 14.5 17.5C14.2239 17.5 14 17.2761 14 17C14 16.7239 14.2239 16.5 14.5 16.5C14.7761 16.5 15 16.7239 15 17Z",fill:"white"}),(0,i.jsx)("path",{d:"M12 19C12 19.2761 11.7761 19.5 11.5 19.5C11.2239 19.5 11 19.2761 11 19C11 18.7239 11.2239 18.5 11.5 18.5C11.7761 18.5 12 18.7239 12 19Z",fill:"white"}),(0,i.jsx)("path",{d:"M18 17C18 17.2761 17.7761 17.5 17.5 17.5C17.2239 17.5 17 17.2761 17 17C17 16.7239 17.2239 16.5 17.5 16.5C17.7761 16.5 18 16.7239 18 17Z",fill:"white"}),(0,i.jsx)("path",{d:"M21 18C21 18.2761 20.7761 18.5 20.5 18.5C20.2239 18.5 20 18.2761 20 18C20 17.7239 20.2239 17.5 20.5 17.5C20.7761 17.5 21 17.7239 21 18Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 17.5C14.7761 17.5 15 17.2761 15 17C15 16.7239 14.7761 16.5 14.5 16.5C14.2239 16.5 14 16.7239 14 17C14 17.2761 14.2239 17.5 14.5 17.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 19.5C11.7761 19.5 12 19.2761 12 19C12 18.7239 11.7761 18.5 11.5 18.5C11.2239 18.5 11 18.7239 11 19C11 19.2761 11.2239 19.5 11.5 19.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 17.5C17.7761 17.5 18 17.2761 18 17C18 16.7239 17.7761 16.5 17.5 16.5C17.2239 16.5 17 16.7239 17 17C17 17.2761 17.2239 17.5 17.5 17.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 18.5C20.7761 18.5 21 18.2761 21 18C21 17.7239 20.7761 17.5 20.5 17.5C20.2239 17.5 20 17.7239 20 18C20 18.2761 20.2239 18.5 20.5 18.5Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M10 26H23V26.6C23 26.8209 22.8209 27 22.6 27H10.4C10.1791 27 10 26.8209 10 26.6V26Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.6941 24.8912C9.95025 24.788 10.2415 24.9121 10.3447 25.1682L10.84 26.3984C10.9431 26.6545 10.8191 26.9458 10.5629 27.049C10.3068 27.1521 10.0155 27.0281 9.91238 26.7719L9.41704 25.5417C9.3139 25.2856 9.43794 24.9943 9.6941 24.8912Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0231 24.8459C22.7554 24.7781 22.4835 24.9402 22.4157 25.2079L22.0949 26.4752C22.0271 26.7429 22.1892 27.0148 22.4569 27.0826C22.7246 27.1503 22.9965 26.9883 23.0643 26.7206L23.3851 25.4533C23.4529 25.1856 23.2908 24.9136 23.0231 24.8459Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.6941 24.8912C9.95025 24.788 10.2415 24.9121 10.3447 25.1682L10.84 26.3984C10.9431 26.6545 10.8191 26.9458 10.5629 27.049C10.3068 27.1521 10.0155 27.0281 9.91238 26.7719L9.41704 25.5417C9.3139 25.2856 9.43794 24.9943 9.6941 24.8912Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0231 24.8459C22.7554 24.7781 22.4835 24.9402 22.4157 25.2079L22.0949 26.4752C22.0271 26.7429 22.1892 27.0148 22.4569 27.0826C22.7246 27.1503 22.9965 26.9883 23.0643 26.7206L23.3851 25.4533C23.4529 25.1856 23.2908 24.9136 23.0231 24.8459Z",fill:"black",fillOpacity:"0.9"}),(0,i.jsx)("path",{d:"M20 18H23V21H20V18Z",fill:"white"}),(0,i.jsx)("path",{d:"M12 17H15V21H12V17Z",fill:"white"}),(0,i.jsx)("path",{d:"M16 17H19V21H16V17Z",fill:"white"}),(0,i.jsx)("path",{d:"M21 16H23V21H21V16Z",fill:"white"}),(0,i.jsx)("path",{d:"M18 16H20V26H18V16Z",fill:"white"}),(0,i.jsx)("path",{d:"M15 16H17V26H15V16Z",fill:"white"}),(0,i.jsx)("path",{d:"M12 16H14V26H12V16Z",fill:"white"})]})}let z="figjam_pan_zoom_onboarding--icon--kTtjM",G="figjam_pan_zoom_onboarding--bannerContainer--BgmVP",K={NEW_USER_PAN:"figjam_seen_new_user_dlt_pan",NEW_USER_ZOOM:"figjam_seen_new_user_dlt_zoom"};function W({children:e}){return(0,i.jsx)("span",{className:"figjam_pan_zoom_onboarding--boldedBannerText--L6JHg",children:e})}function q(e){let{onNext:t,onManualDismiss:n}=e,s=(0,a.wA)(),d=(0,r.useCallback)(()=>{s(f.b({[K.NEW_USER_ZOOM]:!0}))},[s]),c=(0,r.useCallback)(()=>{d(),n()},[d,n]),u=(0,r.useCallback)(()=>{d(),t()},[d,t]);return(0,r.useEffect)(()=>(o.glU?.setUsedZoomAction(!1),b.Y5.fromFullscreen.on("zoomActionMessageForOnboarding",u),()=>{b.Y5.fromFullscreen.removeListener("zoomActionMessageForOnboarding",u)}),[s,u]),(0,i.jsx)(F.p,{trackingContext:"FigJam New User Zoom Banner",content:(0,i.jsx)("div",{className:G,children:(0,l.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll",{boldTextPinch:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:m()("figjam_pan_zoom_onboarding--zoomIcon--f-KEw",z),children:(0,i.jsx)(B,{})}),(0,i.jsx)(W,{children:(0,l.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll_bold_text_pinch")})]}),boldTextScroll:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:z,children:(0,i.jsx)(U,{})}),(0,i.jsx)(W,{children:(0,l.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll_bold_text_scroll")})]})})}),rightContent:(0,i.jsx)(Y,{onChangePreferences:e.onChangePreferences}),onClose:c})}function X(e){let{onManualDismiss:t}=e,[n,s]=(0,r.useState)(!1),d=(0,a.wA)();(0,p.h)(()=>{setTimeout(()=>{s(!0)},1e3)});let c=(0,r.useCallback)(()=>{d(f.b({[K.NEW_USER_PAN]:!0}))},[d]),u=(0,r.useCallback)(()=>{c(),t()},[c,t]);return((0,r.useEffect)(()=>{if(n)return o.glU?.setUsedPanAction(!1),b.Y5.fromFullscreen.on("panActionMessageForOnboarding",u),()=>{b.Y5.fromFullscreen.removeListener("panActionMessageForOnboarding",u)}},[d,n,u]),n)?(0,i.jsx)(F.p,{trackingContext:"FigJam New User Pan Banner",content:(0,i.jsx)("div",{className:G,children:(0,l.tx)("rcs.figjam_pan.move_instructions",{boldTextSwipe:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:z,children:(0,i.jsx)(H,{})}),(0,i.jsx)(W,{children:(0,l.tx)("rcs.figjam_pan.move_instructions_bold_text_swipe")})]}),boldTextRightClick:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:z,children:(0,i.jsx)(V,{})}),(0,i.jsx)(W,{children:(0,l.tx)("rcs.figjam_pan.hold_right_click")})]})})}),rightContent:(0,i.jsx)(Y,{onChangePreferences:e.onChangePreferences}),onClose:u}):null}function Y({onChangePreferences:e}){return(0,i.jsx)("button",{onClick:e,className:"figjam_pan_zoom_onboarding--changePreferencesButton--VcCwY text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,l.tx)("rcs.figjam_pan_zoom_change_prefs")})}function J(){let e=(0,C.aV)(),t=(0,j.Td)(),n=(0,a.d4)(e=>e.isMakeSomethingV2Active);return t||e||n?null:(0,i.jsx)(et,{})}let Z=(0,y.r1)(K.NEW_USER_PAN),Q=(0,y.r1)(K.NEW_USER_ZOOM),$=(0,y.Fu)("figjam_editor_onboarded"),ee=[function(e){let{isOverlayShowing:t,next:n,complete:r,onChangePreferences:a}=e;return t?(0,i.jsx)(q,{onNext:n,onManualDismiss:r,onChangePreferences:a}):null},function(e){let{isOverlayShowing:t,complete:n,onChangePreferences:r}=e;return t?(0,i.jsx)(X,{onNext:n,onManualDismiss:n,onChangePreferences:r}):null}];function et(){let e=(0,c.md)(Z),t=(0,c.md)(Q),n=(0,c.md)($),a=(0,c.md)(_.Fy),o=(0,c.md)(_.g5),l=(0,c.md)(_.NT),d=(0,c.md)(T.w),[u,m]=(0,r.useState)(!1),p=(0,x.A)({numSteps:ee.length,onComplete:s.lQ}),{show:f,complete:y,isShowing:b}=(0,g.e)({overlay:L.eD$,priority:E.N.DEFAULT_MODAL},[e,t,n,a,o,l]);(0,r.useEffect)(()=>{let e=[T.tX.NOT_STARTED,T.tX.COMPLETED].includes(d),t=p.currentStep===ee.length-1;b||!e||t||f({canShow:(e,t,n,i,r,a)=>{let s=!h.Xb&&!h.aR,o=(0,k.d)({emailValidatedAt:r,jobTitle:a});return![T.tX.USE_CASE_STEPS,T.tX.MODAL_SHOWING].includes(d)&&(!!n||o)&&!i&&!e&&!t&&s}})},[b,d,f,p.currentStep]);let v=(0,r.useCallback)(()=>{m(!0)},[m]),C=(0,r.useCallback)(()=>{m(!1)},[m]);return b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.U,{currentStep:p.currentStep,children:ee.map((e,t)=>r.createElement(e,{isOverlayShowing:p.currentStep===t,next:p.next,complete:y,onChangePreferences:v})),isShowing:!0}),u?(0,i.jsx)(D,{dismissModal:C,targetKey:1===p.currentStep?O.oi.PAN:O.oi.ZOOM}):null]}):null}function en(){return(0,d.kc)().figjam_nav_new_user_onboarding&&(0,v.UK)().scrollWheelZoom.getCopy()&&(0,v.UK)().rightClickPan.getCopy()}},925387:(e,t,n)=>{n.d(t,{e:()=>u});var i=n(14575),r=n(40297),a=n(1007),s=n(591233),o=n(559595),l=n(526865);let d=o.V3*o.w,c=(0,r.jz)(l.rY4)+16;function u(e,t,n){let i=e.guid,r=e.absoluteBoundingBox,o=t.getViewportInfo();return Math.max(r.w,r.h)*o.zoomScale<=170?(0,a.QZ)({nodeId:i,minSizePx:170,alwaysPan:!1}):(0,a.QZ)({...s.B5,nodeId:i,nodeAbsoluteBounds:"vote"===n?p(r,o):m(r),viewportRect:h(o,c)})}let m=e=>i.r.fromOriginAndSize(e.x,e.y,e.w,e.h),p=(e,t)=>{let n=d/t.zoomScale,r=o.HG/t.zoomScale;return i.r.fromOriginAndSize(e.x,e.y-n,e.w+r,e.h+n)},h=(e,t)=>({origin:{x:0,y:0},size:{x:e.width-t,y:e.height}})},428158:(e,t,n)=>{n.d(t,{Uj:()=>L,IW:()=>F,Ef:()=>K,u3:()=>U,UI:()=>B,Y:()=>H,kw:()=>V,z1:()=>Z,PX:()=>J,Yh:()=>q,QL:()=>X,Wb:()=>z,Pn:()=>G,Cb:()=>Y,E0:()=>W});var i=n(239976),r=n(105652),a=n(865702),s=n(220678),o=n(160298),l=n(969365),d=n(915653),c=n(328414),u=n(798913),m=n(379141),p=n(270450),h=n(445019),f=n(184743),g=n(667431),x=n(33433),_=n(353950),y=n(772293),b=n(819805),v=n(20002),C=n(445952),E=n(702417),w=n(236410),k=n(382682),T=n(700954),j=n(330282),S=n(909587),I=n(85531),A=n(276344),N=n(615072),M=n(252840),R=n(318573),P=n(857215),O=n(685198),D=n(692683),L=(e=>(e.SUMMARIZE="summarize",e.CLUSTER="cluster_by_topic",e.TIDY_UP="tidy_up",e.WRAP_IN_SECTION="wrap_in_section",e.CLUSTER_BY_AUTHOR="cluster_by_author",e.CLUSTER_BY_COLOR="cluster_by_color",e.CLUSTER_BY_STAMP_COUNT="cluster_by_stamp_count",e.CLUSTER_BY_STAMP_TYPE="cluster_by_stamp_type",e.OPEN_CLUSTER_BY_MORE_MENU="open_cluster_by_more_menu",e.CREATE_FIGMA_SLIDES_OUTLINE="create_figma_slides_outline",e.SEND_TO_MAKE_FROM_FIGJAM="send_to_make_from_figjam",e))(L||{});let F={summarize:!0,cluster_by_topic:!0,create_figma_slides_outline:!0,tidy_up:!1,wrap_in_section:!1,cluster_by_author:!1,cluster_by_color:!1,cluster_by_stamp_count:!1,cluster_by_stamp_type:!1,open_cluster_by_more_menu:!1,send_to_make_from_figjam:!0},B=(0,h.eU)(!1),U=(0,h.eU)(null),V=(0,h.eU)(!1),H=(0,h.eU)(!1);function z(){let e=G(),[t,n]=(0,h.fp)(H),i=(0,h.Xr)(V);return r.useCallback(()=>{e(),n(!1),i(!1)},[e,n,i])}function G(){let[e,t]=(0,h.fp)(U),[n,i]=(0,h.fp)(B);return r.useCallback(()=>{t(null),i(!1)},[t,i])}function K(e){return!!e&&(F[e.type]||!1)}function W(){return(0,I.v1)()}function q(){let e=(0,g.y)(),t=(0,p.kc)().figjam_synthesize_handbrake||!1,n=[],r=(0,I.V)()&&!e,a=(0,I.cF)(),u=(0,T.IR)(),h=(0,_.J)(),f=W(),y=(0,b.Zr)("create-section-from-selection"),v=(0,b.Zr)("tidy-up"),C=(0,b.Zr)("align-top"),E={tooltip:k.w,tooltipType:w.Ib.SPECIAL};return f&&n.push({type:"open_cluster_by_more_menu",disabled:!1,isInClusterSubmenu:!1,displayText:"",disabledTooltipText:""}),r&&n.push({type:"summarize",disabled:!a||t,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_summarize_button"),svgSrc:M.A,fplIcon:(0,i.jsx)(s.x,{}),disabledTooltipText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_summarize_disabled_tooltip",{minSelectedStickies:2}),tooltipOverrides:t?E:void 0,isInClusterSubmenu:!1}),v&&C&&n.push({type:"tidy_up",disabled:!1,displayText:(0,x.A)("tidy-up"),svgSrc:D.A,fplIcon:(0,i.jsx)(o.D,{}),tooltipOverrides:{tooltip:"tidy-up",tooltipType:w.Ib.LOOKUP}}),y&&n.push({type:"wrap_in_section",disabled:!1,displayText:(0,x.A)("create-section-from-selection"),svgSrc:P.A,fplIcon:(0,i.jsx)(l.P,{}),tooltipOverrides:{tooltip:"create-section-from-selection",tooltipType:w.Ib.LOOKUP}}),u&&n.push({type:"create_figma_slides_outline",disabled:t,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_create_slides_outline"),svgSrc:R.A,fplIcon:(0,i.jsx)(d.m,{}),disabledTooltipText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_create_slides_outline_disabled_tooltip",{minSelectedStickies:2}),tooltipOverrides:t?E:void 0,isInClusterSubmenu:!1}),h&&n.push({type:"send_to_make_from_figjam",disabled:t,displayText:(0,m.t)("whiteboard.inline_menu.send_to_make_from_figjam"),svgSrc:O.A,fplIcon:(0,i.jsx)(c.s,{}),disabledTooltipText:(0,m.t)("whiteboard.inline_menu.send_to_make_from_figjam_disabled_tooltip",{minSelectedStickies:1}),tooltipOverrides:t?E:void 0,isInClusterSubmenu:!1}),n}function X(){return[...function(){let e=(0,g.y)(),t=(0,I.v1)();if(e)return[];let n=!!(0,p.kc)().figjam_synthesize_handbrake,i=[],r=(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),a={tooltip:k.w,tooltipType:w.Ib.SPECIAL};return i.push({type:"cluster_by_topic",disabled:!t||n,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_topic_2"),disabledTooltipText:r,tooltipOverrides:n?a:void 0,isInClusterSubmenu:!0}),i}(),...function(){let e=(0,I.v1)(),t=(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),n=[];return n.push({type:"cluster_by_color",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_color_2"),disabledTooltipText:t}),n.push({type:"cluster_by_author",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_author_2"),disabledTooltipText:t}),n.push({type:"cluster_by_stamp_count",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_stamp_count_2"),disabledTooltipText:t}),n.push({type:"cluster_by_stamp_type",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_stamp_type_2"),disabledTooltipText:t}),n}()].filter(e=>e?.isInClusterSubmenu&&"open_cluster_by_more_menu"!==e.type)}function Y(){return!!q().find(e=>e?.type==="summarize"||e?.type==="cluster_by_topic"||e?.type==="open_cluster_by_more_menu")}function J(){let e=(0,h.md)(N.f).positionRelativeToSelection,{summarizeCanvasSelection:t}=(0,A.ss)(e,void 0,"INLINE_TOOLBAR"),{clusterCanvasSelection:n}=(0,S.f)(),{cluster:i}=(0,S.J)(j.Gq,!1),{cluster:s}=(0,S.J)(j.MS,!1),{cluster:o}=(0,S.J)(j.bM,!0),{cluster:l}=(0,S.J)(j.ON,!1),d=(0,T.iX)(),c=function({entryPoint:e,newFileFrom:t}){let n=(0,v.wA)();return(0,r.useCallback)(()=>{(0,C.C)({type:"send-to-make-from-figjam",entryPoint:e,newFileFrom:t,dispatch:n})},[n,e,t])}({entryPoint:"FigJam Organize Menu",newFileFrom:E.f6.SEND_TO_MAKE_FROM_FIGJAM_ORGANIZE_MENU}),m=z();return e=>{let r=a.lQ,p="";if(e){switch(e.type){case"cluster_by_author":r=i,p="inline-menu-organize-cluster-by-author";break;case"cluster_by_color":r=s,p="inline-menu-organize-cluster-by-color";break;case"cluster_by_stamp_count":r=o,p="inline-menu-organize-cluster-by-stamp-count";break;case"cluster_by_stamp_type":r=l,p="inline-menu-organize-cluster-by-stamp-type";break;case"summarize":r=t,p="inline-menu-organize-summarize";break;case"create_figma_slides_outline":r=d,p="inline-menu-organize-create-figma-slides-outline";break;case"send_to_make_from_figjam":r=c,p="inline-menu-organize-send-to-make";break;case"cluster_by_topic":r=n,p="inline-menu-organize-cluster";break;case"tidy_up":r=()=>y.Y5.triggerActionInUserEditScope("tidy-up"),p="inline-menu-organize-tidy-up";break;case"wrap_in_section":r=()=>y.Y5.triggerActionInUserEditScope("create-section-from-selection"),p="inline-menu-organize-wrap-in-section"}u.l7.user(p,r),"open_cluster_by_more_menu"!==e.type&&m()}}}function Z(){let[e,t]=(0,h.fp)(B),[n,i]=(0,h.fp)(U),[r,a]=(0,h.fp)(V),s=X(),o=J();return(a,l)=>{if(a.shiftKey||a.altKey||a.ctrlKey){l(a);return}if(e)switch(a.keyCode){case f.Uz.ESCAPE:t(!1),i(null);break;case f.Uz.DOWN_ARROW:null===n?i(0):n+1<s.length&&i(n+1);break;case f.Uz.UP_ARROW:null===n?i(s.length-1):n-1>=0&&i(n-1);break;case f.Uz.RIGHT_ARROW:null===n&&i(0);break;case f.Uz.LEFT_ARROW:i(null),t(!1);break;case f.Uz.ENTER:null!==n&&n<s.length&&(a.preventDefault(),a.stopPropagation(),o(s[n]))}else if(r)switch(a.keyCode){case f.Uz.RIGHT_ARROW:t(!0);break;case f.Uz.LEFT_ARROW:t(!1);break;default:l(a)}else l(a)}}},559595:(e,t,n)=>{n.d(t,{V3:()=>R,ML:()=>q,w:()=>M,HG:()=>P,tt:()=>O});var i=n(239976),r=n(105652),a=n(20002),s=n(346524),o=n(378721),l=n(730436),d=n(692376),c=n(379141),u=n(524080),m=n(384795),p=n(622043),h=n(675283),f=n(499735),g=n(933870),x=n(770785),_=n(960068),y=n(837033),b=n(597298),v=n(456556),C=n(588302),E=n(879277),w=n(607734),k=n(379255),T=n(793955),j=n(709003),S=n(1007);function I({nodePosition:e,isExpanded:t,children:n}){let a=(0,S._X)({subscribeToUpdates_expensive:!0}),s=(0,r.useMemo)(()=>(0,S.Yb)(a,e.absoluteBounds),[e.absoluteBounds,a]),o=(0,r.useMemo)(()=>(0,S.ZT)(s,a),[s,a]),l=(0,r.useMemo)(()=>{if(!s)return{};let e=s.x+a.x,n=s.y+a.y;return{width:s.width,height:s.height,position:"fixed",transform:`translate(${e}px, ${n}px)`,pointerEvents:"none",zIndex:t?1:0}},[a.x,a.y,s,t]);return o?(0,i.jsx)("div",{style:l,children:(0,i.jsx)("div",{style:{pointerEvents:"all"},children:n({viewportZoom:a.zoomScale})})}):null}var A=n(526865);let N="vote_pins--voterListSeparator--hxbuG",M=32,R=7.5,P=256,O=e=>`${e}-votes`;var D=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(D||{}),L=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(L||{});function F({clientHeight:e,scrollHeight:t,scrollTop:n}){return 1>Math.abs(t-e-n)}function B({nodeVoteInfo:e,isMostVoted:t,isSelected:n,isHoveredInModal:a,isOtherPinSelected:s,selectPin:o,deselectPin:l,nodePosition:c,currentUserId:u}){let[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(m),[g,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!m){f(!1);return}let e=setTimeout(()=>f(!0),100);return()=>clearTimeout(e)},[m]);let _=(0,r.useCallback)(()=>o(e.guid),[o,e.guid]),y=(0,r.useCallback)(()=>l(e.guid),[l,e.guid]),b=n?"selected":h||a?"hovered":s?"dimmed":"default",v="selected"===b||"hovered"===b;return(0,r.useEffect)(()=>{v&&!g?(d.ofk.setVoteStampsHiddenOnVotedNode(e.guid,!0),x(!0)):!v&&g&&(d.ofk.setVoteStampsHiddenOnVotedNode(e.guid,!1),x(!1))},[v,g,e.guid]),(0,i.jsx)(I,{nodePosition:c,isExpanded:["selected","hovered"].includes(b),children:({viewportZoom:n})=>(0,i.jsx)(U,{recordingKey:`votePin-nodeId${e.guid}`,nodeVoteInfo:e,isMostVoted:t,pinState:b,setIsHovered:p,selectPin:_,deselectPin:y,viewportSize:n>.75?"large":n>.5?"medium":n>.25?"small":"xSmall",currentUserId:u})})}let U=r.memo(function({nodeVoteInfo:e,isMostVoted:t,pinState:n,setIsHovered:a,selectPin:d,deselectPin:h,viewportSize:_,currentUserId:b,recordingKey:v}){let C=(0,r.useRef)(null),E=(0,r.useRef)(null),[w,k]=(0,r.useState)(0),[j,S]=(0,r.useState)(!1),[I,P]=(0,r.useState)(!0),[D,L]=(0,r.useState)(0),[B,U]=(0,r.useState)(!1),G=(0,T.oC)(e),W={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[_],q={large:1,medium:.9,small:.8,xSmall:.7}[_];(0,r.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,y.n3)(e.target,C.current)||h()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,h,e.guid]),r.useLayoutEffect(()=>{"selected"===n&&C.current?.focus()},[n]);let X=t?x.sx.colorBgvotingtertiary.$.backgroundColor:x.sx.colorBg.$.backgroundColor,Y={default:{transform:`scale(${q})`,backgroundColor:X,borderColor:X,opacity:1,...W},dimmed:{transform:`scale(${q})`,backgroundColor:X,borderColor:X,opacity:.5,...W},hovered:{transform:"scale(1)",backgroundColor:X,borderColor:X,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:X,...x.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},J={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:A.$tX,height:A.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:A.$tX,height:A.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},Z=(0,r.useMemo)(()=>{let t=(0,T.zi)(b);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>t(e[0],n[0]))},[e.userIdToNodeVotes,b]),Q=Z.length>3,$=Q?Z.slice(0,2):Z,ee=Q?Z.slice(2):[],et={hovered:{height:`${M}px`},selected:{height:"auto"}},en=(0,r.useCallback)(e=>{let t=0!==e;t!==j&&S(t);let n=E.current?.getScrollHeight(),i=E.current?.getTrackHeight(),r=void 0===n||void 0===i||F({clientHeight:i,scrollHeight:n,scrollTop:e});r!==I&&P(r)},[j,I]),ei=(0,r.useCallback)(e=>{if(!e||!E.current){S(!1),P(!0);return}let t=E.current.getScrollTop(),n=E.current.getScrollHeight(),i=E.current.getTrackHeight();S(0!==t),P(F({clientHeight:i,scrollHeight:n,scrollTop:t}))},[]);return(0,i.jsxs)(u.x,{transition:{duration:.1,ease:"easeInOut"},children:[(0,i.jsxs)("div",{ref:C,"aria-expanded":"selected"===n,className:"vote_pins--votePinRoot--Xbm-K",id:O(e.guid),onClick:f.rf(v,"click",d),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),role:"button",style:{transform:`translateX(${10-w}px)`},tabIndex:0,children:["selected"===n&&(0,i.jsx)(s.E,{children:(0,c.t)("voting.pin.container_announcement")}),(0,i.jsxs)(m.P.div,{className:"vote_pins--votePin--BXmIu",initial:!1,animate:n,variants:Y,children:[(0,i.jsxs)("p",{className:"vote_pins--header--HsRTz",children:[(0,i.jsx)(V,{numTotalVotes:G,isMostVoted:t}),(0,i.jsx)(m.P.span,{className:"vote_pins--closeButtonContainer--hE9aK",initial:!1,animate:n,variants:J,children:"selected"===n&&(0,i.jsx)(o.K,{onClick:e=>{e.stopPropagation(),h(),a(!1)},"aria-label":(0,c.t)("general.close"),children:(0,i.jsx)(l.X,{})})})]}),(0,i.jsx)(p.N,{children:["selected","hovered"].includes(n)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.P.div,{className:N,animate:"selected"===n&&j&&!B?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),(0,i.jsx)(m.P.div,{className:"vote_pins--expandingSection--XpxzO",initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/q})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/q})`},children:(0,i.jsx)(g.P,{ref:E,maxHeight:M*R,width:240,allowScrollAndZoomOver:!0,onScroll:en,onCanScrollChange:ei,forceRerenderCount:D,children:(0,i.jsxs)("ul",{className:"vote_pins--voterList--vJFa1",children:[$.map(([e,t])=>(0,i.jsx)(z,{userId:e,nodeVotes:t},e)),Q&&(0,i.jsxs)(m.P.div,{initial:!1,animate:n,variants:et,onAnimationStart:()=>U(!0),onAnimationComplete:()=>{U(!1),L(e=>e+1)},children:["hovered"===n&&(0,i.jsx)(K,{overflowCount:Z.length-$.length}),"selected"===n&&ee.map(([e,t])=>(0,i.jsx)(z,{userId:e,nodeVotes:t},e))]})]})})}),(0,i.jsx)(m.P.div,{className:N,animate:"selected"!==n||I||B?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}})]})})]})]}),(0,i.jsx)(H,{reportWidth:k,numTotalVotes:G,isMostVoted:t,scale:q,padding:W})]})});function V({numTotalVotes:e,isMostVoted:t}){return(0,i.jsxs)("span",{className:"vote_pins--headerText--EZB-X text--fontPos14--QJNQC text--_fontBase--VaHfk",children:[(0,i.jsx)("span",{children:(0,c.tx)("voting.pin.votes",{numVotes:e})}),t&&(0,i.jsx)("img",{src:k.Ys,className:"vote_pins--medal--yoyh1",alt:(0,c.t)("voting.pin.medal_img_alt")})]})}function H({reportWidth:e,numTotalVotes:t,isMostVoted:n,scale:a,padding:s}){let o=r.useRef(null);return r.useLayoutEffect(()=>{let t=o.current;if(t){let{width:n}=t.getBoundingClientRect();window.myEl=t,e(n)}},[o,t,n,a,s.paddingLeft,s.paddingRight,s.paddingTop,s.paddingBottom,e]),(0,i.jsx)("div",{className:"vote_pins--offscreenMeasurementContainer--AGNm6",style:{transform:`scale(${a})`},"aria-hidden":!0,children:(0,i.jsx)("span",{style:s,ref:o,children:(0,i.jsx)(V,{numTotalVotes:t,isMostVoted:n})})})}function z({userId:e,nodeVotes:t}){let n=t.length>3,r=n?t.slice(0,2):t,a=t.length-2;return(0,i.jsxs)("li",{className:"vote_pins--voterListItem---3lSa",children:[(0,i.jsx)(G,{userId:e}),(0,i.jsxs)("div",{className:"vote_pins--stampPreviewList--8QpGa",children:[r.map(e=>(0,i.jsx)(W,{stampId:e},e)),n&&(0,i.jsx)("span",{className:"vote_pins--stampPreviewOverflow--raOjv text--fontPos12--oWc5z text--_fontBase--VaHfk",children:a})]})]},e)}function G({userId:e}){let{user:t,loading:n}=(0,b.wW)(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.v,{userId:e,user:t,loading:n,size:24,loadingClassName:"vote_pins--loadingAvatar--5Rj9D"}),(0,i.jsx)(w.m,{userId:e,user:t,loading:n,defaultClassName:"vote_pins--userName--n66Bd text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",loadingClassName:"vote_pins--loadingUserName--MbhYS"})]})}function K({overflowCount:e}){return(0,i.jsxs)("li",{className:"vote_pins--voterListOverflowItem--b-aBO vote_pins--voterListItem---3lSa",children:[(0,i.jsx)("div",{className:"vote_pins--voterListOverflowIcon--CuE0N",children:(0,i.jsx)(k.xL,{})}),(0,i.jsx)("span",{className:"vote_pins--voterListOverflowText--e14LQ vote_pins--userName--n66Bd text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",children:(0,c.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})})]})}function W({stampId:e}){let t=(0,h.fU)(),n=(0,v.Fk)((e,t)=>{let n=e.get(t);return n?n.name:null},e),r=(()=>{let e=E.WJ.find(e=>e.label===n);return e&&(0,C.k6)(e,t)||E.tR})(),a=n?(0,c.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,c.t)("voting.pin.stamp_preview_alt_without_type");return(0,i.jsx)("img",{className:"vote_pins--stampPreview--vA-Wz",src:r,alt:a})}function q({votedNodes:e,votingStage:t,selectedNodeId:n,currentUserId:s}){let o=(0,a.wA)(),l=(0,a.d4)(e=>e.voting.hoveredInModalVotePinId),c=(0,r.useMemo)(()=>(0,T.yn)(e),[e]),u=(0,r.useCallback)(e=>o(_.w9({votePinId:e})),[o]),m=(0,r.useCallback)(e=>o(_.rT({votePinId:e})),[o]),p=function({votedNodes:e}){let[t,n]=(0,r.useState)({}),i=(0,r.useMemo)(()=>e.map(e=>e.guid),[e]);return(0,r.useEffect)(()=>{if(!i.length){n({});return}let e="vote-pins",t=(0,j.EE)(e,i,e=>{n(t=>({...t,[e.nodeId]:e.position}))});return n(Object.entries(t.currentNodePosition).reduce((e,[t,n])=>(n&&(e[t]=n.position),e),{})),()=>{(0,j.lB)(e)}},[i]),t}({votedNodes:e});return(0,i.jsx)(i.Fragment,{children:e.map(e=>{let r=p[e.guid];if(!r)return null;let a=1===c.size&&c.has(e.guid)&&t===d.W8Y.ENDED;return(0,i.jsx)(B,{currentUserId:s,deselectPin:m,isHoveredInModal:l===e.guid,isMostVoted:a,isOtherPinSelected:!!n&&n!==e.guid,isSelected:n===e.guid,nodePosition:r,nodeVoteInfo:e,selectPin:u},e.guid)})})}},607734:(e,t,n)=>{n.d(t,{m:()=>l,v:()=>o});var i=n(239976),r=n(379141),a=n(597298),s=n(569693);function o({userId:e,user:t,loading:n,size:r,defaultClassName:a,loadingClassName:o}){return t?(0,i.jsx)(s.Ro,{size:r,entity:t,className:a}):n?(0,i.jsx)("div",{className:o,style:{width:r,height:r}}):(0,i.jsx)(s.Ro,{size:r,entity:{id:e},className:a})}function l({userId:e,user:t,loading:n,defaultClassName:s,loadingClassName:o}){return t?(0,i.jsx)("span",{className:s,children:t.handle}):n?(0,i.jsx)("span",{className:o}):(0,a.Fl)(e)?(0,i.jsx)("span",{className:s,children:(0,r.tx)("voting.voter_username.visitor")}):(0,i.jsx)("span",{className:s,children:(0,r.tx)("voting.voter_username.unavailable")})}},379255:(e,t,n)=>{n.d(t,{BV:()=>l,CB:()=>S,Cu:()=>M,D5:()=>_,EW:()=>h,G7:()=>a,Gg:()=>N,H$:()=>P,H0:()=>c,HK:()=>D,I5:()=>V,JK:()=>j,Mi:()=>E,N$:()=>d,QD:()=>B,QZ:()=>L,R8:()=>R,Un:()=>T,Vq:()=>F,Yl:()=>x,Ys:()=>s,_K:()=>g,ak:()=>C,c1:()=>A,dA:()=>k,dH:()=>p,h9:()=>f,kj:()=>y,lm:()=>I,pt:()=>v,qn:()=>w,rQ:()=>b,sJ:()=>U,xL:()=>o,xf:()=>m,yc:()=>u,zp:()=>O});var i=n(239976),r=n(393463);let a=(0,r.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4"),s=(0,r.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function o(){return(0,i.jsx)("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"})})}function l({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4137_211384)",children:(0,i.jsxs)("g",{clipPath:"url(#clip1_4137_211384)",children:[(0,i.jsx)("rect",{width:"64",height:"64",transform:"translate(0 16.3726) rotate(-15)",fill:e}),(0,i.jsx)("rect",{x:"12.7651",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.7651 25.3755)",fill:"black",fillOpacity:"0.15"}),(0,i.jsx)("rect",{x:"15.871",y:"36.9666",width:"32",height:"6",transform:"rotate(-15 15.871 36.9666)",fill:"black",fillOpacity:"0.15"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_4137_211384",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_4137_211384",children:(0,i.jsx)("rect",{width:"64",height:"64",fill:"white",transform:"translate(0 16.3726) rotate(-15)"})})]})]})}function d(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4119_210884)",children:[(0,i.jsx)("rect",{x:"1.93188",y:"17.8704",width:"40",height:"40",rx:"8",transform:"rotate(-15 1.93188 17.8704)",fill:"white"}),(0,i.jsx)("rect",{x:"4.65869",y:"35.7747",width:"4",height:"4",transform:"rotate(-15 4.65869 35.7747)",fill:"black",fillOpacity:"0.8"}),(0,i.jsx)("path",{d:"M6.55591 33.1958L4.61477 25.9514C3.47123 21.6836 5.43444 17.4495 9.59547 16.3346L33.1641 10.0194C37.3251 8.90444 41.1423 11.5897 42.2859 15.8574L44.227 23.1019",stroke:"black",strokeOpacity:"0.2"}),(0,i.jsx)("path",{d:"M8.62646 40.9232L10.5676 48.1676C11.7111 52.4354 15.5284 55.1206 19.6894 54.0057L43.258 47.6905C47.419 46.5755 49.3822 42.3414 48.2387 38.0737L46.2976 30.8293",stroke:"black",strokeOpacity:"0.2"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.2731 19.058L14.8865 23.7167L15.4041 25.6486L23.1315 23.578L28.3079 42.8965L30.2398 42.3789L25.0634 23.0604L32.7908 20.9898L32.2731 19.058Z",fill:"black",fillOpacity:"0.8"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210884",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function c(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4119_210979)",children:[(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#0D99FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 0.87391 13.0737)",width:"10",x:"0.87391",y:"13.0737"}),(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#0D99FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 17.4791 74.8821)",width:"10",x:"17.4791",y:"74.8821"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.6782 27.9006L46.2859 22.7045L48.2177 22.1868L49.5833 27.2831L54.6798 25.9175L55.1974 27.8493L50.0013 29.2416L49.5104 27.4096L47.6782 27.9006ZM32.6806 33.8827L27.4845 35.275L26.9668 33.3431L32.0632 31.9775L30.6977 26.8814L32.6296 26.3637L34.0219 31.5598L34.1216 31.5331L47.5783 27.9274L49.5101 27.4097L50.0278 29.3416L53.6335 42.7982L54.1511 44.7301L52.2193 45.2477L38.7626 48.8534L36.8308 49.3711L36.8308 49.3711L38.6628 48.8802L40.0551 54.0763L38.1232 54.594L36.7577 49.4977L31.6615 50.8632L31.1438 48.9314L36.3399 47.5391L36.3131 47.4392L32.7074 33.9826L32.1898 32.0507L32.1897 32.0508L32.6806 33.8827ZM48.0959 29.8592L34.6393 33.4649L38.245 46.9216L51.7016 43.3159L48.0959 29.8592ZM54.278 44.8033L59.3744 43.4378L58.8568 41.5059L53.6607 42.8982L54.1515 44.73L52.3193 45.221L53.7116 50.4171L55.6435 49.8994L54.278 44.8033Z",fill:"#0D99FF"}),(0,i.jsx)("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#0D99FF",strokeWidth:"2"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210979",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function u(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4121_211214)",children:[(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#9747FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 0.87391 13.0737)",width:"10",x:"0.87391",y:"13.0737"}),(0,i.jsx)("rect",{fill:"white",height:"10",rx:"2",stroke:"#9747FF",strokeLinecap:"square",strokeWidth:"2",transform:"rotate(-15.0378 17.4789 74.8821)",width:"10",x:"17.4789",y:"74.8821"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.8154 33.1697L40.4705 25.1453L48.5141 29.7671L43.859 37.7915L35.8154 33.1697ZM37.1696 49.4156L29.1452 44.7605L33.767 36.7169L41.7914 41.372L37.1696 49.4156ZM53.4151 48.061L48.76 56.0855L40.7164 51.4636L45.3715 43.4392L53.4151 48.061ZM60.0855 36.4702L52.0611 31.8151L47.4393 39.8587L55.4637 44.5138L60.0855 36.4702Z",fill:"#8638E5"}),(0,i.jsx)("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#9747FF",strokeWidth:"2"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211214",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function m(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4591_210267)",children:[(0,i.jsx)("rect",{x:"-2",y:"15.4233",width:"48",height:"48",rx:"9.6",transform:"rotate(-15 -2 15.4233)",fill:"white"}),(0,i.jsx)("rect",{x:"-1.26515",y:"15.8476",width:"46.8",height:"46.8",rx:"9",transform:"rotate(-15 -1.26515 15.8476)",stroke:"black",strokeOpacity:"0.2",strokeWidth:"1.2"}),(0,i.jsx)("circle",{cx:"31.4811",cy:"24.4658",r:"4.2",transform:"rotate(-15 31.4811 24.4658)",stroke:"black",strokeOpacity:"0.8",strokeWidth:"2.4"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.606 20.7418L36.1064 13.909C37.3868 13.566 38.7028 14.3258 39.0458 15.6061L45.8786 41.1065C46.2217 42.3868 45.4619 43.7028 44.1816 44.0459L42.4018 44.5228L21.5894 30.0419L20.6167 29.3651L19.9277 30.3293L13.2094 39.7307L8.90894 23.6812C8.56588 22.4009 9.32568 21.0849 10.606 20.7418ZM14.0138 42.7329L15.7418 49.1817C16.0848 50.462 17.4008 51.2218 18.6812 50.8787L39.368 45.3357L21.1914 32.6888L14.0138 42.7329ZM6.59072 24.3024C5.9046 21.7418 7.4242 19.1097 9.98483 18.4236L35.4853 11.5908C38.0459 10.9047 40.6779 12.4243 41.364 14.9849L48.1969 40.4854C48.883 43.046 47.3634 45.678 44.8028 46.3641L19.3023 53.197C16.7417 53.8831 14.1097 52.3635 13.4235 49.8028L6.59072 24.3024Z",fill:"black",fillOpacity:"0.8"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4591_210267",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function p({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4121_211235)",children:(0,i.jsx)("rect",{y:"16.5644",width:"64",height:"64",rx:"3",transform:"rotate(-15 0 16.5644)",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211235",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function h({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4171_210078)",children:(0,i.jsx)("rect",{x:"-5.5",y:"14.4346",width:"88.7204",height:"72.0853",rx:"25.2992",transform:"rotate(-15 -5.5 14.4346)",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4171_210078",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function f({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4171_210088)",children:(0,i.jsx)("path",{d:"M16.5562 8.25247C16.8973 6.92671 18.0926 6 19.4615 6L89.4516 6C91.4118 6 92.8454 7.84915 92.357 9.74752L73.765 82.0085C73.4239 83.3342 72.2286 84.2609 70.8596 84.2609H0.869569C-1.09063 84.2609 -2.52423 82.4118 -2.0358 80.5134L16.5562 8.25247Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4171_210088",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function g({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4173_210152)",children:(0,i.jsx)("path",{d:"M75.9438 8.25247C75.6027 6.92671 74.4074 6 73.0385 6L3.04841 6C1.08821 6 -0.34539 7.84915 0.143036 9.74752L18.735 82.0085C19.0761 83.3342 20.2714 84.2609 21.6404 84.2609H91.6304C93.5906 84.2609 95.0242 82.4118 94.5358 80.5134L75.9438 8.25247Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4173_210152",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function x({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4119_210848)",children:(0,i.jsx)("circle",{cx:"40",cy:"46",r:"40",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210848",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function _({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4119_210856)",children:(0,i.jsx)("g",{clipPath:"url(#clip1_4119_210856)",children:(0,i.jsx)("path",{d:"M18.693 6.40686C19.2012 4.50766 21.9085 3.78226 23.2982 5.17292L82.5015 64.4167C83.7556 65.6717 82.9788 67.752 81.0647 68.2649L0.211739 89.9294C-1.70237 90.4423 -3.41521 89.029 -2.95662 87.3152L18.693 6.40686Z",fill:e})})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_4119_210856",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_4119_210856",children:(0,i.jsx)("rect",{width:"89.0428",height:"77.1705",fill:"white",transform:"translate(-22.3394 16.0794) rotate(-15)"})})]})]})}function y({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_4121_211255)",children:(0,i.jsx)("path",{d:"M51.3523 84.6094C52.5437 86.3294 55.5163 86.0834 56.4088 84.191L94.4305 3.57293C95.2359 1.86524 93.7104 0.0603115 91.6086 0.234234L2.83059 7.58081C0.728861 7.75473 -0.479214 9.78588 0.59593 11.3379L51.3523 84.6094Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211255",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function b({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4119_210865)",children:[(0,i.jsx)("ellipse",{cx:"36.0212",cy:"10.0459",rx:"36.2221",ry:"8.35894",transform:"rotate(-15 36.0212 10.0459)",fill:e}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.0853 4.68736C67.4361 9.37258 54.7615 15.1933 39.2535 19.3486C21.2873 24.2612 6.9678 24.914 1.84497 22.4498L15.4556 73.2452L15.4564 73.2483L15.4564 73.2483C16.6513 77.7075 33.2845 77.1251 52.6077 71.9474C71.9309 66.7698 86.6269 58.9575 85.4321 54.4984L72.0853 4.68736Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4119_210865",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function v({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4171_210106)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30957 14.019C11.2258 17.2597 17.7809 30.6301 22.2705 47.3855C27.6619 67.5064 28.033 84.8893 23.0994 86.2112C22.8341 86.2823 22.5589 86.3055 22.2747 86.2826L22.3557 86.5848L94.06 67.3717L94.072 67.3685L94.0839 67.3652L94.4168 67.276L94.4086 67.2455C98.6089 65.2803 97.911 48.5964 92.7387 29.2931C87.5664 9.98975 79.8288 -4.80791 75.2087 -4.40965L75.2005 -4.44026L6.30957 14.019Z",fill:e}),(0,i.jsx)("ellipse",{rx:"37.1231",ry:"8.56687",transform:"matrix(-0.258819 -0.965926 -0.965926 0.258819 12.747 50.7267)",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4171_210106",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function C({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4121_211283)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M67.808 -0.216748L71.1184 12.1379L84.015 60.2684C84.2789 61.2533 83.6944 62.2656 82.7096 62.5295L14.95 80.6856C13.9636 80.9499 12.9501 80.3633 12.6879 79.3764L0.985107 35.3241L17.2244 30.9728C18.2736 30.6916 18.8962 29.6132 18.6151 28.564L14.2374 12.2262L65.5469 -1.52218C66.5318 -1.78607 67.5441 -1.20161 67.808 -0.216748ZM14.1879 12.2394L12.5651 12.6743L12.5663 12.6788L14.1879 12.2394Z",fill:e}),(0,i.jsx)("path",{d:"M0.453613 33.7343L15.3437 29.7445C16.2999 29.4883 16.8674 28.5054 16.6112 27.5492L12.6214 12.6591L0.453613 33.7343Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211283",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function E({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4121_211302)",children:[(0,i.jsx)("path",{d:"M1.59945 13.1347C1.69191 12.2997 2.28702 11.6068 3.09854 11.3894L33.2368 3.31384C34.0484 3.09639 34.9102 3.39889 35.4078 4.07583L43.442 15.006L0.106658 26.6177L1.59945 13.1347Z",fill:e}),(0,i.jsx)("path",{d:"M0.49585 28.071L77.3176 7.48667C78.4055 7.19517 79.5237 7.84077 79.8152 8.92866L93.0608 58.3616C93.3523 59.4495 92.7067 60.5677 91.6188 60.8592L16.7668 80.9157C15.6789 81.2072 14.5607 80.5616 14.2692 79.4737L0.49585 28.071Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_4121_211302",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function w({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10125)",children:(0,i.jsx)("path",{d:"M114.56 0.523225L5.97986 10.0227C2.09706 10.3624 -0.43629 14.2562 0.826349 17.9436L23.8419 80.1745C24.7355 82.7842 27.2933 84.4483 30.0413 84.2079L103.746 77.7596C106.494 77.5192 108.724 75.4361 109.151 72.7109L121.01 7.42886C121.613 3.57818 118.442 0.183524 114.56 0.523225Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10125",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function k({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1_2)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0018 18.1129C2.35849 15.712 3.7829 13.2449 6.18378 12.6015L8.11564 12.0839L28.0447 86.4602L26.1128 86.9778C23.712 87.6211 21.2448 86.1967 20.6015 83.7958L3.0018 18.1129ZM30.9425 85.6837L11.0134 11.3074L67.0371 -3.70406L86.9662 70.6722L30.9425 85.6837ZM89.864 69.8958L69.9349 -4.48052L71.8667 -4.99815C74.2676 -5.64147 76.7348 -4.21705 77.3781 -1.81617L94.9778 63.8668C95.6211 66.2677 94.1967 68.7348 91.7958 69.3781L89.864 69.8958Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1_2",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function T({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_9936)",children:(0,i.jsx)("path",{d:"M1.28373 39.4007L27.401 4.53364C29.0584 2.33788 31.9967 1.55056 34.5299 2.62346L74.5817 19.7606C76.9322 20.7561 78.3955 23.1298 78.2289 25.677L74.5428 65.0534C74.3751 67.6187 72.5917 69.7921 70.1085 70.4574L30.506 81.0689C28.0228 81.7343 25.3917 80.7438 23.9638 78.606L1.08334 46.3481C-0.334505 44.2255 -0.254107 41.4381 1.28373 39.4007Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_9936",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function j({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_9948)",children:(0,i.jsx)("path",{d:"M77.1821 12.7227L54.9038 -0.139714C53.5257 -0.935364 51.8879 -1.15098 50.3509 -0.739117L23.3659 6.49148C21.8288 6.90334 20.5183 7.90893 19.7227 9.28704L6.8603 31.5654C6.06465 32.9435 5.84904 34.5812 6.2609 36.1183L13.4915 63.1032C13.9034 64.6403 14.9089 65.9508 16.2871 66.7465L38.5654 79.6089C39.9435 80.4045 41.5812 80.6201 43.1183 80.2083L70.1032 72.9777C71.6403 72.5658 72.9508 71.5602 73.7465 70.1821L86.6089 47.9038C87.4045 46.5257 87.6201 44.888 87.2083 43.3509L79.9777 16.3659C79.5658 14.8288 78.5602 13.5183 77.1821 12.7227Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_9948",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function S({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_9990)",children:(0,i.jsx)("path",{d:"M4.38961 47.4437L8.7529 18.3221C9.07419 15.9214 10.8074 13.9494 13.147 13.3225L79.3093 -4.40567C81.6489 -5.03256 84.1359 -4.1913 85.6145 -2.2729L103.954 20.7655C104.931 22.033 105.361 23.6381 105.149 25.2242L100.785 54.3458C100.464 56.7465 98.7309 58.7186 96.3914 59.3454L30.229 77.0736C27.8895 77.7005 25.4024 76.8592 23.9238 74.9408L5.58431 51.9024C4.60744 50.635 4.17733 49.0298 4.38961 47.4437Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_9990",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function I({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10069)",children:(0,i.jsx)("path",{d:"M78.3034 46.7945L75.2573 11.9772C74.9685 8.67607 72.0583 6.23413 68.7572 6.52293L5.97724 12.0155C2.67614 12.3043 0.234196 15.2145 0.523004 18.5156L3.56912 53.3329C3.75676 55.4776 5.07913 57.3574 7.03428 58.2588L40.0733 74.3612C42.003 75.2509 44.2594 75.0535 46.0054 73.8422L75.7463 52.2473C77.5152 51.0201 78.4911 48.9392 78.3034 46.7945Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10069",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function A({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10082)",children:(0,i.jsx)("path",{d:"M53.8362 -0.906348L28.8877 3.49274C25.6243 4.06816 23.4453 7.18012 24.0207 10.4435L25.9888 21.6046C26.5642 24.868 24.3852 27.98 21.1218 28.5554L9.96064 30.5234C6.69727 31.0988 4.51826 34.2108 5.09368 37.4741L9.49277 62.4226C10.0682 65.686 13.1801 67.865 16.4435 67.2896L27.6047 65.3216C30.868 64.7461 33.98 66.9252 34.5554 70.1885L36.5234 81.3496C37.0988 84.613 40.2108 86.792 43.4741 86.2166L68.4226 81.8175C71.686 81.2421 73.865 78.1301 73.2896 74.8668L71.3216 63.7056C70.7462 60.4423 72.9252 57.3303 76.1885 56.7549L87.3497 54.7869C90.613 54.2115 92.792 51.0995 92.2166 47.8362L87.8175 22.8877C87.2421 19.6243 84.1302 17.4453 80.8668 18.0207L69.7057 19.9887C66.4423 20.5641 63.3304 18.3851 62.7549 15.1218L60.7869 3.96061C60.2115 0.697243 57.0996 -1.48177 53.8362 -0.906348Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10082",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function N({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10095)",children:(0,i.jsx)("path",{d:"M53.9511 20.3098L42.1525 3.16336C39.1912 0.00572091 33.9624 0.927699 32.2597 4.90774L27.0372 25.0555C26.4488 26.4308 25.3678 27.5367 24.0063 28.1564L3.71302 33.8825C-0.294145 35.7063 -1.03771 41.0813 2.32381 43.9245L20.084 54.7429C21.247 55.7266 21.9924 57.1158 22.1689 58.6287L21.3874 79.2433C21.8923 83.5712 26.6965 85.9346 30.4331 83.6935L46.7061 70.2694C47.9748 69.5084 49.4799 69.243 50.9323 69.5242L70.8153 76.573C75.0931 77.401 78.7991 73.537 77.7934 69.2974L70.0084 50.1933C69.6568 48.7113 69.8821 47.1509 70.6385 45.8288L83.6275 29.5885C85.8139 25.767 83.2768 20.9705 78.8875 20.6272L57.8597 22.1872C56.3683 22.0705 54.9743 21.401 53.9511 20.3098Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10095",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function M({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10138)",children:(0,i.jsx)("path",{d:"M12.85 78.4563L1.39908 13.5151C0.701528 9.55913 4.01276 6.04841 8.00276 6.51361L106.493 17.9966C109.127 18.3037 111.247 20.3031 111.707 22.9144L118.224 59.876C118.8 63.1393 116.621 66.2513 113.357 66.8267L19.8007 83.3233C16.5373 83.8987 13.4254 81.7197 12.85 78.4563Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10138",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function R({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10170)",children:(0,i.jsx)("path",{d:"M3.52293 10.7657C3.23413 7.46464 5.67607 4.55445 8.97717 4.26564L88.0582 -2.65305C91.3593 -2.94186 94.2695 -0.499919 94.5583 2.80118L98.93 52.7701C99.3106 57.1197 95.0142 60.5495 90.7364 59.6753C85.6875 58.6434 79.1215 57.7867 72.6631 58.3517C59.3871 59.5132 46.8006 72.394 33.8579 73.5263C25.4977 74.2577 16.8948 72.2143 12.2232 70.8232C10.0275 70.1694 8.54803 68.2028 8.34835 65.9205L3.52293 10.7657Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10170",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function P({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10181)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.3176 14.6705C1.88439 9.71881 5.54731 5.35352 10.499 4.92031L74.9606 -0.719357C77.7924 -0.967105 80.3366 0.794636 81.185 3.38441L12.8314 9.36458C8.98009 9.70152 6.13115 13.0967 6.4681 16.948L10.3685 61.53L7.72221 60.9899C6.90554 60.8233 6.29563 60.1395 6.22298 59.3092L2.3176 14.6705ZM13.0928 12.3532L15.0852 12.1789L81.6029 6.35932L83.1972 6.21983C86.4983 5.93102 89.4085 8.37296 89.6973 11.6741L93.3699 53.6516C93.7502 57.9988 89.453 61.4325 85.1642 60.627C80.8923 59.8246 75.5894 59.2269 70.3662 59.6838C64.4909 60.1979 58.7686 63.3152 53.0827 66.4127C47.4685 69.4711 41.8899 72.5101 36.2345 73.0049C29.1375 73.6258 21.8422 71.9786 17.6488 70.7666C15.4459 70.1298 13.96 68.1595 13.7601 65.8752L13.4347 62.1558L9.63099 18.679L9.45668 16.6866C9.26414 14.4858 10.8921 12.5457 13.0928 12.3532Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10181",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function O({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_1508_10194)",children:(0,i.jsx)("path",{d:"M13.5958 79.9017C8.77167 80.3237 5.46072 75.1516 7.86364 70.9473L21.5019 47.0847C22.744 44.9115 22.5064 42.1954 20.9058 40.2709L3.33102 19.1391C0.234531 15.4159 2.59704 9.74744 7.42117 9.32538L90.1645 2.08628C92.2987 1.89955 94.3706 2.86499 95.6004 4.61925L115.109 32.4478C116.341 34.205 116.541 36.4863 115.633 38.4307L101.253 69.2241C100.346 71.1653 98.4734 72.4758 96.3391 72.6626L13.5958 79.9017Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1508_10194",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function D({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1753)",children:(0,i.jsx)("path",{d:"M16.731 20.0212C13.2433 16.3882 7.10166 18.409 6.4527 23.4032L1.37881 62.4502C0.884517 66.2541 4.03759 69.5386 7.85853 69.1999L47.08 65.7235C52.0965 65.2788 54.3663 59.2248 50.8786 55.5917L46.4318 50.9596L85.863 13.1058C88.2534 10.811 88.331 7.01278 86.0361 4.62231L69.0925 -13.0273C66.7977 -15.4178 62.9995 -15.4953 60.609 -13.2005L21.1778 24.6533L16.731 20.0212Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1753",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function L({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1725)",children:(0,i.jsx)("path",{d:"M52.9651 15.8477L35.2998 41.0764L59.9709 58.3513C64.1126 51.7654 65.9172 43.6796 64.4598 35.4144C63.0477 27.4063 58.8158 20.6037 52.9651 15.8477ZM49.7126 13.5191L32.0232 38.7821L6.79163 21.1147C11.5638 14.9703 18.5448 10.5091 26.81 9.05173C35.0608 7.59689 43.133 9.39265 49.7126 13.5191ZM4.53573 24.4182L29.7289 42.0587L12.4783 66.6951C6.35043 61.9235 1.90212 54.9524 0.447277 46.7016C-0.962241 38.7078 0.67945 30.8817 4.53573 24.4182ZM15.779 68.955C22.2492 72.8262 30.089 74.4763 38.0971 73.0642C46.0909 71.6547 52.8835 67.4354 57.6382 61.601L33.0055 44.353L15.779 68.955Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1725",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function F({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_2094_1739)",children:[(0,i.jsx)("path",{d:"M28.644 8.74898L34.0412 39.3575L64.2193 34.0363C62.5252 26.3602 58.0606 19.2724 51.1138 14.4082C44.3027 9.63898 36.299 7.84315 28.644 8.74898Z",fill:e}),(0,i.jsx)("path",{d:"M25.4365 9.29133L30.8376 39.9224L0.206747 45.3234C-0.826765 37.5308 0.944422 29.3435 5.80863 22.3967C10.6728 15.45 17.7605 10.9854 25.4365 9.29133Z",fill:e}),(0,i.jsx)("path",{d:"M0.79417 48.523L31.4025 43.126L36.7236 73.3038C28.9311 74.3373 20.7439 72.5661 13.7972 67.7019C6.98606 62.9327 2.56115 56.0261 0.79417 48.523Z",fill:e}),(0,i.jsx)("path",{d:"M39.9232 72.7164C47.4263 70.9495 54.3331 66.5246 59.1023 59.7134C63.8715 52.9023 65.6673 44.8987 64.7616 37.2438L34.606 42.5611L39.9232 72.7164Z",fill:e})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1739",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function B({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1770)",children:(0,i.jsx)("path",{d:"M16.7681 5.48015C8.61136 6.30146 2.66482 13.5796 3.48613 21.7363L5.92497 45.9576C6.74628 54.1143 14.0244 60.0609 22.1811 59.2396L22.4765 59.2098L23.2086 66.48C23.4012 68.393 25.6685 69.2962 27.1238 68.0396L39.3133 57.5145L68.2606 54.5998C76.4174 53.7785 82.3639 46.5004 81.5426 38.3436L79.1038 14.1224C78.2825 5.96563 71.0043 0.01909 62.8476 0.840394L16.7681 5.48015Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1770",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function U({color:e="#699BF7"}){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_2094_1787)",children:(0,i.jsx)("path",{d:"M4.01281 14.3118C3.61202 11.0224 5.95368 8.03096 9.24306 7.63016L9.73939 7.56969L10.5256 14.022L4.07329 14.8081L4.01281 14.3118ZM4.43614 17.7861L12.7213 85.7832C13.122 89.0726 16.1135 91.4143 19.4029 91.0135L19.8992 90.953L10.8884 16.9999L4.43614 17.7861ZM13.8664 16.6371L22.8772 90.5902L106.757 80.3698C110.046 79.969 112.388 76.9776 111.987 73.6882L103.702 5.69107L13.8664 16.6371ZM103.339 2.71309L103.279 2.21676C102.878 -1.07262 99.8864 -3.41428 96.597 -3.01349L12.7174 7.20684L13.5035 13.6591L103.339 2.71309Z",fill:e})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2094_1787",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})})})]})}function V(){return(0,i.jsxs)("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_5859_244544)",children:(0,i.jsxs)("g",{clipPath:"url(#clip1_5859_244544)",children:[(0,i.jsx)("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"#2F2746"}),(0,i.jsx)("rect",{x:"12.5732",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.5732 25.3755)",fill:"#514670"}),(0,i.jsx)("rect",{x:"23.4062",y:"34.8961",width:"32",height:"6",transform:"rotate(-15 23.4062 34.8961)",fill:"#514670"}),(0,i.jsx)("rect",{x:"26.5122",y:"46.4872",width:"32",height:"6",transform:"rotate(-15 26.5122 46.4872)",fill:"#514670"}),(0,i.jsx)("rect",{x:"21.8906",y:"60.1488",width:"6",height:"6",transform:"rotate(-15 21.8906 60.1488)",fill:"#514670"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsx)("clipPath",{id:"clip0_5859_244544",children:(0,i.jsx)("rect",{width:"40",height:"72",fill:"white"})}),(0,i.jsx)("clipPath",{id:"clip1_5859_244544",children:(0,i.jsx)("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"white"})})]})]})}},793955:(e,t,n)=>{n.d(t,{$_:()=>S,Av:()=>j,DG:()=>w,FJ:()=>P,Ld:()=>T,Pd:()=>D,YR:()=>O,e_:()=>I,hr:()=>A,oC:()=>N,yn:()=>M,zi:()=>R});var i=n(105652),r=n(20002),a=n(692376),s=n(379141),o=n(445019),l=n(29161),d=n(536378),c=n(783868),u=n(852553),m=n(550534),p=n(772293),h=n(223487),f=n(920675),g=n(898301),x=n(935467),_=n(222041),y=n(661094),b=n(776492),v=n(249657),C=n(429641),E=n(684774);function w(e){let t=(0,s.t)("voting.modal.voting_setup_responsive_placeholder_prompt",{numVotes:e.userVoteLimit});return e.title||t}let k=()=>!l.Ay.isIpad&&!l.Ay.isMobileBrowser;function T(){let e=(0,E.jz)();return!!(e?.length&&e?.length>0)}function j(){let e=I(),t=!!(0,E.C3)(),n=k()&&("eligible"===e||"eligibleWithUpgrade"===e),[r,a]=i.useState(t&&n);return i.useEffect(()=>{if(!t){a(!1);return}n&&a(!0)},[t,n]),n||r}var S=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(S||{});function I(){let e=(0,h.q5)(),t=(0,r.d4)(t=>e&&e.teamId?t.teams[e.teamId]:null),n=(0,r.d4)(e=>e.isFreeUser),i=(0,c.DG)(e?.key||"").enabled,a=e?.isTryFile,s=!!e&&(e.canEdit||i);return a||!s?"featureDisabled":e.parentOrgId?"eligible":t?(0,g.PS)(t)?"eligible":"eligibleWithUpgrade":n?"eligibleWithUpgrade":"eligibleWithMoveFileToPaidTeam"}function A(){let e=(0,r.d4)(e=>e.mirror.appModel.votingSessionInfo),t=p.BI.getUserId(),n=t&&e.userIdToVoteStampIds[t]?.length||0;return e.userVoteLimit-n}function N(e){return Object.values(e.userIdToNodeVotes).reduce((e,t)=>e+t.length,0)}function M(e){return new Set(e.reduce((e,t)=>{let n=N(t),i=e.voteCount;return n<i?e:n>i?{voteCount:n,nodes:[t]}:{voteCount:i,nodes:[...e.nodes,t]}},{voteCount:0,nodes:[]}).nodes.map(e=>e.guid))}function R(e){return function(t,n){return t===e?-1:n===e?1:t.localeCompare(n)}}function P(){let e=(0,r.d4)(e=>e.mirror.appModel.votingSessionInfo.votingStage),t=(0,o.Xr)(b.Qs);i.useEffect(()=>{(e===a.W8Y.JOINED||e===a.W8Y.NOT_JOINED)&&t({type:"SET_VIEW",payload:b.iN.DEFAULT})},[e,t])}function O(){let e=(0,r.d4)(e=>e.mirror.appModel.votingSessionInfo.votingStage),t=(0,o.Xr)(b.Qs),n=(0,y.$)(),s=(0,v.qU)();i.useEffect(()=>{e!==a.W8Y.ENDED||n||(t({type:"VOTING_ENDED"}),(0,C.D)(s))},[e,t,n,s])}function D(e){let t=I(),n=(0,h.q5)(),a=(0,r.d4)(e=>n&&n.teamId?e.teams[n.teamId]??null:null),s=(0,r.wA)();return i.useCallback(()=>{if("eligibleWithUpgrade"===t)s(d.to({type:_.DV,data:{team:a,resource:x.Bi.VOTING,editorType:f._Y.WHITEBOARD,currentPlan:u.F.Plan.STARTER,upsellPlan:u.F.Plan.PRO,entryPoint:m.C.VOTING}}));else if("eligible"===t)return e(),!0;return!1},[s,t,a,e])}},801861:(e,t,n)=>{n.d(t,{f:()=>h});var i=n(239976),r=n(379141),a=n(224542),s=n.n(a),o=n(154963),l=n(338630),d=n(223487),c=n(938241),u=n(747079),m=n(717096),p=n(446341);let h=(0,u.Ju)(function({sectionId:e,initialTemplateId:t,initialShelfId:n,onConfirm:a,onCancel:u}){let h=(0,d.tS)();return(0,i.jsx)(l.fu,{name:"section_preset_picker_confirmation_modal_shown",properties:{fileKey:h,sectionId:e,initialTemplateCategory:n,initialTemplateId:t,templateType:c.n.HubFile},children:(0,i.jsx)(m.yX,{confirmationTitle:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:s()(o.s.fontSemiBold.font15.$,p.UP),children:(0,r.tx)("whiteboard.section_preset_picker.confirmation_modal.header")}),(0,r.tx)("whiteboard.section_preset_picker.confirmation_modal.description")]}),confirmText:(0,r.t)("whiteboard.section_preset_picker.confirmation_modal.confirm_text"),cancelText:(0,r.t)("whiteboard.section_preset_picker.confirmation_modal.cancel_text"),onConfirm:a,onCancel:u})})},"SectionPresetPickerConfirmationModal")},567726:(e,t,n)=>{n.d(t,{g:()=>l});var i=n(105652),r=n(20002),a=n(445019),s=n(223487),o=n(625009);function l(){let e=(0,s.tS)(),t=(0,r.d4)(e=>e.fileVersion),n=(0,a.Xr)(o.ME);return(0,i.useCallback)((i,r)=>n({fileKey:e,fileVersion:t,template:i},r),[e,t,n])}},630213:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE0SURBVHgBnVJJboQwEGw8nhUOnDiCuPKq/CDkBUleEM0PkkfxAOAEEhIcEDukC8WIMIlGmpIsjF3VXd1tjRhxHL+O4+hP02Sez2eyLIvWSNOUqqoiTdNyXp+2bb/IKIo+uq7z+74nFtNut6Mt2raluq5JCGFKKf0wDAvBWZ4g4i/dAzicBNtnyVnMYRjuCtQCoJGXy4U4/ULY7/dzPYrE9uYzwzCWQIfDgbRp4xG1BEFAx+Nx/m+ahjzPIzRtDbm1hQZBhKhrq1sIehA3GXlOs721ddR5w0uSZMKclkjcKNM0Z8sqUFEU8xiwB1CGRAcRVdWi6zqdTqdf0bMso7IsFyHGJ/CMYAWHav0FdffDzWH+Cnv/CbZicLmML+E4zhu/zyuPIIfF9RgUcIY7cFj87rqu/w2Oa5mJ2/ljqgAAAABJRU5ErkJggg=="},317240:e=>{e.exports="data:image/png;base64,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"},795595:e=>{e.exports="data:image/png;base64,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"},947615:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZwAAAD8CAYAAABDwhLXAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAADfKSURBVHgB7Z17rGVFvefr9ON09+knjxG93UCb6EAjc2W8xm4xczUGBP8QEFSYQCKKDsFJUDQDGkh4RONjoijehEQF2kRyQYWLj0SwOwauoLRz7wxEBBxNhKa7QeTRr9NN9zndZ/a34Lfn17/+Va21z9l7nb1rfz/JOWuvWrWqatVa6/er368eayQ4TE1NrRgfH794zpw57279PqUVtDoQQgghaR4ZGRl56uDBgz9ZsmTJei/CiA1oKZpzWkrmttaJKwIhhBDSOU+19Mj1VvHM0Tt79uy5sbX5FyobQgghM2B1S4/ctnfv3mt1YNvCaVk2OHBdIIQQQrpES/F8c2xs7Ir4G/927959MbRRIIQQQrrPBxcvXnxPVDgt6+YvgQMDCCGE9Ibt+/fvf+Pc16ybiwMhhBDSGxbOmzfvr3NanB0IIYSQHjI1NfWeOa1/qwMhhBDSW9460uq/mQqEEEJIj5kTCCGEkAagwiGEENIIVDiEEEIagQqHEEJII1DhEEIIaQQqHEIIIY1AhUMIIaQRqHAIIYQ0AhUOIYSQRqDCIYQQ0ghUOIQQQhqBCocQQkgjUOEQQghpBCocQgghjUCFQwghpBGocAghhDQCFQ4hhJBGoMIhhBDSCFQ4hBBCGoEKhxBCSCNQ4XSZqampw7byu5Pz7e9U+vZY6ngu3ar9TtOpe71efK/+ZpJOaj91rE7+VXVfFVYnvZme45WjTh108tzotKvOsWG5ZzVVrk7uaa4sncbr9LkmaeYFUok8aCMjI4fte7+xlbjeOTZdYc6cOYelMR1hlIuLNHUZdNlzZbNlqYpfVWc63JYnVQe2DLbOU9frnZs637smXQ6pv7r1kwrzjtn0vDLY67PknjcvPFWG1DPuXZsXx+bpxffKliq/nJNTOvbepe6lje/VsZeP9/x553l1QF5lZHx8nGo7QUrQaXICsS6p82aSdi5N0E/Xlos3nbzqpJUSbHXL5CnOTspYFSeVZif1lKqPumWuc14nz1PV8W49EzMtU91yUOF0DhWOIdUKrXpJUw9a3ZdLh+WOyW+vvKm0pytgUuWq+wLWEcidKrVOBH03lNh00qqrZHVYSnhJHL1vw2bSGOkknU6OT6cOqvKoo/BsmlXPi32XvLAqBWLzIGmGvg9HP4D2pbPHDh482P5t/3LhGu/Bt6407+WXvG0+XjltvjhXn6/jeml614Py2Ov30pNwxPXKp/frpJPaSh4a+8Lr8lblYevCxvOEnI7jCS4bx5ZXh0l9pZ4d71wvH49cWjo/7xnR52Orn1VBrl3f89TzVlW3VedImGx1nvZY7vrk/Uo9a1XPYO59yaU17NDCCX7rTgsRT9gB/dAK8kJqAZ2yEPRWx/fy0CAPT9jaciCOTTtntaX2bZgVvt75VS1ZHZZKX8ru1X+qzlJlyLW4JZ3UteXuTy7tVDxPYXnx9H327rmNr5Hn0KaTu196v+69s9fj3Xv9LNr6tefJbzlP76fy9urIK4N+jvSzpevIqx+dni6nrT8d5j17qfs/TAy1wrEvh31A9HH9EqYeytzD7r1wQpXAyj2o8rLI75TyyKUrZZyqaImlFIAnIL1zUorKxvfSripTleKR36ky2uNeue25OeEtYVUNgypyStMqS8nfSyN1LEWVgtPpefViy58SuPYdrMrX1ql99lKKUZdX52OVQZ160MoLvyV9xJN9naZuhKYU7rAwdKPUrECwrSRBHkZsDxw4ELeTk5Pt+PPmzWs/YPqF13nYlvPIiN/HYV8Ie1w/tJJnTgHJtdl9nY4nuFIKJyVAvesCtqXppaevNXVPcnXmXb++Vk/p4z56isGmb8udEkiewLdpe0pWH7Pl8ISSd61yPXo/ZUXY+2YFYK4u7fXa+kgJ6lx8nb4XR4frY96+fb7rbO11WqUyd+7cWLcI1++8zg9xcEzqE/v408+CNAQ9xZYqT+kMlcLRQg7olomOI30eeKAmJibCokWLwtjYWFiwYEH7ISKEEMiJffv2hZanKMoLUTxCp0q6dIbCpZa7ybpVL7/RuoGiGR0dDcuXL6eSIYTUYvfu3eGVV16JHhDtbrNb+T1sVs7QKBwvzLqRoGjQWqGiIYRMF1g6UDzSaNUuTO1Cz7kcS2VoJKr1AUuYKBw8JPv37w8LFy4MRxxxBJUNIWRawLpZsWJFmD9/ftizZ09syE5NpYeED5OLrXipajvigdxgeRDED4t+Glg2hBAyU6B0lixZEl1s0i8s8gZY2TQMiqdYheONvrGDBuTmQ/HAssHDQQgh3WLp0qVxsJGMKKxj0ZSsdIpVON7wR/snw53ha0VrhBBCug1c9JA18mfnTek/ULI7v2gLx47r1302YtbC3D3qqKMCIYT0CsiYvXv3xt9WwdhBBKmJryUwNPNwPHcaBgqggw+de4QQ0isgZ8S15jWCbeO41BFrRQ8a8JQM0BM7jzzyyEAIIb1m2bJlcXASSE3VKJ3iFI4deqh/25YEtmh5EEJIr4GFg1UIxKWvt3b5nFLn4xSncKrWpRKTFtYNHgBCCGkKUTiCXeXEhpdGkS61nCtN9vFHhUMIaRL0F2NUrLj1vSVvZL9EpVOkwsmZo2LGwsLhagKEkCbRAwdkFe+pKf9jiiVSZAeGNU8FaVUA3HSOTiOENIm41PRnLep8GqIUimri5/ygw7huESGk/5DJn/Y7SppSl7opctCAXTNNkA8tUeEQQmYTPRIt9VXYEt1sRQ6LrnKnSTxCCJkt9CrSevUTS0lDpItROLmx6zjGAQKEkH4gtaSNXV9Nwmjh9Cmp4dBAWg9i6ejvwRNCSJOkBgwIdtmbUihG4dgJn96sXQmntUMImQ2s68xaL3pgU2nKBhQ98VPvy2deU308hBDSa2xj2BscwGHRA4L3sTVBWhUcFk0ImU1SjV6tiKriDipD4Vuy4905iIAQMhuI7PE+R+B5Zkqj2ImfuZEeMsuXEEKaxs4T1HMDvX4bDhroY7zF8PQ4d/bhEEJmC2/9NAm3yqbE1QaK68OxN1G2qVFspfDDH/4w/vUL/VKe3/zmN7EcO3fuDKQ7fPe73+2rZ23QsAok9UkVO1+nBIqa+AlyikX7SpuwdCDk3ve+94V169aFr3/964ccu+KKK2L4xz/+8UPC8SIjHH84/9prr42/sc3lg/Tw14kg+NCHPhTTvvfee8NMgFCXMtvyzDTtuiDPZ555Jv5pPvzhD8dy3HnnnWE2uOSSS2K9QEgPIig3yo9nBdx3333huuuui3UqdS73fsuWLWEm4NnF+7Jy5cr4hzx/+9vfhhLxLJxhcPUX/3kC25eTsnp6AT4piz+8lHhRNXiREI6tbn3jpUP4qlWr4rnyUuda6Ij3yU9+Mrzzne8Mp556aqgLBERV2nXRwh7l+chHPhLLc/LJJ4cmgGLTSk+Qenn/+98fZoMdO3Z0rY5nA3n+RJmcdNJJsT5xf3GfgafoOwXPPZTYH/7wh3DsscfGtPFuQOkgrCT0XEBvZJq3FmQpbrWiPk+gl/2WfWBHgTTZkjjjjDPii4OXBi8vXiT8lhcUYdjHSwzk5ZJ9C86DELOCHC1pAEWlQfqbN2+Ov6uEfyptD6T72GOPJRXcZz/72UPKI9e7fPnyuEWZdD5SThyHwEnl6V0LwrVAR15IB3Ut9SLCsc71Ii2EA5RF8j3uuOPcdCyolxUrVhx2L7z88Yf8U+nastQJT91vOUfqJpdOCpx74403VsbT91tfW6rOxTKHIkP6iAdrB+VDY+Itb3lLKAHtXfH6Z1IfYivFrVachWO/6mlpetDAmWee2f4tygQuKI24nUQpAU+QixsOSgxb3fKT1r12QcAdsnbt2hhfzrGWFkDrVc6XeLkWOcqxZs2a6K7yXCnazSLlkbjf+9732mXCeeI2RHqSt5emdy0ipHBMuxy1C0vy1a49HEN++nq1y1OsJZyLcCkbtjnXGK5V4qKs1o0q4B5I/sgDv3MuU+/ewkUo5wtII3e/xT2m3bhQjp24xFKWpAbXjeOiMOw1S13q+rn11lvDpk2bwvXXXx/36yi/QUQ8K54VI3gjbUuhqKVtUm4yz63WVIsBL468PKJoRAjA3QOsIkJ8a+HgRcefhEOoS+vdAy8zfO144UUA4RwIG+sXhyBCK1SnnRKWCBdBj/hoxeeEpUUEtrRYcS6UkLgFpZxwpYiwSl0LFB+uBa1lraDRSk5ZaSi7l9Y3vvGNw5QJWuIoG65T7iHiecpY6lasWKT7ox/96DB3kI6HdBEPIB+vHvV90UpTniE5JvWIdHH9ufvdS1CHqCPwzW9+Mz4f+ppRLtxnWD66znGd2o2s6/L8888PJZJTKKUNahKKGjSQm8FrWxJNth5EqMiLL0IICkN81Xi5Hn744RjuudPwgqIF+OMf/zgKTKB96xYIH/C5z30uth7x5wkuACvsl7/8ZUxbLLKUkIIQBRBqiI+/TgQCFA2uA/mh/kV5bdiwIV6XlBPXJh39kmfqWlC/uqUPl4zUuUWEIcovaYnil2MC7gnKhWu85ZZb2mHWQgW6Lw7nIF2U2yonuXeoB6SLeBImCsMi1yJKBnHk/uA6sC/3GxYCrl/XUarx0G3wXMu14F5JuSVM6hz74paTetXAMsK1Qsmjjqpck4OEnp6R+9KnN2S6BIqdhwP0agJ6PTWJ11QrQoQ4XkgISGnd4oWSlj6EWK7/Rlp/oMqfrV1zeHkFvLxbt25tuy0EnR86hYEn+KQDGUB4eOdXASEk1/H444/HLfY/85nPRKsGf6JEcVz3d9W5lhxV5cdxq8BF2Ok69+pGFIBYfQD311paco+1QvTcrhpR6NLAkLzEEoZbTNCuLsljpqPH6oJ7CFAm6cMDck3Yyj0Wa84ONoCiQRiuDY2SUvpuNCKXPM9LqhugFIoaNGDxBgbMhqmKl0ZcBdISFWEggwoQLi9fJyPNqkDndbeQzmX7e+nSpaEuMmjApqF99iJIrSKb6bV0o/xVWGVUJ21dJx7iVsNz8otf/KKtqD0rzqsjfa1NgHLiz94/XIe+z54yQVnl/tcZoDGoiBLRy9x4/TtcLbqPSU38FGZriCFeHHm5dEsYSOvVayFPF/1SQ0AJcK2gdTndOSEyXBXoljhaotNB6gRCWlxB+IM7Bi4ytPy7eS2p8osrE8enW/diGeoh0PhtLRZJX7sstYWS6iwXiwwWgB6IAbQVpS0GUUxWsOsyddP6wT2U51rm6QC5ZhyTe4y4KL/th8R1ovFVZyTcIGKVSW75LW8l6UGnyA+wATsXJ+cvbQLdGtWuFt0pDDpxT6WQeTBAOmYhoPEbwmomI4DE/YO0IFTgj5+uAoMglOuF8oC7EWmdfvrpURhhv+paxDrQVoLM5/D4xCc+EbcQapKWlF+72TpF6kUm+yJdCFNr8Uh/EcqOciJvcT/hGUkpPKQv/X3icvKeIUkTLis91BhIfCkj4tp+q5kAyxyKQuaeSd+R5C91jvuKQQG4x9r1JnFQDzLRtDS8CZ8SbufdlDhwoOg+nFzroWm0n94qFb3fLXeatDYhXKAURLDAetBlmU66orAg0CBARIhOBwgopAcFAQEtI8hQThFUuWuROHokWW5ZHZyD8uq0ZGSXFX6dgLyRNpBRb1IuDYSpxJMRc4iPeDfccEMyfQhx/WxYy0DqEWkhTT1oROoIeYu1g/pG/qKAu4WuB5QBChL5I0zqHGWXhg8GEWj0/LQSkUmf3oRPITVMugRGxsfHi7ka23rQn5WW0SGTk5Px89J79+6ND/zo6GhoCnGFSJ+OoEebWQGlJ4xqF5QdYJBKW1rEAAJLt6C9c6QsOj8PuHbgb9cDIqQ8unySdqp8dcrZSRwpF/LBXypflE/KaIehp+5H1TXIuSJMca7cP5RVW5aIB5eX7rOoQmbjA4z0q6ojsYpScbx7512Pfh5s3XjPouQB9HXXuWYZgYe8ShqdJuzfvz/Ww6JFi8K8efPC3Llz458oIL0Cged2G3SGQuHo1aKhbCYmJqLCwczx+fPnB0L6GQgoKBsMsxZrCKP0yOCxb9++sG3btrBgwYKoaKB0oGTE6tF9PN520Cl6lJowDL5RUi7o8xAXHSwDTKgkg4v+IGTp37+xFKNwUv01+rgeJl2SX5SUjXTGg5SbjAwGdT+T4q1yX4IiGgoLx/pAaeGQQUL6o8jgoxcYhkstFweUpGxAcaPUvHHrwzLkkBDS/8iqJ5rU0luch9Pn6JaB/eZEatkbQgiZLVKfK7ButRIobrVojR2lplsLGK1GCCFN4skpO4CgxOHQQtGrReux7d6QQ0IIaZqqTxJYOVbSAKfi1lLzsH5Q7W4jhJAmsauhVCmg1MjbQaS4tdS8pW30bz0JlBBCmsR6YvQyN3Lc/uYotT7Erk1kXWu2tUALhxAyG2h55E3ZKHWVAVBUHw7wbpL+wp7umCOEkKbxPgJpPTCpsEFnKPpw9HGJg1FqJXXGEUIGg5x3JWXV0KXWZ3gTp7zlIQTrOyWEkCbQjd2U9VJqY7g4l5qQmjQl8ThogBAyG4w4n5HWise6/EsapVbcWmq5GyOm7GwMGsA3QJr+tvygMjY2dsgXPAnpJZAFqXXNepWfjJSVfO1kTwkDJVk7RS/eaTvfZFnwJgcN4PsXv//97+OW1OPII4+MSoeQpoA8wDdqet0QlYU7xaXveWa8lQdKodi11GxLwfpMmxo0QGVDSP8DWYCvcTaFuPS9QQIlf2K62NWiUy0DvcxNr1sOcKFR2RAyGMgXgXuJnb4hYXZCqIYWTh9S1VKQcD0np9dQ2RAyWDRtTaQmqOswWjh9iLfCgD1uF/HkPBxCyGxgPTGpvpwquTZoFLm+S+oGSmcdoLIhhMwGsnhwauqGZ+Vw4mef4Y3uEOxyESlfKSGE9BJpDItrX4drUh9lG3SK+x5OHXeZ18IghJBeo137sp9rAJemdIZmlJoeNKDjEUJIU4hrH+hPFAhV38YZdIobpaaZqrH0NyGENIV27dftT+Zq0X2IN75d0H5Tiduva6k99thj4Zprrmn/3XLLLeH555+Px8bHx8M555zT3p8JSEPS2bRpU7jwwgtDt7jjjjvCl7/85UBIJzz++OPxOTzrrLPCl770pXa4PJ/y98UvfjGGb9myJVx22WUx7IknnmiHrV+/PvQ7uTk3Jc/FKfYDbBq9RIT89esH2KAEoFguuOCC+IffUDzYLl68ONx4443hda97XZgpUAq/+tWv4u+1a9e2X+Ju8LOf/SwqTvwRUpdPfepT4fLLLw9f+cpXwsMPPxxuuummGA6Fs2zZsngMf+eee24M/93vfhef3YsvvjjcdtttMeyqq64Kp512WuhnRpwPQgq5gQQlUMxaarZzzd44bd3o/X4EiuXkk0+Ov7GFwoFy+MAHPhAth+985ztRqEM54WV873vfG//wgkLIv/GNbwxf+MIXomJCHBuOc/AHoMjw0kIBQelI/L/85S/xfLzgOE/yQzrYoixQiBaUE/FRbuQh10FIjp07d8bnHM8iOP3008OuXbvax9asWROVztKlS8OqVatiOH7Lc4zFXvHcnnfeee3j/Yr2xniT0HNDpAedovtwBFm0UyujQbqRENpQAEC71/CyweKB4MfLhpf1nnvuaSsfgC3OR7goFigL/Mb2kksuOSRdHIeiuf322+Mxsa4kPygl5Il4CLOIAkSeYkERUgWUiVgmcIvdfffdbUtm69atYePGjfHZg7tNXGZQSniOoZA++MEPxnhyTr9iLZvU4CahtCkcxVk4HmLRlLbCAIQ6rCEAywOKAgoGikDcWdjCqgGeRWJBfFg1On1RRni5sS95iptPEItLWqmSHq0cUhcoj4suuigqDlg14Oabb47hUEro55Hj2McWx9CXg+f2yiuvDCeddFJ0s/UjokDk0wSetSMDCgatYVyHoj9PINiRaYM2cxdCHNZIFaIQgI4vikEslU76gOQcoJWLB5QL4ohlg3zgiqPCIXXQykYaPQADAlauXBl/Q5kgniggIK60DRs2RKsH1pBt+AwCqXUgS6IohaNbCNqa0S41O+GqHxELBRYDhDf24abKAaGOcxAPLxvORRj+IPQRLmnJy6xHqgmIB3cZ3GlIR/qT6gwAQPo4T8qKtK+44orDLCFCPKBsoFigKGSgAKwcuNLQLwOr5a677oq/pZ8G8fBOQ0nJOUD6f/oR2+C1qwqUPGVj7tVXX31dGBKgeGSwwOTkZOxo7OWX/iBoX3rppY7P2b59e+yzEaUBd8Ho6Gg8jjC8kIh3xBFHxA56IC/pgw8+GPfhPoOQ1+GIj5YgwnEewicmJsIJJ5wQ03vb294W80Me9913X0wHykmsI5wvL7qUQ8oFROGJcsEW6SNOJ1bVokWLwooVKwIZHmCxwF2Gj6DBosHfCy+8EJ8xWC2//vWvw89//vP4HN1www1txYK+nksvvTSeB2WFATVYpV1bSJ0AedDLEaz4/AGUIfKRPz16Fuj89YfaSlBEIy1BUoTtZken6a1YOFAyuOHY4qHEA6oFZreBUP7Tn/4USGfgi5/HH398IKRpIA/mzeud4wdyZ9u2bVFBQtnMnz//sFXsvWW3OA+nT/FWEpAWgl3Es2TTlRDSn+iFO71V7b3wUijy8wSCXSEa9POkT0LIcGBXt9dbITUhdJAZCslrrZ5+XtqGEFIuuZFoOY8LXWoDhHafeS43QghpCjtIoCoeoIXTp3hrEdlVBlImLCGE9BLblwxSikcPl6aF02d4rYbctyWa+ABbL4dcE0K6T69lgmexDFPDt7gvfqaOAVkuAjTRh4N5Pr0cYkkI6R5NDCjSFou2YOSY3upzSqFol5ogNxhzcJqcRAVlIxMzCSH9DebENOW6Si3iaT+lUhrFNr/1UhGpBfKaADOjYels3rw5ztbHpFOSp8kXnxC4vtE4bGq6hIyStZ+W1kpH0F6ZEihG4VhlkvrmjTVnmwCzit/85jcHQgipsmBsP3STXpleM1Sj1DyzlRBCmsT221TNv2EfTh+S+rS03eeQaELIbCHKRXtfcrKoNDlV7Bc/PUvHfuCIEEJmA5E/KffaoH67q4piLRxvlq42T7m0DSFktrDzcLx5OVpeceJnn6FbBELqkwWEEDJbWKvFUyb2o2ylUJyFk5qHI9uSx7gTQgYDzyPjWTOljE4TilvaxobZ36WZqISQwUF/EBJ4Kw4IVmaVQFETP1N+UX1TZ6MP547Nvw53PP3r8NALTwRCesW6I/5juPMdnwukMyAfMNm4qWWo7GdSdL4yoCmlhAad4lYa8FYTSM3NaYKvPXF3+J9P/ksghPQnkA/79++Pv5tc+9CuLGDnCdoycuJnH5EbIFBnjk4v2LznBSobQgaEiYmJnsuFVP+x7bcp1cIpajJKrg+nk9m93eKx7U8HQshgALmABX57nYf1uFTJopIGORWlcDzXmfz2Jn/2mh2T44EQQjQjmc8R2EFNJQ0YAMVNt8/Nw9HHOUqNEDJb6AWGU41jHbcUhmZpG9tyoMIhhDSNVSjyVWBv3ccSGYqJn6XePELIYGHn4UifUa7/uSSKdqnpMO0TtR13hBDSFNaFllthoLS+nGK/h1PlYiOEkH4i1Q0g+yVQ1Bc/QWrkhzcRtB9bDVN7JsKBZ3a09+ceuzyMjM1v7+/96RNh4WlvOiRsphx8YU/Y/8i2mO6M0nlxT0xLmHfC0YGQOjzxxBNh586dh4StWbMmLFu2LGzatOmQ8LVr18bt448/HrZt2xZOPPHEsGrVqnY6K1eujOf1IzJQwIZpquYQDjLFKJzUop1auXiLePYb+//PtrD3jkfD3ONWxP2JJ/8WFp11Ulh09prXlNH20A1e2fjnMLJofljwruPD1N79YfKPfwthhgpn70+eiOnMOXos7h94YTwsv/a0ripHUiZ33XVXVBYClMztt98eli5dGi688MK2kgEIh3L6/Oc/H0477bRw2223xTCcc/fdd4evfvWroV/p5FtcqXmEg0xxS9tovO9K2GP9CJTN0v/xj/E3LIad128M8088umUx/Icw/5S/iwJcFM/k5h1hbkvA49jkH18IEy2BP/fYFWH0P7+hnZ4Nx7kT/3tbTGfu0YvDnKPGwuipqw+JP9mKM+eoxe10JL+DL+wNB14cb4X/XTzPMtpSYIvOWhN/7/rav0bLacGpxwdCABTFVVddFZWCtkKuueaa9m8oja1bt0YlAyWCLRSKTQeWzeWXXx7OOuussGXLlnDTTTeFm2++OQwCOfljl7jhatF9zEjiuzg2fFBMVVgLo+9a3bJ8no3747f+W9xif9c/Pdx2v8G62PPPj4Y5LSUCC+mVDX9uh4/f+r9e/f1aOCwl+Tu4Z390he2545EYZ99DT8f4qKX9Dz11WH5QXAc2bw87v/ZAttwo14FWuvNaLkFCAJTERRddFBVNzuUFxQFFAqB4du3aFa688spw2WWXRcUC4EJ78skno/UDK+fb3/52PKdfXWmaqikbEkcrnlIo2sLx+m3k9yC1GmCJHHzh8FULIMzHLvj7+Hv3rf8elnz8H1oKanG0ZHb902/CwtPfFPb95umw9L+f2rKalkdLA5YLrCFYUVGZtSwVWDQCXG1w4cFSGW3F33HVL6JCsvm9dMldMdxaOfs2/CkqrdBSZMhnZGw0kOFk/fr10TpBX4woG/zOubxg3YBzzz03btEfgzTe8Y53ROUDa+b++++PiuWnP/1pTHfjxo0xruTTz0rHKhHtYssNEqBLrc/QnyDIoW/0oLQcoGw8wa37RhAHAwqEea/1ASFc+lSigjl6LJdVtHqgsNrpt/IVZSf9SjkWnP7mtkttz2sWlSgpMlxAScACgeUBRVKlbIC2bgCUje6/QV8PFIwoJCgYhCFdWEAA5+tz+o3USFoJGyn4213FTfz0wuwcnEHyi8L6wEACWCs54EqDoEffz+KPvT0sOO3N7XDpf4GbSyslj7kti2Xi//4t/kb/0asKa3GYLp5lRoaDk046KfzgBz+ISqSOsrHWjYTBUhLgXoPVI8CVhnShhM4777xw8cUXRwXUz2iLxpNDNpwutT7Gs3Q8xaP3+w2MTNt+1b2v7rRcUxih5nXQa8YueGvLrfZvLbfXipbbbEdY8K7jQmh1+Otw9L8s+fjbY/x5xy0Leze8OlJtnrJcxv7r34fdrb6ayVYZkE6dvDX7Wv0+OPcg+oheHA9Lr/zHQIYXKB24vmTYcg5r3QBYSXDFbdiwoT2QQKwXKCMoH6QNhSaKbd26daFf0SsNeCNodTxQWh/OyPj4eBFX4/XVyHh3UUCTk5NxKQn87dmzJxx//PHxS3+94p83/2u4/N+/29E5sTN/70R73wp76TdBPHCoW61lkbz4qkWiz5NwuMp0fFg+I4tGo6tN98fI8Gudjs3P67+pKjvpLYP+xU8MCEgpJoxWwxBpKDDB9tfIfJ2ZuNNGR0d7+hG2ffv2hWeeeSaMjY3FddSQF7Z6qobu55Gvf3LiZ5+SGwKNmyetC1k0r9+AQM/NWxEh7sWB4pjj9NGkwqWvRqcraaPD35bLK0cnZSckR84K8pSIHRzQz/02GsgfyCLtjRmGEWqg6A+wWQZxwAAhpCz0agOpgQP6NwcN9CFe342ee2PD7fIShBDSBFr2eKPS9G9aOH1KruPNjkwr1VwlhPQ31mLRq9fbRnOJHpniPjGdMz+lZZEzZwkhpFd4/TNeY7jU7+MU98XPqcxnpfU+rRtCSNOIO99+WlpjZVNJ8mooPsDmHWviJv6n5asDIWRwqLuS83SRoc45t761fvR20ClO4Qh1Zur2+iaevPy48K6jTwyEkP4Hc2J6rXCA7Vu2Xhk7F6ckil3aJrfUDWjiwQLfX3dFuOC4/xIIIf0L5EEvJ4ELXkPYWjFwt3nzc0qg2NWivaGG+uY1NSx6+fyx8O1/+G/hyjXnht/veDrsmODaYqQ3LJs3FmfKk86Qmf5NkHKh2f1SF/AsTuGkhhLO9tDCY8eOjn+EkOFGlIesdoLGr/W4eCPYSqC4lQbqDBooaVw7IWRw0P0yWNPRomWT56UZdIqbhyNY5ePtU+kQQmaT1HwbK6tKoTgLp45LLTW5ihBCeo0s3qn37XFQYoO4SAvHthJSHzkihJCmsd/EmXLWUAMlNoqLnPjpjW8vudVACBkMckOdvbk33sopg8xQLG0j+/qDRl4cQgjpNakpGblFPLnSwIBCJUMI6RdS6zyW2sdcpMJJfdTI+6oeIYTMBrovxztWoowqug/HhumWA5UNIWQ2kAmfKTnkLX9TCsWtpZZaykb26VIjhMwmeq004PU3A1lVuiSK7sPxvpxHy4YQMptAkaSUST8tx9ULhmLQgJ5kRQuHEDKbyAfYPIViF+70hkoPMsUs3pkbFq0/KV1qZxwhZLCwlo6WS6WuFl1UH06q/8ZrMTT1eQJCCNGIkrFWjl1cWIdz4mefYVsA3ki1VFxCCGkKGQqd6sPRVg4HDQwQnnstN/adEEJ6jWexWFeahp8n6ENyX9JLbQkhpGns8jWp9dP0b/bh9Dl28pS3ThFHrBFCZoucy8wuccM+nD7FdrzZcKHJ75gTQohHalUBzwoqgaGwcOz3woH3eVdCCOkldp6N/Shk6pxSKO6Ln4JuFeh5OLItyUwlhAwGnitfBjIJ3ohbutT6kJwLTcfRvtFec99994Xnnnuuvb99+/Zwzz33hFdeeSXMFqn8H3744XDnnXeG73//++HJJ58MnYDrEp566qmYVj+hy1cX3LvpnEdIHWQ+jrV6gG0Q06XWp6RGeNiVoptqMSxfvjwKLuGBBx6I24ULF4bZ4tFHHz1M4TzyyCNh06ZNYe3atfEPZe5EKUJJQdEACOk//vGPoZ/41re+1bHygNKlwiG9QBq+MvlTyA2ZLoGil7bRnW5Af0e8qZu4bt26KOAh0FevXh2F2KWXXhqPQfkgHMrn7LPPDq9//eujZbBjx45wxhlnxDjr168P55xzTlixYkU7TQjBn/zkJ3GLcJyLLeKeeOKJUXHoNHX8U045xS0n4n30ox9t54P4sMxQZg3KJ+lDMSG9e++9N6YN6wh5ClBCCEeZ5Hpw/aJ0Ef7ud787KiqEIW/cG1yvVzcCwqHQzj///LgP5bhgwYLwnve855DzkDbyQLmkPDgH+eAaEE/XHxQs4ubqiZBuARnk9S83LaOapGiXmh3Drpe0aXJpGwhbCEUIMyggCLf7778/PPvss1H54DiEIQQe/vbu3ds+F8rHAqF9wgknhE9/+tPhmGOOiWnpuEjz+OOPb4fDhQbFgfCUZQeBjnJBoaAsENRW2YgVBMUEwY1rgrI488wz47kIw3kAygrXhbg4D/EgyHEOBDzi4jrEdYfjb33rW6PSkHCpG5yvQR44LhYYfkNBIB7+cB7Sh9JEHFFMKAuuE0pJ6h554nqBKC6EY0vrhvQCrUhycsibuD7oFDXxs2q5CBunqRsJwQ0FAOGHVjdACx3KBy1xHIfArttvAuGK8yAgn3766UOUEgSqpLlv374YhjhQUAhHnjlQDrgBRUFoRCkgDv7wW9xoFpRDlBiUItKSuLhOsULkmhFP6gF/opywhRLS4DzUpygy7OMc7KN+ZR/5enUq50C5In3cF2yhJOWeSMOAkG6iG8KpSZ125Bpdan2IdZ95I0FgvmI49NQszN4VRaDRfSRoUXv9Ol4/ClrkosSgHLz+Ep0Wflf1GUHYIg6sB/zBKoIAt8JelJj87rQvCuUVy0kUjFVsqCtYGVAM+INVJW5IAQoB4X/961+jaw8sWrTosPxSdSoKUZdDLEwdj5Buklqs03OjcdDAAOAtfKdXZ9VhswksDghMafnDShEhCAWCMD3YQANBiPMhKGG9VIGWvuSVGj0GSwAuPyge5I10bQsflpV0pEs8caEBPRrPA3FxnVACcp2e2wp54NqRH87xBD+uXcogCgwKWNcprkGUCvKUvGCZQVHJMelTQjj625Au6okKh3QbOwdHyymrVFLhg8zcq6+++rpQIHawgLZ8sL9///7Y2pbvi/caCDsIvVWrVsV9EZgPPvhg2LJlS+woP/roo+Pf7t27w2OPPdaOe/LJJ4d58/6/MQpFsHHjxiiYEQfpvulNb4pCFtslS5ZEYYl0sI+8/vznP0fBit+Tk5NRmOs0ZXABBC3ivv3tb49/GuSLvDBIAHmJQpBj4iZDusgDeQNcJ8qJa5P+q4ceeiisXLkypiFllbRQfqSPeDgXdYMwDfLAH8JRPwB5IB2cJ3UqSgXlwbUhDuJL+ogHKw7lQlyEo2yIh/SlPgnpBvCw7Nq1K8yfP7/9PRxveHROEQ0yI+Pj40X0SOU+vCZKBjdbtq3rji1i3HhCCGkCNHQ3b94cxsbG2o0mGa3mKR29LYGivoeTuzEp3yghhDSFlT3ep1LsN3E4Sq0PyS1yZzvfUuPfCSGkl+iJ53qwgEedOINGcV/8TH0XR0apSZyS1icihAwGIod0o7eqkczVovuQ1Fh2fUwGD5Q8k5cQ0r/Yyed2Xk7pcqkYheOtCC3ITUSLglYNIaRf8Nz9qf0SKHrxTh3mTbgihJAmsQMCqo6V1kAubpSabSEA8Zlq05WDBggh/YA3Iq1UT0xxo9T0vv0tigc0uXgnIYQIepRayiNTKsVZOLkF8fREULrVCCGzgQwWsDJLsGuslUSxa6nZhTx1OAcPEEJmCzu3xrr3U56aEijKpaaxfTl6oTz8bmoNNUII0dhpGamvFJdIsfNwUuibizXVCCGkKbCWGkiNQvPCudJAH+NN+PTCsGgel58nhDSJeFe0Oy21Ooo+pxSK/cS0xn4bR9CfciaEkF6Dz2fIJwmE1NI2emABl7bpczxfqB3FRpcaIaRJ4FITZaMtHW+FATvwqQSKGjTgfUvCQ1oYsHBo5RBCmgDKZmJi4hCFYq2XnJemBIobNGDHtusWhL65CMfH115++eVACCG9Bp81h1VjXWVWRgGuNNDnpNZLSy2IBwsHNx+fe923b18ghJBeARmD/hv5wmdq0ifQMkqgS61PqTI9rdttdHQ0bN26NRBCSK945plnwoIFCw5b11EvtyXYxjO/h9OHeDfE9udYU1ZaERg88OyzzwZCCOk2kC0yHFpkTm7x4JJGpVmKnodjWwhaycgfHgKYuTt27AgvvfRSIISQbgFlA9kCGQNZI4pGK52qTxKUpHyKUjh2YEBuDLv+zCseBAwgeO6558K2bdsCIYTMFAwSePHFF6PbXjdwtVvNyiZvpG1JAwjmhcKoe3NwM9HqmJycbD8ICxcujK0RdPC94Q1viPuEENIJkCnPP/98lCWLFi2KskU8KcCbhO4poBLXVRsZHx8vRn3qG+RNmtKfJ8Bv+cMDgi36cvBb9o855phw5JFHBkIIqQJyA16S7du3R6sGCgZ/2rrxFI/nmRFK68spSuFotLKxykcUjqw2gAdFwjAxSysiHB8bGwtHHXVU3MrDQgghkBF79uyJ1gwUjfTVwEUvXhRRNNqFn7JyPBdbSRSncMQs1V/0tMoG4LjEhVLRFg7CbZhs8SCh9aLTs9+3AHpRPvkGD9LDw4a0JL6NN+J8SiF3rfLAeua4nKvztJNi7TmpB9xbvVbKXvW9IW1x6njWR62vXW9tPinftyxVZEcAyfNQda02nt736i1XB3ZCn5enPBNePrb+dLlteK4ckk/qPK/u9TERkvI+eYtN6udVrkPn7dW9LkvqOce5eOfk+bXzUmRfyubdt1R9yDlI28oKuUYrR7QlIl4QNFChVEQmiHKRvhq9leNSBr0dBusGFKlwgOdW04JALBqtNLSSkWN231pMOk/JV29Twj1VXv0y2DQ7qQObv03PE4b6mCcgtFDTadk0vbLYY1oQ6by9l9wKNO9aUnXkpWevq67iyyms1PXY+tLhqWvw6iNXFqsovfJ55UkpBl3f3j1NXYeXb1U96vuTK39OMepzq/IfGfFXIbH52DRtPKsw9MhX/GlXmh6gpN8XbwFP756VRLEWjqcQrAKyfTpyDApGLAJpyUi4vCDeiybkHupca9Cea8/xBIX3O/WQikIbec0a0A98SliCnDDNCUV9DVXC1xMYOcWn9215vX259tR9y9VdnTIJdcpWVxnYMlhLo46SqZN+7vnSrX2Jm7q3qXwkXk6h2TCbpzy3tsHhKTRPecp8O+85sXUs+Wvrxz4fUlYpl/zpUWj6mI1n69VTOKUpG1BkH07q4U8pHvnTD7O41iSOWDk6TftiCPbltC+k91KmXnpvm7teL8xTCDqOLbuXn5d3Kp5183n56Py04KyTt5durl68a/PiWiGYu85cXl5ce9wK1jrXaPEEvj6WcmWlyuWlbQV5Lr59z1JKzNu3lr33jKbeExtXK0vv2Ur91s+AVuz2mvRW4ogS0X00Eke7zXS43s/JkZIodtAA0A+rbUlpF5mEy2/PfSYPoNc3ZF82z/Wk0Q+cZ+XYNFMvmoA0tDCoUkr6hUql6QlAT5mAVOvRXq8tS+5YlaLzrte6Zqam0i7KlPDz6sO7N7os+j6mBKWNL0i/Xup+eOlUKaFUeXV95K7ZU765PG0+Fvse2nsnz4/NX+Lr+6vPzSmUkYqGjO2rs3nqa0rdBymDVSj68/VWyVi3mpe/zaMkih6lZgW1fXlyYVYB6XS1AsrlbzsfUy+2La/XAexdk74u+7LIy+i5eGxaUh57XJdT4+Xl5WHT0fnaOkrFS9WRLVtq8IXnepJzvb6DVPm969b56nti43h1bJ9JCbNCvkrp2bTtM58qQ6p+PVJKuOoZtPfHewdy16b3rbLRaXh1qfOvep+8vOy5VknYcz3Fo5WMvTZv6yme0ijawgHeS5cKsw+tDdPKA6QsGR3fE8ZTmdaUFRZVL4unVD03QE5g2RdKX5O2EHIvRF2BaMutz7ejjqw15Y3k8urME9ypvgh7TSkBmhOmVrnpsuv8bYtbH6/bMvfqOXWOvRb7/Hj30l6Hzcsrj63bVP3mrnMkoSDtO6bz8upCFFOqDutcjz2WUgBirehnV6et49hwL8w7vzSKVzjACiyrZLQS0eF6X7B+Zj3wIPXw2TLYl8a+DPblTAnHlPC2x3WeqXNS56bqT7+IVqmk8JSPzVtfZ+5aRzJKLyXkUnGAtYJS+aTuoz7mbW1atky5sgq2DyVVPp1+qq68a05dt3eNXtpV+975qWP2PfUUlk3DKgyLl7dWmFNOo8cbki141o9OwyorW3Ydx3t/S6T4Phz7EHqjXLxtVZjNw8bPvWi5sqbKnYvfCbnz6iqOqridli0nxJqm07KkFJiX3kzK4oXnymoFtg6rM6/JnpfL2ytvJ9dt07RK2r5ztkyp9PS+nFP1/KeO5d5Hq1hSYVLv1nKvetdLYigsHI08yDbM26aOA/1SpEi9LN2gl2nPhJyA6JfydqssVel0mk+v6shaW91Ot254k9hGYLfT9hRrynJJHbdpznZjqwmGxqUGbKunypqxx+R3lUvAa2FZZVXnPC//qtaZ94BLWG4kVarF6qXjxU8JmVxL2Gt55lp6I46bZbqkWr3TTTd1PTqvVDxdJiuocs9jnfrvBvaZ8p6Lmabtld+rn9TQ7JzySz33uWfTS8fLz1Mmsp97V2x5S1c0wlBZOKkXo45F4x1LCWiPlCLKxa1DTqjVScd78OvknVMYKSGeKlOdMkynXLk4QjeEdE54dJp+p0I8FX8mdZjKpxNBP9Pzpls275mzcVLn1s3L2/fKYJWMd/6wMXQKZyRjndh4NiyVppBqsdYlJyRyL4bXgtLHUml3QqfXUkWVYJ1JfrlWc9U5vcZTxN4x0A2hXOe66jY6OnkGq8qTs1Y6pc47Urcuc/cgdX06fx1PX2Pu3GFi6PpwhKoXpxOrp+qBT4V7D2LVi9GpYKwT37NKvPLYeNMRiLm8usVUB66SnAulE2Ul5+Sok2angjt3XkqRVD2vdazTqrpMvUPTuefeM5ijTt3k8uj0mKdwUnXRablKY2gVDrAvlj2WOgd4L2SneXpl6NYLWVcwVMXTx1KCPHV+Dq20qhanrJvWdOnkfO/+gW4LjlyZOlGoVed345nrJE/PsumkPL2q71w5PBmRa6RYC8memzp/GBhqhSPkFI+OAzxhXvfl8ZSTfUirFJI9J/fSp4S4l4789l4qL4/Udejz9DVIuFWOqbLm8kv9BrlFLVPl1WG2XKn8UnWaSq+qvlKKLFXWTo95z1fde+3lk7pfnTzvdeqvruL1GlqdPLdVSsUrR6qR5q0lWHUtwwIVjiInvG2clFDVVMXxHsbcS1wl1FLp6jAv/zrkrqWuMK2jSGzaqbJ0Uu5U+qn68ZZhmQ5V167jzDQ9T1l5wjil1OrkqdOyv20+9vzUfi4fe9zLP5VGnTy9tOtSR3EMu3LxoMJxmM6Dp1vtVcvg59JK5Z1rJeky6OOecPHKl3vhJL1OhKY+xyt7Lh1v9nu3yQlNWwavvr14NiylzKoaD3Wuv0683PPSCXUtjOmmlaqzOud6yif37Os8vec19zvFSEWDjxwKFU4N6rYmqwRy6iVIWSR10/fKllNwVXmnyl8VXlXmTlua0ynbSM3Wb52yeAKtKn5VmD6WS7dOeevc61QeufRT6abuS1Wd58Lq1G9KgNd5L708q/KpOif1/pNqqHBq4r0kEt5JiyiVpk471TL2lFZOGNi8uvVSeMJGh9u4Uq7p5tNrvHuYut8SR4enytlJ+b16mu5zUEdx54Rm3We6SmF1SlVeqTKmzk/d1zppeGkJVc88SUOFQwghpBHmBEIIIaQBqHAIIYQ0AhUOIYSQRqDCIYQQ0ghUOIQQQhqBCocQQkgjUOEQQghpBCocQgghjQCF81QghBBCestTc0ZGRh4JhBBCSG95dM7BgwcfCIQQQkgPmZqaumfk5ZdfXjE6OvqX1v6KQAghhHSZliftqbGxsTfOOeKII7YfOHDgY4EQQgjpAS1P2vXYxlFqy5Ytu6cV8K1ACCGEdJfrlyxZsh4/2sOily5d+hnRQoQQQshMafXbfGvx4sXXyf5hXw7avXv3xXPmzLm2FXF1IIQQQjpne+vvYy1lc48OTH6qDoqn1dFzduvn6tbfKYEQQghJ81Tr75GWsfJAS9Gsb+mP7TbC/wMWO1YpY7yvJQAAAABJRU5ErkJggg=="},377832:e=>{e.exports="data:image/png;base64,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"},447364:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(159773),r=n(105652),a=n(239976);let s=(0,r.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7.3 5.163a3.5 3.5 0 0 0-3.6 0l-.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85zm1.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85l-.2-.12a3.5 3.5 0 0 0-3.6 0zm-.286 7.169.043-.023.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .757-.44v-6.98a.5.5 0 0 0-.195-.406l-.057-.037-.433-.26a4.5 4.5 0 0 0-4.63 0L8 4.416l-.185-.11a4.5 4.5 0 0 0-4.63 0l-.434.26a.5.5 0 0 0-.25.445v6.98a.5.5 0 0 0 .376.494.5.5 0 0 0 .38-.056l.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .113.05.5.5 0 0 0 .358-.027",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.8 5.476a3.5 3.5 0 0 0-3.6 0l-.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85zm1.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85l-.2-.12a3.5 3.5 0 0 0-3.6 0zm-.286 7.168.043-.023.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .757-.44v-6.98a.5.5 0 0 0-.195-.405l-.057-.038-.433-.26a4.5 4.5 0 0 0-4.63 0L7.5 4.73l-.185-.11a4.5 4.5 0 0 0-4.63 0l-.434.26a.5.5 0 0 0-.25.445v6.98a.5.5 0 0 0 .376.493.5.5 0 0 0 .38-.056l.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .113.05.5.5 0 0 0 .358-.027",clipRule:"evenodd"})})})},245312:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.643 2.522a.5.5 0 0 1 .335.622l-3 10a.5.5 0 0 1-.957-.287l3-10a.5.5 0 0 1 .622-.335M4.146 5.147a.5.5 0 0 1 .707.707L2.707 8.001l2.146 2.146a.5.5 0 0 1-.707.707l-2.5-2.5a.5.5 0 0 1 0-.707zm7 0a.5.5 0 0 1 .707 0l2.5 2.5a.5.5 0 0 1 0 .707l-2.5 2.5a.5.5 0 0 1-.707-.707l2.147-2.146-2.147-2.147a.5.5 0 0 1 0-.707",clipRule:"evenodd"})})})},429315:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1.982l.945 2.31a.5.5 0 0 1-.926.38l-1.1-2.69H8.063l-1.1 2.69a.5.5 0 1 1-.926-.379L6.982 17H5a2 2 0 0 1-2-2zm4.7 3.2.315-1.26c.126-.505.844-.505.97 0L9.3 10.2l1.26.315c.505.126.505.844 0 .97L9.3 11.8l-.315 1.26c-.126.505-.844.505-.97 0L7.7 11.8l-1.26-.315c-.505-.126-.505-.844 0-.97zM12.5 9a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})})},902208:(e,t,n)=>{n.d(t,{s:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M8 9.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zm9 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zm-8-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m.5 8.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})})},139783:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M19 6.5a.5.5 0 0 0-1 0v10a.5.5 0 0 0 1 0zm-13 0a.5.5 0 0 0-1 0v10a.5.5 0 0 0 1 0zm10.854 4.646a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708L15.293 12H8.707l1.647 1.646a.5.5 0 0 1-.708.708l-2.5-2.5a.5.5 0 0 1 0-.708l2.5-2.5a.5.5 0 0 1 .708.708L8.707 11h6.586l-1.647-1.646a.5.5 0 0 1 .708-.708z",clipRule:"evenodd"})})})},362330:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"m18.015 5.441-.315 1.26-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L19.3 8.3l1.26-.315c.505-.126.505-.844 0-.97L19.3 6.7l-.315-1.26c-.126-.505-.844-.505-.97 0M8.5 10.001a.5.5 0 0 0 0 1h7a.5.5 0 1 0 0-1zM8 13.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5M14.5 7a.5.5 0 0 1 0 1h-7A1.5 1.5 0 0 0 6 9.5v6A1.5 1.5 0 0 0 7.5 17h9a1.5 1.5 0 0 0 1.5-1.5v-4a.5.5 0 0 1 1 0v4a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 5 15.5v-6A2.5 2.5 0 0 1 7.5 7z",clipRule:"evenodd"})})})},998367:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsxs)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:[(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"m9.4 16.5.28-1.12c.083-.333.557-.333.64 0l.28 1.12 1.12.28c.333.083.333.557 0 .64l-1.12.28-.28 1.12c-.083.333-.557.333-.64 0L9.4 17.7l-1.12-.28c-.333-.083-.333-.557 0-.64z"}),(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M14.777 6.304a2.177 2.177 0 1 1 1.947 3.894l-3.606 1.803 3.606 1.803a2.177 2.177 0 0 1-1.948 3.894l-.243-.122a2.45 2.45 0 0 1-1.329-2.537l.25-1.753-7.678-3.838a.5.5 0 0 1 .448-.895L12 11.441l1.453-.725-.249-1.752a2.45 2.45 0 0 1 1.33-2.537zm-.584 8.876a1.45 1.45 0 0 0 .787 1.501l.244.122a1.177 1.177 0 0 0 1.052-2.105l-1.88-.94zm-4.417-2.626a.5.5 0 0 1 .448.894l-4 2a.5.5 0 0 1-.448-.895zm7.027-4.83a1.176 1.176 0 0 0-1.578-.525l-.245.122a1.45 1.45 0 0 0-.787 1.501l.204 1.422 1.88-.94a1.18 1.18 0 0 0 .526-1.58",clipRule:"evenodd"})]})})},35940:(e,t,n)=>{n.d(t,{Q:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5m-9-1A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6z",clipRule:"evenodd"})})})},43612:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(105652),r=n(239976);let a=(0,i.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M15 11a.5.5 0 0 1 .462.308l1.666 4 .834 2a.5.5 0 0 1-.924.384L16.333 16h-3.166l-.705 1.692a.5.5 0 0 1-.924-.384l.834-2 1.666-4 .034-.067A.5.5 0 0 1 14.5 11zM9.5 5a.5.5 0 0 1 .5.5V7h3.5a.5.5 0 0 1 0 1h-1.282l-.054.16c-.503 1.488-1.087 2.538-2.031 3.706l1.527 1.91a.5.5 0 0 1-.781.623l-1.407-1.758c-.69.77-1.538 1.631-2.618 2.713a.5.5 0 0 1-.708-.707c1.147-1.148 2.012-2.03 2.692-2.8L7.21 9.814a.5.5 0 0 1 .781-.626l1.501 1.878c.773-.986 1.249-1.867 1.668-3.065H5.5a.5.5 0 0 1 0-1H9V5.5a.5.5 0 0 1 .5-.5m4.083 10h2.334l-1.167-2.8zm3.432-8.559c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L16.7 9.3l-1.26-.315c-.505-.126-.505-.844 0-.97L16.7 7.7z"})})})},244917:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(159773),r=n(105652),a=n(239976);let s=(0,r.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M12.354 6.146a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L11.5 7.707V13.5a.5.5 0 0 0 1 0V7.707l2.146 2.147a.5.5 0 0 0 .708-.708zM7 13.5a.5.5 0 0 0-1 0v3A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-3a.5.5 0 0 0-1 0v3a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.854 6.146a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L11 7.707V13.5a.5.5 0 0 0 1 0V7.707l2.146 2.147a.5.5 0 0 0 .708-.708zM7 13.5a.5.5 0 0 0-1 0v3A1.5 1.5 0 0 0 7.5 18h8a1.5 1.5 0 0 0 1.5-1.5v-3a.5.5 0 0 0-1 0v3a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})})},336976:(e,t,n)=>{n.d(t,{G3:()=>l,G$:()=>y,N5:()=>eG,Me:()=>k});let i={ELEMENT_NODE:1,TEXT_NODE:3},r=0,a=new Set(["text","search","tel","url","email","password","number"]),s=[{style:"borderTopStyle",width:"borderTopWidth",color:"borderTopColor"},{style:"borderRightStyle",width:"borderRightWidth",color:"borderRightColor"},{style:"borderBottomStyle",width:"borderBottomWidth",color:"borderBottomColor"},{style:"borderLeftStyle",width:"borderLeftWidth",color:"borderLeftColor"}],o={alignContent:"normal",alignItems:"normal",alignSelf:"auto",backgroundAttachment:"scroll",backgroundBlendMode:"normal",backgroundClip:"border-box",backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",backgroundOrigin:"padding-box",backgroundPositionX:"0%",backgroundPositionY:"0%",backgroundRepeat:"repeat",backgroundSize:"auto",borderBottomColor:"rgb(0, 0, 0)",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomStyle:"none",borderBottomWidth:"0px",borderCollapse:"separate",borderImageOutset:"0",borderImageRepeat:"stretch",borderImageSlice:"100%",borderImageSource:"none",borderImageWidth:"1",borderLeftColor:"rgb(0, 0, 0)",borderLeftStyle:"none",borderLeftWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderRightStyle:"none",borderRightWidth:"0px",borderSpacing:"0px",borderTopColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopStyle:"none",borderTopWidth:"0px",bottom:"auto",boxShadow:"none",boxSizing:"content-box",clip:"auto",color:"rgb(0, 0, 0)",colorScheme:"normal",columnCount:"auto",columnFill:"balance",columnGap:"normal",columnRuleColor:"rgb(0, 0, 0)",columnRuleStyle:"none",columnRuleWidth:"0px",columnSpan:"none",columnWidth:"auto",contain:"none",containerType:"normal",contentVisibility:"visible",display:"",filter:"none",flexBasis:"auto",flexDirection:"row",flexGrow:"0",flexShrink:"1",flexWrap:"nowrap",fontFamily:"Times",fontFeatureSettings:"normal",fontKerning:"auto",fontOpticalSizing:"auto",fontPalette:"normal",fontSize:"16px",fontSizeAdjust:"none",fontStretch:"100%",fontStyle:"normal",fontWeight:"400",gridAutoColumns:"auto",gridAutoFlow:"row",gridAutoRows:"auto",gridColumnEnd:"auto",gridColumnStart:"auto",gridRowEnd:"auto",gridRowStart:"auto",gridTemplateAreas:"none",gridTemplateColumns:"none",gridTemplateRows:"none",height:"auto",isolation:"auto",justifyItems:"normal",justifySelf:"auto",justifyContent:"normal",left:"auto",letterSpacing:"normal",lineBreak:"auto",lineHeight:"normal",listStyleImage:"none",listStylePosition:"outside",listStyleType:"disc",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",objectFit:"fill",opacity:"1",overflow:"visible",overflowX:"visible",overflowY:"visible",position:"static",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",rowGap:"normal",strokeDasharray:"none",strokeDashoffset:"0px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeOpacity:"1",strokeWidth:"1px",textAlign:"start",textDecorationColor:"rgb(0, 0, 0)",textDecorationLine:"none",textDecorationStyle:"solid",textIndent:"0px",textShadow:"none",textTransform:"none",top:"auto",transform:"none",transformOrigin:"auto",transitionProperty:"all",visibility:"visible",whiteSpace:"normal",width:"auto",willChange:"auto",zIndex:"auto",rotate:"none"};var l,d=n(798913),c=n(393012),u=n(836848);let m=new Set(["HTML","BODY","DIV","SPAN","P","H1","H2","H3","H4","H5","H6","UL","OL","MAIN","ARTICLE","ASIDE","FOOTER","HEADER","NAV","SECTION","FORM"]);function p(e){if(!m.has(e.tag))return{visibleWithoutCSS:!0};let t=new Set;for(let n in e.styles){let i=e.styles[n];(function(e,t){switch(e){case"backgroundImage":case"boxShadow":case"opacity":case"backgroundClip":case"transform":case"rotate":case"backgroundColor":case"borderBottomWidth":case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"borderImageSource":case"borderBottomLeftRadius":case"borderBottomRightRadius":case"borderTopLeftRadius":case"borderTopRightRadius":case"filter":case"visibility":return!0;case"display":return"none"===t;case"overflow":case"overflowX":case"overflowY":return(t??"visible")!=="visible";case"clip":case"alignContent":case"alignItems":case"alignSelf":case"backgroundAttachment":case"backgroundBlendMode":case"backgroundOrigin":case"backgroundPositionX":case"backgroundPositionY":case"backgroundRepeat":case"backgroundSize":case"borderBottomColor":case"borderBottomStyle":case"borderCollapse":case"borderImageOutset":case"borderImageRepeat":case"borderImageSlice":case"borderImageWidth":case"borderLeftColor":case"borderLeftStyle":case"borderRightColor":case"borderRightStyle":case"borderSpacing":case"borderTopColor":case"borderTopStyle":case"bottom":case"boxSizing":case"clip":case"color":case"colorScheme":case"columnCount":case"columnFill":case"columnGap":case"columnRuleColor":case"columnRuleStyle":case"columnRuleWidth":case"columnSpan":case"columnWidth":case"contain":case"containerType":case"contentVisibility":case"flexBasis":case"flexDirection":case"flexGrow":case"flexShrink":case"flexWrap":case"fontFamily":case"fontFeatureSettings":case"fontKerning":case"fontOpticalSizing":case"fontPalette":case"fontSize":case"fontSizeAdjust":case"fontStretch":case"fontStyle":case"fontWeight":case"gridAutoColumns":case"gridAutoFlow":case"gridAutoRows":case"gridColumnEnd":case"gridColumnStart":case"gridRowEnd":case"gridRowStart":case"gridTemplateAreas":case"gridTemplateColumns":case"gridTemplateRows":case"height":case"isolation":case"justifyItems":case"justifySelf":case"justifyContent":case"left":case"letterSpacing":case"lineBreak":case"lineHeight":case"listStyleImage":case"listStylePosition":case"listStyleType":case"marginBottom":case"marginLeft":case"marginRight":case"marginTop":case"maxHeight":case"maxWidth":case"minHeight":case"minWidth":case"objectFit":case"position":case"paddingBottom":case"paddingLeft":case"paddingRight":case"paddingTop":case"right":case"rowGap":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"textAlign":case"textDecorationColor":case"textDecorationLine":case"textDecorationStyle":case"textIndent":case"textShadow":case"textTransform":case"top":case"transformOrigin":case"transitionProperty":case"whiteSpace":case"width":case"willChange":case"zIndex":return!1;default:(0,u.xb)(e)}})(n,i)&&t.add(n)}return{styles:t,visibleWithoutCSS:!1}}let h=new Set(["BR","NOSCRIPT","HEAD","STYLE","SCRIPT"]);function f(e){return"DIV"!==e&&"SPAN"!==e}let g=null;function x(e,t){g&&g(e,t)}function _(e,t){throw x("html2design.unsupported_property_value",{property:e,value:t}),Error(`Unreachable property value: ${e} = ${t}`)}function y(e){let t=new Set;return(...n)=>{let i=`${n[0]}:${JSON.stringify(n[1])}`;t.has(i)||(t.add(i),e(...n))}}var b=n(854225),v=n(424364),C=n(522645),E=n(545593);let w={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function k(e,t){if(!e)return null;if("string"!=typeof e)return e;let n=t??1,i=function(e,t=1){let n=RegExp("color\\(\\s*display-p3\\s*(?<red>[-+]?[0-9]*\\.?[0-9]+)\\s+(?<green>[-+]?[0-9]*\\.?[0-9]+)\\s+(?<blue>[-+]?[0-9]*\\.?[0-9]+)\\s*(?:\\/\\s*(?<alpha>[-+]?[0-9]*\\.?[0-9]+%?))?\\s*\\)"),i=e.match(n);if(i&&i.groups&&"red"in i.groups&&"green"in i.groups&&"blue"in i.groups){let{red:e,green:n,blue:r,alpha:a}=i.groups;return{r:parseFloat(e),g:parseFloat(n),b:parseFloat(r),a:a?parseFloat(a):t}}return null}(e,n)??function(e,t=1){let n=w[e.toLowerCase()];return n?T(n,!1,t):null}(e,n)??function(e,t=1){let n;return(n=L.exec(e=e.trim()))?S(M(n[1]),M(n[2]),M(n[3]),null==n[4]?t:P(n[4])):(n=F.exec(e))?S(N(n[1]),N(n[2]),N(n[3]),null==n[4]?t:P(n[4])):(n=B.exec(e))?function(e,t,n,i){if(0===t)return S(n,n,n,i);let r=n<.5?n*(1+t):n+t-n*t,a=2*n-r,s=[0,0,0];for(let t=0;t<3;++t){let n=e+-(1/3*(t-1));n<0&&++n,n>1&&--n,6*n<1?s[t]=a+(r-a)*6*n:2*n<1?s[t]=r:3*n<2?s[t]=a+(r-a)*(2/3-n)*6:s[t]=a}return S(s[0],s[1],s[2],i)}(O(n[1]),M(n[2]),M(n[3]),null==n[4]?t:P(n[4])):(n=U.exec(e))?function(e,t,n,i){let r=(100*e+16)/116,a=t/500+r,s=r-n/200,o=e=>{let t=e**3;return t>j?t:(e-16/116)/7.787};r=o(r);let l=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=l(3.2404542*(a=95.047*o(a)/100)+-1.5371385*r+-.4985314*(s=108.883*o(s)/100)),c=l(-.969266*a+1.8760108*r+.041556*s),u=l(.0556434*a+-.2040259*r+1.0572252*s);return S(D(d),D(c),D(u),i)}(M(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?t:P(n[4])):(n=V.exec(e))?(0,C.I0)({l:R(n[1],.01),c:R(n[2],.004),h_turn:O(n[3]),a:null==n[4]?t:P(n[4])}):(n=H.exec(e))?(0,C.oq)({l:R(n[1],.01),ax:R(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?t:P(n[4])}):null}(e,n)??T(e,null!=t,n);return null==i&&x("html2design.unparseable_value",{valueType:"color",value:e}),i}function T(e,t=!1,n=1){let i=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!i)return null;let r=i[1];if(r.length>=8&&t)return S(A(r.substring(0,2)),A(r.substring(2,4)),A(r.substring(4,6)),A(r.substring(6,8)));if(7===r.length&&t)return S(A(r.substring(0,2)),A(r.substring(2,4)),A(r.substring(4,6)),I(r[6]));if(r.length>=6)return S(A(r.substring(0,2)),A(r.substring(2,4)),A(r.substring(4,6)),n);if(5===r.length&&t)return S(I(r[0]),I(r[1]),I(r[2]),A(r.substring(3,5)));if(4===r.length&&t)return S(I(r[0]),I(r[1]),I(r[2]),I(r[3]));if(r.length>=3)return S(I(r[0]),I(r[1]),I(r[2]),n);if(2===r.length){let e=A(r);return S(e,e,e,n)}else if(1===r.length){let e=I(r);return S(e,e,e,n)}return null}let j=(6/29)**3;function S(e,t,n,i=1){return isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)?null:{r:e,g:t,b:n,a:i}}function I(e){return A(`${e}${e}`)}function A(e){return D(parseInt(e,16)/255)}function N(e){return D(parseFloat(e)/255)}function M(e){return D(.01*parseFloat(e))}function R(e,t){return e.endsWith("%")?D(parseFloat(e)*t):parseFloat(e)}function P(e){return e?e.includes("%")?M(e):D(parseFloat(e)):1}function O(e){let t=parseFloat(e),n=0;return n=e.includes("grad")?.9*t:e.includes("rad")?180*t/Math.PI:e.includes("turn")?360*t:t,(n=(0,v._g)(n,360))/360}function D(e){return(0,v.qE)(e,0,1)}let L=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,F=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,B=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,U=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,V=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+))?\s*\)?\s*;?$/,H=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,z=e=>{let t=k(e);if(null==t)return null;let{r:n,g:i,b:r,a}=t;return{type:"SOLID",color:{r:n,g:i,b:r,a:1},opacity:a}},G=e=>{try{let t=(0,E.Ay)(e).rgba();return{type:"SOLID",color:{r:t[0]/255,g:t[1]/255,b:t[2]/255,a:t[3]},opacity:t[3]}}catch{return x("html2design.unparseable_value",{valueType:"color",value:e}),null}},K=(e,{useChromaJs:t=!1}={})=>t?G(e):z(e),W=e=>{if("string"!=typeof e)return null;let t=e.match(/^(-?\d*\.?\d+)(e[\-\+]?\d+)?(px|%)?$/);return t?{value:parseFloat(t[1]+(t[2]||"")),unit:"%"===t[3]?"PERCENT":"PIXELS"}:(x("html2design.unparseable_value",{valueType:"length",value:e}),null)},q=e=>{let t=W(e);return t&&"PIXELS"===t.unit?t.value:null},X=(e,t)=>{let n=W(e);return n&&"PERCENT"===n.unit?n.value*t.axisSizeInPixels/100:null};function Y(e,t=","){let n=[],i="",r=0;for(let a=0;a<e.length;a++){let s=e[a];"("===s?(r++,i+=s):")"===s?(r--,i+=s):s===t&&0===r?(n.push(i),i=""):i+=s}return i&&n.push(i),n}function J(e){if("number"==typeof e)return{units:"RAW",value:e};if(e.match(/^[0-9]+(\.[0-9]+)$/))return{units:"RAW",value:parseFloat(e)};if("auto"===e)return{units:"AUTO"};let t=parseFloat(e);if(isNaN(t)){x("html2design.unparseable_value",{valueType:"length",value:e});return}return e.match(/.*%\w*/)?{units:"PERCENT",value:t}:e.match(/.*px\w*/)?{units:"PIXELS",value:t}:void x("html2design.unparseable_value",{valueType:"length",value:e})}function Z(e){let t=J(e);return t?.units==="PIXELS"?t.value:null}let Q={family:"Arimo",style:"Regular",postscript:"Arimo-Regular"};function $(e,t,n,i=[]){let r=q(t.fontSize??"16px");(0,u.vA)(null!=r,`Expected font size to be parsed: ${t.fontSize}`);let{fontName:a,letterSpacingOffset:s}=er(t,{fontSize:r})??{fontName:Q,letterSpacingOffset:0};(0,u.vA)(null!=a,`Expected font to be parsed: ${t.fontFamily}`),n.fontName=a,n.fontSize=r,n.textCase=function(e){switch(e){case"uppercase":return"UPPER";case"lowercase":return"LOWER";case"capitalize":return"TITLE";case"none":case"-moz-initial":case"inherit":case"initial":return"ORIGINAL";case"revert":case"revert-layer":case"unset":case"full-width":case"full-size-kana":case"math-auto":return x("html2design.unsupported_property_value",{property:"text-transform",value:e}),"ORIGINAL";default:_("text-transform",e)}}(t.textTransform??"none"),n.lineHeight=ee(t.lineHeight??"normal"),n.letterSpacing=function(e,t=0){let n=J(e??"normal");return n?.units==="PIXELS"?{units:"PIXELS",value:t+n.value}:n?.units==="PERCENT"?n:{units:"PIXELS",value:t}}(t.letterSpacing??"0px",s),n.textAlignHorizontal=function(e){switch(e){case"start":case"left":case"-moz-initial":case"inherit":case"initial":case null:case"-webkit-left":return"LEFT";case"end":case"right":case"-webkit-right":return"RIGHT";case"center":case"-webkit-center":return"CENTER";case"justify":return"JUSTIFIED";case"revert":case"revert-layer":case"unset":case"match-parent":case"-webkit-match-parent":return x("html2design.unsupported_property_value",{property:"text-align",value:e}),"LEFT";default:_("text-align",e)}}(t.textAlign??"left"),n.textDecoration=function(e){let{textDecorationLine:t="none"}=e;return"underline"===t?"UNDERLINE":"line-through"===t?"STRIKETHROUGH":("none"!=t&&x("html2design.unsupported_property_value",{property:"text-decoration",value:t}),"NONE")}(t),n.fills=[...i,K(t.color??"rgb(0, 0, 0)")],n.characters=function(e,t){let n=e.whiteSpace??"normal";switch(n){case void 0:case"normal":case"nowrap":case"initial":case"-moz-initial":return t.replace(/\s+/g," ").trim();case"pre":case"pre-wrap":case"-moz-pre-wrap":case"break-spaces":return t;case"pre-line":return t.replace(/[^\S\n]+/g," ").replace(/^[ ]+|[ ]+$/gm,"");case"inherit":case"revert":case"revert-layer":case"unset":case"balance":case"balance":case"collapse":case"discard":case"discard-after":case"discard-before":case"discard-inner":case"none":case"preserve":case"preserve-breaks":case"preserve-spaces":case"pretty":case"stable":case"wrap":return x("html2design.unsupported_property_value",{property:"white-space",value:n}),t;default:_("white-space",n)}}(t,e)}function ee(e){let t=J(e??"");return null==t||"AUTO"===t.units||"RAW"===t.units?{units:"PERCENT",value:100}:t}let et={Arial:"Arimo","Arial Rounded MT":"Arimo","SF Pro":"Arimo","SF Pro Rounded":"Arimo",Helvetica:"Arimo","Segoe UI Variable":"Arimo",Times:"Tinos","New York":"Tinos","Times New Roman":"Tinos",Consolas:"Cousine","SF Mono":"Cousine",Menlo:"Cousine",serif:"Tinos","ui-serif":"Tinos","sans-serif":"Arimo","ui-sans-serif":"Arimo","ui-rounded":"Arimo",monospace:"Cousine","ui-monospace":"Cousine","system-ui":"Arimo"},en=navigator.userAgent.includes("Macintosh"),ei={macos:{serif:"Times","sans-serif":"Helvetica",monospace:"Menlo","system-ui":"Inter","ui-serif":"New York","ui-sans-serif":"Inter","ui-monospace":"Inter","ui-rounded":"Inter"},other:{serif:"Times New Roman","sans-serif":"Arial",monospace:"Consolas","system-ui":"Segoe UI Variable","ui-serif":"Times New Roman","ui-sans-serif":"Arial","ui-monospace":"Consolas","ui-rounded":"Arial Rounded MT"}};function er(e,t,n=en?"macos":"other"){let i=((e.fontFamily??"Times")||"").split(/,(?=(?:[^"']*["'][^"']*["'])*[^"']*$)/).map(e=>e.trim().replace(/^["']|["']$/g,"")).filter(Boolean);for(let r of i){let i=null,a=parseInt(e.fontWeight??"400"),s="italic"==e.fontStyle,o=r.includes(":")?r.split(":"):null;if(i=(o?(0,c.vt)(o[0],o[1]):null)??(0,c.ye)(r,a,s)??(0,c.ye)(ei[n][r],a,s)??(0,c.ye)(et[r],a,s))return{fontName:{...i,postscript:i.family},letterSpacingOffset:eo(r,i.family,t.fontSize,n)}}return x("html2design.unsupported_property_value",{property:"font-family",value:i.join(", ")}),null}async function ea(e){let t={};!function e(n){if(n.styles?.fontFamily){var r,a;t[r=n.styles.fontFamily]??(t[r]={});let e=n.styles.fontWeight??"400",i="italic"===n.styles.fontStyle;(a=t[n.styles.fontFamily])[e]??(a[e]=i?"italic":null),"italic"===t[n.styles.fontFamily][e]&&i&&(t[n.styles.fontFamily][e]="both")}for(let t of n.childNodes??[])t.nodeType===i.ELEMENT_NODE&&e(t)}(e.root);let n=[Q];for(let[e,i]of Object.entries(t))for(let[t,r]of Object.entries(i)){{let i=er({fontFamily:e,fontWeight:t,fontStyle:"italic"},{fontSize:16});i&&n.push({family:i.fontName.family,style:i.fontName.style})}if(null===r||"both"===r){let i=er({fontFamily:e,fontWeight:t,fontStyle:"normal"},{fontSize:16});i&&n.push({family:i.fontName.family,style:i.fontName.style})}}await Promise.allSettled(n.map(c.EV))}let es=[{size:6,value:82},{size:9,value:38},{size:10,value:24},{size:11,value:12},{size:12,value:0},{size:13,value:-12},{size:14,value:-22},{size:15,value:-32},{size:16,value:-40},{size:17,value:-52},{size:20,value:-46},{size:22,value:-24},{size:24,value:6},{size:28,value:28},{size:32,value:26},{size:36,value:21},{size:50,value:14},{size:64,value:7},{size:80,value:0},{size:100,value:0},{size:138,value:0}],eo=(e,t,n,i)=>{if("macos"===i&&("system-ui"===e||"ui-sans-serif"===e)){var r,a,s;if(n<=es[0].size)return es[0].value/2048*n;if(n>es.at(-1).size)return 0;let e=es.findLast(e=>e.size<=n);if(null==e)return 0;if(e.size===n)return e.value/2048*n;let t=es.find(t=>t.size>e.size);return(0,u.vA)(null!=t,`Expected next trak for fontSize: ${n}`),r=e.size,a=e.value,s=t.size,(a+(n-r)*(t.value-a)/(s-r))/2048*n}return 0};function el(e){switch(e){case"flex-start":case"normal":case"stretch":return"MIN";case"center":return"CENTER";case"flex-end":return"MAX";default:return x("html2design.unsupported_property_value",{property:"align-items",value:e}),null}}function ed(e){switch(e){case"column":case"column-reverse":return"VERTICAL";case"row":case"row-reverse":return"HORIZONTAL";default:return x("html2design.unsupported_property_value",{property:"flex-direction",value:e}),null}}function ec(e,t){return[...e].sort((e,n)=>"HORIZONTAL"===t?e.element.rect.x-n.element.rect.x||e.element.rect.y-n.element.rect.y:e.element.rect.y-n.element.rect.y||e.element.rect.x-n.element.rect.x)}function eu(e,t,n=1){let i=(e,t,n)=>"HORIZONTAL"===n?t.rect.x-e.rect.x-e.rect.width:t.rect.y-e.rect.y-e.rect.height,r=e.length>1?i(e[0].element,e[1].element,t):0;if(r<0)throw Error("Children are overlapping");if(e.length>2){for(let a=2;a<e.length-1;a++)if(Math.abs(r-i(e[a-1].element,e[a].element,t))>n)throw Error("Gaps between children are not consistent")}return r}function em(e,t,n,i=2){let r=(e,t)=>Math.abs(e-t)<i;switch(t){case"HORIZONTAL":switch(n){case"MIN":return e.every(({element:t})=>r(t.rect.y,e[0].node.y));case"MAX":return e.every(({element:t})=>r(t.rect.y+t.rect.height,e[0].element.rect.y+e[0].element.rect.height));case"CENTER":return e.every(({element:t})=>r(t.rect.y+t.rect.height/2,e[0].element.rect.y+e[0].element.rect.height/2));case"BASELINE":return!1;default:(0,u.xb)(n)}case"VERTICAL":switch(n){case"MIN":return e.every(({element:t})=>r(t.rect.x,e[0].element.rect.x));case"MAX":return e.every(({element:t})=>r(t.rect.x+t.rect.width,e[0].element.rect.x+e[0].element.rect.width));case"CENTER":return e.every(({element:t})=>r(t.rect.x+t.rect.width/2,e[0].element.rect.x+e[0].element.rect.width/2));case"BASELINE":return!1;default:(0,u.xb)(n)}default:(0,u.xb)(t)}}function ep(e,t){let{flexDirection:n="row",justifyContent:i="flex-start",alignItems:r="flex-start",rowGap:a="0px",columnGap:s="0px"}=t.styles,o=function(e){switch(e){case"flex-start":return"MIN";case"flex-end":return"MAX";case"center":return"CENTER";case"space-between":return"SPACE_BETWEEN";case"space-around":return"SPACE_EVENLY";default:return x("html2design.unsupported_property_value",{property:"justify-content",value:e}),null}}(i)??"MIN",l=el(r)??"MIN",d=ed(n);d&&(e.stackPrimarySizing="FIXED",e.stackCounterSizing="FIXED",e.stackMode=d,e.stackPrimaryAlignItems=o,("column-reverse"===n||"row-reverse"===n)&&(e.stackPrimaryAlignItems=function(e){switch(e){case"MIN":return"MAX";case"MAX":return"MIN";default:return e}}(e.stackPrimaryAlignItems)),e.stackCounterAlignItems=l,e.stackSpacing=q("HORIZONTAL"===e.stackMode?s:a)??0,e.bordersTakeSpace=!0)}function eh(e){if(!e)return null;let t=e=>{let t=e.match(/^minmax\(\s*0(?:px|%)?\s*,\s*(.+)\s*\)$/i);t&&2==t.length&&(e=t[1]);let n=e.match(/^(\d+)fr$/i);return n&&2===n.length?{value:parseInt(n[1]),unit:"FRACTIONAL"}:W(e)};return Y(e," ").map(e=>e.trim()).filter(e=>!(!e||e.startsWith("[")&&e.endsWith("]"))).flatMap(e=>{let n=e.match(/^repeat\(\s*(\d+)\s*,\s*(.+)\s*\)$/i);if(n&&3===n.length){let e=t(n[2]);return Array(parseInt(n[1])).fill(e)}return t(e)})}function ef(e,t){let{paddingLeft:n,paddingRight:i,paddingTop:r,paddingBottom:a}=t.styles;e.stackLeftPadding=q(n)??0,e.stackRightPadding=q(i)??0,e.stackTopPadding=q(r)??0,e.stackBottomPadding=q(a)??0}function eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.START="start",e.SERIALIZE_HTML="serialize_html",e.OPTIMISTIC_FONT_LOADING="optimistic_font_loading",e.PREPROCESS_DOCUMENT="preprocess_document",e.DECODE_ASSETS="image_loading",e.VISIT_ELEMENTS="visit_elements",e.FINISH_FONT_LOADING="finish_font_loading",e.IMAGE_UPLOAD_COMPLETE="image_upload_complete",e.ADD_TO_CANVAS="add_to_canvas",e.COPY_TO_CLIPBOARD="copy_to_clipboard",e.END_SUCCESS="end_success",e.END_FAILURE="end_failure",e.END_ABORTED="end_aborted"}(l||(l={}));class ex{constructor(){eg(this,"description","Input values or placeholders are rendered as text nodes."),eg(this,"onPostVisit",(e,t,n,r)=>{if(t.nodeType!==i.ELEMENT_NODE)return;let s="INPUT"===t.tag&&a.has(t.attributes.type),o="TEXTAREA"===t.tag;if(!s&&!o)return;let l=t.attributes.value||t.attributes.placeholder;if(!l)return;let d=e.scene.createNode("TEXT",{tracking:e.tracking});return $(l,t.attributes.placeholder&&t.pseudoElementStyles?.placeholder?t.pseudoElementStyles.placeholder:t.styles,d),d.x=t.rect.x,d.y=t.rect.y,d.resizeWithConstraints(t.rect.width,t.rect.height),d.textAutoResize="WIDTH_AND_HEIGHT",d.update(),n.stackPrimarySizing="FIXED",n.stackCounterSizing="FIXED",n.stackMode="HORIZONTAL",n.stackPrimaryAlignItems="MIN",n.stackCounterAlignItems="INPUT"===t.tag?"CENTER":"MIN",ef(n,t),n.appendChild(d),[{element:t,node:n}]})}}class e_{onPostVisit(e,t,n,r){let a;if(!(t.nodeType===i.ELEMENT_NODE&&1===r.length&&r[0].element.nodeType===i.TEXT_NODE))return;let s=r[0].element;if((0,u.vA)(s.nodeType===i.TEXT_NODE),"flex"===t.styles.display)a="FLEXBOX";else{if(1!==s.lineCount||s.rect.y-t.rect.y!==n.borderTopWeight+(q(t.styles.paddingTop)??0))return;a="SINGLE_LINE_TOP"}let o=r[0].node;return ep(n,t),ef(n,t),o.textAutoResize="WIDTH_AND_HEIGHT",n.appendChild(o),"SINGLE_LINE_TOP"===a&&(o.stackChildPrimaryGrow=0,o.stackHorizontalLayoutSize=b.mKm.HUG_CONTENT,1.05*o.size.x<=n.size.x-n.stackLeftPadding-n.stackRightPadding-(n.bordersTakeSpace?n.borderLeftWeight+n.borderRightWeight:0)&&(o.stackHorizontalLayoutSize=b.mKm.FILL_CONTAINER)),[{element:t,node:n}]}constructor(){eg(this,"description","When we see a single text child in an element, we use auto-layout to position the text node within the parent element, translating flexbox and text-align properties to the corresponding auto-layout properties.")}}class ey{onPostVisit(e,t,n,r){if(t.nodeType!==i.ELEMENT_NODE)return;let{display:a,flexWrap:s="nowrap",flexDirection:o="row",alignItems:l="normal"}=t.styles;if("flex"!==a||"nowrap"!==s)return;let d=ed(o);if(!d||r.some(({element:e})=>{if(e.nodeType!==i.ELEMENT_NODE)return!0;let{position:t="static",alignSelf:n="auto"}=e.styles;return"static"!==t||"auto"!==n&&"stretch"!==n&&"normal"!==n}))return;let c=ec(r,d),m=0;try{m=eu(c,d)}catch{return}if(!em(c,d,el(l)??"MIN"))return;ep(n,t),n.stackSpacing=m;let p=Math.min(...r.map(e=>e.element.rect.x))-t.rect.x-n.borderLeftWeight,h=t.rect.x+t.rect.width-Math.max(...r.map(e=>e.element.rect.x+e.element.rect.width))-n.borderRightWeight,f=Math.min(...r.map(e=>e.element.rect.y))-t.rect.y-n.borderTopWeight,g=t.rect.y+t.rect.height-Math.max(...r.map(e=>e.element.rect.y+e.element.rect.height))-n.borderBottomWeight;if("CENTER"===n.stackPrimaryAlignItems)switch(d){case"HORIZONTAL":p>h?(p-=h,h=0):(h-=p,p=0);break;case"VERTICAL":f>g?(f-=g,g=0):(g-=f,f=0);break;default:(0,u.xb)(d)}let _=!1,y=!1;for(let e of c){n.appendChild(e.node);let{flexGrow:t="0",height:i,width:r,alignSelf:a="auto"}=e.element.styles;"0"!==t&&("1"!==t&&x("html2design.unsupported_property_value",{property:"flex-grow",value:t}),e.node.stackChildPrimaryGrow=1,_=!0);let s="stretch"===a||"normal"===a,o="stretch"===l||"normal"===l;null==("HORIZONTAL"===d?i:r)&&(s||"auto"===l&&o)&&(e.node.stackChildAlignSelf="STRETCH",y=!0)}if(!_&&"MIN"===n.stackPrimaryAlignItems&&("HORIZONTAL"===d?p===h:f===g)){let e=null;for(let t of c)(!e||("HORIZONTAL"===d?t.element.rect.width>=e?.element.rect.width:t.element.rect.height>=e?.element.rect.height))&&(e=t);e&&(e.node.stackChildPrimaryGrow=1,_=!0)}switch(d){case"HORIZONTAL":_||("MAX"===n.stackPrimaryAlignItems&&(p=0),"MIN"!==n.stackPrimaryAlignItems||(h=0)),y||("MIN"!==n.stackCounterAlignItems&&(f=0),"MAX"===n.stackCounterAlignItems||(g=0));break;case"VERTICAL":y||("MIN"!==n.stackCounterAlignItems&&(p=0),"MAX"===n.stackCounterAlignItems||(h=0)),_||("MAX"===n.stackCounterAlignItems&&(f=0),"MIN"!==n.stackCounterAlignItems||(g=0));break;default:(0,u.xb)(d)}return n.stackRightPadding=h,n.stackLeftPadding=p,n.stackTopPadding=f,n.stackBottomPadding=g,[{element:t,node:n}]}constructor(){eg(this,"description","Flexbox post-visit strategy, converting flexbox elements to stacks.")}}class eb{onPostVisit(e,t,n,r){if(t.nodeType!==i.ELEMENT_NODE||(t.styles.display??"block")!=="block"||0===r.length||r.some(({element:e})=>e.nodeType!==i.ELEMENT_NODE)||!em(r,"VERTICAL","MIN")||!em(r,"VERTICAL","MAX"))return;let a=ec(r,"VERTICAL"),s=0;try{s=eu(a,"VERTICAL")}catch{return}for(let e of(n.stackMode="VERTICAL",n.stackPrimarySizing="FIXED",n.stackCounterSizing="FIXED",n.stackPrimaryAlignItems="MIN",n.stackSpacing=s,n.bordersTakeSpace=!1,n.stackLeftPadding=r[0].element.rect.x-t.rect.x,n.stackTopPadding=a[0].element.rect.y-t.rect.y,n.stackRightPadding=t.rect.x+t.rect.width-r[0].element.rect.x-r[0].element.rect.width,a))e.node.stackChildAlignSelf="STRETCH",n.appendChild(e.node);return[{element:t,node:n}]}constructor(){eg(this,"description","Full width post-visit strategy, converting full width elements to stacks.")}}class ev{constructor(){eg(this,"description","Apply auto-layout grid if CSS grid is used"),eg(this,"onPostVisit",(e,t,n,r)=>{if(t.nodeType!==i.ELEMENT_NODE||r.length<1||r.some(({element:e})=>e.nodeType!==i.ELEMENT_NODE))return;let{display:a,gridAutoFlow:s="row",gridTemplateAreas:o="none",gridAutoColumns:l="auto",gridTemplateRows:d="none",gridTemplateColumns:c="none",rowGap:u="0px",columnGap:m="0px"}=t.styles,p=q(u),h=q(m);if("grid"!==a||"row"!==s||"none"===c||"none"!==o||"auto"!==l||"none"===d&&"none"===c||null==p||null==h)return;let f=eh(c),g=eh(d);if(!f||!g||f.some(e=>"PIXELS"!==e.unit)||g.some(e=>"PIXELS"!==e.unit))return;let x=f.length,_=g?g.length:Math.ceil(r.length/f.length),y=e=>e%x,b=e=>Math.floor(e/x),v=ec(r,"VERTICAL"),C=v[0].element.rect.x-t.rect.x,E=v[0].element.rect.y-t.rect.y,w=t.rect.x+n.borderRightWeight+t.rect.width-Math.max(...v.map(({element:{rect:e}})=>e.x+e.width))-n.borderRightWeight,k=t.rect.y+n.borderBottomWeight+t.rect.height-Math.max(...v.map(({element:{rect:e}})=>e.y+e.height))-n.borderBottomWeight;for(let e=0;e<v.length;e++){let{element:n}=v[e];if(n.rect.width!==f[y(e)].value)return;let i=Math.floor(e/x),r=t.rect.y+E+p*i+g.reduce((e,{value:t},n)=>n<i?e+t:e,0);if(n.rect.y!==r)return;let{gridColumnStart:a="auto",gridRowStart:s="auto",gridColumnEnd:o="auto",gridRowEnd:l="auto"}=t.styles;if("auto"!==a||"auto"!==s||"auto"!==o||"auto"!==l)return}if(n.stackMode="GRID",n.stackPrimarySizing="FIXED",n.stackCounterSizing="FIXED",n.setGridRowCount(_),n.setGridColumnCount(x),n.gridRowGap=p,n.gridColumnGap=h,n.stackTopPadding=E,n.stackLeftPadding=C,n.stackRightPadding=w,n.stackBottomPadding=k,f.some(e=>"PIXELS"===e.unit&&e.value!==f[0].value))for(let e=0;e<f.length-1;e++)n.setGridTrackSize("column",e,f[e].value);if(g.some(e=>"PIXELS"===e.unit&&e.value!==g[0].value))for(let e=0;e<g.length-1;e++)n.setGridTrackSize("row",e,g[e].value);for(let e=0;e<v.length;e++){let{node:t,element:i}=v[e];n.appendChild(t),t.setGridChildPosition(b(e),y(e)),i.rect.width===f[y(e)].value&&(t.stackChildPrimaryGrow=1),g&&i.rect.height!==g[b(e)].value||(t.stackChildAlignSelf="STRETCH")}return[{element:t,node:n}]})}}class eC{onPostVisit(e,t,n,i){for(let{node:e}of i)e.x-=t.rect.x,e.y-=t.rect.y,n.appendChild(e);return[{element:t,node:n}]}constructor(){eg(this,"description","Default post-visit strategy for elements, appending children to the parent node.")}}var eE=n(830309),ew=n(465336),ek=n(466082);function eT(e,t,n){var i,r;let a;let s=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n));a=0===s?t.height:0===o?t.width:t.width*t.height/(t.width*o+t.height*s);let l=e.map(e=>{let t;return e.position?.unit==="PERCENT"?t=e.position.value/100:e.position?.unit==="PIXELS"&&(t=a>0?e.position.value/a:0),{color:k(e.color),position:t}});(i=l[0]).position??(i.position=0),(r=l[l.length-1]).position??(r.position=1);for(let e=0;e<l.length;e++)if(null==l[e].position){let t=e>0?l[e-1].position:0,n=0;for(let t=e;t<l.length&&null==l[t].position;t++)n++;let i=((e+n<l.length?l[e+n].position:1)-t)/(n+1);for(let r=0;r<n;r++)l[e+r].position=t+i*(r+1);e+=n-1}let d=l.map(e=>({color:e.color,colorVar:{value:{colorValue:e.color},dataType:"COLOR",resolvedDataType:"COLOR"},position:e.position}));return{stops:l,stopsVar:d}}function ej(e){let t=e.match(/^to\s+((?:left|right)(?:\s+(?:top|bottom))?|(?:top|bottom)(?:\s+(?:left|right))?)$/);if(!t||2!==t.length)return x("html2design.unsupported_property_value",{property:"background-image",value:`linear-gradient(${e})`}),null;let[,n]=t;switch(n){case"top":return[{x:.5,y:1},{x:.5,y:0}];case"bottom":return[{x:.5,y:0},{x:.5,y:1}];case"left":return[{x:1,y:.5},{x:0,y:.5}];case"right":return[{x:0,y:.5},{x:1,y:.5}];case"left top":case"top left":return[{x:1,y:1},{x:0,y:0}];case"right top":case"top right":return[{x:0,y:1},{x:1,y:0}];case"left bottom":case"bottom left":return[{x:1,y:0},{x:0,y:1}];case"right bottom":case"bottom right":return[{x:0,y:0},{x:1,y:1}];default:return x("html2design.unsupported_property_value",{property:"background-image",value:`linear-gradient(${e})`}),null}}function eS(e,t){return"auto"===e?null:"PERCENT"===e.unit?1/(e.value/100):"PIXELS"===e.unit?t/e.value:void(0,u.xb)(e.unit)}function eI(e,t,n){return null==e?0:"PIXELS"===e.unit?0===e.value&&0===t?0:e.value/t:"PERCENT"===e.unit?(1-n)*(e.value/100):void(0,u.xb)(e.unit)}function eA(e,t){let n=Y(e.substring(t.length+1,e.length-1).trim());if(0===n.length)return{params:"",stops:[]};let i="",r=n,a=n[0].trim();return(/\b(at|from|in|to|circle|ellipse|closest-corner|closest-side|farthest-corner|farthest-side)\b/i.test(a)||/^[+-]?(?:\d+\.?\d*|\.\d+)(?:e[+-]?\d+)?(deg|grad|rad|turn)\b/i.test(a))&&(i=a,r=n.slice(1)),{params:i,stops:r.map(e=>(function(e){let t=Y(e.trim()," ");if(0===t.length)return x("html2design.unparseable_value",{valueType:"color-stop",value:e}),null;let n=W(t[1]);return null==n?{color:t[0]}:{color:t[0],position:n}})(e.trim())).filter(e=>null!=e)}}function eN(e){return null==e?[]:Y(e,",").map(e=>W(e)||(x("html2design.unsupported_property_value",{property:"background-position-x",value:e}),null))}function eM(e,t,n){return q(e)??(t===n?X(e,{axisSizeInPixels:t})??0:0)}function eR(e){let t=e.trim().match(/^([^(]+)\((.*)\)$/);if(!t||3!==t.length)return x("html2design.unsupported_property_value",{property:"filter",value:e}),null;let[,n,i]=t,r=Y(i," ");switch(n){case"blur":{let e=Z(r[0]);if(null==e)return x("html2design.unsupported_property_value",{property:"filter",value:`blur(${r[0]})`}),null;return{type:"FOREGROUND_BLUR",radius:e*=2}}case"drop-shadow":{let[e,t,n,i]=r;return{type:"DROP_SHADOW",color:k(e)??{r:0,g:0,b:0,a:1},offset:{x:Z(t)??0,y:Z(n)??0},radius:(Z(i)??0)*2,spread:0}}default:return x("html2design.unsupported_property_value",{property:"filter",value:e}),null}}let eP={HEADER:"Header",NAV:"Navigation",MAIN:"Main Content",FOOTER:"Footer",ASIDE:"Sidebar",SECTION:"Section",ARTICLE:"Article",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",H5:"Heading 5",H6:"Heading 6",P:"Paragraph",SPAN:"Text",DIV:"Container",BLOCKQUOTE:"Quote",CODE:"Code",PRE:"Code Block",FORM:"Form",INPUT:"Input",TEXTAREA:"Text Area",SELECT:"Dropdown",OPTION:"Option",OPTGROUP:"Option Group",BUTTON:"Button",LABEL:"Label",FIELDSET:"Field Set",LEGEND:"Legend",IMG:"Image",VIDEO:"Video",AUDIO:"Audio",CANVAS:"Canvas",SVG:"Icon",PICTURE:"Picture",SOURCE:"Source",A:"Link",DETAILS:"Details",SUMMARY:"Summary",DIALOG:"Dialog",UL:"List",OL:"Numbered List",LI:"List Item",DL:"Definition List",DT:"Definition Term",DD:"Definition Description",TABLE:"Table",THEAD:"Table Header",TBODY:"Table Body",TFOOT:"Table Footer",TR:"Table Row",TH:"Header Cell",TD:"Table Cell",CAPTION:"Table Caption",COLGROUP:"Column Group",COL:"Column",STRONG:"Bold Text",B:"Bold Text",EM:"Italic Text",I:"Italic Text",U:"Underlined Text",S:"Strikethrough Text",DEL:"Deleted Text",INS:"Inserted Text",MARK:"Highlighted Text",SUB:"Subscript",SUP:"Superscript",HR:"Horizontal Rule",BR:"Line Break"};function eO(e){let[t,n,i,r,a,s]=Y(e.trim()," "),o=k(t);if(null==o)return null;let l=Z(n)??0,d=Z(i)??0,c=Z(r)??0,u=Z(a)??0;return 0===c&&0===u&&0===l&&0===d?null:{type:"inset"===s?"INNER_SHADOW":"DROP_SHADOW",color:o,offset:{x:l,y:d},radius:c,spread:u,showShadowBehindNode:!1}}function eD(e){if(!e||"none"===e)return null;let t=e.trim().match(/^(-?\d*\.?\d+)(deg|rad|turn|grad)?$/i);if(!t)return null;let n=parseFloat(t[1]),i=t[2]?.toLowerCase()||"deg";if(isNaN(n))return null;switch(i){case"deg":return n;case"rad":return 180/Math.PI*n;case"turn":return 360*n;case"grad":return .9*n;default:return null}}function eL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let eF="make_to_design_build_data";class eB{onVisit(e,t,n){if(!n||t.nodeType!==i.TEXT_NODE)return;let r=e.scene.createNode("TEXT",{tracking:e.tracking}),a=function(e,t){let n=e.createNode("TEXT",{tracking:b.HzA.IGNORE});n.leadingTrim="CAP_HEIGHT",n.x=0,n.y=0,$("Hg",t,n),n.lineHeight={units:"PERCENT",value:100},n.update();let i=n.y;n.x=0,n.y=0,n.lineHeight=ee(t.lineHeight??"normal"),n.update(),n.leadingTrim="NONE",n.update();let r=-n.y;return n.removeSelfAndChildren(),r-i}(e.scene,n.styles);return r.x=t.rect.x,r.y=t.rect.y-a,$(t.text,n.styles,r,e.parentBackgroundClipTextFills),r.name=r.characters.slice(0,50)||"Text",r.resizeWithConstraints(Math.ceil(t.rect.width),t.rect.height),1===t.lineCount?r.textAutoResize="WIDTH_AND_HEIGHT":r.textAutoResize="HEIGHT",r.update(),e.attachBuildDataToNodes&&eV(t,r),{node:r}}constructor(){eL(this,"description","Default strategy for text nodes, using fixed width and hugging height.")}}class eU{maybeCreateNodeFromSVG(e,t,n,i){if("SVG"===t.tag&&t.content)return e.createNodeFromSVG(t.content,{tracking:i});if("IMG"===t.tag){let r=n.svgs.get(t.attributes.src);if(r)return e.createNodeFromSVG(r,{tracking:i})}return null}onVisit(e,t,n){if(t.nodeType!==i.ELEMENT_NODE)return;let r=this.maybeCreateNodeFromSVG(e.scene,t,e.assets,e.tracking),a=r??e.scene.createNode("FRAME",{tracking:e.tracking});a.x=t.rect.x,a.y=t.rect.y,r?a.rescale(t.rect.width/a.size.x):a.resizeWithConstraints(t.rect.width,t.rect.height),a.name=function(e,t){if(null!=t&&t.owningReactComponent!=e.owningReactComponent&&e.owningReactComponent)return e.owningReactComponent;if(e.attributes.role){let t=e.attributes.role.toLowerCase(),n={button:"Button",dialog:"Dialog",navigation:"Navigation",banner:"Banner",main:"Main Content",contentinfo:"Footer",complementary:"Sidebar",search:"Search",form:"Form",img:"Image",tab:"Tab",tabpanel:"Tab Panel",tablist:"Tab List",menu:"Menu",menuitem:"Menu Item",menubar:"Menu Bar",toolbar:"Toolbar",tooltip:"Tooltip",alert:"Alert",status:"Status",progressbar:"Progress Bar",slider:"Slider",spinbutton:"Spin Button",checkbox:"Checkbox",radio:"Radio Button",switch:"Switch"};if(n[t])return n[t]}if("IMG"===e.tag){let t=e.attributes.alt;return t&&t.trim()?`Image (${t.trim()})`:"Image"}if("INPUT"===e.tag)return({text:"Text Input",email:"Email Input",password:"Password Input",tel:"Phone Input",url:"URL Input",search:"Search Input",number:"Number Input",range:"Range Slider",date:"Date Picker","datetime-local":"DateTime Picker",time:"Time Picker",week:"Week Picker",month:"Month Picker",color:"Color Picker",file:"File Upload",checkbox:"Checkbox",radio:"Radio Button",submit:"Submit Button",reset:"Reset Button",button:"Button",hidden:"Hidden Input"})[e.attributes.type?.toLowerCase()||"text"]||"Input";let n=eP[e.tag];if(n)return n;let i=e.tag.toLowerCase();return i.charAt(0).toUpperCase()+i.slice(1)}(t,n),function(e){let t=null!=e.styles.overflowX&&"visible"!==e.styles.overflowX,n=null!=e.styles.overflowY&&"visible"!==e.styles.overflowY;return t||n}(t)?a.frameMaskDisabled=!1:a.frameMaskDisabled=!0;let{backgroundFills:s,textFills:o}=function(e,t){!function(e){let t=e.backgroundClip;t&&"text"!==t&&"border-box"!==t&&x("html2design.unsupported_property_value",{property:"background-clip",value:e.backgroundClip})}(e.styles);let n=e.styles.backgroundColor?K(e.styles.backgroundColor,{useChromaJs:!0}):null,i=e.styles.backgroundImage?function(e,t,n){let i=[],r=n.rect,a=function(e){let t=e.trim();return["none","initial","inherit","unset","revert","revert-layer"].includes(t)?[]:Y(t).map(e=>{var t,n;return(t=(t=e.trim()).trim()).startsWith("url(")?function(e){let t=e.match(/url\(\s*(['"]?)(.+?)\1\s*\)/);return t?{type:"url",value:t[2]}:{type:"url",value:""}}(t):t.startsWith("linear-gradient(")?function(e){let{params:t,stops:n}=eA(e,"linear-gradient");return{type:"linear-gradient",direction:t||"to bottom",stops:n}}(t):t.startsWith("radial-gradient(")?function(e){let{params:t,stops:n}=eA(e,"radial-gradient"),i=t.match(/\b(circle|ellipse)\b/i)?.at(1),r=function(e){let t=e.trim().split(/\s+/).map(t=>{switch(t){case"center":return{value:.5,unit:"POSITION"};case"top":return{value:0,axis:"y",unit:"POSITION"};case"bottom":return{value:1,axis:"y",unit:"POSITION"};case"left":return{value:0,axis:"x",unit:"POSITION"};case"right":return{value:1,axis:"x",unit:"POSITION"}}let n=W(t);return n?.unit==="PERCENT"?{value:n.value/100,unit:"PERCENT"}:n?.unit==="PIXELS"&&0===n.value?{value:0,unit:"PERCENT"}:(x("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null)}).filter(e=>null!=e);if(0===t.length)return{x:.5,y:.5};if(1===t.length)return"y"===t[0].axis?{x:.5,y:t[0].value}:{x:t[0].value,y:.5};if(2===t.length){if(t[0].axis&&t[0].axis===t[1].axis)throw Error(`Invalid radial gradient position: ${e}`);return t[0].axis||t[1].axis?"x"===t[0].axis||"y"===t[1].axis?{x:t[0].value,y:t[1].value}:"y"===t[0].axis||"x"===t[1].axis?{x:t[1].value,y:t[0].value}:(x("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null):{x:t[0].value,y:t[1].value}}if(4===t.length){if(!t[0].axis||!t[2].axis||t[0].axis===t[2].axis||"PERCENT"!==t[1].unit||"PERCENT"!==t[3].unit)return x("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null;let n=1===t[0].value,i=1===t[2].value,r=n?1-t[1].value:t[1].value,a=i?1-t[3].value:t[3].value;return"x"===t[0].axis?{x:r,y:a}:{x:a,y:r}}return x("html2design.unparseable_value",{valueType:"radial-gradient-position",value:e}),null}(t.match(/\bat\b/i)?t.trim().replace(/.*\bat\s+/i,"").replace(/\s*\bin.*$/i,""):"center");if(null==r)return null;let a=function(e){switch(e.toLowerCase()){case"closest-side":return{type:"radial-extent",value:"closest-side"};case"closest-corner":return{type:"radial-extent",value:"closest-corner"};case"farthest-side":return{type:"radial-extent",value:"farthest-side"};case"farthest-corner":case"":return{type:"radial-extent",value:"farthest-corner"}}let t=Y(e," ").map(W).filter(e=>null!=e);return 2===t.length?{type:"two-dimensions",width:t[0],height:t[1]}:1===t.length&&"PIXELS"===t[0].unit?{type:"one-dimension",value:{value:t[0].value,unit:"PIXELS"}}:(x("html2design.unparseable_value",{valueType:"radial-gradient-size",value:e}),null)}(t.replace(/\b(?:at|in)\b.*$/i,"").replace(/\b(?:circle|ellipse)\b/i,"").trim());return null==a?null:(i||(i="one-dimension"===a.type?"circle":"ellipse"),{type:"radial-gradient",shape:i,size:a,position:r,stops:n})}(t):t.startsWith("conic-gradient(")?function(e){let t,n,{params:i,stops:r}=eA(e,"conic-gradient");if(i){if(i.startsWith("at ")&&(i="from 0deg "+i),i.includes(" at ")){let[e,r]=i.split(" at ");t=e.trim()||void 0,n=r.trim()}else/^[\d\.]+(deg|rad|grad|turn)/.test(i)?t=Array.from(i.matchAll(/([\d\.]+(?:deg|rad|grad|turn))+/gm)).map(e=>e[1]).join(" "):n=i.trim()}return{type:"conic-gradient",angle:t,position:n,stops:r}}(t):t.startsWith("image-set(")?{type:"image-set",images:Y((n=t).substring(10,n.length-1).trim()).map(e=>{let t,n;let i=(e=e.trim()).match(/url\(\s*(['"]?)(.+?)\1\s*\)/);if(!i)return{url:""};let r=i[2],a=e.replace(i[0],"").trim(),s=a.match(/(\d+(?:\.\d+)?x|(?:\d+(?:\.\d+)?)(?:dpi|dpcm|dppx))/);s&&(t=s[0]);let o=a.match(/type\(\s*(['"])(.+?)\1\s*\)/);return o&&(n=o[2]),{url:r,resolution:t,type:n}})}:(x("html2design.unsupported_property_value",{property:"background-image",value:t}),null)})}(e);for(let e=0;e<a.length;e++){let s;let o=a[e];if(null==o)continue;let l=function(e){return null==e?[]:Y(e,",").map(t=>{switch(t=t.trim().toLowerCase().replace(/\s+/g," ")){case"cover":return"cover";case"contain":return"contain";case"auto":case"auto auto":return}let n=Y(t," ");if(n.length>0){let e="auto"===n[0]?"auto":W(n[0]),t="auto";if(n.length>1&&(t="auto"===n[1]?"auto":W(n[1])),null!=e&&null!=t)return{width:e,height:t}}x("html2design.unparseable_value",{valueType:"background-size",value:e})})}(n.styles.backgroundSize),d=l[Math.min(e,l.length-1)],c=eN(n.styles.backgroundPositionX),m=eN(n.styles.backgroundPositionY),p={x:c[Math.min(e,c.length-1)],y:m[Math.min(e,m.length-1)]},h=null;switch(o.type){case"linear-gradient":{let{transform:e,angleRad:t}=function(e){let[t,n]=ej(e)??function(e){let t;let n=function(e){let t=e.match(RegExp("^(?<value>[+-]?(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:[eE][+-]?\\d+)?)(?<unit>grad|turn|deg|rad)$","i"));if(!t||3!==t.length)return x("html2design.unparseable_value",{valueType:"angle",value:e}),null;let n=parseFloat(t[1]);if(isNaN(n))return x("html2design.unparseable_value",{valueType:"angle",value:e}),null;switch(t[2].toLowerCase()){case"deg":return{unit:"DEGREES",value:n};case"rad":return{unit:"RADIANS",value:n};case"grad":return{unit:"GRADIANS",value:n};case"turn":return{unit:"TURNS",value:n};default:return x("html2design.unparseable_value",{valueType:"angle",value:e}),null}}(e);if(null==n)return null;switch(n.unit){case"DEGREES":t=n.value*Math.PI/180;break;case"GRADIANS":t=n.value*Math.PI/200;break;case"RADIANS":t=n.value;break;case"TURNS":t=2*n.value*Math.PI;break;default:(0,u.xb)(n.unit)}let i=Math.sin(t),r=-Math.cos(t),a={x:.5,y:.5},s=Math.min(Math.abs(i)>1e-12?.5/Math.abs(i):Number.POSITIVE_INFINITY,Math.abs(r)>1e-12?.5/Math.abs(r):Number.POSITIVE_INFINITY),o={x:a.x+s*i,y:a.y+s*r},l={x:a.x-s*i,y:a.y-s*r},d=e=>Math.max(0,Math.min(1,e));return[{x:d(l.x),y:d(l.y)},{x:d(o.x),y:d(o.y)}]}(e)??ej("to bottom");return{transform:(0,eE.cN)("gradient-linear",[t,n,{x:t.x-(n.y-t.y),y:t.y+(n.x-t.x)}]),angleRad:Math.atan2(n.y-t.y,n.x-t.x)}}(o.direction);s=r,h={type:"GRADIENT_LINEAR",opacity:1,visible:!0,blendMode:"NORMAL",...eT(o.stops,r,t),transform:(0,ew.D6)(e)};break}case"radial-gradient":{let e=function(e,t){if(t.width<=0||t.height<=0)return x("html2design.unsupported_property_value",{property:"background-image",value:"radial-gradient with 0 width or height"}),null;let n=e.position,i={x:n.x,y:n.y},r={x:n.x,y:n.y};switch(e.size.type){case"radial-extent":let a=e.position.y*t.height,s=e.position.x*t.width,o=t.height-a,l=t.width-s,d="closest-corner"===e.size.value?{x:s<l?0:1,y:a<o?0:1}:{x:s<l?1:0,y:a<o?1:0};switch(e.shape){case"circle":switch(e.size.value){case"closest-side":let c=Math.min(s,l,a,o);i.x=n.x-c/t.width,r.y=n.y-c/t.height;break;case"farthest-side":let m=Math.max(s,l,a,o);i.x-=m/t.width,r.y-=m/t.height;break;case"closest-corner":case"farthest-corner":let p=n.x-d.x,h=n.y-d.y,f=Math.hypot(p*t.width,h*t.height);i.x-=f/t.width,r.y-=f/t.height;break;default:(0,u.xb)(e.size)}break;case"ellipse":switch(e.size.value){case"closest-side":r.y=a<o?0:1,i.x=s<l?0:1;break;case"farthest-side":r.y=a<o?1:0,i.x=s<l?1:0;break;case"closest-corner":case"farthest-corner":let g=Math.hypot(d.x-n.x,d.y-n.y);i.x-=g,r.y-=g;break;default:(0,u.xb)(e.size)}break;default:(0,u.xb)(e.shape)}break;case"one-dimension":if("circle"!==e.shape)return x("html2design.unsupported_property_value",{property:"background-image",value:`radial-gradient(${e.shape} ${e.size.value.value}px)`}),null;r.y-=e.size.value.value/t.height,i.x-=e.size.value.value/t.width;break;case"two-dimensions":if("ellipse"!==e.shape)return x("html2design.unsupported_property_value",{property:"background-image",value:`radial-gradient(${e.shape} ${e.size.width.value}px ${e.size.height.value}px)`}),null;"PERCENT"===e.size.width.unit?i.x-=e.size.width.value/100:i.x-=e.size.width.value/t.width,"PERCENT"===e.size.height.unit?r.y-=e.size.height.value/100:r.y-=e.size.height.value/t.height;break;default:(0,u.xb)(e.size)}return(0,eE.cN)("gradient-radial",[n,r,i])}(o,r);if(null==e)return null;s=r,h={type:"GRADIENT_RADIAL",visible:!0,opacity:1,blendMode:"NORMAL",...eT(o.stops,r,0),transform:(0,ew.D6)(e)};break}case"url":let f=t.get(o.value);if(null==f)return x("html2design.unsupported_property_value",{property:"background-image",value:`url(${o.value})`}),null;s=f.fullResolution,h=function(e,t,n){let i=(0,ek.UN)().createNode("FRAME");i.fills=[];let r=e=>e?.unit==="PERCENT"&&50===e.value,a=!r(n.x)||!r(n.y);"cover"!==t||a?"contain"!==t||a?i.insertImageInFillPaint(e,"STRETCH"):i.insertImageInFillPaint(e,"FIT"):i.insertImageInFillPaint(e,"FILL");let[s]=i.fills;return i.removeSelfAndChildren(),s}(f,d,p);break;case"conic-gradient":case"repeating-linear-gradient":case"repeating-radial-gradient":case"repeating-conic-gradient":case"image-set":x("html2design.unsupported_property_value",{property:"background-image",value:o.type});continue;default:(0,u.xb)(o)}"IMAGE"===h.type?function(e,t={width:"auto",height:"auto"},n,i,r){if("IMAGE"===e.type&&("FILL"===e.imageScaleMode||"FIT"===e.imageScaleMode))return;let a=null,s=null;if("cover"===t||"contain"===t){let e=Math["cover"===t?"max":"min"](i.width/r.width,i.height/r.height);a=i.width/(e*r.width),s=i.height/(e*r.height)}else a=eS(t.width,i.width),s=eS(t.height,i.height);if(null==a&&null==s)a=i.width/r.width,s=i.height/r.height;else if(null==a){let e=r.width/r.height;a=i.width/i.height/e*s}else null==s&&(s=r.width/r.height*i.height/i.width*a);e.transform={m00:a,m01:0,m02:eI(n.x,i.width,a),m10:0,m11:s,m12:eI(n.y,i.height,s)}}(h,d,p,r,s):(null!=d&&x("html2design.unsupported_property",{property:"background-size"}),(null!=p.x||null!=p.y)&&x("html2design.unsupported_property",{property:"background-position"})),i.push(h)}return i.toReversed()}(e.styles.backgroundImage,t,e):null,r=[...null!=n?[n]:[],...null!=i?i:[]];return"text"===e.styles.backgroundClip?{textFills:r.length>0?r:void 0}:{backgroundFills:r.length>0?r:void 0}}(t,e.assets.imageSets);a.fills=s??[],o&&(e={...e,parentBackgroundClipTextFills:e.parentBackgroundClipTextFills?[...e.parentBackgroundClipTextFills,...o]:o}),function(e,t){let{width:n,height:i}=t.rect,{borderLeftWidth:r,borderRightWidth:a,borderTopWidth:s,borderBottomWidth:o,borderTopLeftRadius:l,borderTopRightRadius:d,borderBottomLeftRadius:c,borderBottomRightRadius:u,borderLeftColor:m="rgb(0, 0, 0)",borderTopColor:p="rgb(0, 0, 0)",borderRightColor:h="rgb(0, 0, 0)",borderBottomColor:f="rgb(0, 0, 0)"}=t.styles,g=q(r)??0,_=q(a)??0,y=q(s)??0,b=q(o)??0;if(0!==g||0!==_||0!==y||0!==b){e.bordersTakeSpace=!1,e.borderStrokeWeightsIndependent=!0,e.borderLeftWeight=g,e.borderRightWeight=_,e.borderTopWeight=y,e.borderBottomWeight=b,e.stackLeftPadding+=e.borderLeftWeight,e.stackRightPadding+=e.borderRightWeight,e.stackTopPadding+=e.borderTopWeight,e.stackBottomPadding+=e.borderBottomWeight;let t=g>0?m:y>0?p:_>0?h:b>0?f:null,n=t?K(t):null;e.strokePaints=n?{data:[n],blobs:[]}:{data:[],blobs:[]},(g&&m!==t||y&&p!==t||_&&h!==t||b&&f!==t)&&x("html2design.unsupported_property",{property:"border-left-color"})}e.rectangleCornerRadiiIndependent=!0,e.rectangleTopLeftCornerRadius=eM(l,n,i),e.rectangleTopRightCornerRadius=eM(d,n,i),e.rectangleBottomLeftCornerRadius=eM(c,n,i),e.rectangleBottomRightCornerRadius=eM(u,n,i)}(a,t),function(e,t){let{boxShadow:n="none"}=t.styles;if("none"===n)return;0===e.fills.length&&(e.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1e-5},opacity:1e-5}]),e.fills.every(e=>e.color?.a===0||0===e.opacity)&&(e.fills=e.fills.map(e=>({...e,opacity:Math.max(e.opacity||0,1e-5),color:e.color?{...e.color,a:Math.max(e.color.a||0,1e-5)}:e.color})));let i=Y(n).map(eO).filter(e=>null!=e).reverse();e.effects=[...i,...e.effects],e.effects.some(e=>null!=e.spread&&e.spread>0)&&x("html2design.unsupported_property_value",{property:"box-shadow",value:n})}(a,t),function(e,t){let{filter:n="none"}=t.styles;if("none"===n)return;let i=Y(n," ").map(eR).filter(e=>null!=e).reverse();e.effects=[...i,...e.effects]}(a,t);let l=parseFloat(t.styles.opacity??"1");if(isNaN(l)||(a.opacity=l),"hidden"===t.styles.visibility&&(a.visible=!1),!function(e,t){let n=0,i=!1,r=e.styles.rotate;if(r&&"none"!==r){let e=eD(r);null!==e&&(n+=e,i=!0)}let a=e.styles.transform;if(a&&"none"!==a){let e=function(e){if(!e||"none"===e)return null;let t=e.match(/rotate\s*\(\s*([^)]+)\s*\)/i);if(t)return eD(t[1]);let n=e.match(/matrix\s*\(\s*([-\d.]+)\s*,\s*([-\d.]+)\s*,\s*([-\d.]+)\s*,\s*([-\d.]+)\s*,\s*([-\d.]+)\s*,\s*([-\d.]+)\s*\)/i);if(n){let e=parseFloat(n[1]),t=parseFloat(n[2]);if(!isNaN(e)&&!isNaN(t))return 180/Math.PI*Math.atan2(t,e)}return null}(a);null!==e&&(n+=e,i=!0)}if(i){var s;s=n,"rotation"in t&&"number"==typeof t.rotation&&(t.rotation=(t.rotation-s)%360)}}(t,a),"CANVAS"===t.tag&&t.placeholderUrl){let n=e.assets.imageSets.get(t.placeholderUrl);n?a.insertImageInFillPaint(n,"FIT"):a.fills=[{type:"IMAGE",image:{name:"Checker",hash:ez(eH)},imageThumbnail:{name:"Checker",hash:ez(eH)},imageScaleMode:"FILL"}]}if("IMG"===t.tag&&!r){let n=e.assets.imageSets.get(t.attributes.currentSrc);n&&a.insertImageInFillPaint(n,"contain"==t.styles.objectFit?"FIT":"FILL")}return e.attachBuildDataToNodes&&eV(t,a),{node:a,ctx:e}}constructor(){eL(this,"description","Default strategy for frame nodes, using fixed width and height.")}}function eV(e,t){if(e?.sources&&e.sources.length>0&&t.setPluginData(eF,"source",JSON.stringify(e.sources[0])),e.nodeType===i.ELEMENT_NODE&&e.styles){let n=["alignContent","alignItems","alignSelf","justifyContent","justifyItems","justifySelf","display","width","height","top","left","position","paddingBottom","paddingLeft","paddingRight","paddingTop","marginBottom","marginLeft","marginRight","marginTop"],i=Object.fromEntries(Object.entries(e.styles).filter(([e,t])=>n.includes(e)&&t));t.setPluginData(eF,"styles",JSON.stringify(i))}}let eH="ece298d0ec2c16f10310d45724b276a6035cb503";function ez(e){let t=new Uint8Array(20);for(let n=0;n<40;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t}async function eG(e,t,n={}){g=t.trackDefinedEvent??null;let{scene:r,tracking:a}=t,s=()=>{if(n.abortSignal?.aborted)throw n.abortSignal?.reason};await ea(e),s(),t.trackPerformance?.track(l.OPTIMISTIC_FONT_LOADING),function e(t){t.childNodes&&0!==t.childNodes.length&&(t.childNodes=t.childNodes.filter(n=>{if(n.nodeType===i.ELEMENT_NODE){var r;let i=n.tag?.toUpperCase();if(h.has(i)||"INPUT"===n.tag&&"hidden"===n.attributes.type||"none"===n.styles.display||(r=n.rect).x<-1e3||r.y<-1e3)return!1;let{clip:a="auto"}=n.styles;if(("absolute"===n.styles.position||"fixed"===n.styles.position)&&"rect(0px, 0px, 0px, 0px)"===a)return!1;let s=p(n);if(s.visibleWithoutCSS)return!0;if(0===s.styles.size&&n.childNodes?.length===0&&(t.styles.display??"block")==="block")return!1;e(n)}else if(n.nodeType===i.TEXT_NODE&&(!n.text||!/\S/.test(n.text||"")))return!1;return!0}))}(e.root),function e(t,n={containingBlock:t,viewportElement:t,scrollContainer:t}){for(let r of Array.from(t.childNodes))if(r.nodeType===i.ELEMENT_NODE){let{position:i="static"}=r.styles,a=null;if("absolute"===i?a=n.containingBlock:"fixed"===i?a=n.viewportElement:"sticky"===i?a=n.scrollContainer:"relative"===i&&(a=t),null!=a){let e=t.childNodes.indexOf(r);t.childNodes.splice(e,1),a.childNodes.push(r)}let s={...n};(function(e){let{position:t="static"}=e.styles;if("relative"===t||"absolute"===t||"fixed"===t||"sticky"===t)return!0;let{transform:n="none"}=e.styles;if("none"!==n)return!0;let{filter:i="none"}=e.styles;if("none"!==i)return!0;let{contain:r="none"}=e.styles;if(["layout","paint","strict","content"].some(e=>r.includes(e)))return!0;let{containerType:a="normal"}=e.styles;if("normal"!==a)return!0;let{willChange:s="auto"}=e.styles;if(s.includes("transform")||s.includes("filter"))return!0;let{contentVisibility:o="visible"}=e.styles;return"auto"===o})(r)&&(s.containingBlock=r),function(e){let{overflow:t="visible",overflowX:n="visible",overflowY:i="visible"}=e.styles;return"visible"!==t||"visible"!==n||"visible"!==i}(r)&&(s.scrollContainer=r),e(r,s)}}(e.root),function e(t){for(let n of t.childNodes)n.nodeType===i.ELEMENT_NODE&&e(n);let n=t.childNodes.filter(e=>e.nodeType===i.ELEMENT_NODE);if(n.length<=1)return;let r=n.map((e,t)=>({child:e,originalIndex:t,zIndex:function(e){let{zIndex:t="auto"}=e.styles;if("auto"===t)return 0;let n=parseInt(t,10);return isNaN(n)?0:n}(e)}));r.sort((e,t)=>e.zIndex!==t.zIndex?e.zIndex-t.zIndex:e.originalIndex-t.originalIndex);let a=0,s=[];for(let e of t.childNodes)e.nodeType===i.ELEMENT_NODE?(s.push(r[a].child),a++):s.push(e);t.childNodes=s}(e.root),function e(t){if(t.nodeType!==i.ELEMENT_NODE||!t.childNodes||0===t.childNodes.length||"SVG"===t.tag)return;for(let n of t.childNodes)e(n);if(1!==t.childNodes.length)return;let n=t.childNodes[0];if(n.nodeType!==i.ELEMENT_NODE||"SVG"===n.tag)return;let r=p(t);if(r.visibleWithoutCSS)return;let a=function(e,t,n=1){let i=(e,t)=>Math.abs(e-t)<n;return i(e.x,t.x)&&i(e.y,t.y)&&i(e.width,t.width)&&i(e.height,t.height)}(t.rect,n.rect);if(!a&&r.styles.size>0&&(n.styles.overflow??"visible")!=="visible")return;let s=r.styles.size>(r.styles.has("backgroundColor")?1:0);if(!a&&s)return;let o=new Set,l=!1;if(a&&null!=t.styles.backgroundColor&&null!=n.styles.backgroundColor&&n.styles.backgroundColor.startsWith("rgb(")?o.add("backgroundColor"):!a&&null!=n.styles.backgroundColor&&t.styles.backgroundColor===n.styles.backgroundColor&&n.styles.backgroundColor.startsWith("rgb(")?(l=!0,o.add("backgroundColor")):!a&&t.styles.backgroundColor?.startsWith("rgb(")&&null==n.styles.backgroundColor?l=!0:a||r.styles.size,!(null!=t.styles.backgroundColor&&null==n.styles.backgroundColor&&null!=n.styles.boxShadow||Array.from(r.styles).some(e=>!o.has(e)&&null!=n.styles[e]))){for(let e of r.styles)if(!o.has(e)){if(null==n.styles[e]){n.styles[e]=t.styles[e];continue}throw Error(`Child already has a style ${e}`)}for(let e in f(t.tag)&&!f(n.tag)&&(n.tag=t.tag),n.owningReactComponent??(n.owningReactComponent=t.owningReactComponent),l&&(n.rect=t.rect),t)delete t[e];Object.assign(t,n)}}(e.root),t.trackPerformance?.track(l.PREPROCESS_DOCUMENT);let o=await eK(t,e.assets,s);s(),t.trackPerformance?.track(l.DECODE_ASSETS,{imageCount:o.imageCount,imageTotalBytes:o.imageTotalBytes});let u=0,m=0,x=d.Dn.system("html-to-figma",()=>{let s;let l=[new eB,new eU],d=[new ex,new e_,new ey,new ev,new eb,new eC].filter(e=>null!=e),c=function e(t,n,i,r,a){let s=n(t,r,a);if(null==s)return[];let{ctx:o=t,node:l}=s,d=[];if(1===r.nodeType)for(let t of r.childNodes){let a=e(o,n,i,t,r);d.push(...a)}return i(o,r,l,d)??d}({assets:o,scene:r,tracking:a,attachBuildDataToNodes:n.attachBuildDataToNodes},(e,t,n)=>{t.nodeType===i.ELEMENT_NODE?u++:t.nodeType===i.TEXT_NODE&&m++;let r=[];for(let i of l)try{let r=i.onVisit?.(e,t,n);if(r)return r}catch(e){console.error(`Failed to apply strategy: ${i.constructor.name}`,e),r.push(e)}let a=`No strategy found for element: ${t.nodeType}`;if(1===r.length){let e=r[0],t=e instanceof Error?e.message:String(e);a+=` (cause: ${t})`}else if(r.length>1){let e=r.map(e=>e instanceof Error?e.message:String(e)).join(", ");a+=` (causes: ${e})`}throw Error(a)},(e,t,n,i)=>{for(let r of d)try{let a=r.onPostVisit?.(e,t,n,i);if(a)return a.map(({element:t,node:n})=>({ctx:e,element:t,node:n}))}catch(e){console.error(`Failed to apply post-visit strategy: ${r.constructor.name}`,e,n?.id)}return[]},e.root);if(0===c.length)throw Error("No elements were converted from HTML to Figma");if(1===c.length)s=c[0].node;else for(let{node:e}of(s=r.createNode("FRAME",{tracking:a}),c))s.appendChild(e);if(s.name=t.rootFrameName??e.documentTitle??"Document",n.addViewportFrame){let t=r.createNode("FRAME",{tracking:a});t.name="Viewport",t.x=e.viewportRect.x,t.y=e.viewportRect.y,t.appendChild(s),s=t}return s.resizeWithConstraints(e.documentRect.width,e.documentRect.height),0===s.fills.length&&(s.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1}}]),n.attachBuildDataToNodes?.enabled&&n.attachBuildDataToNodes.fileKey&&(s.setPluginData(eF,"sourceMakeFile",n.attachBuildDataToNodes.fileKey),n.attachBuildDataToNodes.referenceId&&s.setPluginData(eF,"sourceMakeReferenceId",n.attachBuildDataToNodes.referenceId)),r.updateAll(),s});return t.trackPerformance?.track(l.VISIT_ELEMENTS,{elementCount:u,textNodeCount:m}),await (0,c.FP)(),s(),t.trackPerformance?.track(l.FINISH_FONT_LOADING),g=null,x}async function eK(e,t,n){let i=0,r=0;for(let[,e]of t.entries())e.blob&&e.blob.type.startsWith("image/")&&e.blob.size>0&&(i++,r+=e.blob.size);let a=await eq(e,t);n();let s=await eW(t);return n(),{imageSets:a,svgs:s,imageCount:i,imageTotalBytes:r}}async function eW(e){let t=new Map;for(let[n,i]of e.entries())i.blob?.type==="image/svg+xml"&&t.set(n,await i.blob.text());return t}async function eq(e,t){let n=new Map;for(let[i,r]of t.entries()){if(null==r.blob||0===r.blob.size)continue;if(!r.blob.type.startsWith("image/")){console.warn(`Skipping asset ${i} with invalid type: ${r.blob.type}`);continue}let t=new Uint8Array(await r.blob.arrayBuffer());try{n.set(i,await e.decodeImage(t,r.blob.type,"image"))}catch(e){x("html2design.image_decode_failure",{error:e instanceof Error?e.message:String(e),mimeType:r.blob.type})}}return n}},864967:(e,t,n)=>{n.d(t,{g:()=>v});var i,r=n(496059),a=n(836848),s=(n(787049),n(32241));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{getNewMessages(){return structuredClone(this.newMessages)}getLatestMessage(){let e=structuredClone(this.newMessages[this.newMessages.length-1]);if(!e)throw new r.T("Empty messages array");return e}getPendingToolCalls(){return Array.from(this.pendingToolCalls.values())}ensureActiveMessageWithRole(e){if(!this.activeMessage||this.activeMessage.role!==e){let t=this.buildAiChatMessage(e);this.newMessages.push(t),this.activeMessage=t}return this.activeMessage}buildAiChatMessage(e){return{createdAtMs:Date.now(),role:e,content:[]}}pushToolResult(e,t,n){d(this.ensureActiveMessageWithRole("tool"),t=>"tool-result"===t.type&&t.toolCallId===e,{type:"tool-result",toolCallId:e,toolName:t,resultJSON:JSON.stringify(n)},"append")}appendClientSideToolResult(e,t,n){if(!this.pendingToolCalls.get(e))throw new r.T(`Tool call ${e} not found in pendingToolCalls`);this.pendingToolCalls.delete(e),this.pushToolResult(e,t,n),this.onUpdate?.(this.newMessages)}appendClientSideToolResultRef(e,t,n){switch(n.state){case"success":case"toolFailed":this.ensureActiveMessageWithRole("tool").content.push({type:"tool-result-ref",toolCallId:e,toolName:t,blobstoreContentKey:n.blobstoreContentKey});break;case"uploadFailed":this.appendClientSideToolResult(e,t,{success:!1,error:"Tool succeeded, but we failed to upload the tool result to Figma's blobstore service"});break;default:(0,a.xb)(n)}this.onUpdate?.(this.newMessages)}handleToolCallStartBase(e,t,n){let i=function(e,t,n){let i=n.safeParse(e);if(!i.success)throw new r.T(`Invalid stream part: ${t}: ${JSON.stringify(i.error)}`);return i.data}(e,t,n);this.streamingToolCallBuilder=new c(i.toolCallId,i.toolName)}handleToolCallDeltaBase(e,t){if(!this.streamingToolCallBuilder)throw new r.T("Received tool call delta before tool call start");if(e!==this.streamingToolCallBuilder.toolCallId)throw new r.T("Received tool call delta for wrong tool call");this.streamingToolCallBuilder.processArgsTextDelta(t);let n=this.streamingToolCallBuilder.getToolCall();this.pendingToolCalls.set(e,n),d(this.ensureActiveMessageWithRole("assistant"),e=>"tool-call"===e.type&&e.toolCallId===n.toolCallId,{type:"tool-call",toolCallId:n.toolCallId,toolName:n.toolName,argsJSON:JSON.stringify(n.args)},"append")}handleToolCallBase(e,t,n){let i={type:"tool-call",toolCallId:e,toolName:t,args:n};this.pendingToolCalls.set(i.toolCallId,i),this.streamingToolCallBuilder=void 0,d(this.ensureActiveMessageWithRole("assistant"),e=>"tool-call"===e.type&&e.toolCallId===i.toolCallId,{type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,argsJSON:JSON.stringify(i.args??{})},"append")}constructor({initialMessages:e,logger:t,onUpdate:n}){o(this,"logger",void 0),o(this,"newMessages",[]),o(this,"activeMessage",void 0),o(this,"streamingToolCallBuilder",void 0),o(this,"pendingToolCalls",new Map),o(this,"onUpdate",void 0);let i=structuredClone(e),r=i[i.length-1];r&&(this.newMessages=i,this.activeMessage=r),this.logger=t,this.onUpdate=n,this.onUpdate?.(this.newMessages)}}function d(e,t,n,i){let r=e.content.findIndex(t);if(-1===r){"prepend"===i?e.content.unshift(n):e.content.push(n);return}e.content[r]=n}class c{processArgsTextDelta(e){let t=this.jsonStreamParser.addChunk(e);t&&(this.args=t)}getToolCall(){return{type:"tool-call",toolCallId:this.toolCallId,toolName:this.toolName,args:this.args}}constructor(e,t){o(this,"toolCallId",void 0),o(this,"toolName",void 0),o(this,"jsonStreamParser",void 0),o(this,"args",void 0),this.toolCallId=e,this.toolName=t,this.jsonStreamParser=new s.V,this.toolCallId=e,this.toolName=t,this.args={}}}var u=n(471348);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends l{get messageIndexOffset(){return this.lastCommittedMessageIndex?this.lastCommittedMessageIndex+1:0}getNewMessages(){return super.getNewMessages().map((e,t)=>({...e,index:this.messageIndexOffset+t}))}getCommittedMessages(){return this.committedMessages}getChatHistory(){let e=[...structuredClone(this.committedMessages),...this.getNewMessages()];if(!this.compression)return{uncompressedMessages:e,compressedMessages:void 0};let t=this.compression.totalSummarized,n=e.findIndex(e=>e.index===t);return{uncompressedMessages:e.slice(n),compressedMessages:this.compression}}updateCompression(e){this.compression={...e,new:!0}}getCompression(){return this.compression}processStreamPart(e){switch(e.type){case"text-delta":this.handleTextDelta(e);break;case"tool-call":this.handleToolCall(e);break;case"tool-call-start":this.handleToolCallStartBase(e,"tool-call-start",this.toolCallStartSchema);break;case"tool-call-delta":this.handleToolCallDeltaBase(e.toolCallId,e.argsTextDelta);break;case"tool-result":this.handleToolResult(e);break;case"reasoning":case"reasoning-signature":case"redacted-reasoning":this.handleReasoning(e);break;case"messagesCommitted":this.lastCommittedMessageIndex=e.lastCommittedMessageIndex;break;default:(0,a.xb)(e)}this.onUpdate?.(this.newMessages)}getLastCommittedMessageIndex(){return this.lastCommittedMessageIndex}handleTextDelta(e){let t=this.ensureActiveMessageWithRole("assistant"),n=t.content[t.content.length-1];n&&"text"===n.type||(n={type:"text",text:""},t.content.push(n)),n.text+=e.textDelta}handleReasoning(e){let t=this.ensureActiveMessageWithRole("assistant");if("redacted-reasoning"===e.type){let n=t.content.find(e=>"redacted-reasoning"===e.type);n||(n={type:"redacted-reasoning",data:""},t.content.push(n)),n.data+=e.data}else{let n=t.content.find(e=>"reasoning"===e.type);switch(n||(n={type:"reasoning",text:"",signature:""},t.content.push(n)),e.type){case"reasoning":"textDelta"in e&&(n.text+=e.textDelta);break;case"reasoning-signature":n.signature=e.signature;break;default:(0,a.xb)(e)}}}handleToolCall(e){this.handleToolCallBase(e.toolCallId,e.toolName,e.args)}handleToolCallDelta(e){this.handleToolCallDeltaBase(e.toolCallId,e.argsTextDelta)}handleToolResult(e){this.pendingToolCalls.get(e.toolCallId)&&(this.pendingToolCalls.delete(e.toolCallId),this.pushToolResult(e.toolCallId,e.toolName,e.result))}appendUserMessage(e){let t={...e,content:e.content.map(e=>{switch(e.type){case"text":return{type:e.type,text:e.text};case"selected-node-ids":return{type:e.type,selectedNodeIds:[...e.selectedNodeIds]};case"image":return{type:e.type,image:e.image};case"jsx":return{type:e.type,jsx:e.jsx};case"enabled-libraries":return{type:e.type,libraries:e.libraries.map(e=>({libraryKey:e.libraryKey,libraryName:e.libraryName}))};case"code-chat-model-config-version":case"cortex-request-uuid":case"code-chat-code-import-ref":case"code-chat-image-import-ref":case"code-chat-diff-import-ref":case"code-chat-inspected-element-ref":case"code-chat-inspected-component":case"code-chat-inspected-library":case"code-chat-snapshot-restore":case"code-chat-errors":case"code-chat-library-keys":case"code-chat-origin":case"code-chat-manual-edit":case"code-chat-duplicated-file":case"code-chat-deleted-chat-history":case"code-chat-backfill-image-import":case"code-chat-backfill-code-import":case"code-chat-backfill-diff-import":case"code-chat-backfill-inspected-element":throw new r.T(`Content part ${e.type} is not implemented for Assistant.`);default:(0,a.xb)(e)}})};this.newMessages.push(t),this.activeMessage=t,this.onUpdate?.(this.newMessages)}constructor({thread:e,toolCallStartSchema:t,...n}){super(n),m(this,"committedMessages",void 0),m(this,"compression",void 0),m(this,"lastCommittedMessageIndex",void 0),m(this,"toolCallStartSchema",void 0),this.lastCommittedMessageIndex=e?.lastCommittedMessageIndex??void 0,this.committedMessages=e?.messages??[],this.compression=e?.compression?{...e.compression,new:!1}:void 0,this.toolCallStartSchema=t??u.rH}}n(446724);var h=n(292933);class f{push({toolCallId:e,trackingName:t}){this.toolCalls.push({name:t,id:e})}markSuccess(e){let t=this.toolCalls.find(t=>t.id===e);t&&(t.succeeded=!0)}markFailure(e,t){let n=this.toolCalls.find(t=>t.id===e);n&&(n.succeeded=!1,n.error=t)}getEventFields(){if(0===this.toolCalls.length)return{toolCallIds:void 0,toolCallNames:void 0,totalToolCalls:0,toolCallsSucceeded:0};let e=[],t=[],n=0;for(let i of this.toolCalls)e.push(i.id),t.push(i.name),i.succeeded&&n++;return{toolCallIds:JSON.stringify(e),toolCallNames:JSON.stringify(t),totalToolCalls:this.toolCalls.length,toolCallsSucceeded:n}}getLastToolCall(){return this.toolCalls.length>0?this.toolCalls[this.toolCalls.length-1]:void 0}constructor(){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"toolCalls",[])}}var g=n(244487),x=n(214742);!function(e){e.RATE_LIMIT_EXCEEDED="rate_limit_exceeded",e.PROVIDER_OVERLOADED="provider_overloaded",e.PROVIDER_TIMEOUT="provider_timeout",e.CONTENT_LENGTH_LIMIT="content_length_limit",e.UNSAFE_OR_HARMFUL_CONTENT="unsafe_or_harmful_content",e.GENERIC="generic",e.OFFLINE="offline",e.METER_EXCEEDED="meter_exceeded",e.NOT_IMPLEMENTED="not_implemented",e.NETWORK_ERROR="network_error",e.BAD_GATEWAY="bad_gateway",e.GATEWAY_TIMEOUT="gateway_timeout",e.PERMISSION_DENIED="permission_denied",e.AI_DISABLED="ai_disabled",e.UNCLOSED_TAGS_BENIGN="unclosed_tags_benign",e.TOOL_ARGUMENT_ERROR="tool_argument_error",e.PARSE_ERROR="parse_error",e.MODEL_OUTPUT_INVALID="model_output_invalid",e.NODE_UNAVAILABLE="node_unavailable",e.NODE_TOO_LARGE="node_too_large"}(i||(i={}));var _=n(134670),y=n(50270);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v{handleError(e,t){let n;let i=this.isAbortedError(e);return e instanceof Error?n=e:(n=Error(JSON.stringify(e))).name="UnknownError",this.clientCallbacks.sloge(t,{name:n.name,message:n.message}),this.clientCallbacks.handleError&&!i&&this.clientCallbacks.handleError(n),{error:n,isAbortedError:i}}trackUserFacingError(e,t){if(this.isAbortedError(e))return;let n=this.parseErrorForTracking(e);this.clientCallbacks.trackEvent({name:h.LP.USER_FACING_ERROR,fields:{reason:t,errorName:n.name,errorMessage:n.message,errorReason:n.reason,statusCode:n.statusCode?.toString()}})}parseErrorForTracking(e){let t;let n=!function(e){let t=e.name||"",n=e.message||"";return!!("ALL_DIFF_BLOCKS_NULL"===t||"NO_SUCCESSFUL_DIFF_BLOCKS"===t||"NO_CHANGES_MADE"===t||n.includes("Couldn't reconcile JSX")||n.includes("Reconciliation resulted in a nullish output")||"SyntaxError"===t&&(n.includes("Unexpected token")||n.includes("Unterminated")))||"Edited Design Parsing Error"===t||e instanceof x.C&&!!e.payload.llmInduced}(e)?!function(e){let t=e.message||"";return!!(t.includes("Selected node not found")||t.includes("Cannot find component for instance")||/node not found: \d+:\d+/.test(t))}(e)?!function(e){let t=e.name||"",n=e.message||"";return!!("Node(s) too large to serialize"===t||n.includes("too much data to be processed"))}(e)?(0,g.determineErrorReason)(e):"node_too_large":"node_unavailable":"model_output_invalid";return e instanceof _.G1?e.data&&"status"in e.data&&(t=e.data.status):e instanceof y.G&&(t=e.statusCode),{message:e.message,name:e.name,reason:n,statusCode:t}}async streamResponse(e){return this.clientDependencies.streamResponse(e,this.trackingContext)}isAbortedError(e){return e instanceof DOMException&&"AbortError"===e.name}async getClientSideToolCallsFromResponseStream(e){let t=e.getReader();for(;;){let{done:e,value:n}=await t.read();if(e)break;this.threadBuilder.processStreamPart(n)}return this.threadBuilder.getPendingToolCalls()}async getAgentResponse({serverSideChatParams:e}){let t=e?[this.threadBuilder.getLatestMessage()]:this.threadBuilder.getNewMessages(),n=this.buildRequest({messages:t,serverSideChatParams:e}),i=await this.streamResponse(n);return await this.getClientSideToolCallsFromResponseStream(i)}async runAgentLoop({serverSideChatParams:e}){for(;;){let t=await this.getAgentResponse({serverSideChatParams:e});if(0===t.length)break;for(let e of t){let t=this.tools[e.toolName],{toolCallId:n,toolName:i,args:r}=e,a={toolCallId:n,toolName:t.trackingName};this.toolCallTracker.push({toolCallId:n,trackingName:t.trackingName});let{executeClientSide:s}=t;if(!s)throw Error(`Tool ${t.trackingName} has no client-side execution function`);this.clientCallbacks.trackEvent({name:h.LP.TOOL_EXECUTION_STARTED,fields:a});let o={...this.trackingContext,...a};try{let e={...await t.executeClientSide(r,o),success:!0};this.clientCallbacks.tryUploadToolResultToBlobStore?this.threadBuilder.appendClientSideToolResultRef(n,i,await this.clientCallbacks.tryUploadToolResultToBlobStore(e)):this.threadBuilder.appendClientSideToolResult(n,i,e),this.toolCallTracker.markSuccess(n),this.clientCallbacks.trackEvent({name:h.LP.TOOL_EXECUTION_RESULT,fields:{...o,success:!0}})}catch(t){let{error:e}=this.handleError(t,"Error in tool");this.toolCallTracker.markFailure(n,e),this.clientCallbacks.trackEvent({name:h.LP.TOOL_EXECUTION_RESULT,fields:{...o,success:!1,errorName:e.name,errorMessage:e.message}}),this.threadBuilder.appendClientSideToolResult(n,i,{success:!1,error:`${e.name}: ${e.message}`})}}}}async sendMessage({newUserMessage:e,serverSideChatParams:t,metadata:n}){let i=(0,h.qL)(e),r=(0,h.Qy)(e);this.clientCallbacks.trackEvent({name:h.LP.MESSAGE_SENT,fields:{numSelectedNodes:i.length,selectedNodeInfo:JSON.stringify(i),numEnabledLibraries:n?.enabledLibraryKeys?.length??0,enabledLibraries:n?.enabledLibraryKeys??[],...r}}),this.threadBuilder.appendUserMessage(e);try{await this.runAgentLoop({serverSideChatParams:t});let{toolCallIds:e,toolCallNames:n,totalToolCalls:i,toolCallsSucceeded:r}=this.toolCallTracker.getEventFields();this.clientCallbacks.onUpdateThread(this.threadBuilder.getNewMessages(),!0);let a=this.threadBuilder.getNewMessages();this.clientCallbacks.trackEvent({name:h.LP.RESPONSE_RECEIVED,fields:{toolCallIds:e,toolCallNames:n,totalToolCalls:i,toolCallsSucceeded:r,status:"completed"}});let s=this.toolCallTracker.getLastToolCall();return s?.succeeded===!1&&s.error&&this.trackUserFacingError(s.error,"final_tool_call_failed"),a}catch(o){let{error:t,isAbortedError:n}=this.handleError(o,"Error in sendMessage"),{toolCallIds:i,toolCallNames:r,totalToolCalls:a,toolCallsSucceeded:s}=this.toolCallTracker.getEventFields();this.clientCallbacks.trackEvent({name:h.LP.RESPONSE_RECEIVED,fields:{toolCallIds:i,toolCallNames:r,totalToolCalls:a,toolCallsSucceeded:s,status:n?"aborted":"failed",errorName:t.name,errorMessage:t.message}}),this.trackUserFacingError(t,"assistant_request_failed"),this.clientCallbacks.onUpdateThread([e,{role:"assistant",content:[{type:"text",text:n?"The request was canceled.":"Sorry, I encountered an error while processing your request. Please try again."}],createdAtMs:Date.now()}],!0)}}async generateResponse(e){return this.threadBuilder.appendUserMessage(e),await this.getAgentResponse({serverSideChatParams:void 0}),this.threadBuilder.getNewMessages()}constructor({trackingContext:e,tools:t,clientDependencies:n,clientCallbacks:i,persistedMessages:r,toolCallStartSchema:a}){b(this,"tools",void 0),b(this,"trackingContext",void 0),b(this,"clientDependencies",void 0),b(this,"clientCallbacks",void 0),b(this,"toolCallTracker",void 0),b(this,"threadBuilder",void 0),this.trackingContext=e,this.tools=t,this.clientDependencies=n,this.clientCallbacks=i,this.toolCallTracker=new f,this.threadBuilder=new p({initialMessages:r,logger:console,onUpdate:e=>this.clientCallbacks.onUpdateThread(e,!1),toolCallStartSchema:a})}}},292933:(e,t,n)=>{n.d(t,{LP:()=>i,Qy:()=>o,qL:()=>s});var i,r=n(466082);function a(e){return e.content.filter(e=>"selected-node-ids"===e.type).flatMap(e=>e.selectedNodeIds)}function s(e){let t=(0,r.UN)();return a(e).map(e=>({nodeId:e,depthFromCanvas:t.get(e)?.depthFromCanvas??-1}))}function o(e){let t=(0,r.UN)(),n=a(e),i=new Set,s=0,o=0;for(let e of n){let n=t.get(e);n&&(n.isImage?i.add("IMAGE"):i.add(n.type),n.isComponentish&&s++,n.isInstance&&o++)}return{selectionMetadata:JSON.stringify({selectionCount:n.length,selectedTypes:Array.from(i),hasComponent:s>0,hasInstance:o>0}),numComponents:s,numInstances:o}}!function(e){e.MESSAGE_SENT="message_sent",e.RESPONSE_RECEIVED="response_received",e.TOOL_EXECUTION_STARTED="tool_execution_started",e.TOOL_EXECUTION_RESULT="tool_execution_result",e.USER_FACING_ERROR="user_facing_error"}(i||(i={}))},761790:(e,t,n)=>{function i(e,t){return t.length>1&&("text"===e.harness.userMessageFormat||"text-with-components"===e.harness.userMessageFormat)}function r(e,t,n){let i=new Set,r=new Set;for(let n of t){let t=n.findAllWithCriteriaGUIDs({types:["INSTANCE"]});for(let a of(n.isInstance&&t.push(n.guid),t)){let t=e.get(a),n=t?.symbolId;if(n){let t=e.get(n);if(t?.isState&&t.parentNode){r.add(n);let e=t.parentNode;e.defaultVariant?.guid&&r.add(e.defaultVariant.guid),i.add(e.guid)}else i.add(n)}}}for(let e of n)i.add(e);return{componentsAndStateGroups:e.getNodes(Array.from(i)),variantGuids:r}}function a(e,t){for(let n of t){if("TEXT"===n.type&&n.hasMissingFont)return!0;for(let t of n.findAllWithCriteriaGUIDs({types:["TEXT"]})){let n=e.get(t);if(n?.hasMissingFont)return!0}}return!1}n.d(t,{AR:()=>i,nN:()=>a,zA:()=>r}),n(1627),n(633373),n(897451),n(214742),n(241807),n(86930),n(352300),n(787049),n(104626)},524326:(e,t,n)=>{n.d(t,{XD:()=>r.X,NK:()=>i.NK,xr:()=>i.xr}),n(214742),n(692376),n(761790);var i=n(633373);n(409769),n(854225),n(466082),n(1627),n(120597),n(159360),n(864967).g,n(897451),n(352300),n(432012),n(798913),n(787049),n(104626),n(962032);var r=n(763088)},214742:(e,t,n)=>{n.d(t,{C:()=>i});class i extends Error{constructor(e){super("MakeEditsError: "+e.name),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"payload",void 0),Object.setPrototypeOf(this,new.target.prototype),this.name=e.name,this.payload=e}}},409769:(e,t,n)=>{n.d(t,{h:()=>c});var i=n(866147),r=n(159360),a=n(798913),s=n(724272),o=n(214742);let l="plugin_playground";function d({jsxStr:e,errorName:t,useStrictParsing:n,figmaJSX:i,debugInfo:a,timingManager:s}){if(!n)return(0,r.S$)(e);{let n=i.strictParse(e);return n.error&&(a&&(a.parseError=n.error.formatted||n.error.message),s?.mark("deserializeEnd"),function(e,t,n){throw new o.C({name:e,severity:"total",friendlyErrorMessage:"There was an issue with parsing the design and/or intended edits. Retrying the same edit will not work.",cause:{jsxStr:t,parseError:n.formatted||n.message},retryable:!1,fallbackToDifferentModel:!1,healable:!1})}(t,e,n.error)),n.elements}}async function c({node:e,jsxStr:t,oldJsxStr:c,serializerOptions:u,clientLifecycleId:m,timingManager:p,nodeHandlerManager:h,transformCustomJsx:f,processGenerationRequest:g,debugInfo:x,strictParsing:_}){p?.mark("deserializeStart");let y=await n.e(3721).then(n.bind(n,913721)),b=_??!1,v=d({jsxStr:t,errorName:"Edited Design Parsing Error",useStrictParsing:b,figmaJSX:y,debugInfo:x,timingManager:p}),C=v?.[0];v&&v.length>1&&(v=d({jsxStr:t=`<>
${t}
</>`,errorName:"Edited Design Parsing Error",useStrictParsing:b,figmaJSX:y,debugInfo:x,timingManager:p}),C=v?.[0],u?.modifiableIds&&e?.parentGuid&&u.modifiableIds.push(e.parentGuid));let E=null;if(!b&&(E=y.strictParse(t).error)&&x&&(x.parseError=E.formatted||E.message),!C)throw p?.mark("deserializeEnd"),Error("Invalid jsx");let w=c?d({jsxStr:c,errorName:"Original Design Parsing Error",useStrictParsing:b,figmaJSX:y,debugInfo:x,timingManager:p})?.[0]:void 0;f(C),w&&f(w);let k=!w||(0,r.Vt)(w)!==(0,r.Vt)(C),T=await y.reconcileJSXElement({jsxElement:C,node:e,oldJSXElement:w,options:{...u,handleDeserializationIssue:e=>{if(e.type===i.qR.DependencyNotFound&&e.context.jsxElement?.type==="Vector"){let t=e.context.jsxElement.props?.data;throw new o.C({name:"Vector Asset Missing",severity:"total",friendlyErrorMessage:"A Vector node in the edit references an asset that does not exist in the document. You cannot create new vector data - only reference existing vector assets. Users may vectorize images using the Vectorize tool in the Actions menu. ",cause:{jsxElement:e.context.jsxElement.type,assetId:"string"==typeof t?t:"unknown",location:e.context.location,originalError:e.formatted||e.message},retryable:!1,fallbackToDifferentModel:!1,healable:!0,llmInduced:!0})}if(e.type===i.qR.JSXExpressionSchema&&e.context.jsxElement?.type==="Vector"&&e.message?.includes('must start with "asset:"')){let t=e.context.jsxElement.props?.data;throw new o.C({name:"Invalid Vector Data Format",severity:"total",friendlyErrorMessage:"A Vector node in the edit has an invalid data attribute. You cannot create new vector data - only reference existing vector assets. Users may vectorize images using the Vectorize tool in the Actions menu. ",cause:{jsxElement:e.context.jsxElement.type,invalidData:t,location:e.context.location,originalError:e.formatted||e.message},retryable:!1,fallbackToDifferentModel:!1,healable:!0,llmInduced:!0})}}},editScopeType:a.zk.AI,outerEditScopeLabel:`afi{name:make-edits,clid:${m}}`,jsxStr:t});p?.mark("deserializeEnd"),x?.reconcileIssues.push(...T.issues.map(e=>e.formatted||e.message));let j=T.node;if(!j)throw new o.C({name:"Couldn't reconcile JSX",severity:"total",cause:{issues:T.issues},retryable:!1,fallbackToDifferentModel:!1,healable:!1,friendlyErrorMessage:"Reconciliation resulted in a nullish output. Retrying the same edit will not work."});if(g&&T.generationRequests?.length)for(let e of T.generationRequests){let t=j.sceneGraph.get(e.guid);if(!t){(0,s.x1)("make-edits","Missing node",{guid:e.guid});continue}await g(e,t)}let S=h.handleNodesForRoot(j);return a.l7.ai("make-edits",()=>{if(e?.firstDraftData){j.firstDraftData=e.firstDraftData;let t=e.getSharedPluginData(l,"userPrompt");j.setSharedPluginData(l,"userPrompt",t)}}),{nodeId:j.guid,issues:T.issues,delayedEdits:S,changeMade:k,normalizedJSXStr:t,strictParseError:E}}},897451:(e,t,n)=>{n(866147),n(787049),n(920768)},763088:(e,t,n)=>{var i,r;n.d(t,{X:()=>r}),function(e){e.THINKING="thinking",e.WORKING="working",e.NONE="none"}(i||(i={})),function(e){e.USER_ABORTED="user_aborted",e.TIMED_OUT="timed_out",e.OTHER="other"}(r||(r={}))},633373:(e,t,n)=>{n.d(t,{NK:()=>d,xr:()=>c,Pg:()=>l}),n(241807),n(524326);var i=n(763088),r=n(210709);n.e(7414).then(n.bind(n,427414)).then(e=>e.jsxqueryBundleString),r.KC([r.Ik({result:r.eu("SUCCESS"),data:r.Ik({jsx:r.Yj()})}),r.Ik({result:r.eu("ERROR"),data:r.Ik({error:r.Yj(),debugLog:r.Yj().optional()})})]),`
function createDebugLogger() {
  const logs = [];
  return {
    log(message) {
      logs.push(message);
    },
    getLog() {
      return logs.join('\\n');
    }
  };
}
`.trim(),`
function executeJSXQueryWithDebug(jsx, userCode) {
  const debugLog = createDebugLogger();

  try {
    debugLog.log('Input JSX length: ' + jsx.length);
    debugLog.log('User code: ' + userCode);

    // This will be filled in by the JSXQuery bundle
    const JSXQuery = globalThis.JSXQuery;

    const jsxQueryXML = JSXQuery.JSXToJSXQueryXML(jsx);
    debugLog.log('Converted XML length: ' + jsxQueryXML.length);
    debugLog.log('Full converted XML:\\n' + jsxQueryXML);

    const result = JSXQuery.JSXQueryXMLToJQuery(jsxQueryXML);
    debugLog.log('Successfully created jQuery object');

    const { $, $xml, createFragment } = result;
    const userFunction = new Function('$', '$xml', 'createFragment', userCode);
    userFunction($, $xml, createFragment);
    debugLog.log('User function executed successfully');

    const finalJSX = JSXQuery.createJSXForJQuery($xml);
    debugLog.log('Final JSX length: ' + finalJSX.length);
    debugLog.log('Full final JSX:\\n' + finalJSX);

    return {
      result: 'SUCCESS',
      data: {
        jsx: finalJSX
      }
    };
  } catch (error) {
    debugLog.log('Error occurred: ' + error);
    debugLog.log('Error stack: ' + (error.stack || 'No stack trace'));

    return {
      result: 'ERROR',
      data: {
        error: String(error),
        debugLog: debugLog.getLog()
      }
    };
  }
}
`.trim();var a=n(718443);n(897451),n(352300),n(159360),Object.keys(a.UC.shape),n(214742),n.e(8463).then(n.bind(n,858463)).then(e=>e.JSXToJSXQueryXML);let s=/id=["']([^"']+)["']/;function o(e){return e.replace(/\r\n/g,"\n").replace(/[ \t]+$/gm,"").replace(/^[ \t]+/gm,"").replace(/[^\S\n]+/g," ").replace(/\n{2,}/g,"\n").replace(/\u2018/g,"'").replace(/\u2019/g,"'").replace(/\u201C/g,'"').replace(/\u201D/g,'"').replace(/\u2013/g,"-").replace(/\u2014/g,"-").replace(/\u2026/g,"...").replace(/\u2028/g," ").replace(/\u00A0/g," ").trim()}function l(e){if("FRAME"!==e.type||0!==e.childrenGuids.length||(e.strokePaints?.data.length??0)!==0||(e.effects?.length??0)!==0)return!1;let t=e.fills;if(!t||0===t.length)return!0;if(1===t.length){let e=t[0];return e?.type==="SOLID"&&e?.visible===!0&&e?.color?.r===1&&e?.color?.g===1&&e?.color?.b===1&&e?.color?.a===1}return!1}function d(e){let t={[i.X.USER_ABORTED]:"Request was aborted by the user",[i.X.TIMED_OUT]:"Request timed out",[i.X.OTHER]:"Request was aborted"};return new DOMException(`[${e}] ${t[e]}`,"AbortError")}function c(e){if(!(e instanceof DOMException)||"AbortError"!==e.name)return i.X.OTHER;let t=e.message.match(/^\[([^\]]+)\]/);if(t){let e=t[1];if(Object.values(i.X).includes(e))return e}return i.X.OTHER}RegExp("<\\/think>","gs")},352300:(e,t,n)=>{n(854225),n(787049),n(104626),n(412991)}}]);

//# debugId=314ea1b9-2387-5fb7-8b89-9e0dc6bd661f

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/4fee5e4c23ba2f58ea27e02a17a6e92c26385569/3726-07bfebc5a3b5f25f.min.js.map