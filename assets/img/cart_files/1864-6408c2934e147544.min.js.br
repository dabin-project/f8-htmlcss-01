"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5b64a39b-9e79-5b77-b51e-6100822fdc2f")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1864],{21698:(e,n,t)=>{t.d(n,{AR:()=>y,Zh:()=>b});var o=t(105652),r=t(385965),c=t(391596),a=t(779267),s=t(781703),i=t(226775),d=t(587420),l=t(437575),p=t(864314),u=t(421564),_=t(652154),m=t(598066),f=t(776888),g=t(456556),h=t(102869);function y(){let e=(0,a.lR)(),{nodeIds:n,noSelection:t}=function(){let e=(0,m.hA)(),n=(0,_.Tv)(),t=(0,f.dh)(),o=!e&&!n?.length,c=e?[e]:n?.length?n:[t];return{noSelection:o,nodeIds:(0,g.Fk)((e,n)=>{if(!n?.length)return[];let t=[];return n.forEach(n=>{let o=e.get(n);if(o){let e=function(e){let n=e.parentNode;for(;n;){if("SYMBOL"===n.type||"INSTANCE"===n.type)return n;n=n.parentNode}return null}(o);if(e&&e.guid){t.push(e.guid);return}for(let e of(0,r.go)(o))t.push(e)}}),t},c)}}(),{assetKeysFromSelection:c,assetKeyToSourceGuid:s}=(0,o.useMemo)(()=>{let t=[],o={};return n.forEach(n=>{let r=e(n);r&&(t.push(r),o[r]||(o[r]=n))}),{assetKeysFromSelection:t,assetKeyToSourceGuid:o}},[n,e]);return{noSelection:t,assetKeys:[...new Set(c)],assetKeyToSourceGuid:s}}function b({componentKey:e,defaultFilter:n,entrypoint:t,libraryKey:r}){let a=(0,h.oA)(),{assetKeys:_,noSelection:m,assetKeyToSourceGuid:f}=y(),g=new Set(_),b=function({assetKeys:e,componentKey:n,defaultFilter:t,noSelection:r,assetKeyToSourceGuid:a,libraryKey:s}){let[l,_]=(0,c.IT)((0,d.GD)(e),{enabled:e.length>0}),m=(0,o.useMemo)(()=>l.data?function(e){let n=Object.keys(e.components||{}).map(n=>({...e.components[n],type:u.PW.COMPONENT,library_key:n.split(",")[0]})),t=Object.keys(e.state_groups||{}).map(n=>({...e.state_groups[n],type:u.PW.STATE_GROUP,library_key:n.split(",")[0]}));return(0,p.r)(n,t)}(l.data):null,[l.data]);return{...(0,i.y)({libraryKey:s,componentKey:n,componentsAndStateGroups:m,defaultFilter:t,scope:"page",assetKeyToSourceGuid:a}),status:l.status,refetch:_.refetch,noSelection:r}}({libraryKey:r,assetKeys:(0,l.kf)(g,a),componentKey:e,defaultFilter:n,noSelection:m,assetKeyToSourceGuid:f});return{...(0,s.z)({displayedComponent:b.displayedComponent,filteredComponents:b.filteredComponents,componentBrowserListRowData:b.componentBrowserListRowData,setComponentBrowserListRowData:b.setComponentBrowserListRowData,bulkSuggestions:b.bulkSuggestions.suggestions,entrypoint:t}),...b,entrypoint:t}}},781703:(e,n,t)=>{t.d(n,{z:()=>S});var o=t(105652),r=t(20002),c=t(367877),a=t(379141),s=t(270450),i=t(445019),d=t(723850),l=t(391596),p=t(577225),u=t(888903),_=t(287736),m=t(587420),f=t(141692),g=t(301849),h=t(964622),y=t(223487),b=t(777645),v=t(682488),x=t(450207),w=t(276571),k=t(605985),C=t(816158),j=t(102869);function S({displayedComponent:e,filteredComponents:n,componentBrowserListRowData:t,setComponentBrowserListRowData:S,bulkSuggestions:I,entrypoint:N}){let E=(0,k.iZ)(),{Sprig:A}=(0,p.A)(),[P,L]=(0,o.useState)(-1),O=(0,o.useRef)([]),[F,M]=(0,o.useState)(null),T=(0,o.useRef)(null),K=(0,o.useCallback)(e=>{M(e)},[]);(0,o.useEffect)(()=>{O.current=O.current.slice(0,t.length)},[t.length]);let B=(0,w._6)(),z=(0,r.wA)(),R=(0,l.gY)(m.RL),q=(0,l.gY)(m.S6),D=(0,l.gY)(m.K5),G=(0,l.gY)(m.QA),V=(0,l.gY)(m.LO),U=(0,l.gY)(m._E),H=function(){let e=(0,y._G)(),n=(0,h.OG)(e),t=n?.selectedRepositories?.[0],{directories:r}=(0,g.v)({libraryKey:e,repositoryId:t?.id||""}),c=(0,d.hC)();return(0,o.useCallback)(({suggestions:n,path:t,componentName:o,componentId:a,trackingProps:s,libraryKey:i})=>{let d=!!n&&n.length>0,l=n?n.findIndex(e=>e.src_path===t&&e.name===o):-1,p=n&&-1!==l?n[l]?.score:void 0,u=!!n&&-1===l&&n.some(e=>e.src_path===t),_=i===e&&r&&!r.some(e=>t.startsWith(e)),m=n?.[0]?.tracking_query_id;c("component_browser.code_connect_component_connected",{componentName:o,componentId:a,sourcePath:t,location:s.location,source:s.source,componentHasSuggestions:d,pickedSuggestionIndex:l,pickedSuggestionConfidenceScore:p,pickedSuggestionPathButWrongComponent:u,componentNotInSpecifiedDirectories:_,sessionId:s.sessionId,componentBrowserEntrypoint:s.entrypoint,queryId:m,suggestionSelectionInterface:s.suggestionSelectionInterface})},[r,e,c])}(),Y=(0,i.Xr)(C.m),W=(0,j.Fl)(),X=(0,d.hC)(),Q=(0,o.useCallback)((e,n=[])=>{for(let t=e;t<O.current.length;t++){let e=n[t],o=e?.component.code_connect_info.v1.state==="ignored",r=e?.component.code_connect_info.v1.state==="connected";if(e&&!o&&!r){let e=O.current[t];if(e){e.focus();break}}}},[O]);(0,o.useEffect)(()=>{if(null!==T.current){let e=T.current;T.current=null,Q(e,n)}},[n,Q]);let Z=(0,o.useCallback)(e=>{let{codeConnectId:n,row:t}=e,o=t?.sourceIndex;if(t&&void 0!==o){let r={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,state:"not_connected",id:void 0}}},isSelectedFromSuggestion:!1};n?(S(e=>{let n=[...e];return n[o]={...r,isLoading:!0},n}),q({codeConnectId:n}).then(()=>{let n="connected"!==t.component.code_connect_info.v1.state,c=n?(0,a.t)("dev_handoff.component_browser.removed_ignore_message",{componentName:t.component.name}):(0,a.t)("dev_handoff.component_browser.disconnected_message",{componentName:t.component.name}),i=(0,f.I)(t.component);(0,s.kc)().dt_component_browser_optimistic_update_query?W({componentKey:i,status:"not_connected"}):i&&Y(e=>e?{...e,status:{...e.status,[i]:"not_connected"}}:{status:{[i]:"not_connected"},loadingStatus:"loaded"}),X(n?"component_browser.code_connect_component_ignore_removed":"component_browser.code_connect_component_disconnected",{nodeId:t.component.node_id,location:e.trackingProps.location}),S(e=>{let n=[...e];return n[o]={...r,isLoading:!1},n}),z(u.F.enqueue({message:c,type:(0,a.t)("dev_handoff.component_browser.disconnected_component")})),e.callback?.()}).catch(n=>{c.vF.error("Error deleting code connect map",n),S(e=>{let n=[...e];return n[o]={...t,isLoading:!1},n}),z(u.F.enqueue({message:n.message,type:(0,a.t)("dev_handoff.component_browser.disconnect_component_error"),error:!0})),e.callback?.(n)})):S(e=>{let n=[...e];return n[o]={...r,isLoading:!1},n})}},[q,z,S,X,Y,W]),$=(0,o.useCallback)(e=>{let{row:n,sourceIndex:t,trackingProps:o,focusNextInput:r,currentRowIndex:i}=e,d=n.selectedFile,l=n.selectedComponent,p=d?.metadata?.path??"",_=n.component.node_id,m=d?.metadata,g=(0,f.I)(n.component);if((0,s.kc)().dt_component_browser_optimistic_update_query?W({componentKey:g,status:"connected"}):g&&Y(e=>e?{...e,status:{...e.status,[g]:"connected"}}:{status:{[g]:"connected"},loadingStatus:"loaded"}),!d||!p)return;let h={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,author_name:E?.name,author_id:E?.id,state:"connected",type:"component_browser",figmadoc:JSON.stringify([{repository:m?.repository,name:l?.title}])}}},isSelectedFromSuggestion:!1,inputValue:""};S(e=>{let n=[...e];return n[t]={...h,isLoading:!0},n}),R({library_key:n.component.library_key,node_id:_,template:"",component_name:l?.title,source_path:p,status:"connected",repository:m?.repository,origin:o.location,entrypoint:o.entrypoint}).then(e=>{let c=e.data.meta.code_connect_id;S(e=>{let n=[...e];return n[t]={...h,isLoading:!1,component:{...h.component,code_connect_info:{...h.component.code_connect_info,v1:{...h.component.code_connect_info.v1,id:c,type:"component_browser",figmadoc:JSON.stringify([{repository:m?.repository,name:l?.title}])}}}},n}),z(u.F.enqueue({message:(0,a.t)("dev_handoff.component_browser.connected_message",{componentName:n.component.name}),type:(0,a.t)("dev_handoff.component_browser.connected_component")})),H({suggestions:I[n.assetKey],path:p,componentId:n.assetKey,componentName:l?.title??"",trackingProps:o,libraryKey:n.component.library_key}),A("track",b.I),r&&void 0!==i&&(T.current=i)}).catch(e=>{c.vF.error("Error creating code connect map",e),S(e=>{let o=[...e];return o[t]={...n,isLoading:!1},o}),z(u.F.enqueue({message:e.message,type:(0,a.t)("dev_handoff.component_browser.connect_component_error"),error:!0}))})},[A,R,z,S,E,Y,I,H,W]),J=(0,o.useCallback)(e=>{let{sourceIndex:n,value:o}=e,r=t[n];r&&S(e=>{let t=[...e];return t[n]={...r,inputValue:o},t})},[t,S]),ee=(0,o.useCallback)(e=>{let{row:n,sourceIndex:t,trackingProps:o,save:r=!0}=e,s=n.selectedFile,i=n.selectedComponent,d=s?.metadata?.path??"",l=n.component.node_id,p=n.component.code_connect_info.v1.id;if(!s||!d||(S(e=>{let o=[...e];return o[t]={...n,inputValue:""},o}),!r||!p))return;let _={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,author_name:E?.name,author_id:E?.id,state:"connected",type:"component_browser"}}},isLoading:!0,inputValue:""};S(e=>{let n=[...e];return n[t]={..._},n}),D({code_connect_id:p,library_key:n.component.library_key,node_id:l,template:"",component_name:i?.title,source_path:d,status:"connected"}).then(()=>{S(e=>{let n=[...e];return n[t]={..._,isLoading:!1,component:{..._.component,code_connect_info:{..._.component.code_connect_info,v1:{..._.component.code_connect_info.v1,id:p,type:"component_browser"}}}},n}),z(u.F.enqueue({message:(0,a.t)("dev_handoff.component_browser.updated_message",{componentName:n.component.name})})),X("component_browser.code_connect_component_updated",{componentName:i?.title??"",sourcePath:d,location:o.location,source:o.source,componentBrowserEntrypoint:o.entrypoint})}).catch(e=>{c.vF.error("Error updating code connect map",e),S(e=>{let o=[...e];return o[t]={...n,isLoading:!1},o}),z(u.F.enqueue({message:e.message,error:!0}))})},[D,z,S,X,E]),en=(0,o.useCallback)(e=>{let{sourceIndex:n,selectedComponent:o,action:r,save:c=!0}=e,a=t[n];if(a){if(X("component_browser.code_component_connection_data_entered",{nodeId:a?.component.node_id,field:"code_component",location:e.trackingProps.location,source:e.trackingProps.source,componentBrowserEntrypoint:e.trackingProps.entrypoint,value:e.selectedComponent?.title,sessionId:e.trackingProps.sessionId,queryId:e.trackingProps.queryId,action:r}),"create"===r){let t={...a,selectedComponent:o,inputValue:"",isSelectedFromSuggestion:!1};S(e=>{let o=[...e];return o[n]=t,o}),a.selectedFile&&c&&(a.component.code_connect_info.v1.id?ee({row:{...a,selectedComponent:o},sourceIndex:n,trackingProps:e.trackingProps}):$({row:{...a,selectedComponent:o},sourceIndex:n,trackingProps:e.trackingProps}))}else"delete"===r&&a&&ee({save:c,sourceIndex:n,row:{...a,selectedComponent:null,inputValue:"",isSelectedFromSuggestion:!1},trackingProps:e.trackingProps})}},[t,$,ee,S,X]),et=(0,o.useCallback)(e=>{let{sourceIndex:n,selectedFile:o,currentRowIndex:r,save:c=!0}=e,a=t[n];if(X("component_browser.code_component_connection_data_entered",{nodeId:a?.component.node_id,field:"code_file",location:e.trackingProps.location,source:e.trackingProps.source,componentBrowserEntrypoint:e.trackingProps.entrypoint,value:e.selectedFile?.title,sessionId:e.trackingProps.sessionId,queryId:e.trackingProps.queryId,action:o?"create":"delete"}),a){if(o){if(S(e=>{let t=[...e];return t[n]={...a,inputValue:"",selectedFile:o,isLoading:!1,isSelectedFromSuggestion:!1},t}),!c)return;$({row:{...a,selectedFile:o},sourceIndex:n,trackingProps:e.trackingProps})}else Z({currentRowIndex:r,codeConnectId:a.component.code_connect_info.v1.id,row:{...a,inputValue:"",selectedFile:null,selectedComponent:null,isSelectedFromSuggestion:!1},trackingProps:e.trackingProps})}},[t,$,Z,X,S]),eo=(0,o.useCallback)(e=>{let{row:n,sourceIndex:t,trackingProps:o,currentRowIndex:r,focusNextInput:c}=e;n.selectedFile||n.selectedComponent?n.selectedFile&&!n.selectedComponent?en({sourceIndex:t,selectedComponent:n.inputValue?{title:n.inputValue??""}:null,action:"create",trackingProps:o}):$({row:n,sourceIndex:t,trackingProps:o,focusNextInput:c,currentRowIndex:r}):et({sourceIndex:t,selectedFile:{title:n.inputValue??"",metadata:{path:n.inputValue??"",isCustomLink:!1,repository:{id:"",name:""}}},trackingProps:o})},[$,en,et]),er=(0,o.useCallback)(e=>{let{selectedComponents:n,bulkSuggestions:t,trackingProps:o,ignore:r}=e,s=[];n.forEach(e=>{let n=e.component.code_connect_info?.v1?.state;if("connected"===n||"ignored"===n)return;let o=(t[e.assetKey]||[])[0];o&&s.push({component:e,asset:{library_key:e.component.library_key,node_id:e.component.node_id,component_name:o.name||"",source_path:o.src_path||"",status:r?"ignored":"connected"},bestSuggestion:o})});let i=[];S(e=>{let n=[...e];return i=s.map(({component:e})=>n[e.sourceIndex]??e),s.forEach(({component:e,bestSuggestion:t})=>{let o=e.sourceIndex;void 0!==o&&n[o]&&(n[o]={...n[o],isLoading:!0,selectedFile:t?{title:t.src_path,metadata:{path:t.src_path,isCustomLink:!1,repository:{id:"",name:""}}}:null,selectedComponent:t&&t.name?{title:t.name}:null,inputValue:"",component:{...n[o].component,code_connect_info:{...n[o].component.code_connect_info,v1:{...n[o].component.code_connect_info.v1,state:r?"ignored":"connected",author_name:E?.name,author_id:E?.id}}}})}),n});let d={current:i};V({assets_to_map:s.map(e=>e.asset)}).then(e=>{let{success_count:n,successful_asset_mappings:t}=e.data.meta;S(n=>{let t=[...n];return e.data.meta.successful_asset_mappings.forEach(e=>{let n=t.findIndex(n=>n.assetKey===e.asset_key);-1!==n&&t[n]&&(t[n]={...t[n],isLoading:!1,component:{...t[n].component,code_connect_info:{...t[n].component.code_connect_info,v1:{...t[n].component.code_connect_info.v1,id:e.code_connect_id}}}})}),t});let i=async()=>{S(e=>{let n=[...e];return d.current.forEach(e=>{let t=n.findIndex(n=>n.assetKey===e.assetKey);-1!==t&&(n[t]=e)}),n});let e=[];for(let n of t)try{let t=d.current.find(e=>e.assetKey===n.asset_key);t&&("not_connected"===t.component.code_connect_info.v1.state||!t.component.code_connect_info.v1.state)&&e.push(n.code_connect_id)}catch(e){c.vF.error("Error preparing for bulk undo",e)}if(e.length>0)try{await U({code_connect_ids:e})}catch(e){z(u.F.enqueue({message:r?(0,a.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_undo_ignored"):(0,a.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_undo_connected"),error:!0}))}};z(u.F.enqueue({message:r?(0,a.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.confirmation_ignored",{count:n}):(0,a.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.confirmation_connected",{count:n}),icon:_.zX.CHECK_WITH_CIRCLE,button:{text:(0,a.t)("general.undo"),action:()=>{i()}}})),X(r?"component_browser.code_connect_components_bulk_ignored":"component_browser.code_connect_components_bulk_connected",{componentCount:s.length,location:o.location,source:o.source})}).catch(e=>{c.vF.error("Error connecting/ignoring components",e),S(e=>{let n=[...e];return s.forEach(({component:e},t)=>{let o=e.sourceIndex;void 0!==o&&n[o]&&i[t]&&(n[o]=i[t])}),n}),z(u.F.enqueue({message:r?(0,a.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_ignored"):(0,a.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_connected"),error:!0}))})},[V,S,z,E,X,U]),ec=(0,o.useCallback)(n=>{let t=n?.component;if(e?.assetKey!==n?.assetKey){if(L(-1),"componentBrowserLibrary"===B.view){let e={...B,componentKey:t&&(0,f.I)(t)||void 0};z(x.sf(e))}else if("fullscreen"===B.view){let e={...B,showDevModeComponentBrowser:!0,devModeComponentBrowserBackButtonTargetNodeId:t?.node_id,componentKey:t&&(0,f.I)(t)||void 0};z(x.sf(e))}}},[B,z,e?.assetKey]),ea=(0,o.useCallback)(()=>{if(!e){n[0]&&ec(n[0]);return}let t=n.findIndex(n=>(0,f.I)(n.component)===(0,f.I)(e.component));if(-1===t){-1!==P&&n[P]?ec(n[P]):n[0]&&ec(n[0]);return}let o=n[t+1];o&&ec(o)},[e,n,ec,P]),es=(0,o.useCallback)(()=>{if(!e){let e=n[n.length-1];e&&ec(e);return}let t=n.findIndex(n=>(0,f.I)(n.component)===(0,f.I)(e.component));if(-1===t){let e=n[P-1];-1!==P&&e?ec(e):n[0]&&ec(n[0]);return}let o=n[t-1];o&&ec(o)},[e,n,ec,P]),ei=(0,o.useCallback)(({filepath:e,componentName:n,item:t,currentRowIndex:o,sourceIndex:r,sessionId:c,aiSuggestionConfidenceScore:a,suggestionSelectionInterface:s})=>{eo({row:{...t,selectedFile:{title:e,metadata:{path:e,isCustomLink:!1,repository:{id:"",name:""}}},selectedComponent:n?{title:n}:null},currentRowIndex:o,sourceIndex:r,trackingProps:{location:"list_view",source:"ai_codebase_suggestion",entrypoint:N,sessionId:c,codebaseComponentConfidenceScore:a,suggestionSelectionInterface:s}})},[eo,N]);return{onDeleteMapping:Z,onFileChanged:et,onComponentChanged:en,onConnectMapping:e=>{let{row:n}=e,t=n.sourceIndex,o=n.component,r=n.selectedFile,s=r?.metadata?.path??"",i=n.selectedComponent,d=n.component.node_id,l=r?.metadata?.repository;if(r&&s){let p={...n,component:{...o,code_connect_info:{...o.code_connect_info,v1:{...o.code_connect_info.v1,state:"connected",author_name:E?.name,author_id:E?.id}}},selectedFile:r,selectedComponent:i,inputValue:""};S(e=>{let n=[...e];return n[t]={...p,isLoading:!0},n}),R({library_key:n.component.library_key,node_id:d,template:"",component_name:i?.title,source_path:s,status:"connected",origin:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint,repository:l}).then(o=>{let r=o.data.meta.code_connect_id;S(e=>{let n=[...e];return n[t]={...p,isLoading:!1,component:{...p.component,code_connect_info:{...p.component.code_connect_info,v1:{...p.component.code_connect_info.v1,id:r,figmadoc:JSON.stringify([{repository:l,name:i?.title}])}}}},n}),z(u.F.enqueue({message:(0,a.t)("dev_handoff.component_browser.connected_message",{componentName:n.component.name}),type:(0,a.t)("dev_handoff.component_browser.connected_component")})),X("component_browser.code_connect_component_connected",{componentName:i?.title??"",componentId:n.assetKey,sourcePath:s,location:e.trackingProps.location,source:e.trackingProps.source,componentBrowserEntrypoint:e.trackingProps.entrypoint,sessionId:e.trackingProps.searchSessionId,pickedSuggestionConfidenceScore:e.trackingProps.codebaseComponentConfidenceScore,suggestionSelectionInterface:e.trackingProps.suggestionSelectionInterface}),e.callback?.()}).catch(o=>{c.vF.error("Error creating code connect map",o),S(e=>{let o=[...e];return o[t]={...n,isLoading:!1},o}),z(u.F.enqueue({message:o.message,type:(0,a.t)("dev_handoff.component_browser.connect_component_error"),error:!0})),e.callback?.(o)})}},onIgnoreMapping:e=>{let{row:n}=e,t=n.sourceIndex,o=n.component.node_id,r={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,state:"ignored"}}},selectedComponent:null,selectedFile:null,inputValue:"",isSelectedFromSuggestion:!1};S(e=>{let n=[...e];return n[t]=r,n}),R({library_key:n.component.library_key,node_id:o,status:"ignored",origin:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint}).then(o=>{let c=o.data.meta.code_connect_id,i=(0,f.I)(n.component);(0,s.kc)().dt_component_browser_optimistic_update_query?W({componentKey:i,status:"ignored"}):i&&Y(e=>e?{...e,status:{...e.status,[i]:"ignored"}}:{status:{[i]:"ignored"},loadingStatus:"loaded"}),S(e=>{let n=[...e];return n[t]={...r,component:{...r.component,code_connect_info:{...r.component.code_connect_info,v1:{...r.component.code_connect_info.v1,id:c,author_name:E?.name,author_id:E?.id}}}},n}),X("component_browser.code_connect_component_ignored",{nodeId:n.component.node_id,location:e.trackingProps.location,componentBrowserEntrypoint:e.trackingProps.entrypoint}),z(u.F.enqueue({message:(0,a.t)("dev_handoff.component_browser.ignored_message",{componentName:n.component.name}),type:(0,a.t)("dev_handoff.component_browser.ignored_component")})),e.callback?.()}).catch(o=>{c.vF.error("Error ignoring code connect map",o),S(e=>{let o=[...e];return o[t]=n,o}),z(u.F.enqueue({message:o.message,type:(0,a.t)("dev_handoff.component_browser.ignore_component_error"),error:!0})),e.callback?.(o)})},onBulkConfirmSuggestions:er,onDisplayedComponentChanged:ec,onDisplayNextComponent:ea,onDisplayPreviousComponent:es,updateConnection:ee,onConfirmConnection:eo,onConfirmSuggestion:ei,onValueChange:J,onUpdateUserRules:(0,o.useCallback)(e=>{let{row:n,userRules:t}=e,o=n.component.code_connect_info.v1.id,r=n.sourceIndex;if(!o)return;let s=(0,v.y)(n.component.code_connect_info.v1.figmadoc),i={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,figmadoc:JSON.stringify([{...s,user_rules:t}])}}}};S(e=>{let n=[...e];return n[r]={...i,isLoading:!0},n}),G({code_connect_id:o,user_rules:t}).then(()=>{S(e=>{let n=[...e];return n[r]={...i,isLoading:!1},n}),z(u.F.enqueue({message:(0,a.t)("dev_handoff.component_browser.user_rules_updated")}))}).catch(e=>{c.vF.error("Error updating user rules",e),S(e=>{let t=[...e];return t[r]={...n,isLoading:!1},t}),z(u.F.enqueue({message:e.message,error:!0}))})},[G,z,S]),inputRefs:O,onActiveRowChange:K,activeRowKey:F}}},226775:(e,n,t)=>{t.d(n,{y:()=>h});var o=t(105652),r=t(270450),c=t(964622),a=t(391596),s=t(587420),i=t(505846),d=t(437575),l=t(420248),p=t(366200),u=t(141692),_=t(367877),m=t(682488);function f(e,n,t,o){return{component:{...e,code_connect_info:{...e.code_connect_info,v1:{...e.code_connect_info.v1,...o}}},assetKey:(0,d.Av)(e),sourceIndex:n,isLoading:!1,sourceGuid:t,selectedFile:null,selectedComponent:null,inputValue:""}}var g=t(223487);function h({libraryKey:e,componentKey:n,componentsAndStateGroups:t,defaultFilter:h,assetKeyToSourceGuid:y}){let b=(0,c.OG)(e),v=b?.selectedRepositories?.[0],x=(0,r.kc)().dt_component_browser_improved_suggestions,[w,k]=(0,o.useState)([]),[C,j]=(0,o.useState)(""),[S,I]=(0,o.useState)(h),[N,E]=(0,o.useState)("status"),[A,P]=(0,o.useState)([]),L=(0,o.useMemo)(()=>w.findIndex(e=>(0,u.I)(e.component)===n),[w,n]),O=(0,o.useMemo)(()=>w[L]??null,[w,L]),{bulkSuggestions:F,isLoadingSuggestions:M}=function(e,n,t=!1){let{planType:c,planId:p}=(0,i.jb)(),[u,_]=(0,o.useState)({suggestions:{},tracking:{}}),m=(0,o.useRef)(new Set),f=(0,o.useMemo)(()=>n?n.components.map(e=>(0,d.Av)(e)).join(","):"",[n]);(0,o.useEffect)(()=>{m.current.clear(),_({suggestions:{},tracking:{}})},[f]);let g=(0,o.useMemo)(()=>t&&n?n.components.map(e=>(0,d.Av)(e)):e.map(e=>e.assetKey),[e,t,n]),h=(0,o.useMemo)(()=>g.filter(e=>!m.current.has(e)),[g]),y=(0,o.useMemo)(()=>n&&0!==h.length?n.components.filter(e=>{let n=(0,d.Av)(e);return h.includes(n)}):[],[n,h]),b=(0,o.useMemo)(()=>h.join(","),[h]),v=(0,o.useMemo)(()=>y.map(e=>({type:e.type,key:(0,d.Av)(e),library_key:e.library_key})),[b]),x=(0,r.kc)().dt_component_browser_bulk_mapping||(0,r.kc)().dt_component_browser_inline_suggestions||(0,r.kc)().dt_component_browser_suggestions_debug,w=(0,o.useMemo)(()=>({assets:v,plan_parent_id:p,plan_parent_type:c,num_results_per_asset:5}),[b,p,c]),k=v.length>0&&x,C=(0,o.useMemo)(()=>k?(0,l.a)():"",[w,k]),[j]=(0,a.IT)((0,s.Mo)({...w,query_id:C,session_id:C}),{enabled:k});return(0,o.useEffect)(()=>{if("loaded"===j.status&&j.data&&j.data.results){let e=j.data.results,n=0,t=0,o=j.data.requestParams.assets.length,r={};j.data.requestParams.assets.forEach(o=>{m.current.add(o.key);let c=e[o.key];c&&(n+=1,t+=c.length);let a=c?.[0],s=a?.score||null;r[o.key]=s??-1}),_(c=>{let a=j.data.requestParams.session_id,s={...c};return Object.keys(e).forEach(n=>{let t=e[n];t&&(s.suggestions[n]=t.map(e=>({...e,session_id:j.data.requestParams.session_id})))}),a&&(s.tracking[a]={numOfComponents:o,numComponentsWithSuggestions:n,totalSuggestionsCount:t,numComponentsWithoutSuggestions:o-n,confidenceScores:r}),s})}},[j.status,j.data,j.errors,v]),{bulkSuggestions:u,isLoadingSuggestions:"loading"===j.status}}(A,t,"suggestionsAvailable"===S),{filteredComponents:{all:T,connected:K,notConnected:B,ignored:z,suggestionsAvailable:R},componentCounts:q}=function({bulkSuggestions:e,componentBrowserListRowData:n}){let t=(0,r.kc)().dt_component_browser_improved_suggestions,[c,a,s,i,d]=(0,o.useMemo)(()=>{let e=[],t=[],o=[],r=[],c=[];return n.forEach(n=>{e.push(n),"connected"===n.component.code_connect_info.v1.state&&t.push(n),"not_connected"===n.component.code_connect_info.v1.state&&o.push(n),"ignored"===n.component.code_connect_info.v1.state&&r.push(n),n.isSelectedFromSuggestion&&c.push(n)}),[e,t,o,r,c]},[n]),l=(0,o.useMemo)(()=>t?d:s.filter(n=>n.assetKey in e),[e,d,t,s]),p=(0,o.useMemo)(()=>({all:c.length,connected:a.length,notConnected:s.length,ignored:i.length,suggestionsAvailable:l.length}),[c.length,a.length,s.length,i.length,l.length]);return{filteredComponents:{all:c,connected:a,notConnected:s,ignored:i,suggestionsAvailable:l},componentCounts:p}}({bulkSuggestions:F.suggestions,componentBrowserListRowData:w}),D=(0,o.useMemo)(()=>{let e=[];return"all"===S?e=T:"connected"===S?e=K:"notConnected"===S?e=B:"ignored"===S?e=z:"suggestionsAvailable"===S&&(e=R),C&&(e=e.filter(e=>e.component.name.toLocaleLowerCase().includes(C.toLocaleLowerCase()))),[...e].sort((e,n)=>{if("alphabetically"===N){if(e.component.name<n.component.name)return -1;if(e.component.name>n.component.name)return 1}else if("insertions"===N){let t=e.component.insertions||0,o=n.component.insertions||0;if(t>o)return -1;if(t<o)return 1;if(e.component.name<n.component.name)return -1;if(e.component.name>n.component.name)return 1}else if("status"===N){let t=e=>"not_connected"===e?0:"connected"===e?1:"ignored"===e?2:0,o=t(e.component.code_connect_info.v1.state),r=t(n.component.code_connect_info.v1.state);if(o<r)return -1;if(o>r)return 1;if(e.component.name<n.component.name)return -1;if(e.component.name>n.component.name)return 1}return 0}).map((e,n)=>({...e,currentRowIndex:n}))},[S,C,N,T,K,B,z,R]),G=(0,p.w)(y);(0,o.useEffect)(()=>{if(!t)return;let{components:e}=t;k(n=>(function(e,n,t,o,r,c){let a=[],s=new Map;return c?.forEach(e=>{s.set(e.assetKey,e)}),e.forEach((e,c)=>{let i;let l=(0,d.Av)(e),p=t?.[l]??e.node_id,u=e.code_connect_info.v1.figmadoc,g=s.get(l),h=g?.component.code_connect_info.v1??e.code_connect_info.v1;if(u)try{let n=(0,m.y)(u);i={component:{...e,code_connect_info:{...e.code_connect_info,v1:{...e.code_connect_info.v1,...h}}},assetKey:(0,d.Av)(e),sourceIndex:c,isLoading:!1,sourceGuid:p,selectedFile:n?.source?{title:n.source,metadata:{path:n.source,isCustomLink:!1,repository:{id:"",name:""}}}:null,selectedComponent:n?.component?{title:n.component}:null,inputValue:""}}catch(n){_.vF.error("Error parsing figmadoc",n),i=f(e,c,p,h)}else i=f(e,c,p,h);g&&(g.selectedFile||g.selectedComponent||g.inputValue&&g.inputValue.length>0)?i={...i,selectedFile:g.selectedFile,selectedComponent:g.selectedComponent,inputValue:g.inputValue,isSelectedFromSuggestion:g.isSelectedFromSuggestion,sessionId:g.sessionId}:n&&o&&"not_connected"===e.code_connect_info.v1.state&&(i=function(e,n,t){let o=n[0];if(!o)return e;let r={title:o.src_path.split("/").pop()||"",subtitle:o.src_path,metadata:{path:o.src_path,isCustomLink:!1,repository:{id:o.github_repository_id??t?.id??"",name:o.github_repository_name??t?.name??""}}},c={title:o.name};return{...e,selectedFile:r,selectedComponent:c,isSelectedFromSuggestion:!0,sessionId:o.session_id}}(i,o[l]??[],r)),a.push(i)}),a})(e,x??!1,G.current,F.suggestions,v,n))},[v,G,t,F,k,x]);let V=(0,o.useCallback)(e=>w.findIndex(n=>(0,u.I)(n.component)===(0,u.I)(e)),[w]),U=(0,g._G)(),H=(0,o.useMemo)(()=>new Set(T.map(e=>e.component.library_key).filter(e=>e!==U)),[T,U]),Y=(0,o.useCallback)(e=>{P(e)},[P]);return{paginationInfo:{notConnectedComponents:B.length,connectedComponents:K.length,ignoredComponents:z.length,suggestionsAvailableComponents:R.length},connectedComponents:K,notConnectedComponents:B,externalLibraryKeysInFile:H,ignoredComponents:z,suggestionsAvailableComponents:R,searchQuery:C,setSearchQuery:j,dropdownFilter:S,setDropdownFilter:I,sortBy:N,setSortBy:E,displayedComponent:O,displayedComponentIndex:L,filteredComponents:D,componentBrowserListRowData:w??[],setComponentBrowserListRowData:k,getIndexOfComponent:V,bulkSuggestions:F,isLoadingSuggestions:M,componentCounts:q,visibleItems:A,onVisibleItemsChange:Y}}},742629:(e,n,t)=>{t.d(n,{U:()=>i});var o=t(239976),r=t(105652),c=t(224542),a=t.n(c),s=t(183757);function i(e){let n=(0,r.useRef)(null),[t,c]=(0,r.useState)(0),[i,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=n.current;if(!e)return;let t=new ResizeObserver(n=>{for(let t of n)t.target===e&&c(t.contentRect.height)});return t.observe(e),()=>{t.disconnect()}},[]);let l=Math.floor((t-18)/18),p=l-2,{section:u,..._}=e,m=(0,r.useMemo)(()=>{let e=[...u.lines];for(;e.length<l;)e.push({code:"",indent:0});return{...u,lines:e,collapseAfterIndex:u.lines.length>l?p:l}},[u,l,p]);return(0,o.jsx)("div",{ref:n,className:"code_panel_responsive--codePanelResponsiveOuterDiv--NEUt2",children:(0,o.jsx)("div",{className:a()("code_panel_responsive--codePanelResponsiveInnerDiv--UIVn2",{"code_panel_responsive--codePanelResponsiveInnerDivExpanded--mIrqZ":i}),children:p>0&&(0,o.jsx)(s.yT,{..._,section:m,onShowMore:()=>d(!0)})})})}},141692:(e,n,t)=>{function o(e){return"key"in e?e.key:"component_key"in e?e.component_key:null}t.d(n,{I:()=>o,W:()=>r});let r={all:{value:"all"},connected:{value:"connected"},notConnected:{value:"notConnected"},ignored:{value:"ignored"},suggestionsAvailable:{value:"suggestionsAvailable"}}},777645:(e,n,t)=>{t.d(n,{I:()=>o,s:()=>r});let o="code_connect_library_created_connection",r="code_connect_library_loaded"},864314:(e,n,t)=>{function o(e){return r(e.components||[],e.state_groups||[])}function r(e,n){let t=[],o={},r={};return n.forEach(e=>{r[e.node_id]={...e,updated_at:e.updated_at||"",variants:[]},o[e.key]={...e,updated_at:e.updated_at||"",variants:[]}}),e.forEach(e=>{let n=e.containing_frame?.containingStateGroup?.nodeId,c=n&&r[n]?.key;c&&o[c]?o[c].variants.push(e):t.push(e)}),Object.values(o).forEach(e=>{t.push(e)}),{components:t}}t.d(n,{h:()=>o,r:()=>r})},207742:(e,n,t)=>{t.d(n,{O:()=>m});var o=t(239976),r=t(105652),c=t(497503),a=t(943360),s=t(269751),i=t(905343),d=t(62557),l=t(297860),p=t(379141);let u="component_browser_progress_bar--iconWrapper--QTYOe",_=[{key:"connected",color:"var(--color-icon-component)",renderIcon:()=>(0,o.jsx)("div",{className:u,style:{backgroundColor:"var(--color-bg-component-tertiary)"},children:(0,o.jsx)(d.s,{style:{"--color-icon":"var(--color-icon-component)"}})})},{key:"notConnected",color:"var(--color-icon-tertiary)",renderIcon:()=>(0,o.jsx)("div",{className:u,children:(0,o.jsx)(d.s,{})})},{key:"ignored",color:"var(--color-border)",renderIcon:()=>(0,o.jsx)("div",{className:u,children:(0,o.jsx)(l.r,{})})}];function m({componentCounts:e,width:n=104}){let t=e.all,d=e.connected,[l,u]=(0,r.useState)(!1),{getTriggerProps:m,getContainerProps:f}=c.fP({isOpen:l,onOpenChange:u,type:"dialog",placement:"bottom-end",openOnHover:!0,offset:4,softDismiss:!0});if(0===t)return null;let g=_.map(n=>({...n,count:e[n.key],percentage:e[n.key]/t*100})),h=(0,p.t)("dev_handoff.component_browser.progress_bar.aria_label",{connected:d,total:t}),y=`${h}. ${(0,p.t)("dev_handoff.component_browser.progress_bar.button_label")}`;function b(e){switch(e.key){case"connected":return(0,p.t)("dev_handoff.component_browser.progress_bar.connected",{percentage:Math.round(e.percentage)});case"ignored":return(0,p.t)("dev_handoff.component_browser.progress_bar.skipped",{percentage:Math.round(e.percentage)});case"notConnected":return(0,p.t)("dev_handoff.component_browser.progress_bar.not_connected",{percentage:Math.round(e.percentage)});default:return""}}let v=l?`${(0,p.t)("dev_handoff.component_browser.progress_bar.window_title")}. ${g.map(e=>b(e)).join(". ")}`:"";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.E,{...m({"aria-label":y}),className:"component_browser_progress_bar--progressBarWrapper--uzguR",children:(0,o.jsx)("div",{className:"component_browser_progress_bar--progressBar--3Z4Ug",role:"img","aria-label":h,style:{width:`${n}px`},children:g.filter(e=>e.count>0).map((e,n)=>(0,o.jsx)("div",{className:"component_browser_progress_bar--progressSegment--pv9dj",style:{width:`${e.percentage}%`,backgroundColor:e.color,marginLeft:n>0?"1px":"0"},"aria-hidden":"true"},e.key))})}),(0,o.jsx)(c.mc,{...f(),className:"component_browser_progress_bar--hoverWindow--eGUCF",role:"region","aria-label":(0,p.t)("dev_handoff.component_browser.progress_bar.window_title"),children:(0,o.jsxs)(i.fv,{gap:12,children:[(0,o.jsx)("h2",{className:"component_browser_progress_bar--windowTitle--7RN3T",children:(0,p.t)("dev_handoff.component_browser.progress_bar.window_title")}),(0,o.jsx)(i.fv,{gap:12,children:g.map(e=>(0,o.jsxs)(i.fI,{gap:12,align:"center",children:[(0,o.jsx)("span",{"aria-hidden":"true",children:e.renderIcon()}),(0,o.jsx)("span",{className:"component_browser_progress_bar--statLabel--MTvP1",children:b(e)})]},e.key))})]})}),(0,o.jsx)(s.T,{screenReaderOnly:!0,children:v})]})}},173943:(e,n,t)=>{t.d(n,{Q:()=>eB});var o=t(239976),r=t(105652),c=t(20002),a=t(385965),s=t(865702),i=t(295870),d=t(942356),l=t(423407),p=t(291595),u=t(692376),_=t(22291),m=t(379141),f=t(270450),g=t(127446),h=t(224542),y=t.n(h),b=t(522568),v=t(586572),x=t(129416),w=t(13421),k=t(106701),C=t(183757),j=t(997594),S=t(779267),I=t(742629),N=t(892925),E=t(254056),A=t(445019),P=t(723850),L=t(393463),O=t(21698),F=t(366200),M=t(437575),T=t(207742);function K({children:e,componentCounts:n,entrypoint:t}){let c=(0,P.hC)(),a=(0,r.useRef)(null),s=(0,S.ju)();return(0,o.jsx)(d.IK,{ref:a,variant:"secondary",onClick:()=>{c("component_browser.in_context.window_opened",{all:n.all,connected:n.connected,ignored:n.ignored,notConnected:n.notConnected,componentBrowserEntrypoint:t}),s({componentBrowserEntrypoint:t,componentBrowserScope:"page_or_selection"})},children:e})}var B=t(652154),z=t(456556),R=t(775667),q=t(816158),D=t(102869);let G="component_browser_in_context_mapping_section--container--hbCcL",V="component_browser_in_context_mapping_section--description--UKLri",U="component_browser_in_context_mapping_section--badgeContainer--mqrx6";function H({numComponents:e,componentCounts:n,isLoading:t,hasNoSelection:r,isSelectedNodeSectionOrFrame:c}){let a=n.connected+n.ignored;return(0,o.jsxs)("div",{className:"component_browser_in_context_mapping_section--panelAccessoryContainer--Xa9Td",children:[(0,o.jsx)("div",{className:"component_browser_in_context_mapping_section--alphaTag--MdIy5",children:!(0,f.kc)().dt_component_browser_beta_badge_hidden&&(0,o.jsx)(l.E,{variant:"inactiveOutline",size:"md",children:(0,m.tx)("dev_handoff.component_browser.beta")})}),r&&n.connected>=1&&!t&&(0,o.jsx)("div",{className:"component_browser_in_context_mapping_section--progressBarContainer---IPWb",children:(0,o.jsx)(T.O,{componentCounts:n,width:68})}),r&&0===n.connected&&!t&&(0,o.jsx)("div",{className:U,children:(0,o.jsx)(l.E,{variant:"inactiveOutline",size:"md",children:(0,m.tx)("dev_handoff.component_browser.in_context_no_components")})}),c&&(0,o.jsxs)(o.Fragment,{children:[0===e&&(0,o.jsx)("div",{className:U,children:(0,o.jsx)(l.E,{variant:"inactiveOutline",size:"md",children:(0,m.tx)("dev_handoff.component_browser.in_context_no_components")})}),e>=1&&!t&&(0,o.jsx)("div",{className:U,children:n.ignored===e?(0,o.jsx)(l.E,{variant:"inactiveOutline",children:(0,m.t)("dev_handoff.figmadocs.skipped")}):a===e?(0,o.jsx)(l.E,{variant:"componentOutline",size:"md",children:(0,m.tx)("dev_handoff.component_browser.in_context_num_connected",{number:n.connected})}):(0,o.jsx)(l.E,{variant:"inactiveOutline",size:"md",children:(0,m.tx)("dev_handoff.component_browser.in_context_num_not_connected",{number:n.notConnected})})})]})]})}function Y(){let e=(0,P.hC)(),n=(0,A.md)(q.m),t=(0,D.oA)(),{assetKeys:c}=(0,O.AR)(),a=new Set(c),s=function(e,n){if(!n||0===Object.keys(n.status).length)return{connected:0,ignored:0,notConnected:e.length,all:e.length,suggestionsAvailable:0};let t=e.map(e=>({assetKey:e})),o=0,r=0,c=0;return(t||[]).forEach(e=>{if(n.status[e.assetKey]){let t=n.status[e.assetKey];t&&("connected"===t?o++:"ignored"===t?r++:"not_connected"===t&&c++)}}),{connected:o,ignored:r,notConnected:c,all:o+r+c,suggestionsAvailable:0}}((0,M.kf)(a,t),n),{numComponents:i,totalWithStatus:d}=function(e){let n=Math.round(e.connected/e.all*100),t=Math.round(e.ignored/e.all*100),o=Math.round((e.ignored+e.connected)/e.all*100);return{numComponents:e.all,totalConnected:e.connected,totalWithStatus:e.connected+e.ignored,connectedPercentage:n,ignoredPercentage:t,connectedAndIgnoredPercentage:o,notConnectedPercentage:100-n-t}}(s),l=(0,r.useRef)(null),p=function(){let e=(0,B.uQ)();return(0,z.Fk)((e,n)=>{let t=e?.get(n??"");return t?.type==="TEXT"},e)}(),u=function(){let e=(0,B.uQ)();return(0,z.Fk)((e,n)=>{let t=e?.get(n??"");return t?.type==="SECTION"||t?.type==="FRAME"},e)}(),_=!(0,B.uQ)(),f=n?.loadingStatus==="loading",g=(0,F.w)(s);return((0,r.useEffect)(()=>{p||f||e("component_browser.in_context.inspect_panel_item_seen",g.current)},[e,p,f,g]),!p&&(u||_))?(0,o.jsxs)(R.VZ,{title:(0,m.t)("dev_handoff.component_browser.in_context_section_title"),recordingKey:"in_context_code_connect",collapsiblePanelKey:0===i?void 0:"in_context_code_connect",titleAccessory:(0,o.jsx)(H,{numComponents:i,componentCounts:s,isLoading:f,hasNoSelection:_,isSelectedNodeSectionOrFrame:u}),children:[_&&i>0&&(0,o.jsxs)("div",{ref:l,className:G,children:[(0,o.jsx)("div",{className:V,children:(0,m.tx)("dev_handoff.component_browser.in_context_section_body_description",{value:(0,o.jsx)(E.N,{newTab:!0,href:`${(0,L.TJ)()}/docs/code-connect/code-connect-ui-setup/`,children:(0,m.tx)("dev_handoff.component_browser.in_context_section_learn_more")})})}),(0,o.jsx)(K,{componentCounts:s,entrypoint:"inspect_panel",children:!n||f?(0,m.t)("dev_handoff.component_browser.in_context_section_map_components_button"):(0,m.t)("dev_handoff.component_browser.in_context_connect_components")})]}),u&&i>0&&(0,o.jsx)("div",{ref:l,className:G,children:(0,o.jsx)("div",{className:"component_browser_in_context_mapping_section--buttonContainer--W-3w5",children:(0,o.jsx)(K,{componentCounts:s,entrypoint:"inspect_panel",children:!n||f?(0,m.t)("dev_handoff.component_browser.in_context_section_map_components_button"):d===i?(0,m.t)("dev_handoff.component_browser.in_context_section_view_connections_button"):(0,m.t)("dev_handoff.component_browser.in_context_connect_components")})})}),0===i&&(0,o.jsx)("div",{className:G,children:(0,o.jsx)("div",{className:V,children:(0,m.tx)("dev_handoff.component_browser.in_context_section_body_description_no_components",{value:(0,o.jsx)(E.N,{newTab:!0,href:"https://help.figma.com/hc/articles/360025508373-Publish-a-library",children:(0,m.tx)("dev_handoff.component_browser.in_context_section_learn_more")})})})})]}):null}var W=t(427324),X=t(862390),Q=t(964731),Z=t(384203),$=t(223487),J=t(605985),ee=t(378944),en=t(890030),et=t(421564),eo=t(248046),er=t(624631),ec=t(970508);let ea=new(t(119301)).b({name:"code-connect",dependencies:[],routeHints:[],exports:{"./code_connect_atoms":"./code_connect_atoms.ts","./figmadoc":"./figmadoc.ts","./figmadoc_preview":"./figmadoc_preview.ts","./typings":"./typings.ts","./code_connect_view":"./code_connect_view.ts","./preload_code_connect":"./preload_code_connect.ts","./format_code":"./format_code.ts"},friendFiles:[],eslint:{rules:{"@typescript-eslint/no-explicit-any":"off"}}}).createLazyComponent(()=>t.e(9993).then(t.bind(t,205948)).then(e=>e.CodeConnectSection),{loading:()=>null,error:ec.H4.NONE,componentName:"CodeConnectSection"});var es=t(468673),ei=t(262770),ed=t(943360),el=t(888903),ep=t(287736);let eu="component_info_table--componentsValue--LS3Js";function e_({rows:e}){let n=(0,c.wA)(),t=r.useCallback(async(e,t)=>{try{await navigator.clipboard.writeText(e)}catch{let n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}n(el.F.enqueue({type:"component-browser-copy-success",message:"component"===t?(0,m.t)("dev_handoff.component_browser_mapping_panel.componentNameCopied"):(0,m.t)("dev_handoff.component_browser_mapping_panel.sourceUrlCopied"),icon:ep.zX.CHECK}))},[n]),a=r.useCallback((e,n)=>{t("string"==typeof e?e:"",n?.includes("component")?"component":"source")},[t]);return(0,o.jsx)("div",{className:"component_info_table--container--AI--C",children:e.map((e,n)=>(0,o.jsxs)("div",{className:"component_info_table--componentsRow--We3a8",children:[(0,o.jsx)("div",{className:"component_info_table--componentsLabel--I2KgC",children:e.label}),e.copyable?(0,o.jsx)("div",{className:eu,children:(0,o.jsx)(ed.E,{className:`${eu} component_info_table--copyButton--oqrbN`,onClick:()=>a(e.value,e.copyAriaLabel),"aria-label":e.copyAriaLabel,style:e.rtl?{direction:"rtl"}:{direction:"ltr"},children:e.value})}):(0,o.jsx)("div",{className:eu,style:e.rtl?{direction:"rtl"}:{direction:"ltr"},children:e.value})]},n))})}function em({doc:e}){let n=(0,S.Au)(),t=[...e.component?[{label:(0,m.t)("dev_handoff.component_browser.in_context_component_name"),value:"string"==typeof e.component?e.component:"",copyable:!0,copyAriaLabel:(0,m.t)("dev_handoff.component_browser_mapping_panel.copyComponentNameAriaLabel"),rtl:!1}]:[],{label:(0,m.t)("dev_handoff.component_browser.in_context_component_file"),value:"string"==typeof e.source?e.source:"",copyable:!0,copyAriaLabel:(0,m.t)("dev_handoff.component_browser_mapping_panel.copySourceUrlAriaLabel"),rtl:!0}];return(0,o.jsxs)("div",{className:"component_browser_mapping_panel--container--qEdzN",children:[(0,o.jsx)(e_,{rows:t}),(0,o.jsx)("div",{className:"component_browser_mapping_panel--buttonContainer--iDICJ",children:(0,o.jsx)(d.IK,{variant:"secondary",onClick:n?()=>n({componentBrowserEntrypoint:"inspect_panel",componentBrowserScope:"page_or_selection"}):void 0,children:(0,m.t)("dev_handoff.component_browser_mapping_panel.viewConnectionButton")})})]})}var ef=t(497503),eg=t(454705);let eh="figmadocs--errorBannerWrapper--CPtw-";function ey({notConnected:e,skipped:n}){let t=(0,o.jsx)(E.N,{href:"https://www.figma.com/code-connect-docs/","aria-label":(0,m.t)("dev_handoff.figmadocs.learn_more"),trusted:!0,newTab:!0,children:(0,m.tx)("dev_handoff.figmadocs.learn_more")});return(0,o.jsx)(eg.J,{brand:"dev-handoff",mode:"dark",children:(0,o.jsx)("div",{className:"figmadocs--ccBadgeTooltip--8zIVn",children:e?(0,m.tx)("dev_handoff.figmadocs.not_connected_tooltip",{learnMore:t}):n?(0,m.tx)("dev_handoff.figmadocs.skipped_tooltip",{learnMore:t}):(0,m.tx)("dev_handoff.figmadocs.connected_tooltip",{learnMore:t})})})}let eb={boxShadow:"var(--elevation-500)",borderRadius:"var(--radius-medium)",backgroundColor:"var(--color-bg-tooltip)","--color-bg":"var(--color-bg-tooltip)"},ev={type:"dialog",openOnHover:!0,placement:"bottom-end",softDismiss:!0};function ex({hideTooltip:e}){let[n,t]=r.useState(!1),{getTriggerProps:c,getContainerProps:a,getArrowProps:s}=ef.fP({isOpen:n,onOpenChange:t,...ev});return e?(0,o.jsx)(l.E,{variant:"componentOutline",children:(0,m.tx)("dev_handoff.figmadocs.connected")}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ed.E,{"aria-label":(0,m.t)("dev_handoff.figmadocs.connected"),...c(),children:(0,o.jsx)(l.E,{variant:"componentOutline",children:(0,m.tx)("dev_handoff.figmadocs.connected")})}),(0,o.jsxs)(ef.mc,{...a({style:eb}),children:[(0,o.jsx)(ef.i3,{...s()}),(0,o.jsx)(ey,{})]})]})}var ew=t(948629),ek=t(279758),eC=t(309742),ej=t(943866),eS=t(934650),eI=t(977030);function eN({doc:e,additionalHeaderActions:n,instanceFigmadocs:t,isPlayground:c,onInstancePillClick:d,copyButtonContainer:l,availableLabels:p,setSelectedLabel:g,dropdownShown:h,dispatch:v,dropdownIdToUse:j,showCodeOnly:S}){let N=(0,J.iZ)(),E=(0,$.q5)(),A=(0,B.uQ)(),P=(0,Z.eY)(),{backingNodeId:L,backingComponentKey:O,backingStateGroupKey:F,backingLibraryKey:M}=(0,es.HX)(A??"",P,null),T=(0,Z.T3)();c&&(P=T);let K=(0,k.Ur)(e.template,t,c),z=(0,_.l)(M??""),q=function(e){let n=(0,ee.bj)([e]).data[0],t=null;return n&&((0,et.ZA)(n)&&(0,et.xA)(n)?t=n.hub_file_id:"library_file_key"in n&&(t=n.library_file_key)),t}(z),D=function(e){let n=ee.bj([e])?.data?.[0];return!!n&&(0,et.ZA)(n)&&(0,et.xA)(n)}(z);!function({backingLibraryKey:e,result:n,backingComponentKey:t,backingStateGroupKey:o}){let c=(0,eS.X)(e?(0,_.l)(e):null);(0,eC.h)(()=>{b.az.trackDefinedEvent("code_connect.code_connect_rendered",{partnerType:c,componentKey:t,stateGroupKey:o})});let a=n?.result==="ERROR"&&n?.data?.error?n.data.error.type:null,s=(0,ej.ZC)(a);r.useEffect(()=>{a!==s&&a&&b.az.trackDefinedEvent("code_connect.code_connect_error",{partnerType:c,errorType:a,componentKey:t,stateGroupKey:o})},[a,s,c,t,o])}({backingLibraryKey:M,result:K,backingComponentKey:O,backingStateGroupKey:F});let G=r.useCallback(e=>{d?d(e):u.w3z.selectAndPanToNode(e)},[d]),V=r.useCallback(()=>{(0,b.sx)("code_connect_clicked",{user_id:N?.id,is_playground:c,node_id:L,file_key:q,...E?.key===q?{file_team_id:E?.teamId,file_org_id:E?.parentOrgId}:{},label:e.label,component_key:O,state_group_key:F,library_key:M})},[N?.id,c,L,E?.key,E?.teamId,E?.parentOrgId,e.label,O,F,M,q]);if(!K)return null;if(!K?.data){let e="Error evaluating Code Connect template: execution result is missing data";return console.error(e,{result:K}),(0,x.$D)(i.e.CODE_CONNECT,Error(e),{extra:{result:K}}),(0,o.jsx)("div",{className:eh,children:(0,o.jsx)(w.z,{variant:"danger",title:(0,m.t)("dev_handoff.figmadocs.error_title"),orientation:"vertical",iconSrc:eI.A,children:(0,m.t)("dev_handoff.figmadocs.error_unknown")})})}if(K?.result==="SUCCESS"){let{code:r,language:i,pills:d}=(0,a.AH)({output:K,sceneGraph:P}),u=e.source;"custom"===i&&(i=e.language);let _=new Set([...e.templateData?.imports??[],...Object.entries(t).map(([e,n])=>n.map(e=>RegExp(`\\b${e.component}\\b`).test(r)?e?.templateData?.imports??[]:[]).flat()).flat()]),f=r;if(_.size>0){if("html"===i){let e=[],n=[];_.forEach(t=>{t.startsWith("<script")?e.push(t):n.push(t)}),e.length>0&&(f=e.join("\n")+"\n\n"+f),n.length>0&&(f=`<script>${n.join("\n")}</script>

`+f)}else f=Array.from(_).join("\n")+"\n\n"+r}return(0,o.jsx)(ea,{code:f,language:i,pills:d,fallback:null,errorFallback:null,reformatOnInstanceChange:c,noFadeAnimation:!c,onboardingKey:er.uI,showCodeOnly:S,children:t=>{if(!t)return null;let r={key:t.name,additionalHeaderActions:n,collapseLongSections:!1,copyAllActionEnabled:!1,copyButtonContainer:l,hideHeader:!0,includeMargin:!S,onInstancePillClick:G,type:"connected",code:[t],section:t},c=(0,o.jsx)(eo.l6,{ariaLabel:(0,m.t)("dev_handoff.code.language"),className:y()("figmadocs--labelSelect--vCEth",{"figmadocs--labelSelectNoPadding--pTlSA":S}),dispatch:v,dropdownAlignment:"right",dropdownShown:h,dropdownWidth:"140px",formatter:eK,id:j,onChange:e=>g(e),onDropdownHidden:s.lQ,property:e.label,children:p.map(e=>(0,o.jsx)(eo.c$,{value:e},e))});return S?(0,o.jsx)("div",{className:"figmadocs--codeOnlyContainer---k3VR",children:(0,o.jsx)(I.U,{...r})}):(0,o.jsx)(R.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",noPadding:!0,onClick:V,titleAccessory:(0,o.jsx)(ex,{hideTooltip:D}),children:(0,o.jsxs)("div",{className:"figmadocs--figmadocWrapper--qAg0y",children:[(0,o.jsx)("div",{className:"figmadocs--componentInfoTableContainer--hGhX8",children:(0,o.jsx)(e_,{rows:[...e.component?[{label:(0,m.t)("dev_handoff.component_browser.in_context_component_name"),value:e.component,copyable:!0,copyAriaLabel:(0,m.t)("dev_handoff.component_browser_mapping_panel.copyComponentNameAriaLabel"),rtl:!1}]:[],...u?[{label:(0,m.t)("dev_handoff.component_browser.in_context_component_file"),value:u,copyable:!0,copyAriaLabel:(0,m.t)("dev_handoff.component_browser_mapping_panel.copySourceUrlAriaLabel"),rtl:!0}]:[]]})}),(0,o.jsxs)("div",{className:"figmadocs--dropdownContainer--EgYX1",children:[c,(0,o.jsx)("div",{ref:l,className:"figmadocs--copyButtonContainer--pq-05",children:!l?.current&&(0,o.jsx)(C.zM,{})})]}),(0,o.jsx)(C.yT,{...r})]})})}})}{let e="Error evaluating Code Connect template";console.error(e,{error:K?.data.error,result:K});let n=K?.data.error,t=(0,m.t)("dev_handoff.figmadocs.error_unknown");return n?.type==="PROPERTY_NOT_FOUND"?t=(0,m.t)("dev_handoff.figmadocs.error_property_not_found",{propertyName:n.propertyName}):n?.type==="PROPERTY_TYPE_MISMATCH"?t=(0,m.t)("dev_handoff.figmadocs.error_property_type_mismatch",{propertyName:n.propertyName,propertyType:n.expectedType??"unknown"}):n?.type==="CHILD_LAYER_NOT_FOUND"?t=(0,m.t)("dev_handoff.figmadocs.error_child_layer_not_found",{layerName:n.layerName}):(0,f.kc)().dt_code_connect_id_error&&n?.type==="CHILD_LAYER_ID_NOT_FOUND"?t=(0,m.t)("dev_handoff.figmadocs.error_child_layer_id_not_found",{codeConnectId:n.codeConnectId}):n?.type==="MISSING_CODE_CONNECT_ID"?t=K?.data.message:(0,x.$D)(i.e.CODE_CONNECT,Error(e),{extra:{error:K?.data.error,result:K}}),(0,o.jsx)("div",{className:eh,children:(0,o.jsx)(w.z,{variant:"danger",title:(0,m.t)("dev_handoff.figmadocs.error_title"),orientation:"vertical",iconSrc:eI.A,children:t})})}}function eE({parent:e}){return(0,o.jsx)("div",{className:"figmadocs--goToParentButtonWrapper--FLKKC",children:(0,o.jsx)(d.WW,{variant:"secondary",onClick:()=>X.tJ([e.guid??""]),iconPrefix:(0,o.jsx)(p.r,{}),children:(0,m.tx)("dev_handoff.code_connect.go_to_parent_button",{name:e.name||""})})})}function eA(){return(0,f.kc)().dt_component_browser_beta_badge_hidden?null:(0,o.jsx)("div",{className:"figmadocs--alphaTag--GNs-x",children:(0,o.jsx)(l.E,{variant:"defaultOutline",size:"md",children:(0,m.tx)("dev_handoff.component_browser.beta")})})}function eP(){return(0,o.jsx)(l.E,{variant:"componentOutline",children:(0,m.t)("dev_handoff.component_browser.connected")})}function eL(){return(0,o.jsx)(l.E,{variant:"inactiveOutline",children:(0,m.t)("dev_handoff.component_browser.in_context_not_published_badge")})}function eO(){return(0,o.jsx)(l.E,{variant:"inactiveOutline",children:(0,m.t)("dev_handoff.component_browser.in_context_not_connected_badge")})}function eF(){return(0,o.jsx)(l.E,{variant:"inactiveOutline",children:(0,m.t)("dev_handoff.figmadocs.skipped")})}function eM({additionalBadge:e,hideAlphaBetaBadge:n}){let t=!n&&!(0,f.kc)().dt_component_browser_beta_badge_hidden;return(0,o.jsxs)("div",{className:y()("figmadocs--panelAccessoryContainer--HUExH",{"figmadocs--alphaBetaBadge--9I2CT":t}),children:[!n&&(0,o.jsx)(eA,{}),(0,o.jsxs)("div",{className:"figmadocs--badgeContainer--qX1Ob",children:["connected"===e&&(0,o.jsx)(eP,{}),"not-connected"===e&&(0,o.jsx)(eO,{}),"ignored"===e&&(0,o.jsx)(eF,{}),"not-published"===e&&(0,o.jsx)(eL,{})]})]})}function eT({buttonText:e}){let n=(0,S.Au)();return(0,o.jsx)("div",{className:"figmadocs--buttonContainer--ed83q",children:(0,o.jsx)(d.IK,{variant:"secondary",onClick:()=>n({componentBrowserEntrypoint:"inspect_panel",componentBrowserScope:"page_or_selection"}),children:e})})}let eK={format:e=>e};function eB({playgroundGUID:e,onInstancePillClick:n,showCodeOnly:t}){let a=(0,$.q5)(),s=(0,N.CQ)(a),i=s?(0,m.t)("dev_handoff.component_browser.in_context_section_title"):(0,m.t)("dev_handoff.figmadocs.section_title"),d=(0,Z.eY)(),l=(0,Z.T3)(),{selectedLabel:p,setSelectedLabel:u}=function(e){let n=(0,ei.yT)(e.id),[t,o]=(0,g.Vc)("code-connect-selected-language-storage-key",n);return{selectedLabel:t,setSelectedLabel:o}}((0,j.v4)()),f=(0,v.$k)(),h=(0,B.uQ)(),y=null,b=d;e&&(h=(0,W.n)(e,l,d)??h,y=l.get(e),b=l,h=e);let{doc:x,instanceFigmadocs:w,availableLabels:k,loaded:C,willHaveCodeConnect:I,isComponentBrowserMapping:E,disabled:P}=(0,es._3)(h,b,p,y),L=(0,c.wA)(),O=(0,Q.Um)(),F=!!e,M=function({isPlayground:e,doc:n,willHaveCodeConnect:t,loaded:o,node:r,isComponentBrowserMapping:c,disabled:a,isDevModeMcpDisabledForOrg:s}){let i=function(e,n,t,o,r,c){let a=(0,Z.eY)(),s=(0,A.md)($._S),i=(0,A.md)(q.m);if(!e||!["INSTANCE","SYMBOL"].includes(e.type)||r)return"unknown";if(n)return"status"in n&&"ignored"===n.status?"ignored":"connected";if(i?.status){let{backingComponentKey:n,backingStateGroupKey:t}=(0,S.Kk)(e.guid,a,s?(0,_.l)(s):null),o=t||n;if(o&&"ignored"===i.status[o])return"ignored"}return!c&&o?"unknown":c&&!n?"not_connected":"unknown"}(r||null,n,0,t??!1,a,o),d=(0,$.q5)(),l=function({isPlayground:e,doc:n,willHaveCodeConnect:t,loaded:o,node:r,connectionStatus:c,isComponentBrowserEnabled:a,isComponentBrowserMapping:s,isDevModeMcpDisabledForOrg:i}){if(!r||["FRAME","SECTION"].includes(r.type))return!i&&a?{view:"page-frame-or-section"}:{view:"none"};if(["INSTANCE","SYMBOL"].includes(r.type)){let r=!n||n&&"type"in n&&"snippet"===n.type;if(e)return r?{view:"none"}:{view:"component-doc",doc:n};if(a){if("connected"===c)return s?{view:"component-browser-mapping",doc:n}:{view:"component-doc",doc:n};if("ignored"===c)return{view:"ignored"};if("not_connected"===c)return{view:"not-connected"}}return r?(0,ew.T)()?{view:"none"}:t||!o?{view:"inspect-loading"}:{view:"none"}:{view:"component-doc",doc:n}}return{view:"check-parent"}}({isPlayground:!!e,doc:n,willHaveCodeConnect:!!t,loaded:o,node:r,connectionStatus:i,isComponentBrowserEnabled:(0,N.CQ)(d),isComponentBrowserMapping:c,isDevModeMcpDisabledForOrg:s}),p=function(e=!0){let n=(0,A.md)($._S),t=(0,Z.eY)(),o=(0,ek.Vr)(),r=[],c=o;for(;c;)(c?.type==="INSTANCE"||c?.type==="SYMBOL")&&r.push(c),c=c.parentNode;let a=r.map(e=>{let{backingNodeId:o,backingLibraryKey:r}=(0,es.HX)(e.guid,t,n);return{backingNodeId:o,nodeGuid:e.guid,nodeName:e.isState?e.parentNode?.name:e.name,backingLibraryKey:r}}),{status:s,nodesWithCodeConnect:i}=(0,D.QU)(a.map(e=>(0,es.zi)(e.backingLibraryKey,e.backingNodeId)),e),d="loaded"===s?i:(0,D.bf)()??new Set,{backingNodeId:l,backingLibraryKey:p}=(0,es.HX)(o?.guid??"",t,n);if(d.has((0,es.zi)(p,l)))return null;for(let{nodeName:e,nodeGuid:n,backingNodeId:t,backingLibraryKey:o}of a)if(d.has((0,es.zi)(o,t)))return{name:e,guid:n};return null}("check-parent"===l.view);return"check-parent"===l.view?p?{view:"inspect-parent",parent:p}:{view:"none"}:l}({isPlayground:F,loaded:C,doc:x,willHaveCodeConnect:I,node:y||(h?d.get(h):null),hasRenderedCodeConnectOnce:!1,isComponentBrowserMapping:E,disabled:P,isDevModeMcpDisabledForOrg:f}),T=function(e){let n=(0,c.d4)(e=>e.library.local);return r.useMemo(()=>{if(!e)return!1;let t=(0,en.n5)(e,n);return!!t&&(0,en.HF)(t.status)},[e,n])}(h),K="figmadoc-label-select";e&&(K+="-playground");let z=r.useRef(null);if(!M||!M.view)return null;let G={recordingKey:"code_connect",headerOnboardingKey:er.uI,title:i,collapsiblePanelKey:e?void 0:"code_connect"};switch(M.view){case"page-frame-or-section":return(0,o.jsx)(Y,{});case"component-browser-mapping":if(!x||!("component"in x))return null;return(0,o.jsx)(R.VZ,{...G,titleAccessory:(0,o.jsx)(eM,{additionalBadge:"connected"}),children:(0,o.jsx)(em,{doc:x})});case"component-doc":if(!("doc"in M)||!M.doc)return null;let V=(0,o.jsx)(eN,{availableLabels:k,copyButtonContainer:z,dispatch:L,doc:M.doc,dropdownIdToUse:K,dropdownShown:O,instanceFigmadocs:w,isPlayground:!!e,onInstancePillClick:n,setSelectedLabel:u,showCodeOnly:t});if(t)return V;return(0,o.jsx)(R.VZ,{...G,titleAccessory:(0,o.jsx)(eM,{additionalBadge:"connected",hideAlphaBetaBadge:!0}),children:(0,o.jsxs)("div",{className:"figmadocs--fullDocsContainer--URZ7L",children:[V,!F&&s&&(0,o.jsx)(eT,{buttonText:(0,m.t)("dev_handoff.component_browser_mapping_panel.viewConnectionButton")})]})});case"not-connected":if(!T)return(0,o.jsx)(R.VZ,{...G,titleAccessory:(0,o.jsx)(eM,{additionalBadge:"not-published"}),bodyIsEmpty:!0});return(0,o.jsx)(R.VZ,{...G,titleAccessory:(0,o.jsx)(eM,{additionalBadge:T?"not-connected":"not-published"}),bodyIsEmpty:!T,children:T&&(0,o.jsx)(eT,{buttonText:(0,m.t)("dev_handoff.component_browser.in_context_connect_component")})});case"ignored":return(0,o.jsx)(R.VZ,{...G,titleAccessory:(0,o.jsx)(eM,{additionalBadge:"ignored"}),children:(0,o.jsx)(eT,{buttonText:(0,m.t)("dev_handoff.component_browser_mapping_panel.viewConnectionButton")})});case"inspect-loading":return(0,o.jsx)(R.VZ,{...G,bodyIsEmpty:!0});case"inspect-parent":return(0,o.jsx)(R.VZ,{...G,children:(0,o.jsx)(eE,{parent:M.parent})});default:return null}}},347002:(e,n,t)=>{t.d(n,{M4:()=>_,Nf:()=>f,RI:()=>p,lA:()=>u,lU:()=>m,ro:()=>g});var o=t(20002),r=t(598066),c=t(384203),a=t(456556),s=t(576116),i=t(279758),d=t(187445),l=t(652154);function p(){let e=(0,d.wS)(),n=(0,o.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),t=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected);return"loaded"===e.status&&e.result.dataComponentId?{nodeId:e.result.dataComponentId,isDetachedScene:"temp-scene"===e.result.dataLocation&&!!e.result.componentKey}:1===t&&n?{nodeId:Object.keys(n)[0]}:null}function u(){let e=(0,i.jY)(),n=p();return n&&n?.nodeId?n.isDetachedScene?(0,d.x9)(n.nodeId):(0,l.Zl)(e,n.nodeId):null}function _(){return function e(n,t){let o=(0,l.Zl)(n,t);return o?"SYMBOL"===o.type||"INSTANCE"===o.type||o.isStateGroup||o.detachedInfo?o:o.parentGuid?e(n,o.parentGuid):null:null}((0,i.jY)(),(0,o.d4)(s.vD))}function m(){let e=(0,l.uQ)(),n=(0,r.hA)();return e??n}function f(){let e=function(){let e=m();return(0,c.eY)().get(e??"")}(),n=(0,o.d4)(e=>e.mirror.appModel.currentPage),t=(0,c.eY)();return e?.guid?t.developerFriendlyIdFromGuid(e?.guid):n}function g({includeStateGroups:e=!0}={}){let n=(0,l.uQ)(),t=(0,a.Fk)((n,t)=>{let o=n?.get(t??"");return o?.type==="SYMBOL"||o?.type==="INSTANCE"||e&&o?.isStateGroup},n,e),o=(0,d.wS)(),r=o&&("loaded"===o.status||"loading"===o.status||"downloading"===o.status);return t||r}},111864:(e,n,t)=>{t.d(n,{u:()=>ei,I:()=>er});var o=t(239976),r=t(105652),c=t(20002),a=t(245814),s=t(378721),i=t(655793),d=t(250730),l=t(517478),p=t(140464),u=t(780833),_=t(379063),m=t(217328),f=t(454705),g=t(692376),h=t(854225),y=t(466082),b=t(379141),v=t(445019),x=t(522568),w=t(7857),k=t(806130),C=t(13421),j=t(933870),S=t(842582),I=t(585066),N=t(173943),E=t(780518),A=t(187445),P=t(12419),L=t(136393),O=t(338630),F=t(384203),M=t(576116),T=t(236410),K=t(747079),B=t(880197),z=t(753562),R=t(909196),q=t(365032),D=t(485571),G=t(347002),V=t(536378),U=t(617852),H=t(223487),Y=t(378944);function W(){let e=(0,G.lA)();return(0,o.jsx)(X,{backingSymbol:e})}function X({backingSymbol:e}){let n=(0,c.wA)(),t=(0,H._G)(),a=(0,U.b)({libraryKey:e?.sourceLibraryKey,nodeId:e?.publishID??void 0,mainComponent:!0}),i=(0,Y.bj)(e?.sourceLibraryKey?[e?.sourceLibraryKey]:[]).data[0],d=i?.library_key??null,l=!!d&&d!==t,p=r.useMemo(()=>!!e&&g.Egt.nodeIsSoftDeleted(e.guid),[e]),u=r.useCallback(()=>{e&&(l?!!a.data?.link&&a.data?.type!=="community"&&n(D.V3({url:a.data.link})):(n(V.AS()),g.glU.goToSymbolOrStateGroupById(e.guid,!1)))},[e,n,l,a.data]);return!e||p||l&&(!a.data?.link||a.data?.type==="community")?null:(0,o.jsx)(s.K,{onClick:u,"aria-label":e.isState?(0,b.t)("design_systems.playground.open_variant_in_library"):(0,b.t)("design_systems.playground.open_component_in_library"),"data-tooltip":e.isState?(0,b.t)("design_systems.playground.open_variant_in_library"):(0,b.t)("design_systems.playground.open_component_in_library"),"data-tooltip-type":T.Ib.TEXT,children:(0,o.jsx)(q.l,{})})}var Q=t(879708),Z=t(355723),$=t(427324);let J="playground_modal--container--ACtXw",ee="playground_modal--thumbnailContainer--WHwU3",en="playground_modal--thumbnail--LFYpK",et="playground_modal--propsContainer--aUIV3";var eo=t(249775);function er(e){let n=(0,E.IO)(e,!0),t=r.useRef(n()),[o,c]=r.useState(t.current),[a,s]=r.useState(0),[i,d]=(0,v.fp)(R.d8),[l,p]=r.useState(!0),u=r.useCallback(()=>{let e=n();return t.current=e,e},[n]);return r.useLayoutEffect(()=>{i&&l&&(c(e=>{let n=t.current,o=u();return"light"===n&&"dark"===o||"dark"===n&&"light"===o?"light"===e?"dark":"light":e}),d(!1))},[l,u,d,c,i]),{theme:o??t.current,invertTheme:()=>{p(!1),c(e=>"light"===e?"dark":"light"),s(e=>e+1)},callbackCount:a}}let ec=r.memo(({guid:e,...n})=>(0,o.jsx)(w.u9,{label:"PlaygroundModalWrapper",children:(0,o.jsx)(A.si,{children:(0,o.jsx)(ea,{guid:e,...n})})})),ea=r.memo(({guid:e,...n})=>{let t;let w=r.useRef(null);r.useEffect(()=>{e&&v.zl.set($.J,[e])},[e]);let I=(0,c.wA)(),K=(0,c.d4)(M.AF),q=(0,A.wS)(),D="loaded"===q.status&&"temp-scene"===q.result.dataLocation?q.result:void 0,G=(0,R.oD)(),V=r.useCallback(()=>{I((0,P.vq)())},[I]),U=a.hS({...n,onClose:()=>{V(),(0,x.sx)("Playground closed"),n.onClose()}}),H=r.useMemo(()=>new y.qo(D?h.juq.DETACHED_COMPONENTS:h.juq.PLAYGROUND),[D]),Y=(0,F.eY)(),X=r.useMemo(()=>{if(!G)return"";if("loaded"===q.status)return q.result.isVariant?q.result.dataStateGroupId??q.result.dataComponentId:q.result.dataComponentId;let e=G.nodeData?.playgroundGUID;return e?((0,B.Yi)([e],H)||(0,B.k4)([e],H))??"":""},[G,H,q]),ec=r.useMemo(()=>H.get(X)?.name??"",[X,H]),{theme:ea,invertTheme:ei,callbackCount:ed}=er(e??X),el=(0,c.d4)(e=>e.userFlags.dismissed_playground_banner),ep=r.useCallback(()=>{I(L.b({dismissed_playground_banner:!0}))},[I]),eu=r.useCallback(()=>{G?.refetchAndResetScene()},[G]),e_=r.useCallback(e=>{let n=(0,$.n)(e,H,Y),t=v.zl.get($.J);v.zl.set($.J,[...t,n]),g.glU.setPlaygroundSceneFromGuid(n??"")},[Y,H]);if(!G||!K)return(0,o.jsx)(es,{manager:U,theme:ea});let{thumbnailData:em,nodeData:ef}=G;if(!ef)return(0,o.jsx)(es,{manager:U,theme:ea});let{playgroundGUID:eg,componentProps:eh,modeData:ey}=ef,eb=H.get(eg);if(!em)return(0,o.jsx)(es,{manager:U,theme:ea});let ev=v.zl.get($.J);return ev.length>1&&(t=(0,o.jsx)(s.K,{onClick:()=>{let e=ev[ev.length-2];g.glU.setPlaygroundSceneFromGuid(e);let n=ev.slice(0,-1);v.zl.set($.J,n)},"aria-label":(0,b.t)("dev_handoff.playground.select_parent_instance"),"data-tooltip":(0,b.t)("dev_handoff.playground.select_parent_instance"),"data-tooltip-type":T.Ib.TEXT,children:(0,o.jsx)(p.v,{})})),(0,o.jsx)(O.fu,{name:"Dev Mode Component Playground",children:(0,o.jsx)(i.bL,{manager:U,width:"fit-content",children:(0,o.jsx)(d.HM,{container:w,children:(0,o.jsxs)(l.vo,{children:[(0,o.jsx)(l.Y9,{children:(0,o.jsx)(l.hE,{children:(0,b.tx)("design_systems.playground.component_playground")})}),(0,o.jsx)(l.nB,{ref:w,children:(0,o.jsxs)("div",{className:J,children:[(0,o.jsxs)("div",{className:ee,style:(0,E.CU)(ea),children:[(0,o.jsx)("img",{src:em.src,className:en,width:em.width,height:em.height,alt:(0,b.t)("design_systems.playground.thumbnail_alt"),"data-testid":"playground-thumbnail"}),(0,o.jsx)(f.J,{mode:ea,children:(0,o.jsx)("div",{className:"playground_modal--themeButton--fxxIK",children:(0,o.jsx)(S.fX,{checked:"light"===ea,onIcon:(0,o.jsx)(u.c,{}),offIcon:(0,o.jsx)(_.G,{}),"aria-label":(0,b.t)("design_systems.playground.change_background"),"data-tooltip":(0,b.t)("design_systems.playground.change_background"),"data-tooltip-type":T.Ib.TEXT,trackingProperties:{type:"Background toggle",color:ea,index:ed},onChange:ei})})})]}),(0,o.jsxs)("div",{className:et,children:[(0,o.jsxs)("div",{className:"playground_modal--propsContainerHeader--FG7rO",children:[(0,o.jsxs)("div",{className:"playground_modal--propsContainerName--jPFzo",children:[t,(0,o.jsx)("h3",{className:"playground_modal--productComponentName--2atEd ellipsis--ellipsis--70pHK",children:ec})]}),(0,o.jsxs)("div",{className:"playground_modal--propsContainerHeaderButtons--RVGbR",children:["INSTANCE"===K.type&&(0,o.jsx)(W,{}),(0,o.jsx)(s.K,{onClick:eu,"aria-label":(0,b.t)("design_systems.playground.reset_properties"),disabled:!G.hasChangesToReset,recordingKey:"resetPlaygroundProps","data-tooltip":(0,b.t)("design_systems.playground.reset_properties"),"data-tooltip-type":T.Ib.TEXT,children:(0,o.jsx)(m.m,{})})]})]}),(0,o.jsxs)(j.P,{className:"playground_modal--scrollContainerWrapper--UkQv9",children:[!el&&(0,o.jsx)("div",{className:"playground_modal--bannerContainer--3D0HM",children:(0,o.jsx)(C.z,{orientation:"vertical",iconSrc:eo.A,variant:"dev",title:(0,b.t)("design_systems.playground.banner_header"),onClose:ep,children:(0,b.tx)("design_systems.playground.banner_content")})}),(0,o.jsxs)(F.q0.Provider,{value:H,children:[(0,o.jsx)("div",{className:"playground_modal--propsSectionContainer--FpaU7",children:(0,o.jsx)(Z.x,{containerWidth:B.O2.UNBOUNDED,componentProps:eh,playgroundGUID:eg,productComponentGUID:X,sceneGraph:H,viewOnlyMode:eb?.isState?z.BK.VARIANT_PROPS:void 0,recordingKey:"playgroundPicker"})}),(0,o.jsx)("div",{className:"playground_modal--modesSectionContainer--qJsa-",children:(0,o.jsx)(Q.b,{modes:ey||{}})})]}),(0,o.jsx)(k.tH,{boundaryKey:"Figmadoc",fallback:k.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,o.jsx)(N.Q,{playgroundGUID:eg,onInstancePillClick:e_})})]})]})]})})]})})})})});function es({manager:e,theme:n}){return(0,o.jsx)(O.fu,{name:"Dev Mode Component Playground",children:(0,o.jsx)(i.bL,{manager:e,width:"fit-content",children:(0,o.jsxs)(l.vo,{children:[(0,o.jsx)(l.Y9,{children:(0,o.jsx)(l.hE,{children:(0,b.tx)("design_systems.playground.component_playground")})}),(0,o.jsx)(l.nB,{children:(0,o.jsxs)("div",{className:J,children:[(0,o.jsx)("div",{className:ee,style:(0,E.CU)(n),children:(0,o.jsx)("div",{className:en})}),(0,o.jsx)("div",{className:et,children:(0,o.jsx)("div",{className:"playground_modal--propsContainerLoading--qVUBw",children:(0,o.jsx)(I.k,{})})})]})})]})})})}let ei=(0,K.Ju)(ec,"PlaygroundModal")},427324:(e,n,t)=>{t.d(n,{J:()=>o,n:()=>r});let o=(0,t(445019).eU)([]);function r(e,n,t){let o=n.get(e),r=n.get(o?.symbolId??"");if(r?.componentKey){let e=t.getInternalCanvas();for(let n of e?.childrenNodes??[]){if(n.componentKey===r?.componentKey)return n.guid;if(n.isStateGroup){for(let e of n.childrenNodes)if(e.componentKey===r?.componentKey)return e.guid}}}return r?.publishID}},102869:(e,n,t)=>{t.d(n,{Fl:()=>O,QU:()=>E,SI:()=>F,bf:()=>A,oA:()=>I,uj:()=>N});var o=t(105652),r=t(20002),c=t(22291),a=t(270450),s=t(445019),i=t(719749),d=t(892925),l=t(627346),p=t(422572),u=t(384203),_=t(223487),m=t(378944),f=t(610604),g=t(538349),h=t(31201),y=t(973447),b=t(576116),v=t(525683),x=t(865420),w=t(816158),k=t(468673);function C(e,n,t,o){if(!e)return new Set;let r=new Set;for(let c of e.childrenNodes){if("SYMBOL"===c.type||c.isStateGroup||"INSTANCE"===c.type){let{backingNodeId:e,backingLibraryKey:t}=(0,k.HX)(c.guid,n,o);t&&e&&r.add(`${t},${e}`)}c.childCount>0&&C(c,n,t,o).forEach(e=>r.add(e))}return r}function j(e,n,t,o,r){if(!e)return new Set;let c=new Set;for(let a of e.childrenNodes){if("SYMBOL"===a.type||a.isStateGroup||"INSTANCE"===a.type){let{backingStateGroupKey:e,backingComponentKey:s}=(0,k.HX)(a.id,n,t),i=e||s||null;!i&&a.symbolId&&o&&r&&(i=S(a.symbolId,o,r)),i&&c.add(i)}a.childCount>0&&j(a,n,t,o,r).forEach(e=>c.add(e))}return c}function S(e,n,t){let o=n.find(n=>n.node_id===e);if(o){if(o.containing_frame?.containingStateGroup?.nodeId){let e=o.containing_frame.containingStateGroup.nodeId,n=t.find(n=>n.node_id===e);if(n?.key)return n.key}if(o.component_key)return o.component_key}let r=t.find(n=>n.node_id===e);return r?.key?r.key:null}function I(){let e=(0,s.md)(_._S),n=(0,u.eY)(),t=(0,r.d4)(e=>e.mirror.appModel.currentPage),a=(0,r.d4)(v.aD),i=(0,r.d4)(y.Th),l=(0,r.d4)(y.WH),p=(0,r.d4)(b.BA),f=(0,_.q5)(),g=(0,d.CQ)(f),h=(0,o.useMemo)(()=>{let t=new Set,o=new Map;for(let r of a){let{backingLibraryKey:a}=(0,k.HX)(r.nodeId,n,e);if(a){let e=(0,c.l)(a);t.add(e),o.set(r.key,e)}}return{libraryKeys:Array.from(t),componentToLibraryKeyMap:o}},[a,e]),x=(0,m.bj)(h.libraryKeys),w=(0,o.useMemo)(()=>{if("loaded"!==x.status)return a;let e=new Set(x.data.filter(e=>"library_type"in e&&"community"!==e.library_type).map(e=>e.library_key));return a.filter(n=>{let t=h.componentToLibraryKeyMap.get(n.key);return t&&e.has(t)})},[a,x.status,h.componentToLibraryKeyMap]);return(0,o.useMemo)(()=>{if(!g)return new Set;let o=new Set;for(let t of w){let r=j(n.get(t.nodeId),n,e,i,l),{backingComponentKey:c,backingStateGroupKey:a}=(0,k.HX)(t.nodeId,n,e);if(c||a){let e=a||c;e&&o.add(e),r.forEach(e=>o.add(e))}}let r=new Set;for(let t of p){let c=n.get(t),a=S(t,i,l);if(!a||r.has(a))continue;let s=j(c,n,e,i,l);if(a)for(let e of(o.add(a),r.add(a),s))o.add(e)}for(let e of l)e.key&&e.containing_frame?.pageId===t&&o.add(e.key);for(let e of i)e.component_key&&!e.containing_frame?.containingStateGroup&&e.containing_frame?.pageId===t&&o.add(e.component_key);return o},[w,l,i,t])}function N(){let e=(0,r.d4)(e=>e.mirror.appModel.currentPage),n=(0,_.tS)(),t=function(e,n){let t=(0,s.md)(_._S),c=(0,u.eY)(),i=(0,r.d4)(v.aD),d=(0,r.d4)(b.BA),l=function(e){let n=(0,r.d4)(h.MH),t=(0,r.d4)(e=>e.mirror.appModel.currentPage),c=(0,s.md)(_._S);return(0,o.useMemo)(()=>{let o=new Set;if(!e)return o;for(let[e,r]of Object.entries(n))r.containing_frame?.pageId===t&&(r.containing_frame?.containingStateGroup?.nodeId?o.add((0,k.zi)(c,r.containing_frame?.containingStateGroup.nodeId)):o.add((0,k.zi)(c,e)));return o},[t,n])}(e),p=!n&&i.length+d.size>((0,a.kc)().dt_preload_code_connect_increase_limit?100:50);return(0,o.useMemo)(()=>{if(p)return new Set;let n=new Set;for(let o of i){let r=C(c.get(o.nodeId),c,e,t),{backingNodeId:a,backingLibraryKey:s}=(0,k.HX)(o.nodeId,c,t);if(s&&a)for(let e of(n.add(`${s},${a}`),r))n.add(e)}let o=new Set;for(let r of d){let a=c.get(r),s=r;if(a?.containingStateGroupId&&(s=a.containingStateGroupId),o.has(s))continue;let i=C(a,c,e,t);if(t&&s)for(let e of(n.add(`${t},${s}`),o.add(s),i))n.add(e)}for(let e of l)n.add(e);return n},[l,d,i,p])}(n,!1);(0,o.useEffect)(()=>{s.zl.set(w.z,null)},[e]);let c=(0,i.bc)(f.Opb,{nodes:Array.from(t),openFileKey:n??""},{enabled:(0,a.kc)().dt_preload_code_connect_increase_limit?t.size<100:t.size<50});(0,o.useEffect)(()=>{if("loaded"===c.status&&c.data.file?.preload_code_connect_lk){let e=c.data.file.preload_code_connect_lk;s.zl.set(w.z,{...e,nodesWithCodeConnect:new Set(e.nodesWithCodeConnect)})}return()=>s.zl.set(w.z,null)},[e,c.status])}function E(e,n=!0){let t=(0,_.tS)(),o=(0,i.bc)(f.Opb,{nodes:e,openFileKey:t??""},{enabled:e.length<20&&n});if("loaded"===o.status&&o.data.file?.preload_code_connect_lk){let e=o.data.file.preload_code_connect_lk;return{status:"loaded",nodesWithCodeConnect:new Set(e.nodesWithCodeConnect),docsById:e.docsById}}return{status:o.status,nodesWithCodeConnect:new Set,docsById:{}}}function A(){return s.zl.get(w.z)?.nodesWithCodeConnect}let P=g.M4.Query({fetch:async({assetKeys:e})=>0===e.length?{status:{}}:(await x.Q.getInContextPublishedComponentsStatus(e)).data.meta,stalenessPolicy:"never"}),L=g.M4.Mutation((e,{query:n})=>{let{assetKeys:t,componentKey:o,status:r}=e;n.mutate(P({assetKeys:t}),e=>e?{...e,status:{...e.status,[o]:r}}:{status:{[o]:r}})});function O(){let e=(0,g.gY)(L),n=I();return(0,o.useCallback)(t=>{let{componentKey:o,status:r}=t;o&&e({assetKeys:Array.from(n),componentKey:o,status:r})},[e,n])}function F(){let e=(0,r.d4)(e=>e.mirror.appModel.currentPage);(0,o.useEffect)(()=>{(0,a.kc)().dt_component_browser_optimistic_update_query||s.zl.set(w.m,null)},[e]);let n=I(),t=(0,s.md)(p.Xh),c=(0,s.md)(l.s9),i=(0,s.md)(p.M7),u=(0,_.q5)(),m=(0,d.CQ)(u),[f]=(0,g.IT)(P({assetKeys:Array.from(n)}),{enabled:!!m&&n.size>0});(0,o.useEffect)(()=>{if(!(0,a.kc)().dt_component_browser_optimistic_update_query)return;let e="loading"===t||"loading"===c||"loading"===i||"loading"===f.status&&n.size>0;e?s.zl.set(w.m,{status:{},loadingStatus:"loading"}):0===n.size?s.zl.set(w.m,{status:{},loadingStatus:"loaded"}):"loaded"===f.status&&f.data&&!e&&s.zl.set(w.m,{status:f.data.status,loadingStatus:"loaded"})},[e,f.status,n.size,t,c,i,f.data]),(0,o.useEffect)(()=>{if((0,a.kc)().dt_component_browser_optimistic_update_query)return;let e="loading"===t||"loading"===c||"loading"===i||"loading"===f.status&&n.size>0;return e?s.zl.set(w.m,{status:{},loadingStatus:"loading"}):0===n.size?s.zl.set(w.m,{status:{},loadingStatus:"loaded"}):"loaded"===f.status&&f.data&&!e&&s.zl.set(w.m,{status:f.data.status,loadingStatus:"loaded"}),()=>s.zl.set(w.m,null)},[e,f.status,n.size,t,c,i])}},379063:(e,n,t)=>{t.d(n,{G:()=>c});var o=t(105652),r=t(239976);let c=(0,o.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M10.908 15.5h-.158a.25.25 0 0 0-.25.25v1c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75v-1a.25.25 0 0 0-.25-.25zm3.325-.522c.17-.194.29-.426.35-.668.115-.468.329-.94.593-1.517l.015-.032c.23-.502.5-1.089.668-1.707A4.004 4.004 0 0 0 12 6a4 4 0 0 0-3.86 5.054c.17.618.439 1.205.669 1.707l.015.033c.264.576.477 1.048.593 1.516.06.242.18.474.35.668-.167.213-.267.48-.267.772v1a1.75 1.75 0 0 0 1.5 1.732v.018a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.518 1.75 1.75 0 0 0 1.5-1.732v-1c0-.291-.1-.56-.267-.772m-1.14-.478c.25 0 .46-.186.52-.43.141-.575.398-1.134.654-1.694.24-.523.48-1.047.628-1.585q.104-.379.105-.791a3 3 0 1 0-5.895.791c.147.538.387 1.062.628 1.585.256.56.513 1.119.655 1.694.06.244.269.43.52.43zM11 10a1 1 0 0 1 1-1 .5.5 0 0 0 0-1 2 2 0 0 0-2 2 .5.5 0 0 0 1 0",clipRule:"evenodd"})})})}}]);

//# debugId=5b64a39b-9e79-5b77-b51e-6100822fdc2f

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/385ce088990cb9cba1b4a3d2a56b97b9435a04fa/1864-6408c2934e147544.min.js.map