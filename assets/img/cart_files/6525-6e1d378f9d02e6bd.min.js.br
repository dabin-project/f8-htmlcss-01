"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8629b5c6-fc09-5a19-92c0-d5ba7129434d")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6525],{734736:(e,t,n)=>{n.d(t,{IK:()=>l,ff:()=>c,om:()=>s});var o=n(105652),i=n(499735),r=n(875253),a=n(1007);function l(e,t,n,i,l){let s=(0,a._X)({subscribeToUpdates_expensive:!n});return o.useMemo(()=>{if(n)return l(e,t);{let n=(0,a.$g)(s,new r.Mi(e,t));return new r.Mi(n.x-i/2,n.y+30)}},[n,l,e,t,s,i])}function s(e,t,n){let[r,a]=o.useState(!1),l=i.v_(n,"keydown",o.useCallback(n=>"Shift"!==n.key?i.aH:(a(!0),e&&t)?void 0:i.aH,[e,t,a])),s=i.v_(n,"keyup",o.useCallback(n=>"Shift"!==n.key?i.aH:(a(!1),e&&t)?void 0:i.aH,[e,t,a]));return o.useEffect(()=>(document.addEventListener("keydown",l),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",s)}),[l,s]),{pressingShiftKey:r,setPressingShiftKey:a}}function c(e,t,n){let[i,r]=o.useState(0);return o.useEffect(()=>{if(!e)return;let n=n=>{!n.shiftKey&&e&&t(!1)};return document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}},[e,t]),{shouldModalHide:o.useMemo(()=>e&&!n&&i<=1,[e,n,i]),incrementTimesInteractedWithModal:o.useCallback(()=>{r(e=>e+1)},[r])}}},299390:(e,t,n)=>{n.d(t,{X:()=>k});var o=n(239976),i=n(105652),r=n(20002),a=n(725005),l=n(455835),s=n(481399),c=n(683261),d=n(432318),p=n(692376),u=n(798913),_=n(224542),h=n.n(_),m=n(184743),g=n(319971),y=n(157750),x=n(690252),I=n(421837),v=n(514566),f=n(719680),N=n(814044);let T="stack_controls--input--xm5dq text--fontNeg12--HBXnm text--_fontBase--VaHfk text--_negText--7Cnf0",E="stack_controls--scrubbableControl--mjPun",O="stack_controls--inputSvg--NuNC6",C="stack_controls--stackSpacingRow--s4z2D";function S(){let e=(0,y.J2)(p.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===p.RN9.SPACING?(0,o.jsx)(A,{focusOnMount:n}):t===p.RN9.COUNTER_SPACING?(0,o.jsx)(b,{focusOnMount:n}):(0,o.jsx)(j,{stackRegion:t,focusOnMount:n})}let P=e=>{if(e.keyCode===m.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;p.Qa7.tabActiveStackRegion(t)}};function A({focusOnMount:e}){return(0,o.jsx)(x.fI,{className:C,children:(0,o.jsx)(N.KI,{focusOnMount:e,inputClassName:T,inputTestId:"stackSpacingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:P,onPaste:D,outerClassName:E,recordingKey:"stackSpacingControl",source:"canvas",svgClassName:O})})}function b({focusOnMount:e}){return(0,o.jsx)(x.fI,{className:C,children:(0,o.jsx)(I.q,{focusOnMount:e,inputClassName:T,inputTestId:"stackCounterSpacingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:P,onPaste:D,outerClassName:E,recordingKey:"stackCounterSpacingControl",source:"canvas",svgClassName:O})})}function j({stackRegion:e,focusOnMount:t}){let[n]=(0,f.HF)(e),i=Array.isArray(n)?n.length:0;return e===p.RN9.SPACING?null:(0,o.jsx)(x.fI,{className:h()("stack_controls--stackPaddingRow--9ZUgu",{"stack_controls--large--x4Paa":i>3}),children:(0,o.jsx)(v.s,{disableVariablesEntryPoint:!0,focusOnMount:t,inputClassName:T,inputTestId:"stackPaddingControl",noBorderOnFocus:!0,onBlur:p.Qa7.clearActiveStackRegion,onKeyDown:P,onPaste:D,outerClassName:E,paddingSelection:e,recordingKey:"stackPaddingControl",source:"canvas",svgClassName:O})})}function D(e){(0,g.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),u.l7.user("paste-in-stack",()=>{p.glU.triggerAction("paste",{})}))}let k=i.memo(function(){return(0,r.d4)(e=>e.mirror.appModel.isReadOnly)?null:(0,o.jsx)(R,{})});function R(){return(0,o.jsx)(a.k,{isShown:!0,children:(0,o.jsx)(c.IA,{children:(0,o.jsx)(w,{testID:"DesignInlineMenu"})})})}function w({testID:e}){let t=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t||"GRID"===t)});return(0,r.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?(0,o.jsxs)(d.W1,{size:"small",testID:e,children:[(0,o.jsx)(l.jk,{}),(0,o.jsx)(s.x,{})]}):t?(0,o.jsx)(d.W1,{testID:e,darkModePreferred:!0,children:(0,o.jsx)(S,{},"stackControls")}):null}},221572:(e,t,n)=>{n.d(t,{f:()=>g});var o=n(239976),i=n(105652),r=n(499735),a=n(875253),l=n(620030),s=n(259714),c=n(964731),d=n(617654),p=n(777100),u=n(935867),_=n(95657),h=n(823618),m=n(25206);function g({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:l,hide:u}=(0,c.BK)("expression-builder-create-variable"),_=i.useRef(null),g=r.rf(r.Pt(t,"createVariableDropdown"),"click",i.useCallback(()=>{1===e.length?f(e[0]):l()},[e,l])),[x,I]=i.useState(!1),v=i.useRef(null),f=e=>{let t=_.current?.getBoundingClientRect();t&&(v.current={initialPosition:new a.Mi(t.left,t.top),resolvedType:e},I(!0))},N=()=>{I(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{ref:_,className:h.ZS,onClick:g,children:(0,o.jsx)(s.B,{svg:m.A})}),x&&(x&&v.current?(0,o.jsx)(p.U,{initialPosition:v.current.initialPosition,initialWidth:p.i,resolvedType:v.current.resolvedType,onCreateVariable:N,onClose:N}):null),n&&_.current&&(0,o.jsx)(d.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:_.current.getBoundingClientRect(),children:e.map(e=>(0,o.jsx)(y,{resolvedType:e,onClose:u,showCreationModal:f,recordingKey:t},e))})]})}function y({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:a}){let s=(0,_.F)(e),c=r.rf(r.Pt(a,"createVariableOption",s.name),"click",i.useCallback(()=>{n(e),t()},[t,e,n]));return(0,o.jsxs)(l.c$,{className:h.Fs,onClick:c,children:[(0,o.jsx)(u.i,{type:e,showTooltip:!1}),s.name]})}},210501:(e,t,n)=>{let o;n.d(t,{E:()=>e4});var i=n(239976),r=n(105652),a=n(20002),l=n(865702),s=n(295870),c=n(378721),d=n(579414),p=n(297860),u=n(6060),_=n(692376),h=n(798913),m=n(2227),g=n(379141),y=n(270450),x=n(445019),I=n(224542),v=n.n(I),f=n(40297),N=n(768781),T=n(7857),E=n(499735),O=n(129416),C=n(875253),S=n(933870),P=n(324880),A=n(772293),b=n(319971),j=n(421914),D=n(384203),k=n(223487),R=n(734736),w=n(300573),L=n(702417),M=n(236410),U=n(508902),K=n(764752),B=n(522568),V=n(443389),F=n(309742),G=n(630691),z=n(35131),Y=n(227517),H=n(690252),W=n(259714),J=n(154963),X=n(145652),q=n(571580);let Z=(0,X.ex)("prototype_action_info",function(){return(0,i.jsxs)("div",{className:J.s.flex.itemsCenter.justifyCenter.$,children:[(0,i.jsx)(W.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--YaFW7",svg:q.A}),(0,i.jsx)("span",{className:J.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,g.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")})]})},()=>({unconstrainWidth:!0}));var $=n(452956),Q=n(66547),ee=n(363198),et=n(902471),en=n(788869),eo=n(851425),ei=n(915124),er=n(728177),ea=n(212198),el=n(213214),es=n(715568),ec=n(199722);function ed({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:o}){let a;let l=(0,ec._i)(t?.keyCodes),s=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[c,d]=r.useState(!1),p=r.useRef(null);r.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&p.current&&(o(!1),p.current.focus(),d(!0))},[o,n,t]),r.useEffect(()=>{if(!c)return()=>{};let t=new es.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,c]);let u=null,_=(0,ec.E8)(t);return c?a=(0,i.jsx)(ep,{children:(0,g.tx)("proto.keyCapture.press_key_lowercase")}):t?.triggerDevice==="KEYBOARD"&&l?u=(0,ec.U8)(l):_?u=_:a=(0,i.jsx)(ep,{children:(0,g.tx)("proto.keyCapture.click_to_set_key")}),(0,i.jsx)(H.rp,{ref:p,className:"prototype_key_capture_field--root--PxExR","data-tooltip-type":M.Ib.TEXT,"data-tooltip":u&&u.length>10?u:null,onFocus:()=>d(!0),onBlur:()=>d(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!ec.RI.has(t)&&ec.pu[t]&&(t===l?.keyCode&&e.repeat?s((0,ec.wb)({keyCode:t,metaKey:e.metaKey||l.metaKey,shiftKey:e.shiftKey||l.shiftKey,ctrlKey:e.ctrlKey||l.ctrlKey,altKey:e.altKey||l.altKey})):s((0,ec.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture",children:u??a})}function ep({children:e}){return(0,i.jsx)("span",{className:"prototype_key_capture_field--placeholder--TcqSR",children:e})}var eu=n(391459),e_=n(177102),eh=n(288350),em=n(847923);n(323264);var eg=n(335298),ey=n(694454),ex=n(964929);let eI=new eg.VG,ev=new eg.EX,ef=new eg.JV,eN=new eg.Eq;function eT(e){let t=(0,ee.cJ)(),{showVideoV2Triggers:n}=(0,em.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===_.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,ey.dq)(e.mirror.selectionProperties)})),o=(0,x.md)(ex.NE)?"ON_MEDIA_HIT"!==e.property?ev:eN:"ON_MEDIA_HIT"!==e.property?eI:ef,r=t=>{let r=(0,i.jsx)("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon--o2e-n",children:(0,ey.e7)(t)});return(0,i.jsx)(e_.Option,{value:String(t),disabled:!function(t){if("NONE"===t)return!0;let o=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&m.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,j.hS)(e.property),i=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,j.hS)(e.property)&&e.property!==t;return(!o&&!i||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?n:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t),children:(0,i.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,i.jsx)("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm",children:r}),o.format(t)]})},t)},a=(t?[]:["NONE"]).map(r),l=["ON_CLICK",...t?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(r),s=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(r),c=(t?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(r),d=["AFTER_TIMEOUT"].map(r),p=[...a,!t&&(0,i.jsx)(e_.Separator,{},"select1"),...l,(0,i.jsx)(e_.Separator,{},"select2"),...s,!t&&(0,i.jsx)(e_.Separator,{},"select3"),...d,...!t&&n?[(0,i.jsx)(e_.Separator,{},"select4"),...c]:[]],u=(0,j.E7)(e.property);return(0,i.jsxs)(e_.Root,{value:u?String(u):void 0,onChange:t=>{t&&e.onChange(t)},recordingKey:E.Pt(e,"select"),children:[(0,i.jsx)(e_.Trigger,{"data-testid":"interaction-select",iconLead:u?(0,i.jsx)("div",{className:"x180r7m8",children:(0,ey.e7)(u)}):void 0,label:(0,i.jsx)(eh.h,{children:(0,g.tx)("proto.trigger")}),width:"fill",children:(0,i.jsx)("span",{"data-testid":"interaction-select-label",children:u?o.format(u):(0,j.gl)(e.property)?(0,g.tx)("fullscreen.mixed"):void 0})}),(0,i.jsx)(e_.Container,{children:p})]})}var eE=n(709775),eO=n(709966);let eC={keyCodes:[],triggerDevice:"KEYBOARD"};function eS(e,t,n){return(0,i.jsx)(eu.A,{label:e,input:t,appendedClassName:n?void 0:eO.dU})}function eP(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:o}=(0,eE.Ay)(e.category),{interactionType:l,transitionTimeout:s=.8,mediaHitTime:c=0,interactionMaintained:d=!1,interactionDuration:p=.3,keyTrigger:u=eC}=t.interactionEvent,_=(0,x.md)($.Cw),h=r.useMemo(()=>!l&&_>1||l&&_>0?j.oV:l||"NONE",[l,_]),m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,j.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},y=void 0!==t.interactionActions.find(e=>m(e,"URL")),I=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),v=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,f=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,a.wA)(),n=e.updateSelectionProperties,o=(0,ea.RU)(),[l,s]=r.useState(!1),c=(0,G.YT)(),d=c===G.Oz.SINGLE_COL,p=c===G.Oz.TWO_COL,u=!0===(0,j.E7)(e.maintained),_=(0,j.E7)(e.keyTrigger),h="ON_KEY_DOWN"===(0,j.E7)(e.interactionType),m="AFTER_TIMEOUT"===(0,j.E7)(e.interactionType),y="ON_MEDIA_HIT"===(0,j.E7)(e.interactionType),x=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,j.E7)(e.interactionType)||"")>-1,I=r.useId(),v=(0,i.jsx)(eT,{ariaLabel:(0,g.t)("proto.trigger"),ariaLabelledBy:I,className:eO.sQ,interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,interactionsOnSelectedNodes:e.interactionsOnSelectedNodes,onChange:o=>{V.sn.start("interaction_details_changed"),n({interactionType:o}),t((0,w._P)({name:"Prototype Interaction Type Changed",params:{newType:o,oldType:(0,j._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===o&&s(!0)},property:e.interactionType,recordingKey:E.Pt(e,"interactionDropdown")}),f=d?(0,i.jsx)(eu.A,{labelId:I,label:(0,g.t)("proto.trigger"),input:v}):(0,i.jsx)("div",{className:eO.BX,children:v}),N=(0,i.jsxs)(i.Fragment,{children:[m&&eS((0,g.t)("proto.delay"),(0,i.jsx)(el.W4,{className:eO.Lp,"data-tooltip":(0,g.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":M.Ib.TEXT,dataTestId:"timeout-input",dispatch:t,inputClassName:eO.Gl,max:20,onValueChange:e=>{n({transitionTimeout:e})},recordingKey:E.Pt(e,"timeoutInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.timeout,wheelMultiplier:o/1e3,children:(0,i.jsx)(ei.L,{className:eO.d4})}),d),h&&eS((0,g.t)("proto.key"),(0,i.jsx)(ed,{onChange:e=>{n({keyTrigger:e})},value:_,shouldFocusKeyCaptureField:l,setShouldFocusKeyCaptureField:s}),d),y&&eS((0,g.t)("proto.time"),(0,i.jsx)(el.qd,{className:eO.Ym,"data-tooltip":(0,g.t)("proto.trigger.video_hit_time"),"data-tooltip-type":M.Ib.TEXT,dataTestId:"mediaHitTime-input",dispatch:t,displayFractions:!0,inputClassName:eO.vE,max:3600,onValueChange:e=>{n({mediaHitTime:e})},recordingKey:E.Pt(e,"mediaHitTimeInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaHitTime,wheelMultiplier:o/1e3,children:(0,i.jsx)(er.R,{})}),d),x&&eS((0,g.t)("proto.delay"),(0,i.jsx)(el.W4,{allowEmpty:!0,className:eO.Lp,"data-tooltip":(0,g.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":M.Ib.TEXT,dataTestId:"duration-input",dispatch:t,inputClassName:eO.Gl,min:0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},placeholder:(0,g.t)("proto.trigger.add_delay_placeholder"),recordingKey:E.Pt(e,"delayInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:u?e.interactionDuration:void 0,wheelMultiplier:o/1e3,children:(0,i.jsx)(ei.L,{className:eO.d4})}),d)]});return(0,i.jsxs)("div",{className:p?eO.eU:void 0,children:[f,N]})}({...e,updateSelectionProperties:o,interactionType:h,interactionContainsOpenLinkAction:y,interactionContainsUpdateMediaRuntime:I,interactionOnlyContainsBack:v,interactionContainsConditionalAction:f,timeout:s,maintained:d,interactionDuration:p,mediaHitTime:c,keyTrigger:u,interactionsOnSelectedNodes:n,recordingKey:E.Pt(e.recordingKey,G.Qe)})}let eA="prototype_interaction_edit_modal--contentContainer--sIWbR",eb="prototype_interaction_edit_modal--ui3TwoColContentContainer--Q0giF",ej="prototype_interaction_edit_modal--ui3SingleColContentContainer--yxCxZ",eD="prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--usSv3",ek="prototype_interaction_edit_modal--dividerHorizontal--EaIAu",eR="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--ux75Z";function ew(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:o,differentLengthActions:a,mergedActions:l}=(0,eE.Ay)(e.category,e.filterOutNoneActions),s=void 0!==l.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,G.YT)(),u=p===G.Oz.SINGLE_COL,_=p===G.Oz.TWO_COL,{expandedRows:h,setExpandedRows:m,deleteButtonPressed:y,newActionIndexPath:I,resetNewActionIndexPath:f}=e,N=(0,x.md)($.jM),T=(0,ee.cJ)()&&(0,et.kc)({interactionType:e.interactionType,actions:l});r.useEffect(()=>{I&&!I?.equals([])&&(d(I.path,!0),f())},[h,m,I,f,d]);let O=r.useCallback(e=>{h.find(t=>t.equals(e))?m(h.filter(t=>!t.equals(e))):m([...h,new eo.Op(e)])},[h,m]),C=r.useCallback(n=>{var o=n.dropItem;if((0,j.gl)(o)||(0,eo.qQ)(n.dragItem.action))return;let i=e.interactionsOnSelectedNodes;if(!i||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let i=e.actions,a=(0,eo.Vp)(i,c,h,o,n.position);if(a.newSelectedActionIndex&&_&&d(a.newSelectedActionIndex.path,!0),a.newActions&&(t[r].actions=a.newActions),a.newExpandedRows){if(_){let e=[];a.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new eo.Op([n]))}),m(e)}else m(a.newExpandedRows)}}}let a=i.map(e=>t.find(t=>t.id===e.id)??e);A.Y5.updateSelectionProperties({prototypeInteractions:a})},[h,m,e.interactionsOnSelectedNodes,c,t,d,_]),S=v()({"prototype_interaction_edit_modal--panelUI3--197Hy":!0,"prototype_interaction_edit_modal--panelUI3TwoColumn--d803r":_});return T?(0,i.jsx)(Q.r,{isInteractionModal:!0}):(0,i.jsx)(z.hh,{children:(0,i.jsxs)(H.Zk,{className:S,children:[e.shouldHideTitle?null:(0,i.jsx)(H.fI,{children:(0,i.jsx)(H.U8,{title:(0,g.t)("proto.interaction.interaction"),dataTooltipContentKey:Z,dataTooltipTimeoutDelay:50})}),(0,i.jsx)("div",{children:(0,i.jsxs)(i.Fragment,{children:[u&&(0===N.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eP,{category:e.category,recordingKey:G.dJ,headerButtons:(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--RcG--"})]}):(0,i.jsx)(Y.Y,{direction:"horizontal",padding:{horizontal:16,vertical:8},children:(0,i.jsx)(H.JU,{children:(0,g.tx)("fullscreen.mixed")})})),a&&(0,i.jsx)(Y.Y,{direction:"horizontal",padding:{horizontal:16,vertical:8},children:(0,i.jsx)(H.nV,{children:(0,g.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content")})}),!a&&0===N.length&&(0,i.jsx)(i.Fragment,{children:l?.map((r,a)=>i.jsx(en.P,{action:r,actionIndexPath:[a],autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:h,interactionType:e.interactionType,isNarrowPanel:!s,isNestedInConditional:!1,numActions:l.length,onDeleteAction:()=>y(a),onDrop:C,onExpand:O,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:E.Pt(e.recordingKey,G.eG,a),selectedActionIndex:c,selectedInteractions:t,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,stateManagementVersion:e.stateManagementVersion,updateMultipleDestinationNodes:o(a),updateSelectionProperties:n(a)},a))})]})})]})})}var eL=n(942356),eM=n(254056),eU=n(122313),eK=n(888903),eB=n(934384);function eV({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:o,selectedInteractions:r}){let l=(0,a.wA)(),s=(0,G.YT)()===G.Oz.SINGLE_COL,c=s?eL.IK:eL.$n,d=1===o?(0,i.jsx)(c,{variant:"secondary",onClick:()=>{B.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},recordingKey:E.Pt(t,"revert-state-management-version"),"data-testid":"revert-state-management-button",children:(0,g.tx)("proto.state_management.revert_controls")}):(0,i.jsx)(c,{variant:"primary",onClick:()=>{for(let t of(B.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,G.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&eB.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,j.hS)(e.preserveScroll)&&(0,j.hS)(o)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(eK.F.enqueue({type:"state-management-updated",message:(0,g.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,g.t)("proto.state_management.visual_bell_update_all"),action:()=>{A.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(eK.F.enqueue({type:"state-management-updated-all",message:(0,g.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},recordingKey:E.Pt(t,"update-state-management-version"),children:(0,g.tx)("proto.state_management.update_controls")}),p=1===o?(0,g.tx)("proto.state_management.new_controls"):(0,g.tx)("proto.state_management.old_controls"),u=(0,i.jsx)(eM.N,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",children:(0,g.tx)("proto.state_management.controls_help_link_new")}),_=(0,i.jsxs)("div",{className:"prototype_state_management_version_panel--containerUI3--VKnVJ",children:[(0,i.jsx)(eh.J,{children:p}),(0,i.jsx)(eh.J,{children:u}),d]}),h=(0,i.jsxs)("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--7uMLM",children:[(0,i.jsx)("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--xrGeF",children:(0,i.jsx)(eh.J,{children:p})}),(0,i.jsx)("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--sRbBi",children:u}),d]});return(0,i.jsx)(eU.k,{name:"prototype_state_management_version_panel",children:(0,i.jsx)(H.Zk,{className:"prototype_state_management_version_panel--panelUI3--ZQ3YW",children:s?_:h})})}let eF="created_noodle";function eG(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:o}=e,r=(0,G.YT)()===G.Oz.TWO_COL,{detailProps:a,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,eE.Ay)(e.category,e.filterOutNoneActions);(0,F.h)(()=>{if(void 0!==V.sn.get(eF)){let e=V.sn.stop(eF);(0,B.sx)(eF,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:u}=(0,G.n6)(a,l,d),{interactionType:_="NONE",interactionMaintained:h=!1,interactionDuration:m=.3,keyTrigger:g=eC,transitionTimeout:y=.8,mediaHitTime:x=0}=l.interactionEvent,I=(0,G.iC)(d),v=(0,i.jsx)(ew,{autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,category:n,deleteButtonPressed:e.deleteButtonPressed,expandedRows:e.expandedRows,filterOutNoneActions:e.filterOutNoneActions,interactionDuration:m,interactionType:_,interactionsOnSelectedNodes:s,keyTrigger:g,maintained:h,mediaHitTime:x,newActionIndexPath:o,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:E.Pt(e,G.Qe),resetNewActionIndexPath:e.resetNewActionIndexPath,selectedActionIndex:e.selectedActionIndex,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,setExpandedRows:e.setExpandedRows,shouldHideTitle:t,stateManagementVersion:I,timeout:y});return(0,i.jsxs)("div",{children:[v,!r&&p&&(0,i.jsx)(eV,{transition:u,recordingKey:E.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:I,selectedInteractions:d})]})}var ez=n(461136),eY=n(465075),eH=n(828473),eW=n(890305),eJ=n(751642),eX=n(817478);function eq(e,t,n){let[o,i,r]=e.path;if(void 0===o||void 0===i||void 0===r)return;let a=t[o]?.conditionalActions;if((0,j.hS)(a)){let e=a?.[i]?.actions?.length??0;if(r>=e){if(0===e){n([o],!0);return}n([o,i,r-1],!0);return}}}function eZ(e,t,n){let o=e.path[0]>=t.length,i=0===e.path.length;if(o){n([t.length-1],!0);return}if(i){n([0],!0);return}}var e$=n(226055),eQ=n(911470);let e0=()=>{_.glU?.setSelectedInteractions([]),(0,y.kc)().prototype_ai_magic_link_show_suggestion_toast&&A.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),A.Y5.deselectProperty()},e1=(0,f.jz)("197px"),e2=(0,f.c8)("50%");function e5(e){var t;return e&&o?.height<369?o=t={...o,height:369}:o??={width:440,height:e?369:320,leftWidthPct:45}}let e4=r.memo(function(e){return(0,i.jsx)(T.u9,{label:"InContextPrototypeInteractionEditModal",children:(0,i.jsx)(e7,{...e})})}),e7=r.memo(function({filterOutNoneActions:e}){let t=(0,a.d4)(te),n=(0,eE.HS)(),{selectedInteractions:o}=(0,eE.Ay)(n,e),r=o.length>0,{pressingShiftKey:l,setPressingShiftKey:s}=(0,R.om)(t,r,G.dJ);if((0,eJ.G)()||!t||!r)return null;let c=o.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return(0,i.jsx)(e3,{category:n,containsConditional:c,pressingShiftKey:l,setPressingShiftKey:s,initialX:t.initialX,initialY:t.initialY,shouldPin:t.shouldPin,filterOutNoneActions:e})}),e3=r.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:l,initialY:u,shouldPin:y,setPressingShiftKey:I,filterOutNoneActions:T}){let P;let j=(0,a.wA)(),[B,V]=r.useState(!1),[,F]=(0,x.fp)(eX.x),z=(0,r.useRef)(null),Y=y||B,{shouldModalHide:H,incrementTimesInteractedWithModal:W}=(0,R.ff)(n,I,Y),J=(0,G.YT)(),X=J===G.Oz.SINGLE_COL,q=J===G.Oz.TWO_COL,[Z,Q]=r.useState(new eo.Op([0])),{selectedInteractions:en,differentLengthActions:ei,interactionsOnSelectedNodesAndComponents:er,mergedActions:ea,detailProps:el,detailPropsMultipleActions:es,updateSelectionProperties:ec}=(0,eE.Ay)(e,T),ed=es.interactionEvent.interactionType??"NONE",ep=(0,ee.cJ)();var eu=Z.path.length>0?Z:new eo.Op([0]);let e_=eu.isConditional(),eh=(e,t)=>eu=new eo.Op(e);eu.path[0]>=ea.length&&!e_?eZ(Z,ea,eh):e_&&eq(Z,ea,eh);let em=r.useCallback((e,t)=>{t?Q(new eo.Op(e)):Q(new eo.Op([]))},[]);r.useEffect(()=>{if(0===ea.length&&!T){(0,O.zb)(s.e.INTERACTION_DESIGN,"interactions panel rendered with empty actions array - auto-recovering");let e=JSON.parse(JSON.stringify(en));for(let t of e)if(t&&t.actions?.length===0){let e={connectionType:"NONE"};t.actions=[e]}let t=er.map(t=>e.find(e=>m.aI(e.id,t.id))??t);A.Y5.updateSelectionProperties({prototypeInteractions:t})}let e=Z.isConditional();if(e){if(e){eq(Z,ea,em);return}}else{eZ(Z,ea,em);return}},[ea,Z,em,en,er,T]);let{shouldShowAdvancedPrototypingPaywall:eg,showAdvancedPrototypinglMultipleActionsModal:ey}=(0,G.zt)(),{showPanel:ex,transition:eI}=(0,G.n6)(el,es,en),ev=(0,G.iC)(en);var ef=[];q?ea.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&ef.push(new eo.Op([t]))}):ea.length<4&&ea.forEach((e,t)=>{ef.push(new eo.Op([t]))});let[eN,eT]=r.useState(ef),eO=r.useRef(null),eC=(0,f.jz)(eQ.prototypeInteractionModalWidth),eS=(0,f.jz)(eQ.prototypeInteractionModalExpandedWidth),eD=e5(ex).width,eR=t?eS:eC;q&&(eR=eD);let[ew,eL]=r.useState(y),eM=r.useCallback(()=>{B||(j((0,w._P)({name:"prototype_interaction_details_modal_dragged"})),V(!0))},[j,B,V]),eU=r.useCallback((e,n)=>q?new C.Mi(e-(eD-eC),n):t?new C.Mi(e-(eS-eC),n):new C.Mi(e,n),[q,t,eD,eC,eS]),eK=(0,R.IK)(l,u,y,eR,eU);r.useEffect(()=>{F(H)},[F,H]),r.useEffect(()=>{eL(y)},[y]),r.useEffect(()=>()=>{j((0,w._P)({name:"prototype_interaction_details_modal_closed"}))},[j]);let eF=(0,x.md)($.uW);r.useEffect(()=>{ep&&eF?.focus()},[ep,eF]);let eJ=r.useRef(null),[e4,e7]=r.useState(!1);r.useEffect(()=>{e4&&(e7(!1),eJ.current?.scrollToBottom())},[e4,e7,eJ]);let[e3,te]=r.useState(new eo.Op([])),tt=(0,k.q5)(),tn=r.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case L.zy.COPY:case L.zy.CUT:{let o=JSON.parse(JSON.stringify(en)),i=(0,ez.lg)(o),r=b.fG(tt?.key||null,{prototypeInteractions:i});if(!r)break;if(b.C4(n,r,""),t===L.zy.CUT){let e=[];for(let t of en){let{sourceNodeID:n,id:o}=t;n&&o&&e.push(N.d({nodeID:n,interactionID:o}))}h.l7.user("delete-prototype-interactions",()=>_.glU?.deleteInteractions(e)),A.Y5.deselectProperty()}e.accept()}}},[tt?.key,en]),to=r.useRef(!1),[ti,tr]=r.useState(!1),{firstVariableSetMode:ta,firstVariableSetID:tl}=(0,eH.b)(),ts=(0,D.p8)("currentPage"),tc=r.useCallback((e,t,n,o)=>{j((0,w._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:o}}))},[j]),td=r.useCallback(e=>{if(er&&en){var t=!1,n=!1;if(eg)ey();else{for(let r=0;r<en?.length;r++){let a=en[r],l=[];if(a&&a.actions){var o=0,i=[];for(let r=0;r<a.actions.length;r++){let s=a.actions[r];if(r!==e)void 0!==eN.find(e=>e.equals([r]))&&i.push(new eo.Op([o])),l.push(s),o++;else{let e=a.id?a.id:m.Hr;tc(s.connectionType?s.connectionType:"NONE",(0,m.dI)(e),ts),r===a.actions.length-1&&(t=!0),2===a.actions.length&&(n=!0)}eT(i)}en[r].actions=l}}let r=er.map(e=>en.find(t=>t.id===e.id)??e);A.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&eT([new eo.Op([0])]),t&&q&&Q(new eo.Op([e-1]))}}},[er,en,eg,ey,eN,ts,tc,q]),tp=r.useCallback(e=>{if(!er||!en||!e.path.length||void 0===e.path[0])return;let[t,n,o]=e.path,i=e.isConditional();if(eg)ey();else if(i){let e=!1,i=!1,r=en.map(r=>{let a=r.actions;if(!a)return r;let l=a.map((a,l)=>{if(l!==t||"CONDITIONAL"!==a.connectionType)return a;let s=a.conditionalActions;if(!s)return a;let c=s.map((t,a)=>{if(a!==n)return t;let l=t.actions;if(!l)return t;let s=l[o];s&&tc(s.connectionType?s.connectionType:"NONE",(0,m.dI)(r.id??m.Hr),ts,!0);let c=l.filter((e,t)=>t!==o);return e=o===l.length-1,i=0===c.length,{...t,actions:c}});return{...a,conditionalActions:c}});return{...r,actions:l}}),a=er.map(e=>r.find(t=>t.id===e.id)??e);A.Y5.updateSelectionProperties({prototypeInteractions:a}),i?Q(new eo.Op([t])):!i&&e&&Q(new eo.Op([t,n,o-1]))}else td(t);document.activeElement?.blur()},[er,en,eg,ey,td,ts,tc]),tu=ep&&(0,et.kc)({interactionType:ed,actions:ea}),t_=(0,i.jsx)(S.P,{className:q?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--KH2Kk":eA,useBottomPinning:!q,ref:eJ,allowScrollAndZoomOver:!0,"data-not-draggable":!0,children:(0,i.jsx)(eG,{autoOpenExpressionBuilder:ti,autoOpenVariablePicker:to,category:e,deleteButtonPressed:td,expandedRows:eN,filterOutNoneActions:T,newActionIndexPath:e3,onNewActionAdded:e=>{te(e)},onSelect:em,recordingKey:q?E.Pt("leftCol",G.dJ):G.dJ,resetNewActionIndexPath:()=>{te(new eo.Op([]))},selectedActionIndex:Z,setAutoOpenExpressionBuilder:tr,setExpandedRows:eT,shouldHideTitle:!0})}),th=1===en.length,tm=en[0],tg=!1;tm&&(tg=!!tm.actions&&tm.actions.length<2,tm.actions&&1===tm.actions.length&&(P=tm.actions[0]));let ty=!P||"NONE"===P.connectionType,tx=th&&tg&&ty;var tI=m.Hr;let tv=(0,i.jsx)(eY.t,{skipPaywall:tx,addButtonPressed:e=>{if(!en)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&eg){ey();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=tl,e.targetVariableModeID=ta),"SET_VARIABLE"===e.connectionType&&to&&(to.current=!0),"CONDITIONAL"===e.connectionType&&tr(!0);let t=!1;var n=null,o=!ei&&!tx&&en[0].actions&&1===en[0].actions.length;if(ei||tx)for(var i=0;i<en.length;i++){let t=en[i];t.actions=[e];let n=t.id,o=t.sourceNodeID;(0,G.uU)(t.stateManagementVersion)&&n&&o&&eB.zZ.recordInteractionUpgraded(n,o),t.stateManagementVersion=1}else for(var i=0;i<en.length;i++){let o=en[i];if(o.actions){if((0,G.uU)(o.stateManagementVersion)&&(o.id&&o.sourceNodeID&&eB.zZ.recordInteractionUpgraded(o.id,o.sourceNodeID),o.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),q){if(Z.isConditional()){let n=Z.path[0],i=Z.path[1],r=Z.path[2],a=o.actions?.[n],l=a.conditionalActions?.[i].actions?.length??0;n===o.actions.length-1&&r===l-1&&(t=!0),a.conditionalActions?.[i].actions?.splice(r+1,0,e)}else{let n=Z.path[0]+1;n===o.actions.length&&(t=!0),o.actions?.splice(n,0,e)}}else o.actions?.push(e);tI=o.id?o.id:m.Hr}else o.actions=[e],tI=o.id?o.id:m.Hr;if(o.stateManagementVersion=1,q){let e=[...Z.path];e[e.length-1]+=1,n=new eo.Op([...e])}else n=new eo.Op([o.actions.length-1])}let r=er.map(e=>en.find(t=>t.id===e.id)??e);if(A.Y5.updateSelectionProperties({prototypeInteractions:r}),o||q){var a=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&a.push(new eo.Op([t]))}),eT(a)}e7&&(!q||t)&&e7(!0),te&&te(n),j((0,w._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,m.dI)(tI),page_id:ts}}))},renderButton:!0,recordingKey:G.dJ,isNestedInConditional:q&&Z.isConditional()}),tf=en.some(e=>void 0!==e.actions&&e.actions?.length>1),tN=!Z.isConditional()&&!tf,tT=(0,i.jsx)(c.K,{onClick:()=>tp(Z),"aria-label":(0,g.t)("proto.prototype_panel.delete"),disabled:tN,recordingKey:E.Pt(G.dJ,"actionDeleteButton"),"data-tooltip":(0,g.t)("proto.prototype_panel.delete"),"data-tooltip-type":M.Ib.TEXT,children:(0,i.jsx)(p.r,{})}),tE=(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--bJwKH",children:[tv," ",tT]}),tO=(0,i.jsx)(e$.c.Provider,{value:e$.P.LEFT,children:(0,i.jsxs)("div",{className:q?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--tjFGO":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--fMlO-",ref:eO,style:q?{width:`${e5(ex).leftWidthPct}%`}:void 0,children:[(0,i.jsx)(eP,{category:e,recordingKey:G.dJ,headerButtons:(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:ek}),t_,(0,i.jsx)("div",{className:ek}),tE]})}),tC=ea.length>0?(0,i.jsx)(e$.c.Provider,{value:e$.P.RIGHT,children:(0,i.jsx)(S.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:q?"prototype_interaction_edit_modal--ui3ScrollContainerRight--DZWym":void 0,children:(0,i.jsx)(e6,{selectedActionIndex:eu,handleExpandUI3:(e,t)=>{!t&&ea.length>1?eT(eN.filter(t=>!t.equals(e))):eN.find(t=>t.equals(e))||eT([...eN,new eo.Op(e)])},autoOpenVariablePicker:to,autoOpenExpressionBuilder:ti,setAutoOpenExpressionBuilder:tr,filterOutNoneActions:T})})}):null,tS=r.useRef(e1),[,tP]=(0,d.i)({disabled:!q,onDragStart(){eO.current&&(tS.current=eO.current.getBoundingClientRect().width)},onDrag(e){if(eO.current&&tS.current){let t=e5(ex),n=tS.current+e.delta.x,i=n/t.width*100;n<e1?i=e1/t.width*100:i>e2&&(i=e2),eO.current.style.width=`${i}%`,o={...t,leftWidthPct:i}}}}),tA=q?(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--d-D23",children:[(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--Pc7CB",children:[tO,(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--dividerVertical--MPLFs",children:(0,i.jsx)("div",{...tP({className:"prototype_interaction_edit_modal--verticalResizeHandle--DwooJ"})})}),tC]}),ex&&(0,i.jsx)(eV,{transition:eI,recordingKey:E.Pt(G.dJ,"stateManagementVersionPanel"),updateSelectionProperties:ec,stateManagementVersion:ev,selectedInteractions:en})]}):t_,tb=(0,i.jsx)(eW.Ao,{ref:z,allowAutoExpanding:!0,allowResizeHeight:q,allowResizeWidth:q,allowWheelPassthrough:!0,arrowPosition:y?void 0:eW.F_.TOP,arrowRelativeX:y?void 0:eR/2,beMoreAccessible:!0,canRenderBelowViewport:!0,containerClassName:v()({[eA]:!q,[eb]:q,[ej]:X,"prototype_interaction_edit_modal--abovePropertiesPanel--18VjJ":ew,"prototype_interaction_edit_modal--belowPropertiesPanel--oVSu1":!ew,"prototype_interaction_edit_modal--hideModal--9BXGj":H}),contentContainerClassName:v()({[eA]:!q,[eb]:q,[ej]:X}),dataTestId:"in-context-prototype-interaction-edit-modal",dragHeaderOnly:!0,fullFrame:q,headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--Bea35",headerSize:"small",initialHeight:q?e5(ex).height-eW.uF:void 0,initialPosition:eK,initialWidth:q?e5(ex).width:void 0,maxHeight:q?800:void 0,maxWidth:q?800:void 0,minHeight:q?ex?369:320:void 0,minWidth:q?440:void 0,onClose:e0,onDragStart:()=>{eL(!0),eM()},onFocus:W,onResize:q?e=>{o={...e5(ex),height:e.height,width:e.width}}:void 0,recordingKey:"interactionDetailsModal",title:(t,{titleId:n})=>(0,i.jsx)("div",{className:"prototype_interaction_edit_modal--onboardingRow--CO1Vx",children:tu?(0,i.jsx)(e8,{closeButton:t}):(0,i.jsx)(e9,{category:e,createActionTrigger:tv,closeButton:t,titleId:n})}),children:tA}),tj=ep?tb:(0,i.jsx)(U.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--NI-K-",handleClipboard:tn,children:tb});return(0,i.jsx)(K.ht.Provider,{value:r.useMemo(()=>({autoCloseOnScroll:!Y}),[Y]),children:tj})});function e6({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:o,setAutoOpenExpressionBuilder:r,filterOutNoneActions:a}){let s=(0,eE.HS)(),{selectedInteractions:c,mergedActions:d,makeUpdateSelectionPropertiesForActionIndex:p,makeUpdateMultipleDestinationNodesForActionIndex:u,detailPropsMultipleActions:_}=(0,eE.Ay)(s,a),h=e.path[0],m=u(h),g=p(h),y=(0,G.iC)(c),x=_.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],a=e.path[2];if(void 0===h||void 0===n||void 0===a)return null;let s=d[h];if(void 0===s)return null;let p=((0,j.hS)(s.conditionalActions)&&s.conditionalActions?s.conditionalActions:[])[n],u=p?.actions?.[a];return u?(0,i.jsx)("div",{className:eR,children:(0,i.jsx)(en.P,{action:u,actionIndexPath:e.path,autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:x,isNarrowPanel:!0,isNestedInConditional:!0,numActions:d.length,onDeleteAction:l.lQ,onDrop:l.lQ,onExpand:l.lQ,onSelect:l.lQ,recordingKey:E.Pt(G.dJ,G.Qe,G.eG,h),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:y,updateMultipleDestinationNodes:m.appendActionIndex(n).appendActionIndex(a),updateSelectionProperties:g.appendActionIndex(n).appendActionIndex(a)},a)}):null}if(void 0===h)return null;let I=d[h];return void 0===I?null:(0,i.jsx)("div",{className:eR,children:(0,i.jsx)(en.P,{action:I,actionIndexPath:[h],autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:x,isNarrowPanel:!0,isNestedInConditional:!1,numActions:d.length,onDeleteAction:l.lQ,onDrop:l.lQ,onExpand:n,onSelect:l.lQ,recordingKey:E.Pt(G.dJ,G.Qe,G.eG,h),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:y,updateMultipleDestinationNodes:m,updateSelectionProperties:g},h)})}function e9({category:e,closeButton:t,createActionTrigger:n,titleId:o}){let r=(0,a.wA)(),{selectedInteractions:l}=(0,eE.Ay)(e),s=(0,G.YT)(),d=(()=>{if(1!==l.length)return 0;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return(_.X3B?.getMatchingInteractions(N.d(t))??[]).length})(),p=(0,y.kc)().prototype_hide_matching_noodles&&1===l.length&&d>1&&(0,i.jsx)(c.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=_.X3B?.getMatchingInteractions(N.d(t))??[];_.glU?.selectInteractionsAndSourceNodes(n);let o=(0,g.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});A.Y5.showVisualBellWithUndo("selected-matching-noodles",o,!1),r((0,w._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,g.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:d}),tabIndex:-1,onMouseEnter:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=_.X3B?.getMatchingInteractions(N.d(t))??[];_.glU?.hoverInteractions(n)},onMouseLeave:()=>_.glU?.hoverInteractions([]),"data-tooltip":(0,g.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:d}),"data-tooltip-type":M.Ib.TEXT,children:(0,i.jsx)(u.A,{})});switch(s){case G.Oz.TWO_COL:return(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--d4Uze",children:[(0,i.jsx)("span",{id:o,children:(0,g.tx)("proto.interaction_details.header")}),(0,i.jsxs)("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--JGGeP",children:[p,t]})]});case G.Oz.SINGLE_COL:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{id:o,children:(0,g.tx)("proto.interaction_details.header")}),(0,i.jsxs)("div",{className:eD,children:[p,n,t]})]})}}function e8({closeButton:e}){return(0,i.jsxs)(i.Fragment,{children:[(0,g.tx)("proto.sites_interaction_link_details.header"),(0,i.jsx)("div",{className:eD,children:e})]})}let te=e=>e.pickerShown?.id===P.o$?e.pickerShown:null},958954:(e,t,n)=>{n.d(t,{y7:()=>eA,a1:()=>eU,wU:()=>eF,dT:()=>eG});var o=n(239976),i=n(105652),r=n(20002),a=n(865702),l=n(288350),s=n(796557),c=n(378721),d=n(106435),p=n(939514),u=n(297860),_=n(692376),h=n(854225),m=n(798913),g=n(2227),y=n(582300),x=n(379141),I=n(270450),v=n(445019),f=n(224542),N=n.n(f),T=n(40297),E=n(723850),O=n(943866),C=n(768781),S=n(499735),P=n(86742),A=n(875253),b=n(682302),j=n(259714),D=n(27414),k=n(324880),R=n(335298),w=n(562418),L=n(772293),M=n(421914),U=n(694454),K=n(964929),B=n(223487),V=n(576116),F=n(748765),G=n(736083),z=n(236410),Y=n(604687),H=n(910312),W=n(113653),J=n(840133);function X(e){return e??"Default"}let q=i.createContext({getNodeName:X}),Z=i.memo(function({getNodeName:e=X,children:t}){let n=i.useMemo(()=>({getNodeName:e}),[e]);return(0,o.jsx)(q.Provider,{value:n,children:t})});var $=n(630691),Q=n(199722),ee=n(709775),et=n(758121),en=n(7857),eo=n(592802),ei=n(300573),er=n(910496),ea=n(581121),el=n(818350),es=n(359962),ec=n(410274),ed=n(342180),ep=n(857621);function eu(){return(0,o.jsx)(en.u9,{label:"MagicLinkEntry",children:(0,o.jsx)(e_,{})})}function e_(){let e=(0,r.wA)(),t=(0,r.d4)(e=>(0,er.Yh)(e.mirror.appModel,ea.JT.MAGIC_LINK));if(!(0,eo.PE)())return null;let n=(0,x.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-ga");return(0,o.jsx)("span",{className:"magic_link--magicLinkButton--miaMN","data-testid":"magic-link-entry",children:(0,o.jsx)(c.K,{recordingKey:S.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":n,onClick:()=>{(0,ec.$I)({moduleToOpen:{type:"custom",module:(0,o.jsx)(ed.p,{}),name:es.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,ei.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,el.B3)(ea.JT.MAGIC_LINK),t&&(0,el.Ag)(ea.JT.MAGIC_LINK,ep.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},"data-tooltip":n,"data-tooltip-show-above":!0,children:(0,o.jsx)(et.S,{})})})}var eh=n(690252),em=n(236839),eg=n(946254),ey=n(854733),ex=n(154963);let eI=(0,n(145652).ex)("prototype_info",function(e){let{tooltipText:t}=e;return(0,o.jsx)("div",{className:ex.s.flex.justifyCenter.itemsCenter.$,children:(0,o.jsx)("span",{className:ex.s.m6.flexGrow1.$,style:{maxWidth:144},children:t})})},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var ev=n(452956),ef=n(121606),eN=n(166783),eT=n(461136),eE=n(911470),eO=n(608534);let eC=new R.JV,eS=new R.Eq,eP=new R.sX,eA=i.memo(function({filterInteractionCategory:e,iAmNotA11yCompliant_FIXME:t}){let n=(0,r.wA)(),a=(0,r.d4)(ee.Cy),l=(0,r.d4)(ee.n9),s=(0,r.d4)(ee.DV),c=(0,r.d4)(ek),d=(0,r.d4)(V.dK),p=(0,r.d4)(V.Xt),u=(0,ee.a2)(),x=(0,ee.R)(),I=(0,r.d4)(ew),v=(0,r.d4)(eD),f=Object.keys(p).length>1,N=eL(),O=function(){let e=eL(),t=(0,r.d4)(eR);return!!e&&!!t&&t.selectionOverrides[h.YnC.PROTOTYPE_INTERACTIONS]}(),S=(0,B.q5)(),P=(0,E.U)(),b=(0,w.cJ)(),j=i.useMemo(()=>new R.cP(d),[d]),M=i.useCallback(e=>j.format(e),[j]),U=i.useRef(null),K=e=>{L.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:F.zk.NO_BUT_TRACK_AS_EDIT}),L.Y5.commit()},z=(0,J.Zj)(Object.keys(p)),H=(0,o.jsx)(eb,{currentSelectedProperty:c,dispatch:n,filterInteractionCategory:e,headerAccessory:z&&(0,o.jsx)(eu,{}),iAmNotA11yCompliant_FIXME:t,inSites:b,inheritedInternalInteractionGroups:x,interactionGroups:u,isOrInInstance:N,isValidPrototypingSourceSelected:I,mixed:f,onAddProperty:e=>{e.stopPropagation();let t=[],n=[];for(let e of Object.keys(p)){let o=_.glU.generateUniqueID();if(!o)return;let i=g.sH(o);if(!i)return;let r={id:i,sourceNodeID:g.sH(e)??g.Hr,event:{interactionType:eU(u,void 0,b)}};r.stateManagementVersion=1,r.actions=[{connectionType:"NONE"}],t.push(r);let a=(0,y.kh)(d,e);n.push(a?a.guid:"")}let o=t.map(e=>C.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(o.length>0){_.glU.setSelectedInteractions(o);let e=(0,Y.cn)(U.current);eG(new A.Mi(e.x,e.y+(0,T.jz)(eE.rightNavGridRowHeight)),!1)}let i=[...a,...t,...l];P("prototype_interaction_added",{interactionCount:i.length,sourceTlfIds:JSON.stringify(n)}),K(i)},onChange:(e,t)=>{let n=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),o=new Set,i=[];for(let e of n){let t=g.dI(e.id);if(t&&!o.has(t))i.push(e);else{if(!(t=_.glU.generateUniqueID()))continue;let n=g.sH(t);if(!n)continue;i.push({...e,id:n})}t&&o.add(t)}t===G.J.NORMAL?i=[...i,...l]:t===G.J.INHERITED_INTERNAL&&(i=[...a,...i]),K(i)},onDeleteProperty:(e,t)=>{let n=(t===G.J.NORMAL?u:x).filter((t,n)=>e.has(n)),o=[];for(let e of n)o.push(...e.interactions);let i=eF(o);m.l7.user("delete-prototype-interactions",()=>_.glU.deleteInteractions(i)),L.Y5.deselectProperty()},openFile:S,shouldIgnoreKeyboardEvents:s.length>0||c.type!==h.rrT.PROTOTYPE_INTERACTION&&c.type!==h.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,showResetInteractionsButton:O,toggleScrollBehaviorPicker:()=>{if(v?.id===k.AO)n(D.XE());else{let e=(0,Y.cn)(U.current);n(D.u1({id:k.AO,initialX:e.x,initialY:e.y}))}}});return(0,o.jsx)(Z,{getNodeName:M,children:b?H:(0,o.jsx)(eh.Zk,{"data-onboarding-key":"prototypePanel",ref:U,"data-testid":"prototype-interaction-list",children:H})})});function eb(e){let t=i.useRef(!1),n=!!e.filterInteractionCategory,r=!n||e.filterInteractionCategory===G.J.NORMAL,s=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=n?e.filterInteractionCategory===G.J.INHERITED_INTERNAL&&s:s,d=(0,o.jsx)("div",{className:"prototype_interaction_list--categoryRow--Z7MOe",children:(0,o.jsx)(l.J,{className:"prototype_interaction_list--categoryLabel--sEYZG",children:(0,x.tx)("proto.interaction_list.variant_interactions")})}),p=e.iAmNotA11yCompliant_FIXME?W.TA:W.WI;return(0,o.jsxs)(o.Fragment,{children:[r&&(0,o.jsx)(p,{addProperty:e.onAddProperty,boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,headerAccessory:e.headerAccessory,hideAddButton:!e.isValidPrototypingSourceSelected,onChange:t=>e.onChange(t,G.J.NORMAL),onDeleteProperty:t=>e.onDeleteProperty(t,G.J.NORMAL),onResetInteractions:m.nc.user("reset-instance-interactions",()=>_.glU.resetSymbolOverrides(h.YnC.PROTOTYPE_INTERACTIONS)),openFile:e.openFile,overrideAddPropertyTooltip:(0,x.t)("proto.prototype_panel.add"),pickerShown:null,propertyList:e.interactionGroups,recordingKey:"prototypeInteractionList",renderProperty:(n,i,r,a,l,s,c,d,p)=>(0,o.jsx)(ej,{autoOpenVariablePicker:t,category:G.J.NORMAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:i,interactionGroup:n,interactionGroups:e.interactionGroups,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:S.Pt("prototypeInteractionList",i),selected:r,singletonRow:e.interactionGroups.length<=1}),selectedPropertyType:h.rrT.PROTOTYPE_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,showResetInteractionsButton:e.showResetInteractionsButton,stylePickerShown:{isShown:!1},title:e.inSites?"":(0,x.t)("proto.title_interactions"),toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker}),c&&d,c&&(0,o.jsx)(p,{addProperty:a.lQ,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,hideAddButton:!0,onChange:t=>e.onChange(t,G.J.INHERITED_INTERNAL),onDeleteProperty:t=>e.onDeleteProperty(t,G.J.INHERITED_INTERNAL),openFile:e.openFile,pickerShown:null,propertyList:e.inheritedInternalInteractionGroups,recordingKey:S.Pt("prototypeInheritedInternalInteractionList"),renderProperty:(n,i,r,a,l,s,c,d,p)=>(0,o.jsx)(ej,{autoOpenVariablePicker:t,category:G.J.INHERITED_INTERNAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:i,interactionGroup:n,interactionGroups:e.inheritedInternalInteractionGroups,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:S.Pt("prototypeInheritedInternalInteractionList",i),selected:r,singletonRow:e.inheritedInternalInteractionGroups.length<=1}),selectedPropertyType:h.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,stylePickerShown:{isShown:!1},title:"",toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})]})}function ej({interactionGroups:e,interactionGroup:t,index:n,hasFocus:a,selected:l,singletonRow:y,onMouseDown:f,onMouseMove:T,onMouseUp:A,dispatch:w,category:M,recordingKey:B,inSites:F}){let{getNodeName:W}=i.useContext(q),J=(0,r.d4)(ee.DV),X=(0,ee.a2)(),Z=(0,r.d4)(eD),Q=Z?.id===k.o$?Z:null,et=(0,r.d4)(V.dK),[en,eo]=i.useState(!1),ei=(0,v.md)(K.NE)?eS:eC,er=i.useContext(ef.qd),ea=function(e,t){let n=new Set(t.map(e=>{let t=C.s(e);return t?g.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=g.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,J),[el,es]=(0,v.fp)(ev.jM),ec=(0,v.md)(ev.uW),ed=i.useRef(null),ep=i.useRef(null),eu=i.useCallback(()=>{let e=F?ep.current:ed.current;eG((0,Y.cn)(e),!1)},[F]),e_=i.useCallback(()=>{_.glU.setSelectedInteractions([]),w(D.XE()),L.Y5.deselectProperty()},[w]),eh=n=>{if(!ed||!ep)return;F&&ec?.focus();let o=eV(t),i=n.metaKey||n.ctrlKey;if(i)ea?o=J.filter(e=>!o.includes(e)):o.push(...J);else if(!F&&n.shiftKey){var r;let n,i;let a=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===a)return;let l=function(e,t){let n=1/0,o=e;for(let i of t){let t=Math.abs(e-i);t<n&&(o=i,n=t)}return o}(a,function(e,t){let n=new Set,o=new Set(t);for(let t=0;t<e.length;t++)eV(e[t]).some(e=>o.has(e))&&n.add(t);return n}(e,J)),s=(n=a,i=l,a>l&&(n=l,i=a),e.slice(n,i+1));for(let e of(o=[...J],s))o.push(...eV(e))}if(_.glU.setSelectedInteractions(o),L.Y5.updateAppModel({currentSelectedProperty:{type:M===G.J.NORMAL?h.rrT.PROTOTYPE_INTERACTION:h.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),o.length){let e=Q&&Q.shouldPin;if(F){let t=el.length+o.length>1;i?(i||t)&&w(D.XE()):(es([]),e||eu())}else e||eu()}else e_()},ex=(0,r.d4)(H.ZM),eE=!1,eP=null,eA=null;for(let e of t.interactions)if(!eP&&e.actions&&e.actions.length>0)eP=e.actions[0],eA=e;else if(eB(eP,W,!0,ex)!=eB((e.actions??[])[0],W,!0,ex)){eE=!0;break}let eb=()=>{let e=eF(t.interactions);_.glU.hoverInteractions(e),eo(!0)},ej=()=>{_.glU.hoverInteractions([]),eo(!1)},ek=new R.js(!0,ex),eR=(0,R.mj)(eP),ew=eA?.actions?.length??0,eL=ew>1?(0,x.t)("sites.panel.interaction_summary",{numActions:ew}):eE||!eP||"NONE"===eR?void 0:ek.format(eR),{tooltipText:eM,showTooltip:eU}=(0,eT.QY)(eL),ez=e=>{e.stopPropagation()},eY=e=>{e.stopPropagation();let n=eF(t.interactions);m.l7.user("delete-prototype-interactions",()=>_.glU.deleteInteractions(n)),L.Y5.deselectProperty(),L.Y5.commit()},eH=!1,eW=!1;if(M===G.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=et.get(g.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{eH=!0;break}}}let o=_.glU.getContainingStateGroupOrSelf(g.dI(e.sourceNodeID??g.Hr))||"";if(""===o||""!==n&&o!==n){eH=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),o=e.some(e=>"ON_HOVER"===e.event.interactionType);eW=n&&o}eH=M!==G.J.INHERITED_INTERNAL&&eH;let eJ=function(e,t,n){if(e!==G.J.INHERITED_INTERNAL)return null;let o=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,o=void 0!==t.actions&&t.actions.length>=1;if(!n||!o)return!1;let i=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),r=e.actions.every(e=>g.fn(e.transitionNodeID));var a=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){a=!0;break}return i&&r&&a}(e.interactions[0],t.interactions[0]));return o?.interactions[0]??null}(M,t,e),eX=(0,O.ZC)(eJ),eq=(0,E.U)();if(i.useEffect(()=>{null===eX&&eJ&&eq("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:eJ.event?.interactionType})}),t.event.interactionType&&er&&er!==(0,$.hD)(t.event.interactionType)||"mouse"===er&&(0,eN.zL)(t.interactions)||F&&(0,I.kc)().sts_links_v2&&(0,eN.pL)(t.interactions))return null;let eZ=M===G.J.INHERITED_INTERNAL&&X.some(e=>e.key===t.key)&&!eJ,e$=l&&a,eQ=ea&&!l,e0=(0,o.jsx)(p.e,{}),e1=eH||eW||eZ,e2=eH?(0,x.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):eW?(0,x.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):eZ?(0,x.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",e5=(0,o.jsx)(eg.ic,{ref:ep,"data-testid":`prototypeInteractionItem-${n}`,hideGrabber:!0,onMouseEnter:eb,onMouseLeave:ej,onClick:eh,recordingKey:S.Pt(B,"draggableRow"),selected:ea,"aria-selected":ea,children:(0,o.jsx)(ey.s2,{label:null,leftIcon:(0,o.jsx)(s.d,{"aria-expanded":eQ&&!!Q,recordingKey:S.Pt(B,"interactionIcon"),onMouseDown:ez,"data-tooltip-type":z.Ib.TEXT,"data-tooltip":e1?e2:eK(t.event,ei,!!F),"aria-label":e1?e2:eK(t.event,ei,!!F),children:e1?e0:(0,U.e7)(t.event.interactionType)}),input:(0,o.jsxs)(P.D8,{onMouseDown:ez,recordingKey:S.Pt(B,"interactionText"),className:"prototype_interaction_list--ellipsis--qHiwL ellipsis--ellipsis--70pHK",onMouseEnter:eU,children:[eK(t.event,ei,!!F),eL&&(0,o.jsxs)("span",{"data-tooltip-type":z.Ib.TEXT,"data-tooltip":eM,className:"prototype_interaction_list--summaryText--avExn",children:["\xa0\xb7\xa0",eL]})]}),rightIcon:(0,o.jsx)(b.k,{isVisible:en,children:(0,o.jsx)(c.K,{onClick:eY,"aria-label":(0,x.t)("proto.prototype_panel.remove_interaction_aria_label",{interactionType:eK(t.event,ei,!!F).toLocaleLowerCase()}),"data-tooltip":(0,x.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:S.Pt(B,"removeButton"),onMouseDown:ez,children:(0,o.jsx)(u.r,{})})})})});if(F)return e5;let e4=(0,o.jsxs)(d.u,{className:N()({"prototype_interaction_list--interactionButton--bQ7XU":!0,"prototype_interaction_list--interactionButtonSelected--rbfDi":e$,"prototype_interaction_list--interactionButtonSelectedSecondary--upxey":eQ}),onClick:eh,onKeyDown:e=>{"Enter"!==e.key&&(" "!==e.key||e.shiftKey)||eh(e)},onMouseDown:ez,"aria-haspopup":"dialog","aria-expanded":!!Q,recordingKey:B,children:[e1&&(0,o.jsx)(j.B,{className:"prototype_interaction_list--warningIcon--ce5lJ",svg:eO.A,"data-tooltip-type":z.Ib.SPECIAL,"data-tooltip":eI,"data-tooltip-text":e2}),(0,o.jsx)("div",{className:e1?"prototype_interaction_list--interactionNameShort--ZEna7 prototype_interaction_list--interactionName--h0BVi":"prototype_interaction_list--interactionName--h0BVi",children:eK(t.event,ei,!!F)}),(0,U.av)((0,R.mj)(eP)),(0,o.jsx)("div",{className:"prototype_interaction_list--targetText--ebbkN",dir:"auto",children:eE?(0,x.t)("proto.variant_actions.mixed"):M===G.J.INHERITED_INTERNAL?(0,x.t)("proto.variant_actions.change_to"):eB(eP,W,!0,ex)})]}),e7=(0,o.jsx)(b.k,{isVisible:en,children:(0,o.jsx)("span",{className:"prototype_interaction_list--removeButton--GpTd3",children:(0,o.jsx)(c.K,{onClick:eY,"aria-label":(0,x.t)("proto.prototype_panel.remove_interaction_aria_label",{interactionType:eK(t.event,ei,!!F).toLocaleLowerCase()}),"data-tooltip":(0,x.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:S.Pt(B,"removeButton"),onMouseDown:ez,children:(0,o.jsx)(u.r,{})})})});return(0,o.jsx)(em.vA,{ref:ed,hasFocus:e$,htmlAttributes:{"data-testid":`prototypeInteractionItem-${n}`,onMouseEnter:eb,onMouseDown:f,onMouseLeave:ej,onMouseMove:T,onMouseUp:A},icon:e7,input:e4,recordingKey:S.Pt(B,"draggableRow"),selected:l||ea,singletonRow:y})}function eD(e){return e.pickerShown}function ek(e){return e.mirror.appModel.currentSelectedProperty}function eR(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function ew(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function eL(){let e=(0,r.d4)(V.Xt),t=(0,r.d4)(V.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let eM=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function eU(e,t,n){let o=new Set;for(let{event:t}of e)o.add(t.interactionType);for(let e of eM)if(!o.has(e)&&(!n||"DRAG"!==e)&&("BACK"!==t||"ON_HOVER"!==e&&"ON_PRESS"!==e))return e;return"ON_KEY_DOWN"}function eK(e,t,n){let o=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,Q._i)(e.keyTrigger.keyCodes),i=(0,Q.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n?(0,Q.U8)(t):o+" ("+(0,Q.U8)(t)+")";if(i)return n?i:o+" ("+i+")"}return o}function eB(e,t,n,o){let i=new R.js(n,o);if(!e)return i.format("NONE");let r=(0,R.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return i.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,M.gl)(e.connectionURL))return(0,x.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return i.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return eP.format(e)}return e.transitionNodeID?(0,M.gl)(e.transitionNodeID)?(0,x.t)("fullscreen.mixed"):t(g.dI(e.transitionNodeID)):i.format("NONE")}function eV(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>C.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function eF(e){let t=[];for(let n of e){let{sourceNodeID:e,id:o}=n;e&&o&&t.push(C.d({nodeID:e,interactionID:o}))}return t}function eG(e,t){L.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:_.yxn.PROPERTIES_PANEL,x:e.x,y:e.y,isBehaviorsOnly:t}})}},563776:(e,t,n)=>{n.d(t,{x:()=>tv,k:()=>tf});var o=n(239976),i=n(105652),r=n(20002),a=n(692376),l=n(2227),s=n(379141),c=n(847923),d=n(272439),p=n(224542),u=n.n(p),_=n(768781),h=n(499735),m=n(154963),g=n(335298),y=n(562418),x=n(772293),I=n(421914),v=n(964731),f=n(300573),N=n(736083),T=n(279758),E=n(248317),O=n(288350),C=n(798913),S=n(875253),P=n(608375),A=n(748765),b=n(604687),j=n(213214),D=n(596611),k=n(687645),R=n(181516),w=n(391459),L=n(157750);function M(e){i.useEffect(()=>{let t=a.Ez5?.prototypingEditorState().colorPickerEyedropperVarData;if(t)return(0,L.lu)(t,{onChangeImmediate(){let n=t.getCopy();n&&e(n)}})},[e])}var U=n(690252),K=n(248046),B=n(460166),V=n(526865);let F=P.TI;function G({children:e}){return(0,o.jsx)(B.TN,{children:e})}function z({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:d}){let[p,u]=i.useState(!1),[_,m]=i.useState(new S.Mi),g=(0,r.wA)(),y="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:x,destinationOverlayBackgroundType:v,destinationOverlayPositionType:N,destinationOverlayBackgroundInteraction:T}=(0,c.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[y]?.destinationOverlayBackgroundInteraction})),P=i.useRef(null),L=i.useCallback(()=>{u(!1)},[u]),K=i.useCallback(()=>{if(p)L();else{u(!0);let e=P.current;m((0,b.cn)(e))}},[p,L]),B=i.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";C.l7.user("overlay-background-type-edit-scope",()=>{a.X3B?.setOverlayBackgroundType(l.dI(d),t)}),g((0,f._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[g,d]),V=i.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";C.l7.user("overlay-background-interaction-edit-scope",()=>{a.X3B?.setOverlayBackgroundInteraction(l.dI(d),t)}),g((0,f._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[g,d]),z=i.useCallback(()=>(0,I._W)(x,{r:0,g:0,b:0,a:.25}),[x]),Y=i.useCallback((e,t)=>{t!==A.zk.NO&&C.l7.user("overlay-background-color-edit-scope",()=>{a.X3B?.setOverlayBackgroundColor(l.dI(d),e)})},[d]);M(e=>{Y(e.value,A.zk.YES)});let H=i.useCallback((e,t)=>{Y(e,A.zk.YES)},[Y]),W=i.useCallback((e,t)=>{let n=z();Y({r:n.r,g:n.g,b:n.b,a:e},t)},[z,Y]),X=i.useCallback(e=>{C.l7.user("overlay-position-type-edit-scope",()=>{a.X3B?.setOverlayPositionType(l.dI(d),e)}),g((0,f._P)({name:"Overlay position changed",params:{position:e}}))},[g,d]),q=z(),Z=z().a,$=(0,I.E7)(N),Q="CLOSE_ON_CLICK_OUTSIDE"===(0,I.E7)(T),ee="SOLID_COLOR"===(0,I.E7)(v),et=(0,o.jsxs)("div",{className:"overlay_panel--colorValueContainer--xia-j paint_panels--colorValueContainer--QPBbG raw_components--borderFocusWithin--mSvWa paint_panels--_baseColorValueContainer--vZ0G7 raw_components--base--O8WhL raw_components--singleRowHeight--r92RH",children:[(0,o.jsx)(D.J,{onClick:ee?K:()=>{},color:q,opacity:Z,recordingKey:h.Pt(t,"chit"),className:"overlay_panel--chit--H0ZPv paint_panels--chit--o24xS"}),(0,o.jsx)(R.AN,{className:"overlay_panel--colorInputUI3--t9GGp paint_panels--colorInput--fcNWY",noLeftBorder:!0,formatter:F,property:q,disabled:!ee,onChange:H,recordingKey:h.Pt(t,"colorInput"),noBorderOnFocus:!0}),(0,o.jsx)(j.Pd,{className:"overlay_panel--opacity--dSwlr paint_panels--opacityInputContainer--vGHrs",value:Z,onValueChange:W,dispatch:g,disabled:!ee,noBorderOnFocus:!0,recordingKey:h.Pt(t,"opacity")})]});return(0,o.jsxs)(U.Zk,{className:"overlay_panel--overlayPanelUI3--iIis3",children:[(0,o.jsx)(J,{overlayPositionType:$,onOverlayPositionTypeChange:X,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&(0,o.jsx)(G,{children:(0,o.jsx)(E.S,{label:(0,o.jsx)(O.J,{children:(0,s.tx)("proto.close_when_clicking_outside")}),recordingKey:h.Pt(t,"closeOnClickOutside"),onChange:V,checked:Q})}),(0,o.jsx)(G,{children:(0,o.jsx)(E.S,{label:(0,o.jsx)(O.J,{children:(0,s.tx)("proto.overlay_panel.background")}),recordingKey:h.Pt(t,"addBackgroundBehindOverlay"),onChange:B,checked:ee})}),ee&&(0,o.jsx)(w.A,{ref:P,label:(0,s.t)("proto.overlay_panel.background"),input:et}),p&&(0,o.jsx)(k.h,{disabledVariableIds:new Set,initialPosition:_,color:q,boundVariable:null,onChange:Y,onClose:L,recordingKey:h.Pt(t,"colorPicker")})]})}let Y=K.l6,H=K.c$;class W extends i.PureComponent{constructor(){super(...arguments),this.titleFormatter=new g.Cr,this.renderOverlayPositionOption=(e,t)=>(0,o.jsx)(H,{value:e,recordingKey:h.Pt(this.props,e)},t)}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return(0,o.jsxs)(Y,{ariaLabelledBy:this.props.ariaLabelledBy,chevronClassName:"overlay_panel--chevron--XL4wQ",className:this.props.className,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownWidth:V.DxS,formatter:this.titleFormatter,id:this.props.recordingKey??"overlay-position_select",inputClassName:"overlay_panel--input--oOqdR",onChange:this.props.onChange,property:this.props.property,recordingKey:h.Pt(this.props,"select"),children:[e,(0,o.jsx)(K.sK,{}),this.renderOverlayPositionOption("MANUAL",10)]})}}function J({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,r.wA)(),l=(0,v.Um)(),c=i.useId(),d=(0,o.jsx)(W,{ariaLabelledBy:c,className:"overlay_panel--overlayPositionDropdown--DW1sP",property:e,dispatch:a,dropdownShown:l,onChange:t,recordingKey:h.Pt(n,"overlayPositionDropdown")});return(0,o.jsx)(w.A,{label:(0,s.t)("proto.overlay_panel.position"),labelId:c,input:d})}W.displayName="OverlayPositionDropdown";var X=n(560490),q=n(943360),Z=n(854225),$=n(923500),Q=n(384203),ee=n(764752),et=n(851425),en=n(630691),eo=n(846509),ei=n(7857),er=n(259714),ea=n(227517),el=n(788869),es=n(465075);let ec="prototype_conditional_controls--conditionalRowUI3--p8i5i",ed="prototype_conditional_controls--conditionIcon--azqNn";var ep=n(566108),eu=n(283386),e_=n(378535);function eh(e){return(0,o.jsx)(ei.u9,{label:"ConditionalBlock",children:(0,o.jsx)(em,{...e})})}function em({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:i,updateActions:r,onAddAction:a,autoOpenVariablePicker:l,isSelected:c,handleMouseDownUI3:d,...p}){let u=p.conditionalActions,_=u?.actions?u?.actions:[],m=u?.condition?u?.condition:void 0,g=(0,en.YT)()===en.Oz.TWO_COL,y=g?ec:"prototype_conditional_controls--conditionalRowIf--zBZpT prototype_conditional_controls--conditionalRow--ea-mm",x=(0,o.jsx)(ee.KN,{resolvedType:Z.rXF.BOOLEAN,targetVariableData:m,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:i,showVariableThumbnails:!0,isNarrowPanel:!0}),v=(0,o.jsx)("div",{className:"prototype_conditional_controls--addButton--uRQ-x",children:(0,o.jsx)(es.t,{addButtonPressed:a,recordingKey:h.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})}),f=(0,o.jsxs)(o.Fragment,{children:[g?(0,o.jsx)("span",{className:"prototype_conditional_controls--conditionIconUI3--rKh3A",children:(0,s.tx)("proto.else")}):(0,o.jsx)(er.B,{className:ed,svg:ep.A}),!g&&_.length>0&&(0,o.jsx)("div",{className:"prototype_conditional_controls--addButtonForElse--BPw0I prototype_conditional_controls--addButton--uRQ-x",children:(0,o.jsx)(es.t,{addButtonPressed:a,recordingKey:h.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!g,isNestedInConditional:!0})})]}),N=g?(0,o.jsx)(q.E,{className:"prototype_conditional_controls--elseBlockRowUI3--6TCYX",onClick:d,children:f}):(0,o.jsx)(U.fI,{className:g?ec:"prototype_conditional_controls--conditionalRow--ea-mm",children:f});return(0,o.jsxs)(o.Fragment,{children:[p.ifStatement&&(0,o.jsx)("div",{className:y,children:!g&&(0,o.jsxs)(ea.Y,{direction:"horizontal",spacing:4,children:[(0,o.jsx)("span",{className:g?"prototype_conditional_controls--conditionalRowConditionUI3---eslf":"prototype_conditional_controls--conditionalRowCondition--0VCWz",children:(0,o.jsxs)(ea.Y,{direction:"horizontal",spacing:0,children:[(0,o.jsx)(er.B,{className:ed,svg:eu.A}),(0,o.jsx)(ea.Y,{direction:"horizontal",spacing:0,children:(0,I.hS)(m)&&x}),(0,o.jsx)(er.B,{className:"prototype_conditional_controls--icon--4Q-Rk",svg:e_.default})]})}),!g&&_.length>0&&v]})}),!p.ifStatement&&N,_&&_.map((i,r)=>(0,o.jsx)(el.P,{action:i,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],r],autoOpenVariablePicker:l,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:_.length,onAddAction:a,onDeleteAction:()=>e(r),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:h.Pt(p.recordingKey,"conditional-action-row",r),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(r),updateSelectionProperties:n.appendActionIndex(r)},r)),0===_.length&&(0,o.jsx)(el.P,{action:p.emptyAction,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],autoOpenVariablePicker:l,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:_.length,onAddAction:a,onDeleteAction:()=>e(0),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:h.Pt(p.recordingKey,"conditional-action-row",0),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(0),updateSelectionProperties:n.appendActionIndex(0)},0)]})}function eg(e,t,n){return function(o){var i=[...t];i.length>e?i[e].condition=o:i.push({condition:0===e?o:void 0,actions:[]},{condition:1===e?o:void 0,actions:[]}),n({conditionalActions:i})}}function ey({onDrop:e,onSelect:t,onExpand:n,action:i,updateMultipleDestinationNodes:a,updateSelectionProperties:l,interactionType:c,recordingKey:d,stateManagementVersion:p,selectedInteractions:u,actionIndexPath:_,selectedActionIndex:m,expandedRows:g,autoOpenVariablePicker:y,onNewActionAdded:x,handleMouseDownUI3:v}){let N=(0,r.wA)(),T=(0,Q.p8)("currentPage"),E=(0,en.YT)()===en.Oz.TWO_COL,O=E?m.equals(_):void 0,{shouldShowAdvancedPrototypingPaywall:C,showAdvancedPrototypingConditionalActionsModal:S}=(0,en.zt)(),P=(0,I.hS)(i.conditionalActions)&&i.conditionalActions?i.conditionalActions:[],A=e=>function(t){var n=[...P];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},b=e=>function(t){var n=[...P],o=0;if(n.length>e){var i=n[e].actions;i?i.push(t):i=[t],o=i.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),o=1;"SET_VARIABLE"===t.connectionType&&(y.current=!0),l({conditionalActions:n}),x&&x(new et.Op([_[0],e,o-1])),N((0,f._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:T,actionInConditionalAction:!0}}))},j=e=>function(t){if(C)S();else{var n=[...P];let o=P[e],i=[];if(o&&o.actions)for(let e=0;e<o.actions.length;e++){let n=o.actions[e];e!==t?i.push(n):N((0,f._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:T,actionInConditionalAction:!0}}))}n[e].actions=i,l({conditionalActions:n})}},D=P.length>0?P[0]:void 0,k=P.length>1?P[1]:void 0;return(0,o.jsxs)("div",{style:E?{position:"relative"}:void 0,children:[(0,I.gl)(i.conditionalActions)&&(0,o.jsx)($.Y1,{children:(0,o.jsx)(q.E,{className:"prototype_conditional_controls--mixedConditionalText--TnOni",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},children:(0,s.t)("fullscreen.properties_panel.click_to_replace_mixed_content")})}),(0,I.hS)(i.conditionalActions)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eh,{actionIndexPath:[_[0],0],autoOpenVariablePicker:y,conditionalActions:D,emptyAction:{ifStatement:!0,action:i},expandedRows:g,handleMouseDownUI3:v,ifStatement:!0,interactionType:c,isSelected:O,onAddAction:b(0),onDeleteAction:j(0),onDrop:e,onExpand:n,onSelect:t,recordingKey:h.Pt(d,"conditional-block",0),selectedActionIndex:m,selectedInteractions:u,stateManagementVersion:p,updateActions:A(0),updateCondition:eg(0,P,l),updateMultipleDestinationNodes:a.appendActionIndex(0),updateSelectionProperties:l.appendActionIndex(0)},0),(0,o.jsx)(eh,{actionIndexPath:[_[0],1],autoOpenVariablePicker:y,conditionalActions:k,emptyAction:{ifStatement:!1,action:i},expandedRows:g,handleMouseDownUI3:v,ifStatement:!1,interactionType:c,isSelected:O,onAddAction:b(1),onDeleteAction:j(1),onDrop:e,onExpand:n,onSelect:t,recordingKey:h.Pt(d,"conditional-block",1),selectedActionIndex:m,selectedInteractions:u,stateManagementVersion:p,updateActions:A(1),updateCondition:eg(1,P,l),updateMultipleDestinationNodes:a.appendActionIndex(1),updateSelectionProperties:l.appendActionIndex(1)},1)]})]})}function ex({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:i,...r}){let a=t.length>0?t[0]:void 0,l=a?.condition?a?.condition:void 0,c=u()({"prototype_conditional_controls--standaloneIfConditional--IAoHE":!0,"prototype_conditional_controls--placeholderText--A4Vfw":!l});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.A,{input:null,label:(0,s.t)("proto.condition")}),(0,o.jsx)(eo.LG,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--bcTd-",label:null,input:(0,I.hS)(l)?(0,o.jsx)("div",{className:c,children:(0,o.jsx)(ee.KN,{resolvedType:Z.rXF.BOOLEAN,targetVariableData:l,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:eg(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:i,showVariableThumbnails:!0,isNarrowPanel:!0})}):null})]})}var eI=n(177102),ev=n(582300),ef=n(629036),eN=n.n(ef),eT=n(39171);class eE{constructor(e,t){this.nodeFormatter=e,this.scene=t,this.format=e=>{let t=this.nodeFormatter.format(e);if(this.scene&&e!==l.AD&&null!=e){let n=this.scene.get(e);if(n?.isResponsiveSet)return"/"===t?(0,s.t)("sites.panel.home"):t}return t}}}var eO=n(862390),eC=n(223487),eS=n(576116),eP=n(695874),eA=n(452755),eb=n(792793),ej=n(363198);function eD(e){let t=i.useMemo(()=>new g.cP(e.scene),[e.scene]),[n,r]=i.useState([]),[c,d]=i.useState([]),p=(0,ej.cJ)(),u=i.useCallback(()=>{let t=Z.baT.ALL;"SCROLL_TO"===e.action?t=Z.baT.SCROLL_TO:"SWAP_STATE_TO"===e.action?t=Z.baT.STATES:"NAVIGATE_TO"===e.action&&p&&(t=Z.baT.RESPONSIVE_SETS);let{viableIds:n,disabledIds:o}=a.X3B.getTransitionDestinationsOnActiveCanvas(t);return r(n),d(o),Promise.resolve()},[e.action,p]),_=e.nodeId===I.oV?I.oV:l.dI(e.nodeId),m=n;(0,I.hS)(_)&&_!==l.AD&&-1===m.indexOf(_)&&(m=m.concat([_]));let y="SCROLL_TO"!==e.action?m.filter(e=>t.hasNameForNode(e)).map(e=>(0,o.jsx)(eI.Option,{value:e,children:t.format(e)},`enabled-${e}`)):((n,i)=>{let r=eN()(n.filter(e=>t.hasNameForNode(e)),t=>t===i&&(0,I.hS)(i)?ev.Ql(e.scene,t)?.guid:e.scene.get(t)?.parentGuid),a=Object.keys(r);(0,ev.X4)(a,t.format.bind(t));let{tlfId:l,index:s}=(0,ev.H_)(e.scene,a);return l&&s&&(a.splice(s,1),a=[l,...a]),a.reduce((e,n,i)=>(0!==i&&e.push((0,o.jsx)(eI.Separator,{},i)),e.push((0,o.jsx)(eI.Option,{value:n+" ",disabled:!0,children:t.format(n)},`disabled-${n}`)),r[n].forEach((n,i)=>e.push((0,o.jsx)(eI.Option,{value:n,disabled:!1,children:t.format(n)},`enabled-${n+i}`))),e),[])})(m,_),x=c.filter(e=>t.hasNameForNode(e)).map(e=>(0,o.jsx)(eI.Option,{value:e,disabled:!0,children:t.format(e)},`disabled-${e}`)),v=(0,I.hS)(_)&&_!==l.AD?_:void 0;i.useEffect(()=>{u()},[u]);let f=i.useMemo(()=>new eE(t,e.scene),[t,e.scene]);return(0,o.jsxs)(eI.Root,{value:v,onChange:t=>{t&&e.onChange(t)},onSelectionChange:e=>{eO.Uc(e??"")},onOpenChange:e=>{e&&u()},recordingKey:h.Pt(e,"select"),children:[(0,o.jsx)(eI.Trigger,{label:(0,o.jsx)(O.h,{children:(0,s.tx)("proto.destination")}),"data-testid":"destination-select",width:"fill",children:v?f.format(v):(0,I.hS)(_)?f.format(_):"Mixed"}),(0,o.jsxs)(eI.Container,{children:[y||null,0!==c.length&&0!==m.length&&(0,o.jsx)(eI.Separator,{}),x]})]})}let ek=i.memo(function(e){let t=(0,eC.tS)(),n=(0,eC._G)(),l=(0,r.d4)(eR),s=(0,r.d4)(eS.Sh),c=(0,r.d4)(eS.dK),d=(0,eT.to)(),p=(0,eP.D)(s,c),u=(0,r.d4)(ew),_=i.useMemo(()=>(0,eb.cP)(u,t,n,d,e.actionIndexPath),[u,t,n,e.actionIndexPath,d]),h=i.useMemo(()=>(0,eb.cP)(l,t,n,d),[l,t,n,d]),m=_||h;if(!m||m.mode!==a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:g,stateGroupModel:y,selectedStates:x,selectedStatesPropertyValues:I}=m,v=y.propertySortOrder||[],f=y.propertyValues;return f?(0,o.jsx)(eA.lS,{allStates:g,extended:!0,hideErrorsPanel:!0,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let o=t[e].symbol.node_id;for(let t of(n[e]=o,p[e]||[]))n[t]=o;for(let e of s)n[e]||(n[e]=o)}e.onChange(n)},recordingKey:e.recordingKey,selectedStates:x,selectedStatesPropertyValues:I,shouldIndent:!0,sortedProperties:v,stateGroupPropertyValues:f}):null});function eR(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function ew(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var eL=n(226055),eM=n(270450),eU=n(309742),eK=n(86742),eB=n(859668),eV=n(434183),eF=n(910312),eG=n(221572),ez=n(794290),eY=n(595920),eH=n(15939),eW=n(395284),eJ=n(157998),eX=n(623516),eq=n(890305);let eZ="prototype_set_variable_controls--dropdownAndIconContainer--GjUcF",e$="prototype_set_variable_controls--placeholderText--IPwIp";function eQ({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:c,...d}){let p=i.useRef(null),_=(0,r.wA)(),g=(0,r.d4)(e=>e.variablePickerShown),y=(0,eV.tZ)((0,I.hS)(t)&&"id"in t?t.id:void 0),x=(0,eV.u)((0,I.hS)(t)&&"id"in t?t.id:void 0),[v,N]=i.useState("");(0,eU.h)(()=>{c&&!0===c.current&&(E(),c.current=!1)});let T=(0,eV.BQ)((0,I.hS)(t)&&"id"in t?t.id:void 0)??(0,ez.m9)((0,I.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);i.useEffect(()=>{void 0!==e&&T&&"MIXED"!==T&&(0,I.hS)(e)&&e.resolvedType!==T.resolvedType&&!((0,ez.tz)(e.resolvedType)&&(0,ez.tz)(T.resolvedType))&&n({targetVariableData:void 0})},[T,n,e]);let E=()=>{let e=p.current.getBoundingClientRect();_((0,eB.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:Z.rXF.STRING,initialPosition:new S.Mi(e.left-20,e.top),key:d.recordingKey,onVariableSelected:A}))},O=i.useCallback(()=>{_((0,eB.B)())},[_]),[C,P]=i.useState(!1),A=i.useCallback(t=>{if(void 0!==t&&t.node_id){let o={targetVariable:{id:t.node_id}},i=a.CWU?.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===Z.rXF.COLOR&&i&&(o.targetVariableData=i??void 0),n(o),_((0,f.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),P(!0)}},[_,e,n]),b=i.useCallback(e=>{e.value.stablePath.map(e=>l.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),P(!0))},[n]),j=i.useMemo(()=>({type:"LOCAL_VARIABLES",layout:"list",includeExtendedCollections:!0}),[]),D=i.useRef(null);M(e=>{n({targetVariableData:e})});let k="nodeFieldAlias"in t?(0,ez.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,R=k?(0,ez.Xx)(k.varValue.resolvedType):null,L=null;if((0,I.gl)(t))L=null;else if(T?.resolvedType===Z.rXF.COLOR)L=(0,I.gl)(e)?(0,o.jsx)("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--eHWhd",children:(0,s.t)("fullscreen.mixed")}):(0,o.jsx)(eX.gJ,{variableValue:e??T,onChange:e=>{n({targetVariableData:e})},recordingKey:h.Pt(d.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--Rpblk"});else{let t=Z.rXF.BOOLEAN;x?t=x.resolvedType:k&&(t=k.varValue.resolvedType===Z.rXF.TEXT_DATA?Z.rXF.STRING:k.varValue.resolvedType),L=(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:eZ,children:(0,o.jsx)(ee.KN,{resolvedType:t,targetVariableData:e,autoOpenExpressionBuilder:C,setAutoOpenExpressionBuilder:P,updateSelectionProperties:n,recordingKey:d.recordingKey,isNarrowPanel:d.isNarrowPanel,showVariableThumbnails:!0})})})}let U=u()({"prototype_set_variable_controls--targetVariableDropdownUI3--Nz26Q":!0,[e$]:!(y||k)}),K=(0,r.d4)(eF.ZM)?(0,s.t)("proto.select_variable_unified"):(0,s.t)("proto.select_variable.short"),B=(0,o.jsx)(eK.D8,{recordingKey:h.Pt(d.recordingKey,"selectTargetVariable"),onClick:E,children:(0,o.jsx)("div",{ref:p,children:(0,o.jsx)(ea.Y,{children:(0,o.jsx)("div",{className:U,children:(0,o.jsx)("div",{className:eZ,children:(0,I.gl)(t)?(0,o.jsx)("div",{className:u()(m.s.pt2.$,m.s.pb2.$),children:(0,s.t)("fullscreen.mixed")}):y?(0,o.jsx)(eJ.wG,{text:y,thumbnailValue:T,isDeleted:!!x&&(0,eY.eF)(x)}):k?(0,o.jsx)(eJ.wG,{text:k.name,thumbnailValue:R,isDeleted:!1,colorTheme:eJ.J2.COMPONENT}):(0,o.jsx)("div",{className:u()(m.s.pt2.$,m.s.pb2.$,"prototype_set_variable_controls--placeholderTextColorUI3--GotEL"),children:K})})})})})}),V=(0,o.jsx)(w.A,{input:B,label:(0,s.t)("proto.target")}),F=u()({"prototype_set_variable_controls--setVariableToContainerUI3--3qLDl":!0,[e$]:!e&&T?.resolvedType!==Z.rXF.COLOR}),G=(0,o.jsx)("div",{className:F,"data-testid":"set-variable-container",children:L}),z=null!==L?(0,o.jsx)(w.A,{label:(0,s.t)("proto.variable.value"),input:G}):null;return(0,o.jsxs)("div",{children:[V,g.isShown&&"variable-picker-set-variable-action"===g.type&&g.key===d.recordingKey?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eq.Ao,{title:"",headerSize:"hidden",initialPosition:g.initialPosition,onClose:O,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0,children:(0,o.jsx)(eW.$8,{currentView:j,disabledVariableIds:new Set,onClose:O,onComponentPropSelected:(0,eM.kc)().ds_variable_props_proto?b:void 0,onSearchInputChange:N,onVariableSelected:A,pickerType:"set-variable",recordingKey:h.Pt(d.recordingKey,"variablePickerForSelection"),renderSetControls:()=>(0,o.jsx)(eH.Z,{currentView:j,subscribedLibraries:[],setControlRightButtons:(0,o.jsx)(eG.f,{resolvedTypes:[Z.rXF.BOOLEAN,Z.rXF.STRING,Z.rXF.FLOAT,Z.rXF.COLOR]}),recordingKey:h.Pt(d.recordingKey,"variablePickerForSelection")}),searchInputRef:D,searchQuery:v,selectedItem:x})}),(0,o.jsx)(eW.$3,{onClose:O})]}):null,z]})}var e0=n(828473),e1=n(475829),e2=n(75340),e5=n(899543),e4=n(122313),e7=n(934384),e3=n(254056);function e6(){let e=(0,o.jsx)(e3.N,{newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",htmlAttributes:{rel:"noopener noreferrer",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},children:(0,s.tx)("proto.state_management.info_tooltip_learn_more")}),t=(0,o.jsx)("span",{children:(0,o.jsx)("strong",{children:(0,s.tx)("proto.animation_panel.preserve_scroll_position")})});return(0,o.jsx)(o.Fragment,{children:(0,s.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e})})}function e9({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:l,showResetInteractiveComponentState:c,updateSelectionProperties:d,stateManagementVersion:p,selectedInteractions:u}){let _=(0,r.wA)(),m=(0,y.Em)(),g=i.useContext(eL.c),x=(0,en.YT)()===en.Oz.TWO_COL&&g===eL.P.LEFT,v=e1.iv({placement:"bottom"});if(x)return null;let N=(0,en.LH)(p),T=(0,o.jsx)(E.S,{onChange:t=>{_((0,f._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),d({...function(e){if((0,I.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,I.gl)(e.preserveScroll),recordingKey:h.Pt(n,"preserve-scroll-check"),label:(0,o.jsx)(O.J,{children:(0,s.tx)("proto.animation_panel.preserve_scroll_position")})}),C=(0,o.jsx)(B.TN,{children:T}),S=(0,o.jsx)(E.S,{onChange:t=>{_((0,f._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:e7.zZ.haveAnyInteractionsBeenUpgraded(u)}})),d({...function(e){if((0,I.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,I.gl)(e.resetScrollPosition),recordingKey:h.Pt(n,"reset-scroll-position-check"),label:(0,o.jsx)(O.J,{children:(0,s.tx)("proto.animation_panel.reset_scroll_position")})}),P=(0,o.jsxs)("div",{className:"prototype_state_management_panel--stateManagementPanelTooltipUI3--laL7d",children:[(0,o.jsx)(e1.Uj,{...v.getTriggerProps(),"aria-label":(0,s.t)("proto.state_management.info_tooltip_learn_more"),children:(0,o.jsx)(e5.B,{})}),(0,o.jsx)(e1.mc,{manager:v,children:(0,o.jsx)(e1.UC,{maxWidth:240,children:(0,o.jsx)(e6,{})})})]}),A=(0,o.jsxs)(B.TN,{children:[S," ",m&&P]}),b=(0,o.jsx)(E.S,{onChange:t=>{_((0,f._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:e7.zZ.haveAnyInteractionsBeenUpgraded(u)}})),d({...function(e){if((0,I.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,I.gl)(e.resetInteractiveComponents),recordingKey:h.Pt(n,"reset-component-state-check"),label:(0,o.jsx)(O.J,{children:(0,s.tx)("proto.animation_panel.reset_component_state")})}),j=(0,o.jsx)(B.TN,{children:b}),D=(0,o.jsx)(E.S,{onChange:t=>{_((0,f._P)({name:"Reset Video Position Changed",params:{newValue:t}})),d({...function(e){if((0,I.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,I.gl)(e.resetVideoPosition),recordingKey:h.Pt(n,"reset-video-position-check"),label:(0,o.jsx)(O.J,{children:(0,en.LH)(p)?(0,s.tx)("proto.state_management.reset_video_state"):(0,s.tx)("proto.animation_panel.reset_video_state")})}),k=(0,o.jsx)(B.TN,{children:D}),R=(0,o.jsxs)(U.Zk,{className:`prototype_state_management_panel--stateManagementPanel--GoNDJ ${(0,en.kM)(p)&&"prototype_state_management_panel--stateManagementPanelWithVersion--Bie5K"}`,children:[(0,en.uU)(p)&&a&&C,l&&(0,en.uU)(p)&&k,N&&A,N&&c&&j,N&&l&&k,(0,I.gl)(p)&&(0,o.jsx)(ea.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12},children:(0,o.jsx)(U.nV,{children:(0,s.tx)("proto.state_management.mixed_state_update")})})]});return(0,o.jsx)(e4.k,{name:"prototype_state_management_panel",children:(0,o.jsxs)(e2.bL,{defaultOpen:!1,children:[(0,o.jsx)(e2.Y9,{children:(0,o.jsx)(e2.JU,{recordingKey:h.Pt(n,"expand-caret"),actionOnPointerDown:!0,children:(0,s.tx)("proto.state")},"expand-caret")}),(0,o.jsx)(e2.UC,{children:R})]})})}let e8=K.c$,te=K.l6,tt=l.AD;class tn extends g.cP{format(e){return e===tt||null===e?(0,s.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function to(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:c,targetVideoNodeID:d,isVideoSelected:p,onChange:u}=e,_=(0,r.wA)(),[m,y]=i.useState(()=>p?new tn(a):new g.cP(a));t.sort((e,t)=>{let n=m.format(e),o=m.format(t);return n.localeCompare(o)}),p&&t.unshift(tt);let x=t.length>0&&n.length>0,v=`prototype-target-video-select-${e.recordingKey}`,f=i.useId(),N=(0,o.jsxs)(te,{ariaLabelledBy:f,chevronClassName:"prototype_target_video_dropdown--chevron--kVaoN",className:"prototype_target_video_dropdown--targetVideoDropdown--zYsqh",dataTestId:"target-video-select",dispatch:_,dropdownAlignment:"left",dropdownShown:c,formatter:m,id:v,inputClassName:"prototype_target_video_dropdown--input--9wQ86",onChange:u,onOptionFocus:e=>{eO.Uc(e??"")},property:(0,I.gl)(d)?d:l.dI(d),recordingKey:h.Pt(e,"select"),children:[t.filter(e=>m.hasNameForNode(e)).map((t,n)=>(0,o.jsx)(e8,{value:t,recordingKey:h.Pt(e,`viable-option-${n}`),disabled:!1},`enabled-${n}`)),x&&(0,o.jsx)(K.sK,{}),n.filter(e=>m.hasNameForNode(e)).map((t,n)=>(0,o.jsx)(e8,{value:t,recordingKey:h.Pt(e,`viable-option-${n}`),disabled:!0},`disabled-${n}`))]});return(0,o.jsx)(w.A,{input:N,label:(0,s.t)("proto.video_dropdown.label"),labelId:f})}var ti=n(346942);function tr({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:i}){let r=(0,o.jsx)(ti.ks,{className:"prototype_open_url_action_options--urlInputUI3--lMVio",dataTestId:"url-input",placeholder:(0,s.t)("proto.interaction.example_com"),value:(0,I.gl)(e.connectionURL)?(0,s.t)("fullscreen.mixed"):(0,I._W)(e.connectionURL,""),onChange:n,recordingKey:h.Pt(t,"urlTextInput"),autoFocus:!1}),a=(0,o.jsx)(E.S,{label:(0,o.jsx)(O.J,{children:(0,s.tx)("proto.action_open_url_in_new_tab")}),onChange:i,recordingKey:h.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.A,{label:(0,s.t)("proto.open_url.text_input_label"),input:r}),(0,o.jsx)(B.TN,{children:a})]})}var ta=n(212198),tl=n(236410),ts=n(709966);function tc({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:l,setPropertiesForAnchorLink:c,hideXOffset:p,renderWithIconSpacing:u}){let{smallNudgeAmount:_,bigNudgeAmount:m}=(0,ta.sT)(),g=(0,r.wA)(),y=(t,n)=>(o,i)=>{if(t){if(c){c({extraScrollOffset:{...t,[n]:o}});return}e({extraScrollOffset:{...t,[n]:o}},{shouldCommit:i})}},x=(0,I._W)(n,{x:0,y:0}),v=i.useId();if(!a||"SCROLL_TO"!==t)return null;let f=(0,o.jsx)(j.gq,{bigNudgeAmount:m,"data-tooltip":(0,s.t)("proto.trigger.y_offset"),"data-tooltip-type":tl.Ib.TEXT,dispatch:g,inputClassName:ts.oM,onValueChange:y(x,"y"),recordingKey:h.Pt(l,"extraScrollOffsetY"),scrubMultiplier:_,smallNudgeAmount:_,tooltipForScreenReadersOnly:!1,value:x.y,wheelMultiplier:_,children:(0,o.jsx)("span",{className:ts.QK,children:(0,s.tx)("proto.scroll_options.scroll_offset.y")})}),N=(0,o.jsx)(j.gq,{bigNudgeAmount:m,"data-tooltip":(0,s.t)("proto.trigger.x_offset"),"data-tooltip-type":tl.Ib.TEXT,dispatch:g,inputClassName:ts.oM,onValueChange:y(x,"x"),recordingKey:h.Pt(l,"extraScrollOffsetX"),scrubMultiplier:_,smallNudgeAmount:_,tooltipForScreenReadersOnly:!1,value:x.x,wheelMultiplier:_,children:(0,o.jsx)("span",{className:ts.QK,children:(0,s.tx)("proto.scroll_options.scroll_offset.x")})});if(p){let e=(0,s.t)("proto.scroll_options.offset");return u?(0,o.jsx)(d.DE,{label:null,input:(0,o.jsxs)("div",{className:ts.G_,children:[(0,o.jsx)("div",{id:v,"aria-hidden":"true",className:ts.aB,"data-non-interactive":!0,children:e}),(0,o.jsx)("div",{className:ts.w1,children:f})]}),icon:null}):(0,o.jsx)(w.A,{label:e,input:f})}return(0,o.jsx)(B.Cm,{label:(0,o.jsx)(w.F,{tooltip:(0,s.t)("proto.scroll_options.offset"),children:(0,s.t)("proto.scroll_options.offset")}),leftInput:N,rightInput:f})}var td=n(728177);let tp="prototype_video_action_options--chevron--m3Gy-",tu="prototype_video_action_options--input--8el0y",t_=K.c$,th=K.l6,tm=new g.js,tg=new g.Z6;function ty({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:l}){let c=(0,g.Od)(e),d=(0,I.E7)(e.mediaAction),p="UPDATE_MEDIA_RUNTIME"===(0,I.E7)(e.connectionType),u="SKIP_TO"===d,_="SKIP_FORWARD"===d||"SKIP_BACKWARD"===d,m="PLAY"===d||"PAUSE"===d||"TOGGLE_PLAY_PAUSE"===d,y="MUTE"===d||"UNMUTE"===d||"TOGGLE_MUTE_UNMUTE"===d,x=(0,r.wA)(),v=(0,ta.RU)(),N=i.useCallback(e=>{n({mediaSkipToTime:e}),x((0,f._P)({name:"Media skip to time changed",params:{value:e}}))},[x,n]),T=`prototype-media-action-select-${l}`,E="prototype_video_action_options--shortDropdown--WEF1-",O=a&&a.type===T?tm:tg,C=i.useId(),S=(0,o.jsxs)(th,{ariaLabelledBy:C,chevronClassName:tp,className:E,dataTestId:"media-play-pause-select",dispatch:x,dropdownShown:a,formatter:O,id:T,inputClassName:tu,onChange:t,property:c,recordingKey:h.Pt(l,"select"),children:[(0,o.jsx)(t_,{value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:h.Pt(l,"toggle-play-pause-option"),disabled:!1},"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE"),(0,o.jsx)(t_,{value:"UPDATE_MEDIA_PLAY",recordingKey:h.Pt(l,"play-option"),disabled:!1},"UPDATE_MEDIA_PLAY"),(0,o.jsx)(t_,{value:"UPDATE_MEDIA_PAUSE",recordingKey:h.Pt(l,"pause-option"),disabled:!1},"UPDATE_MEDIA_PAUSE")]}),P=i.useId(),A=(0,o.jsxs)(th,{ariaLabelledBy:P,chevronClassName:tp,className:E,dataTestId:"media-mute-unmute-select",dispatch:x,dropdownShown:a,formatter:O,id:T,inputClassName:tu,onChange:t,property:c,recordingKey:h.Pt(l,"select"),children:[(0,o.jsx)(t_,{value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:h.Pt(l,"toggle-mute-unmute-option"),disabled:!1},"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE"),(0,o.jsx)(t_,{value:"UPDATE_MEDIA_MUTE",recordingKey:h.Pt(l,"mute-option"),disabled:!1},"UPDATE_MEDIA_MUTE"),(0,o.jsx)(t_,{value:"UPDATE_MEDIA_UNMUTE",recordingKey:h.Pt(l,"unmute-option"),disabled:!1},"UPDATE_MEDIA_UNMUTE")]}),b=i.useId(),D=(0,o.jsxs)(th,{ariaLabelledBy:b,chevronClassName:tp,className:E,dataTestId:"media-skip-by-select",dispatch:x,dropdownShown:a,dropdownWidth:160,formatter:O,id:T,inputClassName:tu,onChange:t,property:c,recordingKey:h.Pt(l,"select"),children:[(0,o.jsx)(t_,{value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:h.Pt(l,"skip-forward-option"),disabled:!1},"UPDATE_MEDIA_SKIP_FORWARD"),(0,o.jsx)(t_,{value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:h.Pt(l,"skip-backward-option"),disabled:!1},"UPDATE_MEDIA_SKIP_BACKWARD")]}),k=(0,o.jsx)(j.qd,{className:"prototype_video_action_options--timestampContainer--wS-C2","data-tooltip":(0,s.t)("proto.trigger.timestamp_to_set_to"),"data-tooltip-type":tl.Ib.TEXT,dataTestId:"mediaSkipToTime-input",dispatch:x,displayFractions:!0,inputClassName:"prototype_video_action_options--timestamp--G1lPh",max:3600,onValueChange:N,recordingKey:h.Pt(l,"mediaSkipToTimeInput"),scrubMultiplier:v/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipToTime||0,wheelMultiplier:v/1e3,children:(0,o.jsx)(td.R,{})}),R="SKIP_BACKWARD"===d?(0,s.t)("proto.trigger.duration_to_jump_backward"):(0,s.t)("proto.trigger.duration_to_jump_forward"),L=(0,o.jsx)(j.dE,{className:"prototype_video_action_options--timeAmountContainer--NX19G","data-tooltip":R,"data-tooltip-type":tl.Ib.TEXT,dataTestId:"mediaSkipByAmount-input",dispatch:x,max:3600,onValueChange:e=>{n({mediaSkipByAmount:e}),x((0,f._P)({name:"Media skip by amount changed",params:{value:e}}))},recordingKey:h.Pt(l,"mediaSkipByAmountInput"),scrubMultiplier:v/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipByAmount||5,wheelMultiplier:v/1e3});return p?m?(0,o.jsx)(w.A,{input:S,label:(0,s.t)("proto.video_options.behavior"),labelId:C}):y?(0,o.jsx)(w.A,{input:A,label:(0,s.t)("proto.video_options.behavior"),labelId:P}):_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.A,{input:D,label:(0,s.t)("proto.video_options.direction"),labelId:b}),(0,o.jsx)(w.A,{input:L,label:(0,s.t)("proto.video_options.offset")})]}):u?(0,o.jsx)(w.A,{input:k,label:(0,s.t)("proto.video_options.timestamp")}):(0,o.jsxs)(U.fI,{children:[m&&S,y&&A,_&&D,_&&L,u&&k]}):null}var tx=n(709775);let tI=({onUpdateTransitionNodeID:e})=>{let t=(0,r.wA)();return i.useCallback((n,o)=>{let i=l.sH(n);i&&e(i),t((0,f._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(o),destinationTlfId:n}}))},[t,e])};function tv({action:e,recordingKey:t,interactionType:n,onActionChange:s,updateMultipleDestinationNodes:d,updateSelectionProperties:p,stateManagementVersion:x,autoOpenVariablePicker:E,autoOpenExpressionBuilder:O,setAutoOpenExpressionBuilder:C,...S}){let P=(0,r.wA)(),A=(0,v.Um)(),{scene:b}=(0,c.R)(e=>({scene:e.mirror.sceneGraph})),j=(0,y.cJ)(),D=(0,en.YT)(),k=D===en.Oz.SINGLE_COL,R=D===en.Oz.TWO_COL,w=i.useContext(eL.c),L=R&&w===eL.P.RIGHT,M="SET_VARIABLE"===(0,I.E7)(e.connectionType),U="SET_VARIABLE_MODE"===(0,I.E7)(e.connectionType),K="CONDITIONAL"===(0,I.E7)(e.connectionType),B="INTERNAL_NODE"===(0,I.E7)(e.connectionType),V="INTERNAL_NODE"===(0,I.E7)(e.connectionType)&&"SWAP_STATE"===(0,I.E7)(e.navigationType),F="URL"===(0,I.E7)(e.connectionType),G=B||"BACK"===(0,I.E7)(e.connectionType)||"CLOSE"===(0,I.E7)(e.connectionType),z="UPDATE_MEDIA_RUNTIME"===(0,I.E7)(e.connectionType),Y=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.numVideosSelected;return 1===t&&!!n}),H=(0,T.uQ)(),W=[],J=[];if(H&&a.X3B){let{viableIds:e,disabledIds:t}=a.X3B.getVideoNodesOnSameTlfAsNode(H);W=e,J=t}let q=l.dI((0,I.E7)(e.transitionNodeID)),Z=null!=q&&q!==l.AD,$=B&&(!(0,I.hS)(e.transitionNodeID)||Z)&&!(j&&!V&&"SCROLL_TO"!==(0,I.E7)(e.navigationType)),Q=(0,I.E7)(e.navigationType),ee=B&&"OVERLAY"===(0,I.E7)(Q),et=(0,en.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),eo=G&&!ee&&("INSTANT"===et.behavior||"DISSOLVE"===et.behavior),ei=!z&&(0,en.oc)(e),er=(0,en.GB)(e),ea=(0,en.uU)(x)?eo||ei:(0,en.Fp)(x,e.connectionType,e.navigationType),{selectedInteractions:el}=(0,tx.Ay)(N.J.NORMAL),es=el.map(e=>e.sourceNodeID&&e.id?_.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0).filter(e=>void 0!==e),ec=tI({onUpdateTransitionNodeID:e=>{p({transitionNodeID:e})}}),ed=e=>ec(e,es),ep=i.useCallback(e=>{d(e),P((0,f._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),P((0,f._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(es)}}))},[d,P,es]),eu=i.useCallback(e=>{p({connectionURL:e.target.value})},[p]),e_=(0,g.Od)(e),eh=u()({[ts.Ti]:S.isNestedInConditional&&!k&&!L}),em=B&&!V;return(0,o.jsxs)("div",{className:eh,children:[em&&(0,o.jsx)(tf,{action:e,interactionType:n,updateSelectionProperties:p,recordingKey:t,actionIndexPath:S.actionIndexPath}),F&&(0,o.jsx)(tr,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{p({openUrlInNewTab:e}),P((0,f._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:eu}),z&&(0,o.jsx)(to,{dropdownShown:A,scene:b,targetVideoNodeID:e.transitionNodeID||l.Hr,recordingKey:h.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:W,disabledSameFrameVideoIds:J,isVideoSelected:Y,onChange:ed}),(0,o.jsx)(ty,{dropdownShown:A,action:e,onChange:s,updateSelectionProperties:p,recordingKey:t}),M&&(0,o.jsx)("div",{children:(0,o.jsx)(eQ,{action:e_,autoOpenVariablePicker:E,className:ts.PB,dispatch:P,isNarrowPanel:S.isNestedInConditional||S.isNarrowPanel,isNestedInConditional:S.isNestedInConditional,nodeId:e.transitionNodeID||l.Hr,onChange:ed,recordingKey:h.Pt(t,"setVariableControls"),targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:p})}),U&&(0,o.jsx)("div",{children:(0,o.jsx)(e0.I,{dispatch:P,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,variableSetTargetExtensionId:e.variableSetTargetExtensionId,updateSelectionProperties:p,recordingKey:h.Pt(t,"setVariableControls"),actionIndexPath:S.actionIndexPath.join(",")})}),K&&(L?(0,o.jsx)(ex,{recordingKey:h.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:O,setAutoOpenExpressionBuilder:C,updateSelectionProperties:p,conditionalActions:(0,I.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):(0,o.jsx)(ey,{action:e,actionIndexPath:S.actionIndexPath,autoOpenVariablePicker:E,expandedRows:S.expandedRows,handleMouseDownUI3:S.handleMouseDownUI3,interactionType:n,onDrop:S.onDrop,onExpand:S.onExpand,onNewActionAdded:S.onNewActionAdded,onSelect:S.onSelect,recordingKey:h.Pt(t,"conditionalActionSection"),selectedActionIndex:S.selectedActionIndex,selectedInteractions:S.selectedInteractions,stateManagementVersion:x,updateMultipleDestinationNodes:d,updateSelectionProperties:p})),V&&(0,o.jsx)("div",{className:m.s.ml0.$,children:(0,o.jsx)(ek,{onChange:ep,nodeId:e.transitionNodeID||l.Hr,recordingKey:h.Pt(t,"consumption"),actionIndexPath:S.actionIndexPath})}),$&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:ts.x}),(0,o.jsx)(X.X7,{transition:et,interactionType:n,navigationType:e.navigationType,recordingKey:h.Pt(t,"animationPanel"),updateSelectionProperties:p,isNarrowPanel:S.isNestedInConditional||S.isNarrowPanel,stateManagementVersion:x})]}),ea&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:ts.x}),(0,o.jsx)(e9,{connectionType:e.connectionType,navigationType:e.navigationType,recordingKey:h.Pt(t,"stateManagementPanel"),selectedInteractions:S.selectedInteractions,showPreserveScrollPosition:eo,showResetInteractiveComponentState:!!er,showResetVideoState:!!ei,stateManagementVersion:x,transition:et,updateSelectionProperties:p})]})]})}function tf({action:e,interactionType:t,updateSelectionProperties:n,actionIndexPath:r,recordingKey:a,setPropertiesForAnchorLink:p,hideXOffset:u,renderWithIconSpacing:m}){let{scene:y}=(0,c.R)(e=>({scene:e.mirror.sceneGraph})),v="INTERNAL_NODE"===(0,I.E7)(e.connectionType),f=(0,g.Od)(e),T=l.dI((0,I.E7)(e.transitionNodeID)),E=null!=T&&T!==l.AD,O=v&&"OVERLAY"===(0,I.E7)(e.navigationType)&&E,C=(0,I.E7)(e.navigationType),S=v&&"OVERLAY"===(0,I.E7)(C),P=v&&(S||"SWAP"===(0,I.E7)(C)),A=i.useId(),{selectedInteractions:b}=(0,tx.Ay)(N.J.INHERITED_INTERNAL),j=b.map(e=>e.sourceNodeID&&e.id?_.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0).filter(e=>void 0!==e),D=tI({onUpdateTransitionNodeID:e=>{if(p){p({transitionNodeID:e});return}n?n({transitionNodeID:e}):x.Y5.updateSelectionProperties({transitionNodeID:e})}}),k=(0,o.jsx)(eD,{action:f,ariaLabelledBy:A,nodeId:e.transitionNodeID||l.Hr,onChange:e=>D(e,j),recordingKey:h.Pt(a,"destinationDropdown"),scene:y}),R=(0,o.jsx)(tc,{action:f,showScrollToOptions:"SCROLL_TO"===f,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:n||x.Y5.updateSelectionProperties,recordingKey:h.Pt(a,"scrollOptionsPanel"),setPropertiesForAnchorLink:p,hideXOffset:u,renderWithIconSpacing:m}),L=r?(0,o.jsx)(z,{interactionType:t,updateSelectionProperties:n||x.Y5.updateSelectionProperties,recordingKey:h.Pt(a,"overlaySettings"),actionIndexPath:r,nodeId:e.transitionNodeID||l.Hr}):null,M=P?(0,s.t)("proto.overlay"):(0,s.t)("proto.destination"),U=m?(0,o.jsx)(d.DE,{label:null,input:(0,o.jsxs)("div",{className:ts.G_,children:[(0,o.jsx)("div",{id:A,"aria-hidden":"true",className:ts.aB,"data-non-interactive":!0,children:M}),(0,o.jsx)("div",{className:ts.w1,children:k})]}),icon:null}):(0,o.jsx)(w.A,{labelId:A,label:M,input:k});return(0,o.jsxs)(o.Fragment,{children:[U,R,O&&L]})}},788869:(e,t,n)=>{n.d(t,{P:()=>en});var o=n(239976),i=n(105652),r=n(20002);let a=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})});var l=n(379141),s=n(445019),c=n(224542),d=n.n(c),p=n(35131),u=n(768781),_=n(499735),h=n(233277),m=n(335298),g=n(964731),y=n(300573),x=n(177102),I=n(288350),v=n(454705),f=n(692376),N=n(270450);n(323264);var T=n(348149),E=n(421914),O=n(694454),C=n(910312),S=n(363198);function P({formatter:e,value:t,disabled:n}){return(0,o.jsx)(x.Option,{value:t,disabled:n,children:(0,o.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[(0,o.jsx)("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm",children:(0,o.jsx)(v.J,{mode:"dark",children:"MIXED"===t?(0,o.jsx)("div",{className:"x1kky2od xlup9mm"}):(0,o.jsx)(A,{action:t})})}),(0,o.jsx)("div",{children:"MIXED"===t?(0,l.tx)("fullscreen.mixed"):e.format(t)})]})})}function A({action:e}){return(0,o.jsx)("div",{className:"prototype_action_dropdown--prototypeActionIcon--dlnS3",children:(0,O.av)(e)})}function b(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,i=(0,E.E7)(e.action),a=(0,O.av)(i),s=(0,r.d4)(C.ZM),c=new m.js(!0,s),d=new m.Z6(!0,s),p=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0);return(0,o.jsx)("div",{id:t,children:(0,o.jsxs)(x.Root,{onChange:e.onChange,value:e.action,recordingKey:_.Pt(e,"select"),children:[(0,o.jsx)(x.Trigger,{"data-testid":"action-select",disabled:p,iconLead:(0,o.jsx)("div",{className:"x180r7m8",children:a}),label:(0,o.jsx)(I.h,{children:(0,l.tx)("proto.action")}),width:"fill",children:(0,E.gl)(e.action)?(0,l.t)("fullscreen.mixed"):null}),(0,o.jsx)(x.Container,{children:function(e,t){let n=(0,S.cJ)(),i=(0,o.jsx)(P,{formatter:t,value:"NONE",disabled:!1},"NONE"),r=(0,o.jsx)(P,{formatter:t,value:"NAVIGATE_TO",disabled:!1},"NAVIGATE_TO"),a=(0,o.jsx)(P,{formatter:t,value:"SWAP_STATE_TO",disabled:f.glU?.isSelectionContainedInStateOrStateInstance()!==!0},"SWAP_STATE_TO"),l=(0,o.jsx)(P,{formatter:t,value:"GO_BACK",disabled:!1},"GO_BACK"),s=(0,o.jsx)(P,{formatter:t,value:"SCROLL_TO",disabled:!1},"SCROLL_TO"),c=(0,o.jsx)(P,{formatter:t,value:"OPEN_URL",disabled:!1},"OPEN_URL"),d=(0,o.jsx)(P,{formatter:t,value:"OPEN_OVERLAY",disabled:!1},"OPEN_OVERLAY"),p=(0,o.jsx)(P,{formatter:t,value:"SWAP_WITH",disabled:!1},"SWAP_WITH"),u=(0,o.jsx)(P,{formatter:t,value:"CLOSE_OVERLAY",disabled:!1},"CLOSE_OVERLAY"),_=(0,o.jsx)(P,{formatter:t,value:"SET_VARIABLE",disabled:!1},"SET_VARIABLE"),h=(0,N.kc)().prototype_set_mode_action&&(0,o.jsx)(P,{formatter:t,value:"SET_VARIABLE_MODE",disabled:!1},"SET_VARIABLE_MODE"),m=!e.isNestedInConditional&&(0,o.jsx)(P,{formatter:t,value:"CONDITIONAL",disabled:!1},"CONDITIONAL"),g=(0,o.jsx)(x.Separator,{},"first-divider"),y=(0,o.jsx)(x.Separator,{},"second-divider"),I=(0,o.jsx)(x.Separator,{},"third-divider"),{getConfig:v}=(0,T.I7)("exp_prototyping_reorder_actions"),O=!!v().getValue("new_ordering",!1),C=n?[a,l,s,g,_,m]:O?[i,g,r,a,l,s,c,y,_,h,m,I,d,p,u]:[i,g,r,a,l,s,c,y,d,p,u,I,_,h,m];if(e.showVideoActions&&!n){let e=[(0,o.jsx)(x.Separator,{},"fourth-divider"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",disabled:!1},"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",disabled:!1},"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_SKIP_TO",disabled:!1},"UPDATE_MEDIA_SKIP_TO"),(0,o.jsx)(P,{formatter:t,value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",disabled:!1},"UPDATE_MEDIA_SKIP_BY_OPTIONS")];C=C.concat(e)}return(0,E.gl)(e.action)&&(C=[(0,o.jsx)(P,{formatter:t,value:"MIXED",disabled:!0},"MIXED"),(0,o.jsx)(x.Separator,{},"mixed-divider")].concat(C)),C.filter(Boolean)}(e,n?c:d)})]})})}var j=n(836848),D=n(943360),k=n(854225),R=n(2227),w=n(923500),L=n(154963),M=n(434183),U=n(764752),K=n(794290),B=n(226055),V=n(630691),F=n(595920),G=n(157998),z=n(709966);let Y="prototype_action_verbose_title--actionNameInsertion---IFWu",H="prototype_action_verbose_title--actionName--SAlYv",W="prototype_action_verbose_title--actionNameUI3--6PpTX",J=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return i.useMemo(()=>new m.cP(e),[e])};function X({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:r}){let a=(0,V.YT)()===V.Oz.TWO_COL,s=i.useContext(B.c),c=a&&s===B.P.LEFT,p=t||n,u=(0,M.u)((0,E.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),_=(0,E.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,K.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,h=u?.name??_?.name,g=J(),y=new m.Z6(!0),x=(0,m._X)(e),I=(0,E.E7)(x),v=(0,O.av)(I),f=e=>{if(!e.connectionType||(0,E.gl)(e.connectionType))return null;let t=d()({[H]:!0,[W]:a}),n=d()({"prototype_action_verbose_title--actionDestination--KUBFz":!0,"prototype_action_verbose_title--actionDestinationUI3--Gd2d7":a});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":case"OBJECT_ANIMATION":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let i=e.transitionNodeID;if((0,E.gl)(i))return(0,o.jsx)("div",{className:t,children:(0,l.t)("proto.variant_actions.mixed")});if(void 0===i||R.aI(i,R.Hr))return null;let r=R.dI(i),a=g.format(r);return(0,o.jsx)("div",{className:n,children:a})}case"URL":{let i=e.connectionURL;if(!i)return null;if((0,E.gl)(i))return(0,o.jsx)("div",{className:t,children:(0,l.t)("proto.variant_actions.mixed")});return(0,o.jsx)("div",{className:n,children:i})}case"SET_VARIABLE":if(!e.targetVariableData||(0,E.gl)(e.targetVariableData))return null;return(0,o.jsx)("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--nsGbX",children:(0,o.jsx)(U.y3,{targetVariableData:e.targetVariableData,showVariableThumbnails:!1,isNarrowPanel:p,isInConditional:!0})});case"CONDITIONAL":{if((0,E.gl)(e)||(0,E.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return(0,o.jsx)(U.y3,{targetVariableData:t,isInConditional:!0,showVariableThumbnails:!1})}default:(0,j.xb)(e.connectionType)}},N=d()({[L.s.block.bgTransparent.$]:!0,"prototype_action_verbose_title--buttonResetTextAlign--kZYcX":!0,"prototype_action_verbose_title--buttonFocusOutline--11TRj":!0,[z.Li]:p&&!a,[z.O8]:!p&&!a,[z.kE]:a}),T=d()({"prototype_action_verbose_title--iconContainer--L0hVC":!0,"prototype_action_verbose_title--iconContainerUI3--maiY1":a});return(0,o.jsx)(D.E,{className:N,onClick:r,children:(0,o.jsxs)(w.Y1,{horizontalAlignItems:"space-between",width:"fill-parent",children:[(0,o.jsx)("div",{className:T,children:v}),(e=>{let t=I?y.format(I):"Undefined",n=d()({[H]:!0,[W]:a});if(((0,E.gl)(e.connectionType)||(0,E.gl)(x))&&(t=(0,l.t)("fullscreen.mixed")),!e.connectionType||(0,E.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return(0,o.jsx)("div",{className:n,children:t});var i=f(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:(0,l.t)("proto.action_change_to")}),i]});if(i){if("OVERLAY"===e.navigationType)return(0,o.jsx)("div",{className:Y,children:(0,l.tx)("proto.action_overlay_title",{overlayFrameName:(0,o.jsx)("span",{children:i})})});if("SWAP"===e.navigationType)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:(0,l.t)("proto.action_swap_overlay_title")}),i]})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:t}),i]});case"UPDATE_MEDIA_RUNTIME":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:t}),i]});case"URL":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:i?(0,l.t)("proto.action_url_title"):(0,l.t)("proto.action_open_link")}),i]});case"SET_VARIABLE":{let r=e.targetVariableData&&(0,E.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===k.rXF.COLOR,s=d()({"prototype_action_verbose_title--actionNameInsertionColor--oHRHM prototype_action_verbose_title--actionNameInsertion---IFWu":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--e-8QS":a});if(h&&i)return(0,o.jsx)("div",{className:r?s:Y,children:(0,l.tx)("proto.action_set_variable_title",{variableName:(0,o.jsx)("span",{className:"prototype_action_verbose_title--variableNameContainer--JjIfd",children:(0,o.jsx)(G.wG,{text:h,isDeleted:!!u&&(0,F.eF)(u),disableHover:c})}),variableValue:(0,o.jsx)("span",{className:"prototype_action_verbose_title--variableDestinationContainer--YYHQU prototype_action_verbose_title--variableNameContainer--JjIfd",children:i})})});return(0,o.jsx)("div",{className:n,children:t})}case"SET_VARIABLE_MODE":return(0,o.jsx)("div",{className:n,children:(0,l.t)("proto.action_set_variable_mode")});case"CONDITIONAL":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n,children:a?(0,l.t)("proto.if"):(0,l.t)("proto.action_conditional_title")}),i]});case"OBJECT_ANIMATION":return(0,o.jsx)(o.Fragment,{});default:(0,j.xb)(e.connectionType)}})(e)]})})}var q=n(828473),Z=n(563776),$=n(465075),Q=n(851425),ee=n(391459);let et=Symbol("ACTION_ROW");function en({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:c,selectedInteractions:x,autoOpenVariablePicker:I,autoOpenExpressionBuilder:v,setAutoOpenExpressionBuilder:f,...N}){let T=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:E,showAdvancedPrototypingVariablesModal:O,showAdvancedPrototypingConditionalActionsModal:C}=(0,V.zt)(),S=(0,g.Um)(),P=(0,V.hP)(),{firstVariableSetMode:A,firstVariableSetID:j}=(0,q.b)(),D=N.action,k=N.isNestedInConditional&&(0,Q.qQ)(N.action),R=!!D.connectionType&&"CONDITIONAL"===D.connectionType,w=(0,V.YT)(),L=w===V.Oz.SINGLE_COL,M=w===V.Oz.TWO_COL,U=i.useContext(B.c),K=M&&U===B.P.RIGHT,F=M&&U===B.P.LEFT;var G=N.selectedActionIndex.equals(N.actionIndexPath);let Y=1===N.selectedActionIndex.path.length&&N.isNestedInConditional&&N.actionIndexPath[0]===N.selectedActionIndex.path[0];var H=void 0===N.expandedRows||void 0!==N.expandedRows.find(e=>e.equals(N.actionIndexPath));H=!!L||!F||R;let[W,J]=i.useState(!1);i.useEffect(()=>{if(R){let e=setTimeout(()=>{J(!0)},0);return()=>clearTimeout(e)}J(!0)},[R]);let en=R&&!H,eo=R&&H,ei=i.useRef(null),[er,ea]=(0,s.fp)(V.hV),{position:el,dragItem:es}=(0,p.h4)(()=>({type:et,element:ei,item:{action:N.action,actionIndexPath:new Q.Op(N.actionIndexPath)},dropPositionThreshold:eo?.2:en?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!F||!H,onDrop(e){N.onDrop(e),ea(!0)}})),ec=i.useMemo(()=>{let e=ei.current;if(!e||!el||K)return;if(es&&"CONDITIONAL"===es.connectionType&&N.isNestedInConditional||(0,Q.qQ)(es)){ea(!1);return}let t=k?p.Nz.BEFORE:el;var n=void 0;let o=e.offsetParent?.firstElementChild?.scrollTop??0;return t===p.Nz.BEFORE?n=e.offsetTop-o:t===p.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-o),ea(!0),n},[el,K,es,N.isNestedInConditional,k,ea]),ed=el&&R&&!H&&el===p.Nz.INSIDE&&"CONDITIONAL"!==es.connectionType,ep=_.rf(N.recordingKey,"click",e=>{N.onSelect(N.actionIndexPath,!0)}),eu=_.rf(N.recordingKey,"mousedown",e=>{(0,Q.qQ)(N.action)||N.onSelect(N.actionIndexPath,!0)}),e_=e=>{var n=!0,o=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":E?(n=!1,O()):(t({connectionType:"SET_VARIABLE"}),I.current=!0);break;case"SET_VARIABLE_MODE":E?(n=!1,O()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:j,targetVariableModeID:A});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":o=!0,E?(n=!1,C()):(t({connectionType:"CONDITIONAL"}),f&&f(!0))}if(M&&N.onExpand(N.actionIndexPath,o),n){let t=x.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>u.d({nodeID:e.sourceNodeID,interactionID:e.id}));T((0,y._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},eh=N.isNestedInConditional?z.It:z.ft,em=d()({[z.wu]:!F,[z.zX]:F&&er}),eg=(0,o.jsx)(a,{className:z._2});if(k&&N.onAddAction)return(0,o.jsxs)("div",{className:F?z.LW:void 0,children:[ec&&(0,o.jsx)("hr",{className:eh,style:{transform:`translateY(${ec}px)`}}),F&&N.isNestedInConditional&&eg,(0,o.jsx)("div",{className:em,ref:ei,children:(0,o.jsx)($.t,{addButtonPressed:N.onAddAction,recordingKey:_.Pt(N.recordingKey,"addAction"),isNestedInConditional:!0})})]});let ey=(0,m._X)(D),ex="NONE"!==ey,eI=(H||!ex)&&!F,ev=N.numActions>1,ef=d()({[z.$l]:!0,[z.KY]:F&&!N.isNestedInConditional,[z.Iw]:F&&!N.isNestedInConditional&&er,[z.DM]:F&&N.isNestedInConditional,[z.vs]:F&&N.isNestedInConditional&&er,[z.M9]:F&&N.isNestedInConditional&&Y&&er,[z.I_]:F&&R&&!G&&er,[z.PE]:G&&F&&!N.isNestedInConditional,[z.Ze]:ed}),eN=d()({[z.rn]:!0,[z.Gu]:F,[z.Yo]:N.isNestedInConditional&&!K}),eT=(0,o.jsx)(X,{action:D,isNestedInConditional:N.isNestedInConditional,isNarrowPanel:N.isNarrowPanel&&ev,onClick:ep}),eE=(0,o.jsx)(b,{dispatch:T,dropdownShown:S,onChange:e_,action:ey,recordingKey:_.Pt(N.recordingKey,"actionDropdown"),showVideoActions:P,isNestedInConditional:N.isNestedInConditional}),eO=eI?eE:eT,eC=(0,o.jsx)(h.S.div,{className:eN,children:L||K?(0,o.jsx)(ee.A,{label:(0,l.t)("proto.action"),input:eO}):eO}),eS=d()({[z.Oe]:!0,[z.h2]:G,[z.Ob]:R});return(0,o.jsxs)("div",{className:ef,ref:ei,children:[void 0!==ec&&(0,o.jsx)("hr",{className:eh,style:{transform:`translateY(${ec}px)`}}),F?(0,o.jsxs)("div",{className:eS,children:[N.isNestedInConditional&&eg,eC]}):eC,H&&W&&(0,o.jsx)(Z.x,{action:D,actionIndexPath:N.actionIndexPath,autoOpenExpressionBuilder:v,autoOpenVariablePicker:I,expandedRows:N.expandedRows,handleMouseDownUI3:eu,interactionType:N.interactionType,isNarrowPanel:N.isNarrowPanel,isNestedInConditional:N.isNestedInConditional,onActionChange:e_,onDrop:N.onDrop,onExpand:N.onExpand,onNewActionAdded:N.onNewActionAdded,onSelect:N.onSelect,recordingKey:N.recordingKey,selectedActionIndex:N.selectedActionIndex,selectedInteractions:x,setAutoOpenExpressionBuilder:f,stateManagementVersion:c,updateMultipleDestinationNodes:e,updateSelectionProperties:t})]})}},465075:(e,t,n)=>{n.d(t,{h:()=>v,t:()=>f});var o=n(239976),i=n(105652),r=n(20002),a=n(255398),l=n(379141),s=n(224542),c=n.n(s),d=n(499735),p=n(842582),u=n(335298),_=n(694454),h=n(964731),m=n(52465),g=n(469543),y=n(363198),x=n(630691),I=n(709966);let v=e=>`interaction-panel-create-action-${e}`;function f(e){let t=v(e.recordingKey);var{showing:n,toggle:s,hide:f}=(0,h.BK)(t);let N=(0,i.useRef)(null),{recordingKey:T,addButtonPressed:E,presetInteractions:O,isLayoutNodeSelected:C}=e,{shouldShowAdvancedPrototypingPaywall:S,showAdvancedPrototypinglMultipleActionsModal:P}=(0,x.zt)(),A=(0,i.useCallback)(()=>{!e.skipPaywall&&S?P():s()},[e.skipPaywall,S,P,s]),b=(0,x.YT)()===x.Oz.TWO_COL,j=(0,x.hP)(),D=(0,y.cJ)(),k=(0,x.He)({showVideoActions:j,isNestedInConditional:e.isNestedInConditional,isSites:D,isUI3:!0,showPresetActions:!!e.presetInteractions,isLayoutNodeSelected:C}),R=(0,r.wA)(),w=(0,i.useCallback)(e=>{E((0,x.Bs)(e)),f()},[E,f]),L=c()({[I.x1]:e.renderButton,[I.xm]:!e.renderButton&&!b,[I.U3]:!e.renderButton&&b}),M=[];k.forEach(e=>{(0,x.vc)(e)?M.push(m.w):e===x.Xk&&O?.length?M.push(...O,m.w):M.push(function({actionType:e,clickCb:t,recordingKey:n,isUI3:o}){let i=(0,_.av)(e),r=new u.Z6(o),a=e?r.format(e):"Undefined";return{type:e,className:I.BP,callback:()=>t(e),icon:i,displayText:a,recordingKey:d.Pt(n,"createActionOption",e),"data-onboarding-key":`create-action-${e}`}}({clickCb:w,recordingKey:T,actionType:e,isUI3:!0}))});let U=e.isNestedInConditional?(0,l.t)("proto.prototype_panel.add_nested_action"):D?(0,l.t)("sites.panel.add_interaction"):(0,l.t)("proto.prototype_panel.add");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.e6,{ref:N,recordingKey:d.Pt(T,"createActionDropdown"),className:L,onClick:A,"aria-label":(0,l.t)("proto.prototype_panel.create_action_button"),"data-tooltip":U,"data-tooltip-type":"text",children:e.renderButton?(0,o.jsx)(a.$,{}):(0,l.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")}),n&&N.current&&(0,o.jsx)(g.j,{dataTestId:e.dataTestId,dispatch:R,hidePointWhenContentOffScreen:!0,items:M,lean:"center",minWidth:130,onSelectItem:e=>e.callback?.(),parentRect:N.current.getBoundingClientRect(),recordingKey:"actionDropdown",showPoint:!0})]})}},802398:(e,t,n)=>{n.d(t,{Z0:()=>tJ});var o=n(239976),i=n(105652),r=n(20002),a=n(836848),l=n(405670),s=n(2227),c=n(379141),d=n(270450),p=n(499735),u=n(122313),_=n(639184),h=n(338630),m=n(756043),g=n(772293),y=n(212198),x=n(862390),I=n(421914),v=n(162251),f=n(300573),N=n(795867),T=n(158910),E=n(58756),O=n(840133),C=n(727640),S=n(733200),P=n(177102),A=n(288350);let b=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M15 5H9a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1M9 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",clipRule:"evenodd"})})}),j=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 8H6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1M6 7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z",clipRule:"evenodd"})})});var D=n(445019),k=n(763561),R=n(608375),w=n(236410),L=n(213214),M=n(677743),U=n(875253),K=n(27414),B=n(324880),V=n(604687),F=n(596611),G=n(687645),z=n(181516),Y=n(460166);function H(e){let t=i.useRef(null),{dispatch:n,pickerShown:r,prototypeBackgroundColor:a}=e,l=i.useCallback(()=>{let e=t.current;if(r&&r.id===B.$T)n(K.XE());else if(e&&e instanceof HTMLElement){let t=(0,V.cn)(e);n(K.u1({id:B.$T,initialX:t.x,initialY:t.y}))}},[n,r]),s=i.useCallback((e,t)=>{n((0,f._P)({name:"Prototype Background Modified"})),g.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[n]),d=(0,I._W)(a,{r:0,g:0,b:0,a:1}),u=(0,o.jsxs)("div",{className:"prototype_background_panel--colorValueContainer--1xj4e paint_panels--colorValueContainer--QPBbG raw_components--borderFocusWithin--mSvWa paint_panels--_baseColorValueContainer--vZ0G7 raw_components--base--O8WhL raw_components--singleRowHeight--r92RH",children:[(0,o.jsx)(F.J,{onClick:l,color:d,opacity:d.a,recordingKey:p.Pt(e,"chit"),className:"prototype_background_panel--chit--Pt-u- paint_panels--chit--o24xS"}),(0,o.jsx)(A.h,{htmlFor:"prototype-background-color-picker",children:(0,c.t)("presets.device_panel.background_color")}),(0,o.jsx)(z.AN,{id:"prototype-background-color-picker",className:"prototype_background_panel--color--DzT1r paint_panels--colorInput--fcNWY",noLeftBorder:!0,formatter:R.TI,property:d,onChange:s,recordingKey:p.Pt(e,"colorInput"),noBorderOnFocus:!0})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Y.TN,{ref:t,children:u}),r&&r.id===B.$T&&(0,o.jsx)(G.h,{disabledVariableIds:new Set,initialPosition:new U.Mi(r.initialX??0,r.initialY??0),color:d,boundVariable:null,onChange:s,recordingKey:p.Pt(e,"colorPicker")})]})}var W=n(690252),J=n(808620),X=n(775544);let q="prototype_device_panel--deviceOption--nnbGV",Z="prototype_device_panel--inactiveLabel--LbnPz raw_components--iconInsideBorderFocusWithin--xyTeR",$="prototype_device_panel--labelInactive--zQHNG";class Q extends i.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>k.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return k.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=k.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;g.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let i=(0,o.jsx)(en,{presetIdentifier:this.deviceInfo().presetIdentifier,onChange:this.onModelChange,recordingKey:p.Pt(this.props,"modelDropdown")}),r=t?(0,o.jsx)(Y.dx,{left:i,right:n}):(0,o.jsx)(Y.TN,{children:i});return(0,o.jsxs)("div",{children:[!this.props.isUI3&&(0,o.jsx)(W.hl,{children:(0,o.jsx)(W.nV,{className:$,children:(0,c.tx)("presets.device_panel.model")})}),this.props.isUI3?r:(0,o.jsx)(W.fI,{children:i})]})},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,I._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=R.z5.format(t),i=t.r>.9&&t.g>.9&&t.b>.9,r=`1px solid ${i?"#EFEFEF":"transparent"}`,a=(0,o.jsx)("div",{className:"prototype_device_panel--devicePreview--g0kOO",style:{backgroundColor:n,border:r},children:(0,o.jsx)("img",{className:"prototype_device_panel--deviceImage---Onzz",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`})});return(0,o.jsxs)("div",{children:[!this.props.isUI3&&(0,o.jsx)(W.hl,{children:(0,o.jsx)(W.nV,{className:$,children:(0,c.tx)("presets.device_panel.preview")})}),this.props.isUI3?(0,o.jsx)(Y.TN,{appendedClassName:X.Rk,children:a}):(0,o.jsx)("div",{className:"prototype_device_panel--devicePreviewContainer--Wrxaf",children:a})]})},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,o=t.rotation;o=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",g.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:o}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=(0,o.jsx)(et,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,recordingKey:p.Pt(this.props,"deviceDropdown")}),n=(0,o.jsxs)(C.bL,{onChange:this.onChangeOrientation,recordingKey:p.Pt(this.props,"orientationControl"),value:this.currentDeviceOrientation(),legend:(0,o.jsx)(S.q,{children:(0,c.t)("presets.device_panel.rotation")}),children:[(0,o.jsx)(C.c$,{"aria-label":(0,c.t)("presets.device_panel.rotation.portrait"),value:"PORTRAIT",icon:(0,o.jsx)(b,{})}),(0,o.jsx)(C.c$,{"aria-label":(0,c.t)("presets.device_panel.rotation.landscape"),value:"LANDSCAPE",icon:(0,o.jsx)(j,{})})]}),i=(0,k.$X)(e.type||"NONE",e.presetIdentifier),r=(0,o.jsxs)(W.fI,{children:[t,i&&n]}),a=this.deviceInfo()&&this.shouldShowModelDropdown(),l=i&&!a?(0,o.jsx)(Y.dx,{left:t,right:n}):(0,o.jsx)(Y.TN,{children:t}),s=(0,o.jsx)(ee,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:p.Pt(this.props,"deviceSizeInputs")});return(0,o.jsxs)(W.Zk,{children:[(0,o.jsx)(W.fI,{className:"prototype_device_panel--panelTitleRowOuter--DPcE7 collapsible_property_panel--panelTitleRowOuter--MwUi9",children:(0,o.jsx)(M.xw,{innerRef:this.props.titleRef,extended:this.props.isUI3,doNotReserveSpaceForChevron:!0,forceNoChevron:!0,children:this.props.isUI3?(0,c.tx)("presets.device_panel.prototype_settings"):(0,c.tx)("presets.device_panel.device")})}),this.props.isUI3?l:r,this.renderModelDropdown(!!a,i,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&(0,o.jsx)(H,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:p.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s]})}}function ee(e){let t=i.useCallback(t=>{g.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=i.useCallback(t=>{g.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),r=(0,o.jsx)(L.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInputLeftCol--oHsrz prototype_device_panel--scrubbableInput--EupkV","data-tooltip":(0,c.t)("presets.device_panel.device_width_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--leftColInput--iqqfu prototype_device_panel--input--ztL3d",onValueChange:t,recordingKey:p.Pt(e,"deviceWidth"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.x,children:(0,o.jsx)("span",{className:Z,children:(0,c.tx)("proto.device_panel.width")})}),a=(0,o.jsx)(L.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInput--EupkV","data-tooltip":(0,c.t)("presets.device_panel.device_height_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--input--ztL3d",onValueChange:n,recordingKey:p.Pt(e,"deviceHeight"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.y,children:(0,o.jsx)("span",{className:Z,children:(0,c.tx)("proto.device_panel.height")})});return(0,o.jsx)(Y.dx,{left:r,right:a})}Q.displayName="PrototypeDevicePanel";class et extends p.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,c.t)("proto.frame_preset_panel.no_device"):(0,c.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,c.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,c.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,f.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,f._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:D.zl.get(J.hg).modalStatus===J.bi.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,k.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let i=n.framePresetSize;return(0,o.jsx)(P.Option,{value:n.presetIdentifier,children:(0,o.jsxs)("div",{className:q,children:[(0,o.jsx)("span",{children:n.getI18nDeviceName()}),(0,o.jsxs)("span",{children:[i.x,"\u200A\xd7\u200A",i.y]})," "]})},t)}}render(){let e;let t="string"==typeof(e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":k.hY[this.props.prototypeDevice.presetIdentifier]||"NONE")?e:e.presetIdentifier;return(0,o.jsxs)(P.Root,{onChange:e=>{"NONE"===e||"PRESENTATION"===e||"CUSTOM"===e?this.onChange(e):this.onChange((0,k.Fh)(e,this.props.prototypeDevice))},recordingKey:p.Pt(this.props,"select"),value:t,children:[(0,o.jsx)(P.Trigger,{label:(0,o.jsx)(A.h,{children:(0,c.tx)("proto.frame_preset_panel.device")}),width:"fill",children:this.formatter.format(e)}),(0,o.jsxs)(P.Container,{children:[(0,o.jsx)(P.Option,{value:"NONE",children:(0,c.tx)("proto.frame_preset_panel.no_device")}),(0,o.jsx)(P.Separator,{}),k.r6.map(this.renderPresetOption),(0,o.jsx)(P.Separator,{}),k.J_.map(this.renderPresetOption),(0,o.jsx)(P.Separator,{}),k.AG.map(this.renderPresetOption),(0,o.jsx)(P.Separator,{}),k.$w.map(this.renderPresetOption),(0,o.jsx)(P.Separator,{}),(0,o.jsx)(P.Option,{value:"CUSTOM",children:(0,o.jsxs)("div",{className:q,children:[(0,o.jsx)("span",{children:(0,c.tx)("proto.frame_preset_panel.custom_size")}),(0,o.jsx)("span",{children:(0,c.tx)("proto.frame_preset_panel.fit")})]})}),(0,o.jsx)(P.Option,{value:"PRESENTATION",children:(0,o.jsxs)("div",{className:q,children:[(0,o.jsx)("span",{children:(0,c.tx)("proto.frame_preset_panel.presentation")}),(0,o.jsx)("span",{children:(0,c.tx)("proto.frame_preset_panel.fill")})]})}),(0,o.jsx)(P.Separator,{}),k.dr.map(this.renderPresetOption)]})]})}}et.displayName="DeviceDropdown";class en extends p.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=k.hY[e];return t?t.getI18nStyleName():(0,c.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return(0,o.jsx)(P.Option,{value:n,children:k.hY[n].getI18nStyleName()},t)}}render(){let e=k.hY[this.props.presetIdentifier];if(!e)return null;let t=k.yr[e.deviceName],n=this.props.presetIdentifier;return(0,o.jsxs)(P.Root,{onChange:this.props.onChange,recordingKey:p.Pt(this.props,"select"),value:n,children:[(0,o.jsx)(P.Trigger,{label:(0,o.jsx)(A.h,{children:(0,c.tx)("proto.frame_preset_panel.device.model")}),width:"fill",children:this.formatter.format(n)}),(0,o.jsx)(P.Container,{children:t.map(this.renderStyleOption)})]})}}en.displayName="ModelDropdown";var eo=n(584166),ei=n(958954),er=n(25321),ea=n(248317),el=n(39899);let es=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M17.854 6.854a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708zm-8.708-.708a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 0 0-2.143 5.1.5.5 0 0 1-.714.7A4 4 0 0 1 9 8h1.293L9.146 6.854a.5.5 0 0 1 0-.708m8.004 3.047a.5.5 0 0 1 .707.008A4 4 0 0 1 15 16h-1.293l1.147 1.145a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 0 0 2.143-5.1.5.5 0 0 1 .007-.707",clipRule:"evenodd"})})});var ec=n(533262);let ed=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M12.147 12.974a.5.5 0 0 1 .853.354V18a1 1 0 0 1-1.707.707L9.207 16.62a.5.5 0 1 1 .707-.707l2.07 2.07c.006.005.016 0 .016-.009v-4.647a.5.5 0 0 1 .146-.354m4-6.828a.5.5 0 0 1 .707.707l-11 11a.5.5 0 0 1-.708-.707zm-.693 3.52c.182-.182.476-.195.648-.004a3.5 3.5 0 0 1-1.541 5.673c-.29.092-.561-.144-.561-.448v-.029c0-.238.17-.437.393-.522a2.5 2.5 0 0 0 1.06-3.895c-.184-.228-.206-.568.001-.775m-4.161-4.373A1 1 0 0 1 13 6v1.672a.5.5 0 0 1-1 0V6.024c0-.009-.01-.013-.017-.008l-2.98 2.98L8.996 9H6.5a.5.5 0 0 0-.5.5v5c0 .177 0 .379-.126.504l-.12.119c-.202.203-.544.193-.65-.074a1.5 1.5 0 0 1-.104-.55v-5A1.5 1.5 0 0 1 6.5 8h2.082l.007-.002zm2.707 6c0-.344.35-.575.588-.325a1.495 1.495 0 0 1 0 2.063c-.238.25-.588.019-.588-.326z"})})});var ep=n(446523),eu=n(272439),e_=n(259714),eh=n(123190),em=n(540694),eg=n(496124);function ey({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,I.gl)(e)&&(0,I.gl)(t)?n=(0,c.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:(0,o.jsx)(e_.B,{svg:em.A,className:eh.eT}),speakerSvg:(0,o.jsx)(e_.B,{svg:eg.A,className:eh.To})}):(0,I.gl)(e)?n=(0,c.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:(0,o.jsx)(e_.B,{svg:em.A,className:eh.eT})}):(0,I.gl)(t)&&(n=(0,c.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:(0,o.jsx)(e_.B,{svg:eg.A,className:eh.To})})),n?(0,o.jsx)(W.fI,{children:(0,o.jsx)(W.nV,{className:eh.pc,children:n})}):null}let ex=e=>(0,I.gl)(e)?"mixed":e,eI=e=>!0===e,ev=function(e){let t=(0,o.jsx)("span",{children:(0,o.jsx)(ea.S,{label:(0,o.jsx)(A.J,{"data-tooltip":(0,c.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":w.Ib.TEXT,children:(0,c.tx)("proto.prototype_panel.autoplay")}),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,f._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:ex(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:eI(e.videoPlayback.autoplay),mixed:(0,I.gl)(e.videoPlayback.autoplay),recordingKey:p.Pt(e,"autoPlayToggle")})}),n=(0,o.jsx)(el.f,{"aria-label":(0,c.t)("proto.prototype_panel.loop"),checked:eI(e.videoPlayback.mediaLoop),"data-testid":"videoLoopToggle","data-tooltip":(0,c.t)("proto.prototype_panel.loop"),"data-tooltip-type":w.Ib.TEXT,mixed:(0,I.gl)(e.videoPlayback.mediaLoop),offIcon:(0,o.jsx)(es,{}),onChange:()=>{let t=!eI(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,f._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:ex(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},onIcon:(0,o.jsx)(ec.C,{}),recordingKey:p.Pt(e,"videoLoopToggle")}),i=(0,o.jsx)(el.f,{"aria-label":(0,c.t)("proto.prototype_panel.sound"),checked:eI(!e.videoPlayback.muted),"data-testid":"videoSoundToggle","data-tooltip":(0,c.t)("proto.prototype_panel.sound"),"data-tooltip-type":w.Ib.TEXT,mixed:(0,I.gl)(e.videoPlayback.muted),offIcon:(0,o.jsx)(ed,{}),onChange:()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,f._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:ex(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},onIcon:(0,o.jsx)(ep.W,{}),recordingKey:p.Pt(e,"videoSoundToggle")}),r=(0,o.jsx)(eu.pG,{input:t,leftIcon:n,rightIcon:i,label:null});return(0,o.jsxs)(W.Zk,{children:[(0,o.jsx)(W.fI,{children:(0,o.jsx)(M.xw,{extended:!0,children:(0,c.tx)("proto.prototype_panel.video")})}),r,(0,o.jsx)(ey,{videoPlayback:e.videoPlayback})]})};var ef=n(136916),eN=n(449979),eT=n(813928),eE=n(692376),eO=n(798913),eC=n(847923),eS=n(335298),eP=n(157750),eA=n(248046),eb=n(12908),ej=n(154963),eD=n(145652),ek=n(478877),eR=n(689835);function ew(e){let{type:t}=e;return(0,o.jsxs)("div",{className:ej.s.flex.justifyCenter.itemsCenter.$,children:[(0,o.jsx)(e_.B,{className:ej.s.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?ek.A:eR.A}),(0,o.jsx)("span",{className:ej.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,c.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")})]})}let eL=(0,eD.ex)("prototype_scroll_horizontal_info",ew,()=>({type:"horizontal",unconstrainWidth:!0})),eM=(0,eD.ex)("prototype_scroll_vertical_info",ew,()=>({type:"vertical",unconstrainWidth:!0})),eU=(0,eD.ex)("prototype_scroll_marquee_info",function(){return(0,o.jsx)("div",{className:ej.s.flex.justifyCenter.itemsCenter.$,children:(0,o.jsx)("span",{className:ej.s.flexGrow1.m6.$,style:{maxWidth:144},children:(0,c.tx)("proto.prototype_panel.overflow_scrolling_not_available_for_frames_with_marquee")})})},()=>({}));var eK=n(363198);let eB="scroll_behavior_panel--rowContainer--zywiE",eV="scroll_behavior_panel--scrollPosition--yDiGq",eF="scroll_behavior_panel--labelContainer--yzXXy";function eG(e){let{disableOverflowBehaviorItem:t,disableScrollBehaviorItem:n,dropdownShown:r}=e,[a,l]=function(){let e=(0,eP.ut)(eE.Ez5?.propertiesPanelState().shownPropertiesPanels,[])[eE.ibQ.OVERFLOW_ITEM],t=(0,eK.cJ)(),n=(0,v.kl)("isSection"),o=(0,v.kl)("anyTopLevelFramesInSelection");return[e,!t&&!1===n&&!1===o]}(),s=i.useId(),_=(0,o.jsx)(eb.iE,{titleTx:(0,c.tx)("proto.scroll_panel.scroll_behavior_title")});return a||l?(0,o.jsx)(u.k,{name:"scroll_behavior_panel",children:(0,o.jsxs)(W.Zk,{children:[_,l&&(0,o.jsx)(o.Fragment,{children:(0,d.kc)().ce_tv_fpl_select?(0,o.jsx)(eJ,{disabled:n,recordingKey:p.Pt(e,"scrollBehavior")}):(0,o.jsxs)("div",{className:eB,children:[(0,o.jsx)("div",{className:"scroll_behavior_panel--inactiveLabelContainer--jHlqv",children:(0,o.jsx)("span",{id:s,className:"scroll_behavior_panel--inactiveLabel--kunuG",children:(0,c.tx)("proto.scroll_panel.position_dropdown.position")})}),(0,o.jsx)(eX,{ariaLabelledBy:s,recordingKey:p.Pt(e,"scrollBehavior"),dropdownShown:r,disabled:n})]})}),a&&(0,o.jsx)(eY,{disabled:t,recordingKey:p.Pt(e,"scrollDirection")})]})}):null}let ez=["NONE","HORIZONTAL","VERTICAL","BOTH"];function eY({disabled:e,recordingKey:t}){let n=(0,r.wA)(),[a]=(0,v.lJ)("showWontScrollWarning"),[l]=(0,v.lJ)("scrollDirection"),s=eq(),d=i.useCallback(()=>s?eU:"HORIZONTAL"===l?eL:eM,[s,l]),p=i.useId(),u=i.useCallback(e=>{n((0,f._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,I._W)(l,"MIXED")}})),g.Y5.updateSelectionProperties({scrollDirection:e})},[n,l]);return i.useMemo(()=>(0,o.jsxs)("div",{className:eB,children:[(0,o.jsx)(A.J,{variant:"secondary",htmlFor:p,className:eF,children:(0,c.tx)("proto.scroll_panel.overflow_dropdown.overflow")}),a&&(0,o.jsx)("div",{className:"scroll_behavior_panel--infoIcon--ITIbI","data-tooltip-type":w.Ib.SPECIAL,"data-tooltip":d(),"data-tooltip-show-immediately":!0,children:(0,o.jsx)(eT.i,{})}),(0,o.jsx)("div",{className:a?"scroll_behavior_panel--scrollDirectionShort--Ejh-j":"scroll_behavior_panel--scrollDirection--MIMkb",children:(0,o.jsxs)(P.Root,{onChange:u,value:l||"NONE",recordingKey:t,children:[(0,o.jsx)(P.ManuallyLabeledTrigger,{"data-testid":"scroll-direction-dropdown",disabled:e||s,id:p,width:"fill"}),(0,o.jsx)(P.Container,{children:ez.map(e=>(0,o.jsx)(P.Option,{value:e,children:eS.Rk.format(e)},e))})]})})]}),[p,a,d,u,l,t,e,s])}let eH=eA.l6,eW=eA.c$;function eJ({disabled:e,recordingKey:t}){let n=(0,r.wA)(),a=(0,v.kl)("scrollBehavior")||"SCROLLS",l=i.useCallback(e=>{let t;switch(n((0,f._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}})),e){case"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME":t=eE.KjJ.FIXED;break;case"STICKY_SCROLLS":t=eE.KjJ.STICKY_SCROLLS;break;case"SCROLLS":t=eE.KjJ.SCROLLS}eO.l7.user("set-scroll-behavior",()=>eE.X3B&&eE.X3B.aggressivelySetScrollBehaviorOfSelection(t)),g.Y5.commit()},[n]),{fixedScrollingDisabled:s}=eZ(),d=i.useId();return i.useMemo(()=>(0,o.jsxs)("div",{className:eB,children:[(0,o.jsx)(A.J,{variant:"secondary",htmlFor:d,className:eF,children:(0,c.tx)("proto.scroll_panel.position_dropdown.position")}),(0,o.jsx)("div",{className:eV,children:(0,o.jsxs)(P.Root,{onChange:l,value:a,recordingKey:t,children:[(0,o.jsx)(P.ManuallyLabeledTrigger,{"data-testid":"scroll-behavior-dropdown",disabled:e,id:d,width:"fill"}),(0,o.jsxs)(P.Container,{children:[(0,o.jsx)(P.Option,{value:"SCROLLS",children:eS.Ge.format("SCROLLS")}),(0,o.jsx)(P.Option,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:s,children:eS.Ge.format("FIXED_WHEN_CHILD_OF_SCROLLING_FRAME")}),(0,o.jsx)(P.Option,{value:"STICKY_SCROLLS",children:eS.Ge.format("STICKY_SCROLLS")})]})]})})]}),[d,l,a,t,e,s])}function eX(e){let t=(0,r.wA)(),n=(0,v.kl)("scrollBehavior"),{fixedScrollingDisabled:i}=eZ(),a="scroll-behavior-select",l=e.dropdownShown&&e.dropdownShown.type===a?eS.Ge:eS.wi;return(0,o.jsxs)(eH,{ariaLabelledBy:e.ariaLabelledBy,className:eV,dataTestId:"scroll-behavior-dropdown",disabled:e.disabled,dispatch:t,dropdownClassName:"scroll_behavior_panel--fullWidth--e56Hf",dropdownShown:e.dropdownShown,formatter:l,id:a,onChange:e=>{t((0,f._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?eE.KjJ.FIXED:"STICKY_SCROLLS"===e?eE.KjJ.STICKY_SCROLLS:eE.KjJ.SCROLLS;eO.l7.user("set-scroll-behavior",()=>eE.X3B?.aggressivelySetScrollBehaviorOfSelection(n)),g.Y5.commit()},property:n||"SCROLLS",recordingKey:e.recordingKey,children:[(0,o.jsx)(eW,{value:"SCROLLS"}),(0,o.jsx)(eW,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:i}),(0,o.jsx)(eW,{value:"STICKY_SCROLLS"})]})}let eq=()=>{let[e]=(0,v.lJ)("marquee");return!!(0,eN.EA)(e)},eZ=()=>(0,eC.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}});var e$=n(942356);n(323264);var eQ=n(748181),e0=n(920675),e1=n(353950),e2=n(445952),e5=n(702417),e4=n(627917),e7=n(328414),e3=n(132421);let e6={[e0._Y.SLIDES]:{getStandaloneCtaText:()=>(0,c.t)("send_to_editor_type.standalone_cta.slides"),getDropdownOptionLabel:()=>(0,c.t)("send_to_editor_type.label.slides"),getDropdownOptionIcon:()=>(0,o.jsx)(e4.o,{})},[e0._Y.FIGMAKE]:{getStandaloneCtaText:()=>(0,c.t)("send_to_editor_type.standalone_cta.make"),getDropdownOptionLabel:()=>(0,c.t)("send_to_editor_type.label.make"),getDropdownOptionIcon:()=>(0,o.jsx)(e7.s,{})},[e0._Y.COOPER]:{getStandaloneCtaText:()=>(0,c.t)("send_to_editor_type.standalone_cta.buzz"),getDropdownOptionLabel:()=>(0,c.t)("send_to_editor_type.label.buzz"),getDropdownOptionIcon:()=>(0,o.jsx)(e3.h,{})},[e0._Y.DESIGN]:null,[e0._Y.WHITEBOARD]:null,[e0._Y.SITES]:null};function e9(){let e=function(e){let t=(0,r.wA)(),n=(0,e1.V)(),o=i.useCallback(()=>{(0,e2.C)({type:"send-to-make-from-design",newFileFrom:e5.f6.SEND_TO_MAKE_FROM_DESIGN_PROPS_PANEL,entryPoint:e,dispatch:t})},[t,e]);return i.useMemo(()=>n?{editorType:e0._Y.FIGMAKE,onClick:o}:null,[o,n])}("Send to Figma Make Prototype Panel"),t=(0,eQ.f)("dismissed_figma_make_prototype_announcement"),n=e6[e0._Y.FIGMAKE];return e&&t&&n?(0,o.jsx)(W.Zk,{className:"xz9dl7a xsag5q8",children:(0,o.jsx)(eu.Ad,{label:null,input:(0,o.jsx)(h.fu,{name:"Send to Figma Make from Prototype Panel",children:(0,o.jsx)(e$.IK,{variant:"secondary",onClick:e.onClick,children:n.getStandaloneCtaText()})})})}):null}var e8=n(865702),te=n(378721),tt=n(297860),tn=n(915124),to=n(854225),ti=n(466082),tr=n(682302),ta=n(409084),tl=n(694454),ts=n(384203),tc=n(223487),td=n(456556),tp=n(748765),tu=n(113653),t_=n(391459),th=n(236839);function tm(e){switch(e){case to.mgy.IN_CUBIC:return{p1x:.42,p1y:0,p2x:1,p2y:1};case to.mgy.OUT_CUBIC:return{p1x:0,p1y:0,p2x:.58,p2y:1};case to.mgy.INOUT_CUBIC:return{p1x:.42,p1y:0,p2x:.58,p2y:1};case to.mgy.LINEAR:return{p1x:0,p1y:0,p2x:1,p2y:1};case to.mgy.IN_BACK_CUBIC:return{p1x:.3,p1y:-.05,p2x:.7,p2y:-.5};case to.mgy.OUT_BACK_CUBIC:return{p1x:.45,p1y:1.45,p2x:.8,p2y:1};case to.mgy.INOUT_BACK_CUBIC:return{p1x:.7,p1y:-.4,p2x:.4,p2y:1.4};case to.mgy.CUSTOM_CUBIC:default:return{p1x:0,p1y:0,p2x:.58,p2y:1}}}var tg=n(560490),ty=n(124982),tx=n(730586),tI=n(630691);let tv={[to.mgy.IN_CUBIC]:"IN_CUBIC",[to.mgy.OUT_CUBIC]:"OUT_CUBIC",[to.mgy.INOUT_CUBIC]:"INOUT_CUBIC",[to.mgy.LINEAR]:"LINEAR",[to.mgy.IN_BACK_CUBIC]:"IN_BACK_CUBIC",[to.mgy.OUT_BACK_CUBIC]:"OUT_BACK_CUBIC",[to.mgy.INOUT_BACK_CUBIC]:"INOUT_BACK_CUBIC",[to.mgy.CUSTOM_CUBIC]:"CUSTOM_CUBIC",[to.mgy.GENTLE_SPRING]:"GENTLE_SPRING",[to.mgy.SPRING_PRESET_ONE]:"SPRING_PRESET_ONE",[to.mgy.SPRING_PRESET_TWO]:"SPRING_PRESET_TWO",[to.mgy.SPRING_PRESET_THREE]:"SPRING_PRESET_THREE",[to.mgy.CUSTOM_SPRING]:"CUSTOM_SPRING",[to.mgy.SPRING]:"SPRING"},tf={IN_CUBIC:to.mgy.IN_CUBIC,OUT_CUBIC:to.mgy.OUT_CUBIC,INOUT_CUBIC:to.mgy.INOUT_CUBIC,LINEAR:to.mgy.LINEAR,IN_BACK_CUBIC:to.mgy.IN_BACK_CUBIC,OUT_BACK_CUBIC:to.mgy.OUT_BACK_CUBIC,INOUT_BACK_CUBIC:to.mgy.INOUT_BACK_CUBIC,CUSTOM_CUBIC:to.mgy.CUSTOM_CUBIC,GENTLE_SPRING:to.mgy.GENTLE_SPRING,SPRING_PRESET_ONE:to.mgy.SPRING_PRESET_ONE,SPRING_PRESET_TWO:to.mgy.SPRING_PRESET_TWO,SPRING_PRESET_THREE:to.mgy.SPRING_PRESET_THREE,CUSTOM_SPRING:to.mgy.CUSTOM_SPRING,SPRING:to.mgy.SPRING};function tN({easingType:e,onEasingTypeChange:t,...n}){return(0,o.jsx)(tg.Um,{property:(0,tI.jT)(tv[e]),onChange:e=>{let n=(0,tI.$6)(e);(0,I.hS)(n)&&t(tf[n])},...n})}function tT(e){return e?[e.p1x,e.p1y,e.p2x,e.p2y]:null}function tE(e){return e?[e.mass,e.stiffness,e.damping,0]:null}function tO({easingData:e,...t}){let n=(0,i.useMemo)(()=>e.easingType===to.mgy.CUSTOM_CUBIC?tT(e.bezierValues)??tC:e?.easingType===to.mgy.CUSTOM_SPRING?tE(e.springValues)??tS:null,[e]);return(0,o.jsx)(ty.O,{easingFunction:n,...t})}let tC=[0,0,.58,1],tS=[1,100,15,0];function tP({easingType:e,bezierValues:t,springValues:n,onSpringValuesChange:r,onBezierValuesChange:a,...l}){let s=(0,tI.jT)(tv[e]),c=(0,i.useMemo)(()=>e===to.mgy.CUSTOM_CUBIC?tT(t)??tC:e===to.mgy.CUSTOM_SPRING?tE(n)??tS:void 0,[e,t,n]);return(0,I.hS)(s)&&("CUSTOM_BEZIER"===s||"CUSTOM_SPRING"===s)&&c?(0,o.jsx)(tx.R,{easingType:s,easingFunction:c,updateSelectionProperties:t=>{if(t.easingFunction&&(0,I.hS)(t.easingFunction)){if(e===to.mgy.CUSTOM_CUBIC){let e=function(e){if(!e)return null;let t=e[0],n=e[1],o=e[2],i=e[3];return null==t||null==n||null==o||null==i?null:{p1x:t,p1y:n,p2x:o,p2y:i}}(t.easingFunction);e&&a(e)}else if(e===to.mgy.CUSTOM_SPRING){let e=function(e){if(!e)return null;let t=e[0],n=e[1],o=e[2];return null==t||null==n||null==o?null:{mass:t,stiffness:n,damping:o}}(t.easingFunction);e&&r(e)}}},...l}):null}function tA(e){let t=(0,tI.jT)(tv[e]);return!!(0,I.hS)(t)&&(0,tg.TC)(t)}let tb=[to.Jrv.ALL,to.Jrv.OPACITY,to.Jrv.TRANSLATION,to.Jrv.ROTATION,to.Jrv.SCALE],tj=tb.length;function tD(e){switch(e){case to.Jrv.ALL:return(0,ta.t)("transition_overrides.transition_override_item.transition_property_all");case to.Jrv.OPACITY:return(0,ta.t)("transition_overrides.transition_override_item.transition_property_opacity");case to.Jrv.TRANSLATION:return(0,ta.t)("transition_overrides.transition_override_item.transition_property_translation");case to.Jrv.ROTATION:return(0,ta.t)("transition_overrides.transition_override_item.transition_property_rotation");case to.Jrv.SCALE:return(0,ta.t)("transition_overrides.transition_override_item.transition_property_scale");default:return""}}class tk extends Map{static from(e){return e?new tk(e):new tk}clone(){return new tk(this)}cleaned(){let e=new tk;return this.forEach((t,n)=>{t&&t.length&&e.set(n,t)}),e}moveOverride(e,t,n){if(t===n)return!1;let o=this.get(t)??[],i=o.findIndex(t=>t.id===e);if(i<0)return!1;let r=this.get(n)??[];if(r.length>0)return!1;let a=o[i];return this.set(t,o.filter(t=>t.id!==e)),this.set(n,[...r,a]),!0}toBaseMap(){return new Map(this)}}function tR(){return(0,o.jsx)(tw,{})}function tw(){let e=(0,r.wA)(),t=(0,tc.q5)(),n=(0,ts.Mw)(),{assignedProps:a,orderedTransitionOverrideEntries:l}=function(e){let t=(0,td.Fk)((e,t)=>{if(!t)return[];let n=e.get(t);if(!n)return[];let o=tk.from(n.transitionOverrideData);if(!o.size)return[];let i=[];return o.forEach((e,t)=>{e.forEach(e=>{i.push({prop:t,override:e})})}),i},e?.id??null),n=(0,i.useMemo)(()=>[...t].sort((e,t)=>{let n=e.override.createdAtMs,o=t.override.createdAtMs;return n!==o?Number(n)-Number(o):e.prop!==t.prop?tb.indexOf(e.prop)-tb.indexOf(t.prop):e.override.id.localeCompare(t.override.id)}),[t]);return{assignedProps:(0,i.useMemo)(()=>n.map(e=>e.prop),[n]),orderedTransitionOverrideEntries:n}}(n);return n?(0,o.jsx)(W.Zk,{"data-onboarding-key":"transitionOverridesPanel","data-testid":"transition-overrides-panel",children:(0,o.jsx)(tu.WI,{addProperty:()=>{if(!eE.glU)return;let e=eE.glU?.generateUniqueID();if(!e)return;let t=tb.find(e=>!a.includes(e))??null;if(null==t)return;let o=function(e){let t=to.mgy.OUT_CUBIC;return{id:e,duration:.5,delay:0,createdAtMs:Date.now().toString(),easing:{easingType:t,bezierValues:tm(t)}}}(e);eO.l7.user("transition-override-create",()=>{let e=tk.from(n.transitionOverrideData),i=e.get(t)??[];e.set(t,[...i,o]),n.transitionOverrideData=e.cleaned().toBaseMap(),eE.glU?.commit()})},currentSelectedProperty:{type:to.rrT.NONE,indices:[]},dispatch:e,hideAddButton:l.length>=tj,onChange:e8.lQ,openFile:t,overrideAddPropertyTooltip:(0,ta.t)("transition_overrides.transition_override_list.add_transition_override_tooltip"),pickerShown:null,propertyList:l,renderProperty:e=>(0,o.jsx)(tL,{selectedNodeId:n.id,transitionOverride:e.override,transitionOverrideProp:e.prop,assignedProps:a,singletonRow:l.length<=1}),selectedPropertyType:to.rrT.NONE,stylePickerShown:{isShown:!1},title:(0,ta.t)("transition_overrides.transition_override_list.title")})}):null}function tL({selectedNodeId:e,transitionOverride:t,transitionOverrideProp:n,assignedProps:a,recordingKey:l,singletonRow:s}){let[c,d]=(0,i.useState)(!1),u=(0,r.wA)(),_=(o,i,r)=>{eO.l7.user(r,()=>{let r=ti.UN()?.get(e);if(!r)return;let a=tk.from(r.transitionOverrideData),l=(a.get(n)??[]).map(e=>e.id===t.id?{...e,...o}:e);a.set(n,l),r.transitionOverrideData=a.cleaned().toBaseMap(),h(i)})},h=e=>{(e===tp.zk.YES||e===tp.zk.YES_FORCE_TRACKING_AS_EDIT)&&eE.glU?.commit()},m=(0,o.jsx)(tr.k,{isVisible:c,children:(0,o.jsx)("span",{className:"xfvqlek",children:(0,o.jsx)(te.K,{onClick:()=>{eO.l7.user("transition-override-delete",()=>{let o=ti.UN()?.get(e);if(!o)return;let i=tk.from(o.transitionOverrideData),r=(i.get(n)??[]).filter(e=>e.id!==t.id);r.length?i.set(n,r):i.delete(n),o.transitionOverrideData=i.cleaned().toBaseMap(),eE.glU?.commit()})},"aria-label":(0,ta.t)("transition_overrides.transition_override_item.remove_interaction_aria_label"),"data-tooltip":(0,ta.t)("transition_overrides.transition_override_item.remove_interaction_tooltip"),recordingKey:p.Pt(l,"removeButton"),onMouseDown:e=>{e.stopPropagation()},children:(0,o.jsx)(tt.r,{})})})}),g=(0,o.jsxs)("div",{className:"x78zum5 x6s0dn4 xlqzeqv",children:[(0,tl.av)("NAVIGATE_TO"),(0,o.jsx)("span",{children:(0,ta.tx)("transition_overrides.transition_override_item.transition_label")})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(th.vA,{htmlAttributes:{onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)}},input:g,icon:m,singletonRow:s,recordingKey:p.Pt(l,"row")}),(0,o.jsx)(t_.A,{label:(0,ta.t)("transition_overrides.transition_override_item.transition_duration_label"),input:(0,o.jsx)(L.W4,{className:"x180r7m8","data-tooltip":(0,ta.t)("transition_overrides.transition_override_item.transition_duration_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:u,min:0,onValueChange:(e,t)=>{_({duration:e},t,"transition-override-duration-change")},recordingKey:p.Pt(l,"durationInput"),scrubMultiplier:.01,tooltipForScreenReadersOnly:!0,value:t.duration,wheelMultiplier:1,children:(0,o.jsx)(tn.L,{className:"x47corl"})})}),(0,o.jsx)(t_.A,{label:(0,ta.t)("transition_overrides.transition_override_item.transition_delay_label"),input:(0,o.jsx)(L.W4,{className:"x180r7m8","data-tooltip":(0,ta.t)("transition_overrides.transition_override_item.transition_delay_tooltip"),"data-tooltip-type":w.Ib.TEXT,dispatch:u,min:0,onValueChange:(e,t)=>{_({delay:e},t,"transition-override-delay-change")},recordingKey:p.Pt(l,"delayInput"),scrubMultiplier:.01,tooltipForScreenReadersOnly:!0,value:t.delay,wheelMultiplier:1,children:(0,o.jsx)(tn.L,{className:"x47corl"})})}),(0,o.jsx)(t_.A,{label:(0,ta.t)("transition_overrides.transition_override_item.transition_easing_label"),input:(0,o.jsx)(tN,{easingType:t.easing.easingType,onEasingTypeChange:e=>{_({easing:{...t.easing,easingType:e,...tA(e)?{springValues:function(e){switch(e){case to.mgy.GENTLE_SPRING:return{mass:1,stiffness:100,damping:15};case to.mgy.SPRING_PRESET_ONE:return{mass:1,stiffness:300,damping:20};case to.mgy.SPRING_PRESET_TWO:return{mass:1,stiffness:600,damping:15};case to.mgy.SPRING_PRESET_THREE:return{mass:1,stiffness:80,damping:20};case to.mgy.CUSTOM_SPRING:default:return{mass:1,stiffness:100,damping:15}}}(e)}:{springValues:void 0},...tA(e)?{bezierValues:void 0}:{bezierValues:tm(e)}}},tp.zk.YES,"transition-override-easing-change")},recordingKey:p.Pt(l,"easingDropdown")})}),(0,o.jsx)(tO,{easingData:t.easing,children:(t.easing.easingType===to.mgy.CUSTOM_CUBIC||t.easing.easingType===to.mgy.CUSTOM_SPRING)&&(0,o.jsx)(tP,{easingType:t.easing.easingType,bezierValues:t.easing.bezierValues,springValues:t.easing.springValues,duration:t.duration,recordingKey:p.Pt(l,"easingEditor"),onSpringValuesChange:e=>{_({easing:{...t.easing,springValues:e}},tp.zk.YES,"transition-override-spring-values-change")},onBezierValuesChange:e=>{_({easing:{...t.easing,bezierValues:e}},tp.zk.YES,"transition-override-bezier-values-change")}})}),(0,o.jsx)(t_.A,{label:(0,ta.t)("transition_overrides.transition_override_item.transition_property_label"),input:(0,o.jsx)(tM,{currentProp:n,disabledProps:a,onChange:o=>{o!==n&&eO.l7.user("transition-override-property-change",()=>{let i=ti.UN()?.get(e);if(!i)return;let r=tk.from(i.transitionOverrideData);r.moveOverride(t.id,n,o)&&(i.transitionOverrideData=r.cleaned().toBaseMap(),eE.glU?.commit())})},recordingKey:p.Pt(l,"propertyDropdown")})})]})}function tM({currentProp:e,disabledProps:t,onChange:n,recordingKey:i}){return(0,o.jsxs)(P.Root,{value:e.toString(),onChange:e=>{null!=e&&n(Number(e))},recordingKey:p.Pt(i,"select"),children:[(0,o.jsx)(P.Trigger,{label:(0,o.jsx)(S.q,{children:(0,ta.t)("transition_overrides.transition_override_item.transition_property_label")}),width:"fill",children:tD(e)}),(0,o.jsx)(P.Container,{children:tb.map(n=>(0,o.jsx)(P.Option,{value:n.toString(),disabled:n!==e&&t.includes(n),children:tD(n)},n))})]})}var tU=n(65635),tK=n(622875),tB=n(735544),tV=n(32420),tF=n(461903),tG=n(977556);function tz(){return(0,o.jsx)(E.u,{idForTests:"create-connection-hint",title:(0,c.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:tV.A,iconFallback:tF.A,hintText:(0,c.t)("proto.onboarding.select_a_frame_or_object_hint")})}function tY(){return(0,o.jsx)(E.u,{idForTests:"delete-connection-hint",title:(0,c.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:tK.A,iconFallback:tB.A,hintText:(0,c.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function tH(){return(0,o.jsx)(E.u,{idForTests:"play-button-hint",title:(0,c.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:tG.A,hintText:(0,c.t)("proto.onboarding.use_the_play_button_hint")})}function tW({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r}){let a=0===r&&!e,l=0!==r&&!t,s=!n,c=i.useMemo(()=>a?_.c.CREATING_A_CONNECTION:l?_.c.REMOVING_A_CONNECTION:s?_.c.RUNNING_YOUR_PROTOTYPE:null,[a,l,s]);return c?(0,o.jsx)(h.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:c},children:(0,o.jsx)(W.Zk,{children:(0,o.jsxs)("div",{children:[a&&(0,o.jsx)(tz,{}),l&&(0,o.jsx)(tY,{}),s&&(0,o.jsx)(tH,{})]})})}):null}let tJ=(0,h.kp)(function(e){let t=e.noPassthrough?(0,r.d4)(e=>e.dropdownShown):e.dropdownShown,n=e.noPassthrough?(0,r.d4)(e=>e.pickerShown):e.pickerShown,_=e.noPassthrough?(0,r.d4)(e=>e.userFlags):e.userFlags,{isInstanceSelected:h,isInstanceSublayerSelected:N,isCodeInstanceSelected:E,isSectionSelected:C,isTopLevelFrameAndValidPrototypeSourceSelected:S,isValidPrototypingSourceSelected:P,numSelected:A,numTransitionsOnCurrentPage:b,numVideosSelected:j,prototypeBackgroundColor:D,prototypeDevice:k,prototypeStartingPointsInfo:R,transitionNodeID:w}={...(0,v.pw)("prototypeDevice","prototypeBackgroundColor","numSelected","numVideosSelected","transitionNodeID","isInstanceSublayerSelected","isInstanceSelected","isCodeInstanceSelected","isValidPrototypingSourceSelected","isTopLevelFrameAndValidPrototypeSourceSelected"),...(0,v.DQ)("isSectionSelected","numTransitionsOnCurrentPage","prototypeStartingPointsInfo")},L=(0,eK.cJ)(),{bigNudgeAmount:M,smallNudgeAmount:U}=(0,y.sT)(),K=function(e){let t=(0,v.Gt)("videoMediaLoop"),n=(0,v.Gt)("videoAutoplay"),o=(0,v.Gt)("videoMuted"),i=(0,v.Gt)("numVideosSelected");if(e)return(0,a.B1)(t),(0,a.B1)(n),(0,a.B1)(o),(0,a.B1)(i),{autoplay:n,muted:o,mediaLoop:t,numVideosSelected:i}}(!!j),B=(0,I.E7)(A),V=null!==B&&B>0,F=(0,r.wA)(),G=i.useCallback(()=>{F((0,f._P)({name:"Show Prototype Settings Clicked"})),x.wr()},[F]),z=i.useRef(!1),Y=i.useRef(!1),H=i.useCallback(()=>{Y.current=!0},[]),J=i.useCallback(()=>{Y.current=!1},[]),X=i.useRef(null),q=i.useRef(null);i.useEffect(()=>{if(!Y.current)return;if(z.current&&X.current){X.current.focus();return}let e=(0,m.xv)(q.current);e&&e.focus()},[V]);let Z=!(0,I.hS)(w)||s.fn((0,I.E7)(w)),$=!L&&!!j,ee=!L&&R&&R.length>0,et=L||Z?null:(0,o.jsx)(tW,{dismissedCreateConnectionHint:!!_.dismissed_create_connection_hint,dismissedDeleteConnectionHint:!!_.dismissed_delete_connection_hint,dismissedPlayButtonHint:!!_.dismissed_play_button_hint,numTransitionsOnCurrentPage:b}),en=!L&&((P??!0)||C&&(0,O.YR)()),ea=!L;return(0,a.KF)(V||L||(0,I.hS)(k),"should not have mixed device selection"),(0,o.jsxs)("div",{ref:q,onBlur:J,onFocus:H,onPointerDown:e=>{z.current=(0,l.n4)(e.nativeEvent)},children:[ea&&(0,o.jsx)(T.Mw,{panelName:T.ON.PROTOTYPE}),V?(0,o.jsxs)(o.Fragment,{children:[!L&&(0,o.jsx)(e9,{}),!L&&S&&(0,o.jsx)(er.Ay,{recordingKey:p.Pt(e,"startingPointPanel")}),en&&(0,o.jsx)(ei.y7,{}),(0,d.kc)().eclipse&&(0,o.jsx)(tR,{}),!E&&(0,o.jsx)(eG,{dropdownShown:t,disableOverflowBehaviorItem:!!(h||N),disableScrollBehaviorItem:!!N,recordingKey:p.Pt(e,"scrollBehaviorPanel")}),$&&(0,o.jsx)(ev,{updateSelectionProperties:g.Y5.updateSelectionProperties,dispatch:F,videoPlayback:K,recordingKey:p.Pt(e,"prototypeVideoPlaybackPanel")}),!L&&(0,o.jsx)(u.k,{name:"show_prototype_settings_panel",children:(0,o.jsx)(W.Zk,{className:tU.rq,children:(0,o.jsx)(ef.z,{onClick:G,recordingKey:p.Pt(e,"prototypeSettingsButton"),children:(0,c.tx)("proto.menu.show_prototype_settings")})})})]}):(0,o.jsxs)(o.Fragment,{children:[!L&&(0,o.jsx)(Q,{bigNudgeAmount:M,dispatch:F,isUI3:!0,pickerShown:n,prototypeBackgroundColor:D,prototypeDevice:(0,f.Qx)(k),recordingKey:"devicePanel",smallNudgeAmount:U,titleRef:X},"device-panel"),ee&&(0,o.jsx)(eo.A,{})]}),et,V&&(0,o.jsx)("div",{})]})},N.e0.PROTOTYPE_PANEL)},828473:(e,t,n)=>{n.d(t,{I:()=>w,b:()=>R});var o=n(239976),i=n(105652),r=n(20002),a=n(177102),l=n(288350),s=n(104626),c=n(207474),d=n(854225),p=n(379141),u=n(270450),_=n(589818),h=n.n(_),m=n(629036),g=n.n(m),y=n(901094),x=n.n(y),I=n(259225),v=n.n(I),f=n(499735),N=n(19047),T=n(421914),E=n(434183),O=n(985791),C=n(300573),S=n(630691),P=n(391459),A=n(498461),b=n(200744);let j="missing",D="MIXED",k={};function R(){let e=(0,E.h6)()||k,t=(0,A.iR)(),n=i.useMemo(()=>{let n=x()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key,extendedCollectionId:e.isExtension?e.node_id:null},name:t.name,sortPosition:t.sortPosition,isCompatible:!0,collectionName:e.name}))||[],explicitMode:null,inheritMode:null,libraryKey:e.library_key}));return h()({},e,n)},[t,e]),o=i.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.libraryKey,hasExtension:t.modeOptions.some(e=>null!==e.modeId.extendedCollectionId)})),[n]),a=i.useMemo(()=>Object.values(o).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[o]),l=i.useMemo(()=>v()(a.map(e=>e.modeData.libraryKey??b.CC)),[a]),s=(0,O.U)(l),[u,_]=i.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=g()(a,e=>e.isLocal?"_local":e.modeData.libraryKey&&s.data?.[e.modeData.libraryKey]===void 0?"_unknownFile":e.modeData.libraryKey),o=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{libraryKey:e,fileName:s.data?.[e]??""},...t]).flat(1);return t&&(o.push({libraryKey:b.CC,fileName:(0,p.t)("variables.mode_properties_panel.used_variables.subheading")}),o.push(...t)),[e??[],o]},[s,a]),m=(0,A.d2)(),y=i.useCallback(e=>{let t=m[(0,c.yG)(e)],n=a.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions.find(e=>!e.modeId.extendedCollectionId)?.modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&null===e.modeId.extendedCollectionId&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[m,a]),I=a.length>0?a[0]:void 0,f=I?.setKey,N=I?.modeData.collectionID,T=i.useMemo(()=>f&&y(f),[f,y]),S=(0,r.wA)();return{localVariableSets:u,allVariableSets:a,firstVariableSet:I,firstVariableSetID:N,firstVariableSetMode:T,getDefaultNewModeForVariableCollectionKey:y,reportAnalyticsEventWhenSelected:e=>{let t=d.mSn.getVariableSetInfoForSetModeAnalytics(e);S((0,C.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:_}}function w({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,variableSetTargetExtensionId:r,updateSelectionProperties:a,actionIndexPath:l}){let{getDefaultNewModeForVariableCollectionKey:c,allVariableSets:d,reportAnalyticsEventWhenSelected:u}=R(),{shouldShowAdvancedPrototypingPaywall:_,showAdvancedPrototypingVariablesModal:h}=(0,S.zt)();i.useEffect(()=>{if(!n||(0,T.gl)(n))return;let e=d.find(e=>e.setKey===n);e?((0,N.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,N.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,d,a]);let[m,g]=i.useMemo(()=>{let t=(0,T.gl)(e)||void 0===e?e:function(e,t,n){let o=e.find(e=>e.modeData.collectionID===t&&(n?e.hasExtension&&e.modeData.modeOptions.some(e=>e.modeId.extendedCollectionId===n):e.modeData.collectionID===t));if(o)return o;let i=s.gr.toRefIfSubscribed(t);if(i)return e.find(e=>e.setKey===i.key&&!n)}(d,e,r&&!(0,T.gl)(r)?r:void 0)||j,n=(()=>{if(!(0,T.gl)(t)&&void 0!==t&&t!==j)return t})();return[t,n]},[e,r,d]),y=i.useId(),x=(0,o.jsx)(M,{selectedVariableSet:m,onChange:e=>{_?h():(u(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:c(e.setKey),variableSetTargetExtensionId:void 0}))},actionIndexPath:l}),I=(0,o.jsx)(P.A,{input:x,label:(0,p.t)("proto.set_variable_mode.collection_label"),labelId:y}),v=i.useId(),f=(0,o.jsx)(K,{ariaLabelledBy:v,selectedVariableSetKey:g&&g.setKey,selectedVariableModeID:t,onChange:e=>{if(_)h();else{let t=g?.modeData.modeOptions.find(t=>t.modeId.guid===e);a({targetVariableModeID:e,variableSetTargetExtensionId:t?.modeId.extendedCollectionId??void 0})}},actionIndexPath:l}),E=(0,o.jsx)(P.A,{input:f,label:(0,p.t)("proto.set_variable_mode.mode_label"),labelId:v});return(0,o.jsxs)("div",{children:[I,g&&E]})}function L({group:e,groupIndex:t,dropdownId:n}){return(0,o.jsx)(a.Group,{title:(0,o.jsx)(a.Title,{children:e.headerText}),children:e.values.map(e=>(0,o.jsx)(a.Option,{value:e.setKey,children:void 0===e?(0,p.t)("proto.prototype_panel.edit_set_mode.none"):e===j?(0,p.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName},e.setKey))},f.Pt(n,"group",t))}function M({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let r="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:c,subscribedVariableSetsWithSections:d}=R(),u=i.useMemo(()=>{if(!(0,T.gl)(e)&&void 0!==e&&e!==j)return e.setKey},[e]),_=i.useMemo(()=>{let e=[];s.length>0&&e.push({headerText:(0,p.t)("variables.mode_properties_panel.assets_created_in_file.subheading"),values:s});let t={values:[]},n=()=>{t.values&&t.values.length>0&&e.push({headerText:t.headerText??"",values:t.values??[],libraryKey:t.libraryKey}),t={values:[]}};for(let e of d)"libraryKey"in e?(n(),t={headerText:e.fileName,values:[],libraryKey:e.libraryKey}):t.values?.push(e);return n(),e},[s,d]),h=i.useMemo(()=>(0,T.gl)(e)?D:u,[e,u]);return(0,o.jsxs)(a.Root,{value:h,onChange:e=>{if((0,T.gl)(e)||void 0===e||e===j)return;let n=c.find(t=>t.setKey===e);n&&t(n)},recordingKey:f.Pt(r,"select"),children:[(0,o.jsx)(a.Trigger,{label:(0,o.jsx)(l.h,{children:(0,p.t)("proto.set_variable_mode.collection_label")}),width:"fill",children:(0,T.gl)(e)?(0,p.t)("common.mixed"):void 0}),(0,o.jsxs)(a.Container,{children:[(0,T.gl)(e)&&(0,o.jsx)(a.Option,{value:D,disabled:!0,children:(0,p.t)("common.mixed")}),_.map((e,t)=>(0,o.jsx)(L,{group:e,groupIndex:t,dropdownId:r},t))]})]})}function U(e){return void 0===e?(0,p.t)("proto.prototype_panel.edit_set_mode.none"):e===D?(0,p.t)("common.mixed"):e===j?(0,p.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""}function K({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:r}){let s="set-variable-mode--select-variable-mode-"+r,{allVariableSets:c}=R(),d=i.useMemo(()=>c.find(t=>t.setKey===e)?.modeData.modeOptions,[e,c]),_=i.useMemo(()=>{if(!d)return[];let e=[...d].sort((e,t)=>{let n=e.modeId.collectionKey+(e.modeId.extendedCollectionId??""),o=t.modeId.collectionKey+(t.modeId.extendedCollectionId??"");return String(n).localeCompare(String(o))}),t={};for(let n of e){let e=n.modeId.extendedCollectionId??n.modeId.collectionKey,o=n.collectionName,i=t?.[e];i?i.modes.push(n):t[e]={name:o,modes:[n]}}return Object.entries(t).map(([e,{name:t,modes:n}])=>[t,n])},[d]),h=i.useMemo(()=>{if((0,T.gl)(t))return D;if(void 0===t)return;let e=d?.find(e=>e.modeId.guid===t);return e?e.modeId.guid:j},[t,d]);return(0,o.jsxs)(a.Root,{value:h,onChange:e=>{e&&e!==j&&e!==D&&n(e)},recordingKey:f.Pt(s,"select"),children:[(0,o.jsx)(a.Trigger,{label:(0,o.jsx)(l.h,{children:(0,p.t)("proto.set_variable_mode.mode_label")}),width:"fill",children:h===D?(0,p.t)("common.mixed"):void 0}),(0,o.jsxs)(a.Container,{children:[h===D&&(0,o.jsx)(a.Option,{value:D,disabled:!0,children:U(D)}),h===j&&(0,o.jsx)(a.Option,{value:j,disabled:!0,children:U(j)}),(0,u.kc)().ds_extended_collections?_.map(([e,t])=>(0,o.jsx)(a.Group,{title:(0,o.jsx)(a.Title,{children:e}),children:t.map(e=>(0,o.jsx)(a.Option,{value:e.modeId.guid,children:U(e)},e.modeId.guid))},f.Pt(s,"mode-group",e||"unnamed"))):d?.map(e=>o.jsx(a.Option,{value:e.modeId.guid,children:U(e)},e.modeId.guid))]})]})}},523783:(e,t,n)=>{n.d(t,{B:()=>x});var o=n(239976),i=n(105652),r=n(796557),a=n(751543),l=n(379141),s=n(239620),c=n(916626),d=n(979396),p=n(122313),u=n(434183),_=n(400773),h=n(236410),m=n(677743),g=n(690252),y=n(737019);let x=(0,c.w)(function(){let e=(0,y.y5)(),t=(0,_.nf)({type:y.ye,data:{source:"properties_panel"}}),n=(0,i.useCallback)(()=>{t()},[t]),c=(0,y.HQ)(),x=0===(0,u.Rb)().length&&!c;return e?null:(0,o.jsx)(p.k,{name:"local_variables_panel",children:(0,o.jsx)(g.Zk,{children:(0,o.jsxs)(g.fI,{className:x?"local_variables_panel--localVariablesPanelRowFaded--UQelT local_variables_panel--localVariablesPanelRow---r7yV draggable_list--panelHeaderRowFaded--JR1vo":"local_variables_panel--localVariablesPanelRow---r7yV",children:[(0,o.jsx)(m.xZ,{className:"local_variables_panel--titleText--OyoQF draggable_list--panelTitleText--Bj2Hu",onClick:n,"data-onboarding-key":"local-variables-panel-title",children:(0,l.tx)("variables.local_variables_panel.local_variables_title")}),(0,o.jsx)(d.E,{name:"variables_modal_button",children:(0,o.jsx)(r.d,{onClick:n,recordingKey:(0,s.Pt)("localVariablesPanel","variablesModalButton"),"aria-expanded":c,"aria-label":(0,l.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,l.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":h.Ib.TEXT},children:(0,o.jsx)(a.P,{})})})]})})})},"LocalVariablesPanel")},320226:(e,t,n)=>{n.d(t,{eT:()=>eT,OX:()=>eC,Lh:()=>eO,Ld:()=>eN,D6:()=>eE});var o=n(239976),i=n(105652),r=n(20002),a=n(220875),l=n(607696),s=n(270307),c=n(424364),d=n(727640),p=n(733200),u=n(547557),_=n(931547),h=n(517478),m=n(649109),g=n(796557);let y=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7.694 12c.316 0 .538.31.466.618a.49.49 0 0 1-.464.382h-.514c-.635 0-.953 0-1.206-.095a1.5 1.5 0 0 1-.881-.88C5 11.77 5 11.452 5 10.817V9a4 4 0 0 1 7.764-1.356c.088.244-.082.495-.333.563-.268.073-.548-.086-.654-.343A3 3 0 0 0 6 9v1.818c0 .33 0 .532.01.684.009.145.023.177.022.173a.5.5 0 0 0 .293.293 1 1 0 0 0 .173.022c.152.01.354.01.684.01zM14 18h2.692c.392 0 .631 0 .811-.014a1.3 1.3 0 0 0 .196-.028l.005-.002h.001a.5.5 0 0 0 .25-.25l.002-.002.001-.005.008-.03a1 1 0 0 0 .02-.166c.013-.18.014-.42.014-.81V14a4 4 0 1 0-4 4m5-4a5 5 0 1 0-5 5h2.692c.753 0 1.13 0 1.424-.132a1.5 1.5 0 0 0 .752-.752c.132-.294.132-.67.132-1.424z",clipRule:"evenodd"})})}),x=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M18 16.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6h9A1.5 1.5 0 0 1 18 7.5zM7.5 7a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h2V7zm6 0h-3v10h3zm3.5.5a.5.5 0 0 0-.5-.5h-2v10h2a.5.5 0 0 0 .5-.5z"})})});var I=n(649657),v=n(4245),f=n(104626),N=n(692376),T=n(854225),E=n(798913),O=n(466082),C=n(379141),S=n(270450),P=n(445019);n(323264);var A=n(955394),b=n(309742),j=n(371591),D=n(499735),k=n(577225),R=n(875253),w=n(592802),L=n(772293),M=n(964731),U=n(223487),K=n(456556),B=n(469543),V=n(326205),F=n(942895),G=n(4607),z=n(495853),Y=n(727550),H=n(544392),W=n(719518),J=n(682499),X=n(109833),q=n(368417),Z=n(865449),$=n(476099),Q=n(304903),ee=n(605985),et=n(203250),en=n(183290),eo=n(360485),ei=n(517178),er=n(934985),ea=n(820198),el=n(211464),es=n(740414),ec=n(351572);let ed=()=>[{title:(0,C.t)("living_designs.code_layer.suggestions.stat_counter"),prompt:(0,C.t)("living_designs.code_layer.suggestions.stat_counter.prompt")},{title:(0,C.t)("living_designs.code_layer.suggestions.gradient_background"),prompt:(0,C.t)("living_designs.code_layer.suggestions.gradient_background.prompt")},{title:(0,C.t)("living_designs.code_layer.suggestions.digital_clock"),prompt:(0,C.t)("living_designs.code_layer.suggestions.digital_clock.prompt")},{title:(0,C.t)("living_designs.code_layer.suggestions.small_game"),prompt:(0,C.t)("living_designs.code_layer.suggestions.small_game.prompt")}];function ep({isDefaultCode:e,onClickSuggestion:t}){let n=(0,et.ry)();return(0,o.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1h93xvk x78zum5 xdt5ytf x6s0dn4 x1v2ro7d x2b8uid x1rmx8ao",children:[(0,o.jsx)("div",{className:"x16rqkct x1v8gsql xe8ttls",children:(0,o.jsx)($.h,{})}),e?(0,C.t)("living_designs.chat.empty_state.from_scratch"):(0,C.t)("living_designs.chat.empty_state.from_design"),e&&(0,o.jsx)("div",{className:"xh8yej3 x78zum5 x1q0g3np x1a02dak x167g77z xl56j7k",children:ed().map((e,i)=>(0,o.jsx)(ei.t,{label:e.title,onClick:()=>t(e.prompt),disabled:n},i))})]})}function eu({codeFile:e,codeInstanceGuid:t,chatController:n,isResizingPanel:i,showCodeStreaming:r,featureType:a=l.lV.CODE_IN_SITES}){let[s,c]=(0,P.fp)((0,en.mC)(e?.guid??"")),d=(0,el.z)("living_designs_image_attachments"),p=(0,ea.GM)(),u=(0,ee.iZ)(),_=(0,U.tS)(),{changedFiles:h}=(0,er.E)(e,n,a);async function m(t,o){let i={...t,plainText:t.plainText??s};return c(""),await (0,ec.v)({featureType:a,userMessageContent:i,rawUserChatDetails:o,user:u,chatMessagesNode:e,chatController:n,setInput:c,fileKey:_,autoFixingUserMessageId:null,requestInitiator:l.bG.USER,canUseSupabase:!1,todoAutoAccept:p,changedFiles:h,canUseMcpConnectors:!1})}let g=e?f.Tq.fromLocalNodeIdStr(e.guid):void 0,y=e?.codeFilePath&&(0,el.z)("multi_file_code_layers"),x=g&&e&&!y?(0,es.nt)(e,g).name:void 0;return(0,o.jsx)(eo.U,{chatController:n,chatMessagesNode:e,chatMessagesNodeGuid:e?.guid??"",codeInstanceGuid:t,emptyState:(0,o.jsx)(ep,{isDefaultCode:!!e?.sourceCode&&!!N.z6l&&e?.sourceCode===Q.u.getCodeLayersDefaultEntryPointFile(T.BXJ.WEB_LAYER),onClickSuggestion:c}),enableImageAttachment:d,featureType:l.lV.CODE_IN_SITES,isResizingPanel:i,layerDisplayName:x,sendMessage:m,setInput:c,showChatHeader:!0,showCodeStreaming:r})}var e_=n(417643),eh=n(337341),em=n(757516),eg=n(373703),ey=n(612788),ex=n(542948),eI=n(125578),ev=n(379196),ef=n(59353);let eN=200;function eT(){let e=(0,P.md)(eg.wh),t=(0,K.Fk)((e,t)=>t.flatMap(t=>e.get(t)?.guid??[]),e),n=(0,i.useMemo)(()=>{let e=(0,O.UN)();return new Map(t.map(t=>[t,e.get(t)]).filter(e=>null!=e[1]))},[t]);if(!eg.LS){let e=Array.from(n.values())[0];return e?(0,o.jsx)(eP,{node:e}):null}return(0,o.jsx)(o.Fragment,{children:Array.from(n.values()).map(e=>(0,o.jsx)(eP,{node:e},e.guid))})}function eE(e,t){switch(e){case"chat":return[{id:"chat",defaultSize:25},{id:"preview",defaultSize:75}];case"split":return[{id:"chat",defaultSize:25},{id:"code",defaultSize:37.5},{id:"preview",defaultSize:37.5}];case"code":let n=[{id:"code",defaultSize:25},{id:"preview",defaultSize:70}];return t&&n.unshift({id:"file",defaultSize:5}),n;case"preview":return[{id:"preview",defaultSize:100}];case"code_no_preview":return[{id:"chat",defaultSize:25},{id:"file",defaultSize:5},{id:"code",defaultSize:70}]}}function eO({enabled:e,panelConfiguration:t,handleSegmentChange:n}){return e&&"code_no_preview"!==t?(0,o.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k x1iyjqo2 x1excjyp",children:(0,o.jsxs)(d.bL,{value:t,onChange:n,legend:(0,o.jsx)(p.q,{children:(0,C.t)("sites.panel.code_window_display_picker.hidden_legend")}),recordingKey:D.Pt("codeWindow","panelConfiguration"),children:[(0,o.jsx)(ef.A,{selectedValue:t,value:"chat",IconComponent:y,text:(0,C.t)("sites.panel.code_window_display_picker.chat")}),(0,o.jsx)(ef.A,{selectedValue:t,value:"split",IconComponent:x,text:(0,C.t)("sites.panel.code_window_display_picker.split")}),(0,o.jsx)(ef.A,{selectedValue:t,value:"code",IconComponent:I.U,text:(0,C.t)("sites.panel.code_window_display_picker.code")})]})}):null}function eC({nodeId:e,panels:t,onAddToCanvas:n,windowRef:r,isFullscreen:s,autoSaveId:c,minPanelSize:d=10}){let p=(0,O.UN)().get(e),[u,_]=(0,i.useState)(!1),h=(0,es.hh)(p),m=h?.guid,g=(0,q.qD)({codeFileNode:h}),y=(0,z.ON)(p)?l.lV.ANIMATION_PRESET:l.lV.CODE_IN_SITES,x=(0,P.md)(eg.zl),I=(0,P.md)(eg.hi),v=s?x:I,f=(0,em.Mg)(),N=(0,ev.qe)(p,f),E=i.useCallback(e=>{if(!m)return;let t=e_.O.get(m);t&&(e===Z.d.BUILD_ERROR||e===Z.d.RUNTIME_ERROR?t.hasErrors=!0:e===Z.d.LOADED&&(t.hasErrors=!1))},[m]),C=(0,U.tS)();(0,i.useEffect)(()=>{if(!m)return;let e=e_.O.start(C,m);return()=>e.end()},[m,C]);let{triggerSelfHeal:A}=(0,X.u)({chatMessagesNode:h,chatController:g,disabled:!(0,S.kc)().bake_auto_error_fix,featureType:y}),b=i.useCallback((e,t,n)=>{h&&A(h,n,t)},[A,h]),j=(0,P.md)(eg.Jl),D=(0,O.UN)().get(j),k=(0,P.md)(eg.T_),R=(0,O.UN)().get(k),w=((0,P.md)(H.s0)===T.Nfd.CODE?R:D)??h,L=i.useMemo(()=>{let e=h?.codeFilePath||void 0;return(0,o.jsx)(V.S,{selectedCodeFileNode:w,nodeWithChatMessages:h,featureType:y,rootPath:e})},[h,w,y]),M=i.useMemo(()=>{let e=N?.type==="instance"?N.codeInstanceNodeGuid:null;return(0,o.jsx)(eu,{codeFile:h,chatController:g,codeInstanceGuid:e,isResizingPanel:u,showCodeStreaming:"chat"===v,featureType:y})},[g,h,N?.codeInstanceNodeGuid,N?.type,u,v,y]),K=i.useMemo(()=>(0,o.jsx)(eh.RL,{codeFile:w,nodeWithChatMessages:h,fullHeight:!0}),[w,h]),{handleRegisterIframeRefresh:B,handleRefresh:F}=(0,ev.q3)(w),{handleScaleLinearly:Y}=(0,ev.gZ)({forceRefresh:F}),[W,J]=(0,i.useState)(null),$=i.useMemo(()=>N?(0,o.jsx)(G.A,{codeSelectionToRender:N,refresh:F,onScaleLinearly:Y,sitesPreview:W??void 0,onAddToCanvas:n}):null,[N,F,Y,W,n]),Q=i.useMemo(()=>(0,o.jsxs)(o.Fragment,{children:[$,(0,o.jsx)(ex.m,{chatNodeId:h?.guid??null,codeSelectionToRender:N,disablePointerEvents:u,isFullscreen:s,isVisible:!0,jsxDev:(0,S.kc)().code_layers_click_to_inspect,onError:b,onPreviewStateChange:E,onRegisterIframeRefresh:B,onRegisterSitesPreview:J,sandbox:null,showViewOptions:!0,surface:ey.e.SitesInFloatingModal,windowRef:r})]}),[N,r,h?.guid,E,s,u,b,B,$]),ee=i.useMemo(()=>t.map(({defaultSize:e,...n},r)=>{let l=r===t.length-1,s=n.id;return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)(a.Zk,{collapsible:!1,...n,defaultSize:Math.max(e,d),order:r,minSize:d,children:["file"===s&&L,"chat"===s&&M,"code"===s&&K,"preview"===s&&Q]}),!l&&(0,o.jsx)(a.TW,{onDragging:e=>{_(e)},className:"x1i1rx1s xbpqucl"})]},s)}),[t,d,L,M,K,Q]);return(0,o.jsx)("div",{className:"xh8yej3 x1n2onr6",style:{height:s?"calc(100% - 48px)":"100%"},children:(0,o.jsx)(a.YZ,{direction:"horizontal",autoSaveId:c,className:"x10l6tqk x10a8y8t",children:ee})})}let eS=({node:e})=>{let t=[],n=(0,P.md)(eg.hi),[,o]=(0,P.fp)(eg.zl),[,r]=(0,P.fp)(H.s0),{readOnlyUser:a}=(0,Y.S)(),l=(0,em.cu)(),s=l.length>0&&l[0],c=(0,K.Fk)(e=>!!s&&!!e.get(s)?.canBeRestoredToDesignNode(),s),d=i.useCallback(()=>{(0,z.Pu)(e,n,o,r)},[o,n,e,r]),p=i.useCallback(()=>{L.Y5.triggerActionEnumInUserEditScope(N.rcl.RESTORE_DESIGN_IN_PLACE_FROM_CODE,{targetCodeSelection:!0})},[]),u=i.useCallback(()=>{L.Y5.triggerActionEnumInUserEditScope(N.rcl.COPY_OUT_DESIGN_FROM_CODE,{targetCodeSelection:!0})},[]),_={displayText:(0,C.t)("sites.panel.code_window_open_in_code_view"),callback:d},h={displayText:(0,C.t)("fullscreen_actions.restore-design-in-place-from-code"),callback:p},m={displayText:(0,C.t)("fullscreen_actions.copy-out-design-from-code"),callback:u};return a||(0,z.ON)(e)||(t.push(_),c&&(t.push(h),t.push(m))),t};function eP({node:e,onClose:t}){let{Sprig:n}=(0,k.A)(),a=(0,P.md)(W.f),l=(0,r.wA)();(0,i.useEffect)(()=>{e&&N.z6l?.convertToMultiFileCodeLayer(e.guid)},[e]);let d=i.useCallback(e=>{"outside"!==e.source&&((0,eg.UM)(),t?.(),(0,S.kc)().sts_sprig_targeted_feedback&&a&&n("track","sites_code_layer_edit"))},[t,a,n]),p=function(){let e;let[{windowInnerWidth:t,windowInnerHeight:n}]=(0,A.A)((0,j.l)(),300,{equalityFn:s.c2}),[o,r]=(0,P.fp)(eg.yq);if(o){let i=(0,c.qE)(o.x,0,t-o.width),r=(0,c.qE)(o.y,0,n-o.height),a=(0,c.qE)(o.width,640,t-i),l=(0,c.qE)(o.height,480,n-r);e={x:i,y:r,width:a,height:l}}else{let o=(0,c.qE)(t*eb.targetPercentWidth,eb.minWidth,eb.maxWidth-2*eb.margin),i=(0,c.qE)(Math.min(o/eb.aspectRatio,n-2*eb.margin),eb.minHeight,eb.maxHeight);e={x:(t-o)/2,y:(n-i)/2,width:o,height:i}}let a=i.useMemo(()=>new R.Mi(e.x,e.y),[e.x,e.y]),l=i.useCallback(({x:e,y:t,width:n,height:i})=>{o&&e===o.x&&t===o.y&&n===o.width&&i===o.height||r({x:e,y:t,width:n,height:i})},[o,r]),d=i.useCallback(t=>{let n=t.size?.x??e.width,o=t.size?.y??e.height;l({x:t.position?.x??e.x,y:t.position?.y??e.y,width:n,height:o})},[l,e.width,e.height,e.x,e.y]);return{initialPosition:a,initialHeight:e.height,initialWidth:e.width,handleTransform:d,constraints:eA}}(),[y,x]=i.useState(p.initialWidth),I=(0,O.UN)(),D=(0,em.cu)(),K=D[0]?I.get(D[0]):null,V=(0,ev.wE)(K),G=(0,P.md)(eg.ZY),Y=(0,U.q5)(),H=(0,w.TT)(Y),[X,q]=(0,P.fp)(eg.hi),Z=eE(V&&!G?"preview":H?X:"code",void 0!==e.codeFilePath&&!!(0,S.kc)().multi_file_code_layers),$=(0,i.useCallback)(()=>{q(e=>"code"===e||"split"===e?e:"split")},[q]);(0,eI.sl)($);let Q=i.useRef(null),ee=i.useRef(null),et=(0,M.BK)("OPEN_IN_CODE_VIEW_DROPDOWN"),en=(0,P.md)(eg.DW),eo=(0,P.Xr)(J.YD);(0,b.h)(()=>{eo(!1)});let ei=eS({node:e}),er=(0,i.useRef)(null),ea=(0,u.R)(er),el=(0,i.useCallback)(t=>{if((0,z.ON)(e)){let n=(0,O.UN)(),o=f.n_.fromLocalNodeIdStr(e.guid);o&&E.l7.user("rename-animation-preset",()=>{T.mSn?.keyframeBindings(n.scene)?.renameAnimationPreset(o,t),L.Y5?.commit()})}},[e]);if(!e||!e.isAlive)return null;let es=G?e?.name:en,ec=(0,z.ON)(e);return(0,o.jsx)(_._L,{defaultWidth:p.initialWidth,defaultHeight:p.initialHeight,onClose:d,defaultPosition:p.initialPosition,onTransform:e=>{p.handleTransform(e),e.size&&x(e.size.x)},ref:Q,recordingKey:"sites-code-window",draggable:"header",constraints:p.constraints,children:(0,o.jsxs)(h.vo,{children:[(0,o.jsxs)(h.Y9,{children:[ec?(0,o.jsx)("div",{className:"x1iyjqo2 xs83m0k x1r8uery x1y8h3ww xb3r6kr xlyipyv xuxw1ft xamitd3 xshs1va x87ps6o xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,o.jsx)(F.v,{name:es??"",normalize:e=>e.trim()||null,validate:e=>e,onChange:el,testId:`animation-preset-window-name-${e.id}`})}):(0,o.jsx)(m.J,{ref:er,className:"x1iyjqo2 xs83m0k x1r8uery x1y8h3ww xb3r6kr xlyipyv xuxw1ft xamitd3 xshs1va x87ps6o xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",htmlAttributes:{"data-tooltip":ea?es:void 0,"data-tooltip-type":"text"},children:es}),(0,o.jsx)(eO,{enabled:H&&(!V||G),panelConfiguration:X,handleSegmentChange:q}),(0,o.jsxs)("div",{className:"x1iyjqo2 xs83m0k x1t1x2f9 x78zum5 x13a6bvl",children:[ei.length>0&&(0,o.jsx)("div",{className:"x1mh6rdz",children:(0,o.jsx)(g.d,{ref:ee,"aria-label":(0,C.t)("sites.panel.code_window_more_options"),"aria-expanded":et.showing,onClick:()=>{et.toggle()},children:(0,o.jsx)(v.J,{})})}),ei.length>0&&et.showing&&ee.current&&(0,o.jsx)(B.j,{items:ei,parentRect:ee.current.getBoundingClientRect(),dispatch:l,showPoint:!0,onSelectItem:e=>{e.callback&&e.callback("",null,l)}})]})]}),(0,o.jsx)(h.nB,{padding:0,scrolling:"manual",children:e?.isAlive&&(0,o.jsx)(eC,{nodeId:e.guid,windowRef:Q,panels:Z,minPanelSize:eN/y*100,autoSaveId:"CODE_WINDOW_AUTOSAVE_ID"})})]})})}let eA={minWidth:640,minHeight:480,maxWidth:"100vw",maxHeight:"100vh"},eb={minWidth:750,minHeight:500,maxWidth:1200,maxHeight:800,margin:16,targetPercentWidth:.6,aspectRatio:1.5}},727550:(e,t,n)=>{n.d(t,{S:()=>a});var o=n(20002),i=n(692376),r=n(518126);function a(){let e=(0,o.d4)(e=>(0,r.T)(e.progressBarState.mode)),t=(0,o.d4)(e=>e.mirror.appModel.isReadOnly||e.mirror.appModel.topLevelMode===i.lyf.HISTORY);return{fileLoading:e,readOnlyUser:e?void 0:t}}},66547:(e,t,n)=>{n.d(t,{r:()=>en});var o=n(239976),i=n(105652),r=n(20002),a=n(378721),l=n(248317),s=n(288350),c=n(316833),d=n(365094),p=n(379141),u=n(270450),_=n(445019);n(323264);var h=n(272439),m=n(499735),g=n(554654),y=n(199301),x=n(338630),I=n(421914),v=n(639280),f=n(563776),N=n(690252),T=n(648880),E=n(460166),O=n(2227),C=n(162251),S=n(709775),P=n(498461),A=n(872956),b=n(449979),j=n(692376),D=n(854225),k=n(798913),R=n(466082),w=n(723850),L=n(768781),M=n(888903),U=n(322750),K=n(816800),B=n(46295),V=n(118889),F=n(772293),G=n(384203),z=n(630691),Y=n(636174),H=n(550002);let W=(0,_.eU)(null),J=(e,t)=>{try{X(e,t)}catch{}try{q(e,t)}catch{}},X=(e,t)=>{let n=(0,K.Bv)(t);if(n){F.Y5.triggerActionEnumInUserEditScope(j.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:U._j.LINK,removeBoundData:!0,loggingSource:D.TsU.CMS_PROPERTIES_PANEL});return}k.l7.user(H.Tl,()=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,H.RZ)(t)&&(0,H.Ve)(t)}F.Y5.commit()})},q=(e,t)=>{let n=(0,K.X6)(t);k.l7.user(H.Tl,()=>{j.glU?.setHyperlinkOnCurrentSelection("",null),Z(e,t),F.Y5.commit()}),n&&F.Y5.triggerActionEnumInUserEditScope(j.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:U._j.LINK,removeBoundData:!0,loggingSource:D.TsU.CMS_PROPERTIES_PANEL})},Z=(e,t)=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,H.RZ)(t)&&(t.prototypeInteractions=(0,H.eF)(t.prototypeInteractions))}};function $(){let e=(0,G.eY)(),t=(0,G.KH)(),n=function(){let e=(0,w.U)();return(0,i.useCallback)(t=>{let n=(0,A.zX)(t);if(n)switch(n.type){case"back":e("sites_add_link",{linkType:"BACK_LINK_PRESET"});return;case"anchor_link":e("sites_add_link",{linkType:"ANCHOR_LINK_PRESET"});return;case"url":e("sites_add_link",{linkType:"URL"});return;case"internal":e("sites_add_link",{linkType:"INTERNAL_NODE"});return}},[e])}(),o=function(){let e=(0,w.hC)();return(0,i.useCallback)((t,n,o,i,r,a)=>{e("cms.item_page_link_added",{link_type:t,source_node_field_type:n,source_node_id:o,target_node_id:i,target_item_id:r,collection_id:a})},[e])}(),r=o=>{k.l7.user(H.Tl,()=>{for(let n of Object.keys(t)){let t=e.get(n);t&&(0,H.qe)(t,o)}F.Y5.commit()}),n(o)};return{addBackLinkPreset:()=>{r({...(0,z.Bs)("GO_BACK"),simpleLink:!0})},addAnchorLinkPreset:()=>{r({...(0,z.Bs)("SCROLL_TO"),transitionNodeID:O.Hr,simpleLink:!0})},addLinkAction:r,addCmsAliasLinkAction:(n,o,i)=>{let r=performance.now();k.l7.user("cms-set-link-binding",()=>{for(let r of Object.keys(t)){let t=e.get(r);t&&t.getNodesForCmsBinding(n).forEach(e=>e.setCmsLinkFieldBindingOnPrototypeAction(o,i))}F.Y5.commit()}),D._B?.trackConnectCmsField(D.TsU.CMS_PROPERTIES_PANEL,Object.keys(t)[0]??"",U._j.LINK,D.iZU.SUCCESS,o.value.fieldSchemaId,n,performance.now()-r)},addCmsRepeaterToItemPageLinkOnHyperlink:(n,i)=>{n&&(k.l7.user("cms-set-repeater-item-page-binding",()=>{for(let o of Object.keys(t)){let t=e.get(o);t&&t.getNodesForCmsBinding(n).forEach(e=>{e.setCmsRepeaterToItemPageLinkOnHyperlink(i)})}F.Y5.commit()}),o("repeater_to_item_page","hyperlink",Object.keys(t)[0]??"",i,"",n))},addCmsRepeaterToItemPageLinkOnPrototypeInteractions:(n,i)=>{n&&(k.l7.user("cms-set-repeater-item-page-binding",()=>{for(let o of Object.keys(t)){let t=e.get(o);t&&t.getNodesForCmsBinding(n).forEach(e=>{e.setCmsRepeaterToItemPageLinkOnPrototypeInteraction(i)})}F.Y5.commit()}),o("repeater_to_item_page","prototype_interaction",Object.keys(t)[0]??"",i,"",n))},addCmsItemPageLinkOnHyperlink:(n,i,r)=>{k.l7.user("cms-set-cms-item-page-link-binding",()=>{for(let o of Object.keys(t)){let t=e.get(o);t&&t.setCmsItemPageLinkOnHyperlink(n,i,r)}F.Y5.commit()}),o("item_page","hyperlink",Object.keys(t)[0]??"",n,i,"")},addCmsItemPageLinkOnPrototypeInteractions:(n,i,r)=>{k.l7.user("cms-set-cms-item-page-link-binding",()=>{for(let o of Object.keys(t)){let t=e.get(o);t&&t.setCmsItemPageLinkOnPrototypeInteraction(n,i,r)}F.Y5.commit()}),o("item_page","prototype_interaction",Object.keys(t)[0]??"",n,i,"")},setPropertiesForAnchorLink:({transitionNodeID:n,extraScrollOffset:o})=>{k.l7.user(H.Tl,()=>{for(let i of Object.keys(t)){let t=e.get(i);if(t){let e=t.prototypeInteractions,i=H.Nw.getClickInteraction(e),r=H.Nw.getMatchingAction(i);r&&(n&&(r.transitionNodeID=n),o&&(r.extraScrollOffset=o));let a=(0,H.l4)(e),l={prototypeInteractions:(i?[...a,i]:[...e]).map(e=>({...e,sourceNodeID:{sessionID:t.sessionID,localID:t.localID}}))};F.Y5.updateSelectionProperties(l)}}})},removeAllLinks:()=>{J(e,t)},removeHyperlink:()=>{q(e,t)},removeEmptyInteractions:()=>{Z(e,t)}}}function Q({shouldLinkPanelSetHyperlink:e}){let{addBackLinkPreset:t,addAnchorLinkPreset:n,addLinkAction:o,addCmsAliasLinkAction:a,addCmsRepeaterToItemPageLinkOnHyperlink:l,addCmsRepeaterToItemPageLinkOnPrototypeInteractions:s,addCmsItemPageLinkOnHyperlink:c,addCmsItemPageLinkOnPrototypeInteractions:d,removeHyperlink:h,removeEmptyInteractions:m}=$(),{setVariableConsumptionMap:g}=(0,P.R1)(),y=(0,G.eY)(),x=(0,G.KH)(),I=(0,r.d4)(S.Cy),v=function(){let e=(0,r.wA)(),t=(0,_.Xr)(W);return(0,i.useCallback)((n,o)=>{let i=(0,A.aE)(n);if(!i||0===i.length)return;let r=(0,R.UN)(),a=[];for(let e of i)for(let t of o){let n=r.get(t);if(n?.prototypeInteractions){let o=n.prototypeInteractions.find(t=>!!t.id&&!!e.id&&O.aI(t.id,e.id));if(o){a.push({interaction:o,sourceNodeGuid:t});break}}}t({deletedInteractions:a,selectedNodeIDs:o});let l=a.filter(({interaction:e})=>!!e.id).map(({interaction:e,sourceNodeGuid:t})=>L.d({nodeID:O.sH(t)??O.Hr,interactionID:e.id??O.Hr}));k.l7.user("delete-prototype-interaction-for-link",()=>{j.glU?.deleteInteractions(l)}),e(M.F.enqueue({message:(0,p.t)("sites.panel.link_panel.replace_click_interaction_bell.message",{numInteractions:i.length}),button:{text:(0,p.t)("sites.panel.link_panel.replace_click_interaction_bell.cta"),action:()=>{let e=_.zl.get(W);e&&(function(e){let t=(0,R.UN)(),n={};for(let t of e.selectedNodeIDs)n[t]=!0;k.l7.user(H.Tl,()=>{for(let{interaction:o,sourceNodeGuid:i}of(J(t,n),e.deletedInteractions)){let e=t.get(i);if(!e)continue;let n=[...e.prototypeInteractions||[],o];e.prototypeInteractions=n}F.Y5.commit()})}(e),_.zl.set(W,null))}}}))},[e,t])}(),f=(0,w.U)();return e?e=>{if((0,u.kc)().sts_links_v2&&v(I,Object.keys(x)),e?.type==="internal_cms_item_page")l(e.collectionId,e.id);else if(e?.type==="cms_link_field_alias"){if(!e.collectionId)return;k.l7.user("cms-set-link-binding",()=>{let t={type:D.Z_n.CMS_ALIAS,resolvedType:D.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},n=[];for(let t of Object.keys(x)){let o=y.get(t);o&&n.push(...o.getNodesForCmsBinding(e.collectionId))}let o=1===n.length?n[0]:null;if(0===n.length||o&&o.id===Object.keys(x)[0]){let e={};e.HYPERLINK=t,g(e),o&&j.glU?.setHyperlinkUnderlineOnNode(o.id)}else n.forEach(e=>{e.updateVariableConsumption("HYPERLINK",t),j.glU?.setHyperlinkUnderlineOnNode(e.id)});F.Y5.commit()})}else e?.type==="internal_cms_item_page_item"?c(e.id,e.itemId,e.fieldSchemaId):e?.type==="back"?(((0,Y.FD)()||(0,Y.nh)())&&h(),t()):e?.type==="anchor_link"?(((0,Y.FD)()||(0,Y.nh)())&&h(),n()):k.l7.user(H.Tl,()=>{null===e?j.glU?.setHyperlinkOnCurrentSelection("",null):"url"===e.type?(j.glU?.setHyperlinkOnCurrentSelection(V.xT(e.url),e.openInNewTab??null),m&&m(),f("sites_add_link",{linkType:"URL"})):"internal"===e.type&&(j.glU?.setHyperlinkOnCurrentSelection(F.Y5.generateLinkToNode(e.id),null),m&&m(),f("sites_add_link",{linkType:"INTERNAL_NODE"})),j.glU?.hideHyperlinkEditor()})}:e=>{if(h&&((0,Y.FD)()||(0,Y.nh)())&&h(),(0,u.kc)().sts_links_v2&&v(I,Object.keys(x)),null===e)o({connectionType:"NONE"});else if("url"===e.type){o({connectionType:"URL",connectionURL:(0,V.xT)(e.url),openUrlInNewTab:e.openInNewTab});return}else if("internal"===e.type){o({connectionType:"INTERNAL_NODE",transitionNodeID:O.sH(e.id)??O.Hr,navigationType:"NAVIGATE"});return}else"cms_link_field_alias"===e.type?a(e.collectionId,{type:D.Z_n.CMS_ALIAS,resolvedType:D.rXF.LINK,value:{collectionId:e.collectionId,fieldSchemaId:e.fieldId}},e.openInNewTab):"internal_cms_item_page"===e.type?s(e.collectionId,e.id):"internal_cms_item_page_item"===e.type?d(e.id,e.itemId,e.fieldSchemaId):"back"===e.type?t():"anchor_link"===e.type&&n()}}var ee=n(166783),et=n(902471);function en({isInteractionModal:e=!1,recordingKey:t}){let n=(0,r.d4)(A.C7),a=(0,_.Xr)(A.ZB),{setPropertiesForAnchorLink:l,removeAllLinks:s}=$(),c=function(){let e=(0,r.d4)(S.Cy),t=(0,G.eY)();return Object.keys((0,G.KH)()).every(n=>{let o=t.get(n);return o?.type==="TEXT"&&!(0,ee.ol)(e)})}(),d=function(){let e=(0,G.eY)(),t=(0,G.KH)();return(0,r.d4)(A.C7)&&Object.keys(t).every(t=>{let n=e.get(t);return n&&(0,H.RZ)(n)})}(),p=Q({shouldLinkPanelSetHyperlink:c}),u=function({shouldLinkPanelSetHyperlink:e}){let[t,n]=(0,C.lJ)("hyperlink"),{variableConsumptionMap:o}=(0,P.R1)(),i=(0,A.kE)(t,(0,A.vh)(o));return!!e&&((0,I.gl)(i)||(0,I.gl)(t))}({shouldLinkPanelSetHyperlink:c}),h=function({shouldLinkPanelSetHyperlink:e}){let t=(0,G.KH)(),n=(0,r.d4)(S.Cy),o=(0,A.bW)(n),i=(0,A.GH)(o),{variableConsumptionMap:a}=(0,P.R1)(),l=(0,A.w0)(i),s=Q({shouldLinkPanelSetHyperlink:e}),[c,d]=(0,C.lJ)("hyperlink"),p=(0,A.kE)(c,(0,A.vh)(a));return e?e=>{if(!(0,I.gl)(p)){if(p?.type==="cms_link_field_alias"){if((0,b.uy)(j.Egt)){(0,B.AK)("SceneGraphHelpers is nullish when it should be defined");return}let n=Object.keys(t),o=(0,R.UN)();for(let n of Object.keys(t)){let t=o.get(n);if(t)for(let n of t.getNodesForCmsBinding(p.collectionId))null!==n.hyperlink&&"mixed"!==n.hyperlink&&"URL"===n.hyperlink.type&&(j.Egt.replaceSelection([n.id],!1),d({url:n.hyperlink.value,openInNewTab:e}))}j.Egt.replaceSelection(n,!1)}else d({...p,openInNewTab:e})}}:e=>{switch(l?.type){case"url":case"cms_link_field_alias":s({...l,openInNewTab:e})}}}({shouldLinkPanelSetHyperlink:c}),{link:m,linkAction:g,cmsAliasData:y}=function({shouldLinkPanelSetHyperlink:e}){let t=(0,r.d4)(S.Cy),n=(0,A.j4)(t).map(e=>(0,A.GH)(e)).filter(e=>null!==e),o=n[0]??null,i=(0,A.w0)(o??null),[a]=(0,C.lJ)("hyperlink"),{variableConsumptionMap:l}=(0,P.R1)(),s=(0,A.kE)(a,(0,A.vh)(l)),{collectionId:c,fieldSchemaId:d}=(0,A.L4)(o??null,l),p={collectionId:c,fieldSchemaId:d};return!function(e,t){if((0,I.gl)(t))return!0;if(e.length>1){let t=e[0];if(!e.filter(e=>!!e).every(e=>(0,A.Ij)(e,t)))return!0}else if(0===e.length)return!1;if(t){let n=e[0]??null;switch(t.type){case"internal":if(t.id!==O.dI(n?.transitionNodeID))return!0;break;case"url":if(t.url!==n?.connectionURL||t.openInNewTab!==n?.openUrlInNewTab)return!0}}return!1}(n,s)?e?{link:s,linkAction:void 0,cmsAliasData:p}:{link:i,linkAction:o??void 0,cmsAliasData:p}:{link:I.oV,linkAction:void 0,cmsAliasData:p}}({shouldLinkPanelSetHyperlink:c}),x=function(){let e=(0,r.d4)(S.Cy);return!!(0,A.fI)(e.filter(e=>e.event?.interactionType==="ON_CLICK"))}();if(i.useEffect(()=>{if(!d){a(!1);return}if(m||x){a(!0);return}a(!1)},[d,m,a,x]),!d)return null;let v=c?(0,A.Si)(m):(0,A.Q6)(g??null,m);return(0,o.jsx)(eo,{cmsAliasData:y,disableOpenInNewTabCheckbox:u,disabled:!n,isInteractionModal:e,isLinkInternal:v,link:m,linkAction:g,onAddLink:()=>{a(!0)},onLinkChange:p,onOpenInNewTabChange:h,onRemoveLink:()=>{a(!1),s()},recordingKey:t,setPropertiesForAnchorLink:l})}function eo({link:e,linkAction:t,cmsAliasData:n,isLinkInternal:O,onLinkChange:C,onAddLink:S,onRemoveLink:P,onOpenInNewTabChange:b,setPropertiesForAnchorLink:j,disableOpenInNewTabCheckbox:D,disabled:k,isInteractionModal:R,recordingKey:w}){let L=(0,_.md)(A.ZB),M=(0,et.T0)(e),U=(0,r.wA)(),K=e&&!(0,I.gl)(e)&&("url"===e.type||"cms_link_field_alias"===e.type&&null!=e.openInNewTab&&!O),B=e&&!(0,I.gl)(e)&&e?.type==="url"&&(e?.url.startsWith("mailto:")||e?.url.startsWith("tel:")),V=(0,i.useCallback)(t=>{!e||(0,I.gl)(e)||e?.type!=="url"||(B?(0,v.UA)(U,e.url,"sites-link-panel"):U((0,y.RK)({rawInput:e.url,event:t})))},[U,B,e]),F=()=>!e||(0,I.gl)(e)||e?.type!=="url"?null:(0,o.jsx)(a.K,{onClick:V,children:B?(0,o.jsx)(c.h,{}):(0,o.jsx)(d.V,{}),"aria-label":B?(0,p.t)("sites.panel.copy_link"):(0,p.t)("sites.panel.open_link_new_tab")}),G=()=>(0,o.jsxs)(g.U,{collectionId:n.collectionId,fieldSchemaId:n.fieldSchemaId,type:"link",children:[(0,o.jsx)(h.DE,{label:null,input:(0,o.jsx)(Y.MO,{id:R?"interaction_modal":"link_panel",disabled:k,recordingKey:w,link:e,onLinkChange:C,showCMSLinkFields:(0,u.kc)().dakota,showCMSItemPages:(0,u.kc)().dakota,showLinkPresets:!0,error:M}),icon:F()}),K&&(0,o.jsx)(E.TN,{children:(0,o.jsx)(l.S,{label:(0,o.jsx)(s.J,{children:(0,p.tx)("proto.action_open_url_in_new_tab")}),onChange:b,recordingKey:m.Pt(w,"open-url-in-new-tab-check"),checked:e.openInNewTab,disabled:D})}),t&&!(0,I.gl)(e)&&e?.type==="anchor_link"&&(0,o.jsx)(f.k,{action:t,recordingKey:w,interactionType:"ON_CLICK",setPropertiesForAnchorLink:j,hideXOffset:!0,renderWithIconSpacing:!0})]});return(0,o.jsx)(x.fu,{name:"Link panel",children:(0,o.jsx)(N.Zk,{children:R?(0,o.jsx)("div",{className:"xz9dl7a",children:G()}):(0,o.jsx)(T.u,{title:(0,p.t)("sites.panel.link"),addProperty:S,removeProperty:P,contentsVisibleOrMixed:L,recordingKey:w,plusButtonLabel:(0,p.t)("sites.panel.create_link"),minusButtonLabel:(0,p.t)("sites.panel.remove_link"),children:G()})})})}},550002:(e,t,n)=>{n.d(t,{Nw:()=>o,RZ:()=>p,Tl:()=>h,Ve:()=>c,eF:()=>_,l4:()=>u,qe:()=>d});var o,i=n(449979),r=n(692376),a=n(2227),l=n(902471);function s(e){return e?e.filter(e=>"NONE"!==e.connectionType&&"URL"!==e.connectionType&&!("INTERNAL_NODE"===e.connectionType&&"NAVIGATE"===e.navigationType)&&!(0,l.cn)(e)&&!e.linkParam):[]}function c(e){let t=o.getClickInteraction(e.prototypeInteractions);if(!t)return;let n=s(t.actions);if(0===n.length)e.prototypeInteractions=u(e.prototypeInteractions);else{t.actions=n;let o=u(e.prototypeInteractions);e.prototypeInteractions=o.concat(t)}}function d(e,t){let n;if(!p(e))return;let l=o.getClickInteraction(e.prototypeInteractions),c=o.getMatchingAction(l),d=c?.openUrlInNewTab;if(t?.connectionType==="URL"&&c?.connectionType==="URL"&&(0,i.uy)(t.openUrlInNewTab)&&(0,i.Vq)(d)&&(t.openUrlInNewTab=d),l){let e=s(l.actions);l.actions=e.concat(t?[t]:[]),n=l}else n=function({id:e,action:t}){let n=e??null;if(!e){let e=r.glU.generateUniqueID();if(!e)throw Error("Failed to generate a unique id");n=a.sH(e)}if(!n)throw Error("No interaction ID");return{id:n,event:{interactionType:"ON_CLICK"},stateManagementVersion:1,actions:[t]}}({action:t});let _=u(e.prototypeInteractions);e.prototypeInteractions=_.concat(n)}function p(e){return!!(e&&!(e.isResponsiveSetOrWebpage||e.isResponsiveSetBreakpoint||e.isWebpageBreakpoint||e.isStateGroup||e.isSection||e.isHTMLWidget||e.isSlotReactive))}function u(e){return e.filter(e=>e.event?.interactionType!=="ON_CLICK")}function _(e){return e.filter(e=>!e.actions?.find(e=>"NONE"===e.connectionType))}(e=>{e.getClickInteraction=function(e){return e.find(e=>e.event?.interactionType==="ON_CLICK")??null},e.getMatchingAction=function(e){return e?.actions?.find(e=>"URL"===e.connectionType||"NAVIGATE"===e.navigationType||l.cn(e))??null}})(o||(o={}));let h="sites-link-panel"},121606:(e,t,n)=>{n.d(t,{qd:()=>i});var o=n(105652);n(854916),n(838405),n(631447),n(166783),n(629217),n(641731),n(550002),n(823015),n(935864),n(846779),n(842454),n(537e3);let i=o.createContext(void 0)},533262:(e,t,n)=>{n.d(t,{C:()=>r});var o=n(105652),i=n(239976);let r=(0,o.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.146 6.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 1 0 0 6h.5a.5.5 0 0 1 0 1H9a4 4 0 0 1 0-8h1.293L9.146 6.854a.5.5 0 0 1 0-.708M14 8.5a.5.5 0 0 1 .5-.5h.5a4 4 0 0 1 0 8h-1.293l1.147 1.146a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 1 0 0-6h-.5a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})})})}}]);

//# debugId=8629b5c6-fc09-5a19-92c0-d5ba7129434d

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/cc043e2953b71fb8d6d52bee108c610cf88e6d75/6525-6e1d378f9d02e6bd.min.js.map